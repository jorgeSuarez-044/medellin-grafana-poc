import './polyfills.server.mjs';
import{$ as Lv,$a as si,$b as yi,$c as Kg,A as yl,Aa as Qc,Ab as st,Ac as PE,B as Yc,Ba as Ng,Bb as Qo,Bc as kE,C as Rg,Ca as Ls,Cb as Ki,Cc as AE,D as Av,Da as Fo,Db as vf,Dc as DE,E as Os,Ea as ed,Eb as xE,Ec as RE,Ed as WE,F as XC,Fa as zv,Fb as Gr,Fc as El,G as pf,Ga as sE,Gb as z,Gc as Gg,H as ec,Ha as Fg,Hb as U,Hc as OE,I as Kc,Ia as zg,Ib as Ye,Ic as Oi,J as Dv,Ja as gh,Jb as yf,Jc as wf,K as YC,Ka as aE,Kb as xf,Kc as LE,L as Rv,La as gf,Lb as qg,Lc as Cf,M as KC,Ma as _h,Mb as Ri,Mc as NE,N as QC,Na as bh,Nb as Hg,Nc as FE,O as Ov,Oa as lE,Ob as kt,Oc as zE,P as Og,Pa as cE,Pb as at,Pc as rd,Q as xl,Qa as uE,Qb as zo,Qc as Wg,R as xo,Ra as dE,Rb as Pr,Rc as Zg,S as gn,Sa as hE,Sb as gs,Sc as ba,T as JC,Ta as pE,Tb as Wr,Tc as _s,U as Ur,Ua as fE,Ub as cr,Uc as Xg,V as Er,Va as Ns,Vb as ur,Vc as Yg,W as $a,Wa as mE,Wb as wE,Wc as wh,X as Nt,Xa as Ct,Xb as CE,Xc as _n,Y as Ii,Ya as gE,Yb as Zr,Yc as BE,Z as eE,Za as _f,Zb as ce,Zc as VE,_ as Bt,_a as ye,_b as ai,_c as Ef,a as No,aa as hi,ab as Bg,ac as _a,ad as Qg,b as HC,ba as Le,bb as Vg,bc as Zn,bd as UE,c as Jl,ca as Ku,cb as vh,cc as Xn,cd as Ch,d as Iv,da as Nv,db as tc,dc as Yn,dd as Sf,e as kg,ea as Ga,eb as yh,ec as Kn,ed as Tf,f as Mi,fa as tE,fb as bf,fc as EE,fd as nd,g as ps,ga as Wa,gb as Jc,gc as cn,gd as Jg,h as Zc,ha as fs,hb as _E,hc as qv,hd as Eh,i as yo,ia as Ko,ib as bE,ic as Rn,id as jE,j as ti,ja as jt,jb as vE,jc as td,jd as qE,k as Yu,ka as qt,kb as Bv,kc as xh,l as df,la as ff,lb as Ot,lc as Hv,m as $C,ma as iE,mb as Pi,mc as SE,n as GC,na as Za,nb as Ni,nc as $v,o as WC,oa as rE,ob as yE,oc as wo,p as wi,pa as Dn,pb as ms,pc as Gv,pd as HE,q as mh,qa as Qu,qb as Wn,qc as TE,qd as Mf,r as Rs,ra as nE,rb as Et,rc as ME,rd as e0,s as Pv,sa as mf,sb as eu,sc as Qi,t as Ag,ta as Yi,tb as Vv,tc as id,u as hf,ua as tr,ub as Uv,uc as wl,v as Dg,va as Ju,vb as Ug,vc as Cl,w as ZC,wa as oE,wb as jv,wc as ic,wd as $E,x as Xc,xa as hr,xb as jg,xc as Xa,xd as t0,y as ln,ya as Fv,yb as ga,yc as IE,z as kv,za as Lg,zb as yr,zc as $g,zd as GE}from"./chunk-3OOG6XYZ.mjs";import{a as gt,b as ui,d as Ql,e as J5,f as UC,g as jC,h as qi,i as Tv,j as Mv,k as uf,l as qC}from"./chunk-S6KH3LOX.mjs";var Kw=J5((Xw,Yw)=>{"use strict";(function(i,t){typeof Xw=="object"&&typeof Yw<"u"?Yw.exports=t():typeof define=="function"&&define.amd?define(t):(i=typeof globalThis<"u"?globalThis:i||self,i.maplibregl=t())})(Xw,function(){"use strict";var i={},t={};function e(a,s,_){if(t[a]=_,a==="index"){var w="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",C={};return t.shared(C),t.index(i,C),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([w],{type:"text/javascript"}))),i}}e("shared",["exports"],function(a){"use strict";function s(u,n,c,d){return new(c||(c=Promise))(function(f,b){function v(k){try{S(d.next(k))}catch(D){b(D)}}function x(k){try{S(d.throw(k))}catch(D){b(D)}}function S(k){var D;k.done?f(k.value):(D=k.value,D instanceof c?D:new c(function(L){L(D)})).then(v,x)}S((d=d.apply(u,n||[])).next())})}function _(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var w,C;function T(){if(C)return w;function u(n,c){this.x=n,this.y=c}return C=1,w=u,u.prototype={clone:function(){return new u(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,c){return this.clone()._rotateAround(n,c)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var c=n.x-this.x,d=n.y-this.y;return c*c+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,c){return Math.atan2(this.x*c-this.y*n,this.x*n+this.y*c)},_matMult:function(n){var c=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=c,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var c=Math.cos(n),d=Math.sin(n),f=d*this.x+c*this.y;return this.x=c*this.x-d*this.y,this.y=f,this},_rotateAround:function(n,c){var d=Math.cos(n),f=Math.sin(n),b=c.y+f*(this.x-c.x)+d*(this.y-c.y);return this.x=c.x+d*(this.x-c.x)-f*(this.y-c.y),this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(n){return n instanceof u?n:Array.isArray(n)?new u(n[0],n[1]):n},w}typeof SuppressedError=="function"&&SuppressedError;var I,P,R=_(T()),H=function(){if(P)return I;function u(n,c,d,f){this.cx=3*n,this.bx=3*(d-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(f-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=c,this.p2x=d,this.p2y=f}return P=1,I=u,u.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,c){if(c===void 0&&(c=1e-6),n<0)return 0;if(n>1)return 1;for(var d=n,f=0;f<8;f++){var b=this.sampleCurveX(d)-n;if(Math.abs(b)<c)return d;var v=this.sampleCurveDerivativeX(d);if(Math.abs(v)<1e-6)break;d-=b/v}var x=0,S=1;for(d=n,f=0;f<20&&(b=this.sampleCurveX(d),!(Math.abs(b-n)<c));f++)n>b?x=d:S=d,d=.5*(S-x)+x;return d},solve:function(n,c){return this.sampleCurveY(this.solveCurveX(n,c))}},I}(),Z=_(H);let X,fe;function ae(){return X==null&&(X=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),X}function ne(){if(fe==null&&(fe=!1,ae())){let n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let d=0;d<5*5;d++){let f=4*d;n.fillStyle=`rgb(${f},${f+1},${f+2})`,n.fillRect(d%5,Math.floor(d/5),1,1)}let c=n.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&c[d]!==d){fe=!0;break}}}return fe||!1}var re=1e-6,de=typeof Float32Array<"u"?Float32Array:Array;function oe(){var u=new de(9);return de!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function Ve(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function tt(){var u=new de(3);return de!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function dt(u){return Math.hypot(u[0],u[1],u[2])}function Je(u,n,c){var d=new de(3);return d[0]=u,d[1]=n,d[2]=c,d}Math.hypot||(Math.hypot=function(){for(var u=0,n=arguments.length;n--;)u+=arguments[n]*arguments[n];return Math.sqrt(u)});var we,Ge=dt;function yt(u,n,c){var d=n[0],f=n[1],b=n[2],v=n[3];return u[0]=c[0]*d+c[4]*f+c[8]*b+c[12]*v,u[1]=c[1]*d+c[5]*f+c[9]*b+c[13]*v,u[2]=c[2]*d+c[6]*f+c[10]*b+c[14]*v,u[3]=c[3]*d+c[7]*f+c[11]*b+c[15]*v,u}function le(){var u=new de(4);return de!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function te(){var u=new de(2);return de!=Float32Array&&(u[0]=0,u[1]=0),u}function V(u,n){var c=new de(2);return c[0]=u,c[1]=n,c}tt(),we=new de(4),de!=Float32Array&&(we[0]=0,we[1]=0,we[2]=0,we[3]=0),tt(),Je(1,0,0),Je(0,1,0),le(),le(),oe(),te();let me=8192;function Ue(u,n,c){return n*(me/(u.tileSize*Math.pow(2,c-u.tileID.overscaledZ)))}function ot(u,n){return(u%n+n)%n}function Rt(u,n,c){return u*(1-c)+n*c}function Ut(u){if(u<=0)return 0;if(u>=1)return 1;let n=u*u,c=n*u;return 4*(u<.5?c:3*(u-n)+c-.75)}function Fi(u,n,c,d){let f=new Z(u,n,c,d);return b=>f.solve(b)}let Pe=Fi(.25,.1,.25,1);function Ne(u,n,c){return Math.min(c,Math.max(n,u))}function Dt(u,n,c){let d=c-n,f=((u-n)%d+d)%d+n;return f===n?c:f}function di(u,...n){for(let c of n)for(let d in c)u[d]=c[d];return u}let Hr=1;function Uo(u,n,c){let d={};for(let f in u)d[f]=n.call(this,u[f],f,u);return d}function Ca(u,n,c){let d={};for(let f in u)n.call(this,u[f],f,u)&&(d[f]=u[f]);return d}function Ln(u){return Array.isArray(u)?u.map(Ln):typeof u=="object"&&u?Uo(u,Ln):u}let Nn={};function Ar(u){Nn[u]||(typeof console<"u"&&console.warn(u),Nn[u]=!0)}function rr(u,n,c){return(c.y-u.y)*(n.x-u.x)>(n.y-u.y)*(c.x-u.x)}function ao(u){return typeof WorkerGlobalScope<"u"&&u!==void 0&&u instanceof WorkerGlobalScope}let Gs=null;function lo(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}let Ol="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function el(u,n,c,d,f){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");let b=new VideoFrame(u,{timestamp:0});try{let v=b?.format;if(!v||!v.startsWith("BGR")&&!v.startsWith("RGB"))throw new Error(`Unrecognized format ${v}`);let x=v.startsWith("BGR"),S=new Uint8ClampedArray(d*f*4);if(yield b.copyTo(S,function(k,D,L,j,W){let Y=4*Math.max(1,0),ie=(Math.max(0,L)-L)*j*4+Y,he=4*j,ve=Math.max(0,D),Oe=Math.max(0,L);return{rect:{x:ve,y:Oe,width:Math.min(k.width,D+j)-ve,height:Math.min(k.height,L+W)-Oe},layout:[{offset:ie,stride:he}]}}(u,n,c,d,f)),x)for(let k=0;k<S.length;k+=4){let D=S[k];S[k]=S[k+2],S[k+2]=D}return S}finally{b.close()}})}let Qn,co;function ys(u,n,c,d){return u.addEventListener(n,c,d),{unsubscribe:()=>{u.removeEventListener(n,c,d)}}}function Ea(u){return u*Math.PI/180}function Fn(u){return u/Math.PI*180}let xs={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},zr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},tl="AbortError";function zi(){return new Error(tl)}let ts={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ws(u){return ts.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}let il="global-dispatcher";class uo extends Error{constructor(n,c,d,f){super(`AJAXError: ${c} (${n}): ${d}`),this.status=n,this.statusText=c,this.url=d,this.body=f}}let zn=()=>ao(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Io=function(u,n){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){let d=ws(u.url);if(d)return d(u,n);if(ao(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:il},n)}if(!(/^file:/.test(c=u.url)||/^file:/.test(zn())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,f){return s(this,void 0,void 0,function*(){let b=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:zn(),signal:f.signal}),v,x;d.type!=="json"||b.headers.has("Accept")||b.headers.set("Accept","application/json");try{v=yield fetch(b)}catch(k){throw new uo(0,k.message,d.url,new Blob)}if(!v.ok){let k=yield v.blob();throw new uo(v.status,v.statusText,d.url,k)}x=d.type==="arrayBuffer"||d.type==="image"?v.arrayBuffer():d.type==="json"?v.json():v.text();let S=yield x;if(f.signal.aborted)throw zi();return{data:S,cacheControl:v.headers.get("Cache-Control"),expires:v.headers.get("Expires")}})}(u,n);if(ao(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:il},n)}var c;return function(d,f){return new Promise((b,v)=>{var x;let S=new XMLHttpRequest;S.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(S.responseType="arraybuffer");for(let k in d.headers)S.setRequestHeader(k,d.headers[k]);d.type==="json"&&(S.responseType="text",!((x=d.headers)===null||x===void 0)&&x.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=d.credentials==="include",S.onerror=()=>{v(new Error(S.statusText))},S.onload=()=>{if(!f.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let k=S.response;if(d.type==="json")try{k=JSON.parse(S.response)}catch(D){return void v(D)}b({data:k,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{let k=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});v(new uo(S.status,S.statusText,d.url,k))}},f.signal.addEventListener("abort",()=>{S.abort(),v(zi())}),S.send(d.body)})}(u,n)};function qe(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;let n=new URL(u),c=window.location;return n.protocol===c.protocol&&n.host===c.host}function J(u,n,c){c[u]&&c[u].indexOf(n)!==-1||(c[u]=c[u]||[],c[u].push(n))}function q(u,n,c){if(c&&c[u]){let d=c[u].indexOf(n);d!==-1&&c[u].splice(d,1)}}class Q{constructor(n,c={}){di(this,c),this.type=n}}class pe extends Q{constructor(n,c={}){super("error",di({error:n},c))}}class xe{on(n,c){return this._listeners=this._listeners||{},J(n,c,this._listeners),{unsubscribe:()=>{this.off(n,c)}}}off(n,c){return q(n,c,this._listeners),q(n,c,this._oneTimeListeners),this}once(n,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},J(n,c,this._oneTimeListeners),this):new Promise(d=>this.once(n,d))}fire(n,c){typeof n=="string"&&(n=new Q(n,c||{}));let d=n.type;if(this.listens(d)){n.target=this;let f=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(let x of f)x.call(this,n);let b=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(let x of b)q(d,x,this._oneTimeListeners),x.call(this,n);let v=this._eventedParent;v&&(di(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(n))}else n instanceof pe&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,c){return this._eventedParent=n,this._eventedParentData=c,this}}var se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let De=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Be(u,n){let c={};for(let d in u)d!=="ref"&&(c[d]=u[d]);return De.forEach(d=>{d in n&&(c[d]=n[d])}),c}function He(u,n){if(Array.isArray(u)){if(!Array.isArray(n)||u.length!==n.length)return!1;for(let c=0;c<u.length;c++)if(!He(u[c],n[c]))return!1;return!0}if(typeof u=="object"&&u!==null&&n!==null){if(typeof n!="object"||Object.keys(u).length!==Object.keys(n).length)return!1;for(let c in u)if(!He(u[c],n[c]))return!1;return!0}return u===n}function Xe(u,n){u.push(n)}function je(u,n,c){Xe(c,{command:"addSource",args:[u,n[u]]})}function pt(u,n,c){Xe(n,{command:"removeSource",args:[u]}),c[u]=!0}function St(u,n,c,d){pt(u,c,d),je(u,n,c)}function It(u,n,c){let d;for(d in u[c])if(Object.prototype.hasOwnProperty.call(u[c],d)&&d!=="data"&&!He(u[c][d],n[c][d]))return!1;for(d in n[c])if(Object.prototype.hasOwnProperty.call(n[c],d)&&d!=="data"&&!He(u[c][d],n[c][d]))return!1;return!0}function ke(u,n,c,d,f,b){u=u||{},n=n||{};for(let v in u)Object.prototype.hasOwnProperty.call(u,v)&&(He(u[v],n[v])||c.push({command:b,args:[d,v,n[v],f]}));for(let v in n)Object.prototype.hasOwnProperty.call(n,v)&&!Object.prototype.hasOwnProperty.call(u,v)&&(He(u[v],n[v])||c.push({command:b,args:[d,v,n[v],f]}))}function li(u){return u.id}function Ft(u,n){return u[n.id]=n,u}class $e{constructor(n,c,d,f){this.message=(n?`${n}: `:"")+d,f&&(this.identifier=f),c!=null&&c.__line__&&(this.line=c.__line__)}}function Zi(u,...n){for(let c of n)for(let d in c)u[d]=c[d];return u}class Ht extends Error{constructor(n,c){super(c),this.message=c,this.key=n}}class _i{constructor(n,c=[]){this.parent=n,this.bindings={};for(let[d,f]of c)this.bindings[d]=f}concat(n){return new _i(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}let $t={kind:"null"},nt={kind:"number"},Xt={kind:"string"},ci={kind:"boolean"},sr={kind:"color"},Ji={kind:"projectionDefinition"},un={kind:"object"},it={kind:"value"},Jn={kind:"collator"},ho={kind:"formatted"},Fe={kind:"padding"},Ei={kind:"colorArray"},Bn={kind:"numberArray"},is={kind:"resolvedImage"},dr={kind:"variableAnchorOffsetCollection"};function xn(u,n){return{kind:"array",itemType:u,N:n}}function bi(u){if(u.kind==="array"){let n=bi(u.itemType);return typeof u.N=="number"?`array<${n}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${n}>`}return u.kind}let Sa=[$t,nt,Xt,ci,sr,Ji,ho,un,xn(it),Fe,Bn,Ei,is,dr];function Cs(u,n){if(n.kind==="error")return null;if(u.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Cs(u.itemType,n.itemType))&&(typeof u.N!="number"||u.N===n.N))return null}else{if(u.kind===n.kind)return null;if(u.kind==="value"){for(let c of Sa)if(!Cs(c,n))return null}}return`Expected ${bi(u)} but found ${bi(n)} instead.`}function Ll(u,n){return n.some(c=>c.kind===u.kind)}function At(u,n){return n.some(c=>c==="null"?u===null:c==="array"?Array.isArray(u):c==="object"?u&&!Array.isArray(u)&&typeof u=="object":c===typeof u)}function wn(u,n){return u.kind==="array"&&n.kind==="array"?u.itemType.kind===n.itemType.kind&&typeof u.N=="number":u.kind===n.kind}let Ws=.96422,rl=.82521,er=4/29,Ta=6/29,nl=3*Ta*Ta,Md=Ta*Ta*Ta,Zs=Math.PI/180,fp=180/Math.PI;function Id(u){return(u%=360)<0&&(u+=360),u}function Ma([u,n,c,d]){let f,b,v=Nl((.2225045*(u=Vn(u))+.7168786*(n=Vn(n))+.0606169*(c=Vn(c)))/1);u===n&&n===c?f=b=v:(f=Nl((.4360747*u+.3850649*n+.1430804*c)/Ws),b=Nl((.0139322*u+.0971045*n+.7141733*c)/rl));let x=116*v-16;return[x<0?0:x,500*(f-v),200*(v-b),d]}function Vn(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Nl(u){return u>Md?Math.pow(u,1/3):u/nl+er}function gc([u,n,c,d]){let f=(u+16)/116,b=isNaN(n)?f:f+n/500,v=isNaN(c)?f:f-c/200;return f=1*Ys(f),b=Ws*Ys(b),v=rl*Ys(v),[Xs(3.1338561*b-1.6168667*f-.4906146*v),Xs(-.9787684*b+1.9161415*f+.033454*v),Xs(.0719453*b-.2289914*f+1.4052427*v),d]}function Xs(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function Ys(u){return u>Ta?u*u*u:nl*(u-er)}let _c=Object.hasOwn||function(u,n){return Object.prototype.hasOwnProperty.call(u,n)};function Po(u,n){return _c(u,n)?u[n]:void 0}function Xi(u){return parseInt(u.padEnd(2,u),16)/255}function vu(u,n){return gr(n?u/100:u,0,1)}function gr(u,n,c){return Math.min(Math.max(n,u),c)}function ki(u){return!u.some(Number.isNaN)}let rs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Yr(u,n,c){return u+c*(n-u)}function Ia(u,n,c){return u.map((d,f)=>Yr(d,n[f],c))}class vi{constructor(n,c,d,f=1,b=!0){this.r=n,this.g=c,this.b=d,this.a=f,b||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[n,c,d,f]))}static parse(n){if(n instanceof vi)return n;if(typeof n!="string")return;let c=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];let f=Po(rs,d);if(f){let[v,x,S]=f;return[v/255,x/255,S/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){let v=d.length<6?1:2,x=1;return[Xi(d.slice(x,x+=v)),Xi(d.slice(x,x+=v)),Xi(d.slice(x,x+=v)),Xi(d.slice(x,x+v)||"ff")]}if(d.startsWith("rgb")){let v=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){let[x,S,k,D,L,j,W,Y,ie,he,ve,Oe]=v,Ee=[D||" ",W||" ",he].join("");if(Ee==="  "||Ee==="  /"||Ee===",,"||Ee===",,,"){let G=[k,j,ie].join(""),ue=G==="%%%"?100:G===""?255:0;if(ue){let Te=[gr(+S/ue,0,1),gr(+L/ue,0,1),gr(+Y/ue,0,1),ve?vu(+ve,Oe):1];if(ki(Te))return Te}}return}}let b=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){let[v,x,S,k,D,L,j,W,Y]=b,ie=[S||" ",D||" ",j].join("");if(ie==="  "||ie==="  /"||ie===",,"||ie===",,,"){let he=[+x,gr(+k,0,100),gr(+L,0,100),W?vu(+W,Y):1];if(ki(he))return function([ve,Oe,Ee,G]){function ue(Te){let Ze=(Te+ve/30)%12,_t=Oe*Math.min(Ee,1-Ee);return Ee-_t*Math.max(-1,Math.min(Ze-3,9-Ze,1))}return ve=Id(ve),Oe/=100,Ee/=100,[ue(0),ue(8),ue(4),G]}(he)}}}(n);return c?new vi(...c,!1):void 0}get rgb(){let{r:n,g:c,b:d,a:f}=this,b=f||1/0;return this.overwriteGetter("rgb",[n/b,c/b,d/b,f])}get hcl(){return this.overwriteGetter("hcl",function(n){let[c,d,f,b]=Ma(n),v=Math.sqrt(d*d+f*f);return[Math.round(1e4*v)?Id(Math.atan2(f,d)*fp):NaN,v,c,b]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ma(this.rgb))}overwriteGetter(n,c){return Object.defineProperty(this,n,{value:c}),c}toString(){let[n,c,d,f]=this.rgb;return`rgba(${[n,c,d].map(b=>Math.round(255*b)).join(",")},${f})`}static interpolate(n,c,d,f="rgb"){switch(f){case"rgb":{let[b,v,x,S]=Ia(n.rgb,c.rgb,d);return new vi(b,v,x,S,!1)}case"hcl":{let[b,v,x,S]=n.hcl,[k,D,L,j]=c.hcl,W,Y;if(isNaN(b)||isNaN(k))isNaN(b)?isNaN(k)?W=NaN:(W=k,x!==1&&x!==0||(Y=D)):(W=b,L!==1&&L!==0||(Y=v));else{let Ee=k-b;k>b&&Ee>180?Ee-=360:k<b&&b-k>180&&(Ee+=360),W=b+d*Ee}let[ie,he,ve,Oe]=function([Ee,G,ue,Te]){return Ee=isNaN(Ee)?0:Ee*Zs,gc([ue,Math.cos(Ee)*G,Math.sin(Ee)*G,Te])}([W,Y??Yr(v,D,d),Yr(x,L,d),Yr(S,j,d)]);return new vi(ie,he,ve,Oe,!1)}case"lab":{let[b,v,x,S]=gc(Ia(n.lab,c.lab,d));return new vi(b,v,x,S,!1)}}}}vi.black=new vi(0,0,0,1),vi.white=new vi(1,1,1,1),vi.transparent=new vi(0,0,0,0),vi.red=new vi(1,0,0,1);class Fl{constructor(n,c,d){this.sensitivity=n?c?"variant":"case":c?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,c){return this.collator.compare(n,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let zl=["bottom","center","top"];class $i{constructor(n,c,d,f,b,v){this.text=n,this.image=c,this.scale=d,this.fontStack=f,this.textColor=b,this.verticalAlign=v}}class ni{constructor(n){this.sections=n}static fromString(n){return new ni([new $i(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof ni?n:ni.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Ui{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Ui)return n;if(typeof n=="number")return new Ui([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(let c of n)if(typeof c!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Ui(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,c,d){return new Ui(Ia(n.values,c.values,d))}}class ar{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ar)return n;if(typeof n=="number")return new ar([n]);if(Array.isArray(n)){for(let c of n)if(typeof c!="number")return;return new ar(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,c,d){return new ar(Ia(n.values,c.values,d))}}class _r{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof _r)return n;if(typeof n=="string"){let d=vi.parse(n);return d?new _r([d]):void 0}if(!Array.isArray(n))return;let c=[];for(let d of n){if(typeof d!="string")return;let f=vi.parse(d);if(!f)return;c.push(f)}return new _r(c)}toString(){return JSON.stringify(this.values)}static interpolate(n,c,d,f="rgb"){let b=[];if(n.values.length!=c.values.length)throw new Error(`colorArray: Arrays have mismatched length (${n.values.length} vs. ${c.values.length}), cannot interpolate.`);for(let v=0;v<n.values.length;v++)b.push(vi.interpolate(n.values[v],c.values[v],d,f));return new _r(b)}}class lr extends Error{constructor(n){super(n),this.name="RuntimeError"}toJSON(){return this.message}}let po=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Kt{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Kt)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let c=0;c<n.length;c+=2){let d=n[c],f=n[c+1];if(typeof d!="string"||!po.has(d)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Kt(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,c,d){let f=n.values,b=c.values;if(f.length!==b.length)throw new lr(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${c.toString()}`);let v=[];for(let x=0;x<f.length;x+=2){if(f[x]!==b[x])throw new lr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${f[x]}, to[${x}]: ${b[x]}`);v.push(f[x]);let[S,k]=f[x+1],[D,L]=b[x+1];v.push([Yr(S,D,d),Yr(k,L,d)])}return new Kt(v)}}class Cn{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Cn({name:n,available:!1}):null}}class En{constructor(n,c,d){this.from=n,this.to=c,this.transition=d}static interpolate(n,c,d){return new En(n,c,d)}static parse(n){return n instanceof En?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new En(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new En(n.from,n.to,n.transition):typeof n=="string"?new En(n,n,1):void 0}}function ol(u,n,c,d){return typeof u=="number"&&u>=0&&u<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof c=="number"&&c>=0&&c<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[u,n,c,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[u,n,c,d]:[u,n,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ir(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof En||u instanceof vi||u instanceof Fl||u instanceof ni||u instanceof Ui||u instanceof ar||u instanceof _r||u instanceof Kt||u instanceof Cn)return!0;if(Array.isArray(u)){for(let n of u)if(!ir(n))return!1;return!0}if(typeof u=="object"){for(let n in u)if(!ir(u[n]))return!1;return!0}return!1}function fr(u){if(u===null)return $t;if(typeof u=="string")return Xt;if(typeof u=="boolean")return ci;if(typeof u=="number")return nt;if(u instanceof vi)return sr;if(u instanceof En)return Ji;if(u instanceof Fl)return Jn;if(u instanceof ni)return ho;if(u instanceof Ui)return Fe;if(u instanceof ar)return Bn;if(u instanceof _r)return Ei;if(u instanceof Kt)return dr;if(u instanceof Cn)return is;if(Array.isArray(u)){let n=u.length,c;for(let d of u){let f=fr(d);if(c){if(c===f)continue;c=it;break}c=f}return xn(c||it,n)}return un}function Ai(u){let n=typeof u;return u===null?"":n==="string"||n==="number"||n==="boolean"?String(u):u instanceof vi||u instanceof En||u instanceof ni||u instanceof Ui||u instanceof ar||u instanceof _r||u instanceof Kt||u instanceof Cn?u.toString():JSON.stringify(u)}class fi{constructor(n,c){this.type=n,this.value=c}static parse(n,c){if(n.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!ir(n[1]))return c.error("invalid value");let d=n[1],f=fr(d),b=c.expectedType;return f.kind!=="array"||f.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(f=b),new fi(f,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let Ks={string:Xt,number:nt,boolean:ci,object:un};class Jt{constructor(n,c){this.type=n,this.args=c}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");let d,f=1,b=n[0];if(b==="array"){let x,S;if(n.length>2){let k=n[1];if(typeof k!="string"||!(k in Ks)||k==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);x=Ks[k],f++}else x=it;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return c.error('The length argument to "array" must be a positive integer literal',2);S=n[2],f++}d=xn(x,S)}else{if(!Ks[b])throw new Error(`Types doesn't contain name = ${b}`);d=Ks[b]}let v=[];for(;f<n.length;f++){let x=c.parse(n[f],f,it);if(!x)return null;v.push(x)}return new Jt(d,v)}evaluate(n){for(let c=0;c<this.args.length;c++){let d=this.args[c].evaluate(n);if(!Cs(this.type,fr(d)))return d;if(c===this.args.length-1)throw new lr(`Expected value to be of type ${bi(this.type)}, but found ${bi(fr(d))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}let Pa={"to-boolean":ci,"to-color":sr,"to-number":nt,"to-string":Xt};class Sn{constructor(n,c){this.type=n,this.args=c}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");let d=n[0];if(!Pa[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&n.length!==2)return c.error("Expected one argument.");let f=Pa[d],b=[];for(let v=1;v<n.length;v++){let x=c.parse(n[v],v,it);if(!x)return null;b.push(x)}return new Sn(f,b)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let c,d;for(let f of this.args){if(c=f.evaluate(n),d=null,c instanceof vi)return c;if(typeof c=="string"){let b=n.parseColor(c);if(b)return b}else if(Array.isArray(c)&&(d=c.length<3||c.length>4?`Invalid rgba value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:ol(c[0],c[1],c[2],c[3]),!d))return new vi(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new lr(d||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(let d of this.args){c=d.evaluate(n);let f=Ui.parse(c);if(f)return f}throw new lr(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"numberArray":{let c;for(let d of this.args){c=d.evaluate(n);let f=ar.parse(c);if(f)return f}throw new lr(`Could not parse numberArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"colorArray":{let c;for(let d of this.args){c=d.evaluate(n);let f=_r.parse(c);if(f)return f}throw new lr(`Could not parse colorArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(let d of this.args){c=d.evaluate(n);let f=Kt.parse(c);if(f)return f}throw new lr(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(let d of this.args){if(c=d.evaluate(n),c===null)return 0;let f=Number(c);if(!isNaN(f))return f}throw new lr(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return ni.fromString(Ai(this.args[0].evaluate(n)));case"resolvedImage":return Cn.fromString(Ai(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return Ai(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}let yu=["Unknown","Point","LineString","Polygon"];class Es{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?yu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let c=this._parseColorCache.get(n);return c||(c=vi.parse(n),this._parseColorCache.set(n,c)),c}}class Yt{constructor(n,c,d=[],f,b=new _i,v=[]){this.registry=n,this.path=d,this.key=d.map(x=>`[${x}]`).join(""),this.scope=b,this.errors=v,this.expectedType=f,this._isConstant=c}parse(n,c,d,f,b={}){return c?this.concat(c,d,f)._parse(n,b):this._parse(n,b)}_parse(n,c){function d(f,b,v){return v==="assert"?new Jt(b,[f]):v==="coerce"?new Sn(b,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let b=this.registry[f];if(b){let v=b.parse(n,this);if(!v)return null;if(this.expectedType){let x=this.expectedType,S=v.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value"){if(x.kind==="projectionDefinition"&&["string","array"].includes(S.kind)||["color","formatted","resolvedImage"].includes(x.kind)&&["value","string"].includes(S.kind)||["padding","numberArray"].includes(x.kind)&&["value","number","array"].includes(S.kind)||x.kind==="colorArray"&&["value","string","array"].includes(S.kind)||x.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(S.kind))v=d(v,x,c.typeAnnotation||"coerce");else if(this.checkSubtype(x,S))return null}else v=d(v,x,c.typeAnnotation||"assert")}if(!(v instanceof fi)&&v.type.kind!=="resolvedImage"&&this._isConstant(v)){let x=new Es;try{v=new fi(v.type,v.evaluate(x))}catch(S){return this.error(S.message),null}}return v}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,c,d){let f=typeof n=="number"?this.path.concat(n):this.path,b=d?this.scope.concat(d):this.scope;return new Yt(this.registry,this._isConstant,f,c||null,b,this.errors)}error(n,...c){let d=`${this.key}${c.map(f=>`[${f}]`).join("")}`;this.errors.push(new Ht(d,n))}checkSubtype(n,c){let d=Cs(n,c);return d&&this.error(d),d}}class Si{constructor(n,c){this.type=c.type,this.bindings=[].concat(n),this.result=c}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(let c of this.bindings)n(c[1]);n(this.result)}static parse(n,c){if(n.length<4)return c.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);let d=[];for(let b=1;b<n.length-1;b+=2){let v=n[b];if(typeof v!="string")return c.error(`Expected string, but found ${typeof v} instead.`,b);if(/[^a-zA-Z0-9_]/.test(v))return c.error("Variable names must contain only alphanumeric characters or '_'.",b);let x=c.parse(n[b+1],b+1);if(!x)return null;d.push([v,x])}let f=c.parse(n[n.length-1],n.length-1,c.expectedType,d);return f?new Si(d,f):null}outputDefined(){return this.result.outputDefined()}}class ko{constructor(n,c){this.type=c.type,this.name=n,this.boundExpression=c}static parse(n,c){if(n.length!==2||typeof n[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");let d=n[1];return c.scope.has(d)?new ko(d,c.scope.get(d)):c.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class ka{constructor(n,c,d){this.type=n,this.index=c,this.input=d}static parse(n,c){if(n.length!==3)return c.error(`Expected 2 arguments, but found ${n.length-1} instead.`);let d=c.parse(n[1],1,nt),f=c.parse(n[2],2,xn(c.expectedType||it));return d&&f?new ka(f.type.itemType,d,f):null}evaluate(n){let c=this.index.evaluate(n),d=this.input.evaluate(n);if(c<0)throw new lr(`Array index out of bounds: ${c} < 0.`);if(c>=d.length)throw new lr(`Array index out of bounds: ${c} > ${d.length-1}.`);if(c!==Math.floor(c))throw new lr(`Array index must be an integer, but found ${c} instead.`);return d[c]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class jo{constructor(n,c){this.type=ci,this.needle=n,this.haystack=c}static parse(n,c){if(n.length!==3)return c.error(`Expected 2 arguments, but found ${n.length-1} instead.`);let d=c.parse(n[1],1,it),f=c.parse(n[2],2,it);return d&&f?Ll(d.type,[ci,Xt,nt,$t,it])?new jo(d,f):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(d.type)} instead`):null}evaluate(n){let c=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!d)return!1;if(!At(c,["boolean","string","number","null"]))throw new lr(`Expected first argument to be of type boolean, string, number or null, but found ${bi(fr(c))} instead.`);if(!At(d,["string","array"]))throw new lr(`Expected second argument to be of type array or string, but found ${bi(fr(d))} instead.`);return d.indexOf(c)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Aa{constructor(n,c,d){this.type=nt,this.needle=n,this.haystack=c,this.fromIndex=d}static parse(n,c){if(n.length<=2||n.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);let d=c.parse(n[1],1,it),f=c.parse(n[2],2,it);if(!d||!f)return null;if(!Ll(d.type,[ci,Xt,nt,$t,it]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(d.type)} instead`);if(n.length===4){let b=c.parse(n[3],3,nt);return b?new Aa(d,f,b):null}return new Aa(d,f)}evaluate(n){let c=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!At(c,["boolean","string","number","null"]))throw new lr(`Expected first argument to be of type boolean, string, number or null, but found ${bi(fr(c))} instead.`);let f;if(this.fromIndex&&(f=this.fromIndex.evaluate(n)),At(d,["string"])){let b=d.indexOf(c,f);return b===-1?-1:[...d.slice(0,b)].length}if(At(d,["array"]))return d.indexOf(c,f);throw new lr(`Expected second argument to be of type array or string, but found ${bi(fr(d))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Da{constructor(n,c,d,f,b,v){this.inputType=n,this.type=c,this.input=d,this.cases=f,this.outputs=b,this.otherwise=v}static parse(n,c){if(n.length<5)return c.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return c.error("Expected an even number of arguments.");let d,f;c.expectedType&&c.expectedType.kind!=="value"&&(f=c.expectedType);let b={},v=[];for(let k=2;k<n.length-1;k+=2){let D=n[k],L=n[k+1];Array.isArray(D)||(D=[D]);let j=c.concat(k);if(D.length===0)return j.error("Expected at least one branch label.");for(let Y of D){if(typeof Y!="number"&&typeof Y!="string")return j.error("Branch labels must be numbers or strings.");if(typeof Y=="number"&&Math.abs(Y)>Number.MAX_SAFE_INTEGER)return j.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Y=="number"&&Math.floor(Y)!==Y)return j.error("Numeric branch labels must be integer values.");if(d){if(j.checkSubtype(d,fr(Y)))return null}else d=fr(Y);if(b[String(Y)]!==void 0)return j.error("Branch labels must be unique.");b[String(Y)]=v.length}let W=c.parse(L,k,f);if(!W)return null;f=f||W.type,v.push(W)}let x=c.parse(n[1],1,it);if(!x)return null;let S=c.parse(n[n.length-1],n.length-1,f);return S?x.type.kind!=="value"&&c.concat(1).checkSubtype(d,x.type)?null:new Da(d,f,x,b,v,S):null}evaluate(n){let c=this.input.evaluate(n);return(fr(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class tn{constructor(n,c,d){this.type=n,this.branches=c,this.otherwise=d}static parse(n,c){if(n.length<4)return c.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return c.error("Expected an odd number of arguments.");let d;c.expectedType&&c.expectedType.kind!=="value"&&(d=c.expectedType);let f=[];for(let v=1;v<n.length-1;v+=2){let x=c.parse(n[v],v,ci);if(!x)return null;let S=c.parse(n[v+1],v+1,d);if(!S)return null;f.push([x,S]),d=d||S.type}let b=c.parse(n[n.length-1],n.length-1,d);if(!b)return null;if(!d)throw new Error("Can't infer output type");return new tn(d,f,b)}evaluate(n){for(let[c,d]of this.branches)if(c.evaluate(n))return d.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(let[c,d]of this.branches)n(c),n(d);n(this.otherwise)}outputDefined(){return this.branches.every(([n,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class Qs{constructor(n,c,d,f){this.type=n,this.input=c,this.beginIndex=d,this.endIndex=f}static parse(n,c){if(n.length<=2||n.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);let d=c.parse(n[1],1,it),f=c.parse(n[2],2,nt);if(!d||!f)return null;if(!Ll(d.type,[xn(it),Xt,it]))return c.error(`Expected first argument to be of type array or string, but found ${bi(d.type)} instead`);if(n.length===4){let b=c.parse(n[3],3,nt);return b?new Qs(d.type,d,f,b):null}return new Qs(d.type,d,f)}evaluate(n){let c=this.input.evaluate(n),d=this.beginIndex.evaluate(n),f;if(this.endIndex&&(f=this.endIndex.evaluate(n)),At(c,["string"]))return[...c].slice(d,f).join("");if(At(c,["array"]))return c.slice(d,f);throw new lr(`Expected first argument to be of type array or string, but found ${bi(fr(c))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Bl(u,n){let c=u.length-1,d,f,b=0,v=c,x=0;for(;b<=v;)if(x=Math.floor((b+v)/2),d=u[x],f=u[x+1],d<=n){if(x===c||n<f)return x;b=x+1}else{if(!(d>n))throw new lr("Input is not a number.");v=x-1}return 0}class Js{constructor(n,c,d){this.type=n,this.input=c,this.labels=[],this.outputs=[];for(let[f,b]of d)this.labels.push(f),this.outputs.push(b)}static parse(n,c){if(n.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return c.error("Expected an even number of arguments.");let d=c.parse(n[1],1,nt);if(!d)return null;let f=[],b=null;c.expectedType&&c.expectedType.kind!=="value"&&(b=c.expectedType);for(let v=1;v<n.length;v+=2){let x=v===1?-1/0:n[v],S=n[v+1],k=v,D=v+1;if(typeof x!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(f.length&&f[f.length-1][0]>=x)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);let L=c.parse(S,D,b);if(!L)return null;b=b||L.type,f.push([x,L])}return new Js(b,d,f)}evaluate(n){let c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(n);let f=this.input.evaluate(n);if(f<=c[0])return d[0].evaluate(n);let b=c.length;return f>=c[b-1]?d[b-1].evaluate(n):d[Bl(c,f)].evaluate(n)}eachChild(n){n(this.input);for(let c of this.outputs)n(c)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function rn(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var bc,vc,Pd=function(){if(vc)return bc;function u(n,c,d,f){this.cx=3*n,this.bx=3*(d-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(f-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=c,this.p2x=d,this.p2y=f}return vc=1,bc=u,u.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,c){if(c===void 0&&(c=1e-6),n<0)return 0;if(n>1)return 1;for(var d=n,f=0;f<8;f++){var b=this.sampleCurveX(d)-n;if(Math.abs(b)<c)return d;var v=this.sampleCurveDerivativeX(d);if(Math.abs(v)<1e-6)break;d-=b/v}var x=0,S=1;for(d=n,f=0;f<20&&(b=this.sampleCurveX(d),!(Math.abs(b-n)<c));f++)n>b?x=d:S=d,d=.5*(S-x)+x;return d},solve:function(n,c){return this.sampleCurveY(this.solveCurveX(n,c))}},bc}(),mp=rn(Pd);class Tn{constructor(n,c,d,f,b){this.type=n,this.operator=c,this.interpolation=d,this.input=f,this.labels=[],this.outputs=[];for(let[v,x]of b)this.labels.push(v),this.outputs.push(x)}static interpolationFactor(n,c,d,f){let b=0;if(n.name==="exponential")b=Vl(c,n.base,d,f);else if(n.name==="linear")b=Vl(c,1,d,f);else if(n.name==="cubic-bezier"){let v=n.controlPoints;b=new mp(v[0],v[1],v[2],v[3]).solve(Vl(c,1,d,f))}return b}static parse(n,c){let[d,f,b,...v]=n;if(!Array.isArray(f)||f.length===0)return c.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){let k=f[1];if(typeof k!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:k}}else{if(f[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(f[0])}`,1,0);{let k=f.slice(1);if(k.length!==4||k.some(D=>typeof D!="number"||D<0||D>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:k}}}if(n.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(b=c.parse(b,2,nt),!b)return null;let x=[],S=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||c.expectedType==Ei?c.expectedType&&c.expectedType.kind!=="value"&&(S=c.expectedType):S=sr;for(let k=0;k<v.length;k+=2){let D=v[k],L=v[k+1],j=k+3,W=k+4;if(typeof D!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(x.length&&x[x.length-1][0]>=D)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',j);let Y=c.parse(L,W,S);if(!Y)return null;S=S||Y.type,x.push([D,Y])}return wn(S,nt)||wn(S,Ji)||wn(S,sr)||wn(S,Fe)||wn(S,Bn)||wn(S,Ei)||wn(S,dr)||wn(S,xn(nt))?new Tn(S,d,f,b,x):c.error(`Type ${bi(S)} is not interpolatable.`)}evaluate(n){let c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(n);let f=this.input.evaluate(n);if(f<=c[0])return d[0].evaluate(n);let b=c.length;if(f>=c[b-1])return d[b-1].evaluate(n);let v=Bl(c,f),x=Tn.interpolationFactor(this.interpolation,f,c[v],c[v+1]),S=d[v].evaluate(n),k=d[v+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Yr(S,k,x);case"color":return vi.interpolate(S,k,x);case"padding":return Ui.interpolate(S,k,x);case"colorArray":return _r.interpolate(S,k,x);case"numberArray":return ar.interpolate(S,k,x);case"variableAnchorOffsetCollection":return Kt.interpolate(S,k,x);case"array":return Ia(S,k,x);case"projectionDefinition":return En.interpolate(S,k,x)}case"interpolate-hcl":switch(this.type.kind){case"color":return vi.interpolate(S,k,x,"hcl");case"colorArray":return _r.interpolate(S,k,x,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return vi.interpolate(S,k,x,"lab");case"colorArray":return _r.interpolate(S,k,x,"lab")}}}eachChild(n){n(this.input);for(let c of this.outputs)n(c)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Vl(u,n,c,d){let f=d-c,b=u-c;return f===0?0:n===1?b/f:(Math.pow(n,b)-1)/(Math.pow(n,f)-1)}let ns={color:vi.interpolate,number:Yr,padding:Ui.interpolate,numberArray:ar.interpolate,colorArray:_r.interpolate,variableAnchorOffsetCollection:Kt.interpolate,array:Ia};class Ra{constructor(n,c){this.type=n,this.args=c}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");let d=null,f=c.expectedType;f&&f.kind!=="value"&&(d=f);let b=[];for(let x of n.slice(1)){let S=c.parse(x,1+b.length,d,void 0,{typeAnnotation:"omit"});if(!S)return null;d=d||S.type,b.push(S)}if(!d)throw new Error("No output type");let v=f&&b.some(x=>Cs(f,x.type));return new Ra(v?it:d,b)}evaluate(n){let c,d=null,f=0;for(let b of this.args)if(f++,d=b.evaluate(n),d&&d instanceof Cn&&!d.available&&(c||(c=d.name),d=null,f===this.args.length&&(d=c)),d!==null)break;return d}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function eo(u,n){return u==="=="||u==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Ao(u,n,c,d){return d.compare(n,c)===0}function ea(u,n,c){let d=u!=="=="&&u!=="!=";return class o3{constructor(b,v,x){this.type=ci,this.lhs=b,this.rhs=v,this.collator=x,this.hasUntypedArgument=b.type.kind==="value"||v.type.kind==="value"}static parse(b,v){if(b.length!==3&&b.length!==4)return v.error("Expected two or three arguments.");let x=b[0],S=v.parse(b[1],1,it);if(!S)return null;if(!eo(x,S.type))return v.concat(1).error(`"${x}" comparisons are not supported for type '${bi(S.type)}'.`);let k=v.parse(b[2],2,it);if(!k)return null;if(!eo(x,k.type))return v.concat(2).error(`"${x}" comparisons are not supported for type '${bi(k.type)}'.`);if(S.type.kind!==k.type.kind&&S.type.kind!=="value"&&k.type.kind!=="value")return v.error(`Cannot compare types '${bi(S.type)}' and '${bi(k.type)}'.`);d&&(S.type.kind==="value"&&k.type.kind!=="value"?S=new Jt(k.type,[S]):S.type.kind!=="value"&&k.type.kind==="value"&&(k=new Jt(S.type,[k])));let D=null;if(b.length===4){if(S.type.kind!=="string"&&k.type.kind!=="string"&&S.type.kind!=="value"&&k.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(D=v.parse(b[3],3,Jn),!D)return null}return new o3(S,k,D)}evaluate(b){let v=this.lhs.evaluate(b),x=this.rhs.evaluate(b);if(d&&this.hasUntypedArgument){let S=fr(v),k=fr(x);if(S.kind!==k.kind||S.kind!=="string"&&S.kind!=="number")throw new lr(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${S.kind}, ${k.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){let S=fr(v),k=fr(x);if(S.kind!=="string"||k.kind!=="string")return n(b,v,x)}return this.collator?c(b,v,x,this.collator.evaluate(b)):n(b,v,x)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}}}let sl=ea("==",function(u,n,c){return n===c},Ao),gp=ea("!=",function(u,n,c){return n!==c},function(u,n,c,d){return!Ao(0,n,c,d)}),xu=ea("<",function(u,n,c){return n<c},function(u,n,c,d){return d.compare(n,c)<0}),_p=ea(">",function(u,n,c){return n>c},function(u,n,c,d){return d.compare(n,c)>0}),ta=ea("<=",function(u,n,c){return n<=c},function(u,n,c,d){return d.compare(n,c)<=0}),bp=ea(">=",function(u,n,c){return n>=c},function(u,n,c,d){return d.compare(n,c)>=0});class yc{constructor(n,c,d){this.type=Jn,this.locale=d,this.caseSensitive=n,this.diacriticSensitive=c}static parse(n,c){if(n.length!==2)return c.error("Expected one argument.");let d=n[1];if(typeof d!="object"||Array.isArray(d))return c.error("Collator options argument must be an object.");let f=c.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,ci);if(!f)return null;let b=c.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,ci);if(!b)return null;let v=null;return d.locale&&(v=c.parse(d.locale,1,Xt),!v)?null:new yc(f,b,v)}evaluate(n){return new Fl(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class ia{constructor(n,c,d,f,b){this.type=Xt,this.number=n,this.locale=c,this.currency=d,this.minFractionDigits=f,this.maxFractionDigits=b}static parse(n,c){if(n.length!==3)return c.error("Expected two arguments.");let d=c.parse(n[1],1,nt);if(!d)return null;let f=n[2];if(typeof f!="object"||Array.isArray(f))return c.error("NumberFormat options argument must be an object.");let b=null;if(f.locale&&(b=c.parse(f.locale,1,Xt),!b))return null;let v=null;if(f.currency&&(v=c.parse(f.currency,1,Xt),!v))return null;let x=null;if(f["min-fraction-digits"]&&(x=c.parse(f["min-fraction-digits"],1,nt),!x))return null;let S=null;return f["max-fraction-digits"]&&(S=c.parse(f["max-fraction-digits"],1,nt),!S)?null:new ia(d,b,v,x,S)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class xc{constructor(n){this.type=ho,this.sections=n}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");let d=n[1];if(!Array.isArray(d)&&typeof d=="object")return c.error("First argument must be an image or text section.");let f=[],b=!1;for(let v=1;v<=n.length-1;++v){let x=n[v];if(b&&typeof x=="object"&&!Array.isArray(x)){b=!1;let S=null;if(x["font-scale"]&&(S=c.parse(x["font-scale"],1,nt),!S))return null;let k=null;if(x["text-font"]&&(k=c.parse(x["text-font"],1,xn(Xt)),!k))return null;let D=null;if(x["text-color"]&&(D=c.parse(x["text-color"],1,sr),!D))return null;let L=null;if(x["vertical-align"]){if(typeof x["vertical-align"]=="string"&&!zl.includes(x["vertical-align"]))return c.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${x["vertical-align"]}' instead.`);if(L=c.parse(x["vertical-align"],1,Xt),!L)return null}let j=f[f.length-1];j.scale=S,j.font=k,j.textColor=D,j.verticalAlign=L}else{let S=c.parse(n[v],1,it);if(!S)return null;let k=S.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,f.push({content:S,scale:null,font:null,textColor:null,verticalAlign:null})}}return new xc(f)}evaluate(n){return new ni(this.sections.map(c=>{let d=c.content.evaluate(n);return fr(d)===is?new $i("",d,null,null,null,c.verticalAlign?c.verticalAlign.evaluate(n):null):new $i(Ai(d),null,c.scale?c.scale.evaluate(n):null,c.font?c.font.evaluate(n).join(","):null,c.textColor?c.textColor.evaluate(n):null,c.verticalAlign?c.verticalAlign.evaluate(n):null)}))}eachChild(n){for(let c of this.sections)n(c.content),c.scale&&n(c.scale),c.font&&n(c.font),c.textColor&&n(c.textColor),c.verticalAlign&&n(c.verticalAlign)}outputDefined(){return!1}}class fo{constructor(n){this.type=is,this.input=n}static parse(n,c){if(n.length!==2)return c.error("Expected two arguments.");let d=c.parse(n[1],1,Xt);return d?new fo(d):c.error("No image name provided.")}evaluate(n){let c=this.input.evaluate(n),d=Cn.fromString(c);return d&&n.availableImages&&(d.available=n.availableImages.indexOf(c)>-1),d}eachChild(n){n(this.input)}outputDefined(){return!1}}class al{constructor(n){this.type=nt,this.input=n}static parse(n,c){if(n.length!==2)return c.error(`Expected 1 argument, but found ${n.length-1} instead.`);let d=c.parse(n[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${bi(d.type)} instead.`):new al(d):null}evaluate(n){let c=this.input.evaluate(n);if(typeof c=="string")return[...c].length;if(Array.isArray(c))return c.length;throw new lr(`Expected value to be of type string or array, but found ${bi(fr(c))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}let os=8192;function wu(u,n){let c=(180+u[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(c*f*os),Math.round(d*f*os)]}function ll(u,n){let c=Math.pow(2,n.z);return[(f=(u[0]/os+n.x)/c,360*f-180),(d=(u[1]/os+n.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,f}function ra(u,n){u[0]=Math.min(u[0],n[0]),u[1]=Math.min(u[1],n[1]),u[2]=Math.max(u[2],n[0]),u[3]=Math.max(u[3],n[1])}function na(u,n){return!(u[0]<=n[0]||u[2]>=n[2]||u[1]<=n[1]||u[3]>=n[3])}function Cu(u,n,c){let d=u[0]-n[0],f=u[1]-n[1],b=u[0]-c[0],v=u[1]-c[1];return d*v-b*f==0&&d*b<=0&&f*v<=0}function qo(u,n,c,d){return(f=[d[0]-c[0],d[1]-c[1]])[0]*(b=[n[0]-u[0],n[1]-u[1]])[1]-f[1]*b[0]!=0&&!(!Dd(u,n,c,d)||!Dd(c,d,u,n));var f,b}function Ul(u,n,c){for(let d of c)for(let f=0;f<d.length-1;++f)if(qo(u,n,d[f],d[f+1]))return!0;return!1}function oa(u,n,c=!1){let d=!1;for(let x of n)for(let S=0;S<x.length-1;S++){if(Cu(u,x[S],x[S+1]))return c;(b=x[S])[1]>(f=u)[1]!=(v=x[S+1])[1]>f[1]&&f[0]<(v[0]-b[0])*(f[1]-b[1])/(v[1]-b[1])+b[0]&&(d=!d)}var f,b,v;return d}function kd(u,n){for(let c of n)if(oa(u,c))return!0;return!1}function Ad(u,n){for(let c of u)if(!oa(c,n))return!1;for(let c=0;c<u.length-1;++c)if(Ul(u[c],u[c+1],n))return!1;return!0}function Oa(u,n){for(let c of n)if(Ad(u,c))return!0;return!1}function Dd(u,n,c,d){let f=d[0]-c[0],b=d[1]-c[1],v=(u[0]-c[0])*b-f*(u[1]-c[1]),x=(n[0]-c[0])*b-f*(n[1]-c[1]);return v>0&&x<0||v<0&&x>0}function jl(u,n,c){let d=[];for(let f=0;f<u.length;f++){let b=[];for(let v=0;v<u[f].length;v++){let x=wu(u[f][v],c);ra(n,x),b.push(x)}d.push(b)}return d}function Rd(u,n,c){let d=[];for(let f=0;f<u.length;f++){let b=jl(u[f],n,c);d.push(b)}return d}function Od(u,n,c,d){if(u[0]<c[0]||u[0]>c[2]){let f=.5*d,b=u[0]-c[0]>f?-d:c[0]-u[0]>f?d:0;b===0&&(b=u[0]-c[2]>f?-d:c[2]-u[0]>f?d:0),u[0]+=b}ra(n,u)}function wc(u,n,c,d){let f=Math.pow(2,d.z)*os,b=[d.x*os,d.y*os],v=[];for(let x of u)for(let S of x){let k=[S.x+b[0],S.y+b[1]];Od(k,n,c,f),v.push(k)}return v}function cl(u,n,c,d){let f=Math.pow(2,d.z)*os,b=[d.x*os,d.y*os],v=[];for(let S of u){let k=[];for(let D of S){let L=[D.x+b[0],D.y+b[1]];ra(n,L),k.push(L)}v.push(k)}if(n[2]-n[0]<=f/2){(x=n)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(let S of v)for(let k of S)Od(k,n,c,f)}var x;return v}class sa{constructor(n,c){this.type=ci,this.geojson=n,this.geometries=c}static parse(n,c){if(n.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(ir(n[1])){let d=n[1];if(d.type==="FeatureCollection"){let f=[];for(let b of d.features){let{type:v,coordinates:x}=b.geometry;v==="Polygon"&&f.push(x),v==="MultiPolygon"&&f.push(...x)}if(f.length)return new sa(d,{type:"MultiPolygon",coordinates:f})}else if(d.type==="Feature"){let f=d.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new sa(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new sa(d,d)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(c,d){let f=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],v=c.canonicalID();if(d.type==="Polygon"){let x=jl(d.coordinates,b,v),S=wc(c.geometry(),f,b,v);if(!na(f,b))return!1;for(let k of S)if(!oa(k,x))return!1}if(d.type==="MultiPolygon"){let x=Rd(d.coordinates,b,v),S=wc(c.geometry(),f,b,v);if(!na(f,b))return!1;for(let k of S)if(!kd(k,x))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(c,d){let f=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],v=c.canonicalID();if(d.type==="Polygon"){let x=jl(d.coordinates,b,v),S=cl(c.geometry(),f,b,v);if(!na(f,b))return!1;for(let k of S)if(!Ad(k,x))return!1}if(d.type==="MultiPolygon"){let x=Rd(d.coordinates,b,v),S=cl(c.geometry(),f,b,v);if(!na(f,b))return!1;for(let k of S)if(!Oa(k,x))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ld=class{constructor(u=[],n=(c,d)=>c<d?-1:c>d?1:0){if(this.data=u,this.length=this.data.length,this.compare=n,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;let u=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),u}peek(){return this.data[0]}_up(u){let{data:n,compare:c}=this,d=n[u];for(;u>0;){let f=u-1>>1,b=n[f];if(c(d,b)>=0)break;n[u]=b,u=f}n[u]=d}_down(u){let{data:n,compare:c}=this,d=this.length>>1,f=n[u];for(;u<d;){let b=1+(u<<1),v=b+1;if(v<this.length&&c(n[v],n[b])<0&&(b=v),c(n[b],f)>=0)break;n[u]=n[b],u=b}n[u]=f}};function Eu(u,n,c=0,d=u.length-1,f=Su){for(;d>c;){if(d-c>600){let S=d-c+1,k=n-c+1,D=Math.log(S),L=.5*Math.exp(2*D/3),j=.5*Math.sqrt(D*L*(S-L)/S)*(k-S/2<0?-1:1);Eu(u,n,Math.max(c,Math.floor(n-k*L/S+j)),Math.min(d,Math.floor(n+(S-k)*L/S+j)),f)}let b=u[n],v=c,x=d;for(aa(u,c,n),f(u[d],b)>0&&aa(u,c,d);v<x;){for(aa(u,v,x),v++,x--;f(u[v],b)<0;)v++;for(;f(u[x],b)>0;)x--}f(u[c],b)===0?aa(u,c,x):(x++,aa(u,x,d)),x<=n&&(c=x+1),n<=x&&(d=x-1)}}function aa(u,n,c){let d=u[n];u[n]=u[c],u[c]=d}function Su(u,n){return u<n?-1:u>n?1:0}function Cc(u,n){if(u.length<=1)return[u];let c=[],d,f;for(let b of u){let v=Nd(b);v!==0&&(b.area=Math.abs(v),f===void 0&&(f=v<0),f===v<0?(d&&c.push(d),d=[b]):d.push(b))}if(d&&c.push(d),n>1)for(let b=0;b<c.length;b++)c[b].length<=n||(Eu(c[b],n,1,c[b].length-1,vp),c[b]=c[b].slice(0,n));return c}function vp(u,n){return n.area-u.area}function Nd(u){let n=0;for(let c,d,f=0,b=u.length,v=b-1;f<b;v=f++)c=u[f],d=u[v],n+=(d.x-c.x)*(c.y+d.y);return n}let Ec=1/298.257223563,Tu=Ec*(2-Ec),Fd=Math.PI/180;class Mu{constructor(n){let c=6378.137*Fd*1e3,d=Math.cos(n*Fd),f=1/(1-Tu*(1-d*d)),b=Math.sqrt(f);this.kx=c*b*d,this.ky=c*b*f*(1-Tu)}distance(n,c){let d=this.wrap(n[0]-c[0])*this.kx,f=(n[1]-c[1])*this.ky;return Math.sqrt(d*d+f*f)}pointOnLine(n,c){let d,f,b,v,x=1/0;for(let S=0;S<n.length-1;S++){let k=n[S][0],D=n[S][1],L=this.wrap(n[S+1][0]-k)*this.kx,j=(n[S+1][1]-D)*this.ky,W=0;L===0&&j===0||(W=(this.wrap(c[0]-k)*this.kx*L+(c[1]-D)*this.ky*j)/(L*L+j*j),W>1?(k=n[S+1][0],D=n[S+1][1]):W>0&&(k+=L/this.kx*W,D+=j/this.ky*W)),L=this.wrap(c[0]-k)*this.kx,j=(c[1]-D)*this.ky;let Y=L*L+j*j;Y<x&&(x=Y,d=k,f=D,b=S,v=W)}return{point:[d,f],index:b,t:Math.max(0,Math.min(1,v))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function zd(u,n){return n[0]-u[0]}function Bi(u){return u[1]-u[0]+1}function Do(u,n){return u[1]>=u[0]&&u[1]<n}function Sc(u,n){if(u[0]>u[1])return[null,null];let c=Bi(u);if(n){if(c===2)return[u,null];let f=Math.floor(c/2);return[[u[0],u[0]+f],[u[0]+f,u[1]]]}if(c===1)return[u,null];let d=Math.floor(c/2)-1;return[[u[0],u[0]+d],[u[0]+d+1,u[1]]]}function ss(u,n){if(!Do(n,u.length))return[1/0,1/0,-1/0,-1/0];let c=[1/0,1/0,-1/0,-1/0];for(let d=n[0];d<=n[1];++d)ra(c,u[d]);return c}function ql(u){let n=[1/0,1/0,-1/0,-1/0];for(let c of u)for(let d of c)ra(n,d);return n}function Bd(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function Iu(u,n,c){if(!Bd(u)||!Bd(n))return NaN;let d=0,f=0;return u[2]<n[0]&&(d=n[0]-u[2]),u[0]>n[2]&&(d=u[0]-n[2]),u[1]>n[3]&&(f=u[1]-n[3]),u[3]<n[1]&&(f=n[1]-u[3]),c.distance([0,0],[d,f])}function Ho(u,n,c){let d=c.pointOnLine(n,u);return c.distance(u,d.point)}function Tc(u,n,c,d,f){let b=Math.min(Ho(u,[c,d],f),Ho(n,[c,d],f)),v=Math.min(Ho(c,[u,n],f),Ho(d,[u,n],f));return Math.min(b,v)}function yp(u,n,c,d,f){if(!Do(n,u.length)||!Do(d,c.length))return 1/0;let b=1/0;for(let v=n[0];v<n[1];++v){let x=u[v],S=u[v+1];for(let k=d[0];k<d[1];++k){let D=c[k],L=c[k+1];if(qo(x,S,D,L))return 0;b=Math.min(b,Tc(x,S,D,L,f))}}return b}function xp(u,n,c,d,f){if(!Do(n,u.length)||!Do(d,c.length))return NaN;let b=1/0;for(let v=n[0];v<=n[1];++v)for(let x=d[0];x<=d[1];++x)if(b=Math.min(b,f.distance(u[v],c[x])),b===0)return b;return b}function wp(u,n,c){if(oa(u,n,!0))return 0;let d=1/0;for(let f of n){let b=f[0],v=f[f.length-1];if(b!==v&&(d=Math.min(d,Ho(u,[v,b],c)),d===0))return d;let x=c.pointOnLine(f,u);if(d=Math.min(d,c.distance(u,x.point)),d===0)return d}return d}function Cp(u,n,c,d){if(!Do(n,u.length))return NaN;for(let b=n[0];b<=n[1];++b)if(oa(u[b],c,!0))return 0;let f=1/0;for(let b=n[0];b<n[1];++b){let v=u[b],x=u[b+1];for(let S of c)for(let k=0,D=S.length,L=D-1;k<D;L=k++){let j=S[L],W=S[k];if(qo(v,x,j,W))return 0;f=Math.min(f,Tc(v,x,j,W,d))}}return f}function Vd(u,n){for(let c of u)for(let d of c)if(oa(d,n,!0))return!0;return!1}function Mc(u,n,c,d=1/0){let f=ql(u),b=ql(n);if(d!==1/0&&Iu(f,b,c)>=d)return d;if(na(f,b)){if(Vd(u,n))return 0}else if(Vd(n,u))return 0;let v=1/0;for(let x of u)for(let S=0,k=x.length,D=k-1;S<k;D=S++){let L=x[D],j=x[S];for(let W of n)for(let Y=0,ie=W.length,he=ie-1;Y<ie;he=Y++){let ve=W[he],Oe=W[Y];if(qo(L,j,ve,Oe))return 0;v=Math.min(v,Tc(L,j,ve,Oe,c))}}return v}function la(u,n,c,d,f,b){if(!b)return;let v=Iu(ss(d,b),f,c);v<n&&u.push([v,b,[0,0]])}function Ic(u,n,c,d,f,b,v){if(!b||!v)return;let x=Iu(ss(d,b),ss(f,v),c);x<n&&u.push([x,b,v])}function Hl(u,n,c,d,f=1/0){let b=Math.min(d.distance(u[0],c[0][0]),f);if(b===0)return b;let v=new Ld([[0,[0,u.length-1],[0,0]]],zd),x=ql(c);for(;v.length>0;){let S=v.pop();if(S[0]>=b)continue;let k=S[1],D=n?50:100;if(Bi(k)<=D){if(!Do(k,u.length))return NaN;if(n){let L=Cp(u,k,c,d);if(isNaN(L)||L===0)return L;b=Math.min(b,L)}else for(let L=k[0];L<=k[1];++L){let j=wp(u[L],c,d);if(b=Math.min(b,j),b===0)return 0}}else{let L=Sc(k,n);la(v,b,d,u,x,L[0]),la(v,b,d,u,x,L[1])}}return b}function La(u,n,c,d,f,b=1/0){let v=Math.min(b,f.distance(u[0],c[0]));if(v===0)return v;let x=new Ld([[0,[0,u.length-1],[0,c.length-1]]],zd);for(;x.length>0;){let S=x.pop();if(S[0]>=v)continue;let k=S[1],D=S[2],L=n?50:100,j=d?50:100;if(Bi(k)<=L&&Bi(D)<=j){if(!Do(k,u.length)&&Do(D,c.length))return NaN;let W;if(n&&d)W=yp(u,k,c,D,f),v=Math.min(v,W);else if(n&&!d){let Y=u.slice(k[0],k[1]+1);for(let ie=D[0];ie<=D[1];++ie)if(W=Ho(c[ie],Y,f),v=Math.min(v,W),v===0)return v}else if(!n&&d){let Y=c.slice(D[0],D[1]+1);for(let ie=k[0];ie<=k[1];++ie)if(W=Ho(u[ie],Y,f),v=Math.min(v,W),v===0)return v}else W=xp(u,k,c,D,f),v=Math.min(v,W)}else{let W=Sc(k,n),Y=Sc(D,d);Ic(x,v,f,u,c,W[0],Y[0]),Ic(x,v,f,u,c,W[0],Y[1]),Ic(x,v,f,u,c,W[1],Y[0]),Ic(x,v,f,u,c,W[1],Y[1])}}return v}function Sr(u){return u.type==="MultiPolygon"?u.coordinates.map(n=>({type:"Polygon",coordinates:n})):u.type==="MultiLineString"?u.coordinates.map(n=>({type:"LineString",coordinates:n})):u.type==="MultiPoint"?u.coordinates.map(n=>({type:"Point",coordinates:n})):[u]}class ca{constructor(n,c){this.type=nt,this.geojson=n,this.geometries=c}static parse(n,c){if(n.length!==2)return c.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(ir(n[1])){let d=n[1];if(d.type==="FeatureCollection")return new ca(d,d.features.map(f=>Sr(f.geometry)).flat());if(d.type==="Feature")return new ca(d,Sr(d.geometry));if("type"in d&&"coordinates"in d)return new ca(d,Sr(d))}return c.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(c,d){let f=c.geometry(),b=f.flat().map(S=>ll([S.x,S.y],c.canonical));if(f.length===0)return NaN;let v=new Mu(b[0][1]),x=1/0;for(let S of d){switch(S.type){case"Point":x=Math.min(x,La(b,!1,[S.coordinates],!1,v,x));break;case"LineString":x=Math.min(x,La(b,!1,S.coordinates,!0,v,x));break;case"Polygon":x=Math.min(x,Hl(b,!1,S.coordinates,v,x))}if(x===0)return x}return x}(n,this.geometries);if(n.geometryType()==="LineString")return function(c,d){let f=c.geometry(),b=f.flat().map(S=>ll([S.x,S.y],c.canonical));if(f.length===0)return NaN;let v=new Mu(b[0][1]),x=1/0;for(let S of d){switch(S.type){case"Point":x=Math.min(x,La(b,!0,[S.coordinates],!1,v,x));break;case"LineString":x=Math.min(x,La(b,!0,S.coordinates,!0,v,x));break;case"Polygon":x=Math.min(x,Hl(b,!0,S.coordinates,v,x))}if(x===0)return x}return x}(n,this.geometries);if(n.geometryType()==="Polygon")return function(c,d){let f=c.geometry();if(f.length===0||f[0].length===0)return NaN;let b=Cc(f,0).map(S=>S.map(k=>k.map(D=>ll([D.x,D.y],c.canonical)))),v=new Mu(b[0][0][0][1]),x=1/0;for(let S of d)for(let k of b){switch(S.type){case"Point":x=Math.min(x,Hl([S.coordinates],!1,k,v,x));break;case"LineString":x=Math.min(x,Hl(S.coordinates,!0,k,v,x));break;case"Polygon":x=Math.min(x,Mc(k,S.coordinates,v,x))}if(x===0)return x}return x}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class ul{constructor(n){this.type=it,this.key=n}static parse(n,c){if(n.length!==2)return c.error(`Expected 1 argument, but found ${n.length-1} instead.`);let d=n[1];return d==null?c.error("Global state property must be defined."):typeof d!="string"?c.error(`Global state property must be string, but found ${typeof n[1]} instead.`):new ul(d)}evaluate(n){var c;let d=(c=n.globals)===null||c===void 0?void 0:c.globalState;return d&&Object.keys(d).length!==0?Po(d,this.key):null}eachChild(){}outputDefined(){return!1}}let ii={"==":sl,"!=":gp,">":_p,"<":xu,">=":bp,"<=":ta,array:Jt,at:ka,boolean:Jt,case:tn,coalesce:Ra,collator:yc,format:xc,image:fo,in:jo,"index-of":Aa,interpolate:Tn,"interpolate-hcl":Tn,"interpolate-lab":Tn,length:al,let:Si,literal:fi,match:Da,number:Jt,"number-format":ia,object:Jt,slice:Qs,step:Js,string:Jt,"to-boolean":Sn,"to-color":Sn,"to-number":Sn,"to-string":Sn,var:ko,within:sa,distance:ca,"global-state":ul};class Un{constructor(n,c,d,f){this.name=n,this.type=c,this._evaluate=d,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,c){let d=n[0],f=Un.definitions[d];if(!f)return c.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);let b=Array.isArray(f)?f[0]:f.type,v=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,x=v.filter(([k])=>!Array.isArray(k)||k.length===n.length-1),S=null;for(let[k,D]of x){S=new Yt(c.registry,ls,c.path,null,c.scope);let L=[],j=!1;for(let W=1;W<n.length;W++){let Y=n[W],ie=Array.isArray(k)?k[W-1]:k.type,he=S.parse(Y,1+L.length,ie);if(!he){j=!0;break}L.push(he)}if(!j)if(Array.isArray(k)&&k.length!==L.length)S.error(`Expected ${k.length} arguments, but found ${L.length} instead.`);else{for(let W=0;W<L.length;W++){let Y=Array.isArray(k)?k[W]:k.type,ie=L[W];S.concat(W+1).checkSubtype(Y,ie.type)}if(S.errors.length===0)return new Un(d,b,D,L)}}if(x.length===1)c.errors.push(...S.errors);else{let k=(x.length?x:v).map(([L])=>{return j=L,Array.isArray(j)?`(${j.map(bi).join(", ")})`:`(${bi(j.type)}...)`;var j}).join(" | "),D=[];for(let L=1;L<n.length;L++){let j=c.parse(n[L],1+D.length);if(!j)return null;D.push(bi(j.type))}c.error(`Expected arguments of type ${k}, but found (${D.join(", ")}) instead.`)}return null}static register(n,c){Un.definitions=c;for(let d in c)n[d]=Un}}function mo(u,[n,c,d,f]){n=n.evaluate(u),c=c.evaluate(u),d=d.evaluate(u);let b=f?f.evaluate(u):1,v=ol(n,c,d,b);if(v)throw new lr(v);return new vi(n/255,c/255,d/255,b,!1)}function Ud(u,n){return u in n}function $l(u,n){let c=n[u];return c===void 0?null:c}function as(u){return{type:u}}function ls(u){if(u instanceof ko)return ls(u.boundExpression);if(u instanceof Un&&u.name==="error"||u instanceof yc||u instanceof sa||u instanceof ca||u instanceof ul)return!1;let n=u instanceof Sn||u instanceof Jt,c=!0;return u.eachChild(d=>{c=n?c&&ls(d):c&&d instanceof fi}),!!c&&ua(u)&&Ro(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ua(u){if(u instanceof Un&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof sa||u instanceof ca)return!1;let n=!0;return u.eachChild(c=>{n&&!ua(c)&&(n=!1)}),n}function cs(u){if(u instanceof Un&&u.name==="feature-state")return!1;let n=!0;return u.eachChild(c=>{n&&!cs(c)&&(n=!1)}),n}function Ro(u,n){if(u instanceof Un&&n.indexOf(u.name)>=0)return!1;let c=!0;return u.eachChild(d=>{c&&!Ro(d,n)&&(c=!1)}),c}function Na(u){return{result:"success",value:u}}function da(u){return{result:"error",value:u}}function Fa(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function Pc(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function kc(u){return!!u.expression&&u.expression.interpolated}function Li(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Ac(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)&&fr(u)===un}function Gl(u){return u}function B(u,n){let c=u.stops&&typeof u.stops[0][0]=="object",d=c||!(c||u.property!==void 0),f=u.type||(kc(n)?"exponential":"interval"),b=function(D){switch(D.type){case"color":return vi.parse;case"padding":return Ui.parse;case"numberArray":return ar.parse;case"colorArray":return _r.parse;default:return null}}(n);if(b&&((u=Zi({},u)).stops&&(u.stops=u.stops.map(D=>[D[0],b(D[1])])),u.default=b(u.default?u.default:n.default)),u.colorSpace&&(v=u.colorSpace)!=="rgb"&&v!=="hcl"&&v!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var v;let x=function(D){switch(D){case"exponential":return ft;case"interval":return Ke;case"categorical":return Se;case"identity":return zt;default:throw new Error(`Unknown function type "${D}"`)}}(f),S,k;if(f==="categorical"){S=Object.create(null);for(let D of u.stops)S[D[0]]=D[1];k=typeof u.stops[0][0]}if(c){let D={},L=[];for(let Y=0;Y<u.stops.length;Y++){let ie=u.stops[Y],he=ie[0].zoom;D[he]===void 0&&(D[he]={zoom:he,type:u.type,property:u.property,default:u.default,stops:[]},L.push(he)),D[he].stops.push([ie[0].value,ie[1]])}let j=[];for(let Y of L)j.push([D[Y].zoom,B(D[Y],n)]);let W={name:"linear"};return{kind:"composite",interpolationType:W,interpolationFactor:Tn.interpolationFactor.bind(void 0,W),zoomStops:j.map(Y=>Y[0]),evaluate:({zoom:Y},ie)=>ft({stops:j,base:u.base},n,Y).evaluate(Y,ie)}}if(d){let D=f==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:Tn.interpolationFactor.bind(void 0,D),zoomStops:u.stops.map(L=>L[0]),evaluate:({zoom:L})=>x(u,n,L,S,k)}}return{kind:"source",evaluate(D,L){let j=L&&L.properties?L.properties[u.property]:void 0;return j===void 0?$(u.default,n.default):x(u,n,j,S,k)}}}function $(u,n,c){return u!==void 0?u:n!==void 0?n:c!==void 0?c:void 0}function Se(u,n,c,d,f){return $(typeof c===f?d[c]:void 0,u.default,n.default)}function Ke(u,n,c){if(Li(c)!=="number")return $(u.default,n.default);let d=u.stops.length;if(d===1||c<=u.stops[0][0])return u.stops[0][1];if(c>=u.stops[d-1][0])return u.stops[d-1][1];let f=Bl(u.stops.map(b=>b[0]),c);return u.stops[f][1]}function ft(u,n,c){let d=u.base!==void 0?u.base:1;if(Li(c)!=="number")return $(u.default,n.default);let f=u.stops.length;if(f===1||c<=u.stops[0][0])return u.stops[0][1];if(c>=u.stops[f-1][0])return u.stops[f-1][1];let b=Bl(u.stops.map(D=>D[0]),c),v=function(D,L,j,W){let Y=W-j,ie=D-j;return Y===0?0:L===1?ie/Y:(Math.pow(L,ie)-1)/(Math.pow(L,Y)-1)}(c,d,u.stops[b][0],u.stops[b+1][0]),x=u.stops[b][1],S=u.stops[b+1][1],k=ns[n.type]||Gl;return typeof x.evaluate=="function"?{evaluate(...D){let L=x.evaluate.apply(void 0,D),j=S.evaluate.apply(void 0,D);if(L!==void 0&&j!==void 0)return k(L,j,v,u.colorSpace)}}:k(x,S,v,u.colorSpace)}function zt(u,n,c){switch(n.type){case"color":c=vi.parse(c);break;case"formatted":c=ni.fromString(c.toString());break;case"resolvedImage":c=Cn.fromString(c.toString());break;case"padding":c=Ui.parse(c);break;case"colorArray":c=_r.parse(c);break;case"numberArray":c=ar.parse(c);break;default:Li(c)===n.type||n.type==="enum"&&n.values[c]||(c=void 0)}return $(c,u.default,n.default)}Un.register(ii,{error:[{kind:"error"},[Xt],(u,[n])=>{throw new lr(n.evaluate(u))}],typeof:[Xt,[it],(u,[n])=>bi(fr(n.evaluate(u)))],"to-rgba":[xn(nt,4),[sr],(u,[n])=>{let[c,d,f,b]=n.evaluate(u).rgb;return[255*c,255*d,255*f,b]}],rgb:[sr,[nt,nt,nt],mo],rgba:[sr,[nt,nt,nt,nt],mo],has:{type:ci,overloads:[[[Xt],(u,[n])=>Ud(n.evaluate(u),u.properties())],[[Xt,un],(u,[n,c])=>Ud(n.evaluate(u),c.evaluate(u))]]},get:{type:it,overloads:[[[Xt],(u,[n])=>$l(n.evaluate(u),u.properties())],[[Xt,un],(u,[n,c])=>$l(n.evaluate(u),c.evaluate(u))]]},"feature-state":[it,[Xt],(u,[n])=>$l(n.evaluate(u),u.featureState||{})],properties:[un,[],u=>u.properties()],"geometry-type":[Xt,[],u=>u.geometryType()],id:[it,[],u=>u.id()],zoom:[nt,[],u=>u.globals.zoom],"heatmap-density":[nt,[],u=>u.globals.heatmapDensity||0],"line-progress":[nt,[],u=>u.globals.lineProgress||0],accumulated:[it,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[nt,as(nt),(u,n)=>{let c=0;for(let d of n)c+=d.evaluate(u);return c}],"*":[nt,as(nt),(u,n)=>{let c=1;for(let d of n)c*=d.evaluate(u);return c}],"-":{type:nt,overloads:[[[nt,nt],(u,[n,c])=>n.evaluate(u)-c.evaluate(u)],[[nt],(u,[n])=>-n.evaluate(u)]]},"/":[nt,[nt,nt],(u,[n,c])=>n.evaluate(u)/c.evaluate(u)],"%":[nt,[nt,nt],(u,[n,c])=>n.evaluate(u)%c.evaluate(u)],ln2:[nt,[],()=>Math.LN2],pi:[nt,[],()=>Math.PI],e:[nt,[],()=>Math.E],"^":[nt,[nt,nt],(u,[n,c])=>Math.pow(n.evaluate(u),c.evaluate(u))],sqrt:[nt,[nt],(u,[n])=>Math.sqrt(n.evaluate(u))],log10:[nt,[nt],(u,[n])=>Math.log(n.evaluate(u))/Math.LN10],ln:[nt,[nt],(u,[n])=>Math.log(n.evaluate(u))],log2:[nt,[nt],(u,[n])=>Math.log(n.evaluate(u))/Math.LN2],sin:[nt,[nt],(u,[n])=>Math.sin(n.evaluate(u))],cos:[nt,[nt],(u,[n])=>Math.cos(n.evaluate(u))],tan:[nt,[nt],(u,[n])=>Math.tan(n.evaluate(u))],asin:[nt,[nt],(u,[n])=>Math.asin(n.evaluate(u))],acos:[nt,[nt],(u,[n])=>Math.acos(n.evaluate(u))],atan:[nt,[nt],(u,[n])=>Math.atan(n.evaluate(u))],min:[nt,as(nt),(u,n)=>Math.min(...n.map(c=>c.evaluate(u)))],max:[nt,as(nt),(u,n)=>Math.max(...n.map(c=>c.evaluate(u)))],abs:[nt,[nt],(u,[n])=>Math.abs(n.evaluate(u))],round:[nt,[nt],(u,[n])=>{let c=n.evaluate(u);return c<0?-Math.round(-c):Math.round(c)}],floor:[nt,[nt],(u,[n])=>Math.floor(n.evaluate(u))],ceil:[nt,[nt],(u,[n])=>Math.ceil(n.evaluate(u))],"filter-==":[ci,[Xt,it],(u,[n,c])=>u.properties()[n.value]===c.value],"filter-id-==":[ci,[it],(u,[n])=>u.id()===n.value],"filter-type-==":[ci,[Xt],(u,[n])=>u.geometryType()===n.value],"filter-<":[ci,[Xt,it],(u,[n,c])=>{let d=u.properties()[n.value],f=c.value;return typeof d==typeof f&&d<f}],"filter-id-<":[ci,[it],(u,[n])=>{let c=u.id(),d=n.value;return typeof c==typeof d&&c<d}],"filter->":[ci,[Xt,it],(u,[n,c])=>{let d=u.properties()[n.value],f=c.value;return typeof d==typeof f&&d>f}],"filter-id->":[ci,[it],(u,[n])=>{let c=u.id(),d=n.value;return typeof c==typeof d&&c>d}],"filter-<=":[ci,[Xt,it],(u,[n,c])=>{let d=u.properties()[n.value],f=c.value;return typeof d==typeof f&&d<=f}],"filter-id-<=":[ci,[it],(u,[n])=>{let c=u.id(),d=n.value;return typeof c==typeof d&&c<=d}],"filter->=":[ci,[Xt,it],(u,[n,c])=>{let d=u.properties()[n.value],f=c.value;return typeof d==typeof f&&d>=f}],"filter-id->=":[ci,[it],(u,[n])=>{let c=u.id(),d=n.value;return typeof c==typeof d&&c>=d}],"filter-has":[ci,[it],(u,[n])=>n.value in u.properties()],"filter-has-id":[ci,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[ci,[xn(Xt)],(u,[n])=>n.value.indexOf(u.geometryType())>=0],"filter-id-in":[ci,[xn(it)],(u,[n])=>n.value.indexOf(u.id())>=0],"filter-in-small":[ci,[Xt,xn(it)],(u,[n,c])=>c.value.indexOf(u.properties()[n.value])>=0],"filter-in-large":[ci,[Xt,xn(it)],(u,[n,c])=>function(d,f,b,v){for(;b<=v;){let x=b+v>>1;if(f[x]===d)return!0;f[x]>d?v=x-1:b=x+1}return!1}(u.properties()[n.value],c.value,0,c.value.length-1)],all:{type:ci,overloads:[[[ci,ci],(u,[n,c])=>n.evaluate(u)&&c.evaluate(u)],[as(ci),(u,n)=>{for(let c of n)if(!c.evaluate(u))return!1;return!0}]]},any:{type:ci,overloads:[[[ci,ci],(u,[n,c])=>n.evaluate(u)||c.evaluate(u)],[as(ci),(u,n)=>{for(let c of n)if(c.evaluate(u))return!0;return!1}]]},"!":[ci,[ci],(u,[n])=>!n.evaluate(u)],"is-supported-script":[ci,[Xt],(u,[n])=>{let c=u.globals&&u.globals.isSupportedScript;return!c||c(n.evaluate(u))}],upcase:[Xt,[Xt],(u,[n])=>n.evaluate(u).toUpperCase()],downcase:[Xt,[Xt],(u,[n])=>n.evaluate(u).toLowerCase()],concat:[Xt,as(it),(u,n)=>n.map(c=>Ai(c.evaluate(u))).join("")],"resolved-locale":[Xt,[Jn],(u,[n])=>n.evaluate(u).resolvedLocale()]});class oi{constructor(n,c){this.expression=n,this._warningHistory={},this._evaluator=new Es,this._defaultValue=c?function(d){if(d.type==="color"&&Ac(d.default))return new vi(0,0,0,0);switch(d.type){case"color":return vi.parse(d.default)||null;case"padding":return Ui.parse(d.default)||null;case"numberArray":return ar.parse(d.default)||null;case"colorArray":return _r.parse(d.default)||null;case"variableAnchorOffsetCollection":return Kt.parse(d.default)||null;case"projectionDefinition":return En.parse(d.default)||null;default:return d.default===void 0?null:d.default}}(c):null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(n,c,d,f,b,v){return this._evaluator.globals=n,this._evaluator.feature=c,this._evaluator.featureState=d,this._evaluator.canonical=f,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)}evaluate(n,c,d,f,b,v){this._evaluator.globals=n,this._evaluator.feature=c||null,this._evaluator.featureState=d||null,this._evaluator.canonical=f,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=v||null;try{let x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new lr(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console<"u"&&console.warn(x.message)),this._defaultValue}}}function Di(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in ii}function br(u,n){let c=new Yt(ii,ls,[],n?function(f){let b={color:sr,string:Xt,number:nt,enum:Xt,boolean:ci,formatted:ho,padding:Fe,numberArray:Bn,colorArray:Ei,projectionDefinition:Ji,resolvedImage:is,variableAnchorOffsetCollection:dr};return f.type==="array"?xn(b[f.value]||it,f.length):b[f.type]}(n):void 0),d=c.parse(u,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Na(new oi(d,n)):da(c.errors)}class Kr{constructor(n,c){this.kind=n,this._styleExpression=c,this.isStateDependent=n!=="constant"&&!cs(c.expression)}evaluateWithoutErrorHandling(n,c,d,f,b,v){return this._styleExpression.evaluateWithoutErrorHandling(n,c,d,f,b,v)}evaluate(n,c,d,f,b,v){return this._styleExpression.evaluate(n,c,d,f,b,v)}}class jn{constructor(n,c,d,f){this.kind=n,this.zoomStops=d,this._styleExpression=c,this.isStateDependent=n!=="camera"&&!cs(c.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,c,d,f,b,v){return this._styleExpression.evaluateWithoutErrorHandling(n,c,d,f,b,v)}evaluate(n,c,d,f,b,v){return this._styleExpression.evaluate(n,c,d,f,b,v)}interpolationFactor(n,c,d){return this.interpolationType?Tn.interpolationFactor(this.interpolationType,n,c,d):0}}function go(u,n){let c=br(u,n);if(c.result==="error")return c;let d=c.value.expression,f=ua(d);if(!f&&!Fa(n))return da([new Ht("","data expressions not supported")]);let b=Ro(d,["zoom"]);if(!b&&!Pc(n))return da([new Ht("","zoom expressions not supported")]);let v=Oo(d);return v||b?v instanceof Ht?da([v]):v instanceof Tn&&!kc(n)?da([new Ht("",'"interpolate" expressions cannot be used with this property')]):Na(v?new jn(f?"camera":"composite",c.value,v.labels,v instanceof Tn?v.interpolation:void 0):new Kr(f?"constant":"source",c.value)):da([new Ht("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class $o{constructor(n,c){this._parameters=n,this._specification=c,Zi(this,B(this._parameters,this._specification))}static deserialize(n){return new $o(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Oo(u){let n=null;if(u instanceof Si)n=Oo(u.result);else if(u instanceof Ra){for(let c of u.args)if(n=Oo(c),n)break}else(u instanceof Js||u instanceof Tn)&&u.input instanceof Un&&u.input.name==="zoom"&&(n=u);return n instanceof Ht||u.eachChild(c=>{let d=Oo(c);d instanceof Ht?n=d:!n&&d?n=new Ht("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&d&&n!==d&&(n=new Ht("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Ss(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(let n of u.slice(1))if(!Ss(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}let Pu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ku(u){if(u==null)return{filter:()=>!0,needGeometry:!1};Ss(u)||(u=qd(u));let n=br(u,Pu);if(n.result==="error")throw new Error(n.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,d,f)=>n.value.evaluate(c,d,{},f),needGeometry:Gm(u)}}function jd(u,n){return u<n?-1:u>n?1:0}function Gm(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let n=1;n<u.length;n++)if(Gm(u[n]))return!0;return!1}function qd(u){if(!u)return!0;let n=u[0];return u.length<=1?n!=="any":n==="=="?Ep(u[1],u[2],"=="):n==="!="?Hd(Ep(u[1],u[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Ep(u[1],u[2],n):n==="any"?(c=u.slice(1),["any"].concat(c.map(qd))):n==="all"?["all"].concat(u.slice(1).map(qd)):n==="none"?["all"].concat(u.slice(1).map(qd).map(Hd)):n==="in"?Wm(u[1],u.slice(2)):n==="!in"?Hd(Wm(u[1],u.slice(2))):n==="has"?Zm(u[1]):n!=="!has"||Hd(Zm(u[1]));var c}function Ep(u,n,c){switch(u){case"$type":return[`filter-type-${c}`,n];case"$id":return[`filter-id-${c}`,n];default:return[`filter-${c}`,u,n]}}function Wm(u,n){if(n.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(c=>typeof c!=typeof n[0])?["filter-in-large",u,["literal",n.sort(jd)]]:["filter-in-small",u,["literal",n]]}}function Zm(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Hd(u){return["!",u]}function $d(u){let n=typeof u;if(n==="number"||n==="boolean"||n==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let f="[";for(let b of u)f+=`${$d(b)},`;return`${f}]`}let c=Object.keys(u).sort(),d="{";for(let f=0;f<c.length;f++)d+=`${JSON.stringify(c[f])}:${$d(u[c[f]])},`;return`${d}}`}function Xm(u){let n="";for(let c of De)n+=`/${$d(u[c])}`;return n}function Au(u){let n=u.value;return n?[new $e(u.key,n,"constants have been deprecated as of v8")]:[]}function $r(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function dl(u){if(Array.isArray(u))return u.map(dl);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){let n={};for(let c in u)n[c]=dl(u[c]);return n}return $r(u)}function Go(u){let n=u.key,c=u.value,d=u.valueSpec||{},f=u.objectElementValidators||{},b=u.style,v=u.styleSpec,x=u.validateSpec,S=[],k=Li(c);if(k!=="object")return[new $e(n,c,`object expected, ${k} found`)];for(let D in c){let L=D.split(".")[0],j=Po(d,L)||d["*"],W;if(Po(f,L))W=f[L];else if(Po(d,L))W=x;else if(f["*"])W=f["*"];else{if(!d["*"]){S.push(new $e(n,c[D],`unknown property "${D}"`));continue}W=x}S=S.concat(W({key:(n&&`${n}.`)+D,value:c[D],valueSpec:j,style:b,styleSpec:v,object:c,objectKey:D,validateSpec:x},c))}for(let D in d)f[D]||d[D].required&&d[D].default===void 0&&c[D]===void 0&&S.push(new $e(n,c,`missing required property "${D}"`));return S}function Sp(u){let n=u.value,c=u.valueSpec,d=u.style,f=u.styleSpec,b=u.key,v=u.arrayElementValidator||u.validateSpec;if(Li(n)!=="array")return[new $e(b,n,`array expected, ${Li(n)} found`)];if(c.length&&n.length!==c.length)return[new $e(b,n,`array length ${c.length} expected, length ${n.length} found`)];if(c["min-length"]&&n.length<c["min-length"])return[new $e(b,n,`array length at least ${c["min-length"]} expected, length ${n.length} found`)];let x={type:c.value,values:c.values};f.$version<7&&(x.function=c.function),Li(c.value)==="object"&&(x=c.value);let S=[];for(let k=0;k<n.length;k++)S=S.concat(v({array:n,arrayIndex:k,value:n[k],valueSpec:x,validateSpec:u.validateSpec,style:d,styleSpec:f,key:`${b}[${k}]`}));return S}function Du(u){let n=u.key,c=u.value,d=u.valueSpec,f=Li(c);return f==="number"&&c!=c&&(f="NaN"),f!=="number"?[new $e(n,c,`number expected, ${f} found`)]:"minimum"in d&&c<d.minimum?[new $e(n,c,`${c} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&c>d.maximum?[new $e(n,c,`${c} is greater than the maximum value ${d.maximum}`)]:[]}function Tp(u){let n=u.valueSpec,c=$r(u.value.type),d,f,b,v={},x=c!=="categorical"&&u.value.property===void 0,S=!x,k=Li(u.value.stops)==="array"&&Li(u.value.stops[0])==="array"&&Li(u.value.stops[0][0])==="object",D=Go({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(W){if(c==="identity")return[new $e(W.key,W.value,'identity function may not have a "stops" property')];let Y=[],ie=W.value;return Y=Y.concat(Sp({key:W.key,value:ie,valueSpec:W.valueSpec,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:L})),Li(ie)==="array"&&ie.length===0&&Y.push(new $e(W.key,ie,"array must have at least one stop")),Y},default:function(W){return W.validateSpec({key:W.key,value:W.value,valueSpec:n,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec})}}});return c==="identity"&&x&&D.push(new $e(u.key,u.value,'missing required property "property"')),c==="identity"||u.value.stops||D.push(new $e(u.key,u.value,'missing required property "stops"')),c==="exponential"&&u.valueSpec.expression&&!kc(u.valueSpec)&&D.push(new $e(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(S&&!Fa(u.valueSpec)?D.push(new $e(u.key,u.value,"property functions not supported")):x&&!Pc(u.valueSpec)&&D.push(new $e(u.key,u.value,"zoom functions not supported"))),c!=="categorical"&&!k||u.value.property!==void 0||D.push(new $e(u.key,u.value,'"property" property is required')),D;function L(W){let Y=[],ie=W.value,he=W.key;if(Li(ie)!=="array")return[new $e(he,ie,`array expected, ${Li(ie)} found`)];if(ie.length!==2)return[new $e(he,ie,`array length 2 expected, length ${ie.length} found`)];if(k){if(Li(ie[0])!=="object")return[new $e(he,ie,`object expected, ${Li(ie[0])} found`)];if(ie[0].zoom===void 0)return[new $e(he,ie,"object stop key must have zoom")];if(ie[0].value===void 0)return[new $e(he,ie,"object stop key must have value")];if(b&&b>$r(ie[0].zoom))return[new $e(he,ie[0].zoom,"stop zoom values must appear in ascending order")];$r(ie[0].zoom)!==b&&(b=$r(ie[0].zoom),f=void 0,v={}),Y=Y.concat(Go({key:`${he}[0]`,value:ie[0],valueSpec:{zoom:{}},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:Du,value:j}}))}else Y=Y.concat(j({key:`${he}[0]`,value:ie[0],validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec},ie));return Di(dl(ie[1]))?Y.concat([new $e(`${he}[1]`,ie[1],"expressions are not allowed in function stops.")]):Y.concat(W.validateSpec({key:`${he}[1]`,value:ie[1],valueSpec:n,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec}))}function j(W,Y){let ie=Li(W.value),he=$r(W.value),ve=W.value!==null?W.value:Y;if(d){if(ie!==d)return[new $e(W.key,ve,`${ie} stop domain type must match previous stop domain type ${d}`)]}else d=ie;if(ie!=="number"&&ie!=="string"&&ie!=="boolean")return[new $e(W.key,ve,"stop domain value must be a number, string, or boolean")];if(ie!=="number"&&c!=="categorical"){let Oe=`number expected, ${ie} found`;return Fa(n)&&c===void 0&&(Oe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new $e(W.key,ve,Oe)]}return c!=="categorical"||ie!=="number"||isFinite(he)&&Math.floor(he)===he?c!=="categorical"&&ie==="number"&&f!==void 0&&he<f?[new $e(W.key,ve,"stop domain values must appear in ascending order")]:(f=he,c==="categorical"&&he in v?[new $e(W.key,ve,"stop domain values must be unique")]:(v[he]=!0,[])):[new $e(W.key,ve,`integer expected, found ${he}`)]}}function ha(u){let n=(u.expressionContext==="property"?go:br)(dl(u.value),u.valueSpec);if(n.result==="error")return n.value.map(d=>new $e(`${u.key}${d.key}`,u.value,d.message));let c=n.value.expression||n.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!c.outputDefined())return[new $e(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!cs(c))return[new $e(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!cs(c))return[new $e(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!Ro(c,["zoom","feature-state"]))return[new $e(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!ua(c))return[new $e(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mp(u){let n=u.key,c=u.value,d=Li(c);return d!=="string"?[new $e(n,c,`color expected, ${d} found`)]:vi.parse(String(c))?[]:[new $e(n,c,`color expected, "${c}" found`)]}function Ru(u){let n=u.key,c=u.value,d=u.valueSpec,f=[];return Array.isArray(d.values)?d.values.indexOf($r(c))===-1&&f.push(new $e(n,c,`expected one of [${d.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(d.values).indexOf($r(c))===-1&&f.push(new $e(n,c,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(c)} found`)),f}function Ip(u){return Ss(dl(u.value))?ha(Zi({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ym(u)}function Ym(u){let n=u.value,c=u.key;if(Li(n)!=="array")return[new $e(c,n,`array expected, ${Li(n)} found`)];let d=u.styleSpec,f,b=[];if(n.length<1)return[new $e(c,n,"filter array must have at least 1 element")];switch(b=b.concat(Ru({key:`${c}[0]`,value:n[0],valueSpec:d.filter_operator,style:u.style,styleSpec:u.styleSpec})),$r(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&$r(n[1])==="$type"&&b.push(new $e(c,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&b.push(new $e(c,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=Li(n[1]),f!=="string"&&b.push(new $e(`${c}[1]`,n[1],`string expected, ${f} found`)));for(let v=2;v<n.length;v++)f=Li(n[v]),$r(n[1])==="$type"?b=b.concat(Ru({key:`${c}[${v}]`,value:n[v],valueSpec:d.geometry_type,style:u.style,styleSpec:u.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&b.push(new $e(`${c}[${v}]`,n[v],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let v=1;v<n.length;v++)b=b.concat(Ym({key:`${c}[${v}]`,value:n[v],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":f=Li(n[1]),n.length!==2?b.push(new $e(c,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&b.push(new $e(`${c}[1]`,n[1],`string expected, ${f} found`))}return b}function Km(u,n){let c=u.key,d=u.validateSpec,f=u.style,b=u.styleSpec,v=u.value,x=u.objectKey,S=b[`${n}_${u.layerType}`];if(!S)return[];let k=x.match(/^(.*)-transition$/);if(n==="paint"&&k&&S[k[1]]&&S[k[1]].transition)return d({key:c,value:v,valueSpec:b.transition,style:f,styleSpec:b});let D=u.valueSpec||S[x];if(!D)return[new $e(c,v,`unknown property "${x}"`)];let L;if(Li(v)==="string"&&Fa(D)&&!D.tokens&&(L=/^{([^}]+)}$/.exec(v)))return[new $e(c,v,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(L[1])} }\`.`)];let j=[];return u.layerType==="symbol"&&(x==="text-field"&&f&&!f.glyphs&&j.push(new $e(c,v,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Ac(dl(v))&&$r(v.type)==="identity"&&j.push(new $e(c,v,'"text-font" does not support identity functions'))),j.concat(d({key:u.key,value:v,valueSpec:D,style:f,styleSpec:b,expressionContext:"property",propertyType:n,propertyKey:x}))}function Qm(u){return Km(u,"paint")}function Dc(u){return Km(u,"layout")}function Rc(u){let n=[],c=u.value,d=u.key,f=u.style,b=u.styleSpec;if(Li(c)!=="object")return[new $e(d,c,`object expected, ${Li(c)} found`)];c.type||c.ref||n.push(new $e(d,c,'either "type" or "ref" is required'));let v=$r(c.type),x=$r(c.ref);if(c.id){let S=$r(c.id);for(let k=0;k<u.arrayIndex;k++){let D=f.layers[k];$r(D.id)===S&&n.push(new $e(d,c.id,`duplicate layer id "${c.id}", previously used at line ${D.id.__line__}`))}}if("ref"in c){let S;["type","source","source-layer","filter","layout"].forEach(k=>{k in c&&n.push(new $e(d,c[k],`"${k}" is prohibited for ref layers`))}),f.layers.forEach(k=>{$r(k.id)===x&&(S=k)}),S?S.ref?n.push(new $e(d,c.ref,"ref cannot reference another ref layer")):v=$r(S.type):n.push(new $e(d,c.ref,`ref layer "${x}" not found`))}else if(v!=="background")if(c.source){let S=f.sources&&f.sources[c.source],k=S&&$r(S.type);S?k==="vector"&&v==="raster"?n.push(new $e(d,c.source,`layer "${c.id}" requires a raster source`)):k!=="raster-dem"&&v==="hillshade"?n.push(new $e(d,c.source,`layer "${c.id}" requires a raster-dem source`)):k==="raster"&&v!=="raster"?n.push(new $e(d,c.source,`layer "${c.id}" requires a vector source`)):k!=="vector"||c["source-layer"]?k==="raster-dem"&&v!=="hillshade"?n.push(new $e(d,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!c.paint||!c.paint["line-gradient"]||k==="geojson"&&S.lineMetrics||n.push(new $e(d,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new $e(d,c,`layer "${c.id}" must specify a "source-layer"`)):n.push(new $e(d,c.source,`source "${c.source}" not found`))}else n.push(new $e(d,c,'missing required property "source"'));return n=n.concat(Go({key:d,value:c,valueSpec:b.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${d}.type`,value:c.type,valueSpec:b.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:c,objectKey:"type"}),filter:Ip,layout:S=>Go({layer:c,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":k=>Dc(Zi({layerType:v},k))}}),paint:S=>Go({layer:c,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":k=>Qm(Zi({layerType:v},k))}})}})),n}function dn(u){let n=u.value,c=u.key,d=Li(n);return d!=="string"?[new $e(c,n,`string expected, ${d} found`)]:[]}let Oc={promoteId:function({key:u,value:n}){if(Li(n)==="string")return dn({key:u,value:n});{let c=[];for(let d in n)c.push(...dn({key:`${u}.${d}`,value:n[d]}));return c}}};function Pp(u){let n=u.value,c=u.key,d=u.styleSpec,f=u.style,b=u.validateSpec;if(!n.type)return[new $e(c,n,'"type" is required')];let v=$r(n.type),x;switch(v){case"vector":case"raster":return x=Go({key:c,value:n,valueSpec:d[`source_${v.replace("-","_")}`],style:u.style,styleSpec:d,objectElementValidators:Oc,validateSpec:b}),x;case"raster-dem":return x=function(S){var k;let D=(k=S.sourceName)!==null&&k!==void 0?k:"",L=S.value,j=S.styleSpec,W=j.source_raster_dem,Y=S.style,ie=[],he=Li(L);if(L===void 0)return ie;if(he!=="object")return ie.push(new $e("source_raster_dem",L,`object expected, ${he} found`)),ie;let ve=$r(L.encoding)==="custom",Oe=["redFactor","greenFactor","blueFactor","baseShift"],Ee=S.value.encoding?`"${S.value.encoding}"`:"Default";for(let G in L)!ve&&Oe.includes(G)?ie.push(new $e(G,L[G],`In "${D}": "${G}" is only valid when "encoding" is set to "custom". ${Ee} encoding found`)):W[G]?ie=ie.concat(S.validateSpec({key:G,value:L[G],valueSpec:W[G],validateSpec:S.validateSpec,style:Y,styleSpec:j})):ie.push(new $e(G,L[G],`unknown property "${G}"`));return ie}({sourceName:c,value:n,style:u.style,styleSpec:d,validateSpec:b}),x;case"geojson":if(x=Go({key:c,value:n,valueSpec:d.source_geojson,style:f,styleSpec:d,validateSpec:b,objectElementValidators:Oc}),n.cluster)for(let S in n.clusterProperties){let[k,D]=n.clusterProperties[S],L=typeof k=="string"?[k,["accumulated"],["get",S]]:k;x.push(...ha({key:`${c}.${S}.map`,value:D,expressionContext:"cluster-map"})),x.push(...ha({key:`${c}.${S}.reduce`,value:L,expressionContext:"cluster-reduce"}))}return x;case"video":return Go({key:c,value:n,valueSpec:d.source_video,style:f,validateSpec:b,styleSpec:d});case"image":return Go({key:c,value:n,valueSpec:d.source_image,style:f,validateSpec:b,styleSpec:d});case"canvas":return[new $e(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ru({key:`${c}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Jm(u){let n=u.value,c=u.styleSpec,d=c.light,f=u.style,b=[],v=Li(n);if(n===void 0)return b;if(v!=="object")return b=b.concat([new $e("light",n,`object expected, ${v} found`)]),b;for(let x in n){let S=x.match(/^(.*)-transition$/);b=b.concat(S&&d[S[1]]&&d[S[1]].transition?u.validateSpec({key:x,value:n[x],valueSpec:c.transition,validateSpec:u.validateSpec,style:f,styleSpec:c}):d[x]?u.validateSpec({key:x,value:n[x],valueSpec:d[x],validateSpec:u.validateSpec,style:f,styleSpec:c}):[new $e(x,n[x],`unknown property "${x}"`)])}return b}function eg(u){let n=u.value,c=u.styleSpec,d=c.sky,f=u.style,b=Li(n);if(n===void 0)return[];if(b!=="object")return[new $e("sky",n,`object expected, ${b} found`)];let v=[];for(let x in n)v=v.concat(d[x]?u.validateSpec({key:x,value:n[x],valueSpec:d[x],style:f,styleSpec:c}):[new $e(x,n[x],`unknown property "${x}"`)]);return v}function Lc(u){let n=u.value,c=u.styleSpec,d=c.terrain,f=u.style,b=[],v=Li(n);if(n===void 0)return b;if(v!=="object")return b=b.concat([new $e("terrain",n,`object expected, ${v} found`)]),b;for(let x in n)b=b.concat(d[x]?u.validateSpec({key:x,value:n[x],valueSpec:d[x],validateSpec:u.validateSpec,style:f,styleSpec:c}):[new $e(x,n[x],`unknown property "${x}"`)]);return b}function kp(u){let n=[],c=u.value,d=u.key;if(Array.isArray(c)){let f=[],b=[];for(let v in c)c[v].id&&f.includes(c[v].id)&&n.push(new $e(d,c,`all the sprites' ids must be unique, but ${c[v].id} is duplicated`)),f.push(c[v].id),c[v].url&&b.includes(c[v].url)&&n.push(new $e(d,c,`all the sprites' URLs must be unique, but ${c[v].url} is duplicated`)),b.push(c[v].url),n=n.concat(Go({key:`${d}[${v}]`,value:c[v],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return n}return dn({key:d,value:c})}function Gd(u){return n=u.value,n&&n.constructor===Object?[]:[new $e(u.key,u.value,`object expected, ${Li(u.value)} found`)];var n}let tg={"*":()=>[],array:Sp,boolean:function(u){let n=u.value,c=u.key,d=Li(n);return d!=="boolean"?[new $e(c,n,`boolean expected, ${d} found`)]:[]},number:Du,color:Mp,constants:Au,enum:Ru,filter:Ip,function:Tp,layer:Rc,object:Go,source:Pp,light:Jm,sky:eg,terrain:Lc,projection:function(u){let n=u.value,c=u.styleSpec,d=c.projection,f=u.style,b=Li(n);if(n===void 0)return[];if(b!=="object")return[new $e("projection",n,`object expected, ${b} found`)];let v=[];for(let x in n)v=v.concat(d[x]?u.validateSpec({key:x,value:n[x],valueSpec:d[x],style:f,styleSpec:c}):[new $e(x,n[x],`unknown property "${x}"`)]);return v},projectionDefinition:function(u){let n=u.key,c=u.value;c=c instanceof String?c.valueOf():c;let d=Li(c);return d!=="array"||function(f){return Array.isArray(f)&&f.length===3&&typeof f[0]=="string"&&typeof f[1]=="string"&&typeof f[2]=="number"}(c)||function(f){return!!["interpolate","step","literal"].includes(f[0])}(c)?["array","string"].includes(d)?[]:[new $e(n,c,`projection expected, invalid type "${d}" found`)]:[new $e(n,c,`projection expected, invalid array ${JSON.stringify(c)} found`)]},string:dn,formatted:function(u){return dn(u).length===0?[]:ha(u)},resolvedImage:function(u){return dn(u).length===0?[]:ha(u)},padding:function(u){let n=u.key,c=u.value;if(Li(c)==="array"){if(c.length<1||c.length>4)return[new $e(n,c,`padding requires 1 to 4 values; ${c.length} values found`)];let d={type:"number"},f=[];for(let b=0;b<c.length;b++)f=f.concat(u.validateSpec({key:`${n}[${b}]`,value:c[b],validateSpec:u.validateSpec,valueSpec:d}));return f}return Du({key:n,value:c,valueSpec:{}})},numberArray:function(u){let n=u.key,c=u.value;if(Li(c)==="array"){let d={type:"number"};if(c.length<1)return[new $e(n,c,"array length at least 1 expected, length 0 found")];let f=[];for(let b=0;b<c.length;b++)f=f.concat(u.validateSpec({key:`${n}[${b}]`,value:c[b],validateSpec:u.validateSpec,valueSpec:d}));return f}return Du({key:n,value:c,valueSpec:{}})},colorArray:function(u){let n=u.key,c=u.value;if(Li(c)==="array"){if(c.length<1)return[new $e(n,c,"array length at least 1 expected, length 0 found")];let d=[];for(let f=0;f<c.length;f++)d=d.concat(Mp({key:`${n}[${f}]`,value:c[f]}));return d}return Mp({key:n,value:c})},variableAnchorOffsetCollection:function(u){let n=u.key,c=u.value,d=Li(c),f=u.styleSpec;if(d!=="array"||c.length<1||c.length%2!=0)return[new $e(n,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let b=[];for(let v=0;v<c.length;v+=2)b=b.concat(Ru({key:`${n}[${v}]`,value:c[v],valueSpec:f.layout_symbol["text-anchor"]})),b=b.concat(Sp({key:`${n}[${v+1}]`,value:c[v+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:f}));return b},sprite:kp,state:Gd};function Nc(u){let n=u.value,c=u.valueSpec,d=u.styleSpec;return u.validateSpec=Nc,c.expression&&Ac($r(n))?Tp(u):c.expression&&Di(dl(n))?ha(u):c.type&&tg[c.type]?tg[c.type](u):Go(Zi({},u,{valueSpec:c.type?d[c.type]:c}))}function ig(u){let n=u.value,c=u.key,d=dn(u);return d.length||(n.indexOf("{fontstack}")===-1&&d.push(new $e(c,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&d.push(new $e(c,n,'"glyphs" url must include a "{range}" token'))),d}function to(u,n=se){let c=[];return c=c.concat(Nc({key:"",value:u,valueSpec:n.$root,styleSpec:n,style:u,validateSpec:Nc,objectElementValidators:{glyphs:ig,"*":()=>[]}})),u.constants&&(c=c.concat(Au({key:"constants",value:u.constants}))),Fc(c)}function Ts(u){return function(n){return u(ui(gt({},n),{validateSpec:Nc}))}}function Fc(u){return[].concat(u).sort((n,c)=>n.line-c.line)}function Ms(u){return function(...n){return Fc(u.apply(this,n))}}to.source=Ms(Ts(Pp)),to.sprite=Ms(Ts(kp)),to.glyphs=Ms(Ts(ig)),to.light=Ms(Ts(Jm)),to.sky=Ms(Ts(eg)),to.terrain=Ms(Ts(Lc)),to.state=Ms(Ts(Gd)),to.layer=Ms(Ts(Rc)),to.filter=Ms(Ts(Ip)),to.paintProperty=Ms(Ts(Qm)),to.layoutProperty=Ms(Ts(Dc));let zc=to,Wd=zc.light,Pb=zc.sky,Ap=zc.paintProperty,Zd=zc.layoutProperty;function Dp(u,n){let c=!1;if(n&&n.length)for(let d of n)u.fire(new pe(new Error(d.message))),c=!0;return c}class Bc{constructor(n,c,d){let f=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;let v=new Int32Array(this.arrayBuffer);n=v[0],this.d=(c=v[1])+2*(d=v[2]);for(let S=0;S<this.d*this.d;S++){let k=v[3+S],D=v[3+S+1];f.push(k===D?null:v.subarray(k,D))}let x=v[3+f.length+1];this.keys=v.subarray(v[3+f.length],x),this.bboxes=v.subarray(x),this.insert=this._insertReadonly}else{this.d=c+2*d;for(let v=0;v<this.d*this.d;v++)f.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=n,this.padding=d,this.scale=c/n,this.uid=0;let b=d/c*n;this.min=-b,this.max=n+b}insert(n,c,d,f,b){this._forEachCell(c,d,f,b,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(b)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,c,d,f,b,v){this.cells[b].push(v)}query(n,c,d,f,b){let v=this.min,x=this.max;if(n<=v&&c<=v&&x<=d&&x<=f&&!b)return Array.prototype.slice.call(this.keys);{let S=[];return this._forEachCell(n,c,d,f,this._queryCell,S,{},b),S}}_queryCell(n,c,d,f,b,v,x,S){let k=this.cells[b];if(k!==null){let D=this.keys,L=this.bboxes;for(let j=0;j<k.length;j++){let W=k[j];if(x[W]===void 0){let Y=4*W;(S?S(L[Y+0],L[Y+1],L[Y+2],L[Y+3]):n<=L[Y+2]&&c<=L[Y+3]&&d>=L[Y+0]&&f>=L[Y+1])?(x[W]=!0,v.push(D[W])):x[W]=!1}}}}_forEachCell(n,c,d,f,b,v,x,S){let k=this._convertToCellCoord(n),D=this._convertToCellCoord(c),L=this._convertToCellCoord(d),j=this._convertToCellCoord(f);for(let W=k;W<=L;W++)for(let Y=D;Y<=j;Y++){let ie=this.d*Y+W;if((!S||S(this._convertFromCellCoord(W),this._convertFromCellCoord(Y),this._convertFromCellCoord(W+1),this._convertFromCellCoord(Y+1)))&&b.call(this,n,c,d,f,ie,v,x,S))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let n=this.cells,c=3+this.cells.length+1+1,d=0;for(let v=0;v<this.cells.length;v++)d+=this.cells[v].length;let f=new Int32Array(c+d+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let b=c;for(let v=0;v<n.length;v++){let x=n[v];f[3+v]=b,f.set(x,b),b+=x.length}return f[3+n.length]=b,f.set(this.keys,b),b+=this.keys.length,f[3+n.length+1]=b,f.set(this.bboxes,b),b+=this.bboxes.length,f.buffer}static serialize(n,c){let d=n.toArrayBuffer();return c&&c.push(d),{buffer:d}}static deserialize(n){return new Bc(n.buffer)}}let pa={};function Lt(u,n,c={}){if(pa[u])throw new Error(`${u} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:u,writeable:!1}),pa[u]={klass:n,omit:c.omit||[],shallow:c.shallow||[]}}Lt("Object",Object),Lt("TransferableGridIndex",Bc),Lt("Color",vi),Lt("Error",Error),Lt("AJAXError",uo),Lt("ResolvedImage",Cn),Lt("StylePropertyFunction",$o),Lt("StyleExpression",oi,{omit:["_evaluator"]}),Lt("ZoomDependentExpression",jn),Lt("ZoomConstantExpression",Kr),Lt("CompoundExpression",Un,{omit:["_evaluate"]});for(let u in ii)ii[u]._classRegistryKey||Lt(`Expression_${u}`,ii[u]);function Xd(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Yd(u){return u.$name||u.constructor._classRegistryKey}function rg(u){return!function(n){if(n===null||typeof n!="object")return!1;let c=Yd(n);return!(!c||c==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||Xd(u)||lo(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function Vc(u,n){if(rg(u))return(Xd(u)||lo(u))&&n&&n.push(u),ArrayBuffer.isView(u)&&n&&n.push(u.buffer),u instanceof ImageData&&n&&n.push(u.data.buffer),u;if(Array.isArray(u)){let b=[];for(let v of u)b.push(Vc(v,n));return b}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);let c=Yd(u);if(!c)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!pa[c])throw new Error(`${c} is not registered.`);let{klass:d}=pa[c],f=d.serialize?d.serialize(u,n):{};if(d.serialize){if(n&&f===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let b in u){if(!u.hasOwnProperty(b)||pa[c].omit.indexOf(b)>=0)continue;let v=u[b];f[b]=pa[c].shallow.indexOf(b)>=0?v:Vc(v,n)}u instanceof Error&&(f.message=u.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(f.$name=c),f}function Ou(u){if(rg(u))return u;if(Array.isArray(u))return u.map(Ou);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);let n=Yd(u)||"Object";if(!pa[n])throw new Error(`can't deserialize unregistered class ${n}`);let{klass:c}=pa[n];if(!c)throw new Error(`can't deserialize unregistered class ${n}`);if(c.deserialize)return c.deserialize(u);let d=Object.create(c.prototype);for(let f of Object.keys(u)){if(f==="$name")continue;let b=u[f];d[f]=pa[n].shallow.indexOf(f)>=0?b:Ou(b)}return d}class Rp{constructor(){this.first=!0}update(n,c){let d=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=c),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=d,!0))}}let Vi={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Hangul Syllables":u=>u>=44032&&u<=55215,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function Kd(u){for(let n of u)if(Qd(n.charCodeAt(0)))return!0;return!1}function kb(u){for(let n of u)if(!og(n.charCodeAt(0)))return!1;return!0}function Op(u){let n=u.map(c=>{try{return new RegExp(`\\p{sc=${c}}`,"u").source}catch{return null}}).filter(c=>c);return new RegExp(n.join("|"),"u")}let ng=Op(["Arab","Dupl","Mong","Ougr","Syrc"]);function og(u){return!ng.test(String.fromCodePoint(u))}let Lp=Op(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Qd(u){return!(u!==746&&u!==747&&(u<4352||!(Vi["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Vi["CJK Compatibility"](u)||Vi["CJK Strokes"](u)||!(!Vi["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Vi["Enclosed CJK Letters and Months"](u)||Vi["Ideographic Description Characters"](u)||Vi.Kanbun(u)||Vi.Katakana(u)&&u!==12540||!(!Vi["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Vi["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Vi["Vertical Forms"](u)||Vi["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||Lp.test(String.fromCodePoint(u)))))}function Lu(u){return!(Qd(u)||function(n){return!!(Vi["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Vi["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Vi["Letterlike Symbols"](n)||Vi["Number Forms"](n)||Vi["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Vi["Control Pictures"](n)&&n!==9251||Vi["Optical Character Recognition"](n)||Vi["Enclosed Alphanumerics"](n)||Vi["Geometric Shapes"](n)||Vi["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Vi["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Vi["CJK Symbols and Punctuation"](n)||Vi.Katakana(n)||Vi["Private Use Area"](n)||Vi["CJK Compatibility Forms"](n)||Vi["Small Form Variants"](n)||Vi["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(u))}let Ab=Op(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Jd(u){return Ab.test(String.fromCodePoint(u))}function Db(u,n){return!(!n&&Jd(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Vi.Khmer(u))}function Rb(u){for(let n of u)if(Jd(n.charCodeAt(0)))return!0;return!1}let za=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){if(za.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(u,n){return s(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(u.pluginStatus!=="loading")return this.setState(u),u;let c=u.pluginURL,d=new Promise(b=>{this.loadScriptResolve=b});n(c);let f=new Promise(b=>setTimeout(()=>b(),this.TIMEOUT));if(yield Promise.race([d,f]),this.isParsed()){let b={pluginStatus:"loaded",pluginURL:c};return this.setState(b),b}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${c}`)})}};class Tr{constructor(n,c){this.zoom=n,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Rp,this.transition={})}isSupportedScript(n){return function(c,d){for(let f of c)if(!Db(f.charCodeAt(0),d))return!1;return!0}(n,za.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let n=this.zoom,c=n-Math.floor(n),d=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*c}}}class Nu{constructor(n,c){this.property=n,this.value=c,this.expression=function(d,f){if(Ac(d))return new $o(d,f);if(Di(d)){let b=go(d,f);if(b.result==="error")throw new Error(b.value.map(v=>`${v.key}: ${v.message}`).join(", "));return b.value}{let b=d;return f.type==="color"&&typeof d=="string"?b=vi.parse(d):f.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?f.type!=="numberArray"||typeof d!="number"&&!Array.isArray(d)?f.type!=="colorArray"||typeof d!="string"&&!Array.isArray(d)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(d)?b=Kt.parse(d):f.type==="projectionDefinition"&&typeof d=="string"&&(b=En.parse(d)):b=_r.parse(d):b=ar.parse(d):b=Ui.parse(d),{kind:"constant",evaluate:()=>b}}}(c===void 0?n.specification.default:c,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,c,d){return this.property.possiblyEvaluate(this,n,c,d)}}class Np{constructor(n){this.property=n,this.value=new Nu(n,void 0)}transitioned(n,c){return new ag(this.property,this.value,c,di({},n.transition,this.transition),n.now)}untransitioned(){return new ag(this.property,this.value,null,{},0)}}class sg{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Ln(this._values[n].value.value)}setValue(n,c){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Np(this._values[n].property)),this._values[n].value=new Nu(this._values[n].property,c===null?void 0:Ln(c))}getTransition(n){return Ln(this._values[n].transition)}setTransition(n,c){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Np(this._values[n].property)),this._values[n].transition=Ln(c)||void 0}serialize(){let n={};for(let c of Object.keys(this._values)){let d=this.getValue(c);d!==void 0&&(n[c]=d);let f=this.getTransition(c);f!==void 0&&(n[`${c}-transition`]=f)}return n}transitioned(n,c){let d=new lg(this._properties);for(let f of Object.keys(this._values))d._values[f]=this._values[f].transitioned(n,c._values[f]);return d}untransitioned(){let n=new lg(this._properties);for(let c of Object.keys(this._values))n._values[c]=this._values[c].untransitioned();return n}}class ag{constructor(n,c,d,f,b){this.property=n,this.value=c,this.begin=b+f.delay||0,this.end=this.begin+f.duration||0,n.specification.transition&&(f.delay||f.duration)&&(this.prior=d)}possiblyEvaluate(n,c,d){let f=n.now||0,b=this.value.possiblyEvaluate(n,c,d),v=this.prior;if(v){if(f>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(f<this.begin)return v.possiblyEvaluate(n,c,d);{let x=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(n,c,d),b,Ut(x))}}return b}}class lg{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,c,d){let f=new eh(this._properties);for(let b of Object.keys(this._values))f._values[b]=this._values[b].possiblyEvaluate(n,c,d);return f}hasTransition(){for(let n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Ob{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Ln(this._values[n].value)}setValue(n,c){this._values[n]=new Nu(this._values[n].property,c===null?void 0:Ln(c))}serialize(){let n={};for(let c of Object.keys(this._values)){let d=this.getValue(c);d!==void 0&&(n[c]=d)}return n}possiblyEvaluate(n,c,d){let f=new eh(this._properties);for(let b of Object.keys(this._values))f._values[b]=this._values[b].possiblyEvaluate(n,c,d);return f}}class _o{constructor(n,c,d){this.property=n,this.value=c,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,c,d,f){return this.property.evaluate(this.value,this.parameters,n,c,d,f)}}class eh{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Zt{constructor(n){this.specification=n}possiblyEvaluate(n,c){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(c)}interpolate(n,c,d){let f=ns[this.specification.type];return f?f(n,c,d):n}}class ri{constructor(n,c){this.specification=n,this.overrides=c}possiblyEvaluate(n,c,d,f){return new _o(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(c,null,{},d,f)}:n.expression,c)}interpolate(n,c,d){if(n.value.kind!=="constant"||c.value.kind!=="constant")return n;if(n.value.value===void 0||c.value.value===void 0)return new _o(this,{kind:"constant",value:void 0},n.parameters);let f=ns[this.specification.type];if(f){let b=f(n.value.value,c.value.value,d);return new _o(this,{kind:"constant",value:b},n.parameters)}return n}evaluate(n,c,d,f,b,v){return n.kind==="constant"?n.value:n.evaluate(c,d,f,b,v)}}class Fu extends ri{possiblyEvaluate(n,c,d,f){if(n.value===void 0)return new _o(this,{kind:"constant",value:void 0},c);if(n.expression.kind==="constant"){let b=n.expression.evaluate(c,null,{},d,f),v=n.property.specification.type==="resolvedImage"&&typeof b!="string"?b.name:b,x=this._calculate(v,v,v,c);return new _o(this,{kind:"constant",value:x},c)}if(n.expression.kind==="camera"){let b=this._calculate(n.expression.evaluate({zoom:c.zoom-1}),n.expression.evaluate({zoom:c.zoom}),n.expression.evaluate({zoom:c.zoom+1}),c);return new _o(this,{kind:"constant",value:b},c)}return new _o(this,n.expression,c)}evaluate(n,c,d,f,b,v){if(n.kind==="source"){let x=n.evaluate(c,d,f,b,v);return this._calculate(x,x,x,c)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(c.zoom)-1},d,f),n.evaluate({zoom:Math.floor(c.zoom)},d,f),n.evaluate({zoom:Math.floor(c.zoom)+1},d,f),c):n.value}_calculate(n,c,d,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:c}:{from:d,to:c}}interpolate(n){return n}}class Fp{constructor(n){this.specification=n}possiblyEvaluate(n,c,d,f){if(n.value!==void 0){if(n.expression.kind==="constant"){let b=n.expression.evaluate(c,null,{},d,f);return this._calculate(b,b,b,c)}return this._calculate(n.expression.evaluate(new Tr(Math.floor(c.zoom-1),c)),n.expression.evaluate(new Tr(Math.floor(c.zoom),c)),n.expression.evaluate(new Tr(Math.floor(c.zoom+1),c)),c)}}_calculate(n,c,d,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:c}:{from:d,to:c}}interpolate(n){return n}}class zp{constructor(n){this.specification=n}possiblyEvaluate(n,c,d,f){return!!n.expression.evaluate(c,null,{},d,f)}interpolate(){return!1}}class nn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let c in n){let d=n[c];d.specification.overridable&&this.overridableProperties.push(c);let f=this.defaultPropertyValues[c]=new Nu(d,void 0),b=this.defaultTransitionablePropertyValues[c]=new Np(d);this.defaultTransitioningPropertyValues[c]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=f.possiblyEvaluate({})}}}Lt("DataDrivenProperty",ri),Lt("DataConstantProperty",Zt),Lt("CrossFadedDataDrivenProperty",Fu),Lt("CrossFadedProperty",Fp),Lt("ColorRampProperty",zp);let Bp="-transition";class us extends xe{constructor(n,c){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),c.layout&&(this._unevaluatedLayout=new Ob(c.layout)),c.paint)){this._transitionablePaint=new sg(c.paint);for(let d in n.paint)this.setPaintProperty(d,n.paint[d],{validate:!1});for(let d in n.layout)this.setLayoutProperty(d,n.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new eh(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,c,d={}){c!=null&&this._validate(Zd,`layers.${this.id}.layout.${n}`,n,c,d)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,c):this.visibility=c)}getPaintProperty(n){return n.endsWith(Bp)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,c,d={}){if(c!=null&&this._validate(Ap,`layers.${this.id}.paint.${n}`,n,c,d))return!1;if(n.endsWith(Bp))return this._transitionablePaint.setTransition(n.slice(0,-11),c||void 0),!1;{let f=this._transitionablePaint._values[n],b=f.property.specification["property-type"]==="cross-faded-data-driven",v=f.value.isDataDriven(),x=f.value;this._transitionablePaint.setValue(n,c),this._handleSpecialPaintPropertyUpdate(n);let S=this._transitionablePaint._values[n].value;return S.isDataDriven()||v||b||this._handleOverridablePaintPropertyUpdate(n,x,S)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,c,d){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,c){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,c)}serialize(){let n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Ca(n,(c,d)=>!(c===void 0||d==="layout"&&!Object.keys(c).length||d==="paint"&&!Object.keys(c).length))}_validate(n,c,d,f,b={}){return(!b||b.validate!==!1)&&Dp(this,n.call(zc,{key:c,layerType:this.type,objectKey:d,value:f,styleSpec:se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let n in this.paint._values){let c=this.paint.get(n);if(c instanceof _o&&Fa(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}let cg={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Wl{constructor(n,c){this._structArray=n,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Br{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,c){return n._trim(),c&&(n.isTransferred=!0,c.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){let c=Object.create(this.prototype);return c.arrayBuffer=n.arrayBuffer,c.length=n.length,c.capacity=n.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Dr(u,n=1){let c=0,d=0;return{members:u.map(f=>{let b=cg[f.type].BYTES_PER_ELEMENT,v=c=Uc(c,Math.max(n,b)),x=f.components||1;return d=Math.max(d,b),c+=b*x,{name:f.name,type:f.type,components:x,offset:v}}),size:Uc(c,Math.max(d,n)),alignment:n}}function Uc(u,n){return Math.ceil(u/n)*n}class zu extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c){let d=this.length;return this.resize(d+1),this.emplace(d,n,c)}emplace(n,c,d){let f=2*n;return this.int16[f+0]=c,this.int16[f+1]=d,n}}zu.prototype.bytesPerElement=4,Lt("StructArrayLayout2i4",zu);class Bu extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d){let f=this.length;return this.resize(f+1),this.emplace(f,n,c,d)}emplace(n,c,d,f){let b=3*n;return this.int16[b+0]=c,this.int16[b+1]=d,this.int16[b+2]=f,n}}Bu.prototype.bytesPerElement=6,Lt("StructArrayLayout3i6",Bu);class Zl extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,f){let b=this.length;return this.resize(b+1),this.emplace(b,n,c,d,f)}emplace(n,c,d,f,b){let v=4*n;return this.int16[v+0]=c,this.int16[v+1]=d,this.int16[v+2]=f,this.int16[v+3]=b,n}}Zl.prototype.bytesPerElement=8,Lt("StructArrayLayout4i8",Zl);class Vp extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,v){let x=this.length;return this.resize(x+1),this.emplace(x,n,c,d,f,b,v)}emplace(n,c,d,f,b,v,x){let S=6*n;return this.int16[S+0]=c,this.int16[S+1]=d,this.int16[S+2]=f,this.int16[S+3]=b,this.int16[S+4]=v,this.int16[S+5]=x,n}}Vp.prototype.bytesPerElement=12,Lt("StructArrayLayout2i4i12",Vp);class Up extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,v){let x=this.length;return this.resize(x+1),this.emplace(x,n,c,d,f,b,v)}emplace(n,c,d,f,b,v,x){let S=4*n,k=8*n;return this.int16[S+0]=c,this.int16[S+1]=d,this.uint8[k+4]=f,this.uint8[k+5]=b,this.uint8[k+6]=v,this.uint8[k+7]=x,n}}Up.prototype.bytesPerElement=8,Lt("StructArrayLayout2i4ub8",Up);class jc extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c){let d=this.length;return this.resize(d+1),this.emplace(d,n,c)}emplace(n,c,d){let f=2*n;return this.float32[f+0]=c,this.float32[f+1]=d,n}}jc.prototype.bytesPerElement=8,Lt("StructArrayLayout2f8",jc);class jp extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,v,x,S,k,D){let L=this.length;return this.resize(L+1),this.emplace(L,n,c,d,f,b,v,x,S,k,D)}emplace(n,c,d,f,b,v,x,S,k,D,L){let j=10*n;return this.uint16[j+0]=c,this.uint16[j+1]=d,this.uint16[j+2]=f,this.uint16[j+3]=b,this.uint16[j+4]=v,this.uint16[j+5]=x,this.uint16[j+6]=S,this.uint16[j+7]=k,this.uint16[j+8]=D,this.uint16[j+9]=L,n}}jp.prototype.bytesPerElement=20,Lt("StructArrayLayout10ui20",jp);class m extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,v,x,S,k,D,L,j){let W=this.length;return this.resize(W+1),this.emplace(W,n,c,d,f,b,v,x,S,k,D,L,j)}emplace(n,c,d,f,b,v,x,S,k,D,L,j,W){let Y=12*n;return this.int16[Y+0]=c,this.int16[Y+1]=d,this.int16[Y+2]=f,this.int16[Y+3]=b,this.uint16[Y+4]=v,this.uint16[Y+5]=x,this.uint16[Y+6]=S,this.uint16[Y+7]=k,this.int16[Y+8]=D,this.int16[Y+9]=L,this.int16[Y+10]=j,this.int16[Y+11]=W,n}}m.prototype.bytesPerElement=24,Lt("StructArrayLayout4i4ui4i24",m);class r extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d){let f=this.length;return this.resize(f+1),this.emplace(f,n,c,d)}emplace(n,c,d,f){let b=3*n;return this.float32[b+0]=c,this.float32[b+1]=d,this.float32[b+2]=f,n}}r.prototype.bytesPerElement=12,Lt("StructArrayLayout3f12",r);class l extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){let c=this.length;return this.resize(c+1),this.emplace(c,n)}emplace(n,c){return this.uint32[1*n+0]=c,n}}l.prototype.bytesPerElement=4,Lt("StructArrayLayout1ul4",l);class h extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,v,x,S,k){let D=this.length;return this.resize(D+1),this.emplace(D,n,c,d,f,b,v,x,S,k)}emplace(n,c,d,f,b,v,x,S,k,D){let L=10*n,j=5*n;return this.int16[L+0]=c,this.int16[L+1]=d,this.int16[L+2]=f,this.int16[L+3]=b,this.int16[L+4]=v,this.int16[L+5]=x,this.uint32[j+3]=S,this.uint16[L+8]=k,this.uint16[L+9]=D,n}}h.prototype.bytesPerElement=20,Lt("StructArrayLayout6i1ul2ui20",h);class p extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,v){let x=this.length;return this.resize(x+1),this.emplace(x,n,c,d,f,b,v)}emplace(n,c,d,f,b,v,x){let S=6*n;return this.int16[S+0]=c,this.int16[S+1]=d,this.int16[S+2]=f,this.int16[S+3]=b,this.int16[S+4]=v,this.int16[S+5]=x,n}}p.prototype.bytesPerElement=12,Lt("StructArrayLayout2i2i2i12",p);class g extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b){let v=this.length;return this.resize(v+1),this.emplace(v,n,c,d,f,b)}emplace(n,c,d,f,b,v){let x=4*n,S=8*n;return this.float32[x+0]=c,this.float32[x+1]=d,this.float32[x+2]=f,this.int16[S+6]=b,this.int16[S+7]=v,n}}g.prototype.bytesPerElement=16,Lt("StructArrayLayout2f1f2i16",g);class y extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,v){let x=this.length;return this.resize(x+1),this.emplace(x,n,c,d,f,b,v)}emplace(n,c,d,f,b,v,x){let S=16*n,k=4*n,D=8*n;return this.uint8[S+0]=c,this.uint8[S+1]=d,this.float32[k+1]=f,this.float32[k+2]=b,this.int16[D+6]=v,this.int16[D+7]=x,n}}y.prototype.bytesPerElement=16,Lt("StructArrayLayout2ub2f2i16",y);class E extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d){let f=this.length;return this.resize(f+1),this.emplace(f,n,c,d)}emplace(n,c,d,f){let b=3*n;return this.uint16[b+0]=c,this.uint16[b+1]=d,this.uint16[b+2]=f,n}}E.prototype.bytesPerElement=6,Lt("StructArrayLayout3ui6",E);class M extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,v,x,S,k,D,L,j,W,Y,ie,he,ve){let Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,n,c,d,f,b,v,x,S,k,D,L,j,W,Y,ie,he,ve)}emplace(n,c,d,f,b,v,x,S,k,D,L,j,W,Y,ie,he,ve,Oe){let Ee=24*n,G=12*n,ue=48*n;return this.int16[Ee+0]=c,this.int16[Ee+1]=d,this.uint16[Ee+2]=f,this.uint16[Ee+3]=b,this.uint32[G+2]=v,this.uint32[G+3]=x,this.uint32[G+4]=S,this.uint16[Ee+10]=k,this.uint16[Ee+11]=D,this.uint16[Ee+12]=L,this.float32[G+7]=j,this.float32[G+8]=W,this.uint8[ue+36]=Y,this.uint8[ue+37]=ie,this.uint8[ue+38]=he,this.uint32[G+10]=ve,this.int16[Ee+22]=Oe,n}}M.prototype.bytesPerElement=48,Lt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",M);class A extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,v,x,S,k,D,L,j,W,Y,ie,he,ve,Oe,Ee,G,ue,Te,Ze,_t,Qe,ct,xt,bt){let wt=this.length;return this.resize(wt+1),this.emplace(wt,n,c,d,f,b,v,x,S,k,D,L,j,W,Y,ie,he,ve,Oe,Ee,G,ue,Te,Ze,_t,Qe,ct,xt,bt)}emplace(n,c,d,f,b,v,x,S,k,D,L,j,W,Y,ie,he,ve,Oe,Ee,G,ue,Te,Ze,_t,Qe,ct,xt,bt,wt){let ht=32*n,Vt=16*n;return this.int16[ht+0]=c,this.int16[ht+1]=d,this.int16[ht+2]=f,this.int16[ht+3]=b,this.int16[ht+4]=v,this.int16[ht+5]=x,this.int16[ht+6]=S,this.int16[ht+7]=k,this.uint16[ht+8]=D,this.uint16[ht+9]=L,this.uint16[ht+10]=j,this.uint16[ht+11]=W,this.uint16[ht+12]=Y,this.uint16[ht+13]=ie,this.uint16[ht+14]=he,this.uint16[ht+15]=ve,this.uint16[ht+16]=Oe,this.uint16[ht+17]=Ee,this.uint16[ht+18]=G,this.uint16[ht+19]=ue,this.uint16[ht+20]=Te,this.uint16[ht+21]=Ze,this.uint16[ht+22]=_t,this.uint32[Vt+12]=Qe,this.float32[Vt+13]=ct,this.float32[Vt+14]=xt,this.uint16[ht+30]=bt,this.uint16[ht+31]=wt,n}}A.prototype.bytesPerElement=64,Lt("StructArrayLayout8i15ui1ul2f2ui64",A);class O extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){let c=this.length;return this.resize(c+1),this.emplace(c,n)}emplace(n,c){return this.float32[1*n+0]=c,n}}O.prototype.bytesPerElement=4,Lt("StructArrayLayout1f4",O);class F extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d){let f=this.length;return this.resize(f+1),this.emplace(f,n,c,d)}emplace(n,c,d,f){let b=3*n;return this.uint16[6*n+0]=c,this.float32[b+1]=d,this.float32[b+2]=f,n}}F.prototype.bytesPerElement=12,Lt("StructArrayLayout1ui2f12",F);class N extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d){let f=this.length;return this.resize(f+1),this.emplace(f,n,c,d)}emplace(n,c,d,f){let b=4*n;return this.uint32[2*n+0]=c,this.uint16[b+2]=d,this.uint16[b+3]=f,n}}N.prototype.bytesPerElement=8,Lt("StructArrayLayout1ul2ui8",N);class K extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c){let d=this.length;return this.resize(d+1),this.emplace(d,n,c)}emplace(n,c,d){let f=2*n;return this.uint16[f+0]=c,this.uint16[f+1]=d,n}}K.prototype.bytesPerElement=4,Lt("StructArrayLayout2ui4",K);class ee extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){let c=this.length;return this.resize(c+1),this.emplace(c,n)}emplace(n,c){return this.uint16[1*n+0]=c,n}}ee.prototype.bytesPerElement=2,Lt("StructArrayLayout1ui2",ee);class _e extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d,f){let b=this.length;return this.resize(b+1),this.emplace(b,n,c,d,f)}emplace(n,c,d,f,b){let v=4*n;return this.float32[v+0]=c,this.float32[v+1]=d,this.float32[v+2]=f,this.float32[v+3]=b,n}}_e.prototype.bytesPerElement=16,Lt("StructArrayLayout4f16",_e);class ge extends Wl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new R(this.anchorPointX,this.anchorPointY)}}ge.prototype.size=20;class be extends h{get(n){return new ge(this,n)}}Lt("CollisionBoxArray",be);class Ce extends Wl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ce.prototype.size=48;class Ie extends M{get(n){return new Ce(this,n)}}Lt("PlacedSymbolArray",Ie);class Me extends Wl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Me.prototype.size=64;class Ae extends A{get(n){return new Me(this,n)}}Lt("SymbolInstanceArray",Ae);class ze extends O{getoffsetX(n){return this.float32[1*n+0]}}Lt("GlyphOffsetArray",ze);class Re extends Bu{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Lt("SymbolLineVertexArray",Re);class We extends Wl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}We.prototype.size=12;class ut extends F{get(n){return new We(this,n)}}Lt("TextAnchorOffsetArray",ut);class et extends Wl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}et.prototype.size=8;class rt extends N{get(n){return new et(this,n)}}Lt("FeatureIndexArray",rt);class lt extends zu{}class Pt extends zu{}class Tt extends zu{}class vt extends Vp{}class Gt extends Up{}class Ti extends jc{}class Gi extends jp{}class Rr extends m{}class vr extends r{}class Or extends l{}class Lr extends p{}class Cr extends y{}class nr extends E{}class hn extends K{}let Mn=Dr([{name:"a_pos",components:2,type:"Int16"}],4),{members:qn}=Mn;class or{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,c,d,f){let b=this.segments[this.segments.length-1];return n>or.MAX_VERTEX_ARRAY_LENGTH&&Ar(`Max vertices per segment is ${or.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${or.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!b||b.vertexLength+n>or.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==f?this.createNewSegment(c,d,f):b}createNewSegment(n,c,d){let f={vertexOffset:n.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(f.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(f),f}getOrCreateLatestSegment(n,c,d){return this.prepareSegment(0,n,c,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let n of this.segments)for(let c in n.vaos)n.vaos[c].destroy()}static simpleSegment(n,c,d,f){return new or([{vertexOffset:n,primitiveOffset:c,vertexLength:d,primitiveLength:f,vaos:{},sortKey:0}])}}function hl(u,n){return 256*(u=Ne(Math.floor(u),0,255))+Ne(Math.floor(n),0,255)}or.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Lt("SegmentVector",or);let fa=Dr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var pl,Xl,Vu,fl={exports:{}},Yl={exports:{}},Wo={exports:{}},ml=function(){if(Vu)return fl.exports;Vu=1;var u=(pl||(pl=1,Yl.exports=function(c,d){var f,b,v,x,S,k,D,L;for(b=c.length-(f=3&c.length),v=d,S=3432918353,k=461845907,L=0;L<b;)D=255&c.charCodeAt(L)|(255&c.charCodeAt(++L))<<8|(255&c.charCodeAt(++L))<<16|(255&c.charCodeAt(++L))<<24,++L,v=27492+(65535&(x=5*(65535&(v=(v^=D=(65535&(D=(D=(65535&D)*S+(((D>>>16)*S&65535)<<16)&4294967295)<<15|D>>>17))*k+(((D>>>16)*k&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(D=0,f){case 3:D^=(255&c.charCodeAt(L+2))<<16;case 2:D^=(255&c.charCodeAt(L+1))<<8;case 1:v^=D=(65535&(D=(D=(65535&(D^=255&c.charCodeAt(L)))*S+(((D>>>16)*S&65535)<<16)&4294967295)<<15|D>>>17))*k+(((D>>>16)*k&65535)<<16)&4294967295}return v^=c.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}),Yl.exports),n=(Xl||(Xl=1,Wo.exports=function(c,d){for(var f,b=c.length,v=d^b,x=0;b>=4;)f=1540483477*(65535&(f=255&c.charCodeAt(x)|(255&c.charCodeAt(++x))<<8|(255&c.charCodeAt(++x))<<16|(255&c.charCodeAt(++x))<<24))+((1540483477*(f>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),b-=4,++x;switch(b){case 3:v^=(255&c.charCodeAt(x+2))<<16;case 2:v^=(255&c.charCodeAt(x+1))<<8;case 1:v=1540483477*(65535&(v^=255&c.charCodeAt(x)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}),Wo.exports);return fl.exports=u,fl.exports.murmur3=u,fl.exports.murmur2=n,fl.exports}(),Ba=_(ml);class gl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,c,d,f){this.ids.push(on(n)),this.positions.push(c,d,f)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let c=on(n),d=0,f=this.ids.length-1;for(;d<f;){let v=d+f>>1;this.ids[v]>=c?f=v:d=v+1}let b=[];for(;this.ids[d]===c;)b.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return b}static serialize(n,c){let d=new Float64Array(n.ids),f=new Uint32Array(n.positions);return sn(d,f,0,d.length-1),c&&c.push(d.buffer,f.buffer),{ids:d,positions:f}}static deserialize(n){let c=new gl;return c.ids=n.ids,c.positions=n.positions,c.indexed=!0,c}}function on(u){let n=+u;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Ba(String(u))}function sn(u,n,c,d){for(;c<d;){let f=u[c+d>>1],b=c-1,v=d+1;for(;;){do b++;while(u[b]<f);do v--;while(u[v]>f);if(b>=v)break;bo(u,b,v),bo(n,3*b,3*v),bo(n,3*b+1,3*v+1),bo(n,3*b+2,3*v+2)}v-c<d-v?(sn(u,n,c,v),c=v+1):(sn(u,n,v+1,d),d=v)}}function bo(u,n,c){let d=u[n];u[n]=u[c],u[c]=d}Lt("FeaturePositionMap",gl);class Mr{constructor(n,c){this.gl=n.gl,this.location=c}}class th extends Mr{constructor(n,c){super(n,c),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class ug extends Mr{constructor(n,c){super(n,c),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class dg extends Mr{constructor(n,c){super(n,c),this.current=vi.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}let Lb=new Float32Array(16);function qp(u){return[hl(255*u.r,255*u.g),hl(255*u.b,255*u.a)]}class Uu{constructor(n,c,d){this.value=n,this.uniformNames=c.map(f=>`u_${f}`),this.type=d}setUniform(n,c,d){n.set(d.constantOr(this.value))}getBinding(n,c,d){return this.type==="color"?new dg(n,c):new th(n,c)}}class ds{constructor(n,c){this.uniformNames=c.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=n.tlbr}setUniform(n,c,d,f){let b=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;b&&n.set(b)}getBinding(n,c,d){return d.substr(0,9)==="u_pattern"?new ug(n,c):new th(n,c)}}class ma{constructor(n,c,d,f){this.expression=n,this.type=d,this.maxValue=0,this.paintVertexAttributes=c.map(b=>({name:`a_${b}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,c,d,f,b){let v=this.paintVertexArray.length,x=this.expression.evaluate(new Tr(0),c,{},f,[],b);this.paintVertexArray.resize(n),this._setPaintValue(v,n,x)}updatePaintArray(n,c,d,f){let b=this.expression.evaluate({zoom:0},d,f);this._setPaintValue(n,c,b)}_setPaintValue(n,c,d){if(this.type==="color"){let f=qp(d);for(let b=n;b<c;b++)this.paintVertexArray.emplace(b,f[0],f[1])}else{for(let f=n;f<c;f++)this.paintVertexArray.emplace(f,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class hs{constructor(n,c,d,f,b,v){this.expression=n,this.uniformNames=c.map(x=>`u_${x}_t`),this.type=d,this.useIntegerZoom=f,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=c.map(x=>({name:`a_${x}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(n,c,d,f,b){let v=this.expression.evaluate(new Tr(this.zoom),c,{},f,[],b),x=this.expression.evaluate(new Tr(this.zoom+1),c,{},f,[],b),S=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(S,n,v,x)}updatePaintArray(n,c,d,f){let b=this.expression.evaluate({zoom:this.zoom},d,f),v=this.expression.evaluate({zoom:this.zoom+1},d,f);this._setPaintValue(n,c,b,v)}_setPaintValue(n,c,d,f){if(this.type==="color"){let b=qp(d),v=qp(f);for(let x=n;x<c;x++)this.paintVertexArray.emplace(x,b[0],b[1],v[0],v[1])}else{for(let b=n;b<c;b++)this.paintVertexArray.emplace(b,d,f);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,c){let d=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,f=Ne(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(f)}getBinding(n,c,d){return new th(n,c)}}class Va{constructor(n,c,d,f,b,v){this.expression=n,this.type=c,this.useIntegerZoom=d,this.zoom=f,this.layerId=v,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(n,c,d){let f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(f,n,c.patterns&&c.patterns[this.layerId],d)}updatePaintArray(n,c,d,f,b){this._setPaintValues(n,c,d.patterns&&d.patterns[this.layerId],b)}_setPaintValues(n,c,d,f){if(!f||!d)return;let{min:b,mid:v,max:x}=d,S=f[b],k=f[v],D=f[x];if(S&&k&&D)for(let L=n;L<c;L++)this.zoomInPaintVertexArray.emplace(L,k.tl[0],k.tl[1],k.br[0],k.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],k.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(L,k.tl[0],k.tl[1],k.br[0],k.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],k.pixelRatio,D.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,fa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,fa.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ih{constructor(n,c,d){this.binders={},this._buffers=[];let f=[];for(let b in n.paint._values){if(!d(b))continue;let v=n.paint.get(b);if(!(v instanceof _o&&Fa(v.property.specification)))continue;let x=Hp(b,n.type),S=v.value,k=v.property.specification.type,D=v.property.useIntegerZoom,L=v.property.specification["property-type"],j=L==="cross-faded"||L==="cross-faded-data-driven";if(S.kind==="constant")this.binders[b]=j?new ds(S.value,x):new Uu(S.value,x,k),f.push(`/u_${b}`);else if(S.kind==="source"||j){let W=t2(b,k,"source");this.binders[b]=j?new Va(S,k,D,c,W,n.id):new ma(S,x,k,W),f.push(`/a_${b}`)}else{let W=t2(b,k,"composite");this.binders[b]=new hs(S,x,k,D,c,W),f.push(`/z_${b}`)}}this.cacheKey=f.sort().join("")}getMaxValue(n){let c=this.binders[n];return c instanceof ma||c instanceof hs?c.maxValue:0}populatePaintArrays(n,c,d,f,b){for(let v in this.binders){let x=this.binders[v];(x instanceof ma||x instanceof hs||x instanceof Va)&&x.populatePaintArray(n,c,d,f,b)}}setConstantPatternPositions(n,c){for(let d in this.binders){let f=this.binders[d];f instanceof ds&&f.setConstantPatternPositions(n,c)}}updatePaintArrays(n,c,d,f,b){let v=!1;for(let x in n){let S=c.getPositions(x);for(let k of S){let D=d.feature(k.index);for(let L in this.binders){let j=this.binders[L];if((j instanceof ma||j instanceof hs||j instanceof Va)&&j.expression.isStateDependent===!0){let W=f.paint.get(L);j.expression=W.value,j.updatePaintArray(k.start,k.end,D,n[x],b),v=!0}}}}return v}defines(){let n=[];for(let c in this.binders){let d=this.binders[c];(d instanceof Uu||d instanceof ds)&&n.push(...d.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){let n=[];for(let c in this.binders){let d=this.binders[c];if(d instanceof ma||d instanceof hs)for(let f=0;f<d.paintVertexAttributes.length;f++)n.push(d.paintVertexAttributes[f].name);else if(d instanceof Va)for(let f=0;f<fa.members.length;f++)n.push(fa.members[f].name)}return n}getBinderUniforms(){let n=[];for(let c in this.binders){let d=this.binders[c];if(d instanceof Uu||d instanceof ds||d instanceof hs)for(let f of d.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,c){let d=[];for(let f in this.binders){let b=this.binders[f];if(b instanceof Uu||b instanceof ds||b instanceof hs){for(let v of b.uniformNames)if(c[v]){let x=b.getBinding(n,c[v],v);d.push({name:v,property:f,binding:x})}}}return d}setUniforms(n,c,d,f){for(let{name:b,property:v,binding:x}of c)this.binders[v].setUniform(x,f,d.get(v),b)}updatePaintBuffers(n){this._buffers=[];for(let c in this.binders){let d=this.binders[c];if(n&&d instanceof Va){let f=n.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(d instanceof ma||d instanceof hs)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(n){for(let c in this.binders){let d=this.binders[c];(d instanceof ma||d instanceof hs||d instanceof Va)&&d.upload(n)}this.updatePaintBuffers()}destroy(){for(let n in this.binders){let c=this.binders[n];(c instanceof ma||c instanceof hs||c instanceof Va)&&c.destroy()}}}class _l{constructor(n,c,d=()=>!0){this.programConfigurations={};for(let f of n)this.programConfigurations[f.id]=new ih(f,c,d);this.needsUpload=!1,this._featureMap=new gl,this._bufferOffset=0}populatePaintArrays(n,c,d,f,b,v){for(let x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(n,c,f,b,v);c.id!==void 0&&this._featureMap.add(c.id,d,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,c,d,f){for(let b of d)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(n,this._featureMap,c,b,f)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(let c in this.programConfigurations)this.programConfigurations[c].upload(n);this.needsUpload=!1}}destroy(){for(let n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Hp(u,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${n}-`,"").replace(/-/g,"_")]}function t2(u,n,c){let d={color:{source:jc,composite:_e},number:{source:O,composite:jc}},f=function(b){return{"line-pattern":{source:Gi,composite:Gi},"fill-pattern":{source:Gi,composite:Gi},"fill-extrusion-pattern":{source:Gi,composite:Gi}}[b]}(u);return f&&f[c]||d[n][c]}Lt("ConstantBinder",Uu),Lt("CrossFadedConstantBinder",ds),Lt("SourceExpressionBinder",ma),Lt("CrossFadedCompositeBinder",Va),Lt("CompositeExpressionBinder",hs),Lt("ProgramConfiguration",ih,{omit:["_buffers"]}),Lt("ProgramConfigurationSet",_l);let Nb=Math.pow(2,14)-1,i2=-Nb-1;function ju(u){let n=me/u.extent,c=u.loadGeometry();for(let d=0;d<c.length;d++){let f=c[d];for(let b=0;b<f.length;b++){let v=f[b],x=Math.round(v.x*n),S=Math.round(v.y*n);v.x=Ne(x,i2,Nb),v.y=Ne(S,i2,Nb),(x<v.x||x>v.x+1||S<v.y||S>v.y+1)&&Ar("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function qu(u,n){return{type:u.type,id:u.id,properties:u.properties,geometry:n?ju(u):[]}}let r2=-32768;function m3(u,n,c,d,f){u.emplaceBack(r2+8*n+d,r2+8*c+f)}class Fb{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Pt,this.indexArray=new nr,this.segments=new or,this.programConfigurations=new _l(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,d){let f=this.layers[0],b=[],v=null,x=!1,S=f.type==="heatmap";if(f.type==="circle"){let D=f;v=D.layout.get("circle-sort-key"),x=!v.isConstant(),S=S||D.paint.get("circle-pitch-alignment")==="map"}let k=S?c.subdivisionGranularity.circle:1;for(let{feature:D,id:L,index:j,sourceLayerIndex:W}of n){let Y=this.layers[0]._featureFilter.needGeometry,ie=qu(D,Y);if(!this.layers[0]._featureFilter.filter(new Tr(this.zoom),ie,d))continue;let he=x?v.evaluate(ie,{},d):void 0,ve={id:L,properties:D.properties,type:D.type,sourceLayerIndex:W,index:j,geometry:Y?ie.geometry:ju(D),patterns:{},sortKey:he};b.push(ve)}x&&b.sort((D,L)=>D.sortKey-L.sortKey);for(let D of b){let{geometry:L,index:j,sourceLayerIndex:W}=D,Y=n[j].feature;this.addFeature(D,L,j,d,k),c.featureIndex.insert(Y,L,j,W,this.index)}}update(n,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,qn),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,c,d,f,b=1){let v;switch(b){case 1:v=[0,7];break;case 3:v=[0,2,5,7];break;case 5:v=[0,1,3,4,6,7];break;case 7:v=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${b}; valid values are 1, 3, 5, 7.`)}let x=v.length;for(let S of c)for(let k of S){let D=k.x,L=k.y;if(D<0||D>=me||L<0||L>=me)continue;let j=this.segments.prepareSegment(x*x,this.layoutVertexArray,this.indexArray,n.sortKey),W=j.vertexLength;for(let Y=0;Y<x;Y++)for(let ie=0;ie<x;ie++)m3(this.layoutVertexArray,D,L,v[ie],v[Y]);for(let Y=0;Y<x-1;Y++)for(let ie=0;ie<x-1;ie++){let he=W+Y*x+ie,ve=W+(Y+1)*x+ie;this.indexArray.emplaceBack(he,ve+1,he+1),this.indexArray.emplaceBack(he,ve,ve+1)}j.vertexLength+=x*x,j.primitiveLength+=(x-1)*(x-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{},f)}}function n2(u,n){for(let c=0;c<u.length;c++)if(Hu(n,u[c]))return!0;for(let c=0;c<n.length;c++)if(Hu(u,n[c]))return!0;return!!zb(u,n)}function g3(u,n,c){return!!Hu(u,n)||!!Bb(n,u,c)}function o2(u,n){if(u.length===1)return a2(n,u[0]);for(let c=0;c<n.length;c++){let d=n[c];for(let f=0;f<d.length;f++)if(Hu(u,d[f]))return!0}for(let c=0;c<u.length;c++)if(a2(n,u[c]))return!0;for(let c=0;c<n.length;c++)if(zb(u,n[c]))return!0;return!1}function _3(u,n,c){if(u.length>1){if(zb(u,n))return!0;for(let d=0;d<n.length;d++)if(Bb(n[d],u,c))return!0}for(let d=0;d<u.length;d++)if(Bb(u[d],n,c))return!0;return!1}function zb(u,n){if(u.length===0||n.length===0)return!1;for(let c=0;c<u.length-1;c++){let d=u[c],f=u[c+1];for(let b=0;b<n.length-1;b++)if(b3(d,f,n[b],n[b+1]))return!0}return!1}function b3(u,n,c,d){return rr(u,c,d)!==rr(n,c,d)&&rr(u,n,c)!==rr(u,n,d)}function Bb(u,n,c){let d=c*c;if(n.length===1)return u.distSqr(n[0])<d;for(let f=1;f<n.length;f++)if(s2(u,n[f-1],n[f])<d)return!0;return!1}function s2(u,n,c){let d=n.distSqr(c);if(d===0)return u.distSqr(n);let f=((u.x-n.x)*(c.x-n.x)+(u.y-n.y)*(c.y-n.y))/d;return u.distSqr(f<0?n:f>1?c:c.sub(n)._mult(f)._add(n))}function a2(u,n){for(let c=0;c<u.length;c++)if(Hu(u[c],n))return!0;return!1}function Hu(u,n){let c=!1;for(let d=0,f=u.length-1;d<u.length;f=d++){let b=u[d],v=u[f];b.y>n.y!=v.y>n.y&&n.x<(v.x-b.x)*(n.y-b.y)/(v.y-b.y)+b.x&&(c=!c)}return c}function v3(u,n,c){let d=c[0],f=c[2];if(u.x<d.x&&n.x<d.x||u.x>f.x&&n.x>f.x||u.y<d.y&&n.y<d.y||u.y>f.y&&n.y>f.y)return!1;let b=rr(u,n,c[0]);return b!==rr(u,n,c[1])||b!==rr(u,n,c[2])||b!==rr(u,n,c[3])}function $p(u,n,c){let d=n.paint.get(u).value;return d.kind==="constant"?d.value:c.programConfigurations.get(n.id).getMaxValue(u)}function hg(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function pg(u,n,c,d,f){if(!n[0]&&!n[1])return u;let b=R.convert(n)._mult(f);c==="viewport"&&b._rotate(-d);let v=[];for(let x=0;x<u.length;x++)v.push(u[x].sub(b));return v}let l2,c2;Lt("CircleBucket",Fb,{omit:["layers"]});var y3={get paint(){return c2=c2||new nn({"circle-radius":new ri(se.paint_circle["circle-radius"]),"circle-color":new ri(se.paint_circle["circle-color"]),"circle-blur":new ri(se.paint_circle["circle-blur"]),"circle-opacity":new ri(se.paint_circle["circle-opacity"]),"circle-translate":new Zt(se.paint_circle["circle-translate"]),"circle-translate-anchor":new Zt(se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zt(se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zt(se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ri(se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ri(se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ri(se.paint_circle["circle-stroke-opacity"])})},get layout(){return l2=l2||new nn({"circle-sort-key":new ri(se.layout_circle["circle-sort-key"])})}};class x3 extends us{constructor(n){super(n,y3)}createBucket(n){return new Fb(n)}queryRadius(n){let c=n;return $p("circle-radius",this,c)+$p("circle-stroke-width",this,c)+hg(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:c,featureState:d,geometry:f,transform:b,pixelsToTileUnits:v,unwrappedTileID:x,getElevation:S}){let k=pg(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-b.bearingInRadians,v),D=this.paint.get("circle-radius").evaluate(c,d)+this.paint.get("circle-stroke-width").evaluate(c,d),L=this.paint.get("circle-pitch-alignment")==="map",j=L?k:function(Y,ie,he,ve){return Y.map(Oe=>u2(Oe,ie,he,ve))}(k,b,x,S),W=L?D*v:D;for(let Y of f)for(let ie of Y){let he=L?ie:u2(ie,b,x,S),ve=W,Oe=b.projectTileCoordinates(ie.x,ie.y,x,S).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ve*=Oe/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ve*=b.cameraToCenterDistance/Oe),g3(j,he,ve))return!0}return!1}}function u2(u,n,c,d){let f=n.projectTileCoordinates(u.x,u.y,c,d).point;return new R((.5*f.x+.5)*n.width,(.5*-f.y+.5)*n.height)}class d2 extends Fb{}let h2;Lt("HeatmapBucket",d2,{omit:["layers"]});var w3={get paint(){return h2=h2||new nn({"heatmap-radius":new ri(se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ri(se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zt(se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new zp(se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zt(se.paint_heatmap["heatmap-opacity"])})}};function Vb(u,{width:n,height:c},d,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*c*d)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${n*c*d}`)}else f=new Uint8Array(n*c*d);return u.width=n,u.height=c,u.data=f,u}function p2(u,{width:n,height:c},d){if(n===u.width&&c===u.height)return;let f=Vb({},{width:n,height:c},d);Ub(u,f,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,n),height:Math.min(u.height,c)},d),u.width=n,u.height=c,u.data=f.data}function Ub(u,n,c,d,f,b){if(f.width===0||f.height===0)return n;if(f.width>u.width||f.height>u.height||c.x>u.width-f.width||c.y>u.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||d.x>n.width-f.width||d.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");let v=u.data,x=n.data;if(v===x)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<f.height;S++){let k=((c.y+S)*u.width+c.x)*b,D=((d.y+S)*n.width+d.x)*b;for(let L=0;L<f.width*b;L++)x[D+L]=v[k+L]}return n}class Gp{constructor(n,c){Vb(this,n,1,c)}resize(n){p2(this,n,1)}clone(){return new Gp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,c,d,f,b){Ub(n,c,d,f,b,1)}}class Is{constructor(n,c){Vb(this,n,4,c)}resize(n){p2(this,n,4)}replace(n,c){c?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Is({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,c,d,f,b){Ub(n,c,d,f,b,4)}}function f2(u){let n={},c=u.resolution||256,d=u.clips?u.clips.length:1,f=u.image||new Is({width:c,height:d});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);let b=(v,x,S)=>{n[u.evaluationKey]=S;let k=u.expression.evaluate(n);f.data[v+x+0]=Math.floor(255*k.r/k.a),f.data[v+x+1]=Math.floor(255*k.g/k.a),f.data[v+x+2]=Math.floor(255*k.b/k.a),f.data[v+x+3]=Math.floor(255*k.a)};if(u.clips)for(let v=0,x=0;v<d;++v,x+=4*c)for(let S=0,k=0;S<c;S++,k+=4){let D=S/(c-1),{start:L,end:j}=u.clips[v];b(x,k,L*(1-D)+j*D)}else for(let v=0,x=0;v<c;v++,x+=4)b(0,x,v/(c-1));return f}Lt("AlphaImage",Gp),Lt("RGBAImage",Is);let jb="big-fb";class C3 extends us{createBucket(n){return new d2(n)}constructor(n){super(n,w3),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=f2({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(jb)&&this.heatmapFbos.delete(jb)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let m2;var E3={get paint(){return m2=m2||new nn({"hillshade-illumination-direction":new Zt(se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Zt(se.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Zt(se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zt(se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zt(se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zt(se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zt(se.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Zt(se.paint_hillshade["hillshade-method"])})}};class S3 extends us{constructor(n){super(n,E3),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let n=this.paint.get("hillshade-illumination-direction").values,c=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,f=this.paint.get("hillshade-shadow-color").values,b=Math.max(n.length,c.length,d.length,f.length);n=n.concat(Array(b-n.length).fill(n.at(-1))),c=c.concat(Array(b-c.length).fill(c.at(-1))),d=d.concat(Array(b-d.length).fill(d.at(-1))),f=f.concat(Array(b-f.length).fill(f.at(-1)));let v=c.map(Ea);return{directionRadians:n.map(Ea),altitudeRadians:v,shadowColor:f,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let T3=Dr([{name:"a_pos",components:2,type:"Int16"}],4),{members:M3}=T3;function qb(u,n,c){let d=c.patternDependencies,f=!1;for(let b of n){let v=b.paint.get(`${u}-pattern`);v.isConstant()||(f=!0);let x=v.constantOr(null);x&&(f=!0,d[x.to]=!0,d[x.from]=!0)}return f}function Hb(u,n,c,d,f){let b=f.patternDependencies;for(let v of n){let x=v.paint.get(`${u}-pattern`).value;if(x.kind!=="constant"){let S=x.evaluate({zoom:d-1},c,{},f.availableImages),k=x.evaluate({zoom:d},c,{},f.availableImages),D=x.evaluate({zoom:d+1},c,{},f.availableImages);S=S&&S.name?S.name:S,k=k&&k.name?k.name:k,D=D&&D.name?D.name:D,b[S]=!0,b[k]=!0,b[D]=!0,c.patterns[v.id]={min:S,mid:k,max:D}}}return c}function g2(u,n,c,d,f){let b;if(f===function(v,x,S,k){let D=0;for(let L=x,j=S-k;L<S;L+=k)D+=(v[j]-v[L])*(v[L+1]+v[j+1]),j=L;return D}(u,n,c,d)>0)for(let v=n;v<c;v+=d)b=y2(v/d|0,u[v],u[v+1],b);else for(let v=c-d;v>=n;v-=d)b=y2(v/d|0,u[v],u[v+1],b);return b&&rh(b,b.next)&&(Yp(b),b=b.next),b}function $u(u,n){if(!u)return u;n||(n=u);let c,d=u;do if(c=!1,d.steiner||!rh(d,d.next)&&Qr(d.prev,d,d.next)!==0)d=d.next;else{if(Yp(d),d=n=d.prev,d===d.next)break;c=!0}while(c||d!==n);return n}function Wp(u,n,c,d,f,b,v){if(!u)return;!v&&b&&function(S,k,D,L){let j=S;do j.z===0&&(j.z=$b(j.x,j.y,k,D,L)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==S);j.prevZ.nextZ=null,j.prevZ=null,function(W){let Y,ie=1;do{let he,ve=W;W=null;let Oe=null;for(Y=0;ve;){Y++;let Ee=ve,G=0;for(let Te=0;Te<ie&&(G++,Ee=Ee.nextZ,Ee);Te++);let ue=ie;for(;G>0||ue>0&&Ee;)G!==0&&(ue===0||!Ee||ve.z<=Ee.z)?(he=ve,ve=ve.nextZ,G--):(he=Ee,Ee=Ee.nextZ,ue--),Oe?Oe.nextZ=he:W=he,he.prevZ=Oe,Oe=he;ve=Ee}Oe.nextZ=null,ie*=2}while(Y>1)}(j)}(u,d,f,b);let x=u;for(;u.prev!==u.next;){let S=u.prev,k=u.next;if(b?P3(u,d,f,b):I3(u))n.push(S.i,u.i,k.i),Yp(u),u=k.next,x=k.next;else if((u=k)===x){v?v===1?Wp(u=k3($u(u),n),n,c,d,f,b,2):v===2&&A3(u,n,c,d,f,b):Wp($u(u),n,c,d,f,b,1);break}}}function I3(u){let n=u.prev,c=u,d=u.next;if(Qr(n,c,d)>=0)return!1;let f=n.x,b=c.x,v=d.x,x=n.y,S=c.y,k=d.y,D=Math.min(f,b,v),L=Math.min(x,S,k),j=Math.max(f,b,v),W=Math.max(x,S,k),Y=d.next;for(;Y!==n;){if(Y.x>=D&&Y.x<=j&&Y.y>=L&&Y.y<=W&&Zp(f,x,b,S,v,k,Y.x,Y.y)&&Qr(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function P3(u,n,c,d){let f=u.prev,b=u,v=u.next;if(Qr(f,b,v)>=0)return!1;let x=f.x,S=b.x,k=v.x,D=f.y,L=b.y,j=v.y,W=Math.min(x,S,k),Y=Math.min(D,L,j),ie=Math.max(x,S,k),he=Math.max(D,L,j),ve=$b(W,Y,n,c,d),Oe=$b(ie,he,n,c,d),Ee=u.prevZ,G=u.nextZ;for(;Ee&&Ee.z>=ve&&G&&G.z<=Oe;){if(Ee.x>=W&&Ee.x<=ie&&Ee.y>=Y&&Ee.y<=he&&Ee!==f&&Ee!==v&&Zp(x,D,S,L,k,j,Ee.x,Ee.y)&&Qr(Ee.prev,Ee,Ee.next)>=0||(Ee=Ee.prevZ,G.x>=W&&G.x<=ie&&G.y>=Y&&G.y<=he&&G!==f&&G!==v&&Zp(x,D,S,L,k,j,G.x,G.y)&&Qr(G.prev,G,G.next)>=0))return!1;G=G.nextZ}for(;Ee&&Ee.z>=ve;){if(Ee.x>=W&&Ee.x<=ie&&Ee.y>=Y&&Ee.y<=he&&Ee!==f&&Ee!==v&&Zp(x,D,S,L,k,j,Ee.x,Ee.y)&&Qr(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.prevZ}for(;G&&G.z<=Oe;){if(G.x>=W&&G.x<=ie&&G.y>=Y&&G.y<=he&&G!==f&&G!==v&&Zp(x,D,S,L,k,j,G.x,G.y)&&Qr(G.prev,G,G.next)>=0)return!1;G=G.nextZ}return!0}function k3(u,n){let c=u;do{let d=c.prev,f=c.next.next;!rh(d,f)&&b2(d,c,c.next,f)&&Xp(d,f)&&Xp(f,d)&&(n.push(d.i,c.i,f.i),Yp(c),Yp(c.next),c=u=f),c=c.next}while(c!==u);return $u(c)}function A3(u,n,c,d,f,b){let v=u;do{let x=v.next.next;for(;x!==v.prev;){if(v.i!==x.i&&N3(v,x)){let S=v2(v,x);return v=$u(v,v.next),S=$u(S,S.next),Wp(v,n,c,d,f,b,0),void Wp(S,n,c,d,f,b,0)}x=x.next}v=v.next}while(v!==u)}function D3(u,n){let c=u.x-n.x;return c===0&&(c=u.y-n.y,c===0)&&(c=(u.next.y-u.y)/(u.next.x-u.x)-(n.next.y-n.y)/(n.next.x-n.x)),c}function R3(u,n){let c=function(f,b){let v=b,x=f.x,S=f.y,k,D=-1/0;if(rh(f,v))return v;do{if(rh(f,v.next))return v.next;if(S<=v.y&&S>=v.next.y&&v.next.y!==v.y){let ie=v.x+(S-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(ie<=x&&ie>D&&(D=ie,k=v.x<v.next.x?v:v.next,ie===x))return k}v=v.next}while(v!==b);if(!k)return null;let L=k,j=k.x,W=k.y,Y=1/0;v=k;do{if(x>=v.x&&v.x>=j&&x!==v.x&&_2(S<W?x:D,S,j,W,S<W?D:x,S,v.x,v.y)){let ie=Math.abs(S-v.y)/(x-v.x);Xp(v,f)&&(ie<Y||ie===Y&&(v.x>k.x||v.x===k.x&&O3(k,v)))&&(k=v,Y=ie)}v=v.next}while(v!==L);return k}(u,n);if(!c)return n;let d=v2(c,u);return $u(d,d.next),$u(c,c.next)}function O3(u,n){return Qr(u.prev,u,n.prev)<0&&Qr(n.next,u,u.next)<0}function $b(u,n,c,d,f){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-c)*f|0)|u<<8))|u<<4))|u<<2))|u<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-d)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function L3(u){let n=u,c=u;do(n.x<c.x||n.x===c.x&&n.y<c.y)&&(c=n),n=n.next;while(n!==u);return c}function _2(u,n,c,d,f,b,v,x){return(f-v)*(n-x)>=(u-v)*(b-x)&&(u-v)*(d-x)>=(c-v)*(n-x)&&(c-v)*(b-x)>=(f-v)*(d-x)}function Zp(u,n,c,d,f,b,v,x){return!(u===v&&n===x)&&_2(u,n,c,d,f,b,v,x)}function N3(u,n){return u.next.i!==n.i&&u.prev.i!==n.i&&!function(c,d){let f=c;do{if(f.i!==c.i&&f.next.i!==c.i&&f.i!==d.i&&f.next.i!==d.i&&b2(f,f.next,c,d))return!0;f=f.next}while(f!==c);return!1}(u,n)&&(Xp(u,n)&&Xp(n,u)&&function(c,d){let f=c,b=!1,v=(c.x+d.x)/2,x=(c.y+d.y)/2;do f.y>x!=f.next.y>x&&f.next.y!==f.y&&v<(f.next.x-f.x)*(x-f.y)/(f.next.y-f.y)+f.x&&(b=!b),f=f.next;while(f!==c);return b}(u,n)&&(Qr(u.prev,u,n.prev)||Qr(u,n.prev,n))||rh(u,n)&&Qr(u.prev,u,u.next)>0&&Qr(n.prev,n,n.next)>0)}function Qr(u,n,c){return(n.y-u.y)*(c.x-n.x)-(n.x-u.x)*(c.y-n.y)}function rh(u,n){return u.x===n.x&&u.y===n.y}function b2(u,n,c,d){let f=mg(Qr(u,n,c)),b=mg(Qr(u,n,d)),v=mg(Qr(c,d,u)),x=mg(Qr(c,d,n));return f!==b&&v!==x||!(f!==0||!fg(u,c,n))||!(b!==0||!fg(u,d,n))||!(v!==0||!fg(c,u,d))||!(x!==0||!fg(c,n,d))}function fg(u,n,c){return n.x<=Math.max(u.x,c.x)&&n.x>=Math.min(u.x,c.x)&&n.y<=Math.max(u.y,c.y)&&n.y>=Math.min(u.y,c.y)}function mg(u){return u>0?1:u<0?-1:0}function Xp(u,n){return Qr(u.prev,u,u.next)<0?Qr(u,n,u.next)>=0&&Qr(u,u.prev,n)>=0:Qr(u,n,u.prev)<0||Qr(u,u.next,n)<0}function v2(u,n){let c=Gb(u.i,u.x,u.y),d=Gb(n.i,n.x,n.y),f=u.next,b=n.prev;return u.next=n,n.prev=u,c.next=f,f.prev=c,d.next=c,c.prev=d,b.next=d,d.prev=b,d}function y2(u,n,c,d){let f=Gb(u,n,c);return d?(f.next=d.next,f.prev=d,d.next.prev=f,d.next=f):(f.prev=f,f.next=f),f}function Yp(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Gb(u,n,c){return{i:u,x:n,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class nh{constructor(n,c){if(c>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=c}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class gg{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}gg.noSubdivision=new gg({fill:new nh(0,0),line:new nh(0,0),tile:new nh(0,0),stencil:new nh(0,0),circle:1}),Lt("SubdivisionGranularityExpression",nh),Lt("SubdivisionGranularitySetting",gg);let oh=-32768,Kp=32767;class F3{constructor(n,c){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=me/n,this._canonical=c}_getKey(n,c){return(n+=32768)<<16|(c+=32768)<<0}_vertexToIndex(n,c){if(n<-32768||c<-32768||n>32767||c>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let d=0|Math.round(n),f=0|Math.round(c),b=this._getKey(d,f);if(this._vertexDictionary.has(b))return this._vertexDictionary.get(b);let v=this._vertexBuffer.length/2;return this._vertexDictionary.set(b,v),this._vertexBuffer.push(d,f),v}_subdivideTrianglesScanline(n){if(this._granularity<2)return function(f,b){let v=[];for(let x=0;x<b.length;x+=3){let S=b[x],k=b[x+1],D=b[x+2],L=f[2*S],j=f[2*S+1];(f[2*k]-L)*(f[2*D+1]-j)-(f[2*k+1]-j)*(f[2*D]-L)>0?(v.push(S),v.push(D),v.push(k)):(v.push(S),v.push(k),v.push(D))}return v}(this._vertexBuffer,n);let c=[],d=n.length;for(let f=0;f<d;f+=3){let b=[n[f+0],n[f+1],n[f+2]],v=[this._vertexBuffer[2*n[f+0]+0],this._vertexBuffer[2*n[f+0]+1],this._vertexBuffer[2*n[f+1]+0],this._vertexBuffer[2*n[f+1]+1],this._vertexBuffer[2*n[f+2]+0],this._vertexBuffer[2*n[f+2]+1]],x=1/0,S=1/0,k=-1/0,D=-1/0;for(let ie=0;ie<3;ie++){let he=v[2*ie],ve=v[2*ie+1];x=Math.min(x,he),k=Math.max(k,he),S=Math.min(S,ve),D=Math.max(D,ve)}if(x===k||S===D)continue;let L=Math.floor(x/this._granularityCellSize),j=Math.ceil(k/this._granularityCellSize),W=Math.floor(S/this._granularityCellSize),Y=Math.ceil(D/this._granularityCellSize);if(L!==j||W!==Y)for(let ie=W;ie<Y;ie++){let he=this._scanlineGenerateVertexRingForCellRow(ie,v,b);z3(this._vertexBuffer,he,c)}else c.push(...b)}return c}_scanlineGenerateVertexRingForCellRow(n,c,d){let f=n*this._granularityCellSize,b=f+this._granularityCellSize,v=[];for(let x=0;x<3;x++){let S=c[2*x],k=c[2*x+1],D=c[2*(x+1)%6],L=c[(2*(x+1)+1)%6],j=c[2*(x+2)%6],W=c[(2*(x+2)+1)%6],Y=D-S,ie=L-k,he=Y===0,ve=ie===0,Oe=(f-k)/ie,Ee=(b-k)/ie,G=Math.min(Oe,Ee),ue=Math.max(Oe,Ee);if(!ve&&(G>=1||ue<=0)||ve&&(k<f||k>b)){L>=f&&L<=b&&v.push(d[(x+1)%3]);continue}!ve&&G>0&&v.push(this._vertexToIndex(S+Y*G,k+ie*G));let Te=S+Y*Math.max(G,0),Ze=S+Y*Math.min(ue,1);he||this._generateIntraEdgeVertices(v,S,k,D,L,Te,Ze),!ve&&ue<1&&v.push(this._vertexToIndex(S+Y*ue,k+ie*ue)),(ve||L>=f&&L<=b)&&v.push(d[(x+1)%3]),!ve&&(L<=f||L>=b)&&this._generateInterEdgeVertices(v,S,k,D,L,j,W,Ze,f,b)}return v}_generateIntraEdgeVertices(n,c,d,f,b,v,x){let S=f-c,k=b-d,D=k===0,L=D?Math.min(c,f):Math.min(v,x),j=D?Math.max(c,f):Math.max(v,x),W=Math.floor(L/this._granularityCellSize)+1,Y=Math.ceil(j/this._granularityCellSize)-1;if(D?c<f:v<x)for(let ie=W;ie<=Y;ie++){let he=ie*this._granularityCellSize;n.push(this._vertexToIndex(he,d+k*(he-c)/S))}else for(let ie=Y;ie>=W;ie--){let he=ie*this._granularityCellSize;n.push(this._vertexToIndex(he,d+k*(he-c)/S))}}_generateInterEdgeVertices(n,c,d,f,b,v,x,S,k,D){let L=b-d,j=v-f,W=x-b,Y=(k-b)/W,ie=(D-b)/W,he=Math.min(Y,ie),ve=Math.max(Y,ie),Oe=f+j*he,Ee=Math.floor(Math.min(Oe,S)/this._granularityCellSize)+1,G=Math.ceil(Math.max(Oe,S)/this._granularityCellSize)-1,ue=S<Oe,Te=W===0;if(Te&&(x===k||x===D))return;if(Te||he>=1||ve<=0){let _t=d-x,Qe=v+(c-v)*Math.min((k-x)/_t,(D-x)/_t);Ee=Math.floor(Math.min(Qe,S)/this._granularityCellSize)+1,G=Math.ceil(Math.max(Qe,S)/this._granularityCellSize)-1,ue=S<Qe}let Ze=L>0?D:k;if(ue)for(let _t=Ee;_t<=G;_t++)n.push(this._vertexToIndex(_t*this._granularityCellSize,Ze));else for(let _t=G;_t>=Ee;_t--)n.push(this._vertexToIndex(_t*this._granularityCellSize,Ze))}_generateOutline(n){let c=[];for(let d of n){let f=Gu(d,this._granularity,!0),b=this._pointArrayToIndices(f),v=[];for(let x=1;x<b.length;x++)v.push(b[x-1]),v.push(b[x]);c.push(v)}return c}_handlePoles(n){let c=!1,d=!1;this._canonical&&(this._canonical.y===0&&(c=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(c||d)&&this._fillPoles(n,c,d)}_ensureNoPoleVertices(){let n=this._vertexBuffer;for(let c=0;c<n.length;c+=2){let d=n[c+1];d===oh&&(n[c+1]=-32767),d===Kp&&(n[c+1]=32766)}}_generatePoleQuad(n,c,d,f,b,v){f>b!=(v===oh)?(n.push(c),n.push(d),n.push(this._vertexToIndex(f,v)),n.push(d),n.push(this._vertexToIndex(b,v)),n.push(this._vertexToIndex(f,v))):(n.push(d),n.push(c),n.push(this._vertexToIndex(f,v)),n.push(this._vertexToIndex(b,v)),n.push(d),n.push(this._vertexToIndex(f,v)))}_fillPoles(n,c,d){let f=this._vertexBuffer,b=me,v=n.length;for(let x=2;x<v;x+=3){let S=n[x-2],k=n[x-1],D=n[x],L=f[2*S],j=f[2*S+1],W=f[2*k],Y=f[2*k+1],ie=f[2*D],he=f[2*D+1];c&&(j===0&&Y===0&&this._generatePoleQuad(n,S,k,L,W,oh),Y===0&&he===0&&this._generatePoleQuad(n,k,D,W,ie,oh),he===0&&j===0&&this._generatePoleQuad(n,D,S,ie,L,oh)),d&&(j===b&&Y===b&&this._generatePoleQuad(n,S,k,L,W,Kp),Y===b&&he===b&&this._generatePoleQuad(n,k,D,W,ie,Kp),he===b&&j===b&&this._generatePoleQuad(n,D,S,ie,L,Kp))}}_initializeVertices(n){for(let c=0;c<n.length;c+=2)this._vertexToIndex(n[c],n[c+1])}subdividePolygonInternal(n,c){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:d,holeIndices:f}=function(x){let S=[],k=[];for(let D of x)if(D.length!==0){D!==x[0]&&S.push(k.length/2);for(let L=0;L<D.length;L++)k.push(D[L].x),k.push(D[L].y)}return{flattened:k,holeIndices:S}}(n),b;this._initializeVertices(d);try{let x=function(k,D,L=2){let j=D&&D.length,W=j?D[0]*L:k.length,Y=g2(k,0,W,L,!0),ie=[];if(!Y||Y.next===Y.prev)return ie;let he,ve,Oe;if(j&&(Y=function(Ee,G,ue,Te){let Ze=[];for(let _t=0,Qe=G.length;_t<Qe;_t++){let ct=g2(Ee,G[_t]*Te,_t<Qe-1?G[_t+1]*Te:Ee.length,Te,!1);ct===ct.next&&(ct.steiner=!0),Ze.push(L3(ct))}Ze.sort(D3);for(let _t=0;_t<Ze.length;_t++)ue=R3(Ze[_t],ue);return ue}(k,D,Y,L)),k.length>80*L){he=1/0,ve=1/0;let Ee=-1/0,G=-1/0;for(let ue=L;ue<W;ue+=L){let Te=k[ue],Ze=k[ue+1];Te<he&&(he=Te),Ze<ve&&(ve=Ze),Te>Ee&&(Ee=Te),Ze>G&&(G=Ze)}Oe=Math.max(Ee-he,G-ve),Oe=Oe!==0?32767/Oe:0}return Wp(Y,ie,L,he,ve,Oe,0),ie}(d,f),S=this._convertIndices(d,x);b=this._subdivideTrianglesScanline(S)}catch(x){console.error(x)}let v=[];return c&&(v=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(b),{verticesFlattened:this._vertexBuffer,indicesTriangles:b,indicesLineList:v}}_convertIndices(n,c){let d=[];for(let f=0;f<c.length;f++)d.push(this._vertexToIndex(n[2*c[f]],n[2*c[f]+1]));return d}_pointArrayToIndices(n){let c=[];for(let d=0;d<n.length;d++){let f=n[d];c.push(this._vertexToIndex(f.x,f.y))}return c}}function x2(u,n,c,d=!0){return new F3(c,n).subdividePolygonInternal(u,d)}function Gu(u,n,c=!1){if(!u||u.length<1)return[];if(u.length<2)return[];let d=u[0],f=u[u.length-1],b=c&&(d.x!==f.x||d.y!==f.y);if(n<2)return b?[...u,u[0]]:[...u];let v=Math.floor(me/n),x=[];x.push(new R(u[0].x,u[0].y));let S=u.length,k=b?S:S-1;for(let D=0;D<k;D++){let L=u[D],j=D<S-1?u[D+1]:u[0],W=L.x,Y=L.y,ie=j.x,he=j.y,ve=W!==ie,Oe=Y!==he;if(!ve&&!Oe)continue;let Ee=ie-W,G=he-Y,ue=Math.abs(Ee),Te=Math.abs(G),Ze=W,_t=Y;for(;;){let ct=Ee>0?(Math.floor(Ze/v)+1)*v:(Math.ceil(Ze/v)-1)*v,xt=G>0?(Math.floor(_t/v)+1)*v:(Math.ceil(_t/v)-1)*v,bt=Math.abs(Ze-ct),wt=Math.abs(_t-xt),ht=Math.abs(Ze-ie),Vt=Math.abs(_t-he),ei=ve?bt/ue:Number.POSITIVE_INFINITY,Qt=Oe?wt/Te:Number.POSITIVE_INFINITY;if((ht<=bt||!ve)&&(Vt<=wt||!Oe))break;if(ei<Qt&&ve||!Oe){Ze=ct,_t+=G*ei;let Wt=new R(Ze,Math.round(_t));x[x.length-1].x===Wt.x&&x[x.length-1].y===Wt.y||x.push(Wt)}else{Ze+=Ee*Qt,_t=xt;let Wt=new R(Math.round(Ze),_t);x[x.length-1].x===Wt.x&&x[x.length-1].y===Wt.y||x.push(Wt)}}let Qe=new R(ie,he);x[x.length-1].x===Qe.x&&x[x.length-1].y===Qe.y||x.push(Qe)}return x}function z3(u,n,c){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,f=u[2*n[0]];for(let S=1;S<n.length;S++){let k=u[2*n[S]];k<f&&(f=k,d=S)}let b=n.length,v=d,x=(v+1)%b;for(;;){let S=v-1>=0?v-1:b-1,k=(x+1)%b,D=u[2*n[S]],L=u[2*n[k]],j=u[2*n[v]],W=u[2*n[v]+1],Y=u[2*n[x]+1],ie=!1;if(D<L)ie=!0;else if(D>L)ie=!1;else{let he=Y-W,ve=-(u[2*n[x]]-j),Oe=W<Y?1:-1;((D-j)*he+(u[2*n[S]+1]-W)*ve)*Oe>((L-j)*he+(u[2*n[k]+1]-W)*ve)*Oe&&(ie=!0)}if(ie){let he=n[S],ve=n[v],Oe=n[x];he!==ve&&he!==Oe&&ve!==Oe&&c.push(Oe,ve,he),v--,v<0&&(v=b-1)}else{let he=n[k],ve=n[v],Oe=n[x];he!==ve&&he!==Oe&&ve!==Oe&&c.push(Oe,ve,he),x++,x>=b&&(x=0)}if(S===k)break}}function w2(u,n,c,d,f,b,v,x,S){let k=f.length/2,D=v&&x&&S;if(k<or.MAX_VERTEX_ARRAY_LENGTH){let L=n.prepareSegment(k,c,d),j=L.vertexLength;for(let ie=0;ie<b.length;ie+=3)d.emplaceBack(j+b[ie],j+b[ie+1],j+b[ie+2]);let W,Y;L.vertexLength+=k,L.primitiveLength+=b.length/3,D&&(Y=v.prepareSegment(k,c,x),W=Y.vertexLength,Y.vertexLength+=k);for(let ie=0;ie<f.length;ie+=2)u(f[ie],f[ie+1]);if(D)for(let ie=0;ie<S.length;ie++){let he=S[ie];for(let ve=1;ve<he.length;ve+=2)x.emplaceBack(W+he[ve-1],W+he[ve]);Y.primitiveLength+=he.length/2}}else(function(L,j,W,Y,ie,he){let ve=[];for(let Te=0;Te<Y.length/2;Te++)ve.push(-1);let Oe={count:0},Ee=0,G=L.getOrCreateLatestSegment(j,W),ue=G.vertexLength;for(let Te=2;Te<ie.length;Te+=3){let Ze=ie[Te-2],_t=ie[Te-1],Qe=ie[Te],ct=ve[Ze]<Ee,xt=ve[_t]<Ee,bt=ve[Qe]<Ee;G.vertexLength+((ct?1:0)+(xt?1:0)+(bt?1:0))>or.MAX_VERTEX_ARRAY_LENGTH&&(G=L.createNewSegment(j,W),Ee=Oe.count,ct=!0,xt=!0,bt=!0,ue=0);let wt=Qp(ve,Y,he,Oe,Ze,ct,G),ht=Qp(ve,Y,he,Oe,_t,xt,G),Vt=Qp(ve,Y,he,Oe,Qe,bt,G);W.emplaceBack(ue+wt-Ee,ue+ht-Ee,ue+Vt-Ee),G.primitiveLength++}})(n,c,d,f,b,u),D&&function(L,j,W,Y,ie,he){let ve=[];for(let Te=0;Te<Y.length/2;Te++)ve.push(-1);let Oe={count:0},Ee=0,G=L.getOrCreateLatestSegment(j,W),ue=G.vertexLength;for(let Te=0;Te<ie.length;Te++){let Ze=ie[Te];for(let _t=1;_t<ie[Te].length;_t+=2){let Qe=Ze[_t-1],ct=Ze[_t],xt=ve[Qe]<Ee,bt=ve[ct]<Ee;G.vertexLength+((xt?1:0)+(bt?1:0))>or.MAX_VERTEX_ARRAY_LENGTH&&(G=L.createNewSegment(j,W),Ee=Oe.count,xt=!0,bt=!0,ue=0);let wt=Qp(ve,Y,he,Oe,Qe,xt,G),ht=Qp(ve,Y,he,Oe,ct,bt,G);W.emplaceBack(ue+wt-Ee,ue+ht-Ee),G.primitiveLength++}}}(v,c,x,f,S,u),n.forceNewSegmentOnNextPrepare(),v?.forceNewSegmentOnNextPrepare()}function Qp(u,n,c,d,f,b,v){if(b){let x=d.count;return c(n[2*f],n[2*f+1]),u[f]=d.count,d.count++,v.vertexLength++,x}return u[f]}class Wb{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Tt,this.indexArray=new nr,this.indexArray2=new hn,this.programConfigurations=new _l(n.layers,n.zoom),this.segments=new or,this.segments2=new or,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,d){this.hasPattern=qb("fill",this.layers,c);let f=this.layers[0].layout.get("fill-sort-key"),b=!f.isConstant(),v=[];for(let{feature:x,id:S,index:k,sourceLayerIndex:D}of n){let L=this.layers[0]._featureFilter.needGeometry,j=qu(x,L);if(!this.layers[0]._featureFilter.filter(new Tr(this.zoom),j,d))continue;let W=b?f.evaluate(j,{},d,c.availableImages):void 0,Y={id:S,properties:x.properties,type:x.type,sourceLayerIndex:D,index:k,geometry:L?j.geometry:ju(x),patterns:{},sortKey:W};v.push(Y)}b&&v.sort((x,S)=>x.sortKey-S.sortKey);for(let x of v){let{geometry:S,index:k,sourceLayerIndex:D}=x;if(this.hasPattern){let L=Hb("fill",this.layers,x,this.zoom,c);this.patternFeatures.push(L)}else this.addFeature(x,S,k,d,{},c.subdivisionGranularity);c.featureIndex.insert(n[k].feature,S,k,D,this.index)}}update(n,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,d)}addFeatures(n,c,d){for(let f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,c,d,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,M3),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,c,d,f,b,v){for(let x of Cc(c,500)){let S=x2(x,f,v.fill.getGranularityForZoomLevel(f.z)),k=this.layoutVertexArray;w2((D,L)=>{k.emplaceBack(D,L)},this.segments,this.layoutVertexArray,this.indexArray,S.verticesFlattened,S.indicesTriangles,this.segments2,this.indexArray2,S.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,b,f)}}let C2,E2;Lt("FillBucket",Wb,{omit:["layers","patternFeatures"]});var B3={get paint(){return E2=E2||new nn({"fill-antialias":new Zt(se.paint_fill["fill-antialias"]),"fill-opacity":new ri(se.paint_fill["fill-opacity"]),"fill-color":new ri(se.paint_fill["fill-color"]),"fill-outline-color":new ri(se.paint_fill["fill-outline-color"]),"fill-translate":new Zt(se.paint_fill["fill-translate"]),"fill-translate-anchor":new Zt(se.paint_fill["fill-translate-anchor"]),"fill-pattern":new Fu(se.paint_fill["fill-pattern"])})},get layout(){return C2=C2||new nn({"fill-sort-key":new ri(se.layout_fill["fill-sort-key"])})}};class V3 extends us{constructor(n){super(n,B3)}recalculate(n,c){super.recalculate(n,c);let d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Wb(n)}queryRadius(){return hg(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:c,transform:d,pixelsToTileUnits:f}){return o2(pg(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,f),c)}isTileClipped(){return!0}}let U3=Dr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),j3=Dr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:q3}=U3;var Zb,S2,Xb,T2,Yb,M2,I2,_g={};function P2(){if(S2)return Zb;S2=1;var u=T();function n(f,b,v,x,S){this.properties={},this.extent=v,this.type=0,this._pbf=f,this._geometry=-1,this._keys=x,this._values=S,f.readFields(c,this,b)}function c(f,b,v){f==1?b.id=v.readVarint():f==2?function(x,S){for(var k=x.readVarint()+x.pos;x.pos<k;){var D=S._keys[x.readVarint()],L=S._values[x.readVarint()];S.properties[D]=L}}(v,b):f==3?b.type=v.readVarint():f==4&&(b._geometry=v.pos)}function d(f){for(var b,v,x=0,S=0,k=f.length,D=k-1;S<k;D=S++)x+=((v=f[D]).x-(b=f[S]).x)*(b.y+v.y);return x}return Zb=n,n.types=["Unknown","Point","LineString","Polygon"],n.prototype.loadGeometry=function(){var f=this._pbf;f.pos=this._geometry;for(var b,v=f.readVarint()+f.pos,x=1,S=0,k=0,D=0,L=[];f.pos<v;){if(S<=0){var j=f.readVarint();x=7&j,S=j>>3}if(S--,x===1||x===2)k+=f.readSVarint(),D+=f.readSVarint(),x===1&&(b&&L.push(b),b=[]),b.push(new u(k,D));else{if(x!==7)throw new Error("unknown command "+x);b&&b.push(b[0].clone())}}return b&&L.push(b),L},n.prototype.bbox=function(){var f=this._pbf;f.pos=this._geometry;for(var b=f.readVarint()+f.pos,v=1,x=0,S=0,k=0,D=1/0,L=-1/0,j=1/0,W=-1/0;f.pos<b;){if(x<=0){var Y=f.readVarint();v=7&Y,x=Y>>3}if(x--,v===1||v===2)(S+=f.readSVarint())<D&&(D=S),S>L&&(L=S),(k+=f.readSVarint())<j&&(j=k),k>W&&(W=k);else if(v!==7)throw new Error("unknown command "+v)}return[D,j,L,W]},n.prototype.toGeoJSON=function(f,b,v){var x,S,k=this.extent*Math.pow(2,v),D=this.extent*f,L=this.extent*b,j=this.loadGeometry(),W=n.types[this.type];function Y(ve){for(var Oe=0;Oe<ve.length;Oe++){var Ee=ve[Oe];ve[Oe]=[360*(Ee.x+D)/k-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ee.y+L)/k)*Math.PI/180))-90]}}switch(this.type){case 1:var ie=[];for(x=0;x<j.length;x++)ie[x]=j[x][0];Y(j=ie);break;case 2:for(x=0;x<j.length;x++)Y(j[x]);break;case 3:for(j=function(ve){var Oe=ve.length;if(Oe<=1)return[ve];for(var Ee,G,ue=[],Te=0;Te<Oe;Te++){var Ze=d(ve[Te]);Ze!==0&&(G===void 0&&(G=Ze<0),G===Ze<0?(Ee&&ue.push(Ee),Ee=[ve[Te]]):Ee.push(ve[Te]))}return Ee&&ue.push(Ee),ue}(j),x=0;x<j.length;x++)for(S=0;S<j[x].length;S++)Y(j[x][S])}j.length===1?j=j[0]:W="Multi"+W;var he={type:"Feature",geometry:{type:W,coordinates:j},properties:this.properties};return"id"in this&&(he.id=this.id),he},Zb}function k2(){if(T2)return Xb;T2=1;var u=P2();function n(d,f){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(c,this,f),this.length=this._features.length}function c(d,f,b){d===15?f.version=b.readVarint():d===1?f.name=b.readString():d===5?f.extent=b.readVarint():d===2?f._features.push(b.pos):d===3?f._keys.push(b.readString()):d===4&&f._values.push(function(v){for(var x=null,S=v.readVarint()+v.pos;v.pos<S;){var k=v.readVarint()>>3;x=k===1?v.readString():k===2?v.readFloat():k===3?v.readDouble():k===4?v.readVarint64():k===5?v.readVarint():k===6?v.readSVarint():k===7?v.readBoolean():null}return x}(b))}return Xb=n,n.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var f=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,f,this.extent,this._keys,this._values)},Xb}function A2(){return I2||(I2=1,_g.VectorTile=function(){if(M2)return Yb;M2=1;var u=k2();function n(c,d,f){if(c===3){var b=new u(f,f.readVarint()+f.pos);b.length&&(d[b.name]=b)}}return Yb=function(c,d){this.layers=c.readFields(n,{},d)},Yb}(),_g.VectorTileFeature=P2(),_g.VectorTileLayer=k2()),_g}var Jp=_(A2());let H3=Jp.VectorTileFeature.types,Kb=Math.pow(2,13);function ef(u,n,c,d,f,b,v,x){u.emplaceBack(n,c,2*Math.floor(d*Kb)+v,f*Kb*2,b*Kb*2,Math.round(x))}class Qb{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new vt,this.centroidVertexArray=new lt,this.indexArray=new nr,this.programConfigurations=new _l(n.layers,n.zoom),this.segments=new or,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,d){this.features=[],this.hasPattern=qb("fill-extrusion",this.layers,c);for(let{feature:f,id:b,index:v,sourceLayerIndex:x}of n){let S=this.layers[0]._featureFilter.needGeometry,k=qu(f,S);if(!this.layers[0]._featureFilter.filter(new Tr(this.zoom),k,d))continue;let D={id:b,sourceLayerIndex:x,index:v,geometry:S?k.geometry:ju(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Hb("fill-extrusion",this.layers,D,this.zoom,c)):this.addFeature(D,D.geometry,v,d,{},c.subdivisionGranularity),c.featureIndex.insert(f,D.geometry,v,x,this.index,!0)}}addFeatures(n,c,d){for(let f of this.features){let{geometry:b}=f;this.addFeature(f,b,f.index,c,d,n.subdivisionGranularity)}}update(n,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,q3),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,j3.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,c,d,f,b,v){for(let x of Cc(c,500)){let S={x:0,y:0,sampleCount:0},k=this.layoutVertexArray.length;this.processPolygon(S,f,n,x,v);let D=this.layoutVertexArray.length-k,L=Math.floor(S.x/S.sampleCount),j=Math.floor(S.y/S.sampleCount);for(let W=0;W<D;W++)this.centroidVertexArray.emplaceBack(L,j)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,b,f)}processPolygon(n,c,d,f,b){if(f.length<1||D2(f[0]))return;for(let L of f)L.length!==0&&$3(n,L);let v={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},x=b.fill.getGranularityForZoomLevel(c.z),S=H3[d.type]==="Polygon";for(let L of f){if(L.length===0||D2(L))continue;let j=Gu(L,x,S);this._generateSideFaces(j,v)}if(!S)return;let k=x2(f,c,x,!1),D=this.layoutVertexArray;w2((L,j)=>{ef(D,L,j,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles)}_generateSideFaces(n,c){let d=0;for(let f=1;f<n.length;f++){let b=n[f],v=n[f-1];if(G3(b,v))continue;c.segment.vertexLength+4>or.MAX_VERTEX_ARRAY_LENGTH&&(c.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let x=b.sub(v)._perp()._unit(),S=v.dist(b);d+S>32768&&(d=0),ef(this.layoutVertexArray,b.x,b.y,x.x,x.y,0,0,d),ef(this.layoutVertexArray,b.x,b.y,x.x,x.y,0,1,d),d+=S,ef(this.layoutVertexArray,v.x,v.y,x.x,x.y,0,0,d),ef(this.layoutVertexArray,v.x,v.y,x.x,x.y,0,1,d);let k=c.segment.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),c.segment.vertexLength+=4,c.segment.primitiveLength+=2}}}function $3(u,n){for(let c=0;c<n.length;c++){let d=n[c];c===n.length-1&&n[0].x===d.x&&n[0].y===d.y||(u.x+=d.x,u.y+=d.y,u.sampleCount++)}}function G3(u,n){return u.x===n.x&&(u.x<0||u.x>me)||u.y===n.y&&(u.y<0||u.y>me)}function D2(u){return u.every(n=>n.x<0)||u.every(n=>n.x>me)||u.every(n=>n.y<0)||u.every(n=>n.y>me)}let R2;Lt("FillExtrusionBucket",Qb,{omit:["layers","features"]});var W3={get paint(){return R2=R2||new nn({"fill-extrusion-opacity":new Zt(se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ri(se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zt(se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zt(se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Fu(se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ri(se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ri(se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zt(se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Z3 extends us{constructor(n){super(n,W3)}createBucket(n){return new Qb(n)}queryRadius(){return hg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:c,featureState:d,geometry:f,transform:b,pixelsToTileUnits:v,pixelPosMatrix:x}){let S=pg(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-b.bearingInRadians,v),k=this.paint.get("fill-extrusion-height").evaluate(c,d),D=this.paint.get("fill-extrusion-base").evaluate(c,d),L=function(W,Y,ie){let he=[];for(let ve of W){let Oe=[ve.x,ve.y,0,1];yt(Oe,Oe,Y),he.push(new R(Oe[0]/Oe[3],Oe[1]/Oe[3]))}return he}(S,x),j=function(W,Y,ie,he){let ve=[],Oe=[],Ee=he[8]*Y,G=he[9]*Y,ue=he[10]*Y,Te=he[11]*Y,Ze=he[8]*ie,_t=he[9]*ie,Qe=he[10]*ie,ct=he[11]*ie;for(let xt of W){let bt=[],wt=[];for(let ht of xt){let Vt=ht.x,ei=ht.y,Qt=he[0]*Vt+he[4]*ei+he[12],Wt=he[1]*Vt+he[5]*ei+he[13],ji=he[2]*Vt+he[6]*ei+he[14],Vr=he[3]*Vt+he[7]*ei+he[15],fn=ji+ue,ro=Vr+Te,ks=Qt+Ze,Xo=Wt+_t,Hn=ji+Qe,Nr=Vr+ct,In=new R((Qt+Ee)/ro,(Wt+G)/ro);In.z=fn/ro,bt.push(In);let $n=new R(ks/Nr,Xo/Nr);$n.z=Hn/Nr,wt.push($n)}ve.push(bt),Oe.push(wt)}return[ve,Oe]}(f,D,k,x);return function(W,Y,ie){let he=1/0;o2(ie,Y)&&(he=O2(ie,Y[0]));for(let ve=0;ve<Y.length;ve++){let Oe=Y[ve],Ee=W[ve];for(let G=0;G<Oe.length-1;G++){let ue=Oe[G],Te=[ue,Oe[G+1],Ee[G+1],Ee[G],ue];n2(ie,Te)&&(he=Math.min(he,O2(ie,Te)))}}return he!==1/0&&he}(j[0],j[1],L)}}function tf(u,n){return u.x*n.x+u.y*n.y}function O2(u,n){if(u.length===1){let c=0,d=n[c++],f;for(;!f||d.equals(f);)if(f=n[c++],!f)return 1/0;for(;c<n.length;c++){let b=n[c],v=u[0],x=f.sub(d),S=b.sub(d),k=v.sub(d),D=tf(x,x),L=tf(x,S),j=tf(S,S),W=tf(k,x),Y=tf(k,S),ie=D*j-L*L,he=(j*W-L*Y)/ie,ve=(D*Y-L*W)/ie,Oe=d.z*(1-he-ve)+f.z*he+b.z*ve;if(isFinite(Oe))return Oe}return 1/0}{let c=1/0;for(let d of n)c=Math.min(c,d.z);return c}}let X3=Dr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Y3}=X3,K3=Dr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Q3}=K3,J3=Jp.VectorTileFeature.types,e5=Math.cos(Math.PI/180*37.5),L2=Math.pow(2,14)/.5;class Jb{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new Gt,this.layoutVertexArray2=new Ti,this.indexArray=new nr,this.programConfigurations=new _l(n.layers,n.zoom),this.segments=new or,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,d){this.hasPattern=qb("line",this.layers,c);let f=this.layers[0].layout.get("line-sort-key"),b=!f.isConstant(),v=[];for(let{feature:x,id:S,index:k,sourceLayerIndex:D}of n){let L=this.layers[0]._featureFilter.needGeometry,j=qu(x,L);if(!this.layers[0]._featureFilter.filter(new Tr(this.zoom),j,d))continue;let W=b?f.evaluate(j,{},d):void 0,Y={id:S,properties:x.properties,type:x.type,sourceLayerIndex:D,index:k,geometry:L?j.geometry:ju(x),patterns:{},sortKey:W};v.push(Y)}b&&v.sort((x,S)=>x.sortKey-S.sortKey);for(let x of v){let{geometry:S,index:k,sourceLayerIndex:D}=x;if(this.hasPattern){let L=Hb("line",this.layers,x,this.zoom,c);this.patternFeatures.push(L)}else this.addFeature(x,S,k,d,{},c.subdivisionGranularity);c.featureIndex.insert(n[k].feature,S,k,D,this.index)}}update(n,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,d)}addFeatures(n,c,d){for(let f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,c,d,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Q3)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Y3),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,c,d,f,b,v){let x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),k=x.get("line-cap"),D=x.get("line-miter-limit"),L=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(let j of c)this.addLine(j,n,S,k,D,L,f,v);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,b,f)}addLine(n,c,d,f,b,v,x,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=Gu(n,x?S.line.getGranularityForZoomLevel(x.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ee=0;Ee<n.length-1;Ee++)this.totalDistance+=n[Ee].dist(n[Ee+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let k=J3[c.type]==="Polygon",D=n.length;for(;D>=2&&n[D-1].equals(n[D-2]);)D--;let L=0;for(;L<D-1&&n[L].equals(n[L+1]);)L++;if(D<(k?3:2))return;d==="bevel"&&(b=1.05);let j=this.overscaling<=16?15*me/(512*this.overscaling):0,W=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray),Y,ie,he,ve,Oe;this.e1=this.e2=-1,k&&(Y=n[D-2],Oe=n[L].sub(Y)._unit()._perp());for(let Ee=L;Ee<D;Ee++){if(he=Ee===D-1?k?n[L+1]:void 0:n[Ee+1],he&&n[Ee].equals(he))continue;Oe&&(ve=Oe),Y&&(ie=Y),Y=n[Ee],Oe=he?he.sub(Y)._unit()._perp():ve,ve=ve||Oe;let G=ve.add(Oe);G.x===0&&G.y===0||G._unit();let ue=ve.x*Oe.x+ve.y*Oe.y,Te=G.x*Oe.x+G.y*Oe.y,Ze=Te!==0?1/Te:1/0,_t=2*Math.sqrt(2-2*Te),Qe=Te<e5&&ie&&he,ct=ve.x*Oe.y-ve.y*Oe.x>0;if(Qe&&Ee>L){let wt=Y.dist(ie);if(wt>2*j){let ht=Y.sub(Y.sub(ie)._mult(j/wt)._round());this.updateDistance(ie,ht),this.addCurrentVertex(ht,ve,0,0,W),ie=ht}}let xt=ie&&he,bt=xt?d:k?"butt":f;if(xt&&bt==="round"&&(Ze<v?bt="miter":Ze<=2&&(bt="fakeround")),bt==="miter"&&Ze>b&&(bt="bevel"),bt==="bevel"&&(Ze>2&&(bt="flipbevel"),Ze<b&&(bt="miter")),ie&&this.updateDistance(ie,Y),bt==="miter")G._mult(Ze),this.addCurrentVertex(Y,G,0,0,W);else if(bt==="flipbevel"){if(Ze>100)G=Oe.mult(-1);else{let wt=Ze*ve.add(Oe).mag()/ve.sub(Oe).mag();G._perp()._mult(wt*(ct?-1:1))}this.addCurrentVertex(Y,G,0,0,W),this.addCurrentVertex(Y,G.mult(-1),0,0,W)}else if(bt==="bevel"||bt==="fakeround"){let wt=-Math.sqrt(Ze*Ze-1),ht=ct?wt:0,Vt=ct?0:wt;if(ie&&this.addCurrentVertex(Y,ve,ht,Vt,W),bt==="fakeround"){let ei=Math.round(180*_t/Math.PI/20);for(let Qt=1;Qt<ei;Qt++){let Wt=Qt/ei;if(Wt!==.5){let Vr=Wt-.5;Wt+=Wt*Vr*(Wt-1)*((1.0904+ue*(ue*(3.55645-1.43519*ue)-3.2452))*Vr*Vr+(.848013+ue*(.215638*ue-1.06021)))}let ji=Oe.sub(ve)._mult(Wt)._add(ve)._unit()._mult(ct?-1:1);this.addHalfVertex(Y,ji.x,ji.y,!1,ct,0,W)}}he&&this.addCurrentVertex(Y,Oe,-ht,-Vt,W)}else if(bt==="butt")this.addCurrentVertex(Y,G,0,0,W);else if(bt==="square"){let wt=ie?1:-1;this.addCurrentVertex(Y,G,wt,wt,W)}else bt==="round"&&(ie&&(this.addCurrentVertex(Y,ve,0,0,W),this.addCurrentVertex(Y,ve,1,1,W,!0)),he&&(this.addCurrentVertex(Y,Oe,-1,-1,W,!0),this.addCurrentVertex(Y,Oe,0,0,W)));if(Qe&&Ee<D-1){let wt=Y.dist(he);if(wt>2*j){let ht=Y.add(he.sub(Y)._mult(j/wt)._round());this.updateDistance(Y,ht),this.addCurrentVertex(ht,Oe,0,0,W),Y=ht}}}}addCurrentVertex(n,c,d,f,b,v=!1){let x=c.y*f-c.x,S=-c.y-c.x*f;this.addHalfVertex(n,c.x+c.y*d,c.y-c.x*d,v,!1,d,b),this.addHalfVertex(n,x,S,v,!0,-f,b),this.distance>L2/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,c,d,f,b,v))}addHalfVertex({x:n,y:c},d,f,b,v,x,S){let k=.5*(this.lineClips?this.scaledDistance*(L2-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(b?1:0),(c<<1)+(v?1:0),Math.round(63*d)+128,Math.round(63*f)+128,1+(x===0?0:x<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let D=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,D,this.e2),S.primitiveLength++),v?this.e2=D:this.e1=D}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,c){this.distance+=n.dist(c),this.updateScaledDistance()}}let N2,F2;Lt("LineBucket",Jb,{omit:["layers","patternFeatures"]});var z2={get paint(){return F2=F2||new nn({"line-opacity":new ri(se.paint_line["line-opacity"]),"line-color":new ri(se.paint_line["line-color"]),"line-translate":new Zt(se.paint_line["line-translate"]),"line-translate-anchor":new Zt(se.paint_line["line-translate-anchor"]),"line-width":new ri(se.paint_line["line-width"]),"line-gap-width":new ri(se.paint_line["line-gap-width"]),"line-offset":new ri(se.paint_line["line-offset"]),"line-blur":new ri(se.paint_line["line-blur"]),"line-dasharray":new Fp(se.paint_line["line-dasharray"]),"line-pattern":new Fu(se.paint_line["line-pattern"]),"line-gradient":new zp(se.paint_line["line-gradient"])})},get layout(){return N2=N2||new nn({"line-cap":new Zt(se.layout_line["line-cap"]),"line-join":new ri(se.layout_line["line-join"]),"line-miter-limit":new Zt(se.layout_line["line-miter-limit"]),"line-round-limit":new Zt(se.layout_line["line-round-limit"]),"line-sort-key":new ri(se.layout_line["line-sort-key"])})}};class t5 extends ri{possiblyEvaluate(n,c){return c=new Tr(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(n,c)}evaluate(n,c,d,f){return c=di({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(n,c,d,f)}}let bg;class i5 extends us{constructor(n){super(n,z2),this.gradientVersion=0,bg||(bg=new t5(z2.paint.properties["line-width"].specification),bg.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){let c=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof Js,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,c){super.recalculate(n,c),this.paint._values["line-floorwidth"]=bg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Jb(n)}queryRadius(n){let c=n,d=B2($p("line-width",this,c),$p("line-gap-width",this,c)),f=$p("line-offset",this,c);return d/2+Math.abs(f)+hg(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:c,featureState:d,geometry:f,transform:b,pixelsToTileUnits:v}){let x=pg(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-b.bearingInRadians,v),S=v/2*B2(this.paint.get("line-width").evaluate(c,d),this.paint.get("line-gap-width").evaluate(c,d)),k=this.paint.get("line-offset").evaluate(c,d);return k&&(f=function(D,L){let j=[];for(let W=0;W<D.length;W++){let Y=D[W],ie=[];for(let he=0;he<Y.length;he++){let ve=Y[he-1],Oe=Y[he],Ee=Y[he+1],G=he===0?new R(0,0):Oe.sub(ve)._unit()._perp(),ue=he===Y.length-1?new R(0,0):Ee.sub(Oe)._unit()._perp(),Te=G._add(ue)._unit(),Ze=Te.x*ue.x+Te.y*ue.y;Ze!==0&&Te._mult(1/Ze),ie.push(Te._mult(L)._add(Oe))}j.push(ie)}return j}(f,k*v)),function(D,L,j){for(let W=0;W<L.length;W++){let Y=L[W];if(D.length>=3){for(let ie=0;ie<Y.length;ie++)if(Hu(D,Y[ie]))return!0}if(_3(D,Y,j))return!0}return!1}(x,f,S)}isTileClipped(){return!0}}function B2(u,n){return n>0?n+2*u:u}let r5=Dr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),n5=Dr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Dr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let o5=Dr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Dr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let V2=Dr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),s5=Dr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function a5(u,n,c){return u.sections.forEach(d=>{d.text=function(f,b,v){let x=b.layout.get("text-transform").evaluate(v,{});return x==="uppercase"?f=f.toLocaleUpperCase():x==="lowercase"&&(f=f.toLocaleLowerCase()),za.applyArabicShaping&&(f=za.applyArabicShaping(f)),f}(d.text,n,c)}),u}Dr([{name:"triangle",components:3,type:"Uint16"}]),Dr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Dr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Dr([{type:"Float32",name:"offsetX"}]),Dr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Dr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let rf={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var U2,ev,j2,pn=24,tv={};function l5(){return U2||(U2=1,tv.read=function(u,n,c,d,f){var b,v,x=8*f-d-1,S=(1<<x)-1,k=S>>1,D=-7,L=c?f-1:0,j=c?-1:1,W=u[n+L];for(L+=j,b=W&(1<<-D)-1,W>>=-D,D+=x;D>0;b=256*b+u[n+L],L+=j,D-=8);for(v=b&(1<<-D)-1,b>>=-D,D+=d;D>0;v=256*v+u[n+L],L+=j,D-=8);if(b===0)b=1-k;else{if(b===S)return v?NaN:1/0*(W?-1:1);v+=Math.pow(2,d),b-=k}return(W?-1:1)*v*Math.pow(2,b-d)},tv.write=function(u,n,c,d,f,b){var v,x,S,k=8*b-f-1,D=(1<<k)-1,L=D>>1,j=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=d?0:b-1,Y=d?1:-1,ie=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(x=isNaN(n)?1:0,v=D):(v=Math.floor(Math.log(n)/Math.LN2),n*(S=Math.pow(2,-v))<1&&(v--,S*=2),(n+=v+L>=1?j/S:j*Math.pow(2,1-L))*S>=2&&(v++,S/=2),v+L>=D?(x=0,v=D):v+L>=1?(x=(n*S-1)*Math.pow(2,f),v+=L):(x=n*Math.pow(2,L-1)*Math.pow(2,f),v=0));f>=8;u[c+W]=255&x,W+=Y,x/=256,f-=8);for(v=v<<f|x,k+=f;k>0;u[c+W]=255&v,W+=Y,v/=256,k-=8);u[c+W-Y]|=128*ie}),tv}function q2(){if(j2)return ev;j2=1,ev=n;var u=l5();function n(G){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(G)?G:new Uint8Array(G||0),this.pos=0,this.type=0,this.length=this.buf.length}n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var c=4294967296,d=1/c,f=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function b(G){return G.type===n.Bytes?G.readVarint()+G.pos:G.pos+1}function v(G,ue,Te){return Te?4294967296*ue+(G>>>0):4294967296*(ue>>>0)+(G>>>0)}function x(G,ue,Te){var Ze=ue<=16383?1:ue<=2097151?2:ue<=268435455?3:Math.floor(Math.log(ue)/(7*Math.LN2));Te.realloc(Ze);for(var _t=Te.pos-1;_t>=G;_t--)Te.buf[_t+Ze]=Te.buf[_t]}function S(G,ue){for(var Te=0;Te<G.length;Te++)ue.writeVarint(G[Te])}function k(G,ue){for(var Te=0;Te<G.length;Te++)ue.writeSVarint(G[Te])}function D(G,ue){for(var Te=0;Te<G.length;Te++)ue.writeFloat(G[Te])}function L(G,ue){for(var Te=0;Te<G.length;Te++)ue.writeDouble(G[Te])}function j(G,ue){for(var Te=0;Te<G.length;Te++)ue.writeBoolean(G[Te])}function W(G,ue){for(var Te=0;Te<G.length;Te++)ue.writeFixed32(G[Te])}function Y(G,ue){for(var Te=0;Te<G.length;Te++)ue.writeSFixed32(G[Te])}function ie(G,ue){for(var Te=0;Te<G.length;Te++)ue.writeFixed64(G[Te])}function he(G,ue){for(var Te=0;Te<G.length;Te++)ue.writeSFixed64(G[Te])}function ve(G,ue){return(G[ue]|G[ue+1]<<8|G[ue+2]<<16)+16777216*G[ue+3]}function Oe(G,ue,Te){G[Te]=ue,G[Te+1]=ue>>>8,G[Te+2]=ue>>>16,G[Te+3]=ue>>>24}function Ee(G,ue){return(G[ue]|G[ue+1]<<8|G[ue+2]<<16)+(G[ue+3]<<24)}return n.prototype={destroy:function(){this.buf=null},readFields:function(G,ue,Te){for(Te=Te||this.length;this.pos<Te;){var Ze=this.readVarint(),_t=Ze>>3,Qe=this.pos;this.type=7&Ze,G(_t,ue,this),this.pos===Qe&&this.skip(Ze)}return ue},readMessage:function(G,ue){return this.readFields(G,ue,this.readVarint()+this.pos)},readFixed32:function(){var G=ve(this.buf,this.pos);return this.pos+=4,G},readSFixed32:function(){var G=Ee(this.buf,this.pos);return this.pos+=4,G},readFixed64:function(){var G=ve(this.buf,this.pos)+ve(this.buf,this.pos+4)*c;return this.pos+=8,G},readSFixed64:function(){var G=ve(this.buf,this.pos)+Ee(this.buf,this.pos+4)*c;return this.pos+=8,G},readFloat:function(){var G=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,G},readDouble:function(){var G=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,G},readVarint:function(G){var ue,Te,Ze=this.buf;return ue=127&(Te=Ze[this.pos++]),Te<128?ue:(ue|=(127&(Te=Ze[this.pos++]))<<7,Te<128?ue:(ue|=(127&(Te=Ze[this.pos++]))<<14,Te<128?ue:(ue|=(127&(Te=Ze[this.pos++]))<<21,Te<128?ue:function(_t,Qe,ct){var xt,bt,wt=ct.buf;if(xt=(112&(bt=wt[ct.pos++]))>>4,bt<128||(xt|=(127&(bt=wt[ct.pos++]))<<3,bt<128)||(xt|=(127&(bt=wt[ct.pos++]))<<10,bt<128)||(xt|=(127&(bt=wt[ct.pos++]))<<17,bt<128)||(xt|=(127&(bt=wt[ct.pos++]))<<24,bt<128)||(xt|=(1&(bt=wt[ct.pos++]))<<31,bt<128))return v(_t,xt,Qe);throw new Error("Expected varint not more than 10 bytes")}(ue|=(15&(Te=Ze[this.pos]))<<28,G,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var G=this.readVarint();return G%2==1?(G+1)/-2:G/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var G=this.readVarint()+this.pos,ue=this.pos;return this.pos=G,G-ue>=12&&f?function(Te,Ze,_t){return f.decode(Te.subarray(Ze,_t))}(this.buf,ue,G):function(Te,Ze,_t){for(var Qe="",ct=Ze;ct<_t;){var xt,bt,wt,ht=Te[ct],Vt=null,ei=ht>239?4:ht>223?3:ht>191?2:1;if(ct+ei>_t)break;ei===1?ht<128&&(Vt=ht):ei===2?(192&(xt=Te[ct+1]))==128&&(Vt=(31&ht)<<6|63&xt)<=127&&(Vt=null):ei===3?(bt=Te[ct+2],(192&(xt=Te[ct+1]))==128&&(192&bt)==128&&((Vt=(15&ht)<<12|(63&xt)<<6|63&bt)<=2047||Vt>=55296&&Vt<=57343)&&(Vt=null)):ei===4&&(bt=Te[ct+2],wt=Te[ct+3],(192&(xt=Te[ct+1]))==128&&(192&bt)==128&&(192&wt)==128&&((Vt=(15&ht)<<18|(63&xt)<<12|(63&bt)<<6|63&wt)<=65535||Vt>=1114112)&&(Vt=null)),Vt===null?(Vt=65533,ei=1):Vt>65535&&(Vt-=65536,Qe+=String.fromCharCode(Vt>>>10&1023|55296),Vt=56320|1023&Vt),Qe+=String.fromCharCode(Vt),ct+=ei}return Qe}(this.buf,ue,G)},readBytes:function(){var G=this.readVarint()+this.pos,ue=this.buf.subarray(this.pos,G);return this.pos=G,ue},readPackedVarint:function(G,ue){if(this.type!==n.Bytes)return G.push(this.readVarint(ue));var Te=b(this);for(G=G||[];this.pos<Te;)G.push(this.readVarint(ue));return G},readPackedSVarint:function(G){if(this.type!==n.Bytes)return G.push(this.readSVarint());var ue=b(this);for(G=G||[];this.pos<ue;)G.push(this.readSVarint());return G},readPackedBoolean:function(G){if(this.type!==n.Bytes)return G.push(this.readBoolean());var ue=b(this);for(G=G||[];this.pos<ue;)G.push(this.readBoolean());return G},readPackedFloat:function(G){if(this.type!==n.Bytes)return G.push(this.readFloat());var ue=b(this);for(G=G||[];this.pos<ue;)G.push(this.readFloat());return G},readPackedDouble:function(G){if(this.type!==n.Bytes)return G.push(this.readDouble());var ue=b(this);for(G=G||[];this.pos<ue;)G.push(this.readDouble());return G},readPackedFixed32:function(G){if(this.type!==n.Bytes)return G.push(this.readFixed32());var ue=b(this);for(G=G||[];this.pos<ue;)G.push(this.readFixed32());return G},readPackedSFixed32:function(G){if(this.type!==n.Bytes)return G.push(this.readSFixed32());var ue=b(this);for(G=G||[];this.pos<ue;)G.push(this.readSFixed32());return G},readPackedFixed64:function(G){if(this.type!==n.Bytes)return G.push(this.readFixed64());var ue=b(this);for(G=G||[];this.pos<ue;)G.push(this.readFixed64());return G},readPackedSFixed64:function(G){if(this.type!==n.Bytes)return G.push(this.readSFixed64());var ue=b(this);for(G=G||[];this.pos<ue;)G.push(this.readSFixed64());return G},skip:function(G){var ue=7&G;if(ue===n.Varint)for(;this.buf[this.pos++]>127;);else if(ue===n.Bytes)this.pos=this.readVarint()+this.pos;else if(ue===n.Fixed32)this.pos+=4;else{if(ue!==n.Fixed64)throw new Error("Unimplemented type: "+ue);this.pos+=8}},writeTag:function(G,ue){this.writeVarint(G<<3|ue)},realloc:function(G){for(var ue=this.length||16;ue<this.pos+G;)ue*=2;if(ue!==this.length){var Te=new Uint8Array(ue);Te.set(this.buf),this.buf=Te,this.length=ue}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(G){this.realloc(4),Oe(this.buf,G,this.pos),this.pos+=4},writeSFixed32:function(G){this.realloc(4),Oe(this.buf,G,this.pos),this.pos+=4},writeFixed64:function(G){this.realloc(8),Oe(this.buf,-1&G,this.pos),Oe(this.buf,Math.floor(G*d),this.pos+4),this.pos+=8},writeSFixed64:function(G){this.realloc(8),Oe(this.buf,-1&G,this.pos),Oe(this.buf,Math.floor(G*d),this.pos+4),this.pos+=8},writeVarint:function(G){(G=+G||0)>268435455||G<0?function(ue,Te){var Ze,_t;if(ue>=0?(Ze=ue%4294967296|0,_t=ue/4294967296|0):(_t=~(-ue/4294967296),4294967295^(Ze=~(-ue%4294967296))?Ze=Ze+1|0:(Ze=0,_t=_t+1|0)),ue>=18446744073709552e3||ue<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Te.realloc(10),function(Qe,ct,xt){xt.buf[xt.pos++]=127&Qe|128,Qe>>>=7,xt.buf[xt.pos++]=127&Qe|128,Qe>>>=7,xt.buf[xt.pos++]=127&Qe|128,Qe>>>=7,xt.buf[xt.pos++]=127&Qe|128,xt.buf[xt.pos]=127&(Qe>>>=7)}(Ze,0,Te),function(Qe,ct){var xt=(7&Qe)<<4;ct.buf[ct.pos++]|=xt|((Qe>>>=3)?128:0),Qe&&(ct.buf[ct.pos++]=127&Qe|((Qe>>>=7)?128:0),Qe&&(ct.buf[ct.pos++]=127&Qe|((Qe>>>=7)?128:0),Qe&&(ct.buf[ct.pos++]=127&Qe|((Qe>>>=7)?128:0),Qe&&(ct.buf[ct.pos++]=127&Qe|((Qe>>>=7)?128:0),Qe&&(ct.buf[ct.pos++]=127&Qe)))))}(_t,Te)}(G,this):(this.realloc(4),this.buf[this.pos++]=127&G|(G>127?128:0),G<=127||(this.buf[this.pos++]=127&(G>>>=7)|(G>127?128:0),G<=127||(this.buf[this.pos++]=127&(G>>>=7)|(G>127?128:0),G<=127||(this.buf[this.pos++]=G>>>7&127))))},writeSVarint:function(G){this.writeVarint(G<0?2*-G-1:2*G)},writeBoolean:function(G){this.writeVarint(!!G)},writeString:function(G){G=String(G),this.realloc(4*G.length),this.pos++;var ue=this.pos;this.pos=function(Ze,_t,Qe){for(var ct,xt,bt=0;bt<_t.length;bt++){if((ct=_t.charCodeAt(bt))>55295&&ct<57344){if(!xt){ct>56319||bt+1===_t.length?(Ze[Qe++]=239,Ze[Qe++]=191,Ze[Qe++]=189):xt=ct;continue}if(ct<56320){Ze[Qe++]=239,Ze[Qe++]=191,Ze[Qe++]=189,xt=ct;continue}ct=xt-55296<<10|ct-56320|65536,xt=null}else xt&&(Ze[Qe++]=239,Ze[Qe++]=191,Ze[Qe++]=189,xt=null);ct<128?Ze[Qe++]=ct:(ct<2048?Ze[Qe++]=ct>>6|192:(ct<65536?Ze[Qe++]=ct>>12|224:(Ze[Qe++]=ct>>18|240,Ze[Qe++]=ct>>12&63|128),Ze[Qe++]=ct>>6&63|128),Ze[Qe++]=63&ct|128)}return Qe}(this.buf,G,this.pos);var Te=this.pos-ue;Te>=128&&x(ue,Te,this),this.pos=ue-1,this.writeVarint(Te),this.pos+=Te},writeFloat:function(G){this.realloc(4),u.write(this.buf,G,this.pos,!0,23,4),this.pos+=4},writeDouble:function(G){this.realloc(8),u.write(this.buf,G,this.pos,!0,52,8),this.pos+=8},writeBytes:function(G){var ue=G.length;this.writeVarint(ue),this.realloc(ue);for(var Te=0;Te<ue;Te++)this.buf[this.pos++]=G[Te]},writeRawMessage:function(G,ue){this.pos++;var Te=this.pos;G(ue,this);var Ze=this.pos-Te;Ze>=128&&x(Te,Ze,this),this.pos=Te-1,this.writeVarint(Ze),this.pos+=Ze},writeMessage:function(G,ue,Te){this.writeTag(G,n.Bytes),this.writeRawMessage(ue,Te)},writePackedVarint:function(G,ue){ue.length&&this.writeMessage(G,S,ue)},writePackedSVarint:function(G,ue){ue.length&&this.writeMessage(G,k,ue)},writePackedBoolean:function(G,ue){ue.length&&this.writeMessage(G,j,ue)},writePackedFloat:function(G,ue){ue.length&&this.writeMessage(G,D,ue)},writePackedDouble:function(G,ue){ue.length&&this.writeMessage(G,L,ue)},writePackedFixed32:function(G,ue){ue.length&&this.writeMessage(G,W,ue)},writePackedSFixed32:function(G,ue){ue.length&&this.writeMessage(G,Y,ue)},writePackedFixed64:function(G,ue){ue.length&&this.writeMessage(G,ie,ue)},writePackedSFixed64:function(G,ue){ue.length&&this.writeMessage(G,he,ue)},writeBytesField:function(G,ue){this.writeTag(G,n.Bytes),this.writeBytes(ue)},writeFixed32Field:function(G,ue){this.writeTag(G,n.Fixed32),this.writeFixed32(ue)},writeSFixed32Field:function(G,ue){this.writeTag(G,n.Fixed32),this.writeSFixed32(ue)},writeFixed64Field:function(G,ue){this.writeTag(G,n.Fixed64),this.writeFixed64(ue)},writeSFixed64Field:function(G,ue){this.writeTag(G,n.Fixed64),this.writeSFixed64(ue)},writeVarintField:function(G,ue){this.writeTag(G,n.Varint),this.writeVarint(ue)},writeSVarintField:function(G,ue){this.writeTag(G,n.Varint),this.writeSVarint(ue)},writeStringField:function(G,ue){this.writeTag(G,n.Bytes),this.writeString(ue)},writeFloatField:function(G,ue){this.writeTag(G,n.Fixed32),this.writeFloat(ue)},writeDoubleField:function(G,ue){this.writeTag(G,n.Fixed64),this.writeDouble(ue)},writeBooleanField:function(G,ue){this.writeVarintField(G,!!ue)}},ev}var iv=_(q2());let rv=3;function c5(u,n,c){u===1&&c.readMessage(u5,n)}function u5(u,n,c){if(u===3){let{id:d,bitmap:f,width:b,height:v,left:x,top:S,advance:k}=c.readMessage(d5,{});n.push({id:d,bitmap:new Gp({width:b+2*rv,height:v+2*rv},f),metrics:{width:b,height:v,left:x,top:S,advance:k}})}}function d5(u,n,c){u===1?n.id=c.readVarint():u===2?n.bitmap=c.readBytes():u===3?n.width=c.readVarint():u===4?n.height=c.readVarint():u===5?n.left=c.readSVarint():u===6?n.top=c.readSVarint():u===7&&(n.advance=c.readVarint())}let h5=rv;function H2(u){let n=0,c=0;for(let v of u)n+=v.w*v.h,c=Math.max(c,v.w);u.sort((v,x)=>x.h-v.h);let d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),c),h:1/0}],f=0,b=0;for(let v of u)for(let x=d.length-1;x>=0;x--){let S=d[x];if(!(v.w>S.w||v.h>S.h)){if(v.x=S.x,v.y=S.y,b=Math.max(b,v.y+v.h),f=Math.max(f,v.x+v.w),v.w===S.w&&v.h===S.h){let k=d.pop();x<d.length&&(d[x]=k)}else v.h===S.h?(S.x+=v.w,S.w-=v.w):v.w===S.w?(S.y+=v.h,S.h-=v.h):(d.push({x:S.x+v.w,y:S.y,w:S.w-v.w,h:v.h}),S.y+=v.h,S.h-=v.h);break}}return{w:f,h:b,fill:n/(f*b)||0}}let Zo=1;class nv{constructor(n,{pixelRatio:c,version:d,stretchX:f,stretchY:b,content:v,textFitWidth:x,textFitHeight:S}){this.paddedRect=n,this.pixelRatio=c,this.stretchX=f,this.stretchY=b,this.content=v,this.version=d,this.textFitWidth=x,this.textFitHeight=S}get tl(){return[this.paddedRect.x+Zo,this.paddedRect.y+Zo]}get br(){return[this.paddedRect.x+this.paddedRect.w-Zo,this.paddedRect.y+this.paddedRect.h-Zo]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Zo)/this.pixelRatio,(this.paddedRect.h-2*Zo)/this.pixelRatio]}}class $2{constructor(n,c){let d={},f={};this.haveRenderCallbacks=[];let b=[];this.addImages(n,d,b),this.addImages(c,f,b);let{w:v,h:x}=H2(b),S=new Is({width:v||1,height:x||1});for(let k in n){let D=n[k],L=d[k].paddedRect;Is.copy(D.data,S,{x:0,y:0},{x:L.x+Zo,y:L.y+Zo},D.data)}for(let k in c){let D=c[k],L=f[k].paddedRect,j=L.x+Zo,W=L.y+Zo,Y=D.data.width,ie=D.data.height;Is.copy(D.data,S,{x:0,y:0},{x:j,y:W},D.data),Is.copy(D.data,S,{x:0,y:ie-1},{x:j,y:W-1},{width:Y,height:1}),Is.copy(D.data,S,{x:0,y:0},{x:j,y:W+ie},{width:Y,height:1}),Is.copy(D.data,S,{x:Y-1,y:0},{x:j-1,y:W},{width:1,height:ie}),Is.copy(D.data,S,{x:0,y:0},{x:j+Y,y:W},{width:1,height:ie})}this.image=S,this.iconPositions=d,this.patternPositions=f}addImages(n,c,d){for(let f in n){let b=n[f],v={x:0,y:0,w:b.data.width+2*Zo,h:b.data.height+2*Zo};d.push(v),c[f]=new nv(v,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,c){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let d in n.updatedImages)this.patchUpdatedImage(this.iconPositions[d],n.getImage(d),c),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d),c)}patchUpdatedImage(n,c,d){if(!n||!c||n.version===c.version)return;n.version=c.version;let[f,b]=n.tl;d.update(c.data,void 0,{x:f,y:b})}}var qc;Lt("ImagePosition",nv),Lt("ImageAtlas",$2),a.al=void 0,(qc=a.al||(a.al={}))[qc.none=0]="none",qc[qc.horizontal=1]="horizontal",qc[qc.vertical=2]="vertical",qc[qc.horizontalOnly=3]="horizontalOnly";let vg=-17;class nf{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(n,c,d){let f=new nf;return f.scale=n||1,f.fontStack=c,f.verticalAlign=d||"bottom",f}static forImage(n,c){let d=new nf;return d.imageName=n,d.verticalAlign=c||"bottom",d}}class sh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,c){let d=new sh;for(let f=0;f<n.sections.length;f++){let b=n.sections[f];b.image?d.addImageSection(b):d.addTextSection(b,c)}return d}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let c="";for(let d=0;d<n.length;d++){let f=n.charCodeAt(d+1)||null,b=n.charCodeAt(d-1)||null;c+=f&&Lu(f)&&!rf[n[d+1]]||b&&Lu(b)&&!rf[n[d-1]]||!rf[n[d]]?n[d]:rf[n[d]]}return c}(this.text)}trim(){let n=0;for(let d=0;d<this.text.length&&xg[this.text.charCodeAt(d)];d++)n++;let c=this.text.length;for(let d=this.text.length-1;d>=0&&d>=n&&xg[this.text.charCodeAt(d)];d--)c--;this.text=this.text.substring(n,c),this.sectionIndex=this.sectionIndex.slice(n,c)}substring(n,c){let d=new sh;return d.text=this.text.substring(n,c),d.sectionIndex=this.sectionIndex.slice(n,c),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,c)=>Math.max(n,this.sections[c].scale),0)}getMaxImageSize(n){let c=0,d=0;for(let f=0;f<this.length();f++){let b=this.getSection(f);if(b.imageName){let v=n[b.imageName];if(!v)continue;let x=v.displaySize;c=Math.max(c,x[0]),d=Math.max(d,x[1])}}return{maxImageWidth:c,maxImageHeight:d}}addTextSection(n,c){this.text+=n.text,this.sections.push(nf.forText(n.scale,n.fontStack||c,n.verticalAlign));let d=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(d)}addImageSection(n){let c=n.image?n.image.name:"";if(c.length===0)return void Ar("Can't add FormattedSection with an empty image.");let d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(nf.forImage(c,n.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Ar("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function yg(u,n,c,d,f,b,v,x,S,k,D,L,j,W,Y){let ie=sh.fromFeature(u,f),he;L===a.al.vertical&&ie.verticalizePunctuation();let{processBidirectionalText:ve,processStyledBidirectionalText:Oe}=za;if(ve&&ie.sections.length===1){he=[];let ue=ve(ie.toString(),ov(ie,k,b,n,d,W));for(let Te of ue){let Ze=new sh;Ze.text=Te,Ze.sections=ie.sections;for(let _t=0;_t<Te.length;_t++)Ze.sectionIndex.push(0);he.push(Ze)}}else if(Oe){he=[];let ue=Oe(ie.text,ie.sectionIndex,ov(ie,k,b,n,d,W));for(let Te of ue){let Ze=new sh;Ze.text=Te[0],Ze.sectionIndex=Te[1],Ze.sections=ie.sections,he.push(Ze)}}else he=function(ue,Te){let Ze=[],_t=ue.text,Qe=0;for(let ct of Te)Ze.push(ue.substring(Qe,ct)),Qe=ct;return Qe<_t.length&&Ze.push(ue.substring(Qe,_t.length)),Ze}(ie,ov(ie,k,b,n,d,W));let Ee=[],G={positionedLines:Ee,text:ie.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:L,iconsInText:!1,verticalizable:!1};return function(ue,Te,Ze,_t,Qe,ct,xt,bt,wt,ht,Vt,ei){let Qt=0,Wt=0,ji=0,Vr=0,fn=bt==="right"?1:bt==="left"?0:.5,ro=pn/ei,ks=0;for(let Nr of Qe){Nr.trim();let In=Nr.getMaxScale(),$n={positionedGlyphs:[],lineOffset:0};ue.positionedLines[ks]=$n;let Gn=$n.positionedGlyphs,Lo=0;if(!Nr.length()){Wt+=ct,++ks;continue}let As=g5(_t,Nr,ro);for(let Yo=0;Yo<Nr.length();Yo++){let mn=Nr.getSection(Yo),kn=Nr.getSectionIndex(Yo),An=Nr.getCharCode(Yo),an=_5(wt,Vt,An),Ir;if(mn.imageName){if(ue.iconsInText=!0,mn.scale=mn.scale*ro,Ir=v5(mn,an,In,As,_t),!Ir)continue;Lo=Math.max(Lo,Ir.imageOffset)}else if(Ir=b5(mn,An,an,As,Te,Ze),!Ir)continue;let{rect:Ua,metrics:uh,baselineOffset:ja}=Ir;Gn.push({glyph:An,imageName:mn.imageName,x:Qt,y:Wt+ja+vg,vertical:an,scale:mn.scale,fontStack:mn.fontStack,sectionIndex:kn,metrics:uh,rect:Ua}),an?(ue.verticalizable=!0,Qt+=(mn.imageName?uh.advance:pn)*mn.scale+ht):Qt+=uh.advance*mn.scale+ht}Gn.length!==0&&(ji=Math.max(Qt-ht,ji),y5(Gn,0,Gn.length-1,fn)),Qt=0,$n.lineOffset=Math.max(Lo,(In-1)*pn);let Pn=ct*In+Lo;Wt+=Pn,Vr=Math.max(Pn,Vr),++ks}let{horizontalAlign:Xo,verticalAlign:Hn}=sv(xt);(function(Nr,In,$n,Gn,Lo,As,Pn,Yo,mn){let kn=(In-$n)*Lo,An=0;An=As!==Pn?-Yo*Gn-vg:-Gn*mn*Pn+.5*Pn;for(let an of Nr)for(let Ir of an.positionedGlyphs)Ir.x+=kn,Ir.y+=An})(ue.positionedLines,fn,Xo,Hn,ji,Vr,ct,Wt,Qe.length),ue.top+=-Hn*Wt,ue.bottom=ue.top+Wt,ue.left+=-Xo*ji,ue.right=ue.left+ji}(G,n,c,d,he,v,x,S,L,k,j,Y),!function(ue){for(let Te of ue)if(Te.positionedGlyphs.length!==0)return!1;return!0}(Ee)&&G}let xg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},p5={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},f5={40:!0};function G2(u,n,c,d,f,b){if(n.imageName){let v=d[n.imageName];return v?v.displaySize[0]*n.scale*pn/b+f:0}{let v=c[n.fontStack],x=v&&v[u];return x?x.metrics.advance*n.scale+f:0}}function W2(u,n,c,d){let f=Math.pow(u-n,2);return d?u<n?f/2:2*f:f+Math.abs(c)*c}function m5(u,n,c){let d=0;return u===10&&(d-=1e4),c&&(d+=150),u!==40&&u!==65288||(d+=50),n!==41&&n!==65289||(d+=50),d}function Z2(u,n,c,d,f,b){let v=null,x=W2(n,c,f,b);for(let S of d){let k=W2(n-S.x,c,f,b)+S.badness;k<=x&&(v=S,x=k)}return{index:u,x:n,priorBreak:v,badness:x}}function X2(u){return u?X2(u.priorBreak).concat(u.index):[]}function ov(u,n,c,d,f,b){if(!u)return[];let v=[],x=function(L,j,W,Y,ie,he){let ve=0;for(let Oe=0;Oe<L.length();Oe++){let Ee=L.getSection(Oe);ve+=G2(L.getCharCode(Oe),Ee,Y,ie,j,he)}return ve/Math.max(1,Math.ceil(ve/W))}(u,n,c,d,f,b),S=u.text.indexOf("\u200B")>=0,k=0;for(let L=0;L<u.length();L++){let j=u.getSection(L),W=u.getCharCode(L);if(xg[W]||(k+=G2(W,j,d,f,n,b)),L<u.length()-1){let Y=!((D=W)<11904)&&(!!Vi["CJK Compatibility Forms"](D)||!!Vi["CJK Compatibility"](D)||!!Vi["CJK Strokes"](D)||!!Vi["CJK Symbols and Punctuation"](D)||!!Vi["Enclosed CJK Letters and Months"](D)||!!Vi["Halfwidth and Fullwidth Forms"](D)||!!Vi["Ideographic Description Characters"](D)||!!Vi["Vertical Forms"](D)||Lp.test(String.fromCodePoint(D)));(p5[W]||Y||j.imageName||L!==u.length()-2&&f5[u.getCharCode(L+1)])&&v.push(Z2(L+1,k,x,v,m5(W,u.getCharCode(L+1),Y&&S),!1))}}var D;return X2(Z2(u.length(),k,x,v,0,!0))}function sv(u){let n=.5,c=.5;switch(u){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:n,verticalAlign:c}}function g5(u,n,c){let d=n.getMaxScale()*pn,{maxImageWidth:f,maxImageHeight:b}=n.getMaxImageSize(u),v=Math.max(d,b*c);return{verticalLineContentWidth:Math.max(d,f*c),horizontalLineContentHeight:v}}function Y2(u){switch(u){case"top":return 0;case"center":return .5;default:return 1}}function _5(u,n,c){return!(u===a.al.horizontal||!n&&!Qd(c)||n&&(xg[c]||(d=c,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function b5(u,n,c,d,f,b){let v=b[u.fontStack],x=function(k,D,L,j){if(k&&k.rect)return k;let W=D[L.fontStack],Y=W&&W[j];return Y?{rect:null,metrics:Y.metrics}:null}(v&&v[n],f,u,n);if(x===null)return null;let S;if(c)S=d.verticalLineContentWidth-u.scale*pn;else{let k=Y2(u.verticalAlign);S=(d.horizontalLineContentHeight-u.scale*pn)*k}return{rect:x.rect,metrics:x.metrics,baselineOffset:S}}function v5(u,n,c,d,f){let b=f[u.imageName];if(!b)return null;let v=b.paddedRect,x=b.displaySize,S={width:x[0],height:x[1],left:Zo,top:-3,advance:n?x[1]:x[0]},k;if(n)k=d.verticalLineContentWidth-x[1]*u.scale;else{let D=Y2(u.verticalAlign);k=(d.horizontalLineContentHeight-x[1]*u.scale)*D}return{rect:v,metrics:S,baselineOffset:k,imageOffset:(n?x[0]:x[1])*u.scale-pn*c}}function y5(u,n,c,d){if(d===0)return;let f=u[c],b=(u[c].x+f.metrics.advance*f.scale)*d;for(let v=n;v<=c;v++)u[v].x-=b}function x5(u,n,c){let{horizontalAlign:d,verticalAlign:f}=sv(c),b=n[0]-u.displaySize[0]*d,v=n[1]-u.displaySize[1]*f;return{image:u,top:v,bottom:v+u.displaySize[1],left:b,right:b+u.displaySize[0]}}function K2(u){var n,c;let d=u.left,f=u.top,b=u.right-d,v=u.bottom-f,x=(n=u.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",S=(c=u.image.textFitHeight)!==null&&c!==void 0?c:"stretchOrShrink",k=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(S==="proportional"){if(x==="stretchOnly"&&b/v<k||x==="proportional"){let D=Math.ceil(v*k);d*=D/b,b=D}}else if(x==="proportional"&&S==="stretchOnly"&&k!==0&&b/v>k){let D=Math.ceil(b/k);f*=D/v,v=D}return{x1:d,y1:f,x2:d+b,y2:f+v}}function Q2(u,n,c,d,f,b){let v=u.image,x;if(v.content){let he=v.content,ve=v.pixelRatio||1;x=[he[0]/ve,he[1]/ve,v.displaySize[0]-he[2]/ve,v.displaySize[1]-he[3]/ve]}let S=n.left*b,k=n.right*b,D,L,j,W;c==="width"||c==="both"?(W=f[0]+S-d[3],L=f[0]+k+d[1]):(W=f[0]+(S+k-v.displaySize[0])/2,L=W+v.displaySize[0]);let Y=n.top*b,ie=n.bottom*b;return c==="height"||c==="both"?(D=f[1]+Y-d[0],j=f[1]+ie+d[2]):(D=f[1]+(Y+ie-v.displaySize[1])/2,j=D+v.displaySize[1]),{image:v,top:D,right:L,bottom:j,left:W,collisionPadding:x}}let of=255,bl=128,Hc=of*bl;function J2(u,n){let{expression:c}=n;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Tr(u+1))};if(c.kind==="source")return{kind:"source"};{let{zoomStops:d,interpolationType:f}=c,b=0;for(;b<d.length&&d[b]<=u;)b++;b=Math.max(0,b-1);let v=b;for(;v<d.length&&d[v]<u+1;)v++;v=Math.min(d.length-1,v);let x=d[b],S=d[v];return c.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:f}:{kind:"camera",minZoom:x,maxZoom:S,minSize:c.evaluate(new Tr(x)),maxSize:c.evaluate(new Tr(S)),interpolationType:f}}}function av(u,n,c){let d="never",f=u.get(n);return f?d=f:u.get(c)&&(d="always"),d}let w5=Jp.VectorTileFeature.types,C5=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function wg(u,n,c,d,f,b,v,x,S,k,D,L,j){let W=x?Math.min(Hc,Math.round(x[0])):0,Y=x?Math.min(Hc,Math.round(x[1])):0;u.emplaceBack(n,c,Math.round(32*d),Math.round(32*f),b,v,(W<<1)+(S?1:0),Y,16*k,16*D,256*L,256*j)}function lv(u,n,c){u.emplaceBack(n.x,n.y,c),u.emplaceBack(n.x,n.y,c),u.emplaceBack(n.x,n.y,c),u.emplaceBack(n.x,n.y,c)}function E5(u){for(let n of u.sections)if(Rb(n.text))return!0;return!1}class cv{constructor(n){this.layoutVertexArray=new Rr,this.indexArray=new nr,this.programConfigurations=n,this.segments=new or,this.dynamicLayoutVertexArray=new vr,this.opacityVertexArray=new Or,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ie}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,c,d,f){this.isEmpty()||(d&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,r5.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,n5.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,C5,!0),this.opacityVertexBuffer.itemSize=1),(d||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Lt("SymbolBuffers",cv);class uv{constructor(n,c,d){this.layoutVertexArray=new n,this.layoutAttributes=c,this.indexArray=new d,this.segments=new or,this.collisionVertexArray=new Cr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,o5.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Lt("CollisionBuffers",uv);class ah{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(v=>v.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=J2(this.zoom,c["text-size"]),this.iconSizeData=J2(this.zoom,c["icon-size"]);let d=this.layers[0].layout,f=d.get("symbol-sort-key"),b=d.get("symbol-z-order");this.canOverlap=av(d,"text-overlap","text-allow-overlap")!=="never"||av(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(v=>a.al[v])),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=n.sourceID}createArrays(){this.text=new cv(new _l(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new cv(new _l(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new ze,this.lineVertexArray=new Re,this.symbolInstances=new Ae,this.textAnchorOffsets=new ut}calculateGlyphDependencies(n,c,d,f,b){for(let v=0;v<n.length;v++)if(c[n.charCodeAt(v)]=!0,(d||f)&&b){let x=rf[n.charAt(v)];x&&(c[x.charCodeAt(0)]=!0)}}populate(n,c,d){let f=this.layers[0],b=f.layout,v=b.get("text-font"),x=b.get("text-field"),S=b.get("icon-image"),k=(x.value.kind!=="constant"||x.value.value instanceof ni&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(v.value.kind!=="constant"||v.value.value.length>0),D=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,L=b.get("symbol-sort-key");if(this.features=[],!k&&!D)return;let j=c.iconDependencies,W=c.glyphDependencies,Y=c.availableImages,ie=new Tr(this.zoom);for(let{feature:he,id:ve,index:Oe,sourceLayerIndex:Ee}of n){let G=f._featureFilter.needGeometry,ue=qu(he,G);if(!f._featureFilter.filter(ie,ue,d))continue;let Te,Ze;if(G||(ue.geometry=ju(he)),k){let Qe=f.getValueAndResolveTokens("text-field",ue,d,Y),ct=ni.factory(Qe),xt=this.hasRTLText=this.hasRTLText||E5(ct);(!xt||za.getRTLTextPluginStatus()==="unavailable"||xt&&za.isParsed())&&(Te=a5(ct,f,ue))}if(D){let Qe=f.getValueAndResolveTokens("icon-image",ue,d,Y);Ze=Qe instanceof Cn?Qe:Cn.fromString(Qe)}if(!Te&&!Ze)continue;let _t=this.sortFeaturesByKey?L.evaluate(ue,{},d):void 0;if(this.features.push({id:ve,text:Te,icon:Ze,index:Oe,sourceLayerIndex:Ee,geometry:ue.geometry,properties:he.properties,type:w5[he.type],sortKey:_t}),Ze&&(j[Ze.name]=!0),Te){let Qe=v.evaluate(ue,{},d).join(","),ct=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.al.vertical)>=0;for(let xt of Te.sections)if(xt.image)j[xt.image.name]=!0;else{let bt=Kd(Te.toString()),wt=xt.fontStack||Qe,ht=W[wt]=W[wt]||{};this.calculateGlyphDependencies(xt.text,ht,ct,this.allowVerticalPlacement,bt)}}}b.get("symbol-placement")==="line"&&(this.features=function(he){let ve={},Oe={},Ee=[],G=0;function ue(Qe){Ee.push(he[Qe]),G++}function Te(Qe,ct,xt){let bt=Oe[Qe];return delete Oe[Qe],Oe[ct]=bt,Ee[bt].geometry[0].pop(),Ee[bt].geometry[0]=Ee[bt].geometry[0].concat(xt[0]),bt}function Ze(Qe,ct,xt){let bt=ve[ct];return delete ve[ct],ve[Qe]=bt,Ee[bt].geometry[0].shift(),Ee[bt].geometry[0]=xt[0].concat(Ee[bt].geometry[0]),bt}function _t(Qe,ct,xt){let bt=xt?ct[0][ct[0].length-1]:ct[0][0];return`${Qe}:${bt.x}:${bt.y}`}for(let Qe=0;Qe<he.length;Qe++){let ct=he[Qe],xt=ct.geometry,bt=ct.text?ct.text.toString():null;if(!bt){ue(Qe);continue}let wt=_t(bt,xt),ht=_t(bt,xt,!0);if(wt in Oe&&ht in ve&&Oe[wt]!==ve[ht]){let Vt=Ze(wt,ht,xt),ei=Te(wt,ht,Ee[Vt].geometry);delete ve[wt],delete Oe[ht],Oe[_t(bt,Ee[ei].geometry,!0)]=ei,Ee[Vt].geometry=null}else wt in Oe?Te(wt,ht,xt):ht in ve?Ze(wt,ht,xt):(ue(Qe),ve[wt]=G-1,Oe[ht]=G-1)}return Ee.filter(Qe=>Qe.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((he,ve)=>he.sortKey-ve.sortKey)}update(n,c,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,c,this.layers,d),this.icon.programConfigurations.updatePaintArrays(n,c,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,c){let d=this.lineVertexArray.length;if(n.segment!==void 0){let f=n.dist(c[n.segment+1]),b=n.dist(c[n.segment]),v={};for(let x=n.segment+1;x<c.length;x++)v[x]={x:c[x].x,y:c[x].y,tileUnitDistanceFromAnchor:f},x<c.length-1&&(f+=c[x+1].dist(c[x]));for(let x=n.segment||0;x>=0;x--)v[x]={x:c[x].x,y:c[x].y,tileUnitDistanceFromAnchor:b},x>0&&(b+=c[x-1].dist(c[x]));for(let x=0;x<c.length;x++){let S=v[x];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(n,c,d,f,b,v,x,S,k,D,L,j){let W=n.indexArray,Y=n.layoutVertexArray,ie=n.segments.prepareSegment(4*c.length,Y,W,this.canOverlap?v.sortKey:void 0),he=this.glyphOffsetArray.length,ve=ie.vertexLength,Oe=this.allowVerticalPlacement&&x===a.al.vertical?Math.PI/2:0,Ee=v.text&&v.text.sections;for(let G=0;G<c.length;G++){let{tl:ue,tr:Te,bl:Ze,br:_t,tex:Qe,pixelOffsetTL:ct,pixelOffsetBR:xt,minFontScaleX:bt,minFontScaleY:wt,glyphOffset:ht,isSDF:Vt,sectionIndex:ei}=c[G],Qt=ie.vertexLength,Wt=ht[1];wg(Y,S.x,S.y,ue.x,Wt+ue.y,Qe.x,Qe.y,d,Vt,ct.x,ct.y,bt,wt),wg(Y,S.x,S.y,Te.x,Wt+Te.y,Qe.x+Qe.w,Qe.y,d,Vt,xt.x,ct.y,bt,wt),wg(Y,S.x,S.y,Ze.x,Wt+Ze.y,Qe.x,Qe.y+Qe.h,d,Vt,ct.x,xt.y,bt,wt),wg(Y,S.x,S.y,_t.x,Wt+_t.y,Qe.x+Qe.w,Qe.y+Qe.h,d,Vt,xt.x,xt.y,bt,wt),lv(n.dynamicLayoutVertexArray,S,Oe),W.emplaceBack(Qt,Qt+2,Qt+1),W.emplaceBack(Qt+1,Qt+2,Qt+3),ie.vertexLength+=4,ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ht[0]),G!==c.length-1&&ei===c[G+1].sectionIndex||n.programConfigurations.populatePaintArrays(Y.length,v,v.index,{},j,Ee&&Ee[ei])}n.placedSymbolArray.emplaceBack(S.x,S.y,he,this.glyphOffsetArray.length-he,ve,k,D,S.segment,d?d[0]:0,d?d[1]:0,f[0],f[1],x,0,!1,0,L)}_addCollisionDebugVertex(n,c,d,f,b,v){return c.emplaceBack(0,0),n.emplaceBack(d.x,d.y,f,b,Math.round(v.x),Math.round(v.y))}addCollisionDebugVertices(n,c,d,f,b,v,x){let S=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),k=S.vertexLength,D=b.layoutVertexArray,L=b.collisionVertexArray,j=x.anchorX,W=x.anchorY;this._addCollisionDebugVertex(D,L,v,j,W,new R(n,c)),this._addCollisionDebugVertex(D,L,v,j,W,new R(d,c)),this._addCollisionDebugVertex(D,L,v,j,W,new R(d,f)),this._addCollisionDebugVertex(D,L,v,j,W,new R(n,f)),S.vertexLength+=4;let Y=b.indexArray;Y.emplaceBack(k,k+1),Y.emplaceBack(k+1,k+2),Y.emplaceBack(k+2,k+3),Y.emplaceBack(k+3,k),S.primitiveLength+=4}addDebugCollisionBoxes(n,c,d,f){for(let b=n;b<c;b++){let v=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,f?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new uv(Lr,V2.members,hn),this.iconCollisionBox=new uv(Lr,V2.members,hn);for(let n=0;n<this.symbolInstances.length;n++){let c=this.symbolInstances.get(n);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(n,c,d,f,b,v,x,S,k){let D={};for(let L=c;L<d;L++){let j=n.get(L);D.textBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},D.textFeatureIndex=j.featureIndex;break}for(let L=f;L<b;L++){let j=n.get(L);D.verticalTextBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},D.verticalTextFeatureIndex=j.featureIndex;break}for(let L=v;L<x;L++){let j=n.get(L);D.iconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},D.iconFeatureIndex=j.featureIndex;break}for(let L=S;L<k;L++){let j=n.get(L);D.verticalIconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},D.verticalIconFeatureIndex=j.featureIndex;break}return D}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){let d=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,c){let d=n.placedSymbolArray.get(c),f=d.vertexStartIndex+4*d.numGlyphs;for(let b=d.vertexStartIndex;b<f;b+=4)n.indexArray.emplaceBack(b,b+2,b+1),n.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let c=Math.sin(n),d=Math.cos(n),f=[],b=[],v=[];for(let x=0;x<this.symbolInstances.length;++x){v.push(x);let S=this.symbolInstances.get(x);f.push(0|Math.round(c*S.anchorX+d*S.anchorY)),b.push(S.featureIndex)}return v.sort((x,S)=>f[x]-f[S]||b[S]-b[x]),v}addToSortKeyRanges(n,c){let d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===c?d.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let c of this.symbolInstanceIndexes){let d=this.symbolInstances.get(c);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((f,b,v)=>{f>=0&&v.indexOf(f)===b&&this.addIndicesForPlacedSymbol(this.text,f)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let eC,tC;Lt("SymbolBucket",ah,{omit:["layers","collisionBoxArray","features","compareText"]}),ah.MAX_GLYPHS=65535,ah.addDynamicAttributes=lv;var dv={get paint(){return tC=tC||new nn({"icon-opacity":new ri(se.paint_symbol["icon-opacity"]),"icon-color":new ri(se.paint_symbol["icon-color"]),"icon-halo-color":new ri(se.paint_symbol["icon-halo-color"]),"icon-halo-width":new ri(se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ri(se.paint_symbol["icon-halo-blur"]),"icon-translate":new Zt(se.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zt(se.paint_symbol["icon-translate-anchor"]),"text-opacity":new ri(se.paint_symbol["text-opacity"]),"text-color":new ri(se.paint_symbol["text-color"],{runtimeType:sr,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new ri(se.paint_symbol["text-halo-color"]),"text-halo-width":new ri(se.paint_symbol["text-halo-width"]),"text-halo-blur":new ri(se.paint_symbol["text-halo-blur"]),"text-translate":new Zt(se.paint_symbol["text-translate"]),"text-translate-anchor":new Zt(se.paint_symbol["text-translate-anchor"])})},get layout(){return eC=eC||new nn({"symbol-placement":new Zt(se.layout_symbol["symbol-placement"]),"symbol-spacing":new Zt(se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zt(se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ri(se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zt(se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zt(se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Zt(se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Zt(se.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zt(se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zt(se.layout_symbol["icon-rotation-alignment"]),"icon-size":new ri(se.layout_symbol["icon-size"]),"icon-text-fit":new Zt(se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zt(se.layout_symbol["icon-text-fit-padding"]),"icon-image":new ri(se.layout_symbol["icon-image"]),"icon-rotate":new ri(se.layout_symbol["icon-rotate"]),"icon-padding":new ri(se.layout_symbol["icon-padding"]),"icon-keep-upright":new Zt(se.layout_symbol["icon-keep-upright"]),"icon-offset":new ri(se.layout_symbol["icon-offset"]),"icon-anchor":new ri(se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zt(se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zt(se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zt(se.layout_symbol["text-rotation-alignment"]),"text-field":new ri(se.layout_symbol["text-field"]),"text-font":new ri(se.layout_symbol["text-font"]),"text-size":new ri(se.layout_symbol["text-size"]),"text-max-width":new ri(se.layout_symbol["text-max-width"]),"text-line-height":new Zt(se.layout_symbol["text-line-height"]),"text-letter-spacing":new ri(se.layout_symbol["text-letter-spacing"]),"text-justify":new ri(se.layout_symbol["text-justify"]),"text-radial-offset":new ri(se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zt(se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ri(se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ri(se.layout_symbol["text-anchor"]),"text-max-angle":new Zt(se.layout_symbol["text-max-angle"]),"text-writing-mode":new Zt(se.layout_symbol["text-writing-mode"]),"text-rotate":new ri(se.layout_symbol["text-rotate"]),"text-padding":new Zt(se.layout_symbol["text-padding"]),"text-keep-upright":new Zt(se.layout_symbol["text-keep-upright"]),"text-transform":new ri(se.layout_symbol["text-transform"]),"text-offset":new ri(se.layout_symbol["text-offset"]),"text-allow-overlap":new Zt(se.layout_symbol["text-allow-overlap"]),"text-overlap":new Zt(se.layout_symbol["text-overlap"]),"text-ignore-placement":new Zt(se.layout_symbol["text-ignore-placement"]),"text-optional":new Zt(se.layout_symbol["text-optional"])})}};class iC{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:$t,this.defaultValue=n}evaluate(n){if(n.formattedSection){let c=this.defaultValue.property.overrides;if(c&&c.hasOverride(n.formattedSection))return c.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Lt("FormatSectionOverride",iC,{omit:["defaultValue"]});class Cg extends us{constructor(n){super(n,dv)}recalculate(n,c){if(super.recalculate(n,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let d=this.layout.get("text-writing-mode");if(d){let f=[];for(let b of d)f.indexOf(b)<0&&f.push(b);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,c,d,f){let b=this.layout.get(n).evaluate(c,{},d,f),v=this._unevaluatedLayout._values[n];return v.isDataDriven()||Di(v.value)||!b?b:function(x,S){return S.replace(/{([^{}]+)}/g,(k,D)=>x&&D in x?String(x[D]):"")}(c.properties,b)}createBucket(n){return new ah(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let n of dv.paint.overridableProperties){if(!Cg.hasPaintOverride(this.layout,n))continue;let c=this.paint.get(n),d=new iC(c),f=new oi(d,c.property.specification),b=null;b=c.value.kind==="constant"||c.value.kind==="source"?new Kr("source",f):new jn("composite",f,c.value.zoomStops),this.paint._values[n]=new _o(c.property,b,c.parameters)}}_handleOverridablePaintPropertyUpdate(n,c,d){return!(!this.layout||c.isDataDriven()||d.isDataDriven())&&Cg.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,c){let d=n.get("text-field"),f=dv.paint.properties[c],b=!1,v=x=>{for(let S of x)if(f.overrides&&f.overrides.hasOverride(S))return void(b=!0)};if(d.value.kind==="constant"&&d.value.value instanceof ni)v(d.value.value.sections);else if(d.value.kind==="source"){let x=k=>{b||(k instanceof fi&&fr(k.value)===ho?v(k.value.sections):k instanceof xc?v(k.sections):k.eachChild(x))},S=d.value;S._styleExpression&&x(S._styleExpression.expression)}return b}}let rC;var S5={get paint(){return rC=rC||new nn({"background-color":new Zt(se.paint_background["background-color"]),"background-pattern":new Fp(se.paint_background["background-pattern"]),"background-opacity":new Zt(se.paint_background["background-opacity"])})}};class T5 extends us{constructor(n){super(n,S5)}}let nC;var M5={get paint(){return nC=nC||new nn({"raster-opacity":new Zt(se.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zt(se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zt(se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zt(se.paint_raster["raster-brightness-max"]),"raster-saturation":new Zt(se.paint_raster["raster-saturation"]),"raster-contrast":new Zt(se.paint_raster["raster-contrast"]),"raster-resampling":new Zt(se.paint_raster["raster-resampling"]),"raster-fade-duration":new Zt(se.paint_raster["raster-fade-duration"])})}};class I5 extends us{constructor(n){super(n,M5)}}class P5 extends us{constructor(n){super(n,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class k5{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let A5={once:!0},hv=63710088e-1;class $c{constructor(n,c){if(isNaN(n)||isNaN(c))throw new Error(`Invalid LngLat object: (${n}, ${c})`);if(this.lng=+n,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new $c(Dt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){let c=Math.PI/180,d=this.lat*c,f=n.lat*c,b=Math.sin(d)*Math.sin(f)+Math.cos(d)*Math.cos(f)*Math.cos((n.lng-this.lng)*c);return hv*Math.acos(Math.min(b,1))}static convert(n){if(n instanceof $c)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new $c(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new $c(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let oC=2*Math.PI*hv;function sC(u){return oC*Math.cos(u*Math.PI/180)}function aC(u){return(180+u)/360}function lC(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function cC(u,n){return u/sC(n)}function pv(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function uC(u,n){return u*sC(pv(n))}class sf{constructor(n,c,d=0){this.x=+n,this.y=+c,this.z=+d}static fromLngLat(n,c=0){let d=$c.convert(n);return new sf(aC(d.lng),lC(d.lat),cC(c,d.lat))}toLngLat(){return new $c(360*this.x-180,pv(this.y))}toAltitude(){return uC(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/oC*(n=pv(this.y),1/Math.cos(n*Math.PI/180));var n}}function dC(u,n,c){var d=2*Math.PI*6378137/256/Math.pow(2,c);return[u*d-2*Math.PI*6378137/2,n*d-2*Math.PI*6378137/2]}class fv{constructor(n,c,d){if(!function(f,b,v){return!(f<0||f>25||v<0||v>=Math.pow(2,f)||b<0||b>=Math.pow(2,f))}(n,c,d))throw new Error(`x=${c}, y=${d}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=c,this.y=d,this.key=lh(0,n,n,c,d)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,c,d){let f=(v=this.y,x=this.z,S=dC(256*(b=this.x),256*(v=Math.pow(2,x)-v-1),x),k=dC(256*(b+1),256*(v+1),x),S[0]+","+S[1]+","+k[0]+","+k[1]);var b,v,x,S,k;let D=function(L,j,W){let Y,ie="";for(let he=L;he>0;he--)Y=1<<he-1,ie+=(j&Y?1:0)+(W&Y?2:0);return ie}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,D).replace(/{bbox-epsg-3857}/g,f)}isChildOf(n){let c=this.z-n.z;return c>0&&n.x===this.x>>c&&n.y===this.y>>c}getTilePoint(n){let c=Math.pow(2,this.z);return new R((n.x*c-this.x)*me,(n.y*c-this.y)*me)}toString(){return`${this.z}/${this.x}/${this.y}`}}class hC{constructor(n,c){this.wrap=n,this.canonical=c,this.key=lh(n,c.z,c.z,c.x,c.y)}}class Ps{constructor(n,c,d,f,b){if(this.terrainRttPosMatrix32f=null,n<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${d}`);this.overscaledZ=n,this.wrap=c,this.canonical=new fv(d,+f,+b),this.key=lh(c,n,d,f,b)}clone(){return new Ps(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);let c=this.canonical.z-n;return n>this.canonical.z?new Ps(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ps(n,this.wrap,n,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(n,c){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);let d=this.canonical.z-n;return n>this.canonical.z?lh(this.wrap*+c,n,this.canonical.z,this.canonical.x,this.canonical.y):lh(this.wrap*+c,n,n,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(n){if(n.wrap!==this.wrap)return!1;let c=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>c&&n.canonical.y===this.canonical.y>>c}children(n){if(this.overscaledZ>=n)return[new Ps(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let c=this.canonical.z+1,d=2*this.canonical.x,f=2*this.canonical.y;return[new Ps(c,this.wrap,c,d,f),new Ps(c,this.wrap,c,d+1,f),new Ps(c,this.wrap,c,d,f+1),new Ps(c,this.wrap,c,d+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Ps(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Ps(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new hC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new sf(n.x-this.wrap,n.y))}}function lh(u,n,c,d,f){(u*=2)<0&&(u=-1*u-1);let b=1<<c;return(b*b*u+b*f+d).toString(36)+c.toString(36)+n.toString(36)}Lt("CanonicalTileID",fv),Lt("OverscaledTileID",Ps,{omit:["terrainRttPosMatrix32f"]});class pC{constructor(n,c,d,f=1,b=1,v=1,x=0){if(this.uid=n,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Ar(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;let S=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=b,this.blueFactor=v,this.baseShift=x;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<S;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(S,k)]=this.data[this._idx(S-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,S)]=this.data[this._idx(k,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<S;k++)for(let D=0;D<S;D++){let L=this.get(k,D);L>this.max&&(this.max=L),L<this.min&&(this.min=L)}}get(n,c){let d=new Uint8Array(this.data.buffer),f=4*this._idx(n,c);return this.unpack(d[f],d[f+1],d[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,c){if(n<-1||n>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(n+1)}unpack(n,c,d){return n*this.redFactor+c*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new Is({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,c,d){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=c*this.dim,b=c*this.dim+this.dim,v=d*this.dim,x=d*this.dim+this.dim;switch(c){case-1:f=b-1;break;case 1:b=f+1}switch(d){case-1:v=x-1;break;case 1:x=v+1}let S=-c*this.dim,k=-d*this.dim;for(let D=v;D<x;D++)for(let L=f;L<b;L++)this.data[this._idx(L,D)]=n.data[this._idx(L+S,D+k)]}}Lt("DEMData",pC);class fC{constructor(n){this._stringToNumber={},this._numberToString=[];for(let c=0;c<n.length;c++){let d=n[c];this._stringToNumber[d]=c,this._numberToString[c]=d}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class mC{constructor(n,c,d,f,b){this.type="Feature",this._vectorTileFeature=n,n._z=c,n._x=d,n._y=f,this.properties=n.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){let n={geometry:this.geometry};for(let c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(n[c]=this[c]);return n}}class gC{constructor(n,c){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Bc(me,16,0),this.grid3D=new Bc(me,16,0),this.featureIndexArray=new rt,this.promoteId=c}insert(n,c,d,f,b,v){let x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,f,b);let S=v?this.grid3D:this.grid;for(let k=0;k<c.length;k++){let D=c[k],L=[1/0,1/0,-1/0,-1/0];for(let j=0;j<D.length;j++){let W=D[j];L[0]=Math.min(L[0],W.x),L[1]=Math.min(L[1],W.y),L[2]=Math.max(L[2],W.x),L[3]=Math.max(L[3],W.y)}L[0]<me&&L[1]<me&&L[2]>=0&&L[3]>=0&&S.insert(x,L[0],L[1],L[2],L[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Jp.VectorTile(new iv(this.rawTileData)).layers,this.sourceLayerCoder=new fC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,c,d,f){this.loadVTLayers();let b=n.params,v=me/n.tileSize/n.scale,x=ku(b.filter),S=n.queryGeometry,k=n.queryPadding*v,D=bC(S),L=this.grid.query(D.minX-k,D.minY-k,D.maxX+k,D.maxY+k),j=bC(n.cameraQueryGeometry),W=this.grid3D.query(j.minX-k,j.minY-k,j.maxX+k,j.maxY+k,(he,ve,Oe,Ee)=>function(G,ue,Te,Ze,_t){for(let ct of G)if(ue<=ct.x&&Te<=ct.y&&Ze>=ct.x&&_t>=ct.y)return!0;let Qe=[new R(ue,Te),new R(ue,_t),new R(Ze,_t),new R(Ze,Te)];if(G.length>2){for(let ct of Qe)if(Hu(G,ct))return!0}for(let ct=0;ct<G.length-1;ct++)if(v3(G[ct],G[ct+1],Qe))return!0;return!1}(n.cameraQueryGeometry,he-k,ve-k,Oe+k,Ee+k));for(let he of W)L.push(he);L.sort(D5);let Y={},ie;for(let he=0;he<L.length;he++){let ve=L[he];if(ve===ie)continue;ie=ve;let Oe=this.featureIndexArray.get(ve),Ee=null;this.loadMatchingFeature(Y,Oe.bucketIndex,Oe.sourceLayerIndex,Oe.featureIndex,x,b.layers,b.availableImages,c,d,f,(G,ue,Te)=>(Ee||(Ee=ju(G)),ue.queryIntersectsFeature({queryGeometry:S,feature:G,featureState:Te,geometry:Ee,zoom:this.z,transform:n.transform,pixelsToTileUnits:v,pixelPosMatrix:n.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:n.getElevation})))}return Y}loadMatchingFeature(n,c,d,f,b,v,x,S,k,D,L){let j=this.bucketLayerIDs[c];if(v&&!j.some(he=>v.has(he)))return;let W=this.sourceLayerCoder.decode(d),Y=this.vtLayers[W].feature(f);if(b.needGeometry){let he=qu(Y,!0);if(!b.filter(new Tr(this.tileID.overscaledZ),he,this.tileID.canonical))return}else if(!b.filter(new Tr(this.tileID.overscaledZ),Y))return;let ie=this.getId(Y,W);for(let he=0;he<j.length;he++){let ve=j[he];if(v&&!v.has(ve))continue;let Oe=S[ve];if(!Oe)continue;let Ee={};ie&&D&&(Ee=D.getState(Oe.sourceLayer||"_geojsonTileLayer",ie));let G=di({},k[ve]);G.paint=_C(G.paint,Oe.paint,Y,Ee,x),G.layout=_C(G.layout,Oe.layout,Y,Ee,x);let ue=!L||L(Y,Oe,Ee);if(!ue)continue;let Te=new mC(Y,this.z,this.x,this.y,ie);Te.layer=G;let Ze=n[ve];Ze===void 0&&(Ze=n[ve]=[]),Ze.push({featureIndex:f,feature:Te,intersectionZ:ue})}}lookupSymbolFeatures(n,c,d,f,b,v,x,S){let k={};this.loadVTLayers();let D=ku(b);for(let L of n)this.loadMatchingFeature(k,d,f,L,D,v,x,S,c);return k}hasLayer(n){for(let c of this.bucketLayerIDs)for(let d of c)if(n===d)return!0;return!1}getId(n,c){var d;let f=n.id;return this.promoteId&&(f=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof f=="boolean"&&(f=Number(f)),f===void 0&&(!((d=n.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(f=Number(n.properties.cluster_id))),f}}function _C(u,n,c,d,f){return Uo(u,(b,v)=>{let x=n instanceof eh?n.get(v):null;return x&&x.evaluate?x.evaluate(c,d,f):x})}function bC(u){let n=1/0,c=1/0,d=-1/0,f=-1/0;for(let b of u)n=Math.min(n,b.x),c=Math.min(c,b.y),d=Math.max(d,b.x),f=Math.max(f,b.y);return{minX:n,minY:c,maxX:d,maxY:f}}function D5(u,n){return n-u}function vC(u,n,c,d,f){let b=[];for(let v=0;v<u.length;v++){let x=u[v],S;for(let k=0;k<x.length-1;k++){let D=x[k],L=x[k+1];D.x<n&&L.x<n||(D.x<n?D=new R(n,D.y+(n-D.x)/(L.x-D.x)*(L.y-D.y))._round():L.x<n&&(L=new R(n,D.y+(n-D.x)/(L.x-D.x)*(L.y-D.y))._round()),D.y<c&&L.y<c||(D.y<c?D=new R(D.x+(c-D.y)/(L.y-D.y)*(L.x-D.x),c)._round():L.y<c&&(L=new R(D.x+(c-D.y)/(L.y-D.y)*(L.x-D.x),c)._round()),D.x>=d&&L.x>=d||(D.x>=d?D=new R(d,D.y+(d-D.x)/(L.x-D.x)*(L.y-D.y))._round():L.x>=d&&(L=new R(d,D.y+(d-D.x)/(L.x-D.x)*(L.y-D.y))._round()),D.y>=f&&L.y>=f||(D.y>=f?D=new R(D.x+(f-D.y)/(L.y-D.y)*(L.x-D.x),f)._round():L.y>=f&&(L=new R(D.x+(f-D.y)/(L.y-D.y)*(L.x-D.x),f)._round()),S&&D.equals(S[S.length-1])||(S=[D],b.push(S)),S.push(L)))))}}return b}Lt("FeatureIndex",gC,{omit:["rawTileData","sourceLayerCoder"]});class Gc extends R{constructor(n,c,d,f){super(n,c),this.angle=d,f!==void 0&&(this.segment=f)}clone(){return new Gc(this.x,this.y,this.angle,this.segment)}}function yC(u,n,c,d,f){if(n.segment===void 0||c===0)return!0;let b=n,v=n.segment+1,x=0;for(;x>-c/2;){if(v--,v<0)return!1;x-=u[v].dist(b),b=u[v]}x+=u[v].dist(u[v+1]),v++;let S=[],k=0;for(;x<c/2;){let D=u[v],L=u[v+1];if(!L)return!1;let j=u[v-1].angleTo(D)-D.angleTo(L);for(j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:j}),k+=j;x-S[0].distance>d;)k-=S.shift().angleDelta;if(k>f)return!1;v++,x+=D.dist(L)}return!0}function xC(u){let n=0;for(let c=0;c<u.length-1;c++)n+=u[c].dist(u[c+1]);return n}function wC(u,n,c){return u?.6*n*c:0}function CC(u,n){return Math.max(u?u.right-u.left:0,n?n.right-n.left:0)}function R5(u,n,c,d,f,b){let v=wC(c,f,b),x=CC(c,d)*b,S=0,k=xC(u)/2;for(let D=0;D<u.length-1;D++){let L=u[D],j=u[D+1],W=L.dist(j);if(S+W>k){let Y=(k-S)/W,ie=ns.number(L.x,j.x,Y),he=ns.number(L.y,j.y,Y),ve=new Gc(ie,he,j.angleTo(L),D);return ve._round(),!v||yC(u,ve,x,v,n)?ve:void 0}S+=W}}function O5(u,n,c,d,f,b,v,x,S){let k=wC(d,b,v),D=CC(d,f),L=D*v,j=u[0].x===0||u[0].x===S||u[0].y===0||u[0].y===S;return n-L<n/4&&(n=L+n/4),EC(u,j?n/2*x%n:(D/2+2*b)*v*x%n,n,k,c,L,j,!1,S)}function EC(u,n,c,d,f,b,v,x,S){let k=b/2,D=xC(u),L=0,j=n-c,W=[];for(let Y=0;Y<u.length-1;Y++){let ie=u[Y],he=u[Y+1],ve=ie.dist(he),Oe=he.angleTo(ie);for(;j+c<L+ve;){j+=c;let Ee=(j-L)/ve,G=ns.number(ie.x,he.x,Ee),ue=ns.number(ie.y,he.y,Ee);if(G>=0&&G<S&&ue>=0&&ue<S&&j-k>=0&&j+k<=D){let Te=new Gc(G,ue,Oe,Y);Te._round(),d&&!yC(u,Te,b,d,f)||W.push(Te)}}L+=ve}return x||W.length||v||(W=EC(u,L/2,c,d,f,b,v,!0,S)),W}Lt("Anchor",Gc);let af=Zo;function SC(u,n,c,d){let f=[],b=u.image,v=b.pixelRatio,x=b.paddedRect.w-2*af,S=b.paddedRect.h-2*af,k={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom},D=b.stretchX||[[0,x]],L=b.stretchY||[[0,S]],j=(ht,Vt)=>ht+Vt[1]-Vt[0],W=D.reduce(j,0),Y=L.reduce(j,0),ie=x-W,he=S-Y,ve=0,Oe=W,Ee=0,G=Y,ue=0,Te=ie,Ze=0,_t=he;if(b.content&&d){let ht=b.content,Vt=ht[2]-ht[0],ei=ht[3]-ht[1];(b.textFitWidth||b.textFitHeight)&&(k=K2(u)),ve=Eg(D,0,ht[0]),Ee=Eg(L,0,ht[1]),Oe=Eg(D,ht[0],ht[2]),G=Eg(L,ht[1],ht[3]),ue=ht[0]-ve,Ze=ht[1]-Ee,Te=Vt-Oe,_t=ei-G}let Qe=k.x1,ct=k.y1,xt=k.x2-Qe,bt=k.y2-ct,wt=(ht,Vt,ei,Qt)=>{let Wt=Sg(ht.stretch-ve,Oe,xt,Qe),ji=Tg(ht.fixed-ue,Te,ht.stretch,W),Vr=Sg(Vt.stretch-Ee,G,bt,ct),fn=Tg(Vt.fixed-Ze,_t,Vt.stretch,Y),ro=Sg(ei.stretch-ve,Oe,xt,Qe),ks=Tg(ei.fixed-ue,Te,ei.stretch,W),Xo=Sg(Qt.stretch-Ee,G,bt,ct),Hn=Tg(Qt.fixed-Ze,_t,Qt.stretch,Y),Nr=new R(Wt,Vr),In=new R(ro,Vr),$n=new R(ro,Xo),Gn=new R(Wt,Xo),Lo=new R(ji/v,fn/v),As=new R(ks/v,Hn/v),Pn=n*Math.PI/180;if(Pn){let kn=Math.sin(Pn),An=Math.cos(Pn),an=[An,-kn,kn,An];Nr._matMult(an),In._matMult(an),Gn._matMult(an),$n._matMult(an)}let Yo=ht.stretch+ht.fixed,mn=Vt.stretch+Vt.fixed;return{tl:Nr,tr:In,bl:Gn,br:$n,tex:{x:b.paddedRect.x+af+Yo,y:b.paddedRect.y+af+mn,w:ei.stretch+ei.fixed-Yo,h:Qt.stretch+Qt.fixed-mn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Lo,pixelOffsetBR:As,minFontScaleX:Te/v/xt,minFontScaleY:_t/v/bt,isSDF:c}};if(d&&(b.stretchX||b.stretchY)){let ht=TC(D,ie,W),Vt=TC(L,he,Y);for(let ei=0;ei<ht.length-1;ei++){let Qt=ht[ei],Wt=ht[ei+1];for(let ji=0;ji<Vt.length-1;ji++)f.push(wt(Qt,Vt[ji],Wt,Vt[ji+1]))}}else f.push(wt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return f}function Eg(u,n,c){let d=0;for(let f of u)d+=Math.max(n,Math.min(c,f[1]))-Math.max(n,Math.min(c,f[0]));return d}function TC(u,n,c){let d=[{fixed:-1,stretch:0}];for(let[f,b]of u){let v=d[d.length-1];d.push({fixed:f-v.stretch,stretch:v.stretch}),d.push({fixed:f-v.stretch,stretch:v.stretch+(b-f)})}return d.push({fixed:n+af,stretch:c}),d}function Sg(u,n,c,d){return u/n*c+d}function Tg(u,n,c,d){return u-n*c/d}class Mg{constructor(n,c,d,f,b,v,x,S,k,D){var L;if(this.boxStartIndex=n.length,k){let j=v.top,W=v.bottom,Y=v.collisionPadding;Y&&(j-=Y[1],W+=Y[3]);let ie=W-j;ie>0&&(ie=Math.max(10,ie),this.circleDiameter=ie)}else{let j=!((L=v.image)===null||L===void 0)&&L.content&&(v.image.textFitWidth||v.image.textFitHeight)?K2(v):{x1:v.left,y1:v.top,x2:v.right,y2:v.bottom};j.y1=j.y1*x-S[0],j.y2=j.y2*x+S[2],j.x1=j.x1*x-S[3],j.x2=j.x2*x+S[1];let W=v.collisionPadding;if(W&&(j.x1-=W[0]*x,j.y1-=W[1]*x,j.x2+=W[2]*x,j.y2+=W[3]*x),D){let Y=new R(j.x1,j.y1),ie=new R(j.x2,j.y1),he=new R(j.x1,j.y2),ve=new R(j.x2,j.y2),Oe=D*Math.PI/180;Y._rotate(Oe),ie._rotate(Oe),he._rotate(Oe),ve._rotate(Oe),j.x1=Math.min(Y.x,ie.x,he.x,ve.x),j.x2=Math.max(Y.x,ie.x,he.x,ve.x),j.y1=Math.min(Y.y,ie.y,he.y,ve.y),j.y2=Math.max(Y.y,ie.y,he.y,ve.y)}n.emplaceBack(c.x,c.y,j.x1,j.y1,j.x2,j.y2,d,f,b)}this.boxEndIndex=n.length}}class L5{constructor(n=[],c=(d,f)=>d<f?-1:d>f?1:0){if(this.data=n,this.length=this.data.length,this.compare=c,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;let n=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),n}peek(){return this.data[0]}_up(n){let{data:c,compare:d}=this,f=c[n];for(;n>0;){let b=n-1>>1,v=c[b];if(d(f,v)>=0)break;c[n]=v,n=b}c[n]=f}_down(n){let{data:c,compare:d}=this,f=this.length>>1,b=c[n];for(;n<f;){let v=1+(n<<1),x=v+1;if(x<this.length&&d(c[x],c[v])<0&&(v=x),d(c[v],b)>=0)break;c[n]=c[v],n=v}c[n]=b}}function N5(u,n=1,c=!1){let d=1/0,f=1/0,b=-1/0,v=-1/0,x=u[0];for(let W=0;W<x.length;W++){let Y=x[W];(!W||Y.x<d)&&(d=Y.x),(!W||Y.y<f)&&(f=Y.y),(!W||Y.x>b)&&(b=Y.x),(!W||Y.y>v)&&(v=Y.y)}let S=Math.min(b-d,v-f),k=S/2,D=new L5([],F5);if(S===0)return new R(d,f);for(let W=d;W<b;W+=S)for(let Y=f;Y<v;Y+=S)D.push(new ch(W+k,Y+k,k,u));let L=function(W){let Y=0,ie=0,he=0,ve=W[0];for(let Oe=0,Ee=ve.length,G=Ee-1;Oe<Ee;G=Oe++){let ue=ve[Oe],Te=ve[G],Ze=ue.x*Te.y-Te.x*ue.y;ie+=(ue.x+Te.x)*Ze,he+=(ue.y+Te.y)*Ze,Y+=3*Ze}return new ch(ie/Y,he/Y,0,W)}(u),j=D.length;for(;D.length;){let W=D.pop();(W.d>L.d||!L.d)&&(L=W,c&&console.log("found best %d after %d probes",Math.round(1e4*W.d)/1e4,j)),W.max-L.d<=n||(k=W.h/2,D.push(new ch(W.p.x-k,W.p.y-k,k,u)),D.push(new ch(W.p.x+k,W.p.y-k,k,u)),D.push(new ch(W.p.x-k,W.p.y+k,k,u)),D.push(new ch(W.p.x+k,W.p.y+k,k,u)),j+=4)}return c&&(console.log(`num probes: ${j}`),console.log(`best distance: ${L.d}`)),L.p}function F5(u,n){return n.max-u.max}function ch(u,n,c,d){this.p=new R(u,n),this.h=c,this.d=function(f,b){let v=!1,x=1/0;for(let S=0;S<b.length;S++){let k=b[S];for(let D=0,L=k.length,j=L-1;D<L;j=D++){let W=k[D],Y=k[j];W.y>f.y!=Y.y>f.y&&f.x<(Y.x-W.x)*(f.y-W.y)/(Y.y-W.y)+W.x&&(v=!v),x=Math.min(x,s2(f,W,Y))}}return(v?1:-1)*Math.sqrt(x)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var io;a.aB=void 0,(io=a.aB||(a.aB={}))[io.center=1]="center",io[io.left=2]="left",io[io.right=3]="right",io[io.top=4]="top",io[io.bottom=5]="bottom",io[io["top-left"]=6]="top-left",io[io["top-right"]=7]="top-right",io[io["bottom-left"]=8]="bottom-left",io[io["bottom-right"]=9]="bottom-right";let Wc=7,mv=Number.POSITIVE_INFINITY;function MC(u,n){return n[1]!==mv?function(c,d,f){let b=0,v=0;switch(d=Math.abs(d),f=Math.abs(f),c){case"top-right":case"top-left":case"top":v=f-Wc;break;case"bottom-right":case"bottom-left":case"bottom":v=-f+Wc}switch(c){case"top-right":case"bottom-right":case"right":b=-d;break;case"top-left":case"bottom-left":case"left":b=d}return[b,v]}(u,n[0],n[1]):function(c,d){let f=0,b=0;d<0&&(d=0);let v=d/Math.SQRT2;switch(c){case"top-right":case"top-left":b=v-Wc;break;case"bottom-right":case"bottom-left":b=-v+Wc;break;case"bottom":b=-d+Wc;break;case"top":b=d-Wc}switch(c){case"top-right":case"bottom-right":f=-v;break;case"top-left":case"bottom-left":f=v;break;case"left":f=d;break;case"right":f=-d}return[f,b]}(u,n[0])}function IC(u,n,c){var d;let f=u.layout,b=(d=f.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(n,{},c);if(b){let x=b.values,S=[];for(let k=0;k<x.length;k+=2){let D=S[k]=x[k],L=x[k+1].map(j=>j*pn);D.startsWith("top")?L[1]-=Wc:D.startsWith("bottom")&&(L[1]+=Wc),S[k+1]=L}return new Kt(S)}let v=f.get("text-variable-anchor");if(v){let x;x=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(n,{},c)*pn,mv]:f.get("text-offset").evaluate(n,{},c).map(k=>k*pn);let S=[];for(let k of v)S.push(k,MC(k,x));return new Kt(S)}return null}function gv(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function z5(u,n,c,d,f,b,v,x,S,k,D,L){let j=b.textMaxSize.evaluate(n,{});j===void 0&&(j=v);let W=u.layers[0].layout,Y=W.get("icon-offset").evaluate(n,{},D),ie=kC(c.horizontal),he=v/24,ve=u.tilePixelRatio*he,Oe=u.tilePixelRatio*j/24,Ee=u.tilePixelRatio*x,G=u.tilePixelRatio*W.get("symbol-spacing"),ue=W.get("text-padding")*u.tilePixelRatio,Te=function(ei,Qt,Wt,ji=1){let Vr=ei.get("icon-padding").evaluate(Qt,{},Wt),fn=Vr&&Vr.values;return[fn[0]*ji,fn[1]*ji,fn[2]*ji,fn[3]*ji]}(W,n,D,u.tilePixelRatio),Ze=W.get("text-max-angle")/180*Math.PI,_t=W.get("text-rotation-alignment")!=="viewport"&&W.get("symbol-placement")!=="point",Qe=W.get("icon-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",ct=W.get("symbol-placement"),xt=G/2,bt=W.get("icon-text-fit"),wt;d&&bt!=="none"&&(u.allowVerticalPlacement&&c.vertical&&(wt=Q2(d,c.vertical,bt,W.get("icon-text-fit-padding"),Y,he)),ie&&(d=Q2(d,ie,bt,W.get("icon-text-fit-padding"),Y,he)));let ht=D?L.line.getGranularityForZoomLevel(D.z):1,Vt=(ei,Qt)=>{Qt.x<0||Qt.x>=me||Qt.y<0||Qt.y>=me||function(Wt,ji,Vr,fn,ro,ks,Xo,Hn,Nr,In,$n,Gn,Lo,As,Pn,Yo,mn,kn,An,an,Ir,Ua,uh,ja,U5){let dh=Wt.addToLineVertexArray(ji,Vr),Wu,hh,ph,fh,OC=0,LC=0,NC=0,FC=0,Ev=-1,Sv=-1,Kl={},zC=Ba("");if(Wt.allowVerticalPlacement&&fn.vertical){let vo=Hn.layout.get("text-rotate").evaluate(Ir,{},ja)+90;ph=new Mg(Nr,ji,In,$n,Gn,fn.vertical,Lo,As,Pn,vo),Xo&&(fh=new Mg(Nr,ji,In,$n,Gn,Xo,mn,kn,Pn,vo))}if(ro){let vo=Hn.layout.get("icon-rotate").evaluate(Ir,{}),Ds=Hn.layout.get("icon-text-fit")!=="none",Zu=SC(ro,vo,uh,Ds),Ha=Xo?SC(Xo,vo,uh,Ds):void 0;hh=new Mg(Nr,ji,In,$n,Gn,ro,mn,kn,!1,vo),OC=4*Zu.length;let Xu=Wt.iconSizeData,vl=null;Xu.kind==="source"?(vl=[bl*Hn.layout.get("icon-size").evaluate(Ir,{})],vl[0]>Hc&&Ar(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${of}. Reduce your "icon-size".`)):Xu.kind==="composite"&&(vl=[bl*Ua.compositeIconSizes[0].evaluate(Ir,{},ja),bl*Ua.compositeIconSizes[1].evaluate(Ir,{},ja)],(vl[0]>Hc||vl[1]>Hc)&&Ar(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${of}. Reduce your "icon-size".`)),Wt.addSymbols(Wt.icon,Zu,vl,an,An,Ir,a.al.none,ji,dh.lineStartIndex,dh.lineLength,-1,ja),Ev=Wt.icon.placedSymbolArray.length-1,Ha&&(LC=4*Ha.length,Wt.addSymbols(Wt.icon,Ha,vl,an,An,Ir,a.al.vertical,ji,dh.lineStartIndex,dh.lineLength,-1,ja),Sv=Wt.icon.placedSymbolArray.length-1)}let BC=Object.keys(fn.horizontal);for(let vo of BC){let Ds=fn.horizontal[vo];if(!Wu){zC=Ba(Ds.text);let Ha=Hn.layout.get("text-rotate").evaluate(Ir,{},ja);Wu=new Mg(Nr,ji,In,$n,Gn,Ds,Lo,As,Pn,Ha)}let Zu=Ds.positionedLines.length===1;if(NC+=PC(Wt,ji,Ds,ks,Hn,Pn,Ir,Yo,dh,fn.vertical?a.al.horizontal:a.al.horizontalOnly,Zu?BC:[vo],Kl,Ev,Ua,ja),Zu)break}fn.vertical&&(FC+=PC(Wt,ji,fn.vertical,ks,Hn,Pn,Ir,Yo,dh,a.al.vertical,["vertical"],Kl,Sv,Ua,ja));let j5=Wu?Wu.boxStartIndex:Wt.collisionBoxArray.length,q5=Wu?Wu.boxEndIndex:Wt.collisionBoxArray.length,H5=ph?ph.boxStartIndex:Wt.collisionBoxArray.length,$5=ph?ph.boxEndIndex:Wt.collisionBoxArray.length,G5=hh?hh.boxStartIndex:Wt.collisionBoxArray.length,W5=hh?hh.boxEndIndex:Wt.collisionBoxArray.length,Z5=fh?fh.boxStartIndex:Wt.collisionBoxArray.length,X5=fh?fh.boxEndIndex:Wt.collisionBoxArray.length,qa=-1,Pg=(vo,Ds)=>vo&&vo.circleDiameter?Math.max(vo.circleDiameter,Ds):Ds;qa=Pg(Wu,qa),qa=Pg(ph,qa),qa=Pg(hh,qa),qa=Pg(fh,qa);let VC=qa>-1?1:0;VC&&(qa*=U5/pn),Wt.glyphOffsetArray.length>=ah.MAX_GLYPHS&&Ar("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ir.sortKey!==void 0&&Wt.addToSortKeyRanges(Wt.symbolInstances.length,Ir.sortKey);let Y5=IC(Hn,Ir,ja),[K5,Q5]=function(vo,Ds){let Zu=vo.length,Ha=Ds?.values;if(Ha?.length>0)for(let Xu=0;Xu<Ha.length;Xu+=2){let vl=Ha[Xu+1];vo.emplaceBack(a.aB[Ha[Xu]],vl[0],vl[1])}return[Zu,vo.length]}(Wt.textAnchorOffsets,Y5);Wt.symbolInstances.emplaceBack(ji.x,ji.y,Kl.right>=0?Kl.right:-1,Kl.center>=0?Kl.center:-1,Kl.left>=0?Kl.left:-1,Kl.vertical||-1,Ev,Sv,zC,j5,q5,H5,$5,G5,W5,Z5,X5,In,NC,FC,OC,LC,VC,0,Lo,qa,K5,Q5)}(u,Qt,ei,c,d,f,wt,u.layers[0],u.collisionBoxArray,n.index,n.sourceLayerIndex,u.index,ve,[ue,ue,ue,ue],_t,S,Ee,Te,Qe,Y,n,b,k,D,v)};if(ct==="line")for(let ei of vC(n.geometry,0,0,me,me)){let Qt=Gu(ei,ht),Wt=O5(Qt,G,Ze,c.vertical||ie,d,24,Oe,u.overscaling,me);for(let ji of Wt)ie&&B5(u,ie.text,xt,ji)||Vt(Qt,ji)}else if(ct==="line-center"){for(let ei of n.geometry)if(ei.length>1){let Qt=Gu(ei,ht),Wt=R5(Qt,Ze,c.vertical||ie,d,24,Oe);Wt&&Vt(Qt,Wt)}}else if(n.type==="Polygon")for(let ei of Cc(n.geometry,0)){let Qt=N5(ei,16);Vt(Gu(ei[0],ht,!0),new Gc(Qt.x,Qt.y,0))}else if(n.type==="LineString")for(let ei of n.geometry){let Qt=Gu(ei,ht);Vt(Qt,new Gc(Qt[0].x,Qt[0].y,0))}else if(n.type==="Point")for(let ei of n.geometry)for(let Qt of ei)Vt([Qt],new Gc(Qt.x,Qt.y,0))}function PC(u,n,c,d,f,b,v,x,S,k,D,L,j,W,Y){let ie=function(Oe,Ee,G,ue,Te,Ze,_t,Qe){let ct=ue.layout.get("text-rotate").evaluate(Ze,{})*Math.PI/180,xt=[];for(let bt of Ee.positionedLines)for(let wt of bt.positionedGlyphs){if(!wt.rect)continue;let ht=wt.rect||{},Vt=h5+1,ei=!0,Qt=1,Wt=0,ji=(Te||Qe)&&wt.vertical,Vr=wt.metrics.advance*wt.scale/2;if(Qe&&Ee.verticalizable&&(Wt=bt.lineOffset/2-(wt.imageName?-(pn-wt.metrics.width*wt.scale)/2:(wt.scale-1)*pn)),wt.imageName){let kn=_t[wt.imageName];ei=kn.sdf,Qt=kn.pixelRatio,Vt=Zo/Qt}let fn=Te?[wt.x+Vr,wt.y]:[0,0],ro=Te?[0,0]:[wt.x+Vr+G[0],wt.y+G[1]-Wt],ks=[0,0];ji&&(ks=ro,ro=[0,0]);let Xo=wt.metrics.isDoubleResolution?2:1,Hn=(wt.metrics.left-Vt)*wt.scale-Vr+ro[0],Nr=(-wt.metrics.top-Vt)*wt.scale+ro[1],In=Hn+ht.w/Xo*wt.scale/Qt,$n=Nr+ht.h/Xo*wt.scale/Qt,Gn=new R(Hn,Nr),Lo=new R(In,Nr),As=new R(Hn,$n),Pn=new R(In,$n);if(ji){let kn=new R(-Vr,Vr-vg),An=-Math.PI/2,an=pn/2-Vr,Ir=new R(5-vg-an,-(wt.imageName?an:0)),Ua=new R(...ks);Gn._rotateAround(An,kn)._add(Ir)._add(Ua),Lo._rotateAround(An,kn)._add(Ir)._add(Ua),As._rotateAround(An,kn)._add(Ir)._add(Ua),Pn._rotateAround(An,kn)._add(Ir)._add(Ua)}if(ct){let kn=Math.sin(ct),An=Math.cos(ct),an=[An,-kn,kn,An];Gn._matMult(an),Lo._matMult(an),As._matMult(an),Pn._matMult(an)}let Yo=new R(0,0),mn=new R(0,0);xt.push({tl:Gn,tr:Lo,bl:As,br:Pn,tex:ht,writingMode:Ee.writingMode,glyphOffset:fn,sectionIndex:wt.sectionIndex,isSDF:ei,pixelOffsetTL:Yo,pixelOffsetBR:mn,minFontScaleX:0,minFontScaleY:0})}return xt}(0,c,x,f,b,v,d,u.allowVerticalPlacement),he=u.textSizeData,ve=null;he.kind==="source"?(ve=[bl*f.layout.get("text-size").evaluate(v,{})],ve[0]>Hc&&Ar(`${u.layerIds[0]}: Value for "text-size" is >= ${of}. Reduce your "text-size".`)):he.kind==="composite"&&(ve=[bl*W.compositeTextSizes[0].evaluate(v,{},Y),bl*W.compositeTextSizes[1].evaluate(v,{},Y)],(ve[0]>Hc||ve[1]>Hc)&&Ar(`${u.layerIds[0]}: Value for "text-size" is >= ${of}. Reduce your "text-size".`)),u.addSymbols(u.text,ie,ve,x,b,v,k,n,S.lineStartIndex,S.lineLength,j,Y);for(let Oe of D)L[Oe]=u.text.placedSymbolArray.length-1;return 4*ie.length}function kC(u){for(let n in u)return u[n];return null}function B5(u,n,c,d){let f=u.compareText;if(n in f){let b=f[n];for(let v=b.length-1;v>=0;v--)if(d.dist(b[v])<c)return!0}else f[n]=[];return f[n].push(d),!1}let AC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class _v{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[c,d]=new Uint8Array(n,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");let f=d>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);let b=AC[15&d];if(!b)throw new Error("Unrecognized array type.");let[v]=new Uint16Array(n,2,1),[x]=new Uint32Array(n,4,1);return new _v(x,v,b,n)}constructor(n,c=64,d=Float64Array,f){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=d,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;let b=AC.indexOf(this.ArrayType),v=2*n*this.ArrayType.BYTES_PER_ELEMENT,x=n*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-x%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${d}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+x+S,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+v+x+S),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+x+S,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=n)}add(n,c){let d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=n,this.coords[this._pos++]=c,d}finish(){let n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return bv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,c,d,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:b,coords:v,nodeSize:x}=this,S=[0,b.length-1,0],k=[];for(;S.length;){let D=S.pop()||0,L=S.pop()||0,j=S.pop()||0;if(L-j<=x){for(let he=j;he<=L;he++){let ve=v[2*he],Oe=v[2*he+1];ve>=n&&ve<=d&&Oe>=c&&Oe<=f&&k.push(b[he])}continue}let W=j+L>>1,Y=v[2*W],ie=v[2*W+1];Y>=n&&Y<=d&&ie>=c&&ie<=f&&k.push(b[W]),(D===0?n<=Y:c<=ie)&&(S.push(j),S.push(W-1),S.push(1-D)),(D===0?d>=Y:f>=ie)&&(S.push(W+1),S.push(L),S.push(1-D))}return k}within(n,c,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:f,coords:b,nodeSize:v}=this,x=[0,f.length-1,0],S=[],k=d*d;for(;x.length;){let D=x.pop()||0,L=x.pop()||0,j=x.pop()||0;if(L-j<=v){for(let he=j;he<=L;he++)RC(b[2*he],b[2*he+1],n,c)<=k&&S.push(f[he]);continue}let W=j+L>>1,Y=b[2*W],ie=b[2*W+1];RC(Y,ie,n,c)<=k&&S.push(f[W]),(D===0?n-d<=Y:c-d<=ie)&&(x.push(j),x.push(W-1),x.push(1-D)),(D===0?n+d>=Y:c+d>=ie)&&(x.push(W+1),x.push(L),x.push(1-D))}return S}}function bv(u,n,c,d,f,b){if(f-d<=c)return;let v=d+f>>1;DC(u,n,v,d,f,b),bv(u,n,c,d,v-1,1-b),bv(u,n,c,v+1,f,1-b)}function DC(u,n,c,d,f,b){for(;f>d;){if(f-d>600){let k=f-d+1,D=c-d+1,L=Math.log(k),j=.5*Math.exp(2*L/3),W=.5*Math.sqrt(L*j*(k-j)/k)*(D-k/2<0?-1:1);DC(u,n,c,Math.max(d,Math.floor(c-D*j/k+W)),Math.min(f,Math.floor(c+(k-D)*j/k+W)),b)}let v=n[2*c+b],x=d,S=f;for(lf(u,n,d,c),n[2*f+b]>v&&lf(u,n,d,f);x<S;){for(lf(u,n,x,S),x++,S--;n[2*x+b]<v;)x++;for(;n[2*S+b]>v;)S--}n[2*d+b]===v?lf(u,n,d,S):(S++,lf(u,n,S,f)),S<=c&&(d=S+1),c<=S&&(f=S-1)}}function lf(u,n,c,d){vv(u,c,d),vv(n,2*c,2*d),vv(n,2*c+1,2*d+1)}function vv(u,n,c){let d=u[n];u[n]=u[c],u[c]=d}function RC(u,n,c,d){let f=u-c,b=n-d;return f*f+b*b}var yv;a.co=void 0,(yv=a.co||(a.co={})).create="create",yv.load="load",yv.fullLoad="fullLoad";let Ig=null,cf=[],xv=1e3/60,wv="loadTime",Cv="fullLoadTime",V5={mark(u){performance.mark(u)},frame(u){let n=u;Ig!=null&&cf.push(n-Ig),Ig=n},clearMetrics(){Ig=null,cf=[],performance.clearMeasures(wv),performance.clearMeasures(Cv);for(let u in a.co)performance.clearMarks(a.co[u])},getPerformanceMetrics(){performance.measure(wv,a.co.create,a.co.load),performance.measure(Cv,a.co.create,a.co.fullLoad);let u=performance.getEntriesByName(wv)[0].duration,n=performance.getEntriesByName(Cv)[0].duration,c=cf.length,d=1/(cf.reduce((b,v)=>b+v,0)/c/1e3),f=cf.filter(b=>b>xv).reduce((b,v)=>b+(v-xv)/xv,0);return{loadTime:u,fullLoadTime:n,fps:d,percentDroppedFrames:f/(c+f)*100,totalFrames:c}}};a.$=sf,a.A=de,a.B=ns,a.C=Tr,a.D=Zt,a.E=xe,a.F=Pb,a.G=function(u){if(Gs==null){let n=u.navigator?u.navigator.userAgent:null;Gs=!!u.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Gs},a.H=class{constructor(u,n){this.target=u,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new k5(()=>this.process()),this.subscription=ys(this.target,"message",c=>this.receive(c),!1),this.globalScope=ao(self)?u:window}registerMessageHandler(u,n){this.messageHandlers[u]=n}sendAsync(u,n){return new Promise((c,d)=>{let f=Math.round(1e18*Math.random()).toString(36).substring(0,10),b=n?ys(n.signal,"abort",()=>{b?.unsubscribe(),delete this.resolveRejects[f];let S={id:f,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},A5):null;this.resolveRejects[f]={resolve:S=>{b?.unsubscribe(),c(S)},reject:S=>{b?.unsubscribe(),d(S)}};let v=[],x=Object.assign(Object.assign({},u),{id:f,sourceMapId:this.mapId,origin:location.origin,data:Vc(u.data,v)});this.target.postMessage(x,{transfer:v})})}receive(u){let n=u.data,c=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[c];let d=this.abortControllers[c];return delete this.abortControllers[c],void(d&&d.abort())}if(ao(self)||n.mustQueue)return this.tasks[c]=n,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,n)}}process(){if(this.taskQueue.length===0)return;let u=this.taskQueue.shift(),n=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(u,n)}processTask(u,n){return s(this,void 0,void 0,function*(){if(n.type==="<response>"){let f=this.resolveRejects[u];return delete this.resolveRejects[u],f?void(n.error?f.reject(Ou(n.error)):f.resolve(Ou(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let c=Ou(n.data),d=new AbortController;this.abortControllers[u]=d;try{let f=yield this.messageHandlers[n.type](n.sourceMapId,c,d);this.completeTask(u,null,f)}catch(f){this.completeTask(u,f)}})}completeTask(u,n,c){let d=[];delete this.abortControllers[u];let f={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Vc(n):null,data:Vc(c,d)};this.target.postMessage(f,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.I=nv,a.J=il,a.K=function(){var u=new de(16);return de!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},a.L=function(u,n,c){var d,f,b,v,x,S,k,D,L,j,W,Y,ie=c[0],he=c[1],ve=c[2];return n===u?(u[12]=n[0]*ie+n[4]*he+n[8]*ve+n[12],u[13]=n[1]*ie+n[5]*he+n[9]*ve+n[13],u[14]=n[2]*ie+n[6]*he+n[10]*ve+n[14],u[15]=n[3]*ie+n[7]*he+n[11]*ve+n[15]):(f=n[1],b=n[2],v=n[3],x=n[4],S=n[5],k=n[6],D=n[7],L=n[8],j=n[9],W=n[10],Y=n[11],u[0]=d=n[0],u[1]=f,u[2]=b,u[3]=v,u[4]=x,u[5]=S,u[6]=k,u[7]=D,u[8]=L,u[9]=j,u[10]=W,u[11]=Y,u[12]=d*ie+x*he+L*ve+n[12],u[13]=f*ie+S*he+j*ve+n[13],u[14]=b*ie+k*he+W*ve+n[14],u[15]=v*ie+D*he+Y*ve+n[15]),u},a.M=function(u,n,c){var d=c[0],f=c[1],b=c[2];return u[0]=n[0]*d,u[1]=n[1]*d,u[2]=n[2]*d,u[3]=n[3]*d,u[4]=n[4]*f,u[5]=n[5]*f,u[6]=n[6]*f,u[7]=n[7]*f,u[8]=n[8]*b,u[9]=n[9]*b,u[10]=n[10]*b,u[11]=n[11]*b,u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15],u},a.N=function(u,n,c){var d=n[0],f=n[1],b=n[2],v=n[3],x=n[4],S=n[5],k=n[6],D=n[7],L=n[8],j=n[9],W=n[10],Y=n[11],ie=n[12],he=n[13],ve=n[14],Oe=n[15],Ee=c[0],G=c[1],ue=c[2],Te=c[3];return u[0]=Ee*d+G*x+ue*L+Te*ie,u[1]=Ee*f+G*S+ue*j+Te*he,u[2]=Ee*b+G*k+ue*W+Te*ve,u[3]=Ee*v+G*D+ue*Y+Te*Oe,u[4]=(Ee=c[4])*d+(G=c[5])*x+(ue=c[6])*L+(Te=c[7])*ie,u[5]=Ee*f+G*S+ue*j+Te*he,u[6]=Ee*b+G*k+ue*W+Te*ve,u[7]=Ee*v+G*D+ue*Y+Te*Oe,u[8]=(Ee=c[8])*d+(G=c[9])*x+(ue=c[10])*L+(Te=c[11])*ie,u[9]=Ee*f+G*S+ue*j+Te*he,u[10]=Ee*b+G*k+ue*W+Te*ve,u[11]=Ee*v+G*D+ue*Y+Te*Oe,u[12]=(Ee=c[12])*d+(G=c[13])*x+(ue=c[14])*L+(Te=c[15])*ie,u[13]=Ee*f+G*S+ue*j+Te*he,u[14]=Ee*b+G*k+ue*W+Te*ve,u[15]=Ee*v+G*D+ue*Y+Te*Oe,u},a.O=function(u,n){let c={};for(let d=0;d<n.length;d++){let f=n[d];f in u&&(c[f]=u[f])}return c},a.P=R,a.Q=$c,a.R=Is,a.S=lC,a.T=sg,a.U=aC,a.V=ae,a.W=ne,a.X=el,a.Y=Ps,a.Z=me,a._=s,a.a=ts,a.a$=function(u,n,c){var d=Math.sin(c),f=Math.cos(c),b=n[4],v=n[5],x=n[6],S=n[7],k=n[8],D=n[9],L=n[10],j=n[11];return n!==u&&(u[0]=n[0],u[1]=n[1],u[2]=n[2],u[3]=n[3],u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15]),u[4]=b*f+k*d,u[5]=v*f+D*d,u[6]=x*f+L*d,u[7]=S*f+j*d,u[8]=k*f-b*d,u[9]=D*f-v*d,u[10]=L*f-x*d,u[11]=j*f-S*d,u},a.a0=25,a.a1=fv,a.a2=u=>{let n=window.document.createElement("video");return n.muted=!0,new Promise(c=>{n.onloadstart=()=>{c(n)};for(let d of u){let f=window.document.createElement("source");qe(d)||(n.crossOrigin="Anonymous"),f.src=d,n.appendChild(f)}})},a.a3=$e,a.a4=function(){return Hr++},a.a5=be,a.a6=ah,a.a7=ku,a.a8=qu,a.a9=mC,a.aA=function(u,n,c,d,f=!1){if(!c[0]&&!c[1])return[0,0];let b=f?d==="map"?-u.bearingInRadians:0:d==="viewport"?u.bearingInRadians:0;if(b){let v=Math.sin(b),x=Math.cos(b);c=[c[0]*x-c[1]*v,c[0]*v+c[1]*x]}return[f?c[0]:Ue(n,c[0],u.zoom),f?c[1]:Ue(n,c[1],u.zoom)]},a.aC=av,a.aD=gv,a.aE=sv,a.aF=_v,a.aG=Dr,a.aH=gg,a.aI=lt,a.aJ=or,a.aK=nr,a.aL=Dt,a.aM=Fn,a.aN=uC,a.aO=function(u,n,c){return u[0]=n[0]*c,u[1]=n[1]*c,u[2]=n[2]*c,u},a.aP=function(u,n,c){return u[0]=n[0]+c[0],u[1]=n[1]+c[1],u[2]=n[2]+c[2],u},a.aQ=function(u){var n=new de(3);return n[0]=u[0],n[1]=u[1],n[2]=u[2],n},a.aR=function(u,n,c){return u[0]=n[0]*c[0],u[1]=n[1]*c[1],u[2]=n[2]*c[2],u[3]=n[3]*c[3],u},a.aS=function(u,n,c){return u[0]=n[0]-c[0],u[1]=n[1]-c[1],u[2]=n[2]-c[2],u},a.aT=function(u,n){var c=n[0],d=n[1],f=n[2],b=c*c+d*d+f*f;return b>0&&(b=1/Math.sqrt(b)),u[0]=n[0]*b,u[1]=n[1]*b,u[2]=n[2]*b,u},a.aU=function(u,n,c){var d=n[0],f=n[1],b=n[2],v=c[0],x=c[1],S=c[2];return u[0]=f*S-b*x,u[1]=b*v-d*S,u[2]=d*x-f*v,u},a.aV=function(u,n){return u[0]*n[0]+u[1]*n[1]+u[2]*n[2]},a.aW=hC,a.aX=lh,a.aY=function(u,n,c,d,f){var b,v=1/Math.tan(n/2);return u[0]=v/c,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=v,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,f!=null&&f!==1/0?(u[10]=(f+d)*(b=1/(d-f)),u[14]=2*f*d*b):(u[10]=-1,u[14]=-2*d),u},a.aZ=function(u){var n=new de(16);return n[0]=u[0],n[1]=u[1],n[2]=u[2],n[3]=u[3],n[4]=u[4],n[5]=u[5],n[6]=u[6],n[7]=u[7],n[8]=u[8],n[9]=u[9],n[10]=u[10],n[11]=u[11],n[12]=u[12],n[13]=u[13],n[14]=u[14],n[15]=u[15],n},a.a_=function(u,n,c){var d=Math.sin(c),f=Math.cos(c),b=n[0],v=n[1],x=n[2],S=n[3],k=n[4],D=n[5],L=n[6],j=n[7];return n!==u&&(u[8]=n[8],u[9]=n[9],u[10]=n[10],u[11]=n[11],u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15]),u[0]=b*f+k*d,u[1]=v*f+D*d,u[2]=x*f+L*d,u[3]=S*f+j*d,u[4]=k*f-b*d,u[5]=D*f-v*d,u[6]=L*f-x*d,u[7]=j*f-S*d,u},a.aa=function(u){let n={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,d,f,b)=>{let v=f||b;return n[d]=!v||v.toLowerCase(),""}),n["max-age"]){let c=parseInt(n["max-age"],10);isNaN(c)?delete n["max-age"]:n["max-age"]=c}return n},a.ab=Ea,a.ac=function(u){return Math.pow(2,u)},a.ad=Ve,a.ae=Ne,a.af=85.051129,a.ag=cC,a.ah=function(u){return Math.log(u)/Math.LN2},a.ai=function(u){var n=u[0],c=u[1];return n*n+c*c},a.aj=function(u,n){let c=[];for(let d in u)d in n||c.push(d);return c},a.ak=function(u,n){let c=0,d=0;if(u.kind==="constant")d=u.layoutSize;else if(u.kind!=="source"){let{interpolationType:f,minZoom:b,maxZoom:v}=u,x=f?Ne(Tn.interpolationFactor(f,n,b,v),0,1):0;u.kind==="camera"?d=ns.number(u.minSize,u.maxSize,x):c=x}return{uSizeT:c,uSize:d}},a.am=function(u,{uSize:n,uSizeT:c},{lowerSize:d,upperSize:f}){return u.kind==="source"?d/bl:u.kind==="composite"?ns.number(d/bl,f/bl,c):n},a.an=function(u,n){var c=n[0],d=n[1],f=n[2],b=n[3],v=n[4],x=n[5],S=n[6],k=n[7],D=n[8],L=n[9],j=n[10],W=n[11],Y=n[12],ie=n[13],he=n[14],ve=n[15],Oe=c*x-d*v,Ee=c*S-f*v,G=c*k-b*v,ue=d*S-f*x,Te=d*k-b*x,Ze=f*k-b*S,_t=D*ie-L*Y,Qe=D*he-j*Y,ct=D*ve-W*Y,xt=L*he-j*ie,bt=L*ve-W*ie,wt=j*ve-W*he,ht=Oe*wt-Ee*bt+G*xt+ue*ct-Te*Qe+Ze*_t;return ht?(u[0]=(x*wt-S*bt+k*xt)*(ht=1/ht),u[1]=(f*bt-d*wt-b*xt)*ht,u[2]=(ie*Ze-he*Te+ve*ue)*ht,u[3]=(j*Te-L*Ze-W*ue)*ht,u[4]=(S*ct-v*wt-k*Qe)*ht,u[5]=(c*wt-f*ct+b*Qe)*ht,u[6]=(he*G-Y*Ze-ve*Ee)*ht,u[7]=(D*Ze-j*G+W*Ee)*ht,u[8]=(v*bt-x*ct+k*_t)*ht,u[9]=(d*ct-c*bt-b*_t)*ht,u[10]=(Y*Te-ie*G+ve*Oe)*ht,u[11]=(L*G-D*Te-W*Oe)*ht,u[12]=(x*Qe-v*xt-S*_t)*ht,u[13]=(c*xt-d*Qe+f*_t)*ht,u[14]=(ie*Ee-Y*ue-he*Oe)*ht,u[15]=(D*ue-L*Ee+j*Oe)*ht,u):null},a.ao=te,a.ap=function(u){return Math.hypot(u[0],u[1])},a.aq=function(u){return u[0]=0,u[1]=0,u},a.ar=function(u,n,c){return u[0]=n[0]*c,u[1]=n[1]*c,u},a.as=lv,a.at=yt,a.au=function(u,n,c,d){let f=n.y-u.y,b=n.x-u.x,v=d.y-c.y,x=d.x-c.x,S=v*b-x*f;if(S===0)return null;let k=(x*(u.y-c.y)-v*(u.x-c.x))/S;return new R(u.x+k*b,u.y+k*f)},a.av=vC,a.aw=n2,a.ax=function(u){let n=1/0,c=1/0,d=-1/0,f=-1/0;for(let b of u)n=Math.min(n,b.x),c=Math.min(c,b.y),d=Math.max(d,b.x),f=Math.max(f,b.y);return[n,c,d,f]},a.ay=pn,a.az=Ue,a.b=lo,a.b$=class extends ee{},a.b0=function(){let u=new Float32Array(16);return Ve(u),u},a.b1=function(){let u=new Float64Array(16);return Ve(u),u},a.b2=function(){return new Float64Array(16)},a.b3=function(u,n,c){let d=new Float64Array(4);return function(f,b,v,x){var S=.5*Math.PI/180;b*=S,v*=S,x*=S;var k=Math.sin(b),D=Math.cos(b),L=Math.sin(v),j=Math.cos(v),W=Math.sin(x),Y=Math.cos(x);f[0]=k*j*Y-D*L*W,f[1]=D*L*Y+k*j*W,f[2]=D*j*W-k*L*Y,f[3]=D*j*Y+k*L*W}(d,u,n-90,c),d},a.b4=function(u,n,c,d){var f,b,v,x,S,k=n[0],D=n[1],L=n[2],j=n[3],W=c[0],Y=c[1],ie=c[2],he=c[3];return(b=k*W+D*Y+L*ie+j*he)<0&&(b=-b,W=-W,Y=-Y,ie=-ie,he=-he),1-b>re?(f=Math.acos(b),v=Math.sin(f),x=Math.sin((1-d)*f)/v,S=Math.sin(d*f)/v):(x=1-d,S=d),u[0]=x*k+S*W,u[1]=x*D+S*Y,u[2]=x*L+S*ie,u[3]=x*j+S*he,u},a.b5=function(u){let n=new Float64Array(9);var c,d,f,b,v,x,S,k,D,L,j,W,Y,ie,he,ve,Oe,Ee;L=(f=(d=u)[0])*(S=f+f),j=(b=d[1])*S,Y=(v=d[2])*S,ie=v*(k=b+b),ve=(x=d[3])*S,Oe=x*k,Ee=x*(D=v+v),(c=n)[0]=1-(W=b*k)-(he=v*D),c[3]=j-Ee,c[6]=Y+Oe,c[1]=j+Ee,c[4]=1-L-he,c[7]=ie-ve,c[2]=Y-Oe,c[5]=ie+ve,c[8]=1-L-W;let G=Fn(-Math.asin(Ne(n[2],-1,1))),ue,Te;return Math.hypot(n[5],n[8])<.001?(ue=0,Te=-Fn(Math.atan2(n[3],n[4]))):(ue=Fn(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),Te=Fn(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:ue,pitch:G+90,bearing:Te}},a.b6=function(u,n){return u.roll==n.roll&&u.pitch==n.pitch&&u.bearing==n.bearing},a.b7=vi,a.b8=th,a.b9=oh,a.bA=function(u){if(u.type==="custom")return new P5(u);switch(u.type){case"background":return new T5(u);case"circle":return new x3(u);case"fill":return new V3(u);case"fill-extrusion":return new Z3(u);case"heatmap":return new C3(u);case"hillshade":return new S3(u);case"line":return new i5(u);case"raster":return new I5(u);case"symbol":return new Cg(u)}},a.bB=Ln,a.bC=function(u,n){if(!u)return[{command:"setStyle",args:[n]}];let c=[];try{if(!He(u.version,n.version))return[{command:"setStyle",args:[n]}];He(u.center,n.center)||c.push({command:"setCenter",args:[n.center]}),He(u.state,n.state)||c.push({command:"setGlobalState",args:[n.state]}),He(u.centerAltitude,n.centerAltitude)||c.push({command:"setCenterAltitude",args:[n.centerAltitude]}),He(u.zoom,n.zoom)||c.push({command:"setZoom",args:[n.zoom]}),He(u.bearing,n.bearing)||c.push({command:"setBearing",args:[n.bearing]}),He(u.pitch,n.pitch)||c.push({command:"setPitch",args:[n.pitch]}),He(u.roll,n.roll)||c.push({command:"setRoll",args:[n.roll]}),He(u.sprite,n.sprite)||c.push({command:"setSprite",args:[n.sprite]}),He(u.glyphs,n.glyphs)||c.push({command:"setGlyphs",args:[n.glyphs]}),He(u.transition,n.transition)||c.push({command:"setTransition",args:[n.transition]}),He(u.light,n.light)||c.push({command:"setLight",args:[n.light]}),He(u.terrain,n.terrain)||c.push({command:"setTerrain",args:[n.terrain]}),He(u.sky,n.sky)||c.push({command:"setSky",args:[n.sky]}),He(u.projection,n.projection)||c.push({command:"setProjection",args:[n.projection]});let d={},f=[];(function(v,x,S,k){let D;for(D in x=x||{},v=v||{})Object.prototype.hasOwnProperty.call(v,D)&&(Object.prototype.hasOwnProperty.call(x,D)||pt(D,S,k));for(D in x)Object.prototype.hasOwnProperty.call(x,D)&&(Object.prototype.hasOwnProperty.call(v,D)?He(v[D],x[D])||(v[D].type==="geojson"&&x[D].type==="geojson"&&It(v,x,D)?Xe(S,{command:"setGeoJSONSourceData",args:[D,x[D].data]}):St(D,x,S,k)):je(D,x,S))})(u.sources,n.sources,f,d);let b=[];u.layers&&u.layers.forEach(v=>{"source"in v&&d[v.source]?c.push({command:"removeLayer",args:[v.id]}):b.push(v)}),c=c.concat(f),function(v,x,S){x=x||[];let k=(v=v||[]).map(li),D=x.map(li),L=v.reduce(Ft,{}),j=x.reduce(Ft,{}),W=k.slice(),Y=Object.create(null),ie,he,ve,Oe,Ee;for(let G=0,ue=0;G<k.length;G++)ie=k[G],Object.prototype.hasOwnProperty.call(j,ie)?ue++:(Xe(S,{command:"removeLayer",args:[ie]}),W.splice(W.indexOf(ie,ue),1));for(let G=0,ue=0;G<D.length;G++)ie=D[D.length-1-G],W[W.length-1-G]!==ie&&(Object.prototype.hasOwnProperty.call(L,ie)?(Xe(S,{command:"removeLayer",args:[ie]}),W.splice(W.lastIndexOf(ie,W.length-ue),1)):ue++,Oe=W[W.length-G],Xe(S,{command:"addLayer",args:[j[ie],Oe]}),W.splice(W.length-G,0,ie),Y[ie]=!0);for(let G=0;G<D.length;G++)if(ie=D[G],he=L[ie],ve=j[ie],!Y[ie]&&!He(he,ve))if(He(he.source,ve.source)&&He(he["source-layer"],ve["source-layer"])&&He(he.type,ve.type)){for(Ee in ke(he.layout,ve.layout,S,ie,null,"setLayoutProperty"),ke(he.paint,ve.paint,S,ie,null,"setPaintProperty"),He(he.filter,ve.filter)||Xe(S,{command:"setFilter",args:[ie,ve.filter]}),He(he.minzoom,ve.minzoom)&&He(he.maxzoom,ve.maxzoom)||Xe(S,{command:"setLayerZoomRange",args:[ie,ve.minzoom,ve.maxzoom]}),he)Object.prototype.hasOwnProperty.call(he,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?ke(he[Ee],ve[Ee],S,ie,Ee.slice(6),"setPaintProperty"):He(he[Ee],ve[Ee])||Xe(S,{command:"setLayerProperty",args:[ie,Ee,ve[Ee]]}));for(Ee in ve)Object.prototype.hasOwnProperty.call(ve,Ee)&&!Object.prototype.hasOwnProperty.call(he,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?ke(he[Ee],ve[Ee],S,ie,Ee.slice(6),"setPaintProperty"):He(he[Ee],ve[Ee])||Xe(S,{command:"setLayerProperty",args:[ie,Ee,ve[Ee]]}))}else Xe(S,{command:"removeLayer",args:[ie]}),Oe=W[W.lastIndexOf(ie)+1],Xe(S,{command:"addLayer",args:[ve,Oe]})}(b,n.layers,c)}catch(d){console.warn("Unable to compute style diff:",d),c=[{command:"setStyle",args:[n]}]}return c},a.bD=function(u){let n=[],c=u.id;return c===void 0&&n.push({message:`layers.${c}: missing required property "id"`}),u.render===void 0&&n.push({message:`layers.${c}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&n.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),n},a.bE=function u(n,c){if(Array.isArray(n)){if(!Array.isArray(c)||n.length!==c.length)return!1;for(let d=0;d<n.length;d++)if(!u(n[d],c[d]))return!1;return!0}if(typeof n=="object"&&n!==null&&c!==null){if(typeof c!="object"||Object.keys(n).length!==Object.keys(c).length)return!1;for(let d in n)if(!u(n[d],c[d]))return!1;return!0}return n===c},a.bF=Uo,a.bG=Ca,a.bH=class extends Mr{constructor(u,n){super(u,n),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},a.bI=dg,a.bJ=class extends Mr{constructor(u,n){super(u,n),this.current=Lb}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let n=1;n<16;n++)if(u[n]!==this.current[n]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},a.bK=ug,a.bL=class extends Mr{constructor(u,n){super(u,n),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},a.bM=class extends Mr{constructor(u,n){super(u,n),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},a.bN=oe,a.bO=function(u,n){var c=Math.sin(n),d=Math.cos(n);return u[0]=d,u[1]=c,u[2]=0,u[3]=-c,u[4]=d,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},a.bP=function(u,n,c){var d=n[0],f=n[1],b=n[2];return u[0]=d*c[0]+f*c[3]+b*c[6],u[1]=d*c[1]+f*c[4]+b*c[7],u[2]=d*c[2]+f*c[5]+b*c[8],u},a.bQ=function(u,n,c,d,f,b,v){var x=1/(n-c),S=1/(d-f),k=1/(b-v);return u[0]=-2*x,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*S,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*k,u[11]=0,u[12]=(n+c)*x,u[13]=(f+d)*S,u[14]=(v+b)*k,u[15]=1,u},a.bR=class extends Mr{constructor(u,n){super(u,n),this.current=new Array}set(u){if(u!=this.current){this.current=u;let n=new Float32Array(4*u.length);for(let c=0;c<u.length;c++)n[4*c]=u[c].r,n[4*c+1]=u[c].g,n[4*c+2]=u[c].b,n[4*c+3]=u[c].a;this.gl.uniform4fv(this.location,n)}}},a.bS=class extends Mr{constructor(u,n){super(u,n),this.current=new Array}set(u){if(u!=this.current){this.current=u;let n=new Float32Array(u);this.gl.uniform1fv(this.location,n)}}},a.bT=class extends g{},a.bU=s5,a.bV=class extends E{},a.bW=jb,a.bX=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},a.bY=f2,a.bZ=function(u,n,c){var d=n[0],f=n[1],b=n[2],v=c[3]*d+c[7]*f+c[11]*b+c[15];return u[0]=(c[0]*d+c[4]*f+c[8]*b+c[12])/(v=v||1),u[1]=(c[1]*d+c[5]*f+c[9]*b+c[13])/v,u[2]=(c[2]*d+c[6]*f+c[10]*b+c[14])/v,u},a.b_=class extends Zl{},a.ba=Kp,a.bb=nh,a.bc=Rt,a.bd=Ut,a.be=En,a.bf=function(u,n,c,d,f){return Rt(d,f,Ne((u-n)/(c-n),0,1))},a.bg=ot,a.bh=function(){return new Float64Array(3)},a.bi=function(u,n,c,d){return u[0]=n[0]+c[0]*d,u[1]=n[1]+c[1]*d,u[2]=n[2]+c[2]*d,u},a.bj=Ge,a.bk=function(){return new Float64Array(4)},a.bl=function(u,n,c,d){var f=[],b=[];return f[0]=n[0]-c[0],f[1]=n[1]-c[1],f[2]=n[2]-c[2],b[0]=f[0]*Math.cos(d)-f[1]*Math.sin(d),b[1]=f[0]*Math.sin(d)+f[1]*Math.cos(d),b[2]=f[2],u[0]=b[0]+c[0],u[1]=b[1]+c[1],u[2]=b[2]+c[2],u},a.bm=function(u,n,c,d){var f=[],b=[];return f[0]=n[0]-c[0],f[1]=n[1]-c[1],f[2]=n[2]-c[2],b[0]=f[0],b[1]=f[1]*Math.cos(d)-f[2]*Math.sin(d),b[2]=f[1]*Math.sin(d)+f[2]*Math.cos(d),u[0]=b[0]+c[0],u[1]=b[1]+c[1],u[2]=b[2]+c[2],u},a.bn=function(u,n,c,d){var f=[],b=[];return f[0]=n[0]-c[0],f[1]=n[1]-c[1],f[2]=n[2]-c[2],b[0]=f[2]*Math.sin(d)+f[0]*Math.cos(d),b[1]=f[1],b[2]=f[2]*Math.cos(d)-f[0]*Math.sin(d),u[0]=b[0]+c[0],u[1]=b[1]+c[1],u[2]=b[2]+c[2],u},a.bo=dt,a.bp=function(u,n,c){var d=Math.sin(c),f=Math.cos(c),b=n[0],v=n[1],x=n[2],S=n[3],k=n[8],D=n[9],L=n[10],j=n[11];return n!==u&&(u[4]=n[4],u[5]=n[5],u[6]=n[6],u[7]=n[7],u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15]),u[0]=b*f-k*d,u[1]=v*f-D*d,u[2]=x*f-L*d,u[3]=S*f-j*d,u[8]=b*d+k*f,u[9]=v*d+D*f,u[10]=x*d+L*f,u[11]=S*d+j*f,u},a.bq=function(u,n){let c=ot(u,360),d=ot(n,360),f=d-c,b=d>c?f-360:f+360;return Math.abs(f)<Math.abs(b)?f:b},a.br=function(u){return u[0]=0,u[1]=0,u[2]=0,u},a.bs=function(u,n,c,d){let f=Math.sqrt(u*u+n*n),b=Math.sqrt(c*c+d*d);u/=f,n/=f,c/=b,d/=b;let v=Math.acos(u*c+n*d);return-n*c+u*d>0?v:-v},a.bt=function(u,n){return u[0]*n[0]+u[1]*n[1]+u[2]*n[2]+u[3]},a.bu=hv,a.bv=function(u,n){let c=ot(u,2*Math.PI),d=ot(n,2*Math.PI);return Math.min(Math.abs(c-d),Math.abs(c-d+2*Math.PI),Math.abs(c-d-2*Math.PI))},a.bw=function(){let u={},n=se.$version;for(let c in se.$root){let d=se.$root[c];if(d.required){let f=null;f=c==="version"?n:d.type==="array"?[]:{},f!=null&&(u[c]=f)}}return u},a.bx=Rp,a.by=zn,a.bz=function(u){u=u.slice();let n=Object.create(null);for(let c=0;c<u.length;c++)n[u[c].id]=u[c];for(let c=0;c<u.length;c++)"ref"in u[c]&&(u[c]=Be(u[c],n[u[c].ref]));return u},a.c=zi,a.c0=function(u,n){return u[0]===n[0]&&u[1]===n[1]&&u[2]===n[2]&&u[3]===n[3]&&u[4]===n[4]&&u[5]===n[5]&&u[6]===n[6]&&u[7]===n[7]&&u[8]===n[8]&&u[9]===n[9]&&u[10]===n[10]&&u[11]===n[11]&&u[12]===n[12]&&u[13]===n[13]&&u[14]===n[14]&&u[15]===n[15]},a.c1=function(u,n){var c=u[0],d=u[1],f=u[2],b=u[3],v=u[4],x=u[5],S=u[6],k=u[7],D=u[8],L=u[9],j=u[10],W=u[11],Y=u[12],ie=u[13],he=u[14],ve=u[15],Oe=n[0],Ee=n[1],G=n[2],ue=n[3],Te=n[4],Ze=n[5],_t=n[6],Qe=n[7],ct=n[8],xt=n[9],bt=n[10],wt=n[11],ht=n[12],Vt=n[13],ei=n[14],Qt=n[15];return Math.abs(c-Oe)<=re*Math.max(1,Math.abs(c),Math.abs(Oe))&&Math.abs(d-Ee)<=re*Math.max(1,Math.abs(d),Math.abs(Ee))&&Math.abs(f-G)<=re*Math.max(1,Math.abs(f),Math.abs(G))&&Math.abs(b-ue)<=re*Math.max(1,Math.abs(b),Math.abs(ue))&&Math.abs(v-Te)<=re*Math.max(1,Math.abs(v),Math.abs(Te))&&Math.abs(x-Ze)<=re*Math.max(1,Math.abs(x),Math.abs(Ze))&&Math.abs(S-_t)<=re*Math.max(1,Math.abs(S),Math.abs(_t))&&Math.abs(k-Qe)<=re*Math.max(1,Math.abs(k),Math.abs(Qe))&&Math.abs(D-ct)<=re*Math.max(1,Math.abs(D),Math.abs(ct))&&Math.abs(L-xt)<=re*Math.max(1,Math.abs(L),Math.abs(xt))&&Math.abs(j-bt)<=re*Math.max(1,Math.abs(j),Math.abs(bt))&&Math.abs(W-wt)<=re*Math.max(1,Math.abs(W),Math.abs(wt))&&Math.abs(Y-ht)<=re*Math.max(1,Math.abs(Y),Math.abs(ht))&&Math.abs(ie-Vt)<=re*Math.max(1,Math.abs(ie),Math.abs(Vt))&&Math.abs(he-ei)<=re*Math.max(1,Math.abs(he),Math.abs(ei))&&Math.abs(ve-Qt)<=re*Math.max(1,Math.abs(ve),Math.abs(Qt))},a.c2=function(u,n){return u[0]=n[0],u[1]=n[1],u[2]=n[2],u[3]=n[3],u[4]=n[4],u[5]=n[5],u[6]=n[6],u[7]=n[7],u[8]=n[8],u[9]=n[9],u[10]=n[10],u[11]=n[11],u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15],u},a.c3=u=>u.type==="symbol",a.c4=u=>u.type==="circle",a.c5=u=>u.type==="heatmap",a.c6=u=>u.type==="line",a.c7=u=>u.type==="fill",a.c8=u=>u.type==="fill-extrusion",a.c9=u=>u.type==="hillshade",a.cA=Wb,a.cB=Qb,a.cC=Jp,a.cD=iv,a.cE=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},a.cF=function(u,n,c,d,f){return s(this,void 0,void 0,function*(){if(ne())try{return yield el(u,n,c,d,f)}catch{}return function(b,v,x,S,k){let D=b.width,L=b.height;Qn&&co||(Qn=new OffscreenCanvas(D,L),co=Qn.getContext("2d",{willReadFrequently:!0})),Qn.width=D,Qn.height=L,co.drawImage(b,0,0,D,L);let j=co.getImageData(v,x,S,k);return co.clearRect(0,0,D,L),j.data}(u,n,c,d,f)})},a.cG=pC,a.cH=_,a.cI=T,a.cJ=A2,a.cK=q2,a.cL=br,a.cM=za,a.ca=u=>u.type==="raster",a.cb=u=>u.type==="background",a.cc=u=>u.type==="custom",a.cd=Fi,a.ce=function(u,n,c){let d=V(n.x-c.x,n.y-c.y),f=V(u.x-c.x,u.y-c.y);var b,v;return Fn(Math.atan2(d[0]*f[1]-d[1]*f[0],(b=d)[0]*(v=f)[0]+b[1]*v[1]))},a.cf=Pe,a.cg=function(u,n){return zr[n]&&(u instanceof MouseEvent||u instanceof WheelEvent)},a.ch=function(u,n){return xs[n]&&"touches"in u},a.ci=function(u){return xs[u]||zr[u]},a.cj=function(u,n,c){var d=n[0],f=n[1];return u[0]=c[0]*d+c[4]*f+c[12],u[1]=c[1]*d+c[5]*f+c[13],u},a.ck=function(u,n){let{x:c,y:d}=sf.fromLngLat(n);return!(u<0||u>25||d<0||d>=1||c<0||c>=1)},a.cl=function(u,n){return u[0]=n[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=n[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=n[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},a.cm=class extends Bu{},a.cn=V5,a.cp=function(u){return u.message===tl},a.cq=uo,a.cr=function(u,n){ts.REGISTERED_PROTOCOLS[u]=n},a.cs=function(u){delete ts.REGISTERED_PROTOCOLS[u]},a.ct=function(u,n){let c={};for(let f=0;f<u.length;f++){let b=n&&n[u[f].id]||Xm(u[f]);n&&(n[u[f].id]=b);let v=c[b];v||(v=c[b]=[]),v.push(u[f])}let d=[];for(let f in c)d.push(c[f]);return d},a.cu=Lt,a.cv=fC,a.cw=gC,a.cx=$2,a.cy=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=me/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;let n=u.bucket.layers[0],c=n.layout,d=n._unevaluatedLayout._values,f={layoutIconSize:d["icon-size"].possiblyEvaluate(new Tr(u.bucket.zoom+1),u.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Tr(u.bucket.zoom+1),u.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Tr(18))};if(u.bucket.textSizeData.kind==="composite"){let{minZoom:k,maxZoom:D}=u.bucket.textSizeData;f.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Tr(k),u.canonical),d["text-size"].possiblyEvaluate(new Tr(D),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){let{minZoom:k,maxZoom:D}=u.bucket.iconSizeData;f.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Tr(k),u.canonical),d["icon-size"].possiblyEvaluate(new Tr(D),u.canonical)]}let b=c.get("text-line-height")*pn,v=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",x=c.get("text-keep-upright"),S=c.get("text-size");for(let k of u.bucket.features){let D=c.get("text-font").evaluate(k,{},u.canonical).join(","),L=S.evaluate(k,{},u.canonical),j=f.layoutTextSize.evaluate(k,{},u.canonical),W=f.layoutIconSize.evaluate(k,{},u.canonical),Y={horizontal:{},vertical:void 0},ie=k.text,he,ve=[0,0];if(ie){let G=ie.toString(),ue=c.get("text-letter-spacing").evaluate(k,{},u.canonical)*pn,Te=kb(G)?ue:0,Ze=c.get("text-anchor").evaluate(k,{},u.canonical),_t=IC(n,k,u.canonical);if(!_t){let bt=c.get("text-radial-offset").evaluate(k,{},u.canonical);ve=bt?MC(Ze,[bt*pn,mv]):c.get("text-offset").evaluate(k,{},u.canonical).map(wt=>wt*pn)}let Qe=v?"center":c.get("text-justify").evaluate(k,{},u.canonical),ct=c.get("symbol-placement")==="point"?c.get("text-max-width").evaluate(k,{},u.canonical)*pn:1/0,xt=()=>{u.bucket.allowVerticalPlacement&&Kd(G)&&(Y.vertical=yg(ie,u.glyphMap,u.glyphPositions,u.imagePositions,D,ct,b,Ze,"left",Te,ve,a.al.vertical,!0,j,L))};if(!v&&_t){let bt=new Set;if(Qe==="auto")for(let ht=0;ht<_t.values.length;ht+=2)bt.add(gv(_t.values[ht]));else bt.add(Qe);let wt=!1;for(let ht of bt)if(!Y.horizontal[ht])if(wt)Y.horizontal[ht]=Y.horizontal[0];else{let Vt=yg(ie,u.glyphMap,u.glyphPositions,u.imagePositions,D,ct,b,"center",ht,Te,ve,a.al.horizontal,!1,j,L);Vt&&(Y.horizontal[ht]=Vt,wt=Vt.positionedLines.length===1)}xt()}else{Qe==="auto"&&(Qe=gv(Ze));let bt=yg(ie,u.glyphMap,u.glyphPositions,u.imagePositions,D,ct,b,Ze,Qe,Te,ve,a.al.horizontal,!1,j,L);bt&&(Y.horizontal[Qe]=bt),xt(),Kd(G)&&v&&x&&(Y.vertical=yg(ie,u.glyphMap,u.glyphPositions,u.imagePositions,D,ct,b,Ze,Qe,Te,ve,a.al.vertical,!1,j,L))}}let Oe=!1;if(k.icon&&k.icon.name){let G=u.imageMap[k.icon.name];G&&(he=x5(u.imagePositions[k.icon.name],c.get("icon-offset").evaluate(k,{},u.canonical),c.get("icon-anchor").evaluate(k,{},u.canonical)),Oe=!!G.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=Oe:u.bucket.sdfIcons!==Oe&&Ar("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(G.pixelRatio!==u.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}let Ee=kC(Y.horizontal)||Y.vertical;u.bucket.iconsInText=!!Ee&&Ee.iconsInText,(Ee||he)&&z5(u.bucket,k,Y,he,u.imageMap,f,j,W,ve,Oe,u.canonical,u.subdivisionGranularity)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},a.cz=Jb,a.d=qe,a.e=di,a.f=u=>s(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));let n=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(n)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),a.g=ws,a.h=u=>new Promise((n,c)=>{let d=new Image;d.onload=()=>{n(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=Ol})},d.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let f=new Blob([new Uint8Array(u)],{type:"image/png"});d.src=u.byteLength?URL.createObjectURL(f):Ol}),a.i=ao,a.j=(u,n)=>Io(di(u,{type:"json"}),n),a.k=pe,a.l=Q,a.m=Io,a.n=(u,n)=>Io(di(u,{type:"arrayBuffer"}),n),a.o=function(u){return new iv(u).readFields(c5,[])},a.p=H2,a.q=Gp,a.r=nn,a.s=ys,a.t=Wd,a.u=Vi,a.v=se,a.w=Ar,a.x=Dp,a.y=zc,a.z=function([u,n,c]){return n+=90,n*=Math.PI/180,c*=Math.PI/180,{x:u*Math.cos(n)*Math.sin(c),y:u*Math.sin(n)*Math.sin(c),z:u*Math.cos(c)}}}),e("worker",["./shared"],function(a){"use strict";class s{constructor(J){this.keyCache={},J&&this.replace(J)}replace(J){this._layerConfigs={},this._layers={},this.update(J,[])}update(J,q){for(let pe of J){this._layerConfigs[pe.id]=pe;let xe=this._layers[pe.id]=a.bA(pe);xe._featureFilter=a.a7(xe.filter),this.keyCache[pe.id]&&delete this.keyCache[pe.id]}for(let pe of q)delete this.keyCache[pe],delete this._layerConfigs[pe],delete this._layers[pe];this.familiesBySource={};let Q=a.ct(Object.values(this._layerConfigs),this.keyCache);for(let pe of Q){let xe=pe.map(je=>this._layers[je.id]),se=xe[0];if(se.visibility==="none")continue;let De=se.source||"",Be=this.familiesBySource[De];Be||(Be=this.familiesBySource[De]={});let He=se.sourceLayer||"_geojsonTileLayer",Xe=Be[He];Xe||(Xe=Be[He]=[]),Xe.push(xe)}}}class _{constructor(J){let q={},Q=[];for(let De in J){let Be=J[De],He=q[De]={};for(let Xe in Be){let je=Be[+Xe];if(!je||je.bitmap.width===0||je.bitmap.height===0)continue;let pt={x:0,y:0,w:je.bitmap.width+2,h:je.bitmap.height+2};Q.push(pt),He[Xe]={rect:pt,metrics:je.metrics}}}let{w:pe,h:xe}=a.p(Q),se=new a.q({width:pe||1,height:xe||1});for(let De in J){let Be=J[De];for(let He in Be){let Xe=Be[+He];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;let je=q[De][He].rect;a.q.copy(Xe.bitmap,se,{x:0,y:0},{x:je.x+1,y:je.y+1},Xe.bitmap)}}this.image=se,this.positions=q}}a.cu("GlyphAtlas",_);class w{constructor(J){this.tileID=new a.Y(J.tileID.overscaledZ,J.tileID.wrap,J.tileID.canonical.z,J.tileID.canonical.x,J.tileID.canonical.y),this.uid=J.uid,this.zoom=J.zoom,this.pixelRatio=J.pixelRatio,this.tileSize=J.tileSize,this.source=J.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=J.showCollisionBoxes,this.collectResourceTiming=!!J.collectResourceTiming,this.returnDependencies=!!J.returnDependencies,this.promoteId=J.promoteId,this.inFlightDependencies=[]}parse(J,q,Q,pe,xe){return a._(this,void 0,void 0,function*(){this.status="parsing",this.data=J,this.collisionBoxArray=new a.a5;let se=new a.cv(Object.keys(J.layers).sort()),De=new a.cw(this.tileID,this.promoteId);De.bucketLayerIDs=[];let Be={},He={featureIndex:De,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Q,subdivisionGranularity:xe},Xe=q.familiesBySource[this.source];for(let $t in Xe){let nt=J.layers[$t];if(!nt)continue;nt.version===1&&a.w(`Vector tile source "${this.source}" layer "${$t}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Xt=se.encode($t),ci=[];for(let sr=0;sr<nt.length;sr++){let Ji=nt.feature(sr),un=De.getId(Ji,$t);ci.push({feature:Ji,id:un,index:sr,sourceLayerIndex:Xt})}for(let sr of Xe[$t]){let Ji=sr[0];Ji.source!==this.source&&a.w(`layer.source = ${Ji.source} does not equal this.source = ${this.source}`),Ji.minzoom&&this.zoom<Math.floor(Ji.minzoom)||Ji.maxzoom&&this.zoom>=Ji.maxzoom||Ji.visibility!=="none"&&(C(sr,this.zoom,Q),(Be[Ji.id]=Ji.createBucket({index:De.bucketLayerIDs.length,layers:sr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xt,sourceID:this.source})).populate(ci,He,this.tileID.canonical),De.bucketLayerIDs.push(sr.map(un=>un.id)))}}let je=a.bF(He.glyphDependencies,$t=>Object.keys($t).map(Number));this.inFlightDependencies.forEach($t=>$t?.abort()),this.inFlightDependencies=[];let pt=Promise.resolve({});if(Object.keys(je).length){let $t=new AbortController;this.inFlightDependencies.push($t),pt=pe.sendAsync({type:"GG",data:{stacks:je,source:this.source,tileID:this.tileID,type:"glyphs"}},$t)}let St=Object.keys(He.iconDependencies),It=Promise.resolve({});if(St.length){let $t=new AbortController;this.inFlightDependencies.push($t),It=pe.sendAsync({type:"GI",data:{icons:St,source:this.source,tileID:this.tileID,type:"icons"}},$t)}let ke=Object.keys(He.patternDependencies),li=Promise.resolve({});if(ke.length){let $t=new AbortController;this.inFlightDependencies.push($t),li=pe.sendAsync({type:"GI",data:{icons:ke,source:this.source,tileID:this.tileID,type:"patterns"}},$t)}let[Ft,$e,Zi]=yield Promise.all([pt,It,li]),Ht=new _(Ft),_i=new a.cx($e,Zi);for(let $t in Be){let nt=Be[$t];nt instanceof a.a6?(C(nt.layers,this.zoom,Q),a.cy({bucket:nt,glyphMap:Ft,glyphPositions:Ht.positions,imageMap:$e,imagePositions:_i.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:He.subdivisionGranularity})):nt.hasPattern&&(nt instanceof a.cz||nt instanceof a.cA||nt instanceof a.cB)&&(C(nt.layers,this.zoom,Q),nt.addFeatures(He,this.tileID.canonical,_i.patternPositions))}return this.status="done",{buckets:Object.values(Be).filter($t=>!$t.isEmpty()),featureIndex:De,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ht.image,imageAtlas:_i,glyphMap:this.returnDependencies?Ft:null,iconMap:this.returnDependencies?$e:null,glyphPositions:this.returnDependencies?Ht.positions:null}})}}function C(qe,J,q){let Q=new a.C(J);for(let pe of qe)pe.recalculate(Q,q)}class T{constructor(J,q,Q){this.actor=J,this.layerIndex=q,this.availableImages=Q,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(J,q){return a._(this,void 0,void 0,function*(){let Q=yield a.n(J.request,q);try{return{vectorTile:new a.cC.VectorTile(new a.cD(Q.data)),rawData:Q.data,cacheControl:Q.cacheControl,expires:Q.expires}}catch(pe){let xe=new Uint8Array(Q.data),se=`Unable to parse the tile at ${J.request.url}, `;throw se+=xe[0]===31&&xe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pe.message}`,new Error(se)}})}loadTile(J){return a._(this,void 0,void 0,function*(){let q=J.uid,Q=!!(J&&J.request&&J.request.collectResourceTiming)&&new a.cE(J.request),pe=new w(J);this.loading[q]=pe;let xe=new AbortController;pe.abort=xe;try{let se=yield this.loadVectorTile(J,xe);if(delete this.loading[q],!se)return null;let De=se.rawData,Be={};se.expires&&(Be.expires=se.expires),se.cacheControl&&(Be.cacheControl=se.cacheControl);let He={};if(Q){let je=Q.finish();je&&(He.resourceTiming=JSON.parse(JSON.stringify(je)))}pe.vectorTile=se.vectorTile;let Xe=pe.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity);this.loaded[q]=pe,this.fetching[q]={rawTileData:De,cacheControl:Be,resourceTiming:He};try{let je=yield Xe;return a.e({rawTileData:De.slice(0)},je,Be,He)}finally{delete this.fetching[q]}}catch(se){throw delete this.loading[q],pe.status="done",this.loaded[q]=pe,se}})}reloadTile(J){return a._(this,void 0,void 0,function*(){let q=J.uid;if(!this.loaded||!this.loaded[q])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let Q=this.loaded[q];if(Q.showCollisionBoxes=J.showCollisionBoxes,Q.status==="parsing"){let pe=yield Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity),xe;if(this.fetching[q]){let{rawTileData:se,cacheControl:De,resourceTiming:Be}=this.fetching[q];delete this.fetching[q],xe=a.e({rawTileData:se.slice(0)},pe,De,Be)}else xe=pe;return xe}if(Q.status==="done"&&Q.vectorTile)return Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity)})}abortTile(J){return a._(this,void 0,void 0,function*(){let q=this.loading,Q=J.uid;q&&q[Q]&&q[Q].abort&&(q[Q].abort.abort(),delete q[Q])})}removeTile(J){return a._(this,void 0,void 0,function*(){this.loaded&&this.loaded[J.uid]&&delete this.loaded[J.uid]})}}class I{constructor(){this.loaded={}}loadTile(J){return a._(this,void 0,void 0,function*(){let{uid:q,encoding:Q,rawImageData:pe,redFactor:xe,greenFactor:se,blueFactor:De,baseShift:Be}=J,He=pe.width+2,Xe=pe.height+2,je=a.b(pe)?new a.R({width:He,height:Xe},yield a.cF(pe,-1,-1,He,Xe)):pe,pt=new a.cG(q,je,Q,xe,se,De,Be);return this.loaded=this.loaded||{},this.loaded[q]=pt,pt})}removeTile(J){let q=this.loaded,Q=J.uid;q&&q[Q]&&delete q[Q]}}var P,R,H=function(){if(R)return P;function qe(q,Q){if(q.length!==0){J(q[0],Q);for(var pe=1;pe<q.length;pe++)J(q[pe],!Q)}}function J(q,Q){for(var pe=0,xe=0,se=0,De=q.length,Be=De-1;se<De;Be=se++){var He=(q[se][0]-q[Be][0])*(q[Be][1]+q[se][1]),Xe=pe+He;xe+=Math.abs(pe)>=Math.abs(He)?pe-Xe+He:He-Xe+pe,pe=Xe}pe+xe>=0!=!!Q&&q.reverse()}return R=1,P=function q(Q,pe){var xe,se=Q&&Q.type;if(se==="FeatureCollection")for(xe=0;xe<Q.features.length;xe++)q(Q.features[xe],pe);else if(se==="GeometryCollection")for(xe=0;xe<Q.geometries.length;xe++)q(Q.geometries[xe],pe);else if(se==="Feature")q(Q.geometry,pe);else if(se==="Polygon")qe(Q.coordinates,pe);else if(se==="MultiPolygon")for(xe=0;xe<Q.coordinates.length;xe++)qe(Q.coordinates[xe],pe);return Q}}(),Z=a.cH(H);let X=a.cC.VectorTileFeature.prototype.toGeoJSON;class fe{constructor(J){this._feature=J,this.extent=a.Z,this.type=J.type,this.properties=J.tags,"id"in J&&!isNaN(J.id)&&(this.id=parseInt(J.id,10))}loadGeometry(){if(this._feature.type===1){let J=[];for(let q of this._feature.geometry)J.push([new a.P(q[0],q[1])]);return J}{let J=[];for(let q of this._feature.geometry){let Q=[];for(let pe of q)Q.push(new a.P(pe[0],pe[1]));J.push(Q)}return J}}toGeoJSON(J,q,Q){return X.call(this,J,q,Q)}}class ae{constructor(J){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.Z,this.length=J.length,this._features=J}feature(J){return new fe(this._features[J])}}var ne,re,de,oe={exports:{}},Ve=function(){if(de)return oe.exports;de=1;var qe=a.cK(),J=function(){if(re)return ne;re=1;var Xe=a.cI(),je=a.cJ().VectorTileFeature;function pt(It,ke){this.options=ke||{},this.features=It,this.length=It.length}function St(It,ke){this.id=typeof It.id=="number"?It.id:void 0,this.type=It.type,this.rawGeometry=It.type===1?[It.geometry]:It.geometry,this.properties=It.tags,this.extent=ke||4096}return ne=pt,pt.prototype.feature=function(It){return new St(this.features[It],this.options.extent)},St.prototype.loadGeometry=function(){var It=this.rawGeometry;this.geometry=[];for(var ke=0;ke<It.length;ke++){for(var li=It[ke],Ft=[],$e=0;$e<li.length;$e++)Ft.push(new Xe(li[$e][0],li[$e][1]));this.geometry.push(Ft)}return this.geometry},St.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var It=this.geometry,ke=1/0,li=-1/0,Ft=1/0,$e=-1/0,Zi=0;Zi<It.length;Zi++)for(var Ht=It[Zi],_i=0;_i<Ht.length;_i++){var $t=Ht[_i];ke=Math.min(ke,$t.x),li=Math.max(li,$t.x),Ft=Math.min(Ft,$t.y),$e=Math.max($e,$t.y)}return[ke,Ft,li,$e]},St.prototype.toGeoJSON=je.prototype.toGeoJSON,ne}();function q(Xe){var je=new qe;return function(pt,St){for(var It in pt.layers)St.writeMessage(3,Q,pt.layers[It])}(Xe,je),je.finish()}function Q(Xe,je){var pt;je.writeVarintField(15,Xe.version||1),je.writeStringField(1,Xe.name||""),je.writeVarintField(5,Xe.extent||4096);var St={keys:[],values:[],keycache:{},valuecache:{}};for(pt=0;pt<Xe.length;pt++)St.feature=Xe.feature(pt),je.writeMessage(2,pe,St);var It=St.keys;for(pt=0;pt<It.length;pt++)je.writeStringField(3,It[pt]);var ke=St.values;for(pt=0;pt<ke.length;pt++)je.writeMessage(4,He,ke[pt])}function pe(Xe,je){var pt=Xe.feature;pt.id!==void 0&&je.writeVarintField(1,pt.id),je.writeMessage(2,xe,Xe),je.writeVarintField(3,pt.type),je.writeMessage(4,Be,pt)}function xe(Xe,je){var pt=Xe.feature,St=Xe.keys,It=Xe.values,ke=Xe.keycache,li=Xe.valuecache;for(var Ft in pt.properties){var $e=pt.properties[Ft],Zi=ke[Ft];if($e!==null){Zi===void 0&&(St.push(Ft),ke[Ft]=Zi=St.length-1),je.writeVarint(Zi);var Ht=typeof $e;Ht!=="string"&&Ht!=="boolean"&&Ht!=="number"&&($e=JSON.stringify($e));var _i=Ht+":"+$e,$t=li[_i];$t===void 0&&(It.push($e),li[_i]=$t=It.length-1),je.writeVarint($t)}}}function se(Xe,je){return(je<<3)+(7&Xe)}function De(Xe){return Xe<<1^Xe>>31}function Be(Xe,je){for(var pt=Xe.loadGeometry(),St=Xe.type,It=0,ke=0,li=pt.length,Ft=0;Ft<li;Ft++){var $e=pt[Ft],Zi=1;St===1&&(Zi=$e.length),je.writeVarint(se(1,Zi));for(var Ht=St===3?$e.length-1:$e.length,_i=0;_i<Ht;_i++){_i===1&&St!==1&&je.writeVarint(se(2,Ht-1));var $t=$e[_i].x-It,nt=$e[_i].y-ke;je.writeVarint(De($t)),je.writeVarint(De(nt)),It+=$t,ke+=nt}St===3&&je.writeVarint(se(7,1))}}function He(Xe,je){var pt=typeof Xe;pt==="string"?je.writeStringField(1,Xe):pt==="boolean"?je.writeBooleanField(7,Xe):pt==="number"&&(Xe%1!=0?je.writeDoubleField(3,Xe):Xe<0?je.writeSVarintField(6,Xe):je.writeVarintField(5,Xe))}return oe.exports=q,oe.exports.fromVectorTileJs=q,oe.exports.fromGeojsonVt=function(Xe,je){je=je||{};var pt={};for(var St in Xe)pt[St]=new J(Xe[St].features,je),pt[St].name=St,pt[St].version=je.version,pt[St].extent=je.extent;return q({layers:pt})},oe.exports.GeoJSONWrapper=J,oe.exports}(),tt=a.cH(Ve);let dt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:qe=>qe},Je=Math.fround||(we=new Float32Array(1),qe=>(we[0]=+qe,we[0]));var we;let Ge=3,yt=5,le=6;class te{constructor(J){this.options=Object.assign(Object.create(dt),J),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(J){let{log:q,minZoom:Q,maxZoom:pe}=this.options;q&&console.time("total time");let xe=`prepare ${J.length} points`;q&&console.time(xe),this.points=J;let se=[];for(let Be=0;Be<J.length;Be++){let He=J[Be];if(!He.geometry)continue;let[Xe,je]=He.geometry.coordinates,pt=Je(Ue(Xe)),St=Je(ot(je));se.push(pt,St,1/0,Be,-1,1),this.options.reduce&&se.push(0)}let De=this.trees[pe+1]=this._createTree(se);q&&console.timeEnd(xe);for(let Be=pe;Be>=Q;Be--){let He=+Date.now();De=this.trees[Be]=this._createTree(this._cluster(De,Be)),q&&console.log("z%d: %d clusters in %dms",Be,De.numItems,+Date.now()-He)}return q&&console.timeEnd("total time"),this}getClusters(J,q){let Q=((J[0]+180)%360+360)%360-180,pe=Math.max(-90,Math.min(90,J[1])),xe=J[2]===180?180:((J[2]+180)%360+360)%360-180,se=Math.max(-90,Math.min(90,J[3]));if(J[2]-J[0]>=360)Q=-180,xe=180;else if(Q>xe){let je=this.getClusters([Q,pe,180,se],q),pt=this.getClusters([-180,pe,xe,se],q);return je.concat(pt)}let De=this.trees[this._limitZoom(q)],Be=De.range(Ue(Q),ot(se),Ue(xe),ot(pe)),He=De.data,Xe=[];for(let je of Be){let pt=this.stride*je;Xe.push(He[pt+yt]>1?V(He,pt,this.clusterProps):this.points[He[pt+Ge]])}return Xe}getChildren(J){let q=this._getOriginId(J),Q=this._getOriginZoom(J),pe="No cluster with the specified id.",xe=this.trees[Q];if(!xe)throw new Error(pe);let se=xe.data;if(q*this.stride>=se.length)throw new Error(pe);let De=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),Be=xe.within(se[q*this.stride],se[q*this.stride+1],De),He=[];for(let Xe of Be){let je=Xe*this.stride;se[je+4]===J&&He.push(se[je+yt]>1?V(se,je,this.clusterProps):this.points[se[je+Ge]])}if(He.length===0)throw new Error(pe);return He}getLeaves(J,q,Q){let pe=[];return this._appendLeaves(pe,J,q=q||10,Q=Q||0,0),pe}getTile(J,q,Q){let pe=this.trees[this._limitZoom(J)],xe=Math.pow(2,J),{extent:se,radius:De}=this.options,Be=De/se,He=(Q-Be)/xe,Xe=(Q+1+Be)/xe,je={features:[]};return this._addTileFeatures(pe.range((q-Be)/xe,He,(q+1+Be)/xe,Xe),pe.data,q,Q,xe,je),q===0&&this._addTileFeatures(pe.range(1-Be/xe,He,1,Xe),pe.data,xe,Q,xe,je),q===xe-1&&this._addTileFeatures(pe.range(0,He,Be/xe,Xe),pe.data,-1,Q,xe,je),je.features.length?je:null}getClusterExpansionZoom(J){let q=this._getOriginZoom(J)-1;for(;q<=this.options.maxZoom;){let Q=this.getChildren(J);if(q++,Q.length!==1)break;J=Q[0].properties.cluster_id}return q}_appendLeaves(J,q,Q,pe,xe){let se=this.getChildren(q);for(let De of se){let Be=De.properties;if(Be&&Be.cluster?xe+Be.point_count<=pe?xe+=Be.point_count:xe=this._appendLeaves(J,Be.cluster_id,Q,pe,xe):xe<pe?xe++:J.push(De),J.length===Q)break}return xe}_createTree(J){let q=new a.aF(J.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Q=0;Q<J.length;Q+=this.stride)q.add(J[Q],J[Q+1]);return q.finish(),q.data=J,q}_addTileFeatures(J,q,Q,pe,xe,se){for(let De of J){let Be=De*this.stride,He=q[Be+yt]>1,Xe,je,pt;if(He)Xe=me(q,Be,this.clusterProps),je=q[Be],pt=q[Be+1];else{let ke=this.points[q[Be+Ge]];Xe=ke.properties;let[li,Ft]=ke.geometry.coordinates;je=Ue(li),pt=ot(Ft)}let St={type:1,geometry:[[Math.round(this.options.extent*(je*xe-Q)),Math.round(this.options.extent*(pt*xe-pe))]],tags:Xe},It;It=He||this.options.generateId?q[Be+Ge]:this.points[q[Be+Ge]].id,It!==void 0&&(St.id=It),se.features.push(St)}}_limitZoom(J){return Math.max(this.options.minZoom,Math.min(Math.floor(+J),this.options.maxZoom+1))}_cluster(J,q){let{radius:Q,extent:pe,reduce:xe,minPoints:se}=this.options,De=Q/(pe*Math.pow(2,q)),Be=J.data,He=[],Xe=this.stride;for(let je=0;je<Be.length;je+=Xe){if(Be[je+2]<=q)continue;Be[je+2]=q;let pt=Be[je],St=Be[je+1],It=J.within(Be[je],Be[je+1],De),ke=Be[je+yt],li=ke;for(let Ft of It){let $e=Ft*Xe;Be[$e+2]>q&&(li+=Be[$e+yt])}if(li>ke&&li>=se){let Ft,$e=pt*ke,Zi=St*ke,Ht=-1,_i=((je/Xe|0)<<5)+(q+1)+this.points.length;for(let $t of It){let nt=$t*Xe;if(Be[nt+2]<=q)continue;Be[nt+2]=q;let Xt=Be[nt+yt];$e+=Be[nt]*Xt,Zi+=Be[nt+1]*Xt,Be[nt+4]=_i,xe&&(Ft||(Ft=this._map(Be,je,!0),Ht=this.clusterProps.length,this.clusterProps.push(Ft)),xe(Ft,this._map(Be,nt)))}Be[je+4]=_i,He.push($e/li,Zi/li,1/0,_i,-1,li),xe&&He.push(Ht)}else{for(let Ft=0;Ft<Xe;Ft++)He.push(Be[je+Ft]);if(li>1)for(let Ft of It){let $e=Ft*Xe;if(!(Be[$e+2]<=q)){Be[$e+2]=q;for(let Zi=0;Zi<Xe;Zi++)He.push(Be[$e+Zi])}}}}return He}_getOriginId(J){return J-this.points.length>>5}_getOriginZoom(J){return(J-this.points.length)%32}_map(J,q,Q){if(J[q+yt]>1){let se=this.clusterProps[J[q+le]];return Q?Object.assign({},se):se}let pe=this.points[J[q+Ge]].properties,xe=this.options.map(pe);return Q&&xe===pe?Object.assign({},xe):xe}}function V(qe,J,q){return{type:"Feature",id:qe[J+Ge],properties:me(qe,J,q),geometry:{type:"Point",coordinates:[(Q=qe[J],360*(Q-.5)),Rt(qe[J+1])]}};var Q}function me(qe,J,q){let Q=qe[J+yt],pe=Q>=1e4?`${Math.round(Q/1e3)}k`:Q>=1e3?Math.round(Q/100)/10+"k":Q,xe=qe[J+le],se=xe===-1?{}:Object.assign({},q[xe]);return Object.assign(se,{cluster:!0,cluster_id:qe[J+Ge],point_count:Q,point_count_abbreviated:pe})}function Ue(qe){return qe/360+.5}function ot(qe){let J=Math.sin(qe*Math.PI/180),q=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return q<0?0:q>1?1:q}function Rt(qe){let J=(180-360*qe)*Math.PI/180;return 360*Math.atan(Math.exp(J))/Math.PI-90}function Ut(qe,J,q,Q){let pe=Q,xe=J+(q-J>>1),se,De=q-J,Be=qe[J],He=qe[J+1],Xe=qe[q],je=qe[q+1];for(let pt=J+3;pt<q;pt+=3){let St=Fi(qe[pt],qe[pt+1],Be,He,Xe,je);if(St>pe)se=pt,pe=St;else if(St===pe){let It=Math.abs(pt-xe);It<De&&(se=pt,De=It)}}pe>Q&&(se-J>3&&Ut(qe,J,se,Q),qe[se+2]=pe,q-se>3&&Ut(qe,se,q,Q))}function Fi(qe,J,q,Q,pe,xe){let se=pe-q,De=xe-Q;if(se!==0||De!==0){let Be=((qe-q)*se+(J-Q)*De)/(se*se+De*De);Be>1?(q=pe,Q=xe):Be>0&&(q+=se*Be,Q+=De*Be)}return se=qe-q,De=J-Q,se*se+De*De}function Pe(qe,J,q,Q){let pe={id:qe??null,type:J,geometry:q,tags:Q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(J==="Point"||J==="MultiPoint"||J==="LineString")Ne(pe,q);else if(J==="Polygon")Ne(pe,q[0]);else if(J==="MultiLineString")for(let xe of q)Ne(pe,xe);else if(J==="MultiPolygon")for(let xe of q)Ne(pe,xe[0]);return pe}function Ne(qe,J){for(let q=0;q<J.length;q+=3)qe.minX=Math.min(qe.minX,J[q]),qe.minY=Math.min(qe.minY,J[q+1]),qe.maxX=Math.max(qe.maxX,J[q]),qe.maxY=Math.max(qe.maxY,J[q+1])}function Dt(qe,J,q,Q){if(!J.geometry)return;let pe=J.geometry.coordinates;if(pe&&pe.length===0)return;let xe=J.geometry.type,se=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2),De=[],Be=J.id;if(q.promoteId?Be=J.properties[q.promoteId]:q.generateId&&(Be=Q||0),xe==="Point")di(pe,De);else if(xe==="MultiPoint")for(let He of pe)di(He,De);else if(xe==="LineString")Hr(pe,De,se,!1);else if(xe==="MultiLineString"){if(q.lineMetrics){for(let He of pe)De=[],Hr(He,De,se,!1),qe.push(Pe(Be,"LineString",De,J.properties));return}Uo(pe,De,se,!1)}else if(xe==="Polygon")Uo(pe,De,se,!0);else{if(xe!=="MultiPolygon"){if(xe==="GeometryCollection"){for(let He of J.geometry.geometries)Dt(qe,{id:Be,geometry:He,properties:J.properties},q,Q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let He of pe){let Xe=[];Uo(He,Xe,se,!0),De.push(Xe)}}qe.push(Pe(Be,xe,De,J.properties))}function di(qe,J){J.push(Ca(qe[0]),Ln(qe[1]),0)}function Hr(qe,J,q,Q){let pe,xe,se=0;for(let Be=0;Be<qe.length;Be++){let He=Ca(qe[Be][0]),Xe=Ln(qe[Be][1]);J.push(He,Xe,0),Be>0&&(se+=Q?(pe*Xe-He*xe)/2:Math.sqrt(Math.pow(He-pe,2)+Math.pow(Xe-xe,2))),pe=He,xe=Xe}let De=J.length-3;J[2]=1,Ut(J,0,De,q),J[De+2]=1,J.size=Math.abs(se),J.start=0,J.end=J.size}function Uo(qe,J,q,Q){for(let pe=0;pe<qe.length;pe++){let xe=[];Hr(qe[pe],xe,q,Q),J.push(xe)}}function Ca(qe){return qe/360+.5}function Ln(qe){let J=Math.sin(qe*Math.PI/180),q=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return q<0?0:q>1?1:q}function Nn(qe,J,q,Q,pe,xe,se,De){if(Q/=J,xe>=(q/=J)&&se<Q)return qe;if(se<q||xe>=Q)return null;let Be=[];for(let He of qe){let Xe=He.geometry,je=He.type,pt=pe===0?He.minX:He.minY,St=pe===0?He.maxX:He.maxY;if(pt>=q&&St<Q){Be.push(He);continue}if(St<q||pt>=Q)continue;let It=[];if(je==="Point"||je==="MultiPoint")Ar(Xe,It,q,Q,pe);else if(je==="LineString")rr(Xe,It,q,Q,pe,!1,De.lineMetrics);else if(je==="MultiLineString")Gs(Xe,It,q,Q,pe,!1);else if(je==="Polygon")Gs(Xe,It,q,Q,pe,!0);else if(je==="MultiPolygon")for(let ke of Xe){let li=[];Gs(ke,li,q,Q,pe,!0),li.length&&It.push(li)}if(It.length){if(De.lineMetrics&&je==="LineString"){for(let ke of It)Be.push(Pe(He.id,je,ke,He.tags));continue}je!=="LineString"&&je!=="MultiLineString"||(It.length===1?(je="LineString",It=It[0]):je="MultiLineString"),je!=="Point"&&je!=="MultiPoint"||(je=It.length===3?"Point":"MultiPoint"),Be.push(Pe(He.id,je,It,He.tags))}}return Be.length?Be:null}function Ar(qe,J,q,Q,pe){for(let xe=0;xe<qe.length;xe+=3){let se=qe[xe+pe];se>=q&&se<=Q&&lo(J,qe[xe],qe[xe+1],qe[xe+2])}}function rr(qe,J,q,Q,pe,xe,se){let De=ao(qe),Be=pe===0?Ol:el,He,Xe,je=qe.start;for(let li=0;li<qe.length-3;li+=3){let Ft=qe[li],$e=qe[li+1],Zi=qe[li+2],Ht=qe[li+3],_i=qe[li+4],$t=pe===0?Ft:$e,nt=pe===0?Ht:_i,Xt=!1;se&&(He=Math.sqrt(Math.pow(Ft-Ht,2)+Math.pow($e-_i,2))),$t<q?nt>q&&(Xe=Be(De,Ft,$e,Ht,_i,q),se&&(De.start=je+He*Xe)):$t>Q?nt<Q&&(Xe=Be(De,Ft,$e,Ht,_i,Q),se&&(De.start=je+He*Xe)):lo(De,Ft,$e,Zi),nt<q&&$t>=q&&(Xe=Be(De,Ft,$e,Ht,_i,q),Xt=!0),nt>Q&&$t<=Q&&(Xe=Be(De,Ft,$e,Ht,_i,Q),Xt=!0),!xe&&Xt&&(se&&(De.end=je+He*Xe),J.push(De),De=ao(qe)),se&&(je+=He)}let pt=qe.length-3,St=qe[pt],It=qe[pt+1],ke=pe===0?St:It;ke>=q&&ke<=Q&&lo(De,St,It,qe[pt+2]),pt=De.length-3,xe&&pt>=3&&(De[pt]!==De[0]||De[pt+1]!==De[1])&&lo(De,De[0],De[1],De[2]),De.length&&J.push(De)}function ao(qe){let J=[];return J.size=qe.size,J.start=qe.start,J.end=qe.end,J}function Gs(qe,J,q,Q,pe,xe){for(let se of qe)rr(se,J,q,Q,pe,xe,!1)}function lo(qe,J,q,Q){qe.push(J,q,Q)}function Ol(qe,J,q,Q,pe,xe){let se=(xe-J)/(Q-J);return lo(qe,xe,q+(pe-q)*se,1),se}function el(qe,J,q,Q,pe,xe){let se=(xe-q)/(pe-q);return lo(qe,J+(Q-J)*se,xe,1),se}function Qn(qe,J){let q=[];for(let Q=0;Q<qe.length;Q++){let pe=qe[Q],xe=pe.type,se;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")se=co(pe.geometry,J);else if(xe==="MultiLineString"||xe==="Polygon"){se=[];for(let De of pe.geometry)se.push(co(De,J))}else if(xe==="MultiPolygon"){se=[];for(let De of pe.geometry){let Be=[];for(let He of De)Be.push(co(He,J));se.push(Be)}}q.push(Pe(pe.id,xe,se,pe.tags))}return q}function co(qe,J){let q=[];q.size=qe.size,qe.start!==void 0&&(q.start=qe.start,q.end=qe.end);for(let Q=0;Q<qe.length;Q+=3)q.push(qe[Q]+J,qe[Q+1],qe[Q+2]);return q}function ys(qe,J){if(qe.transformed)return qe;let q=1<<qe.z,Q=qe.x,pe=qe.y;for(let xe of qe.features){let se=xe.geometry,De=xe.type;if(xe.geometry=[],De===1)for(let Be=0;Be<se.length;Be+=2)xe.geometry.push(Ea(se[Be],se[Be+1],J,q,Q,pe));else for(let Be=0;Be<se.length;Be++){let He=[];for(let Xe=0;Xe<se[Be].length;Xe+=2)He.push(Ea(se[Be][Xe],se[Be][Xe+1],J,q,Q,pe));xe.geometry.push(He)}}return qe.transformed=!0,qe}function Ea(qe,J,q,Q,pe,xe){return[Math.round(q*(qe*Q-pe)),Math.round(q*(J*Q-xe))]}function Fn(qe,J,q,Q,pe){let xe=J===pe.maxZoom?0:pe.tolerance/((1<<J)*pe.extent),se={features:[],numPoints:0,numSimplified:0,numFeatures:qe.length,source:null,x:q,y:Q,z:J,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let De of qe)xs(se,De,xe,pe);return se}function xs(qe,J,q,Q){let pe=J.geometry,xe=J.type,se=[];if(qe.minX=Math.min(qe.minX,J.minX),qe.minY=Math.min(qe.minY,J.minY),qe.maxX=Math.max(qe.maxX,J.maxX),qe.maxY=Math.max(qe.maxY,J.maxY),xe==="Point"||xe==="MultiPoint")for(let De=0;De<pe.length;De+=3)se.push(pe[De],pe[De+1]),qe.numPoints++,qe.numSimplified++;else if(xe==="LineString")zr(se,pe,qe,q,!1,!1);else if(xe==="MultiLineString"||xe==="Polygon")for(let De=0;De<pe.length;De++)zr(se,pe[De],qe,q,xe==="Polygon",De===0);else if(xe==="MultiPolygon")for(let De=0;De<pe.length;De++){let Be=pe[De];for(let He=0;He<Be.length;He++)zr(se,Be[He],qe,q,!0,He===0)}if(se.length){let De=J.tags||null;if(xe==="LineString"&&Q.lineMetrics){De={};for(let He in J.tags)De[He]=J.tags[He];De.mapbox_clip_start=pe.start/pe.size,De.mapbox_clip_end=pe.end/pe.size}let Be={geometry:se,type:xe==="Polygon"||xe==="MultiPolygon"?3:xe==="LineString"||xe==="MultiLineString"?2:1,tags:De};J.id!==null&&(Be.id=J.id),qe.features.push(Be)}}function zr(qe,J,q,Q,pe,xe){let se=Q*Q;if(Q>0&&J.size<(pe?se:Q))return void(q.numPoints+=J.length/3);let De=[];for(let Be=0;Be<J.length;Be+=3)(Q===0||J[Be+2]>se)&&(q.numSimplified++,De.push(J[Be],J[Be+1])),q.numPoints++;pe&&function(Be,He){let Xe=0;for(let je=0,pt=Be.length,St=pt-2;je<pt;St=je,je+=2)Xe+=(Be[je]-Be[St])*(Be[je+1]+Be[St+1]);if(Xe>0===He)for(let je=0,pt=Be.length;je<pt/2;je+=2){let St=Be[je],It=Be[je+1];Be[je]=Be[pt-2-je],Be[je+1]=Be[pt-1-je],Be[pt-2-je]=St,Be[pt-1-je]=It}}(De,xe),qe.push(De)}let tl={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class zi{constructor(J,q){let Q=(q=this.options=function(xe,se){for(let De in se)xe[De]=se[De];return xe}(Object.create(tl),q)).debug;if(Q&&console.time("preprocess data"),q.maxZoom<0||q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(q.promoteId&&q.generateId)throw new Error("promoteId and generateId cannot be used together.");let pe=function(xe,se){let De=[];if(xe.type==="FeatureCollection")for(let Be=0;Be<xe.features.length;Be++)Dt(De,xe.features[Be],se,Be);else Dt(De,xe.type==="Feature"?xe:{geometry:xe},se);return De}(J,q);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",q.indexMaxZoom,q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pe=function(xe,se){let De=se.buffer/se.extent,Be=xe,He=Nn(xe,1,-1-De,De,0,-1,2,se),Xe=Nn(xe,1,1-De,2+De,0,-1,2,se);return(He||Xe)&&(Be=Nn(xe,1,-De,1+De,0,-1,2,se)||[],He&&(Be=Qn(He,1).concat(Be)),Xe&&(Be=Be.concat(Qn(Xe,-1)))),Be}(pe,q),pe.length&&this.splitTile(pe,0,0,0),Q&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(J,q,Q,pe,xe,se,De){let Be=[J,q,Q,pe],He=this.options,Xe=He.debug;for(;Be.length;){pe=Be.pop(),Q=Be.pop(),q=Be.pop(),J=Be.pop();let je=1<<q,pt=ts(q,Q,pe),St=this.tiles[pt];if(!St&&(Xe>1&&console.time("creation"),St=this.tiles[pt]=Fn(J,q,Q,pe,He),this.tileCoords.push({z:q,x:Q,y:pe}),Xe)){Xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",q,Q,pe,St.numFeatures,St.numPoints,St.numSimplified),console.timeEnd("creation"));let Xt=`z${q}`;this.stats[Xt]=(this.stats[Xt]||0)+1,this.total++}if(St.source=J,xe==null){if(q===He.indexMaxZoom||St.numPoints<=He.indexMaxPoints)continue}else{if(q===He.maxZoom||q===xe)continue;if(xe!=null){let Xt=xe-q;if(Q!==se>>Xt||pe!==De>>Xt)continue}}if(St.source=null,J.length===0)continue;Xe>1&&console.time("clipping");let It=.5*He.buffer/He.extent,ke=.5-It,li=.5+It,Ft=1+It,$e=null,Zi=null,Ht=null,_i=null,$t=Nn(J,je,Q-It,Q+li,0,St.minX,St.maxX,He),nt=Nn(J,je,Q+ke,Q+Ft,0,St.minX,St.maxX,He);J=null,$t&&($e=Nn($t,je,pe-It,pe+li,1,St.minY,St.maxY,He),Zi=Nn($t,je,pe+ke,pe+Ft,1,St.minY,St.maxY,He),$t=null),nt&&(Ht=Nn(nt,je,pe-It,pe+li,1,St.minY,St.maxY,He),_i=Nn(nt,je,pe+ke,pe+Ft,1,St.minY,St.maxY,He),nt=null),Xe>1&&console.timeEnd("clipping"),Be.push($e||[],q+1,2*Q,2*pe),Be.push(Zi||[],q+1,2*Q,2*pe+1),Be.push(Ht||[],q+1,2*Q+1,2*pe),Be.push(_i||[],q+1,2*Q+1,2*pe+1)}}getTile(J,q,Q){J=+J,q=+q,Q=+Q;let pe=this.options,{extent:xe,debug:se}=pe;if(J<0||J>24)return null;let De=1<<J,Be=ts(J,q=q+De&De-1,Q);if(this.tiles[Be])return ys(this.tiles[Be],xe);se>1&&console.log("drilling down to z%d-%d-%d",J,q,Q);let He,Xe=J,je=q,pt=Q;for(;!He&&Xe>0;)Xe--,je>>=1,pt>>=1,He=this.tiles[ts(Xe,je,pt)];return He&&He.source?(se>1&&(console.log("found parent tile z%d-%d-%d",Xe,je,pt),console.time("drilling down")),this.splitTile(He.source,Xe,je,pt,J,q,Q),se>1&&console.timeEnd("drilling down"),this.tiles[Be]?ys(this.tiles[Be],xe):null):null}}function ts(qe,J,q){return 32*((1<<qe)*q+J)+qe}function ws(qe,J){return J?qe.properties[J]:qe.id}function il(qe,J){if(qe==null)return!0;if(qe.type==="Feature")return ws(qe,J)!=null;if(qe.type==="FeatureCollection"){let q=new Set;for(let Q of qe.features){let pe=ws(Q,J);if(pe==null||q.has(pe))return!1;q.add(pe)}return!0}return!1}function uo(qe,J){let q=new Map;if(qe!=null)if(qe.type==="Feature")q.set(ws(qe,J),qe);else for(let Q of qe.features)q.set(ws(Q,J),Q);return q}class zn extends T{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(J,q){return a._(this,void 0,void 0,function*(){let Q=J.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let pe=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!pe)return null;let xe=new ae(pe.features),se=tt(xe);return se.byteOffset===0&&se.byteLength===se.buffer.byteLength||(se=new Uint8Array(se)),{vectorTile:xe,rawData:se.buffer}})}loadData(J){return a._(this,void 0,void 0,function*(){var q;(q=this._pendingRequest)===null||q===void 0||q.abort();let Q=!!(J&&J.request&&J.request.collectResourceTiming)&&new a.cE(J.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(J,this._pendingRequest),this._geoJSONIndex=J.cluster?new te(function({superclusterOptions:se,clusterProperties:De}){if(!De||!se)return se;let Be={},He={},Xe={accumulated:null,zoom:0},je={properties:null},pt=Object.keys(De);for(let St of pt){let[It,ke]=De[St],li=a.cL(ke),Ft=a.cL(typeof It=="string"?[It,["accumulated"],["get",St]]:It);Be[St]=li.value,He[St]=Ft.value}return se.map=St=>{je.properties=St;let It={};for(let ke of pt)It[ke]=Be[ke].evaluate(Xe,je);return It},se.reduce=(St,It)=>{je.properties=It;for(let ke of pt)Xe.accumulated=St[ke],St[ke]=He[ke].evaluate(Xe,je)},se}(J)).load((yield this._pendingData).features):(pe=yield this._pendingData,new zi(pe,J.geojsonVtOptions)),this.loaded={};let xe={};if(Q){let se=Q.finish();se&&(xe.resourceTiming={},xe.resourceTiming[J.source]=JSON.parse(JSON.stringify(se)))}return xe}catch(xe){if(delete this._pendingRequest,a.cp(xe))return{abandoned:!0};throw xe}var pe})}getData(){return a._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(J){let q=this.loaded;return q&&q[J.uid]?super.reloadTile(J):this.loadTile(J)}loadAndProcessGeoJSON(J,q){return a._(this,void 0,void 0,function*(){let Q=yield this.loadGeoJSON(J,q);if(delete this._pendingRequest,typeof Q!="object")throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(Z(Q,!0),J.filter){let pe=a.cL(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(pe.result==="error")throw new Error(pe.value.map(se=>`${se.key}: ${se.message}`).join(", "));Q={type:"FeatureCollection",features:Q.features.filter(se=>pe.value.evaluate({zoom:0},se))}}return Q})}loadGeoJSON(J,q){return a._(this,void 0,void 0,function*(){let{promoteId:Q}=J;if(J.request){let pe=yield a.j(J.request,q);return this._dataUpdateable=il(pe.data,Q)?uo(pe.data,Q):void 0,pe.data}if(typeof J.data=="string")try{let pe=JSON.parse(J.data);return this._dataUpdateable=il(pe,Q)?uo(pe,Q):void 0,pe}catch{throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`)}if(!J.dataDiff)throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${J.source}`);return function(pe,xe,se){var De,Be,He,Xe;if(xe.removeAll&&pe.clear(),xe.remove)for(let je of xe.remove)pe.delete(je);if(xe.add)for(let je of xe.add){let pt=ws(je,se);pt!=null&&pe.set(pt,je)}if(xe.update)for(let je of xe.update){let pt=pe.get(je.id);if(pt==null)continue;let St=!je.removeAllProperties&&(((De=je.removeProperties)===null||De===void 0?void 0:De.length)>0||((Be=je.addOrUpdateProperties)===null||Be===void 0?void 0:Be.length)>0);if((je.newGeometry||je.removeAllProperties||St)&&(pt=Object.assign({},pt),pe.set(je.id,pt),St&&(pt.properties=Object.assign({},pt.properties))),je.newGeometry&&(pt.geometry=je.newGeometry),je.removeAllProperties)pt.properties={};else if(((He=je.removeProperties)===null||He===void 0?void 0:He.length)>0)for(let It of je.removeProperties)Object.prototype.hasOwnProperty.call(pt.properties,It)&&delete pt.properties[It];if(((Xe=je.addOrUpdateProperties)===null||Xe===void 0?void 0:Xe.length)>0)for(let{key:It,value:ke}of je.addOrUpdateProperties)pt.properties[It]=ke}}(this._dataUpdateable,J.dataDiff,Q),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(J){return a._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(J){return this._geoJSONIndex.getClusterExpansionZoom(J.clusterId)}getClusterChildren(J){return this._geoJSONIndex.getChildren(J.clusterId)}getClusterLeaves(J){return this._geoJSONIndex.getLeaves(J.clusterId,J.limit,J.offset)}}class Io{constructor(J){this.self=J,this.actor=new a.H(J),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(q,Q)=>{if(this.externalWorkerSourceTypes[q])throw new Error(`Worker source with name "${q}" already registered.`);this.externalWorkerSourceTypes[q]=Q},this.self.addProtocol=a.cr,this.self.removeProtocol=a.cs,this.self.registerRTLTextPlugin=q=>{a.cM.setMethods(q)},this.actor.registerMessageHandler("LDT",(q,Q)=>this._getDEMWorkerSource(q,Q.source).loadTile(Q)),this.actor.registerMessageHandler("RDT",(q,Q)=>a._(this,void 0,void 0,function*(){this._getDEMWorkerSource(q,Q.source).removeTile(Q)})),this.actor.registerMessageHandler("GCEZ",(q,Q)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(q,Q.type,Q.source).getClusterExpansionZoom(Q)})),this.actor.registerMessageHandler("GCC",(q,Q)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(q,Q.type,Q.source).getClusterChildren(Q)})),this.actor.registerMessageHandler("GCL",(q,Q)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(q,Q.type,Q.source).getClusterLeaves(Q)})),this.actor.registerMessageHandler("LD",(q,Q)=>this._getWorkerSource(q,Q.type,Q.source).loadData(Q)),this.actor.registerMessageHandler("GD",(q,Q)=>this._getWorkerSource(q,Q.type,Q.source).getData()),this.actor.registerMessageHandler("LT",(q,Q)=>this._getWorkerSource(q,Q.type,Q.source).loadTile(Q)),this.actor.registerMessageHandler("RT",(q,Q)=>this._getWorkerSource(q,Q.type,Q.source).reloadTile(Q)),this.actor.registerMessageHandler("AT",(q,Q)=>this._getWorkerSource(q,Q.type,Q.source).abortTile(Q)),this.actor.registerMessageHandler("RMT",(q,Q)=>this._getWorkerSource(q,Q.type,Q.source).removeTile(Q)),this.actor.registerMessageHandler("RS",(q,Q)=>a._(this,void 0,void 0,function*(){if(!this.workerSources[q]||!this.workerSources[q][Q.type]||!this.workerSources[q][Q.type][Q.source])return;let pe=this.workerSources[q][Q.type][Q.source];delete this.workerSources[q][Q.type][Q.source],pe.removeSource!==void 0&&pe.removeSource(Q)})),this.actor.registerMessageHandler("RM",q=>a._(this,void 0,void 0,function*(){delete this.layerIndexes[q],delete this.availableImages[q],delete this.workerSources[q],delete this.demWorkerSources[q]})),this.actor.registerMessageHandler("SR",(q,Q)=>a._(this,void 0,void 0,function*(){this.referrer=Q})),this.actor.registerMessageHandler("SRPS",(q,Q)=>this._syncRTLPluginState(q,Q)),this.actor.registerMessageHandler("IS",(q,Q)=>a._(this,void 0,void 0,function*(){this.self.importScripts(Q)})),this.actor.registerMessageHandler("SI",(q,Q)=>this._setImages(q,Q)),this.actor.registerMessageHandler("UL",(q,Q)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(q).update(Q.layers,Q.removedIds)})),this.actor.registerMessageHandler("SL",(q,Q)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(q).replace(Q)}))}_setImages(J,q){return a._(this,void 0,void 0,function*(){this.availableImages[J]=q;for(let Q in this.workerSources[J]){let pe=this.workerSources[J][Q];for(let xe in pe)pe[xe].availableImages=q}})}_syncRTLPluginState(J,q){return a._(this,void 0,void 0,function*(){return yield a.cM.syncState(q,this.self.importScripts)})}_getAvailableImages(J){let q=this.availableImages[J];return q||(q=[]),q}_getLayerIndex(J){let q=this.layerIndexes[J];return q||(q=this.layerIndexes[J]=new s),q}_getWorkerSource(J,q,Q){if(this.workerSources[J]||(this.workerSources[J]={}),this.workerSources[J][q]||(this.workerSources[J][q]={}),!this.workerSources[J][q][Q]){let pe={sendAsync:(xe,se)=>(xe.targetMapId=J,this.actor.sendAsync(xe,se))};switch(q){case"vector":this.workerSources[J][q][Q]=new T(pe,this._getLayerIndex(J),this._getAvailableImages(J));break;case"geojson":this.workerSources[J][q][Q]=new zn(pe,this._getLayerIndex(J),this._getAvailableImages(J));break;default:this.workerSources[J][q][Q]=new this.externalWorkerSourceTypes[q](pe,this._getLayerIndex(J),this._getAvailableImages(J))}}return this.workerSources[J][q][Q]}_getDEMWorkerSource(J,q){return this.demWorkerSources[J]||(this.demWorkerSources[J]={}),this.demWorkerSources[J][q]||(this.demWorkerSources[J][q]=new I),this.demWorkerSources[J][q]}}return a.i(self)&&(self.worker=new Io(self)),Io}),e("index",["exports","./shared"],function(a,s){"use strict";var _="5.5.0";function w(){var m=new s.A(4);return s.A!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}let C,T,I={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(m,r,l){let h=requestAnimationFrame(g=>{p(),r(g)}),{unsubscribe:p}=s.s(m.signal,"abort",()=>{p(),cancelAnimationFrame(h),l(s.c())},!1)},frameAsync(m){return new Promise((r,l)=>{this.frame(m,r,l)})},getImageData(m,r=0){return this.getImageCanvasContext(m).getImageData(-r,-r,m.width+2*r,m.height+2*r)},getImageCanvasContext(m){let r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=m.width,r.height=m.height,l.drawImage(m,0,0,m.width,m.height),l},resolveURL:m=>(C||(C=document.createElement("a")),C.href=m,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(T==null&&(T=matchMedia("(prefers-reduced-motion: reduce)")),T.matches)}};class P{static testProp(r){if(!P.docStyle)return r[0];for(let l=0;l<r.length;l++)if(r[l]in P.docStyle)return r[l];return r[0]}static create(r,l,h){let p=window.document.createElement(r);return l!==void 0&&(p.className=l),h&&h.appendChild(p),p}static createNS(r,l){return window.document.createElementNS(r,l)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(r,l){r.style[P.transformProp]=l}static addEventListener(r,l,h,p={}){r.addEventListener(l,h,"passive"in p?p:p.capture)}static removeEventListener(r,l,h,p={}){r.removeEventListener(l,h,"passive"in p?p:p.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static getScale(r){let l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}static getPoint(r,l,h){let p=l.boundingClientRect;return new s.P((h.clientX-p.left)/l.x-r.clientLeft,(h.clientY-p.top)/l.y-r.clientTop)}static mousePos(r,l){let h=P.getScale(r);return P.getPoint(r,h,l)}static touchPos(r,l){let h=[],p=P.getScale(r);for(let g=0;g<l.length;g++)h.push(P.getPoint(r,p,l[g]));return h}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){let l=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),h=l.querySelectorAll("script");for(let p of h)p.remove();return P.clean(l),l.innerHTML}static isPossiblyDangerous(r,l){let h=l.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!h.includes("javascript:")&&!h.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){let l=r.children;for(let h of l)P.removeAttributes(h),P.clean(h)}static removeAttributes(r){for(let{name:l,value:h}of r.attributes)P.isPossiblyDangerous(l,h)&&r.removeAttribute(l)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);let R={supported:!1,testSupport:function(m){!X&&Z&&(fe?ae(m):H=m)}},H,Z,X=!1,fe=!1;function ae(m){let r=m.createTexture();m.bindTexture(m.TEXTURE_2D,r);try{if(m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,Z),m.isContextLost())return;R.supported=!0}catch{}m.deleteTexture(r),X=!0}var ne;typeof document<"u"&&(Z=document.createElement("img"),Z.onload=()=>{H&&ae(H),H=null,fe=!0},Z.onerror=()=>{X=!0,H=null},Z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(m){let r,l,h,p;m.resetRequestQueue=()=>{r=[],l=0,h=0,p={}},m.addThrottleControl=M=>{let A=h++;return p[A]=M,A},m.removeThrottleControl=M=>{delete p[M],y()},m.getImage=(M,A,O=!0)=>new Promise((F,N)=>{R.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),s.e(M,{type:"image"}),r.push({abortController:A,requestParameters:M,supportImageRefresh:O,state:"queued",onError:K=>{N(K)},onSuccess:K=>{F(K)}}),y()});let g=M=>s._(this,void 0,void 0,function*(){M.state="running";let{requestParameters:A,supportImageRefresh:O,onError:F,onSuccess:N,abortController:K}=M,ee=O===!1&&!s.i(self)&&!s.g(A.url)&&(!A.headers||Object.keys(A.headers).reduce((be,Ce)=>be&&Ce==="accept",!0));l++;let _e=ee?E(A,K):s.m(A,K);try{let be=yield _e;delete M.abortController,M.state="completed",be.data instanceof HTMLImageElement||s.b(be.data)?N(be):be.data&&N({data:yield(ge=be.data,typeof createImageBitmap=="function"?s.f(ge):s.h(ge)),cacheControl:be.cacheControl,expires:be.expires})}catch(be){delete M.abortController,F(be)}finally{l--,y()}var ge}),y=()=>{let M=(()=>{for(let A of Object.keys(p))if(p[A]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let A=l;A<M&&r.length>0;A++){let O=r.shift();O.abortController.signal.aborted?A--:g(O)}},E=(M,A)=>new Promise((O,F)=>{let N=new Image,K=M.url,ee=M.credentials;ee&&ee==="include"?N.crossOrigin="use-credentials":(ee&&ee==="same-origin"||!s.d(K))&&(N.crossOrigin="anonymous"),A.signal.addEventListener("abort",()=>{N.src="",F(s.c())}),N.fetchPriority="high",N.onload=()=>{N.onerror=N.onload=null,O({data:N})},N.onerror=()=>{N.onerror=N.onload=null,A.signal.aborted||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},N.src=K})}(ne||(ne={})),ne.resetRequestQueue();class re{constructor(r){this._transformRequestFn=r}transformRequest(r,l){return this._transformRequestFn&&this._transformRequestFn(r,l)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function de(m){let r=[];if(typeof m=="string")r.push({id:"default",url:m});else if(m&&m.length>0){let l=[];for(let{id:h,url:p}of m){let g=`${h}${p}`;l.indexOf(g)===-1&&(l.push(g),r.push({id:h,url:p}))}}return r}function oe(m,r,l){try{let h=new URL(m);return h.pathname+=`${r}${l}`,h.toString()}catch{throw new Error(`Invalid sprite URL "${m}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class Ve{constructor(r,l,h,p){this.context=r,this.format=h,this.texture=r.gl.createTexture(),this.update(l,p)}update(r,l,h){let{width:p,height:g}=r,y=!(this.size&&this.size[0]===p&&this.size[1]===g||h),{context:E}=this,{gl:M}=E;if(this.useMipmap=!!(l&&l.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!l||l.premultiply!==!1)),y)this.size=[p,g],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||s.b(r)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,r):M.texImage2D(M.TEXTURE_2D,0,this.format,p,g,0,this.format,M.UNSIGNED_BYTE,r.data);else{let{x:A,y:O}=h||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||s.b(r)?M.texSubImage2D(M.TEXTURE_2D,0,A,O,M.RGBA,M.UNSIGNED_BYTE,r):M.texSubImage2D(M.TEXTURE_2D,0,A,O,p,g,M.RGBA,M.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,l,h){let{context:p}=this,{gl:g}=p;g.bindTexture(g.TEXTURE_2D,this.texture),h!==g.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=g.LINEAR),r!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,r),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,h||r),this.filter=r),l!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,l),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function tt(m){let{userImage:r}=m;return!!(r&&r.render&&r.render())&&(m.data.replace(new Uint8Array(r.data.buffer)),!0)}class dt extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(let{ids:l,promiseResolve:h}of this.requestors)h(this._getImagesForIds(l));this.requestors=[]}}getImage(r){let l=this.images[r];if(l&&!l.data&&l.spriteData){let h=l.spriteData;l.data=new s.R({width:h.width,height:h.height},h.context.getImageData(h.x,h.y,h.width,h.height).data),l.spriteData=null}return l}addImage(r,l){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,l)&&(this.images[r]=l)}_validate(r,l){let h=!0,p=l.data||l.spriteData;return this._validateStretch(l.stretchX,p&&p.width)||(this.fire(new s.k(new Error(`Image "${r}" has invalid "stretchX" value`))),h=!1),this._validateStretch(l.stretchY,p&&p.height)||(this.fire(new s.k(new Error(`Image "${r}" has invalid "stretchY" value`))),h=!1),this._validateContent(l.content,l)||(this.fire(new s.k(new Error(`Image "${r}" has invalid "content" value`))),h=!1),h}_validateStretch(r,l){if(!r)return!0;let h=0;for(let p of r){if(p[0]<h||p[1]<p[0]||l<p[1])return!1;h=p[1]}return!0}_validateContent(r,l){if(!r)return!0;if(r.length!==4)return!1;let h=l.spriteData,p=h&&h.width||l.data.width,g=h&&h.height||l.data.height;return!(r[0]<0||p<r[0]||r[1]<0||g<r[1]||r[2]<0||p<r[2]||r[3]<0||g<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,l,h=!0){let p=this.getImage(r);if(h&&(p.data.width!==l.data.width||p.data.height!==l.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=p.version+1,this.images[r]=l,this.updatedImages[r]=!0}removeImage(r){let l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((l,h)=>{let p=!0;if(!this.isLoaded())for(let g of r)this.images[g]||(p=!1);this.isLoaded()||p?l(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:l})})}_getImagesForIds(r){let l={};for(let h of r){let p=this.getImage(h);p||(this.fire(new s.l("styleimagemissing",{id:h})),p=this.getImage(h)),p?l[h]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:s.w(`Image "${h}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){let{width:r,height:l}=this.atlasImage;return{width:r,height:l}}getPattern(r){let l=this.patterns[r],h=this.getImage(r);if(!h)return null;if(l&&l.position.version===h.version)return l.position;if(l)l.position.version=h.version;else{let p={w:h.data.width+2,h:h.data.height+2,x:0,y:0},g=new s.I(p,h);this.patterns[r]={bin:p,position:g}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){let l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ve(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){let r=[];for(let g in this.patterns)r.push(this.patterns[g].bin);let{w:l,h}=s.p(r),p=this.atlasImage;p.resize({width:l||1,height:h||1});for(let g in this.patterns){let{bin:y}=this.patterns[g],E=y.x+1,M=y.y+1,A=this.getImage(g).data,O=A.width,F=A.height;s.R.copy(A,p,{x:0,y:0},{x:E,y:M},{width:O,height:F}),s.R.copy(A,p,{x:0,y:F-1},{x:E,y:M-1},{width:O,height:1}),s.R.copy(A,p,{x:0,y:0},{x:E,y:M+F},{width:O,height:1}),s.R.copy(A,p,{x:O-1,y:0},{x:E-1,y:M},{width:1,height:F}),s.R.copy(A,p,{x:0,y:0},{x:E+O,y:M},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(let l of r){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;let h=this.getImage(l);h||s.w(`Image with ID: "${l}" was not found`),tt(h)&&this.updateImage(l,h)}}}let Je=1e20;function we(m,r,l,h,p,g,y,E,M){for(let A=r;A<r+h;A++)Ge(m,l*g+A,g,p,y,E,M);for(let A=l;A<l+p;A++)Ge(m,A*g+r,1,h,y,E,M)}function Ge(m,r,l,h,p,g,y){g[0]=0,y[0]=-1e20,y[1]=Je,p[0]=m[r];for(let E=1,M=0,A=0;E<h;E++){p[E]=m[r+E*l];let O=E*E;do{let F=g[M];A=(p[E]-p[F]+O-F*F)/(E-F)/2}while(A<=y[M]&&--M>-1);M++,g[M]=E,y[M]=A,y[M+1]=Je}for(let E=0,M=0;E<h;E++){for(;y[M+1]<E;)M++;let A=g[M],O=E-A;m[r+E*l]=p[A]+O*O}}class yt{constructor(r,l){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return s._(this,void 0,void 0,function*(){let l=[];for(let g in r)for(let y of r[g])l.push(this._getAndCacheGlyphsPromise(g,y));let h=yield Promise.all(l),p={};for(let{stack:g,id:y,glyph:E}of h)p[g]||(p[g]={}),p[g][y]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return p})}_getAndCacheGlyphsPromise(r,l){return s._(this,void 0,void 0,function*(){let h=this.entries[r];h||(h=this.entries[r]={glyphs:{},requests:{},ranges:{}});let p=h.glyphs[l];if(p!==void 0)return{stack:r,id:l,glyph:p};if(p=this._tinySDF(h,r,l),p)return h.glyphs[l]=p,{stack:r,id:l,glyph:p};let g=Math.floor(l/256);if(256*g>65535)throw new Error("glyphs > 65535 not supported");if(h.ranges[g])return{stack:r,id:l,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!h.requests[g]){let E=yt.loadGlyphRange(r,g,this.url,this.requestManager);h.requests[g]=E}let y=yield h.requests[g];for(let E in y)this._doesCharSupportLocalGlyph(+E)||(h.glyphs[+E]=y[+E]);return h.ranges[g]=!0,{stack:r,id:l,glyph:y[l]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||s.u["CJK Unified Ideographs"](r)||s.u["Hangul Syllables"](r)||s.u.Hiragana(r)||s.u.Katakana(r)||s.u["CJK Symbols and Punctuation"](r)||s.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,l,h){let p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(h))return;let g=r.tinySDF;if(!g){let E="400";/bold/i.test(l)?E="900":/medium/i.test(l)?E="500":/light/i.test(l)&&(E="200"),g=r.tinySDF=new yt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:E})}let y=g.draw(String.fromCharCode(h));return{id:h,bitmap:new s.q({width:y.width||60,height:y.height||60},y.data),metrics:{width:y.glyphWidth/2||24,height:y.glyphHeight/2||24,left:y.glyphLeft/2+.5||0,top:y.glyphTop/2-27.5||-8,advance:y.glyphAdvance/2||24,isDoubleResolution:!0}}}}yt.loadGlyphRange=function(m,r,l,h){return s._(this,void 0,void 0,function*(){let p=256*r,g=p+255,y=h.transformRequest(l.replace("{fontstack}",m).replace("{range}",`${p}-${g}`),"Glyphs"),E=yield s.n(y,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${r}, ${p}-${g}`);let M={};for(let A of s.o(E.data))M[A.id]=A;return M})},yt.TinySDF=class{constructor({fontSize:m=24,buffer:r=3,radius:l=8,cutoff:h=.25,fontFamily:p="sans-serif",fontWeight:g="normal",fontStyle:y="normal"}={}){this.buffer=r,this.cutoff=h,this.radius=l;let E=this.size=m+4*r,M=this._createCanvas(E),A=this.ctx=M.getContext("2d",{willReadFrequently:!0});A.font=`${y} ${g} ${m}px ${p}`,A.textBaseline="alphabetic",A.textAlign="left",A.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(m){let r=document.createElement("canvas");return r.width=r.height=m,r}draw(m){let{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:h,actualBoundingBoxLeft:p,actualBoundingBoxRight:g}=this.ctx.measureText(m),y=Math.ceil(l),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-p))),M=Math.min(this.size-this.buffer,y+Math.ceil(h)),A=E+2*this.buffer,O=M+2*this.buffer,F=Math.max(A*O,0),N=new Uint8ClampedArray(F),K={data:N,width:A,height:O,glyphWidth:E,glyphHeight:M,glyphTop:y,glyphLeft:0,glyphAdvance:r};if(E===0||M===0)return K;let{ctx:ee,buffer:_e,gridInner:ge,gridOuter:be}=this;ee.clearRect(_e,_e,E,M),ee.fillText(m,_e,_e+y);let Ce=ee.getImageData(_e,_e,E,M);be.fill(Je,0,F),ge.fill(0,0,F);for(let Ie=0;Ie<M;Ie++)for(let Me=0;Me<E;Me++){let Ae=Ce.data[4*(Ie*E+Me)+3]/255;if(Ae===0)continue;let ze=(Ie+_e)*A+Me+_e;if(Ae===1)be[ze]=0,ge[ze]=Je;else{let Re=.5-Ae;be[ze]=Re>0?Re*Re:0,ge[ze]=Re<0?Re*Re:0}}we(be,0,0,A,O,A,this.f,this.v,this.z),we(ge,_e,_e,E,M,A,this.f,this.v,this.z);for(let Ie=0;Ie<F;Ie++){let Me=Math.sqrt(be[Ie])-Math.sqrt(ge[Ie]);N[Ie]=Math.round(255-255*(Me/this.radius+this.cutoff))}return K}};class le{constructor(){this.specification=s.v.light.position}possiblyEvaluate(r,l){return s.z(r.expression.evaluate(l))}interpolate(r,l,h){return{x:s.B.number(r.x,l.x,h),y:s.B.number(r.y,l.y,h),z:s.B.number(r.z,l.z,h)}}}let te;class V extends s.E{constructor(r){super(),te=te||new s.r({anchor:new s.D(s.v.light.anchor),position:new le,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(te),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,l={}){if(!this._validate(s.t,r,l))for(let h in r){let p=r[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),p):this._transitionable.setValue(h,p)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,h){return(!h||h.validate!==!1)&&s.x(this,r.call(s.y,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}let me=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class Ue extends s.E{constructor(r){super(),this._transitionable=new s.T(me),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0))}setSky(r,l={}){if(!this._validate(s.F,r,l)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let h in r){let p=r[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),p):this._transitionable.setValue(h,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,h={}){return h?.validate!==!1&&s.x(this,r.call(s.y,s.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class ot{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,l){let h=r.join(",")+String(l);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(r,l)),this.dashEntry[h]}getDashRanges(r,l,h){let p=[],g=r.length%2==1?-r[r.length-1]*h:0,y=r[0]*h,E=!0;p.push({left:g,right:y,isDash:E,zeroLength:r[0]===0});let M=r[0];for(let A=1;A<r.length;A++){E=!E;let O=r[A];g=M*h,M+=O,y=M*h,p.push({left:g,right:y,isDash:E,zeroLength:O===0})}return p}addRoundDash(r,l,h){let p=l/2;for(let g=-h;g<=h;g++){let y=this.width*(this.nextRow+h+g),E=0,M=r[E];for(let A=0;A<this.width;A++){A/M.right>1&&(M=r[++E]);let O=Math.abs(A-M.left),F=Math.abs(A-M.right),N=Math.min(O,F),K,ee=g/h*(p+1);if(M.isDash){let _e=p-Math.abs(ee);K=Math.sqrt(N*N+_e*_e)}else K=p-Math.sqrt(N*N+ee*ee);this.data[y+A]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(r){for(let E=r.length-1;E>=0;--E){let M=r[E],A=r[E+1];M.zeroLength?r.splice(E,1):A&&A.isDash===M.isDash&&(A.left=M.left,r.splice(E,1))}let l=r[0],h=r[r.length-1];l.isDash===h.isDash&&(l.left=h.left-this.width,h.right=l.right+this.width);let p=this.width*this.nextRow,g=0,y=r[g];for(let E=0;E<this.width;E++){E/y.right>1&&(y=r[++g]);let M=Math.abs(E-y.left),A=Math.abs(E-y.right),O=Math.min(M,A);this.data[p+E]=Math.max(0,Math.min(255,(y.isDash?O:-O)+128))}}addDash(r,l){let h=l?7:0,p=2*h+1;if(this.nextRow+p>this.height)return s.w("LineAtlas out of space"),null;let g=0;for(let E=0;E<r.length;E++)g+=r[E];if(g!==0){let E=this.width/g,M=this.getDashRanges(r,this.width,E);l?this.addRoundDash(M,E,h):this.addRegularDash(M)}let y={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:g};return this.nextRow+=p,this.dirty=!0,y}bind(r){let l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}let Rt="maplibre_preloaded_worker_pool";class Ut{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Ut.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Rt]}numActive(){return Object.keys(this.active).length}}let Fi=Math.floor(I.hardwareConcurrency/2),Pe,Ne;function Dt(){return Pe||(Pe=new Ut),Pe}Ut.workerCount=s.G(globalThis)?Math.max(Math.min(Fi,3),1):1;class di{constructor(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l;let h=this.workerPool.acquire(l);for(let p=0;p<h.length;p++){let g=new s.H(h[p],l);g.name=`Worker ${p}`,this.actors.push(g)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,l){let h=[];for(let p of this.actors)h.push(p.sendAsync({type:r,data:l}));return Promise.all(h)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,l){for(let h of this.actors)h.registerMessageHandler(r,l)}}function Hr(){return Ne||(Ne=new di(Dt(),s.J),Ne.registerMessageHandler("GR",(m,r,l)=>s.m(r,l))),Ne}function Uo(m,r){let l=s.K();return s.L(l,l,[1,1,0]),s.M(l,l,[.5*m.width,.5*m.height,1]),m.calculatePosMatrix?s.N(l,l,m.calculatePosMatrix(r.toUnwrapped())):l}function Ca(m,r,l,h,p,g,y){var E;let M=function(N,K,ee){if(N)for(let _e of N){let ge=K[_e];if(ge&&ge.source===ee&&ge.type==="fill-extrusion")return!0}else for(let _e in K){let ge=K[_e];if(ge.source===ee&&ge.type==="fill-extrusion")return!0}return!1}((E=p?.layers)!==null&&E!==void 0?E:null,r,m.id),A=g.maxPitchScaleFactor(),O=m.tilesIn(h,A,M);O.sort(Ln);let F=[];for(let N of O)F.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(r,l,m._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,p,g,A,Uo(m.transform,N.tileID),y?(K,ee)=>y(N.tileID,K,ee):void 0)});return function(N,K){for(let ee in N)for(let _e of N[ee])Nn(_e,K);return N}(function(N){let K={},ee={};for(let _e of N){let ge=_e.queryResults,be=_e.wrappedTileID,Ce=ee[be]=ee[be]||{};for(let Ie in ge){let Me=ge[Ie],Ae=Ce[Ie]=Ce[Ie]||{},ze=K[Ie]=K[Ie]||[];for(let Re of Me)Ae[Re.featureIndex]||(Ae[Re.featureIndex]=!0,ze.push(Re))}}return K}(F),m)}function Ln(m,r){let l=m.tileID,h=r.tileID;return l.overscaledZ-h.overscaledZ||l.canonical.y-h.canonical.y||l.wrap-h.wrap||l.canonical.x-h.canonical.x}function Nn(m,r){let l=m.feature,h=r.getFeatureState(l.layer["source-layer"],l.id);l.source=l.layer.source,l.layer["source-layer"]&&(l.sourceLayer=l.layer["source-layer"]),l.state=h}function Ar(m,r,l){return s._(this,void 0,void 0,function*(){let h=m;if(m.url?h=(yield s.j(r.transformRequest(m.url,"Source"),l)).data:yield I.frameAsync(l),!h)return null;let p=s.O(s.e(h,m),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in h&&h.vector_layers&&(p.vectorLayerIds=h.vector_layers.map(g=>g.id)),p})}class rr{constructor(r,l){r&&(l?this.setSouthWest(r).setNorthEast(l):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof s.Q?new s.Q(r.lng,r.lat):s.Q.convert(r),this}setSouthWest(r){return this._sw=r instanceof s.Q?new s.Q(r.lng,r.lat):s.Q.convert(r),this}extend(r){let l=this._sw,h=this._ne,p,g;if(r instanceof s.Q)p=r,g=r;else{if(!(r instanceof rr))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(rr.convert(r)):this.extend(s.Q.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(s.Q.convert(r)):this;if(p=r._sw,g=r._ne,!p||!g)return this}return l||h?(l.lng=Math.min(p.lng,l.lng),l.lat=Math.min(p.lat,l.lat),h.lng=Math.max(g.lng,h.lng),h.lat=Math.max(g.lat,h.lat)):(this._sw=new s.Q(p.lng,p.lat),this._ne=new s.Q(g.lng,g.lat)),this}getCenter(){return new s.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.Q(this.getWest(),this.getNorth())}getSouthEast(){return new s.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){let{lng:l,lat:h}=s.Q.convert(r),p=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(r){return r instanceof rr?r:r&&new rr(r)}static fromLngLat(r,l=0){let h=360*l/40075017,p=h/Math.cos(Math.PI/180*r.lat);return new rr(new s.Q(r.lng-p,r.lat-h),new s.Q(r.lng+p,r.lat+h))}adjustAntiMeridian(){let r=new s.Q(this._sw.lng,this._sw.lat),l=new s.Q(this._ne.lng,this._ne.lat);return new rr(r,r.lng>l.lng?new s.Q(l.lng+360,l.lat):l)}}class ao{constructor(r,l,h){this.bounds=rr.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=h||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){let l=Math.pow(2,r.z),h=Math.floor(s.U(this.bounds.getWest())*l),p=Math.floor(s.S(this.bounds.getNorth())*l),g=Math.ceil(s.U(this.bounds.getEast())*l),y=Math.ceil(s.S(this.bounds.getSouth())*l);return r.x>=h&&r.x<g&&r.y>=p&&r.y<y}}class Gs extends s.E{constructor(r,l,h,p){if(super(),this.id=r,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.O(l,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let r=yield Ar(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(s.e(this,r),r.bounds&&(this.tileBounds=new ao(r.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new s.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(r){return s._(this,void 0,void 0,function*(){let l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h={request:this.map._requestManager.transformRequest(l,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};h.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((g,y)=>{r.reloadPromise={resolve:g,reject:y}})}else r.actor=this.dispatcher.getActor(),p="LT";r.abortController=new AbortController;try{let g=yield r.actor.sendAsync({type:p,data:h},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,g)}catch(g){if(delete r.abortController,r.aborted)return;if(g&&g.status!==404)throw g;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,l){if(l&&l.resourceTiming&&(r.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&r.setExpiryData(l),r.loadVectorData(l,this.map.painter),r.reloadPromise){let h=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(h.resolve).catch(h.reject)}}abortTile(r){return s._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return s._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class lo extends s.E{constructor(r,l,h,p){super(),this.id=r,this.dispatcher=h,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},l),s.e(this,s.O(l,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let l=yield Ar(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,l&&(s.e(this,l),l.bounds&&(this.tileBounds=new ao(l.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(l){this._tileJSONRequest=null,this.fire(new s.k(l))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return s.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return s._(this,void 0,void 0,function*(){let l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{let h=yield ne.getImage(this.map._requestManager.transformRequest(l,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(h&&h.data){this.map._refreshExpiredTiles&&(h.cacheControl||h.expires)&&r.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});let p=this.map.painter.context,g=p.gl,y=h.data;r.texture=this.map.painter.getTileTexture(y.width),r.texture?r.texture.update(y,{useMipmap:!0}):(r.texture=new Ve(p,y,g.RGBA,{useMipmap:!0}),r.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(h){if(delete r.abortController,r.aborted)r.state="unloaded";else if(h)throw r.state="errored",h}})}abortTile(r){return s._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return s._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Ol extends lo{constructor(r,l,h,p){super(r,l,h,p),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(r){return s._(this,void 0,void 0,function*(){let l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h=this.map._requestManager.transformRequest(l,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{let p=yield ne.getImage(h,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(p&&p.data){let g=p.data;this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&r.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});let y=s.b(g)&&s.V()?g:yield this.readImageNow(g),E={type:this.type,uid:r.uid,source:this.id,rawImageData:y,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();let M=yield r.actor.sendAsync({type:"LDT",data:E});r.dem=M,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(p){if(delete r.abortController,r.aborted)r.state="unloaded";else if(p)throw r.state="errored",p}})}readImageNow(r){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.W()){let l=r.width+2,h=r.height+2;try{return new s.R({width:l,height:h},yield s.X(r,-1,-1,l,h))}catch{}}return I.getImageData(r,1)})}_getNeighboringTiles(r){let l=r.canonical,h=Math.pow(2,l.z),p=(l.x-1+h)%h,g=l.x===0?r.wrap-1:r.wrap,y=(l.x+1+h)%h,E=l.x+1===h?r.wrap+1:r.wrap,M={};return M[new s.Y(r.overscaledZ,g,l.z,p,l.y).key]={backfilled:!1},M[new s.Y(r.overscaledZ,E,l.z,y,l.y).key]={backfilled:!1},l.y>0&&(M[new s.Y(r.overscaledZ,g,l.z,p,l.y-1).key]={backfilled:!1},M[new s.Y(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},M[new s.Y(r.overscaledZ,E,l.z,y,l.y-1).key]={backfilled:!1}),l.y+1<h&&(M[new s.Y(r.overscaledZ,g,l.z,p,l.y+1).key]={backfilled:!1},M[new s.Y(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},M[new s.Y(r.overscaledZ,E,l.z,y,l.y+1).key]={backfilled:!1}),M}unloadTile(r){return s._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class el extends s.E{constructor(r,l,h,p){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(p),this._data=l.data,this._options=s.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId,l.clusterMaxZoom!==void 0&&this.maxzoom<=l.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${l.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(l.buffer!==void 0?l.buffer:128),tolerance:this._pixelsToTileUnits(l.tolerance!==void 0?l.tolerance:.375),extent:s.Z,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:s.Z,radius:this._pixelsToTileUnits(l.clusterRadius||50),log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(s.Z/this.tileSize)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return s._(this,void 0,void 0,function*(){let r=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(l=>l.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,function*(){let r=new rr,l=yield this.getData(),h;switch(l.type){case"FeatureCollection":h=l.features.map(p=>this.getCoordinatesFromGeometry(p.geometry)).flat(1/0);break;case"Feature":h=this.getCoordinatesFromGeometry(l.geometry);break;default:h=this.getCoordinatesFromGeometry(l)}if(h.length==0)return r;for(let p=0;p<h.length-1;p+=2)r.extend([h[p],h[p+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,l,h){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:l,offset:h}})}_updateWorkerData(r){return s._(this,void 0,void 0,function*(){let l=s.e({type:this.type},this.workerOptions);r?l.dataDiff=r:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(I.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.l("dataloading",{dataType:"source"}));try{let h=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||h.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));let p=null;h.resourceTiming&&h.resourceTiming[this.id]&&(p=h.resourceTiming[this.id].slice(0));let g={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&s.e(g,{resourceTiming:p}),this.fire(new s.l("data",Object.assign(Object.assign({},g),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},g),{sourceDataType:"content"})))}catch(h){if(this._pendingLoads--,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(h))}})}loaded(){return this._pendingLoads===0}loadTile(r){return s._(this,void 0,void 0,function*(){let l=r.actor?"RT":"LT";r.actor=this.actor;let h={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;let p=yield this.actor.sendAsync({type:l,data:h},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(p,this.map.painter,l==="RT")})}abortTile(r){return s._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return s._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Qn extends s.E{constructor(r,l,h,p){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=h,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=l}load(r){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let l=yield ne.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,r&&(this.coordinates=r),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new s.k(l))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;let l=r.map(s.$.fromLngLat);var h;return this.tileID=function(p){let g=1/0,y=1/0,E=-1/0,M=-1/0;for(let N of p)g=Math.min(g,N.x),y=Math.min(y,N.y),E=Math.max(E,N.x),M=Math.max(M,N.y);let A=Math.max(E-g,M-y),O=Math.max(0,Math.floor(-Math.log(A)/Math.LN2)),F=Math.pow(2,O);return new s.a1(O,Math.floor((g+E)/2*F),Math.floor((y+M)/2*F))}(l),this.terrainTileRanges=this._getOverlappingTileRanges(l),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=l.map(p=>this.tileID.getTilePoint(p)._round()),this.flippedWindingOrder=((h=this.tileCoords)[1].x-h[0].x)*(h[2].y-h[0].y)-(h[1].y-h[0].y)*(h[2].x-h[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let r=this.map.painter.context,l=r.gl;this.texture||(this.texture=new Ve(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let h=!1;for(let p in this.tiles){let g=this.tiles[p];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,h=!0)}h&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){let l=1/0,h=1/0,p=-1/0,g=-1/0;for(let E of r)l=Math.min(l,E.x),h=Math.min(h,E.y),p=Math.max(p,E.x),g=Math.max(g,E.y);let y={};for(let E=0;E<=s.a0;E++){let M=Math.pow(2,E),A=Math.floor(l*M),O=Math.floor(h*M),F=Math.floor(p*M),N=Math.floor(g*M);y[E]={minTileX:A,minTileY:O,maxTileX:F,maxTileY:N}}return y}}class co extends Qn{constructor(r,l,h,p){super(r,l,h,p),this.roundZoom=!0,this.type="video",this.options=l}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;let r=this.options;this.urls=[];for(let l of r.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{let l=yield s.a2(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new s.k(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){let l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new s.k(new s.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let r=this.map.painter.context,l=r.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new Ve(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let h=!1;for(let p in this.tiles){let g=this.tiles[p];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,h=!0)}h&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ys extends Qn{constructor(r,l,h,p){super(r,l,h,p),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(g=>!Array.isArray(g)||g.length!==2||g.some(y=>typeof y!="number"))||this.fire(new s.k(new s.a3(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a3(`sources.${r}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new s.k(new s.a3(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a3(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a3(`sources.${r}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let l=this.map.painter.context,h=l.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ve(l,this.canvas,h.RGBA,{premultiply:!0});let p=!1;for(let g in this.tiles){let y=this.tiles[g];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,p=!0)}p&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}let Ea={},Fn=m=>{switch(m){case"geojson":return el;case"image":return Qn;case"raster":return lo;case"raster-dem":return Ol;case"vector":return Gs;case"video":return co;case"canvas":return ys}return Ea[m]},xs="RTLPluginLoaded";class zr extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Hr()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return s._(this,arguments,void 0,function*(l,h=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=I.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!h)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(xs))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let tl=null;function zi(){return tl||(tl=new zr),tl}class ts{constructor(r,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=s.a4(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){let l=r+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,l,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(p,g){let y={};if(!g)return y;for(let E of p){let M=E.layerIds.map(A=>g.getLayer(A)).filter(Boolean);if(M.length!==0){E.layers=M,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(A=>M.filter(O=>O.id===A)[0]));for(let A of M)y[A.id]=E}}return y}(r.buckets,l?.style),this.hasSymbolBuckets=!1;for(let p in this.buckets){let g=this.buckets[p];if(g instanceof s.a6){if(this.hasSymbolBuckets=!0,!h)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let p in this.buckets){let g=this.buckets[p];if(g instanceof s.a6&&g.hasRTLText){this.hasRTLText=!0,zi().lazyLoad();break}}this.queryPadding=0;for(let p in this.buckets){let g=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(p).queryRadius(g))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(let r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(let h in this.buckets){let p=this.buckets[h];p.uploadPending()&&p.upload(r)}let l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ve(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ve(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,h,p,g,y,E,M,A,O,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:g,scale:y,tileSize:this.tileSize,pixelPosMatrix:O,transform:M,params:E,queryPadding:this.queryPadding*A,getElevation:F},r,l,h):{}}querySourceFeatures(r,l){let h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;let p=h.loadVTLayers(),g=l&&l.sourceLayer?l.sourceLayer:"",y=p._geojsonTileLayer||p[g];if(!y)return;let E=s.a7(l&&l.filter),{z:M,x:A,y:O}=this.tileID.canonical,F={z:M,x:A,y:O};for(let N=0;N<y.length;N++){let K=y.feature(N);if(E.needGeometry){let ge=s.a8(K,!0);if(!E.filter(new s.C(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!E.filter(new s.C(this.tileID.overscaledZ),K))continue;let ee=h.getId(K,g),_e=new s.a9(K,M,A,O,ee);_e.tile=F,r.push(_e)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){let l=this.expirationTime;if(r.cacheControl){let h=s.aa(r.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){let h=Date.now(),p=!1;if(this.expirationTime>h)p=!1;else if(l)if(this.expirationTime<l)p=!0;else{let g=this.expirationTime-l;g?this.expirationTime=h+Math.max(g,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;let h=this.latestFeatureIndex.loadVTLayers();for(let p in this.buckets){if(!l.style.hasLayer(p))continue;let g=this.buckets[p],y=g.layers[0].sourceLayer||"_geojsonTileLayer",E=h[y],M=r[y];if(!E||!M||Object.keys(M).length===0)continue;g.update(M,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});let A=l&&l.style&&l.style.getLayer(p);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(g)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<I.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=I.now()+r}setDependencies(r,l){let h={};for(let p of l)h[p]=!0;this.dependencies[r]=h}hasDependency(r,l){for(let h of r){let p=this.dependencies[h];if(p){for(let g of l)if(p[g])return!0}}return!1}}class ws{constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(let r in this.data)for(let l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,h){let p=r.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);let g={value:l,timeout:void 0};if(h!==void 0&&(g.timeout=setTimeout(()=>{this.remove(r,g)},h)),this.data[p].push(g),this.order.push(p),this.order.length>this.max){let y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){let l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){let l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;let h=r.wrapped().key,p=l===void 0?0:this.data[h].indexOf(l),g=this.data[h][p];return this.data[h].splice(p,1),g.timeout&&clearTimeout(g.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(g.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){let l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){let l=[];for(let h in this.data)for(let p of this.data[h])r(p.value)||l.push(p);for(let h of l)this.remove(h.value.tileID,h)}}class il{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,h){let p=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][p]=this.stateChanges[r][p]||{},s.e(this.stateChanges[r][p],h),this.deletedStates[r]===null){this.deletedStates[r]={};for(let g in this.state[r])g!==p&&(this.deletedStates[r][g]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][p]===null){this.deletedStates[r][p]={};for(let g in this.state[r][p])h[g]||(this.deletedStates[r][p][g]=null)}else for(let g in h)this.deletedStates[r]&&this.deletedStates[r][p]&&this.deletedStates[r][p][g]===null&&delete this.deletedStates[r][p][g]}removeFeatureState(r,l,h){if(this.deletedStates[r]===null)return;let p=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},h&&l!==void 0)this.deletedStates[r][p]!==null&&(this.deletedStates[r][p]=this.deletedStates[r][p]||{},this.deletedStates[r][p][h]=null);else if(l!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][p])for(h in this.deletedStates[r][p]={},this.stateChanges[r][p])this.deletedStates[r][p][h]=null;else this.deletedStates[r][p]=null;else this.deletedStates[r]=null}getState(r,l){let h=String(l),p=s.e({},(this.state[r]||{})[h],(this.stateChanges[r]||{})[h]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){let g=this.deletedStates[r][l];if(g===null)return{};for(let y in g)delete p[y]}return p}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){let h={};for(let p in this.stateChanges){this.state[p]=this.state[p]||{};let g={};for(let y in this.stateChanges[p])this.state[p][y]||(this.state[p][y]={}),s.e(this.state[p][y],this.stateChanges[p][y]),g[y]=this.state[p][y];h[p]=g}for(let p in this.deletedStates){this.state[p]=this.state[p]||{};let g={};if(this.deletedStates[p]===null)for(let y in this.state[p])g[y]={},this.state[p][y]={};else for(let y in this.deletedStates[p]){if(this.deletedStates[p][y]===null)this.state[p][y]={};else for(let E of Object.keys(this.deletedStates[p][y]))delete this.state[p][y][E];g[y]=this.state[p][y]}h[p]=h[p]||{},s.e(h[p],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(let p in r)r[p].setFeatureState(h,l)}}let uo=89.25;function zn(m,r){let l=s.ae(r.lat,-85.051129,s.af);return new s.P(s.U(r.lng)*m,s.S(l)*m)}function Io(m,r){return new s.$(r.x/m,r.y/m).toLngLat()}function qe(m){return m.cameraToCenterDistance*Math.min(.85*Math.tan(s.ab(90-m.pitch)),Math.tan(s.ab(uo-m.pitch)))}function J(m,r){let l=m.canonical,h=r/s.ac(l.z),p=l.x+Math.pow(2,l.z)*m.wrap,g=s.ad(new Float64Array(16));return s.L(g,g,[p*h,l.y*h,0]),s.M(g,g,[h/s.Z,h/s.Z,1]),g}function q(m,r,l,h,p){let g=s.$.fromLngLat(m,r),y=p*s.ag(1,m.lat),E=y*Math.cos(s.ab(l)),M=Math.sqrt(y*y-E*E),A=M*Math.sin(s.ab(-h)),O=M*Math.cos(s.ab(-h));return new s.$(g.x+A,g.y+O,g.z+E)}function Q(m,r,l){let h=r.intersectsFrustum(m);if(!l)return h;let p=r.intersectsPlane(l);return h===0||p===0?0:h===2&&p===2?2:1}function pe(m,r,l){let h=0,p=(l-r)/10;for(let g=0;g<10;g++)h+=p*Math.pow(Math.cos(r+(g+.5)/10*(l-r)),m);return h}function xe(m,r){return function(l,h,p,g,y){let E=2*((m-1)/s.ah(Math.cos(s.ab(uo-y))/Math.cos(s.ab(uo)))-1),M=Math.acos(p/g),A=2*pe(E-1,0,s.ab(y/2)),O=Math.min(s.ab(uo),M+s.ab(y/2)),F=pe(E-1,Math.min(O,M-s.ab(y/2)),O),N=Math.atan(h/p),K=Math.hypot(h,p),ee=l;return ee+=s.ah(g/K/Math.max(.5,Math.cos(s.ab(y/2)))),ee+=E*s.ah(Math.cos(N))/2,ee-=s.ah(Math.max(1,F/A/r))/2,ee}}let se=xe(9.314,3);function De(m,r){let l=(r.roundZoom?Math.round:Math.floor)(m.zoom+s.ah(m.tileSize/r.tileSize));return Math.max(0,l)}function Be(m,r){let l=m.getCameraFrustum(),h=m.getClippingPlane(),p=m.screenPointToMercatorCoordinate(m.getCameraPoint()),g=s.$.fromLngLat(m.center,m.elevation);p.z=g.z+Math.cos(m.pitchInRadians)*m.cameraToCenterDistance/m.worldSize;let y=m.getCoveringTilesDetailsProvider(),E=y.allowVariableZoom(m,r),M=De(m,r),A=r.minzoom||0,O=r.maxzoom!==void 0?r.maxzoom:m.maxZoom,F=Math.min(Math.max(0,M),O),N=Math.pow(2,F),K=[N*p.x,N*p.y,0],ee=[N*g.x,N*g.y,0],_e=Math.hypot(g.x-p.x,g.y-p.y),ge=Math.abs(g.z-p.z),be=Math.hypot(_e,ge),Ce=Ae=>({zoom:0,x:0,y:0,wrap:Ae,fullyVisible:!1}),Ie=[],Me=[];if(m.renderWorldCopies&&y.allowWorldCopies())for(let Ae=1;Ae<=3;Ae++)Ie.push(Ce(-Ae)),Ie.push(Ce(Ae));for(Ie.push(Ce(0));Ie.length>0;){let Ae=Ie.pop(),ze=Ae.x,Re=Ae.y,We=Ae.fullyVisible,ut={x:ze,y:Re,z:Ae.zoom},et=y.getTileAABB(ut,Ae.wrap,m.elevation,r);if(!We){let Tt=Q(l,et,h);if(Tt===0)continue;We=Tt===2}let rt=y.distanceToTile2d(p.x,p.y,ut,et),lt=M;E&&(lt=(r.calculateTileZoom||se)(m.zoom+s.ah(m.tileSize/r.tileSize),rt,ge,be,m.fov)),lt=(r.roundZoom?Math.round:Math.floor)(lt),lt=Math.max(0,lt);let Pt=Math.min(lt,O);if(Ae.wrap=y.getWrap(g,ut,Ae.wrap),Ae.zoom>=Pt){if(Ae.zoom<A)continue;let Tt=F-Ae.zoom,vt=K[0]-.5-(ze<<Tt),Gt=K[1]-.5-(Re<<Tt),Ti=r.reparseOverscaled?Math.max(Ae.zoom,lt):Ae.zoom;Me.push({tileID:new s.Y(Ae.zoom===O?Ti:Ae.zoom,Ae.wrap,Ae.zoom,ze,Re),distanceSq:s.ai([ee[0]-.5-ze,ee[1]-.5-Re]),tileDistanceToCamera:Math.sqrt(vt*vt+Gt*Gt)})}else for(let Tt=0;Tt<4;Tt++)Ie.push({zoom:Ae.zoom+1,x:(ze<<1)+Tt%2,y:(Re<<1)+(Tt>>1),wrap:Ae.wrap,fullyVisible:We})}return Me.sort((Ae,ze)=>Ae.distanceSq-ze.distanceSq).map(Ae=>Ae.tileID)}class He extends s.E{constructor(r,l,h){super(),this.id=r,this.dispatcher=h,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,g,y,E)=>{let M=new(Fn(g.type))(p,g,y,E);if(M.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${M.id}`);return M})(r,l,h,this),this._tiles={},this._cache=new ws(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new il,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let r in this._tiles){let l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,l,h){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,l,h)}catch(p){r.state="errored",p.status!==404?this._source.fire(new s.k(p,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new s.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let l in this._tiles){let h=this._tiles[l];h.upload(r),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Xe).map(r=>r.key)}getRenderableIds(r){let l=[];for(let h in this._tiles)this._isIdRenderable(h,r)&&l.push(this._tiles[h]);return r?l.sort((h,p)=>{let g=h.tileID,y=p.tileID,E=new s.P(g.canonical.x,g.canonical.y)._rotate(-this.transform.bearingInRadians),M=new s.P(y.canonical.x,y.canonical.y)._rotate(-this.transform.bearingInRadians);return g.overscaledZ-y.overscaledZ||M.y-E.y||M.x-E.x}).map(h=>h.tileID.key):l.map(h=>h.tileID).sort(Xe).map(h=>h.key)}hasRenderableParent(r){let l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let l in this._tiles)(r||this._tiles[l].state!=="errored")&&this._reloadTile(l,"reloading")}}_reloadTile(r,l){return s._(this,void 0,void 0,function*(){let h=this._tiles[r];h&&(h.state!=="loading"&&(h.state=l),yield this._loadTile(h,r,l))})}_tileLoaded(r,l,h){r.timeAdded=I.now(),h==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){let l=this.getRenderableIds();for(let p=0;p<l.length;p++){let g=l[p];if(r.neighboringTiles&&r.neighboringTiles[g]){let y=this.getTileByID(g);h(r,y),h(y,r)}}function h(p,g){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let y=g.tileID.canonical.x-p.tileID.canonical.x,E=g.tileID.canonical.y-p.tileID.canonical.y,M=Math.pow(2,p.tileID.canonical.z),A=g.tileID.key;y===0&&E===0||Math.abs(E)>1||(Math.abs(y)>1&&(Math.abs(y+M)===1?y+=M:Math.abs(y-M)===1&&(y-=M)),g.dem&&p.dem&&(p.dem.backfillBorder(g.dem,y,E),p.neighboringTiles&&p.neighboringTiles[A]&&(p.neighboringTiles[A].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,h,p){for(let g in this._tiles){let y=this._tiles[g];if(p[g]||!y.hasData()||y.tileID.overscaledZ<=l||y.tileID.overscaledZ>h)continue;let E=y.tileID;for(;y&&y.tileID.overscaledZ>l+1;){let A=y.tileID.scaledTo(y.tileID.overscaledZ-1);y=this._tiles[A.key],y&&y.hasData()&&(E=A)}let M=E;for(;M.overscaledZ>l;)if(M=M.scaledTo(M.overscaledZ-1),r[M.key]||r[M.canonical.key]){p[E.key]=E;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){let h=this._loadedParentTiles[r.key];return h&&h.tileID.overscaledZ>=l?h:null}for(let h=r.overscaledZ-1;h>=l;h--){let p=r.scaledTo(h),g=this._getLoadedTile(p);if(g)return g}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){let l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){let l=Math.ceil(r.width/this._source.tileSize)+1,h=Math.ceil(r.height/this._source.tileSize)+1,p=Math.floor(l*h*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),g=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(g)}handleWrapJump(r){let l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){let h={};for(let p in this._tiles){let g=this._tiles[p];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+l),h[g.tileID.key]=g}this._tiles=h;for(let p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(let p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(r,l,h,p,g,y){let E={},M={},A=Object.keys(r),O=I.now();for(let F of A){let N=r[F],K=this._tiles[F];if(!K||K.fadeEndTime!==0&&K.fadeEndTime<=O)continue;let ee=this.findLoadedParent(N,l),_e=this.findLoadedSibling(N),ge=ee||_e||null;ge&&(this._addTile(ge.tileID),E[ge.tileID.key]=ge.tileID),M[F]=N}this._retainLoadedChildren(M,p,h,r);for(let F in E)r[F]||(this._coveredTiles[F]=!0,r[F]=E[F]);if(y){let F={},N={};for(let K of g)this._tiles[K.key].hasData()?F[K.key]=K:N[K.key]=K;for(let K in N){let ee=N[K].children(this._source.maxzoom);this._tiles[ee[0].key]&&this._tiles[ee[1].key]&&this._tiles[ee[2].key]&&this._tiles[ee[3].key]&&(F[ee[0].key]=r[ee[0].key]=ee[0],F[ee[1].key]=r[ee[1].key]=ee[1],F[ee[2].key]=r[ee[2].key]=ee[2],F[ee[3].key]=r[ee[3].key]=ee[3],delete N[K])}for(let K in N){let ee=N[K],_e=this.findLoadedParent(ee,this._source.minzoom),ge=this.findLoadedSibling(ee),be=_e||ge||null;if(be){F[be.tileID.key]=r[be.tileID.key]=be.tileID;for(let Ce in F)F[Ce].isChildOf(be.tileID)&&delete F[Ce]}}for(let K in this._tiles)F[K]||(this._coveredTiles[K]=!0)}}update(r,l){if(!this._sourceLoaded||this._paused)return;let h;this.transform=r,this.terrain=l,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new s.Y(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(h=Be(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(h=h.filter(O=>this._source.hasTile(O)))):h=[];let p=De(r,this._source),g=Math.max(p-He.maxOverzooming,this._source.minzoom),y=Math.max(p+He.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let O={};for(let F of h)if(F.canonical.z>this._source.minzoom){let N=F.scaledTo(F.canonical.z-1);O[N.key]=N;let K=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));O[K.key]=K}h=h.concat(Object.values(O))}let E=h.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let M=this._updateRetainedTiles(h,p);je(this._source.type)&&this._updateCoveredAndRetainedTiles(M,g,y,p,h,l);for(let O in M)this._tiles[O].clearFadeHold();let A=s.aj(this._tiles,M);for(let O of A){let F=this._tiles[O];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,l){var h;let p={},g={},y=Math.max(l-He.maxOverzooming,this._source.minzoom),E=Math.max(l+He.maxUnderzooming,this._source.minzoom),M={};for(let A of r){let O=this._addTile(A);p[A.key]=A,O.hasData()||l<this._source.maxzoom&&(M[A.key]=A)}this._retainLoadedChildren(M,l,E,p);for(let A of r){let O=this._tiles[A.key];if(O.hasData())continue;if(l+1>this._source.maxzoom){let N=A.children(this._source.maxzoom)[0],K=this.getTile(N);if(K&&K.hasData()){p[N.key]=N;continue}}else{let N=A.children(this._source.maxzoom);if(p[N[0].key]&&p[N[1].key]&&p[N[2].key]&&p[N[3].key])continue}let F=O.wasRequested();for(let N=A.overscaledZ-1;N>=y;--N){let K=A.scaledTo(N);if(g[K.key])break;if(g[K.key]=!0,O=this.getTile(K),!O&&F&&(O=this._addTile(K)),O){let ee=O.hasData();if((ee||!(!((h=this.map)===null||h===void 0)&&h.cancelPendingTileRequestsWhileZooming)||F)&&(p[K.key]=K),F=O.wasRequested(),ee)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let r in this._tiles){let l=[],h,p=this._tiles[r].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){h=this._loadedParentTiles[p.key];break}l.push(p.key);let g=p.scaledTo(p.overscaledZ-1);if(h=this._getLoadedTile(g),h)break;p=g}for(let g of l)this._loadedParentTiles[g]=h}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let r in this._tiles){let l=this._tiles[r].tileID,h=this._getLoadedTile(l);this._loadedSiblingTiles[l.key]=h}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));let h=l;return l||(l=new ts(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,r.key,l.state)),l.uses++,this._tiles[r.key]=l,h||this._source.fire(new s.l("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);let h=l.getExpiryTimeout();h&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},h))}refreshTiles(r){for(let l in this._tiles)this._isIdRenderable(l)&&r.some(h=>h.equals(this._tiles[l].tileID.canonical))&&this._reloadTile(l,"expired")}_removeTile(r){let l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(r){let l=r.sourceDataType;r.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&l==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,l,h){let p=[],g=this.transform;if(!g)return p;let y=h?g.getCameraQueryGeometry(r):r,E=r.map(ee=>g.screenPointToMercatorCoordinate(ee,this.terrain)),M=y.map(ee=>g.screenPointToMercatorCoordinate(ee,this.terrain)),A=this.getIds(),O=1/0,F=1/0,N=-1/0,K=-1/0;for(let ee of M)O=Math.min(O,ee.x),F=Math.min(F,ee.y),N=Math.max(N,ee.x),K=Math.max(K,ee.y);for(let ee=0;ee<A.length;ee++){let _e=this._tiles[A[ee]];if(_e.holdingForFade())continue;let ge=g.getCoveringTilesDetailsProvider().allowWorldCopies()?_e.tileID:_e.tileID.unwrapTo(0),be=Math.pow(2,g.zoom-_e.tileID.overscaledZ),Ce=l*_e.queryPadding*s.Z/_e.tileSize/be,Ie=[ge.getTilePoint(new s.$(O,F)),ge.getTilePoint(new s.$(N,K))];if(Ie[0].x-Ce<s.Z&&Ie[0].y-Ce<s.Z&&Ie[1].x+Ce>=0&&Ie[1].y+Ce>=0){let Me=E.map(ze=>ge.getTilePoint(ze)),Ae=M.map(ze=>ge.getTilePoint(ze));p.push({tile:_e,tileID:ge,queryGeometry:Me,cameraQueryGeometry:Ae,scale:be})}}return p}getVisibleCoordinates(r){let l=this.getRenderableIds(r).map(h=>this._tiles[h].tileID);return this.transform&&this.transform.populateCache(l),l}hasTransition(){if(this._source.hasTransition())return!0;if(je(this._source.type)){let r=I.now();for(let l in this._tiles)if(this._tiles[l].fadeEndTime>=r)return!0}return!1}setFeatureState(r,l,h){this._state.updateState(r=r||"_geojsonTileLayer",l,h)}removeFeatureState(r,l,h){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,h)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,h){let p=this._tiles[r];p&&p.setDependencies(l,h)}reloadTilesForDependencies(r,l){for(let h in this._tiles)this._tiles[h].hasDependency(r,l)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(r,l))}}function Xe(m,r){let l=Math.abs(2*m.wrap)-+(m.wrap<0),h=Math.abs(2*r.wrap)-+(r.wrap<0);return m.overscaledZ-r.overscaledZ||h-l||r.canonical.y-m.canonical.y||r.canonical.x-m.canonical.x}function je(m){return m==="raster"||m==="image"||m==="video"}He.maxOverzooming=10,He.maxUnderzooming=3;class pt{constructor(r,l){this.reset(r,l)}reset(r,l){this.points=r||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=s.ae(r,0,1);let l=1,h=this._distances[l],p=r*this.paddedLength+this.padding;for(;h<p&&l<this._distances.length;)h=this._distances[++l];let g=l-1,y=this._distances[g],E=h-y,M=E>0?(p-y)/E:0;return this.points[g].mult(1-M).add(this.points[l].mult(M))}}function St(m,r){let l=!0;return m==="always"||m!=="never"&&r!=="never"||(l=!1),l}class It{constructor(r,l,h){let p=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(r/h),this.yCellCount=Math.ceil(l/h);for(let y=0;y<this.xCellCount*this.yCellCount;y++)p.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,l,h,p,g){this._forEachCell(l,h,p,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(g)}insertCircle(r,l,h,p){this._forEachCell(l-p,h-p,l+p,h+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(h),this.circles.push(p)}_insertBoxCell(r,l,h,p,g,y){this.boxCells[g].push(y)}_insertCircleCell(r,l,h,p,g,y){this.circleCells[g].push(y)}_query(r,l,h,p,g,y,E){if(h<0||r>this.width||p<0||l>this.height)return[];let M=[];if(r<=0&&l<=0&&this.width<=h&&this.height<=p){if(g)return[{key:null,x1:r,y1:l,x2:h,y2:p}];for(let A=0;A<this.boxKeys.length;A++)M.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(let A=0;A<this.circleKeys.length;A++){let O=this.circles[3*A],F=this.circles[3*A+1],N=this.circles[3*A+2];M.push({key:this.circleKeys[A],x1:O-N,y1:F-N,x2:O+N,y2:F+N})}}else this._forEachCell(r,l,h,p,this._queryCell,M,{hitTest:g,overlapMode:y,seenUids:{box:{},circle:{}}},E);return M}query(r,l,h,p){return this._query(r,l,h,p,!1,null)}hitTest(r,l,h,p,g,y){return this._query(r,l,h,p,!0,g,y).length>0}hitTestCircle(r,l,h,p,g){let y=r-h,E=r+h,M=l-h,A=l+h;if(E<0||y>this.width||A<0||M>this.height)return!1;let O=[];return this._forEachCell(y,M,E,A,this._queryCellCircle,O,{hitTest:!0,overlapMode:p,circle:{x:r,y:l,radius:h},seenUids:{box:{},circle:{}}},g),O.length>0}_queryCell(r,l,h,p,g,y,E,M){let{seenUids:A,hitTest:O,overlapMode:F}=E,N=this.boxCells[g];if(N!==null){let ee=this.bboxes;for(let _e of N)if(!A.box[_e]){A.box[_e]=!0;let ge=4*_e,be=this.boxKeys[_e];if(r<=ee[ge+2]&&l<=ee[ge+3]&&h>=ee[ge+0]&&p>=ee[ge+1]&&(!M||M(be))&&(!O||!St(F,be.overlapMode))&&(y.push({key:be,x1:ee[ge],y1:ee[ge+1],x2:ee[ge+2],y2:ee[ge+3]}),O))return!0}}let K=this.circleCells[g];if(K!==null){let ee=this.circles;for(let _e of K)if(!A.circle[_e]){A.circle[_e]=!0;let ge=3*_e,be=this.circleKeys[_e];if(this._circleAndRectCollide(ee[ge],ee[ge+1],ee[ge+2],r,l,h,p)&&(!M||M(be))&&(!O||!St(F,be.overlapMode))){let Ce=ee[ge],Ie=ee[ge+1],Me=ee[ge+2];if(y.push({key:be,x1:Ce-Me,y1:Ie-Me,x2:Ce+Me,y2:Ie+Me}),O)return!0}}}return!1}_queryCellCircle(r,l,h,p,g,y,E,M){let{circle:A,seenUids:O,overlapMode:F}=E,N=this.boxCells[g];if(N!==null){let ee=this.bboxes;for(let _e of N)if(!O.box[_e]){O.box[_e]=!0;let ge=4*_e,be=this.boxKeys[_e];if(this._circleAndRectCollide(A.x,A.y,A.radius,ee[ge+0],ee[ge+1],ee[ge+2],ee[ge+3])&&(!M||M(be))&&!St(F,be.overlapMode))return y.push(!0),!0}}let K=this.circleCells[g];if(K!==null){let ee=this.circles;for(let _e of K)if(!O.circle[_e]){O.circle[_e]=!0;let ge=3*_e,be=this.circleKeys[_e];if(this._circlesCollide(ee[ge],ee[ge+1],ee[ge+2],A.x,A.y,A.radius)&&(!M||M(be))&&!St(F,be.overlapMode))return y.push(!0),!0}}}_forEachCell(r,l,h,p,g,y,E,M){let A=this._convertToXCellCoord(r),O=this._convertToYCellCoord(l),F=this._convertToXCellCoord(h),N=this._convertToYCellCoord(p);for(let K=A;K<=F;K++)for(let ee=O;ee<=N;ee++)if(g.call(this,r,l,h,p,this.xCellCount*ee+K,y,E,M))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,l,h,p,g,y){let E=p-r,M=g-l,A=h+y;return A*A>E*E+M*M}_circleAndRectCollide(r,l,h,p,g,y,E){let M=(y-p)/2,A=Math.abs(r-(p+M));if(A>M+h)return!1;let O=(E-g)/2,F=Math.abs(l-(g+O));if(F>O+h)return!1;if(A<=M||F<=O)return!0;let N=A-M,K=F-O;return N*N+K*K<=h*h}}function ke(m,r,l){let h=s.K();if(!m){let{vecSouth:F,vecEast:N}=Ft(r),K=w();K[0]=N[0],K[1]=N[1],K[2]=F[0],K[3]=F[1],p=K,(O=(y=(g=K)[0])*(A=g[3])-(M=g[2])*(E=g[1]))&&(p[0]=A*(O=1/O),p[1]=-E*O,p[2]=-M*O,p[3]=y*O),h[0]=K[0],h[1]=K[1],h[4]=K[2],h[5]=K[3]}var p,g,y,E,M,A,O;return s.M(h,h,[1/l,1/l,1]),h}function li(m,r,l,h){if(m){let p=s.K();if(!r){let{vecSouth:g,vecEast:y}=Ft(l);p[0]=y[0],p[1]=y[1],p[4]=g[0],p[5]=g[1]}return s.M(p,p,[h,h,1]),p}return l.pixelsToClipSpaceMatrix}function Ft(m){let r=Math.cos(m.rollInRadians),l=Math.sin(m.rollInRadians),h=Math.cos(m.pitchInRadians),p=Math.cos(m.bearingInRadians),g=Math.sin(m.bearingInRadians),y=s.ao();y[0]=-p*h*l-g*r,y[1]=-g*h*l+p*r;let E=s.ap(y);E<1e-9?s.aq(y):s.ar(y,y,1/E);let M=s.ao();M[0]=p*h*r-g*l,M[1]=g*h*r+p*l;let A=s.ap(M);return A<1e-9?s.aq(M):s.ar(M,M,1/A),{vecEast:M,vecSouth:y}}function $e(m,r,l,h){let p;h?(p=[m,r,h(m,r),1],s.at(p,p,l)):(p=[m,r,0,1],is(p,p,l));let g=p[3];return{point:new s.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g,isOccluded:!1}}function Zi(m,r){return .5+m/r*.5}function Ht(m,r){return m.x>=-r[0]&&m.x<=r[0]&&m.y>=-r[1]&&m.y<=r[1]}function _i(m,r,l,h,p,g,y,E,M,A,O,F,N){let K=l?m.textSizeData:m.iconSizeData,ee=s.ak(K,r.transform.zoom),_e=[256/r.width*2+1,256/r.height*2+1],ge=l?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;ge.clear();let be=m.lineVertexArray,Ce=l?m.text.placedSymbolArray:m.icon.placedSymbolArray,Ie=r.transform.width/r.transform.height,Me=!1;for(let Ae=0;Ae<Ce.length;Ae++){let ze=Ce.get(Ae);if(ze.hidden||ze.writingMode===s.al.vertical&&!Me){Bn(ze.numGlyphs,ge);continue}Me=!1;let Re=new s.P(ze.anchorX,ze.anchorY),We={getElevation:N,pitchedLabelPlaneMatrix:h,lineVertexArray:be,pitchWithMap:g,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:Re,unwrappedTileID:M,width:A,height:O,translation:F},ut=it(ze.anchorX,ze.anchorY,We);if(!Ht(ut.point,_e)){Bn(ze.numGlyphs,ge);continue}let et=Zi(r.transform.cameraToCenterDistance,ut.signedDistanceFromCamera),rt=s.am(K,ee,ze),lt=g?rt*r.transform.getPitchedTextCorrection(ze.anchorX,ze.anchorY,M)/et:rt*et,Pt=Xt({projectionContext:We,pitchedLabelPlaneMatrixInverse:p,symbol:ze,fontSize:lt,flip:!1,keepUpright:y,glyphOffsetArray:m.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Ie,rotateToLine:E});Me=Pt.useVertical,(Pt.notEnoughRoom||Me||Pt.needsFlipping&&Xt({projectionContext:We,pitchedLabelPlaneMatrixInverse:p,symbol:ze,fontSize:lt,flip:!0,keepUpright:y,glyphOffsetArray:m.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Ie,rotateToLine:E}).notEnoughRoom)&&Bn(ze.numGlyphs,ge)}l?m.text.dynamicLayoutVertexBuffer.updateData(ge):m.icon.dynamicLayoutVertexBuffer.updateData(ge)}function $t(m,r,l,h,p,g,y,E){let M=g.glyphStartIndex+g.numGlyphs,A=g.lineStartIndex,O=g.lineStartIndex+g.lineLength,F=r.getoffsetX(g.glyphStartIndex),N=r.getoffsetX(M-1),K=Fe(m*F,l,h,p,g.segment,A,O,E,y);if(!K)return null;let ee=Fe(m*N,l,h,p,g.segment,A,O,E,y);return ee?E.projectionCache.anyProjectionOccluded?null:{first:K,last:ee}:null}function nt(m,r,l,h){return m===s.al.horizontal&&Math.abs(l.y-r.y)>Math.abs(l.x-r.x)*h?{useVertical:!0}:(m===s.al.vertical?r.y<l.y:r.x>l.x)?{needsFlipping:!0}:null}function Xt(m){let{projectionContext:r,pitchedLabelPlaneMatrixInverse:l,symbol:h,fontSize:p,flip:g,keepUpright:y,glyphOffsetArray:E,dynamicLayoutVertexArray:M,aspectRatio:A,rotateToLine:O}=m,F=p/24,N=h.lineOffsetX*F,K=h.lineOffsetY*F,ee;if(h.numGlyphs>1){let _e=h.glyphStartIndex+h.numGlyphs,ge=h.lineStartIndex,be=h.lineStartIndex+h.lineLength,Ce=$t(F,E,N,K,g,h,O,r);if(!Ce)return{notEnoughRoom:!0};let Ie=un(Ce.first.point.x,Ce.first.point.y,r,l),Me=un(Ce.last.point.x,Ce.last.point.y,r,l);if(y&&!g){let Ae=nt(h.writingMode,Ie,Me,A);if(Ae)return Ae}ee=[Ce.first];for(let Ae=h.glyphStartIndex+1;Ae<_e-1;Ae++)ee.push(Fe(F*E.getoffsetX(Ae),N,K,g,h.segment,ge,be,r,O));ee.push(Ce.last)}else{if(y&&!g){let ge=Ji(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,be=h.lineStartIndex+h.segment+1,Ce=new s.P(r.lineVertexArray.getx(be),r.lineVertexArray.gety(be)),Ie=Ji(Ce.x,Ce.y,r),Me=Ie.signedDistanceFromCamera>0?Ie.point:ci(r.tileAnchorPoint,Ce,ge,1,r),Ae=un(ge.x,ge.y,r,l),ze=un(Me.x,Me.y,r,l),Re=nt(h.writingMode,Ae,ze,A);if(Re)return Re}let _e=Fe(F*E.getoffsetX(h.glyphStartIndex),N,K,g,h.segment,h.lineStartIndex,h.lineStartIndex+h.lineLength,r,O);if(!_e||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ee=[_e]}for(let _e of ee)s.as(M,_e.point,_e.angle);return{}}function ci(m,r,l,h,p){let g=m.add(m.sub(r)._unit()),y=Ji(g.x,g.y,p).point,E=l.sub(y);return l.add(E._mult(h/E.mag()))}function sr(m,r,l){let h=r.projectionCache;if(h.projections[m])return h.projections[m];let p=new s.P(r.lineVertexArray.getx(m),r.lineVertexArray.gety(m)),g=Ji(p.x,p.y,r);if(g.signedDistanceFromCamera>0)return h.projections[m]=g.point,h.anyProjectionOccluded=h.anyProjectionOccluded||g.isOccluded,g.point;let y=m-l.direction;return ci(l.distanceFromAnchor===0?r.tileAnchorPoint:new s.P(r.lineVertexArray.getx(y),r.lineVertexArray.gety(y)),p,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,r)}function Ji(m,r,l){let h=m+l.translation[0],p=r+l.translation[1],g;return l.pitchWithMap?(g=$e(h,p,l.pitchedLabelPlaneMatrix,l.getElevation),g.isOccluded=!1):(g=l.transform.projectTileCoordinates(h,p,l.unwrappedTileID,l.getElevation),g.point.x=(.5*g.point.x+.5)*l.width,g.point.y=(.5*-g.point.y+.5)*l.height),g}function un(m,r,l,h){if(l.pitchWithMap){let p=[m,r,0,1];return s.at(p,p,h),l.transform.projectTileCoordinates(p[0]/p[3],p[1]/p[3],l.unwrappedTileID,l.getElevation).point}return{x:m/l.width*2-1,y:r/l.height*2-1}}function it(m,r,l){return l.transform.projectTileCoordinates(m,r,l.unwrappedTileID,l.getElevation)}function Jn(m,r,l){return m._unit()._perp()._mult(r*l)}function ho(m,r,l,h,p,g,y,E,M){if(E.projectionCache.offsets[m])return E.projectionCache.offsets[m];let A=l.add(r);if(m+M.direction<h||m+M.direction>=p)return E.projectionCache.offsets[m]=A,A;let O=sr(m+M.direction,E,M),F=Jn(O.sub(l),y,M.direction),N=l.add(F),K=O.add(F);return E.projectionCache.offsets[m]=s.au(g,A,N,K)||A,E.projectionCache.offsets[m]}function Fe(m,r,l,h,p,g,y,E,M){let A=h?m-r:m+r,O=A>0?1:-1,F=0;h&&(O*=-1,F=Math.PI),O<0&&(F+=Math.PI);let N,K=O>0?g+p:g+p+1;E.projectionCache.cachedAnchorPoint?N=E.projectionCache.cachedAnchorPoint:(N=Ji(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=N);let ee,_e,ge=N,be=N,Ce=0,Ie=0,Me=Math.abs(A),Ae=[],ze;for(;Ce+Ie<=Me;){if(K+=O,K<g||K>=y)return null;Ce+=Ie,be=ge,_e=ee;let ut={absOffsetX:Me,direction:O,distanceFromAnchor:Ce,previousVertex:be};if(ge=sr(K,E,ut),l===0)Ae.push(be),ze=ge.sub(be);else{let et,rt=ge.sub(be);et=rt.mag()===0?Jn(sr(K+O,E,ut).sub(ge),l,O):Jn(rt,l,O),_e||(_e=be.add(et)),ee=ho(K,et,ge,g,y,_e,l,E,ut),Ae.push(_e),ze=ee.sub(_e)}Ie=ze.mag()}let Re=ze._mult((Me-Ce)/Ie)._add(_e||be),We=F+Math.atan2(ge.y-be.y,ge.x-be.x);return Ae.push(Re),{point:Re,angle:M?We:0,path:Ae}}let Ei=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Bn(m,r){for(let l=0;l<m;l++){let h=r.length;r.resize(h+4),r.float32.set(Ei,3*h)}}function is(m,r,l){let h=r[0],p=r[1];return m[0]=l[0]*h+l[4]*p+l[12],m[1]=l[1]*h+l[5]*p+l[13],m[3]=l[3]*h+l[7]*p+l[15],m}let dr=100;class xn{constructor(r,l=new It(r.width+200,r.height+200,25),h=new It(r.width+200,r.height+200,25)){this.transform=r,this.grid=l,this.ignoredGrid=h,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+dr,this.screenBottomBoundary=r.height+dr,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,l,h,p,g,y,E,M,A,O,F,N){let K=this.projectAndGetPerspectiveRatio(r.anchorPointX+M[0],r.anchorPointY+M[1],g,O,N),ee=h*K.perspectiveRatio,_e;if(y||E)_e=this._projectCollisionBox(r,ee,p,g,y,E,M,K,O,F,N);else{let ze=K.x+(F?F.x*ee:0),Re=K.y+(F?F.y*ee:0);_e={allPointsOccluded:!1,box:[ze+r.x1*ee,Re+r.y1*ee,ze+r.x2*ee,Re+r.y2*ee]}}let[ge,be,Ce,Ie]=_e.box,Me=y?_e.allPointsOccluded:K.isOccluded,Ae=Me;return Ae||(Ae=K.perspectiveRatio<this.perspectiveRatioCutoff),Ae||(Ae=!this.isInsideGrid(ge,be,Ce,Ie)),Ae||l!=="always"&&this.grid.hitTest(ge,be,Ce,Ie,l,A)?{box:[ge,be,Ce,Ie],placeable:!1,offscreen:!1,occluded:Me}:{box:[ge,be,Ce,Ie],placeable:!0,offscreen:this.isOffscreen(ge,be,Ce,Ie),occluded:Me}}placeCollisionCircles(r,l,h,p,g,y,E,M,A,O,F,N,K,ee){let _e=[],ge=new s.P(l.anchorX,l.anchorY),be=this.getPerspectiveRatio(ge.x,ge.y,y,ee),Ce=(A?g*this.transform.getPitchedTextCorrection(l.anchorX,l.anchorY,y)/be:g*be)/s.ay,Ie={getElevation:ee,pitchedLabelPlaneMatrix:E,lineVertexArray:h,pitchWithMap:A,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ge,unwrappedTileID:y,width:this.transform.width,height:this.transform.height,translation:K},Me=$t(Ce,p,l.lineOffsetX*Ce,l.lineOffsetY*Ce,!1,l,!1,Ie),Ae=!1,ze=!1,Re=!0;if(Me){let We=.5*F*be+N,ut=new s.P(-100,-100),et=new s.P(this.screenRightBoundary,this.screenBottomBoundary),rt=new pt,lt=Me.first,Pt=Me.last,Tt=[];for(let Ti=lt.path.length-1;Ti>=1;Ti--)Tt.push(lt.path[Ti]);for(let Ti=1;Ti<Pt.path.length;Ti++)Tt.push(Pt.path[Ti]);let vt=2.5*We;if(A){let Ti=this.projectPathToScreenSpace(Tt,Ie);Tt=Ti.some(Gi=>Gi.signedDistanceFromCamera<=0)?[]:Ti.map(Gi=>Gi.point)}let Gt=[];if(Tt.length>0){let Ti=Tt[0].clone(),Gi=Tt[0].clone();for(let Rr=1;Rr<Tt.length;Rr++)Ti.x=Math.min(Ti.x,Tt[Rr].x),Ti.y=Math.min(Ti.y,Tt[Rr].y),Gi.x=Math.max(Gi.x,Tt[Rr].x),Gi.y=Math.max(Gi.y,Tt[Rr].y);Gt=Ti.x>=ut.x&&Gi.x<=et.x&&Ti.y>=ut.y&&Gi.y<=et.y?[Tt]:Gi.x<ut.x||Ti.x>et.x||Gi.y<ut.y||Ti.y>et.y?[]:s.av([Tt],ut.x,ut.y,et.x,et.y)}for(let Ti of Gt){rt.reset(Ti,.25*We);let Gi=0;Gi=rt.length<=.5*We?1:Math.ceil(rt.paddedLength/vt)+1;for(let Rr=0;Rr<Gi;Rr++){let vr=Rr/Math.max(Gi-1,1),Or=rt.lerp(vr),Lr=Or.x+dr,Cr=Or.y+dr;_e.push(Lr,Cr,We,0);let nr=Lr-We,hn=Cr-We,Mn=Lr+We,qn=Cr+We;if(Re=Re&&this.isOffscreen(nr,hn,Mn,qn),ze=ze||this.isInsideGrid(nr,hn,Mn,qn),r!=="always"&&this.grid.hitTestCircle(Lr,Cr,We,r,O)&&(Ae=!0,!M))return{circles:[],offscreen:!1,collisionDetected:Ae}}}}return{circles:!M&&Ae||!ze||be<this.perspectiveRatioCutoff?[]:_e,offscreen:Re,collisionDetected:Ae}}projectPathToScreenSpace(r,l){let h=function(p,g){let y=s.K();return s.an(y,g.pitchedLabelPlaneMatrix),p.map(E=>{let M=$e(E.x,E.y,y,g.getElevation),A=g.transform.projectTileCoordinates(M.point.x,M.point.y,g.unwrappedTileID,g.getElevation);return A.point.x=(.5*A.point.x+.5)*g.width,A.point.y=(.5*-A.point.y+.5)*g.height,A})}(r,l);return function(p){let g=0,y=0,E=0,M=0;for(let A=0;A<p.length;A++)p[A].isOccluded?(E=A+1,M=0):(M++,M>y&&(y=M,g=E));return p.slice(g,g+y)}(h)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let l=[],h=1/0,p=1/0,g=-1/0,y=-1/0;for(let O of r){let F=new s.P(O.x+dr,O.y+dr);h=Math.min(h,F.x),p=Math.min(p,F.y),g=Math.max(g,F.x),y=Math.max(y,F.y),l.push(F)}let E=this.grid.query(h,p,g,y).concat(this.ignoredGrid.query(h,p,g,y)),M={},A={};for(let O of E){let F=O.key;if(M[F.bucketInstanceId]===void 0&&(M[F.bucketInstanceId]={}),M[F.bucketInstanceId][F.featureIndex])continue;let N=[new s.P(O.x1,O.y1),new s.P(O.x2,O.y1),new s.P(O.x2,O.y2),new s.P(O.x1,O.y2)];s.aw(l,N)&&(M[F.bucketInstanceId][F.featureIndex]=!0,A[F.bucketInstanceId]===void 0&&(A[F.bucketInstanceId]=[]),A[F.bucketInstanceId].push(F.featureIndex))}return A}insertCollisionBox(r,l,h,p,g,y){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:g,collisionGroupID:y,overlapMode:l},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,l,h,p,g,y){let E=h?this.ignoredGrid:this.grid,M={bucketInstanceId:p,featureIndex:g,collisionGroupID:y,overlapMode:l};for(let A=0;A<r.length;A+=4)E.insertCircle(M,r[A],r[A+1],r[A+2])}projectAndGetPerspectiveRatio(r,l,h,p,g){if(g){let y;p?(y=[r,l,p(r,l),1],s.at(y,y,g)):(y=[r,l,0,1],is(y,y,g));let E=y[3];return{x:(y[0]/E+1)/2*this.transform.width+dr,y:(-y[1]/E+1)/2*this.transform.height+dr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}{let y=this.transform.projectTileCoordinates(r,l,h,p);return{x:(y.point.x+1)/2*this.transform.width+dr,y:(1-y.point.y)/2*this.transform.height+dr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/y.signedDistanceFromCamera*.5,isOccluded:y.isOccluded,signedDistanceFromCamera:y.signedDistanceFromCamera}}}getPerspectiveRatio(r,l,h,p){let g=this.transform.projectTileCoordinates(r,l,h,p);return .5+this.transform.cameraToCenterDistance/g.signedDistanceFromCamera*.5}isOffscreen(r,l,h,p){return h<dr||r>=this.screenRightBoundary||p<dr||l>this.screenBottomBoundary}isInsideGrid(r,l,h,p){return h>=0&&r<this.gridRightBoundary&&p>=0&&l<this.gridBottomBoundary}getViewportMatrix(){let r=s.ad([]);return s.L(r,r,[-100,-100,0]),r}_projectCollisionBox(r,l,h,p,g,y,E,M,A,O,F){let N=1,K=0,ee=0,_e=1,ge=r.anchorPointX+E[0],be=r.anchorPointY+E[1];if(y&&!g){let Tt=this.projectAndGetPerspectiveRatio(ge+1,be,p,A,F),vt=Tt.x-M.x,Gt=Math.atan((Tt.y-M.y)/vt)+(vt<0?Math.PI:0),Ti=Math.sin(Gt),Gi=Math.cos(Gt);N=Gi,K=Ti,ee=-Ti,_e=Gi}else if(!y&&g){let Tt=Ft(this.transform);N=Tt.vecEast[0],K=Tt.vecEast[1],ee=Tt.vecSouth[0],_e=Tt.vecSouth[1]}let Ce=M.x,Ie=M.y,Me=l;g&&(Ce=ge,Ie=be,Me=Math.pow(2,-(this.transform.zoom-h.overscaledZ)),Me*=this.transform.getPitchedTextCorrection(ge,be,p),O||(Me*=s.ae(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),O&&(Ce+=N*O.x*Me+ee*O.y*Me,Ie+=K*O.x*Me+_e*O.y*Me);let Ae=r.x1*Me,ze=r.x2*Me,Re=(Ae+ze)/2,We=r.y1*Me,ut=r.y2*Me,et=(We+ut)/2,rt=[{offsetX:Ae,offsetY:We},{offsetX:Re,offsetY:We},{offsetX:ze,offsetY:We},{offsetX:ze,offsetY:et},{offsetX:ze,offsetY:ut},{offsetX:Re,offsetY:ut},{offsetX:Ae,offsetY:ut},{offsetX:Ae,offsetY:et}],lt=[];for(let{offsetX:Tt,offsetY:vt}of rt)lt.push(new s.P(Ce+N*Tt+ee*vt,Ie+K*Tt+_e*vt));let Pt=!1;if(g){let Tt=lt.map(vt=>this.projectAndGetPerspectiveRatio(vt.x,vt.y,p,A,F));Pt=Tt.some(vt=>!vt.isOccluded),lt=Tt.map(vt=>new s.P(vt.x,vt.y))}else Pt=!0;return{box:s.ax(lt),allPointsOccluded:!Pt}}}class bi{constructor(r,l,h,p){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):p&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class Sa{constructor(r,l,h,p,g){this.text=new bi(r?r.text:null,l,h,g),this.icon=new bi(r?r.icon:null,l,p,g)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Cs{constructor(r,l,h){this.text=r,this.icon=l,this.skipFade=h}}class Ll{constructor(r,l,h,p,g){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=h,this.bucketIndex=p,this.tileID=g}}class At{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){let l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:h=>h.collisionGroupID===l}}return this.collisionGroups[r]}}function wn(m,r,l,h,p){let{horizontalAlign:g,verticalAlign:y}=s.aE(m);return new s.P(-(g-.5)*r+h[0]*p,-(y-.5)*l+h[1]*p)}class Ws{constructor(r,l,h,p,g){this.transform=r.clone(),this.terrain=l,this.collisionIndex=new xn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new At(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=g,g&&(g.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){let l=this.terrain;return l?(h,p)=>l.getElevation(r,h,p):null}getBucketParts(r,l,h,p){let g=h.getBucket(l),y=h.latestFeatureIndex;if(!g||!y||l.id!==g.layerIds[0])return;let E=h.collisionBoxArray,M=g.layers[0].layout,A=g.layers[0].paint,O=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),F=h.tileSize/s.Z,N=h.tileID.toUnwrapped(),K=M.get("text-rotation-alignment")==="map",ee=s.az(h,1,this.transform.zoom),_e=s.aA(this.collisionIndex.transform,h,A.get("text-translate"),A.get("text-translate-anchor")),ge=s.aA(this.collisionIndex.transform,h,A.get("icon-translate"),A.get("icon-translate-anchor")),be=ke(K,this.transform,ee);this.retainedQueryData[g.bucketInstanceId]=new Ll(g.bucketInstanceId,y,g.sourceLayerIndex,g.index,h.tileID);let Ce={bucket:g,layout:M,translationText:_e,translationIcon:ge,unwrappedTileID:N,pitchedLabelPlaneMatrix:be,scale:O,textPixelRatio:F,holdingForFade:h.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:s.ak(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(p)for(let Ie of g.sortKeyRanges){let{sortKey:Me,symbolInstanceStart:Ae,symbolInstanceEnd:ze}=Ie;r.push({sortKey:Me,symbolInstanceStart:Ae,symbolInstanceEnd:ze,parameters:Ce})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:Ce})}attemptAnchorPlacement(r,l,h,p,g,y,E,M,A,O,F,N,K,ee,_e,ge,be,Ce,Ie,Me){let Ae=s.aB[r.textAnchor],ze=[r.textOffset0,r.textOffset1],Re=wn(Ae,h,p,ze,g),We=this.collisionIndex.placeCollisionBox(l,N,M,A,O,E,y,ge,F.predicate,Ie,Re,Me);if((!Ce||this.collisionIndex.placeCollisionBox(Ce,N,M,A,O,E,y,be,F.predicate,Ie,Re,Me).placeable)&&We.placeable){let ut;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(ut=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:ze,width:h,height:p,anchor:Ae,textBoxScale:g,prevAnchor:ut},this.markUsedJustification(ee,Ae,K,_e),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,_e,K),this.placedOrientations[K.crossTileID]=_e),{shift:Re,placedGlyphBoxes:We}}}placeLayerBucketPart(r,l,h){let{bucket:p,layout:g,translationText:y,translationIcon:E,unwrappedTileID:M,pitchedLabelPlaneMatrix:A,textPixelRatio:O,holdingForFade:F,collisionBoxArray:N,partiallyEvaluatedTextSize:K,collisionGroup:ee}=r.parameters,_e=g.get("text-optional"),ge=g.get("icon-optional"),be=s.aC(g,"text-overlap","text-allow-overlap"),Ce=be==="always",Ie=s.aC(g,"icon-overlap","icon-allow-overlap"),Me=Ie==="always",Ae=g.get("text-rotation-alignment")==="map",ze=g.get("text-pitch-alignment")==="map",Re=g.get("icon-text-fit")!=="none",We=g.get("symbol-z-order")==="viewport-y",ut=Ce&&(Me||!p.hasIconData()||ge),et=Me&&(Ce||!p.hasTextData()||_e);!p.collisionArrays&&N&&p.deserializeCollisionBoxes(N);let rt=this.retainedQueryData[p.bucketInstanceId].tileID,lt=this._getTerrainElevationFunc(rt),Pt=this.transform.getFastPathSimpleProjectionMatrix(rt),Tt=(vt,Gt,Ti)=>{var Gi,Rr;if(l[vt.crossTileID])return;if(F)return void(this.placements[vt.crossTileID]=new Cs(!1,!1,!1));let vr=!1,Or=!1,Lr=!0,Cr=null,nr={box:null,placeable:!1,offscreen:null,occluded:!1},hn={placeable:!1},Mn=null,qn=null,or=null,hl=0,fa=0,pl=0;Gt.textFeatureIndex?hl=Gt.textFeatureIndex:vt.useRuntimeCollisionCircles&&(hl=vt.featureIndex),Gt.verticalTextFeatureIndex&&(fa=Gt.verticalTextFeatureIndex);let Xl=Gt.textBox;if(Xl){let Wo=on=>{let sn=s.al.horizontal;if(p.allowVerticalPlacement&&!on&&this.prevPlacement){let bo=this.prevPlacement.placedOrientations[vt.crossTileID];bo&&(this.placedOrientations[vt.crossTileID]=bo,sn=bo,this.markUsedOrientation(p,sn,vt))}return sn},ml=(on,sn)=>{if(p.allowVerticalPlacement&&vt.numVerticalGlyphVertices>0&&Gt.verticalTextBox){for(let bo of p.writingModes)if(bo===s.al.vertical?(nr=sn(),hn=nr):nr=on(),nr&&nr.placeable)break}else nr=on()},Ba=vt.textAnchorOffsetStartIndex,gl=vt.textAnchorOffsetEndIndex;if(gl===Ba){let on=(sn,bo)=>{let Mr=this.collisionIndex.placeCollisionBox(sn,be,O,rt,M,ze,Ae,y,ee.predicate,lt,void 0,Pt);return Mr&&Mr.placeable&&(this.markUsedOrientation(p,bo,vt),this.placedOrientations[vt.crossTileID]=bo),Mr};ml(()=>on(Xl,s.al.horizontal),()=>{let sn=Gt.verticalTextBox;return p.allowVerticalPlacement&&vt.numVerticalGlyphVertices>0&&sn?on(sn,s.al.vertical):{box:null,offscreen:null}}),Wo(nr&&nr.placeable)}else{let on=s.aB[(Rr=(Gi=this.prevPlacement)===null||Gi===void 0?void 0:Gi.variableOffsets[vt.crossTileID])===null||Rr===void 0?void 0:Rr.anchor],sn=(Mr,th,ug)=>{let dg=Mr.x2-Mr.x1,Lb=Mr.y2-Mr.y1,qp=vt.textBoxScale,Uu=Re&&Ie==="never"?th:null,ds=null,ma=be==="never"?1:2,hs="never";on&&ma++;for(let Va=0;Va<ma;Va++){for(let ih=Ba;ih<gl;ih++){let _l=p.textAnchorOffsets.get(ih);if(on&&_l.textAnchor!==on)continue;let Hp=this.attemptAnchorPlacement(_l,Mr,dg,Lb,qp,Ae,ze,O,rt,M,ee,hs,vt,p,ug,y,E,Uu,lt);if(Hp&&(ds=Hp.placedGlyphBoxes,ds&&ds.placeable))return vr=!0,Cr=Hp.shift,ds}on?on=null:hs=be}return h&&!ds&&(ds={box:this.collisionIndex.placeCollisionBox(Xl,"always",O,rt,M,ze,Ae,y,ee.predicate,lt,void 0,Pt).box,offscreen:!1,placeable:!1,occluded:!1}),ds};ml(()=>sn(Xl,Gt.iconBox,s.al.horizontal),()=>{let Mr=Gt.verticalTextBox;return p.allowVerticalPlacement&&(!nr||!nr.placeable)&&vt.numVerticalGlyphVertices>0&&Mr?sn(Mr,Gt.verticalIconBox,s.al.vertical):{box:null,occluded:!0,offscreen:null}}),nr&&(vr=nr.placeable,Lr=nr.offscreen);let bo=Wo(nr&&nr.placeable);if(!vr&&this.prevPlacement){let Mr=this.prevPlacement.variableOffsets[vt.crossTileID];Mr&&(this.variableOffsets[vt.crossTileID]=Mr,this.markUsedJustification(p,Mr.anchor,vt,bo))}}}if(Mn=nr,vr=Mn&&Mn.placeable,Lr=Mn&&Mn.offscreen,vt.useRuntimeCollisionCircles){let Wo=p.text.placedSymbolArray.get(vt.centerJustifiedTextSymbolIndex),ml=s.am(p.textSizeData,K,Wo),Ba=g.get("text-padding");qn=this.collisionIndex.placeCollisionCircles(be,Wo,p.lineVertexArray,p.glyphOffsetArray,ml,M,A,h,ze,ee.predicate,vt.collisionCircleDiameter,Ba,y,lt),qn.circles.length&&qn.collisionDetected&&!h&&s.w("Collisions detected, but collision boxes are not shown"),vr=Ce||qn.circles.length>0&&!qn.collisionDetected,Lr=Lr&&qn.offscreen}if(Gt.iconFeatureIndex&&(pl=Gt.iconFeatureIndex),Gt.iconBox){let Wo=ml=>this.collisionIndex.placeCollisionBox(ml,Ie,O,rt,M,ze,Ae,E,ee.predicate,lt,Re&&Cr?Cr:void 0,Pt);hn&&hn.placeable&&Gt.verticalIconBox?(or=Wo(Gt.verticalIconBox),Or=or.placeable):(or=Wo(Gt.iconBox),Or=or.placeable),Lr=Lr&&or.offscreen}let Vu=_e||vt.numHorizontalGlyphVertices===0&&vt.numVerticalGlyphVertices===0,fl=ge||vt.numIconVertices===0;Vu||fl?fl?Vu||(Or=Or&&vr):vr=Or&&vr:Or=vr=Or&&vr;let Yl=Or&&or.placeable;if(vr&&Mn.placeable&&this.collisionIndex.insertCollisionBox(Mn.box,be,g.get("text-ignore-placement"),p.bucketInstanceId,hn&&hn.placeable&&fa?fa:hl,ee.ID),Yl&&this.collisionIndex.insertCollisionBox(or.box,Ie,g.get("icon-ignore-placement"),p.bucketInstanceId,pl,ee.ID),qn&&vr&&this.collisionIndex.insertCollisionCircles(qn.circles,be,g.get("text-ignore-placement"),p.bucketInstanceId,hl,ee.ID),h&&this.storeCollisionData(p.bucketInstanceId,Ti,Gt,Mn,or,qn),vt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[vt.crossTileID]=new Cs((vr||ut)&&!Mn?.occluded,(Or||et)&&!or?.occluded,Lr||p.justReloaded),l[vt.crossTileID]=!0};if(We){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let vt=p.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Gt=vt.length-1;Gt>=0;--Gt){let Ti=vt[Gt];Tt(p.symbolInstances.get(Ti),p.collisionArrays[Ti],Ti)}}else for(let vt=r.symbolInstanceStart;vt<r.symbolInstanceEnd;vt++)Tt(p.symbolInstances.get(vt),p.collisionArrays[vt],vt);p.justReloaded=!1}storeCollisionData(r,l,h,p,g,y){if(h.textBox||h.iconBox){let E,M;this.collisionBoxArrays.has(r)?E=this.collisionBoxArrays.get(r):(E=new Map,this.collisionBoxArrays.set(r,E)),E.has(l)?M=E.get(l):(M={text:null,icon:null},E.set(l,M)),h.textBox&&(M.text=p.box),h.iconBox&&(M.icon=g.box)}if(y){let E=this.collisionCircleArrays[r];E===void 0&&(E=this.collisionCircleArrays[r]=[]);for(let M=0;M<y.circles.length;M+=4)E.push(y.circles[M+0]-dr),E.push(y.circles[M+1]-dr),E.push(y.circles[M+2]),E.push(y.collisionDetected?1:0)}}markUsedJustification(r,l,h,p){let g;g=p===s.al.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[s.aD(l)];let y=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(let E of y)E>=0&&(r.text.placedSymbolArray.get(E).crossTileID=g>=0&&E!==g?0:h.crossTileID)}markUsedOrientation(r,l,h){let p=l===s.al.horizontal||l===s.al.horizontalOnly?l:0,g=l===s.al.vertical?l:0,y=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(let E of y)r.text.placedSymbolArray.get(E).placedOrientation=p;h.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=g)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;let l=this.prevPlacement,h=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;let p=l?l.symbolFadeChange(r):1,g=l?l.opacities:{},y=l?l.variableOffsets:{},E=l?l.placedOrientations:{};for(let M in this.placements){let A=this.placements[M],O=g[M];O?(this.opacities[M]=new Sa(O,p,A.text,A.icon),h=h||A.text!==O.text.placed||A.icon!==O.icon.placed):(this.opacities[M]=new Sa(null,p,A.text,A.icon,A.skipFade),h=h||A.text||A.icon)}for(let M in g){let A=g[M];if(!this.opacities[M]){let O=new Sa(A,p,!1,!1);O.isHidden()||(this.opacities[M]=O,h=h||A.text.placed||A.icon.placed)}}for(let M in y)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=y[M]);for(let M in E)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=E[M]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)}updateLayerOpacities(r,l){let h={};for(let p of l){let g=p.getBucket(r);g&&p.latestFeatureIndex&&r.id===g.layerIds[0]&&this.updateBucketOpacities(g,p.tileID,h,p.collisionBoxArray)}}updateBucketOpacities(r,l,h,p){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();let g=r.layers[0],y=g.layout,E=new Sa(null,0,!1,!1,!0),M=y.get("text-allow-overlap"),A=y.get("icon-allow-overlap"),O=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=y.get("text-rotation-alignment")==="map",N=y.get("text-pitch-alignment")==="map",K=y.get("icon-text-fit")!=="none",ee=new Sa(null,0,M&&(A||!r.hasIconData()||y.get("icon-optional")),A&&(M||!r.hasTextData()||y.get("text-optional")),!0);!r.collisionArrays&&p&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(p);let _e=(be,Ce,Ie)=>{for(let Me=0;Me<Ce/4;Me++)be.opacityVertexArray.emplaceBack(Ie);be.hasVisibleVertices=be.hasVisibleVertices||Ie!==Vn},ge=this.collisionBoxArrays.get(r.bucketInstanceId);for(let be=0;be<r.symbolInstances.length;be++){let Ce=r.symbolInstances.get(be),{numHorizontalGlyphVertices:Ie,numVerticalGlyphVertices:Me,crossTileID:Ae}=Ce,ze=this.opacities[Ae];h[Ae]?ze=E:ze||(ze=ee,this.opacities[Ae]=ze),h[Ae]=!0;let Re=Ce.numIconVertices>0,We=this.placedOrientations[Ce.crossTileID],ut=We===s.al.vertical,et=We===s.al.horizontal||We===s.al.horizontalOnly;if(Ie>0||Me>0){let lt=Ma(ze.text);_e(r.text,Ie,ut?Vn:lt),_e(r.text,Me,et?Vn:lt);let Pt=ze.text.isHidden();[Ce.rightJustifiedTextSymbolIndex,Ce.centerJustifiedTextSymbolIndex,Ce.leftJustifiedTextSymbolIndex].forEach(Gt=>{Gt>=0&&(r.text.placedSymbolArray.get(Gt).hidden=Pt||ut?1:0)}),Ce.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ce.verticalPlacedTextSymbolIndex).hidden=Pt||et?1:0);let Tt=this.variableOffsets[Ce.crossTileID];Tt&&this.markUsedJustification(r,Tt.anchor,Ce,We);let vt=this.placedOrientations[Ce.crossTileID];vt&&(this.markUsedJustification(r,"left",Ce,vt),this.markUsedOrientation(r,vt,Ce))}if(Re){let lt=Ma(ze.icon),Pt=!(K&&Ce.verticalPlacedIconSymbolIndex&&ut);Ce.placedIconSymbolIndex>=0&&(_e(r.icon,Ce.numIconVertices,Pt?lt:Vn),r.icon.placedSymbolArray.get(Ce.placedIconSymbolIndex).hidden=ze.icon.isHidden()),Ce.verticalPlacedIconSymbolIndex>=0&&(_e(r.icon,Ce.numVerticalIconVertices,Pt?Vn:lt),r.icon.placedSymbolArray.get(Ce.verticalPlacedIconSymbolIndex).hidden=ze.icon.isHidden())}let rt=ge&&ge.has(be)?ge.get(be):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){let lt=r.collisionArrays[be];if(lt){let Pt=new s.P(0,0);if(lt.textBox||lt.verticalTextBox){let Tt=!0;if(O){let vt=this.variableOffsets[Ae];vt?(Pt=wn(vt.anchor,vt.width,vt.height,vt.textOffset,vt.textBoxScale),F&&Pt._rotate(N?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Tt=!1}if(lt.textBox||lt.verticalTextBox){let vt;lt.textBox&&(vt=ut),lt.verticalTextBox&&(vt=et),rl(r.textCollisionBox.collisionVertexArray,ze.text.placed,!Tt||vt,rt.text,Pt.x,Pt.y)}}if(lt.iconBox||lt.verticalIconBox){let Tt=!!(!et&&lt.verticalIconBox),vt;lt.iconBox&&(vt=Tt),lt.verticalIconBox&&(vt=!Tt),rl(r.iconCollisionBox.collisionVertexArray,ze.icon.placed,vt,rt.icon,K?Pt.x:0,K?Pt.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,l){let h=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*h>r}setStale(){this.stale=!0}}function rl(m,r,l,h,p,g){h&&h.length!==0||(h=[0,0,0,0]);let y=h[0]-dr,E=h[1]-dr,M=h[2]-dr,A=h[3]-dr;m.emplaceBack(r?1:0,l?1:0,p||0,g||0,y,E),m.emplaceBack(r?1:0,l?1:0,p||0,g||0,M,E),m.emplaceBack(r?1:0,l?1:0,p||0,g||0,M,A),m.emplaceBack(r?1:0,l?1:0,p||0,g||0,y,A)}let er=Math.pow(2,25),Ta=Math.pow(2,24),nl=Math.pow(2,17),Md=Math.pow(2,16),Zs=Math.pow(2,9),fp=Math.pow(2,8),Id=Math.pow(2,1);function Ma(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;let r=m.placed?1:0,l=Math.floor(127*m.opacity);return l*er+r*Ta+l*nl+r*Md+l*Zs+r*fp+l*Id+r}let Vn=0;class Nl{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,l,h,p,g){let y=this._bucketParts;for(;this._currentTileIndex<r.length;)if(l.getBucketParts(y,p,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,y.sort((E,M)=>E.sortKey-M.sortKey));this._currentPartIndex<y.length;)if(l.placeLayerBucketPart(y[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,g())return!0;return!1}}class gc{constructor(r,l,h,p,g,y,E,M){this.placement=new Ws(r,l,y,E,M),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=g,this._done=!1}isDone(){return this._done}continuePlacement(r,l,h){let p=I.now(),g=()=>!this._forceFullPlacement&&I.now()-p>2;for(;this._currentPlacementIndex>=0;){let y=l[r[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(y.type==="symbol"&&(!y.minzoom||y.minzoom<=E)&&(!y.maxzoom||y.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new Nl(y)),this._inProgressLayer.continuePlacement(h[y.source],this.placement,this._showCollisionBoxes,y,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}let Xs=512/s.Z/2;class Ys{constructor(r,l,h){this.tileID=r,this.bucketInstanceId=h,this._symbolsByKey={};let p=new Map;for(let g=0;g<l.length;g++){let y=l.get(g),E=y.key,M=p.get(E);M?M.push(y):p.set(E,[y])}for(let[g,y]of p){let E={positions:y.map(M=>({x:Math.floor(M.anchorX*Xs),y:Math.floor(M.anchorY*Xs)})),crossTileIDs:y.map(M=>M.crossTileID)};if(E.positions.length>128){let M=new s.aF(E.positions.length,16,Uint16Array);for(let{x:A,y:O}of E.positions)M.add(A,O);M.finish(),delete E.positions,E.index=M}this._symbolsByKey[g]=E}}getScaledCoordinates(r,l){let{x:h,y:p,z:g}=this.tileID.canonical,{x:y,y:E,z:M}=l.canonical,A=Xs/Math.pow(2,M-g),O=(E*s.Z+r.anchorY)*A,F=p*s.Z*Xs;return{x:Math.floor((y*s.Z+r.anchorX)*A-h*s.Z*Xs),y:Math.floor(O-F)}}findMatches(r,l,h){let p=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let g=0;g<r.length;g++){let y=r.get(g);if(y.crossTileID)continue;let E=this._symbolsByKey[y.key];if(!E)continue;let M=this.getScaledCoordinates(y,l);if(E.index){let A=E.index.range(M.x-p,M.y-p,M.x+p,M.y+p).sort();for(let O of A){let F=E.crossTileIDs[O];if(!h[F]){h[F]=!0,y.crossTileID=F;break}}}else if(E.positions)for(let A=0;A<E.positions.length;A++){let O=E.positions[A],F=E.crossTileIDs[A];if(Math.abs(O.x-M.x)<=p&&Math.abs(O.y-M.y)<=p&&!h[F]){h[F]=!0,y.crossTileID=F;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class _c{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Po{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){let l=Math.round((r-this.lng)/360);if(l!==0)for(let h in this.indexes){let p=this.indexes[h],g={};for(let y in p){let E=p[y];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+l),g[E.tileID.key]=E}this.indexes[h]=g}this.lng=r}addBucket(r,l,h){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let g=0;g<l.symbolInstances.length;g++)l.symbolInstances.get(g).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});let p=this.usedCrossTileIDs[r.overscaledZ];for(let g in this.indexes){let y=this.indexes[g];if(Number(g)>r.overscaledZ)for(let E in y){let M=y[E];M.tileID.isChildOf(r)&&M.findMatches(l.symbolInstances,r,p)}else{let E=y[r.scaledTo(Number(g)).key];E&&E.findMatches(l.symbolInstances,r,p)}}for(let g=0;g<l.symbolInstances.length;g++){let y=l.symbolInstances.get(g);y.crossTileID||(y.crossTileID=h.generate(),p[y.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ys(r,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(r,l){for(let h of l.getCrossTileIDsLists())for(let p of h)delete this.usedCrossTileIDs[r][p]}removeStaleBuckets(r){let l=!1;for(let h in this.indexes){let p=this.indexes[h];for(let g in p)r[p[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,p[g]),delete p[g],l=!0)}return l}}class Xi{constructor(){this.layerIndexes={},this.crossTileIDs=new _c,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,l,h){let p=this.layerIndexes[r.id];p===void 0&&(p=this.layerIndexes[r.id]=new Po);let g=!1,y={};p.handleWrapJump(h);for(let E of l){let M=E.getBucket(r);M&&r.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(E.tileID,M,this.crossTileIDs)&&(g=!0),y[M.bucketInstanceId]=!0)}return p.removeStaleBuckets(y)&&(g=!0),g}pruneUnusedLayers(r){let l={};r.forEach(h=>{l[h]=!0});for(let h in this.layerIndexes)l[h]||delete this.layerIndexes[h]}}var vu="void main() {fragColor=vec4(1.0);}";let gr={prelude:ki(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:ki("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:ki("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:ki(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:ki(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ki(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ki(vu,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:ki(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:ki(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ki("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ki("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ki("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:ki(vu,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:ki(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:ki(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:ki(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:ki(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ki(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ki(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ki(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ki(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:ki(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ki(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ki(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ki(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ki(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:ki(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ki(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ki(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ki("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ki("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ki("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:ki("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:ki(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:ki("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ki(m,r){let l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=r.match(/in ([\w]+) ([\w]+)/g),p=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),g=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=g?g.concat(p):p,E={};return{fragmentSource:m=m.replace(l,(M,A,O,F,N)=>(E[N]=!0,A==="define"?`
#ifndef HAS_UNIFORM_u_${N}
in ${O} ${F} ${N};
#else
uniform ${O} ${F} u_${N};
#endif
`:`
#ifdef HAS_UNIFORM_u_${N}
    ${O} ${F} ${N} = u_${N};
#endif
`)),vertexSource:r=r.replace(l,(M,A,O,F,N)=>{let K=F==="float"?"vec2":"vec4",ee=N.match(/color/)?"color":K;return E[N]?A==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
in ${O} ${K} a_${N};
out ${O} ${F} ${N};
#else
uniform ${O} ${F} u_${N};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = a_${N};
#else
    ${O} ${F} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = unpack_mix_${ee}(a_${N}, u_${N}_t);
#else
    ${O} ${F} ${N} = u_${N};
#endif
`:A==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
in ${O} ${K} a_${N};
#else
uniform ${O} ${F} u_${N};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${O} ${F} ${N} = a_${N};
#else
    ${O} ${F} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${O} ${F} ${N} = unpack_mix_${ee}(a_${N}, u_${N}_t);
#else
    ${O} ${F} ${N} = u_${N};
#endif
`}),staticAttributes:h,staticUniforms:y}}class rs{constructor(r,l,h){this.vertexBuffer=r,this.indexBuffer=l,this.segments=h}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Yr=s.aG([{name:"a_pos",type:"Int16",components:2}]);let Ia="#define PROJECTION_MERCATOR",vi="mercator";class Fl{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return vi}get shaderDefine(){return Ia}get shaderPreludeCode(){return gr.projectionMercator}get vertexShaderPreludeCode(){return gr.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,l,h,p,g){if(this._cachedMesh)return this._cachedMesh;let y=new s.aI;y.emplaceBack(0,0),y.emplaceBack(s.Z,0),y.emplaceBack(0,s.Z),y.emplaceBack(s.Z,s.Z);let E=r.createVertexBuffer(y,Yr.members),M=s.aJ.simpleSegment(0,0,4,2),A=new s.aK;A.emplaceBack(1,0,2),A.emplaceBack(1,2,3);let O=r.createIndexBuffer(A);return this._cachedMesh=new rs(E,O,M),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class zl{constructor(r=0,l=0,h=0,p=0){if(isNaN(r)||r<0||isNaN(l)||l<0||isNaN(h)||h<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=h,this.right=p}interpolate(r,l,h){return l.top!=null&&r.top!=null&&(this.top=s.B.number(r.top,l.top,h)),l.bottom!=null&&r.bottom!=null&&(this.bottom=s.B.number(r.bottom,l.bottom,h)),l.left!=null&&r.left!=null&&(this.left=s.B.number(r.left,l.left,h)),l.right!=null&&r.right!=null&&(this.right=s.B.number(r.right,l.right,h)),this}getCenter(r,l){let h=s.ae((this.left+r-this.right)/2,0,r),p=s.ae((this.top+l-this.bottom)/2,0,l);return new s.P(h,p)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new zl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function $i(m,r){if(!m.renderWorldCopies||m.lngRange)return;let l=r.lng-m.center.lng;r.lng+=l>180?-360:l<-180?360:0}function ni(m){return Math.max(0,Math.floor(m))}class Ui{constructor(r,l,h,p,g,y){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=l||0,this._maxZoom=h||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ni(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new zl,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,l,h){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=ni(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new zl(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!h&&r.autoCalculateNearFarZ,l&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){let l=s.aL(r,-180,180)*Math.PI/180;var h,p,g,y,E,M,A,O,F;this._bearingInRadians!==l&&(this._unmodified=!1,this._bearingInRadians=l,this._calcMatrices(),this._rotationMatrix=w(),h=this._rotationMatrix,g=-this._bearingInRadians,y=(p=this._rotationMatrix)[0],E=p[1],M=p[2],A=p[3],O=Math.sin(g),F=Math.cos(g),h[0]=y*F+M*O,h[1]=E*F+A*O,h[2]=y*-O+M*F,h[3]=E*-O+A*F)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){let l=s.ae(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==l&&(this._unmodified=!1,this._pitchInRadians=l,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){let l=r/180*Math.PI;this._rollInRadians!==l&&(this._unmodified=!1,this._rollInRadians=l,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aM(this._fovInRadians)}setFov(r){r=s.ae(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=s.ab(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){let l=this.getConstrained(this._center,r).zoom;this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this._tileZoom=Math.max(0,Math.floor(l)),this._scale=s.ac(l),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,l){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=l,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,l,h){this._unmodified=!1,this._edgeInsets.interpolate(r,l,h),this._constrain(),this._calcMatrices()}resize(r,l,h=!0){this._width=r,this._height=l,h&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new rr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,s.af])}getConstrained(r,l){return this._callbacks.getConstrained(r,l)}getCameraQueryGeometry(r,l){if(l.length===1)return[l[0],r];{let h=r.x,p=r.y,g=r.x,y=r.y;for(let E of l)h=Math.min(h,E.x),p=Math.min(p,E.y),g=Math.max(g,E.x),y=Math.max(y,E.y);return[new s.P(h,p),new s.P(g,p),new s.P(g,y),new s.P(h,y),new s.P(h,p)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let r=this._unmodified,{center:l,zoom:h}=this.getConstrained(this.center,this.zoom);this.setCenter(l),this.setZoom(h),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=s.ad(new Float64Array(16));s.M(r,r,[this._width/2,-this._height/2,1]),s.L(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=s.ad(new Float64Array(16)),s.M(r,r,[1,-1,1]),s.L(r,r,[-1,-1,0]),s.M(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,l,h,p){let g=h!==void 0?h:this.bearing,y=p=p!==void 0?p:this.pitch,E=s.$.fromLngLat(r,l),M=-Math.cos(s.ab(y)),A=Math.sin(s.ab(y)),O=A*Math.sin(s.ab(g)),F=-A*Math.cos(s.ab(g)),N=this.elevation,K=l-N,ee;M*K>=0||Math.abs(M)<.1?(ee=1e4,N=l+ee*M):ee=-K/M;let _e,ge,be=s.aN(1,E.y),Ce=0;do{if(Ce+=1,Ce>10)break;ge=ee/be,_e=new s.$(E.x+O*ge,E.y+F*ge),be=1/_e.meterInMercatorCoordinateUnits()}while(Math.abs(ee-ge*be)>1e-12);return{center:_e.toLngLat(),elevation:N,zoom:s.ah(this.height/2/Math.tan(this.fovInRadians/2)/ge/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;let l=s.ag(1,this.center.lat)*this.worldSize,h=this.cameraToCenterDistance/l,p=s.$.fromLngLat(this.center,this.elevation),g=q(this.center,this.elevation,this.pitch,this.bearing,h);this._elevation=r;let y=this.calculateCenterFromCameraLngLatAlt(g.toLngLat(),s.aN(g.z,p.y),this.bearing,this.pitch);this._elevation=y.elevation,this._center=y.center,this.setZoom(y.zoom)}getCameraPoint(){let r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let r=s.ag(1,this.center.lat)*this.worldSize;return q(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];let l=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/l,r.canonical.y/l,1/l/s.Z,1/l/s.Z]}}class ar{constructor(r,l){this.min=r,this.max=l,this.center=s.aO([],s.aP([],this.min,this.max),.5)}quadrant(r){let l=[r%2==0,r<2],h=s.aQ(this.min),p=s.aQ(this.max);for(let g=0;g<l.length;g++)h[g]=l[g]?this.min[g]:this.center[g],p[g]=l[g]?this.center[g]:this.max[g];return p[2]=this.max[2],new ar(h,p)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let l=!0;for(let h=0;h<r.planes.length;h++){let p=this.intersectsPlane(r.planes[h]);if(p===0)return 0;p===1&&(l=!1)}return l?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let l=r[3],h=r[3];for(let p=0;p<3;p++)r[p]>0?(l+=r[p]*this.min[p],h+=r[p]*this.max[p]):(h+=r[p]*this.min[p],l+=r[p]*this.max[p]);return l>=0?2:h<0?0:1}}class _r{distanceToTile2d(r,l,h,p){let g=p.distanceX([r,l]),y=p.distanceY([r,l]);return Math.hypot(g,y)}getWrap(r,l,h){return h}getTileAABB(r,l,h,p){var g,y;let E=h,M=h;if(p.terrain){let O=new s.Y(r.z,l,r.z,r.x,r.y),F=p.terrain.getMinMaxElevation(O);E=(g=F.minElevation)!==null&&g!==void 0?g:h,M=(y=F.maxElevation)!==null&&y!==void 0?y:h}let A=1<<r.z;return new ar([l+r.x/A,r.y/A,E],[l+(r.x+1)/A,(r.y+1)/A,M])}allowVariableZoom(r,l){let h=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,p=s.ae(78.5-h/2,0,60);return!!l.terrain||r.pitch>p}allowWorldCopies(){return!0}recalculateCache(){}}class lr{constructor(r,l,h){this.points=r,this.planes=l,this.aabb=h}static fromInvProjectionMatrix(r,l=1,h=0){let p=Math.pow(2,h),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{let O=1/(A=s.at([],A,r))[3]/l*p;return s.aR(A,A,[O,O,1/A[3],O])}),y=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{let O=s.aS([],g[A[0]],g[A[1]]),F=s.aS([],g[A[2]],g[A[1]]),N=s.aT([],s.aU([],O,F)),K=-s.aV(N,g[A[1]]);return N.concat(K)}),E=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],M=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let A of g)for(let O=0;O<3;O++)E[O]=Math.min(E[O],A[O]),M[O]=Math.max(M[O],A[O]);return new lr(g,y,new ar(E,M))}}class po{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,l,h){return this._helper.interpolatePadding(r,l,h)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,l,h=!0){this._helper.resize(r,l,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,l){this._helper.overrideNearFarZ(r,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,l){}constructor(r,l,h,p,g){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Ui({calcMatrices:()=>{this._calcMatrices()},getConstrained:(y,E)=>this.getConstrained(y,E)},r,l,h,p,g),this._coveringTilesDetailsProvider=new _r}clone(){let r=new po;return r.apply(this),r}apply(r,l,h){this._helper.apply(r,l,h)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){let l=[new s.aW(0,r)];if(this._helper._renderWorldCopies){let h=this.screenPointToMercatorCoordinate(new s.P(0,0)),p=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),g=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),y=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),E=Math.floor(Math.min(h.x,p.x,g.x,y.x)),M=Math.floor(Math.max(h.x,p.x,g.x,y.x)),A=1;for(let O=E-A;O<=M+A;O++)O!==0&&l.push(new s.aW(O,r))}return l}getCameraFrustum(){return lr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){let l=this.screenPointToLocation(this.centerPoint,r),h=r?r.getElevationForLngLatZoom(l,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(h)}setLocationAtPoint(r,l){let h=s.ag(this.elevation,this.center.lat),p=this.screenPointToMercatorCoordinateAtZ(l,h),g=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,h),y=s.$.fromLngLat(r),E=new s.$(y.x-(p.x-g.x),y.y-(p.y-g.y));this.setCenter(E?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,l){return l?this.coordinatePoint(s.$.fromLngLat(r),l.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.$.fromLngLat(r))}screenPointToLocation(r,l){var h;return(h=this.screenPointToMercatorCoordinate(r,l))===null||h===void 0?void 0:h.toLngLat()}screenPointToMercatorCoordinate(r,l){if(l){let h=l.pointCoordinate(r);if(h!=null)return h}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,l){let h=l||0,p=[r.x,r.y,0,1],g=[r.x,r.y,1,1];s.at(p,p,this._pixelMatrixInverse),s.at(g,g,this._pixelMatrixInverse);let y=p[3],E=g[3],M=p[1]/y,A=g[1]/E,O=p[2]/y,F=g[2]/E,N=O===F?0:(h-O)/(F-O);return new s.$(s.B.number(p[0]/y,g[0]/E,N)/this.worldSize,s.B.number(M,A,N)/this.worldSize,h)}coordinatePoint(r,l=0,h=this._pixelMatrix){let p=[r.x*this.worldSize,r.y*this.worldSize,l,1];return s.at(p,p,h),new s.P(p[0]/p[3],p[1]/p[3])}getBounds(){let r=Math.max(0,this._helper._height/2-qe(this));return new rr().extend(this.screenPointToLocation(new s.P(0,r))).extend(this.screenPointToLocation(new s.P(this._helper._width,r))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(r,l){return l?l.pointCoordinate(r)!=null:r.y>this.height/2-qe(this)}calculatePosMatrix(r,l=!1,h){var p;let g=(p=r.key)!==null&&p!==void 0?p:s.aX(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),y=l?this._alignedPosMatrixCache:this._posMatrixCache;if(y.has(g)){let A=y.get(g);return h?A.f32:A.f64}let E=J(r,this.worldSize);s.N(E,l?this._alignedProjMatrix:this._viewProjMatrix,E);let M={f64:E,f32:new Float32Array(E)};return y.set(g,M),h?M.f32:M.f64}calculateFogMatrix(r){let l=r.key,h=this._fogMatrixCacheF32;if(h.has(l))return h.get(l);let p=J(r,this.worldSize);return s.N(p,this._fogMatrix,p),h.set(l,new Float32Array(p)),h.get(l)}getConstrained(r,l){l=s.ae(+l,this.minZoom,this.maxZoom);let h={center:new s.Q(r.lng,r.lat),zoom:l},p=this._helper._lngRange;this._helper._renderWorldCopies||p!==null||(p=[-179.9999999999,180-1e-10]);let g=this.tileSize*s.ac(h.zoom),y=0,E=g,M=0,A=g,O=0,F=0,{x:N,y:K}=this.size;if(this._helper._latRange){let Ie=this._helper._latRange;y=s.S(Ie[1])*g,E=s.S(Ie[0])*g,E-y<K&&(O=K/(E-y))}p&&(M=s.aL(s.U(p[0])*g,0,g),A=s.aL(s.U(p[1])*g,0,g),A<M&&(A+=g),A-M<N&&(F=N/(A-M)));let{x:ee,y:_e}=zn(g,r),ge,be,Ce=Math.max(F||0,O||0);if(Ce){let Ie=new s.P(F?(A+M)/2:ee,O?(E+y)/2:_e);return h.center=Io(g,Ie).wrap(),h.zoom+=s.ah(Ce),h}if(this._helper._latRange){let Ie=K/2;_e-Ie<y&&(be=y+Ie),_e+Ie>E&&(be=E-Ie)}if(p){let Ie=(M+A)/2,Me=ee;this._helper._renderWorldCopies&&(Me=s.aL(ee,Ie-g/2,Ie+g/2));let Ae=N/2;Me-Ae<M&&(ge=M+Ae),Me+Ae>A&&(ge=A-Ae)}if(ge!==void 0||be!==void 0){let Ie=new s.P(ge??ee,be??_e);h.center=Io(g,Ie).wrap()}return h}calculateCenterFromCameraLngLatAlt(r,l,h,p){return this._helper.calculateCenterFromCameraLngLatAlt(r,l,h,p)}_calculateNearFarZIfNeeded(r,l,h){if(!this._helper.autoCalculateNearFarZ)return;let p=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),g=r-p*this._helper._pixelPerMeter/Math.cos(l),y=p<0?g:r,E=Math.PI/2+this.pitchInRadians,M=s.ab(this.fov)*(Math.abs(Math.cos(s.ab(this.roll)))*this.height+Math.abs(Math.sin(s.ab(this.roll)))*this.width)/this.height*(.5+h.y/this.height),A=Math.sin(M)*y/Math.sin(s.ae(Math.PI-E-M,.01,Math.PI-.01)),O=qe(this),F=Math.atan(O/this._helper.cameraToCenterDistance),N=s.ab(.75),K=F>N?2*F*(.5+h.y/(2*O)):N,ee=Math.sin(K)*y/Math.sin(s.ae(Math.PI-E-K,.01,Math.PI-.01)),_e=Math.min(A,ee);this._helper._farZ=1.01*(Math.cos(Math.PI/2-l)*_e+y),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let r=this.centerOffset,l=zn(this.worldSize,this.center),h=l.x,p=l.y;this._helper._pixelPerMeter=s.ag(1,this.center.lat)*this.worldSize;let g=s.ab(Math.min(this.pitch,uo)),y=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(g)),E;this._calculateNearFarZIfNeeded(y,g,r),E=new Float64Array(16),s.aY(E,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.an(this._invProjMatrix,E),E[8]=2*-r.x/this._helper._width,E[9]=2*r.y/this._helper._height,this._projectionMatrix=s.aZ(E),s.M(E,E,[1,-1,1]),s.L(E,E,[0,0,-this._helper.cameraToCenterDistance]),s.a_(E,E,-this.rollInRadians),s.a$(E,E,this.pitchInRadians),s.a_(E,E,-this.bearingInRadians),s.L(E,E,[-h,-p,0]),this._mercatorMatrix=s.M([],E,[this.worldSize,this.worldSize,this.worldSize]),s.M(E,E,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,E),s.L(E,E,[0,0,-this.elevation]),this._viewProjMatrix=E,this._invViewProjMatrix=s.an([],E);let M=[0,0,-1,1];s.at(M,M,this._invViewProjMatrix),this._cameraPosition=[M[0]/M[3],M[1]/M[3],M[2]/M[3]],this._fogMatrix=new Float64Array(16),s.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,y,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,s.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.L(this._fogMatrix,this._fogMatrix,[-h,-p,0]),s.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,E);let A=this._helper._width%2/2,O=this._helper._height%2/2,F=Math.cos(this.bearingInRadians),N=Math.sin(-this.bearingInRadians),K=h-Math.round(h)+F*A+N*O,ee=p-Math.round(p)+F*O+N*A,_e=new Float64Array(E);if(s.L(_e,_e,[K>.5?K-1:K,ee>.5?ee-1:ee,0]),this._alignedProjMatrix=_e,E=s.an(new Float64Array(16),this._pixelMatrix),!E)throw new Error("failed to invert matrix");this._pixelMatrixInverse=E,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let r=this.screenPointToMercatorCoordinate(new s.P(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return s.at(l,l,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let r=s.ag(1,this.center.lat)*this.worldSize;return q(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,l){let h=s.$.fromLngLat(r),p=[h.x*this.worldSize,h.y*this.worldSize,l,1];return s.at(p,p,this._viewProjMatrix),p[2]/p[3]}getProjectionData(r){let{overscaledTileID:l,aligned:h,applyTerrainMatrix:p}=r,g=this._helper.getMercatorTileCoordinates(l),y=l?this.calculatePosMatrix(l,h,!0):null,E;return E=l&&l.terrainRttPosMatrix32f&&p?l.terrainRttPosMatrix32f:y||s.b0(),{mainMatrix:E,tileMercatorCoords:g,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:E}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,l,h){return 1}transformLightDirection(r){return s.aQ(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,l,h,p){let g=this.calculatePosMatrix(h),y;p?(y=[r,l,p(r,l),1],s.at(y,y,g)):(y=[r,l,0,1],is(y,y,g));let E=y[3];return{point:new s.P(y[0]/E,y[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}populateCache(r){for(let l of r)this.calculatePosMatrix(l)}getMatrixForModel(r,l){let h=s.$.fromLngLat(r,l),p=h.meterInMercatorCoordinateUnits(),g=s.b1();return s.L(g,g,[h.x,h.y,h.z]),s.a_(g,g,Math.PI),s.a$(g,g,Math.PI/2),s.M(g,g,[-p,p,p]),g}getProjectionDataForCustomLayer(r=!0){let l=new s.Y(0,0,0,0,0),h=this.getProjectionData({overscaledTileID:l,applyGlobeMatrix:r}),p=J(l,this.worldSize);s.N(p,this._viewProjMatrix,p),h.tileMercatorCoords=[0,0,1,1];let g=[s.Z,s.Z,this.worldSize/this._helper.pixelsPerMeter],y=s.b2();return s.M(y,p,g),h.fallbackMatrix=y,h.mainMatrix=y,h}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function Kt(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Cn(m){if(m.useSlerp)if(m.k<1){let r=s.b3(m.startEulerAngles.roll,m.startEulerAngles.pitch,m.startEulerAngles.bearing),l=s.b3(m.endEulerAngles.roll,m.endEulerAngles.pitch,m.endEulerAngles.bearing),h=new Float64Array(4);s.b4(h,r,l,m.k);let p=s.b5(h);m.tr.setRoll(p.roll),m.tr.setPitch(p.pitch),m.tr.setBearing(p.bearing)}else m.tr.setRoll(m.endEulerAngles.roll),m.tr.setPitch(m.endEulerAngles.pitch),m.tr.setBearing(m.endEulerAngles.bearing);else m.tr.setRoll(s.B.number(m.startEulerAngles.roll,m.endEulerAngles.roll,m.k)),m.tr.setPitch(s.B.number(m.startEulerAngles.pitch,m.endEulerAngles.pitch,m.k)),m.tr.setBearing(s.B.number(m.startEulerAngles.bearing,m.endEulerAngles.bearing,m.k))}function En(m,r,l,h,p){let g=p.padding,y=zn(p.worldSize,l.getNorthWest()),E=zn(p.worldSize,l.getNorthEast()),M=zn(p.worldSize,l.getSouthEast()),A=zn(p.worldSize,l.getSouthWest()),O=s.ab(-h),F=y.rotate(O),N=E.rotate(O),K=M.rotate(O),ee=A.rotate(O),_e=new s.P(Math.max(F.x,N.x,ee.x,K.x),Math.max(F.y,N.y,ee.y,K.y)),ge=new s.P(Math.min(F.x,N.x,ee.x,K.x),Math.min(F.y,N.y,ee.y,K.y)),be=_e.sub(ge),Ce=(p.width-(g.left+g.right+r.left+r.right))/be.x,Ie=(p.height-(g.top+g.bottom+r.top+r.bottom))/be.y;if(Ie<0||Ce<0)return void Kt();let Me=Math.min(s.ah(p.scale*Math.min(Ce,Ie)),m.maxZoom),Ae=s.P.convert(m.offset),ze=new s.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(s.ab(h)),Re=Ae.add(ze).mult(p.scale/s.ac(Me));return{center:Io(p.worldSize,y.add(M).div(2).sub(Re)),zoom:Me,bearing:h}}class ol{get useGlobeControls(){return!1}handlePanInertia(r,l){return{easingOffset:r,easingCenter:l.center}}handleMapControlsRollPitchBearingZoom(r,l){r.bearingDelta&&l.setBearing(l.bearing+r.bearingDelta),r.pitchDelta&&l.setPitch(l.pitch+r.pitchDelta),r.rollDelta&&l.setRoll(l.roll+r.rollDelta),r.zoomDelta&&l.setZoom(l.zoom+r.zoomDelta)}handleMapControlsPan(r,l,h){r.around.distSqr(l.centerPoint)<.01||l.setLocationAtPoint(h,r.around)}cameraForBoxAndBearing(r,l,h,p,g){return En(r,l,h,p,g)}handleJumpToCenterZoom(r,l){r.zoom!==(l.zoom!==void 0?+l.zoom:r.zoom)&&r.setZoom(+l.zoom),l.center!==void 0&&r.setCenter(s.Q.convert(l.center))}handleEaseTo(r,l){let h=r.zoom,p=r.padding,g={roll:r.roll,pitch:r.pitch,bearing:r.bearing},y={roll:l.roll===void 0?r.roll:l.roll,pitch:l.pitch===void 0?r.pitch:l.pitch,bearing:l.bearing===void 0?r.bearing:l.bearing},E=l.zoom!==void 0,M=!r.isPaddingEqual(l.padding),A=!1,O=E?+l.zoom:r.zoom,F=r.centerPoint.add(l.offsetAsPoint),N=r.screenPointToLocation(F),{center:K,zoom:ee}=r.getConstrained(s.Q.convert(l.center||N),O??h);$i(r,K);let _e=zn(r.worldSize,N),ge=zn(r.worldSize,K).sub(_e),be=s.ac(ee-h);return A=ee!==h,{easeFunc:Ce=>{if(A&&r.setZoom(s.B.number(h,ee,Ce)),s.b6(g,y)||Cn({startEulerAngles:g,endEulerAngles:y,tr:r,k:Ce,useSlerp:g.roll!=y.roll}),M&&(r.interpolatePadding(p,l.padding,Ce),F=r.centerPoint.add(l.offsetAsPoint)),l.around)r.setLocationAtPoint(l.around,l.aroundPoint);else{let Ie=s.ac(r.zoom-h),Me=ee>h?Math.min(2,be):Math.max(.5,be),Ae=Math.pow(Me,1-Ce),ze=Io(r.worldSize,_e.add(ge.mult(Ce*Ae)).mult(Ie));r.setLocationAtPoint(r.renderWorldCopies?ze.wrap():ze,F)}},isZooming:A,elevationCenter:K}}handleFlyTo(r,l){let h=l.zoom!==void 0,p=r.zoom,g=r.getConstrained(s.Q.convert(l.center||l.locationAtOffset),h?+l.zoom:p),y=g.center,E=g.zoom;$i(r,y);let M=zn(r.worldSize,l.locationAtOffset),A=zn(r.worldSize,y).sub(M),O=A.mag(),F=s.ac(E-p),N;if(l.minZoom!==void 0){let K=Math.min(+l.minZoom,p,E),ee=r.getConstrained(y,K).zoom;N=s.ac(ee-p)}return{easeFunc:(K,ee,_e,ge)=>{r.setZoom(K===1?E:p+s.ah(ee));let be=K===1?y:Io(r.worldSize,M.add(A.mult(_e)).mult(ee));r.setLocationAtPoint(r.renderWorldCopies?be.wrap():be,ge)},scaleOfZoom:F,targetCenter:y,scaleOfMinZoom:N,pixelPathLength:O}}}class ir{constructor(r,l,h){this.blendFunction=r,this.blendColor=l,this.mask=h}}ir.Replace=[1,0],ir.disabled=new ir(ir.Replace,s.b7.transparent,[!1,!1,!1,!1]),ir.unblended=new ir(ir.Replace,s.b7.transparent,[!0,!0,!0,!0]),ir.alphaBlended=new ir([1,771],s.b7.transparent,[!0,!0,!0,!0]);let fr=2305;class Ai{constructor(r,l,h){this.enable=r,this.mode=l,this.frontFace=h}}Ai.disabled=new Ai(!1,1029,fr),Ai.backCCW=new Ai(!0,1029,fr),Ai.frontCCW=new Ai(!0,1028,fr);class fi{constructor(r,l,h){this.func=r,this.mask=l,this.range=h}}fi.ReadOnly=!1,fi.ReadWrite=!0,fi.disabled=new fi(519,fi.ReadOnly,[0,1]);let Ks=7680;class Jt{constructor(r,l,h,p,g,y){this.test=r,this.ref=l,this.mask=h,this.fail=p,this.depthFail=g,this.pass=y}}Jt.disabled=new Jt({func:519,mask:0},0,0,Ks,Ks,Ks);let Pa=new WeakMap;function Sn(m){var r;if(Pa.has(m))return Pa.get(m);{let l=(r=m.getParameter(m.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Pa.set(m,l),l}}class yu{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;let l=r.context,h=l.gl;this._texFormat=h.RGBA,this._texType=h.UNSIGNED_BYTE;let p=new s.aI;p.emplaceBack(-1,-1),p.emplaceBack(2,-1),p.emplaceBack(-1,2);let g=new s.aK;g.emplaceBack(0,1,2),this._fullscreenTriangle=new rs(l.createVertexBuffer(p,Yr.members),l.createIndexBuffer(g),s.aJ.simpleSegment(0,0,p.length,g.length)),this._resultBuffer=new Uint8Array(4),l.activeTexture.set(h.TEXTURE1);let y=h.createTexture();h.bindTexture(h.TEXTURE_2D,y),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texImage2D(h.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=l.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(y),Sn(h)&&(this._pbo=h.createBuffer(),h.bindBuffer(h.PIXEL_PACK_BUFFER,this._pbo),h.bufferData(h.PIXEL_PACK_BUFFER,4,h.STREAM_READ),h.bindBuffer(h.PIXEL_PACK_BUFFER,null))}destroy(){let r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,l){let h=this._updateCount;return this._readbackQueue?h>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():h>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,l),this._updateCount++,this._measuredError}_bindFramebuffer(){let r=this._cachedRenderContext.context,l=r.gl;r.activeTexture.set(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,l){let h=this._cachedRenderContext.context,p=h.gl;if(this._bindFramebuffer(),h.viewport.set([0,0,this._texWidth,this._texHeight]),h.clear({color:s.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(h,p.TRIANGLES,fi.disabled,Jt.disabled,ir.unblended,Ai.disabled,((g,y)=>({u_input:g,u_output_expected:y}))(r,l),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Sn(p)){p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.readBuffer(p.COLOR_ATTACHMENT0),p.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),p.bindBuffer(p.PIXEL_PACK_BUFFER,null);let g=p.fenceSync(p.SYNC_GPU_COMMANDS_COMPLETE,0);p.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:g}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Sn(r)){let l=r.clientWaitSync(this._readbackQueue.sync,0,0);if(l===r.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(l===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=yu._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let l=0;return l+=r[0]/256,l+=r[1]/65536,l+=r[2]/16777216,r[3]<127&&(l=-l),l/128}}let Es=s.Z/128;function Yt(m,r){let l=m.granularity!==void 0?Math.max(m.granularity,1):1,h=l+(m.generateBorders?2:0),p=l+(m.extendToNorthPole||m.generateBorders?1:0)+(m.extendToSouthPole||m.generateBorders?1:0),g=h+1,y=p+1,E=m.generateBorders?-1:0,M=m.generateBorders||m.extendToNorthPole?-1:0,A=l+(m.generateBorders?1:0),O=l+(m.generateBorders||m.extendToSouthPole?1:0),F=g*y,N=h*p*6,K=g*y>65536;if(K&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let ee=K||r==="32bit",_e=new Int16Array(2*F),ge=0;for(let Ie=M;Ie<=O;Ie++)for(let Me=E;Me<=A;Me++){let Ae=Me/l*s.Z;Me===-1&&(Ae=-64),Me===l+1&&(Ae=s.Z+Es);let ze=Ie/l*s.Z;Ie===-1&&(ze=m.extendToNorthPole?s.b9:-64),Ie===l+1&&(ze=m.extendToSouthPole?s.ba:s.Z+Es),_e[ge++]=Ae,_e[ge++]=ze}let be=ee?new Uint32Array(N):new Uint16Array(N),Ce=0;for(let Ie=0;Ie<p;Ie++)for(let Me=0;Me<h;Me++){let Ae=Me+1+Ie*g,ze=Me+(Ie+1)*g,Re=Me+1+(Ie+1)*g;be[Ce++]=Me+Ie*g,be[Ce++]=ze,be[Ce++]=Ae,be[Ce++]=Ae,be[Ce++]=ze,be[Ce++]=Re}return{vertices:_e.buffer.slice(0),indices:be.buffer.slice(0),uses32bitIndices:ee}}let Si=new s.aH({fill:new s.bb(128,2),line:new s.bb(512,0),tile:new s.bb(128,32),stencil:new s.bb(128,1),circle:3});class ko{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return gr.projectionGlobe}get vertexShaderPreludeCode(){return gr.projectionMercator.vertexSource}get subdivisionGranularity(){return Si}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new yu(r));let l=s.S(this._errorQueryLatitudeDegrees),h=2*Math.atan(Math.exp(Math.PI-l*Math.PI*2))-.5*Math.PI,p=this._errorMeasurement.updateErrorLoop(l,h),g=I.now();p!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=p,this._errorMeasurementLastChangeTime=g);let y=Math.min(Math.max((g-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bd(y))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,l,h,p,g){let y=(g==="stencil"?Si.stencil:Si.tile).getGranularityForZoomLevel(l.z);return this._getMesh(r,{granularity:y,generateBorders:h,extendToNorthPole:l.y===0&&p,extendToSouthPole:l.y===(1<<l.z)-1&&p})}_getMesh(r,l){let h=this._getMeshKey(l);if(h in this._tileMeshCache)return this._tileMeshCache[h];let p=function(g,y){let E=Yt(y,"16bit"),M=s.aI.deserialize({arrayBuffer:E.vertices,length:E.vertices.byteLength/2/2}),A=s.aK.deserialize({arrayBuffer:E.indices,length:E.indices.byteLength/2/3});return new rs(g.createVertexBuffer(M,Yr.members),g.createIndexBuffer(A),s.aJ.simpleSegment(0,0,M.length,A.length))}(r,l);return this._tileMeshCache[h]=p,p}recalculate(r){}hasTransition(){let r=I.now(),l=!1;return l=l||(r-this._errorMeasurementLastChangeTime)/1e3<.7,l=l||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,l}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}let ka=new s.r({type:new s.D(s.v.projection.type)});class jo extends s.E{constructor(r){super(),this._transitionable=new s.T(ka),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0)),this._mercatorProjection=new Fl,this._verticalPerspectiveProjection=new ko}get transitionState(){let r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof s.be){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,l,h,p,g){return this.currentProjection.getMeshFromTileID(r,l,h,p,g)}setProjection(r){this._transitionable.setValue("type",r?.type||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Aa(m){let r=Qs(m.worldSize,m.center.lat);return 2*Math.PI*r}function Da(m,r,l,h,p){let g=1/(1<<p),y=r/s.Z*g+h*g,E=s.bg((m/s.Z*g+l*g)*Math.PI*2+Math.PI,2*Math.PI),M=2*Math.atan(Math.exp(Math.PI-y*Math.PI*2))-.5*Math.PI,A=Math.cos(M),O=new Float64Array(3);return O[0]=Math.sin(E)*A,O[1]=Math.sin(M),O[2]=Math.cos(E)*A,O}function tn(m){return function(r,l){let h=Math.cos(l),p=new Float64Array(3);return p[0]=Math.sin(r)*h,p[1]=Math.sin(l),p[2]=Math.cos(r)*h,p}(m.lng*Math.PI/180,m.lat*Math.PI/180)}function Qs(m,r){return m/(2*Math.PI)/Math.cos(r*Math.PI/180)}function Bl(m){let r=Math.asin(m[1])/Math.PI*180,l=Math.sqrt(m[0]*m[0]+m[2]*m[2]);if(l>1e-6){let h=m[0]/l,p=Math.acos(m[2]/l),g=(h>0?p:-p)/Math.PI*180;return new s.Q(s.aL(g,-180,180),r)}return new s.Q(0,r)}function Js(m){return Math.cos(m*Math.PI/180)}function rn(m,r){let l=Js(m),h=Js(r);return s.ah(h/l)}function bc(m,r){let l=m.rotate(r.bearingInRadians),h=r.zoom+rn(r.center.lat,0),p=s.bc(1/Js(r.center.lat),1/Js(Math.min(Math.abs(r.center.lat),60)),s.bf(h,7,3,0,1)),g=360/Aa({worldSize:r.worldSize,center:{lat:r.center.lat}});return new s.Q(r.center.lng-l.x*g*p,s.ae(r.center.lat+l.y*g,-85.051129,s.af))}function vc(m){let r=.5*m,l=Math.sin(r),h=Math.cos(r);return Math.log(l+h)-Math.log(h-l)}function Pd(m,r,l,h){let p=m.lat+l*h;if(Math.abs(l)>1){let g=(Math.sign(m.lat+l)!==Math.sign(m.lat)?-Math.abs(m.lat):Math.abs(m.lat))*Math.PI/180,y=Math.abs(m.lat+l)*Math.PI/180,E=vc(g+h*(y-g)),M=vc(g),A=vc(y);return new s.Q(m.lng+r*((E-M)/(A-M)),p)}return new s.Q(m.lng+r*h,p)}class mp{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=r}recalculateCache(){if(!this._hadAnyChanges)return;let r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(r,l,h,p){let g=`${r.z}_${r.x}_${r.y}`,y=this._cache.get(g);if(y)return y;let E=this._cachePrevious.get(g);if(E)return this._cache.set(g,E),E;let M=this._aabbFactory(r,l,h,p);return this._cache.set(g,M),this._hadAnyChanges=!0,M}}function Tn(m,r,l){let h=m-r;return h<0?-h:Math.max(0,h-l)}function Vl(m,r,l,h,p){let g=m-l,y;return y=g<0?Math.min(-g,1+g-p):g>1?Math.min(Math.max(g-p,0),1-g):0,Math.max(y,Tn(r,h,p))}class ns{constructor(){this._aabbCache=new mp(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(r,l,h,p){let g=1<<h.z,y=1/g,E=h.x/g,M=h.y/g,A=2;return A=Math.min(A,Vl(r,l,E,M,y)),A=Math.min(A,Vl(r,l,E+.5,-M-y,y)),A=Math.min(A,Vl(r,l,E+.5,2-M-y,y)),A}getWrap(r,l,h){let p=1<<l.z,g=1/p,y=l.x/p,E=Tn(r.x,y,g),M=Tn(r.x,y-1,g),A=Tn(r.x,y+1,g),O=Math.min(E,M,A);return O===A?1:O===M?-1:0}allowVariableZoom(r,l){return De(r,l)>4}allowWorldCopies(){return!1}getTileAABB(r,l,h,p){return this._aabbCache.getTileAABB(r,l,h,p)}_computeTileAABB(r,l,h,p){if(r.z<=0)return new ar([-1,-1,-1],[1,1,1]);if(r.z===1)return new ar([r.x===0?-1:0,r.y===0?0:-1,-1],[r.x===0?0:1,r.y===0?1:0,1]);{let g=[Da(0,0,r.x,r.y,r.z),Da(s.Z,0,r.x,r.y,r.z),Da(s.Z,s.Z,r.x,r.y,r.z),Da(0,s.Z,r.x,r.y,r.z)],y=[1,1,1],E=[-1,-1,-1];for(let M of g)for(let A=0;A<3;A++)y[A]=Math.min(y[A],M[A]),E[A]=Math.max(E[A],M[A]);if(r.y===0||r.y===(1<<r.z)-1){let M=[0,r.y===0?1:-1,0];for(let A=0;A<3;A++)y[A]=Math.min(y[A],M[A]),E[A]=Math.max(E[A],M[A])}return new ar(y,E)}}}class Ra{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,l,h){return this._helper.interpolatePadding(r,l,h)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,l){this._helper.resize(r,l)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,l){this._helper.overrideNearFarZ(r,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=s.bk(),this._projectionMatrix=s.b1(),this._globeViewProjMatrix32f=s.b0(),this._globeViewProjMatrixNoCorrection=s.b1(),this._globeViewProjMatrixNoCorrectionInverted=s.b1(),this._globeProjMatrixInverted=s.b1(),this._cameraPosition=s.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Ui({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,l)=>this.getConstrained(r,l)}),this._coveringTilesDetailsProvider=new ns}clone(){let r=new Ra;return r.apply(this),r}apply(r,l){this._globeLatitudeErrorCorrectionRadians=l||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let r=s.bh();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){let{overscaledTileID:l,applyGlobeMatrix:h}=r,p=this._helper.getMercatorTileCoordinates(l);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:p,clippingPlane:this._cachedClippingPlane,projectionTransition:h?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){let l=this.pitchInRadians,h=this.cameraToCenterDistance/r,p=Math.sin(l)*h,g=Math.cos(l)*h+1,y=1/Math.sqrt(p*p+g*g)*1,E=-p,M=g,A=Math.sqrt(E*E+M*M);E/=A,M/=A;let O=[0,E,M];s.bl(O,O,[0,0,0],-this.bearingInRadians),s.bm(O,O,[0,0,0],-1*this.center.lat*Math.PI/180),s.bn(O,O,[0,0,0],this.center.lng*Math.PI/180);let F=1/s.bo(O);return s.aO(O,O,F),[...O,-y*F]}isLocationOccluded(r){return!this.isSurfacePointVisible(tn(r))}transformLightDirection(r){let l=this._helper._center.lng*Math.PI/180,h=this._helper._center.lat*Math.PI/180,p=Math.cos(h),g=[Math.sin(l)*p,Math.sin(h),Math.cos(l)*p],y=[g[2],0,-g[0]],E=[0,0,0];s.aU(E,y,g),s.aT(y,y),s.aT(E,E);let M=[0,0,0];return s.aT(M,[y[0]*r[0]+E[0]*r[1]+g[0]*r[2],y[1]*r[0]+E[1]*r[1]+g[1]*r[2],y[2]*r[0]+E[2]*r[1]+g[2]*r[2]]),M}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,l,h){let p=function(E,M,A){let O=1/(1<<A.z);return new s.$(E/s.Z*O+A.x*O,M/s.Z*O+A.y*O)}(r,l,h.canonical),g=(y=p.y,[s.bg(p.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-y*Math.PI*2))-.5*Math.PI]);var y;return this.getCircleRadiusCorrection()/Math.cos(g[1])}projectTileCoordinates(r,l,h,p){let g=h.canonical,y=Da(r,l,g.x,g.y,g.z),E=1+(p?p(r,l):0)/s.bu,M=[y[0]*E,y[1]*E,y[2]*E,1];s.at(M,M,this._globeViewProjMatrixNoCorrection);let A=this._cachedClippingPlane,O=A[0]*y[0]+A[1]*y[1]+A[2]*y[2]+A[3]<0;return{point:new s.P(M[0]/M[3],M[1]/M[3]),signedDistanceFromCamera:M[3],isOccluded:O}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let r=Qs(this.worldSize,this.center.lat),l=s.b2(),h=s.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),s.aY(l,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let p=this.centerOffset;l[8]=2*-p.x/this._helper._width,l[9]=2*p.y/this._helper._height,this._projectionMatrix=s.aZ(l),this._globeProjMatrixInverted=s.b2(),s.an(this._globeProjMatrixInverted,l),s.L(l,l,[0,0,-this.cameraToCenterDistance]),s.a_(l,l,this.rollInRadians),s.a$(l,l,-this.pitchInRadians),s.a_(l,l,this.bearingInRadians),s.L(l,l,[0,0,-r]);let g=s.bh();g[0]=r,g[1]=r,g[2]=r,s.a$(h,l,this.center.lat*Math.PI/180),s.bp(h,h,-this.center.lng*Math.PI/180),s.M(h,h,g),this._globeViewProjMatrixNoCorrection=h,s.a$(l,l,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bp(l,l,-this.center.lng*Math.PI/180),s.M(l,l,g),this._globeViewProjMatrix32f=new Float32Array(l),this._globeViewProjMatrixNoCorrectionInverted=s.b2(),s.an(this._globeViewProjMatrixNoCorrectionInverted,h);let y=s.bh();this._cameraPosition=s.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/r,s.bl(this._cameraPosition,this._cameraPosition,y,-this.rollInRadians),s.bm(this._cameraPosition,this._cameraPosition,y,this.pitchInRadians),s.bl(this._cameraPosition,this._cameraPosition,y,-this.bearingInRadians),s.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bm(this._cameraPosition,this._cameraPosition,y,-this.center.lat*Math.PI/180),s.bn(this._cameraPosition,this._cameraPosition,y,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);let E=s.aZ(this._globeViewProjMatrixNoCorrectionInverted);s.M(E,E,[1,1,-1]),this._cachedFrustum=lr.fromInvProjectionMatrix(E)}calculateFogMatrix(r){s.w("calculateFogMatrix is not supported on globe projection.");let l=s.b2();return s.ad(l),l}getVisibleUnwrappedCoordinates(r){return[new s.aW(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,l){if(!this._globeViewProjMatrixNoCorrection)return 1;let h=tn(r);s.aO(h,h,1+l/s.bu);let p=s.bk();return s.at(p,[h[0],h[1],h[2],1],this._globeViewProjMatrixNoCorrection),p[2]/p[3]}populateCache(r){}getBounds(){let r=.5*this.width,l=.5*this.height,h=[new s.P(0,0),new s.P(r,0),new s.P(this.width,0),new s.P(this.width,l),new s.P(this.width,this.height),new s.P(r,this.height),new s.P(0,this.height),new s.P(0,l)],p=[];for(let F of h)p.push(this.unprojectScreenPoint(F));let g=0,y=0,E=0,M=0,A=this.center;for(let F of p){let N=s.bq(A.lng,F.lng),K=s.bq(A.lat,F.lat);N<y&&(y=N),N>g&&(g=N),K<M&&(M=K),K>E&&(E=K)}let O=[A.lng+y,A.lat+M,A.lng+g,A.lat+E];return this.isSurfacePointOnScreen([0,1,0])&&(O[3]=90,O[0]=-180,O[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(O[1]=-90,O[0]=-180,O[2]=180),new rr(O)}getConstrained(r,l){let h=s.ae(r.lat,-85.051129,s.af),p=s.ae(+l,this.minZoom+rn(0,h),this.maxZoom);return{center:new s.Q(r.lng,h),zoom:p}}calculateCenterFromCameraLngLatAlt(r,l,h,p){return this._helper.calculateCenterFromCameraLngLatAlt(r,l,h,p)}setLocationAtPoint(r,l){let h=tn(this.unprojectScreenPoint(l)),p=tn(r),g=s.bh();s.br(g);let y=s.bh();s.bn(y,h,g,-this.center.lng*Math.PI/180),s.bm(y,y,g,this.center.lat*Math.PI/180);let E=p[0]*p[0]+p[2]*p[2],M=y[0]*y[0];if(E<M)return;let A=Math.sqrt(E-M),O=-A,F=s.bs(p[0],p[2],y[0],A),N=s.bs(p[0],p[2],y[0],O),K=s.bh();s.bn(K,p,g,-F);let ee=s.bs(K[1],K[2],y[1],y[2]),_e=s.bh();s.bn(_e,p,g,-N);let ge=s.bs(_e[1],_e[2],y[1],y[2]),be=.5*Math.PI,Ce=ee>=-be&&ee<=be,Ie=ge>=-be&&ge<=be,Me,Ae;if(Ce&&Ie){let ut=this.center.lng*Math.PI/180,et=this.center.lat*Math.PI/180;s.bv(F,ut)+s.bv(ee,et)<s.bv(N,ut)+s.bv(ge,et)?(Me=F,Ae=ee):(Me=N,Ae=ge)}else if(Ce)Me=F,Ae=ee;else{if(!Ie)return;Me=N,Ae=ge}let ze=Me/Math.PI*180,Re=Ae/Math.PI*180,We=this.center.lat;this.setCenter(new s.Q(ze,s.ae(Re,-90,90))),this.setZoom(this.zoom+rn(We,this.center.lat))}locationToScreenPoint(r,l){let h=tn(r);if(l){let p=l.getElevationForLngLatZoom(r,this._helper._tileZoom);s.aO(h,h,1+p/s.bu)}return this._projectSurfacePointToScreen(h)}_projectSurfacePointToScreen(r){let l=s.bk();return s.at(l,[...r,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],new s.P((.5*l[0]+.5)*this.width,(.5*-l[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,l){if(l){let h=l.pointCoordinate(r);if(h)return h}return s.$.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,l){var h;return(h=this.screenPointToMercatorCoordinate(r,l))===null||h===void 0?void 0:h.toLngLat()}isPointOnMapSurface(r,l){let h=this._cameraPosition,p=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(h,p)}getRayDirectionFromPixel(r){let l=s.bk();l[0]=r.x/this.width*2-1,l[1]=-1*(r.y/this.height*2-1),l[2]=1,l[3]=1,s.at(l,l,this._globeViewProjMatrixNoCorrectionInverted),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3];let h=s.bh();h[0]=l[0]-this._cameraPosition[0],h[1]=l[1]-this._cameraPosition[1],h[2]=l[2]-this._cameraPosition[2];let p=s.bh();return s.aT(p,h),p}isSurfacePointVisible(r){let l=this._cachedClippingPlane;return l[0]*r[0]+l[1]*r[1]+l[2]*r[2]+l[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;let l=s.bk();return s.at(l,[...r,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3],l[0]>-1&&l[0]<1&&l[1]>-1&&l[1]<1&&l[2]>-1&&l[2]<1}rayPlanetIntersection(r,l){let h=s.aV(r,l),p=s.bh(),g=s.bh();s.aO(g,l,h),s.aS(p,r,g);let y=1-s.aV(p,p);if(y<0)return null;let E=s.aV(r,r)-1,M=-h+(h<0?1:-1)*Math.sqrt(y),A=E/M,O=M;return{tMin:Math.min(A,O),tMax:Math.max(A,O)}}unprojectScreenPoint(r){let l=this._cameraPosition,h=this.getRayDirectionFromPixel(r),p=this.rayPlanetIntersection(l,h);if(p){let O=s.bh();s.aP(O,l,[h[0]*p.tMin,h[1]*p.tMin,h[2]*p.tMin]);let F=s.bh();return s.aT(F,O),Bl(F)}let g=this._cachedClippingPlane,y=g[0]*h[0]+g[1]*h[1]+g[2]*h[2],E=-s.bt(g,l)/y,M=s.bh();if(E>0)s.aP(M,l,[h[0]*E,h[1]*E,h[2]*E]);else{let O=s.bh();s.aP(O,l,[2*h[0],2*h[1],2*h[2]]);let F=s.bt(this._cachedClippingPlane,O);s.aS(M,O,[this._cachedClippingPlane[0]*F,this._cachedClippingPlane[1]*F,this._cachedClippingPlane[2]*F])}let A=function(O){let F=s.bh();return F[0]=O[0]*-O[3],F[1]=O[1]*-O[3],F[2]=O[2]*-O[3],{center:F,radius:Math.sqrt(1-O[3]*O[3])}}(g);return Bl(function(O,F,N){let K=s.bh();s.aS(K,N,O);let ee=s.bh();return s.bi(ee,O,K,F/s.bj(K)),ee}(A.center,A.radius,M))}getMatrixForModel(r,l){let h=s.Q.convert(r),p=1/s.bu,g=s.b1();return s.bp(g,g,h.lng/180*Math.PI),s.a$(g,g,-h.lat/180*Math.PI),s.L(g,g,[0,0,1+l/s.bu]),s.a$(g,g,.5*Math.PI),s.M(g,g,[p,p,p]),g}getProjectionDataForCustomLayer(r=!0){let l=this.getProjectionData({overscaledTileID:new s.Y(0,0,0,0,0),applyGlobeMatrix:r});return l.tileMercatorCoords=[0,0,1,1],l}getFastPathSimpleProjectionMatrix(r){}}class eo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,l,h){return this._helper.interpolatePadding(r,l,h)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,l,h=!0){this._helper.resize(r,l,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,l){this._helper.overrideNearFarZ(r,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,l){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=l,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Ui({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,l)=>this.getConstrained(r,l)}),this._globeness=1,this._mercatorTransform=new po,this._verticalPerspectiveTransform=new Ra}clone(){let r=new eo;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){let l=this._mercatorTransform.getProjectionData(r),h=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?h.mainMatrix:l.mainMatrix,clippingPlane:h.clippingPlane,tileMercatorCoords:h.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:l.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return s.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,l,h){let p=this._mercatorTransform.getPitchedTextCorrection(r,l,h),g=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,l,h);return s.bc(p,g,this._globeness)}projectTileCoordinates(r,l,h,p){return this.currentTransform.projectTileCoordinates(r,l,h,p)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,l){return this.currentTransform.lngLatToCameraDepth(r,l)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,l){return this.currentTransform.getConstrained(r,l)}calculateCenterFromCameraLngLatAlt(r,l,h,p){return this._helper.calculateCenterFromCameraLngLatAlt(r,l,h,p)}setLocationAtPoint(r,l){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,l),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,l),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,l){return this.currentTransform.locationToScreenPoint(r,l)}screenPointToMercatorCoordinate(r,l){return this.currentTransform.screenPointToMercatorCoordinate(r,l)}screenPointToLocation(r,l){return this.currentTransform.screenPointToLocation(r,l)}isPointOnMapSurface(r,l){return this.currentTransform.isPointOnMapSurface(r,l)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,l){return this.currentTransform.getMatrixForModel(r,l)}getProjectionDataForCustomLayer(r=!0){let l=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return l;let h=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return h.fallbackMatrix=l.mainMatrix,h}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class Ao{get useGlobeControls(){return!0}handlePanInertia(r,l){let h=bc(r,l);return Math.abs(h.lng-l.center.lng)>180&&(h.lng=l.center.lng+179.5*Math.sign(h.lng-l.center.lng)),{easingCenter:h,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,l){let h=r.around,p=l.screenPointToLocation(h);r.bearingDelta&&l.setBearing(l.bearing+r.bearingDelta),r.pitchDelta&&l.setPitch(l.pitch+r.pitchDelta),r.rollDelta&&l.setRoll(l.roll+r.rollDelta);let g=l.zoom;r.zoomDelta&&l.setZoom(l.zoom+r.zoomDelta);let y=l.zoom-g;if(y===0)return;let E=s.bq(l.center.lng,p.lng),M=E/(Math.abs(E/180)+1),A=s.bq(l.center.lat,p.lat),O=l.getRayDirectionFromPixel(h),F=l.cameraPosition,N=-1*s.aV(F,O),K=s.bh();s.aP(K,F,[O[0]*N,O[1]*N,O[2]*N]);let ee=s.bo(K)-1,_e=Math.exp(.5*-Math.max(ee-.3,0)),ge=Qs(l.worldSize,l.center.lat)/Math.min(l.width,l.height),be=s.bf(ge,.9,.5,1,.25),Ce=(1-s.ac(-y))*Math.min(_e,be),Ie=l.center.lat,Me=l.zoom,Ae=new s.Q(l.center.lng+M*Ce,s.ae(l.center.lat+A*Ce,-85.051129,s.af));l.setLocationAtPoint(p,h);let ze=l.center,Re=s.bf(Math.abs(E),45,85,0,1),We=s.bf(ge,.75,.35,0,1),ut=Math.pow(Math.max(Re,We),.25),et=s.bq(ze.lng,Ae.lng),rt=s.bq(ze.lat,Ae.lat);l.setCenter(new s.Q(ze.lng+et*ut,ze.lat+rt*ut).wrap()),l.setZoom(Me+rn(Ie,l.center.lat))}handleMapControlsPan(r,l,h){if(!r.panDelta)return;let p=l.center.lat,g=l.zoom;l.setCenter(bc(r.panDelta,l).wrap()),l.setZoom(g+rn(p,l.center.lat))}cameraForBoxAndBearing(r,l,h,p,g){let y=En(r,l,h,p,g),E=l.left/g.width*2-1,M=(g.width-l.right)/g.width*2-1,A=l.top/g.height*-2+1,O=(g.height-l.bottom)/g.height*-2+1,F=s.bq(h.getWest(),h.getEast())<0,N=F?h.getEast():h.getWest(),K=F?h.getWest():h.getEast(),ee=Math.max(h.getNorth(),h.getSouth()),_e=Math.min(h.getNorth(),h.getSouth()),ge=N+.5*s.bq(N,K),be=ee+.5*s.bq(ee,_e),Ce=g.clone();Ce.setCenter(y.center),Ce.setBearing(y.bearing),Ce.setPitch(0),Ce.setRoll(0),Ce.setZoom(y.zoom);let Ie=Ce.modelViewProjectionMatrix,Me=[tn(h.getNorthWest()),tn(h.getNorthEast()),tn(h.getSouthWest()),tn(h.getSouthEast()),tn(new s.Q(K,be)),tn(new s.Q(N,be)),tn(new s.Q(ge,ee)),tn(new s.Q(ge,_e))],Ae=tn(y.center),ze=Number.POSITIVE_INFINITY;for(let Re of Me)E<0&&(ze=Ao.getLesserNonNegativeNonNull(ze,Ao.solveVectorScale(Re,Ae,Ie,"x",E))),M>0&&(ze=Ao.getLesserNonNegativeNonNull(ze,Ao.solveVectorScale(Re,Ae,Ie,"x",M))),A>0&&(ze=Ao.getLesserNonNegativeNonNull(ze,Ao.solveVectorScale(Re,Ae,Ie,"y",A))),O<0&&(ze=Ao.getLesserNonNegativeNonNull(ze,Ao.solveVectorScale(Re,Ae,Ie,"y",O)));if(Number.isFinite(ze)&&ze!==0)return y.zoom=Ce.zoom+s.ah(ze),y;Kt()}handleJumpToCenterZoom(r,l){let h=r.center.lat,p=r.getConstrained(l.center?s.Q.convert(l.center):r.center,r.zoom).center;r.setCenter(p.wrap());let g=l.zoom!==void 0?+l.zoom:r.zoom+rn(h,p.lat);r.zoom!==g&&r.setZoom(g)}handleEaseTo(r,l){let h=r.zoom,p=r.center,g=r.padding,y={roll:r.roll,pitch:r.pitch,bearing:r.bearing},E={roll:l.roll===void 0?r.roll:l.roll,pitch:l.pitch===void 0?r.pitch:l.pitch,bearing:l.bearing===void 0?r.bearing:l.bearing},M=l.zoom!==void 0,A=!r.isPaddingEqual(l.padding),O=!1,F=l.center?s.Q.convert(l.center):p,N=r.getConstrained(F,h).center;$i(r,N);let K=r.clone();K.setCenter(N),K.setZoom(M?+l.zoom:h+rn(p.lat,F.lat)),K.setBearing(l.bearing);let ee=new s.P(s.ae(r.centerPoint.x+l.offsetAsPoint.x,0,r.width),s.ae(r.centerPoint.y+l.offsetAsPoint.y,0,r.height));K.setLocationAtPoint(N,ee);let _e=(l.offset&&l.offsetAsPoint.mag())>0?K.center:N,ge=M?+l.zoom:h+rn(p.lat,_e.lat),be=h+rn(p.lat,0),Ce=ge+rn(_e.lat,0),Ie=s.bq(p.lng,_e.lng),Me=s.bq(p.lat,_e.lat),Ae=s.ac(Ce-be);return O=ge!==h,{easeFunc:ze=>{if(s.b6(y,E)||Cn({startEulerAngles:y,endEulerAngles:E,tr:r,k:ze,useSlerp:y.roll!=E.roll}),A&&r.interpolatePadding(g,l.padding,ze),l.around)s.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(l.around,l.aroundPoint);else{let Re=Ce>be?Math.min(2,Ae):Math.max(.5,Ae),We=Math.pow(Re,1-ze),ut=Pd(p,Ie,Me,ze*We);r.setCenter(ut.wrap())}if(O){let Re=s.B.number(be,Ce,ze)+rn(0,r.center.lat);r.setZoom(Re)}},isZooming:O,elevationCenter:_e}}handleFlyTo(r,l){let h=l.zoom!==void 0,p=r.center,g=r.zoom,y=r.padding,E=!r.isPaddingEqual(l.padding),M=r.getConstrained(s.Q.convert(l.center||l.locationAtOffset),g).center,A=h?+l.zoom:r.zoom+rn(r.center.lat,M.lat),O=r.clone();O.setCenter(M),O.setZoom(A),O.setBearing(l.bearing);let F=new s.P(s.ae(r.centerPoint.x+l.offsetAsPoint.x,0,r.width),s.ae(r.centerPoint.y+l.offsetAsPoint.y,0,r.height));O.setLocationAtPoint(M,F);let N=O.center;$i(r,N);let K=function(Me,Ae,ze){let Re=tn(Ae),We=tn(ze),ut=s.aV(Re,We),et=Math.acos(ut),rt=Aa(Me);return et/(2*Math.PI)*rt}(r,p,N),ee=g+rn(p.lat,0),_e=A+rn(N.lat,0),ge=s.ac(_e-ee),be;if(typeof l.minZoom=="number"){let Me=+l.minZoom+rn(N.lat,0),Ae=Math.min(Me,ee,_e)+rn(0,N.lat),ze=r.getConstrained(N,Ae).zoom+rn(N.lat,0);be=s.ac(ze-ee)}let Ce=s.bq(p.lng,N.lng),Ie=s.bq(p.lat,N.lat);return{easeFunc:(Me,Ae,ze,Re)=>{let We=Pd(p,Ce,Ie,ze);E&&r.interpolatePadding(y,l.padding,Me);let ut=Me===1?N:We;r.setCenter(ut.wrap());let et=ee+s.ah(Ae);r.setZoom(Me===1?A:et+rn(0,ut.lat))},scaleOfZoom:ge,targetCenter:N,scaleOfMinZoom:be,pixelPathLength:K}}static solveVectorScale(r,l,h,p,g){let y=p==="x"?[h[0],h[4],h[8],h[12]]:[h[1],h[5],h[9],h[13]],E=[h[3],h[7],h[11],h[15]],M=r[0]*y[0]+r[1]*y[1]+r[2]*y[2],A=r[0]*E[0]+r[1]*E[1]+r[2]*E[2],O=l[0]*y[0]+l[1]*y[1]+l[2]*y[2],F=l[0]*E[0]+l[1]*E[1]+l[2]*E[2];return O+g*A===M+g*F||E[3]*(M-O)+y[3]*(F-A)+M*F==O*A?null:(O+y[3]-g*F-g*E[3])/(O-M-g*F+g*A)}static getLesserNonNegativeNonNull(r,l){return l!==null&&l>=0&&l<r?l:r}}class ea{constructor(r){this._globe=r,this._mercatorCameraHelper=new ol,this._verticalPerspectiveCameraHelper=new Ao}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,l){return this.currentHelper.handlePanInertia(r,l)}handleMapControlsRollPitchBearingZoom(r,l){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,l)}handleMapControlsPan(r,l,h){this.currentHelper.handleMapControlsPan(r,l,h)}cameraForBoxAndBearing(r,l,h,p,g){return this.currentHelper.cameraForBoxAndBearing(r,l,h,p,g)}handleJumpToCenterZoom(r,l){this.currentHelper.handleJumpToCenterZoom(r,l)}handleEaseTo(r,l){return this.currentHelper.handleEaseTo(r,l)}handleFlyTo(r,l){return this.currentHelper.handleFlyTo(r,l)}}let sl=(m,r)=>s.x(m,r&&r.filter(l=>l.identifier!=="source.canvas")),gp=s.bw();class xu extends s.E{constructor(r,l={}){super(),this._rtlPluginLoaded=()=>{for(let h in this.sourceCaches){let p=this.sourceCaches[h].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[h].reload()}},this.map=r,this.dispatcher=new di(Dt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(h,p)=>this.getGlyphs(h,p)),this.dispatcher.registerMessageHandler("GI",(h,p)=>this.getImages(h,p)),this.imageManager=new dt,this.imageManager.setEventedParent(this),this.glyphManager=new yt(r._requestManager,l.localIdeographFontFamily),this.lineAtlas=new ot(256,512),this.crossTileSymbolIndex=new Xi,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.by()),zi().on(xs,this._rtlPluginLoaded),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;let p=this.sourceCaches[h.sourceId];if(!p)return;let g=p.getSource();if(g&&g.vectorLayerIds)for(let y in this._layers){let E=this._layers[y];E.source===g.id&&this._validateLayer(E)}})}loadURL(r,l={},h){this.fire(new s.l("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;let p=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;let g=this._loadStyleRequest;s.j(p,this._loadStyleRequest).then(y=>{this._loadStyleRequest=null,this._load(y.data,l,h)}).catch(y=>{this._loadStyleRequest=null,y&&!g.signal.aborted&&this.fire(new s.k(y))})}loadJSON(r,l={},h){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,I.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(r,l,h)}).catch(()=>{})}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(gp,{validate:!1})}_load(r,l,h){var p,g;let y=l.transformStyle?l.transformStyle(h,r):r;if(!l.validate||!sl(this,s.y(y))){this._loaded=!0,this.stylesheet=y;for(let E in y.sources)this.addSource(E,y.sources[E],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new V(this.stylesheet.light),this._setProjectionInternal(((p=this.stylesheet.projection)===null||p===void 0?void 0:p.type)||"mercator"),this.sky=new Ue(this.stylesheet.sky),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){let r=s.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(l=>l.id),this._layers={},this._serializedLayers=null;for(let l of r){let h=s.bA(l);h.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=h}}_loadSprite(r,l=!1,h=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(g,y,E,M){return s._(this,void 0,void 0,function*(){let A=de(g),O=E>1?"@2x":"",F={},N={};for(let{id:K,url:ee}of A){let _e=y.transformRequest(oe(ee,O,".json"),"SpriteJSON");F[K]=s.j(_e,M);let ge=y.transformRequest(oe(ee,O,".png"),"SpriteImage");N[K]=ne.getImage(ge,M)}return yield Promise.all([...Object.values(F),...Object.values(N)]),function(K,ee){return s._(this,void 0,void 0,function*(){let _e={};for(let ge in K){_e[ge]={};let be=I.getImageCanvasContext((yield ee[ge]).data),Ce=(yield K[ge]).data;for(let Ie in Ce){let{width:Me,height:Ae,x:ze,y:Re,sdf:We,pixelRatio:ut,stretchX:et,stretchY:rt,content:lt,textFitWidth:Pt,textFitHeight:Tt}=Ce[Ie];_e[ge][Ie]={data:null,pixelRatio:ut,sdf:We,stretchX:et,stretchY:rt,content:lt,textFitWidth:Pt,textFitHeight:Tt,spriteData:{width:Me,height:Ae,x:ze,y:Re,context:be}}}}return _e})}(F,N)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(g=>{if(this._spriteRequest=null,g)for(let y in g){this._spritesImagesIds[y]=[];let E=this._spritesImagesIds[y]?this._spritesImagesIds[y].filter(M=>!(M in g)):[];for(let M of E)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(let M in g[y]){let A=y==="default"?M:`${y}:${M}`;this._spritesImagesIds[y].push(A),A in this.imageManager.images?this.imageManager.updateImage(A,g[y][M],!1):this.imageManager.addImage(A,g[y][M]),l&&(this._changedImages[A]=!0)}}}).catch(g=>{this._spriteRequest=null,p=g,this.fire(new s.k(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),h&&h(p)})}_unloadSprite(){for(let r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(r){let l=this.sourceCaches[r.source];if(!l)return;let h=r.sourceLayer;if(!h)return;let p=l.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(h)===-1)&&this.fire(new s.k(new Error(`Source layer "${h}" does not exist on source "${p.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,l=!1){let h=this._serializedAllLayers();if(!r||r.length===0)return Object.values(l?s.bB(h):h);let p=[];for(let g of r)if(h[g]){let y=l?s.bB(h[g]):h[g];p.push(y)}return p}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};let l=Object.keys(this._layers);for(let h of l){let p=this._layers[h];p.type!=="custom"&&(r[h]=p.serialize())}return r}hasTransitions(){var r,l,h;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((l=this.sky)===null||l===void 0)&&l.hasTransition()||!((h=this.projection)===null||h===void 0)&&h.hasTransition())return!0;for(let p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(let p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;let l=this._changed;if(l){let p=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);(p.length||g.length)&&this._updateWorkerLayers(p,g);for(let y in this._updatedSources){let E=this._updatedSources[y];if(E==="reload")this._reloadSource(y);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(y)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let y in this._updatedPaintProps)this._layers[y].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}let h={};for(let p in this.sourceCaches){let g=this.sourceCaches[p];h[p]=g.used,g.used=!1}for(let p of this._order){let g=this._layers[p];g.recalculate(r,this._availableImages),!g.isHidden(r.zoom)&&g.source&&(this.sourceCaches[g.source].used=!0)}for(let p in h){let g=this.sourceCaches[p];!!h[p]!=!!g.used&&g.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,l&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let r=Object.keys(this._changedImages);if(r.length){for(let l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,l={}){var h;this._checkLoaded();let p=this.serialize();if(r=l.transformStyle?l.transformStyle(p,r):r,((h=l.validate)===null||h===void 0||h)&&sl(this,s.y(r)))return!1;(r=s.bB(r)).layers=s.bz(r.layers);let g=s.bC(p,r),y=this._getOperationsToPerform(g);if(y.unimplemented.length>0)throw new Error(`Unimplemented: ${y.unimplemented.join(", ")}.`);if(y.operations.length===0)return!1;for(let E of y.operations)E();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){let l=[],h=[];for(let p of r)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":l.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":l.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setSky":l.push(()=>this.setSky.apply(this,p.args));break;case"setProjection":this.setProjection.apply(this,p.args);break;case"setTransition":l.push(()=>{});break;default:h.push(p.command)}return{operations:l,unimplemented:h}}addImage(r,l){if(this.getImage(r))return this.fire(new s.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,l),this._afterImageUpdated(r)}updateImage(r,l){this.imageManager.updateImage(r,l)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new s.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,l,h={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(s.y.source,`sources.${r}`,l,null,h))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);let p=this.sourceCaches[r]=new He(r,l,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:r})),p.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(let h in this._layers)if(this._layers[h].source===r)return this.fire(new s.k(new Error(`Source "${r}" cannot be removed while layer "${h}" is using it.`)));let l=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],l.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,l){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);let h=this.sourceCaches[r].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(l),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,l,h={}){this._checkLoaded();let p=r.id;if(this.getLayer(p))return void this.fire(new s.k(new Error(`Layer "${p}" already exists on this map.`)));let g;if(r.type==="custom"){if(sl(this,s.bD(r)))return;g=s.bA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(p,r.source),r=s.bB(r),r=s.e(r,{source:p})),this._validate(s.y.layer,`layers.${p}`,r,{arrayIndex:-1},h))return;g=s.bA(r),this._validateLayer(g),g.setEventedParent(this,{layer:{id:p}})}let y=l?this._order.indexOf(l):this._order.length;if(l&&y===-1)this.fire(new s.k(new Error(`Cannot add layer "${p}" before non-existing layer "${l}".`)));else{if(this._order.splice(y,0,p),this._layerOrderChanged=!0,this._layers[p]=g,this._removedLayers[p]&&g.source&&g.type!=="custom"){let E=this._removedLayers[p];delete this._removedLayers[p],E.type!==g.type?this._updatedSources[g.source]="clear":(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause())}this._updateLayer(g),g.onAdd&&g.onAdd(this.map)}}moveLayer(r,l){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new s.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===l)return;let h=this._order.indexOf(r);this._order.splice(h,1);let p=l?this._order.indexOf(l):this._order.length;l&&p===-1?this.fire(new s.k(new Error(`Cannot move layer "${r}" before non-existing layer "${l}".`))):(this._order.splice(p,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();let l=this._layers[r];if(!l)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${r}".`)));l.setEventedParent(null);let h=this._order.indexOf(r);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,l,h){this._checkLoaded();let p=this.getLayer(r);p?p.minzoom===l&&p.maxzoom===h||(l!=null&&(p.minzoom=l),h!=null&&(p.maxzoom=h),this._updateLayer(p)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,l,h={}){this._checkLoaded();let p=this.getLayer(r);if(p){if(!s.bE(p.filter,l))return l==null?(p.filter=void 0,void this._updateLayer(p)):void(this._validate(s.y.filter,`layers.${p.id}.filter`,l,null,h)||(p.filter=s.bB(l),this._updateLayer(p)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return s.bB(this.getLayer(r).filter)}setLayoutProperty(r,l,h,p={}){this._checkLoaded();let g=this.getLayer(r);g?s.bE(g.getLayoutProperty(l),h)||(g.setLayoutProperty(l,h,p),this._updateLayer(g)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,l){let h=this.getLayer(r);if(h)return h.getLayoutProperty(l);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,l,h,p={}){this._checkLoaded();let g=this.getLayer(r);g?s.bE(g.getPaintProperty(l),h)||(g.setPaintProperty(l,h,p)&&this._updateLayer(g),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new s.k(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,l){return this.getLayer(r).getPaintProperty(l)}setFeatureState(r,l){this._checkLoaded();let h=r.source,p=r.sourceLayer,g=this.sourceCaches[h];if(g===void 0)return void this.fire(new s.k(new Error(`The source '${h}' does not exist in the map's style.`)));let y=g.getSource().type;y==="geojson"&&p?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):y!=="vector"||p?(r.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),g.setFeatureState(p,r.id,l)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,l){this._checkLoaded();let h=r.source,p=this.sourceCaches[h];if(p===void 0)return void this.fire(new s.k(new Error(`The source '${h}' does not exist in the map's style.`)));let g=p.getSource().type,y=g==="vector"?r.sourceLayer:void 0;g!=="vector"||y?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(y,r.id,l):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();let l=r.source,h=r.sourceLayer,p=this.sourceCaches[l];if(p!==void 0)return p.getSource().type!=="vector"||h?(r.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),p.getFeatureState(h,r.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let r=s.bF(this.sourceCaches,g=>g.serialize()),l=this._serializeByIds(this._order,!0),h=this.map.getTerrain()||void 0,p=this.stylesheet;return s.bG({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,projection:p.projection,sources:r,layers:l,terrain:h},g=>g!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){let l=y=>this._layers[y].type==="fill-extrusion",h={},p=[];for(let y=this._order.length-1;y>=0;y--){let E=this._order[y];if(l(E)){h[E]=y;for(let M of r){let A=M[E];if(A)for(let O of A)p.push(O)}}}p.sort((y,E)=>E.intersectionZ-y.intersectionZ);let g=[];for(let y=this._order.length-1;y>=0;y--){let E=this._order[y];if(l(E))for(let M=p.length-1;M>=0;M--){let A=p[M].feature;if(h[A.layer.id]<y)break;g.push(A),p.pop()}else for(let M of r){let A=M[E];if(A)for(let O of A)g.push(O.feature)}}return g}queryRenderedFeatures(r,l,h){l&&l.filter&&this._validate(s.y.filter,"queryRenderedFeatures.filter",l.filter,null,l);let p={};if(l&&l.layers){if(!(Array.isArray(l.layers)||l.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let A of l.layers){let O=this._layers[A];if(!O)return this.fire(new s.k(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];p[O.source]=!0}}let g=[];l.availableImages=this._availableImages;let y=this._serializedAllLayers(),E=l.layers instanceof Set?l.layers:Array.isArray(l.layers)?new Set(l.layers):null,M=Object.assign(Object.assign({},l),{layers:E});for(let A in this.sourceCaches)l.layers&&!p[A]||g.push(Ca(this.sourceCaches[A],this._layers,y,r,M,h,this.map.terrain?(O,F,N)=>this.map.terrain.getElevation(O,F,N):void 0));return this.placement&&g.push(function(A,O,F,N,K,ee,_e){let ge={},be=ee.queryRenderedSymbols(N),Ce=[];for(let Ie of Object.keys(be).map(Number))Ce.push(_e[Ie]);Ce.sort(Ln);for(let Ie of Ce){let Me=Ie.featureIndex.lookupSymbolFeatures(be[Ie.bucketInstanceId],O,Ie.bucketIndex,Ie.sourceLayerIndex,K.filter,K.layers,K.availableImages,A);for(let Ae in Me){let ze=ge[Ae]=ge[Ae]||[],Re=Me[Ae];Re.sort((We,ut)=>{let et=Ie.featureSortOrder;if(et){let rt=et.indexOf(We.featureIndex);return et.indexOf(ut.featureIndex)-rt}return ut.featureIndex-We.featureIndex});for(let We of Re)ze.push(We)}}return function(Ie,Me,Ae){for(let ze in Ie)for(let Re of Ie[ze])Nn(Re,Ae[Me[ze].source]);return Ie}(ge,A,F)}(this._layers,y,this.sourceCaches,r,M,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(g)}querySourceFeatures(r,l){l&&l.filter&&this._validate(s.y.filter,"querySourceFeatures.filter",l.filter,null,l);let h=this.sourceCaches[r];return h?function(p,g){let y=p.getRenderableIds().map(A=>p.getTileByID(A)),E=[],M={};for(let A=0;A<y.length;A++){let O=y[A],F=O.tileID.canonical.key;M[F]||(M[F]=!0,O.querySourceFeatures(E,g))}return E}(h,l):[]}getLight(){return this.light.getLight()}setLight(r,l={}){this._checkLoaded();let h=this.light.getLight(),p=!1;for(let y in r)if(!s.bE(r[y],h[y])){p=!0;break}if(!p)return;let g={now:I.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(g)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,l={}){this._checkLoaded();let h=this.getSky(),p=!1;if(!r&&!h)return;if(r&&!h)p=!0;else if(!r&&h)p=!0;else for(let y in r)if(!s.bE(r[y],h[y])){p=!0;break}if(!p)return;let g={now:I.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,l),this.sky.updateTransitions(g)}_setProjectionInternal(r){let l=function(h){if(Array.isArray(h)){let p=new jo({type:h});return{projection:p,transform:new eo,cameraHelper:new ea(p)}}switch(h){case"mercator":return{projection:new Fl,transform:new po,cameraHelper:new ol};case"globe":{let p=new jo({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:p,transform:new eo,cameraHelper:new ea(p)}}case"vertical-perspective":return{projection:new ko,transform:new Ra,cameraHelper:new Ao};default:return s.w(`Unknown projection name: ${h}. Falling back to mercator projection.`),{projection:new Fl,transform:new po,cameraHelper:new ol}}}(r);this.projection=l.projection,this.map.migrateProjection(l.transform,l.cameraHelper);for(let h in this.sourceCaches)this.sourceCaches[h].reload()}_validate(r,l,h,p,g={}){return(!g||g.validate!==!1)&&sl(this,r.call(s.y,s.e({key:l,style:this.serialize(),value:h,styleSpec:s.v},p)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),zi().off(xs,this._rtlPluginLoaded);for(let l in this._layers)this._layers[l].setEventedParent(null);for(let l in this.sourceCaches){let h=this.sourceCaches[l];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(let l in this.sourceCaches)this.sourceCaches[l].update(r,this.map.terrain)}_generateCollisionBoxes(){for(let r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,l,h,p,g=!1){let y=!1,E=!1,M={};for(let A of this._order){let O=this._layers[A];if(O.type!=="symbol")continue;if(!M[O.source]){let N=this.sourceCaches[O.source];M[O.source]=N.getRenderableIds(!0).map(K=>N.getTileByID(K)).sort((K,ee)=>ee.tileID.overscaledZ-K.tileID.overscaledZ||(K.tileID.isLessThan(ee.tileID)?-1:1))}let F=this.crossTileSymbolIndex.addLayer(O,M[O.source],r.center.lng);y=y||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((g=g||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(I.now(),r.zoom))&&(this.pauseablePlacement=new gc(r,this.map.terrain,this._order,g,l,h,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(I.now()),E=!0),y&&this.pauseablePlacement.placement.setStale()),E||y)for(let A of this._order){let O=this._layers[A];O.type==="symbol"&&this.placement.updateLayerOpacities(O,M[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(I.now())}_releaseSymbolFadeTiles(){for(let r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,l){return s._(this,void 0,void 0,function*(){let h=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();let p=this.sourceCaches[l.source];return p&&p.setDependencies(l.tileID.key,l.type,l.icons),h})}getGlyphs(r,l){return s._(this,void 0,void 0,function*(){let h=yield this.glyphManager.getGlyphs(l.stacks),p=this.sourceCaches[l.source];return p&&p.setDependencies(l.tileID.key,l.type,[""]),h})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,l={}){this._checkLoaded(),r&&this._validate(s.y.glyphs,"glyphs",r,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,l,h={},p){this._checkLoaded();let g=[{id:r,url:l}],y=[...de(this.stylesheet.sprite),...g];this._validate(s.y.sprite,"sprite",y,null,h)||(this.stylesheet.sprite=y,this._loadSprite(g,!0,p))}removeSprite(r){this._checkLoaded();let l=de(this.stylesheet.sprite);if(l.find(h=>h.id===r)){if(this._spritesImagesIds[r])for(let h of this._spritesImagesIds[r])this.imageManager.removeImage(h),this._changedImages[h]=!0;l.splice(l.findIndex(h=>h.id===r),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return de(this.stylesheet.sprite)}setSprite(r,l={},h){this._checkLoaded(),r&&this._validate(s.y.sprite,"sprite",r,null,l)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,h):(this._unloadSprite(),h&&h(null)))}}var _p=s.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ta{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,l,h,p,g,y,E,M,A){this.context=r;let O=this.boundPaintVertexBuffers.length!==p.length;for(let F=0;!O&&F<p.length;F++)this.boundPaintVertexBuffers[F]!==p[F]&&(O=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==h||O||this.boundIndexBuffer!==g||this.boundVertexOffset!==y||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==A?this.freshBind(l,h,p,g,y,E,M,A):(r.bindVertexArray.set(this.vao),E&&E.bind(),g&&g.dynamicDraw&&g.bind(),M&&M.bind(),A&&A.bind())}freshBind(r,l,h,p,g,y,E,M){let A=r.numAttributes,O=this.context,F=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=p,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=y,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=M,l.enableAttributes(F,r);for(let N of h)N.enableAttributes(F,r);y&&y.enableAttributes(F,r),E&&E.enableAttributes(F,r),M&&M.enableAttributes(F,r),l.bind(),l.setVertexAttribPointers(F,r,g);for(let N of h)N.bind(),N.setVertexAttribPointers(F,r,g);y&&(y.bind(),y.setVertexAttribPointers(F,r,g)),p&&p.bind(),E&&(E.bind(),E.setVertexAttribPointers(F,r,g)),M&&(M.bind(),M.setVertexAttribPointers(F,r,g)),O.currentNumAttributes=A}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let bp=(m,r,l,h,p)=>({u_texture:0,u_ele_delta:m,u_fog_matrix:r,u_fog_color:l?l.properties.get("fog-color"):s.b7.white,u_fog_ground_blend:l?l.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?0:l?l.calculateFogBlendOpacity(h):0,u_horizon_color:l?l.properties.get("horizon-color"):s.b7.white,u_horizon_fog_blend:l?l.properties.get("horizon-fog-blend"):1,u_is_globe_mode:p?1:0}),yc={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function ia(m){let r=[];for(let l=0;l<m.length;l++){if(m[l]===null)continue;let h=m[l].split(" ");r.push(h.pop())}return r}class xc{constructor(r,l,h,p,g,y,E,M,A=[]){let O=r.gl;this.program=O.createProgram();let F=ia(l.staticAttributes),N=h?h.getBinderAttributes():[],K=F.concat(N),ee=gr.prelude.staticUniforms?ia(gr.prelude.staticUniforms):[],_e=E.staticUniforms?ia(E.staticUniforms):[],ge=l.staticUniforms?ia(l.staticUniforms):[],be=h?h.getBinderUniforms():[],Ce=ee.concat(_e).concat(ge).concat(be),Ie=[];for(let et of Ce)Ie.indexOf(et)<0&&Ie.push(et);let Me=h?h.defines():[];Sn(O)&&Me.unshift("#version 300 es"),g&&Me.push("#define OVERDRAW_INSPECTOR;"),y&&Me.push("#define TERRAIN3D;"),M&&Me.push(M),A&&Me.push(...A);let Ae=Me.concat(gr.prelude.fragmentSource,E.fragmentSource,l.fragmentSource).join(`
`),ze=Me.concat(gr.prelude.vertexSource,E.vertexSource,l.vertexSource).join(`
`);Sn(O)||(Ae=function(et){return et.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ae),ze=function(et){return et.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(ze));let Re=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(Re,Ae),O.compileShader(Re),!O.getShaderParameter(Re,O.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${O.getShaderInfoLog(Re)}`);O.attachShader(this.program,Re);let We=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(We,ze),O.compileShader(We),!O.getShaderParameter(We,O.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${O.getShaderInfoLog(We)}`);O.attachShader(this.program,We),this.attributes={};let ut={};this.numAttributes=K.length;for(let et=0;et<this.numAttributes;et++)K[et]&&(O.bindAttribLocation(this.program,et,K[et]),this.attributes[K[et]]=et);if(O.linkProgram(this.program),!O.getProgramParameter(this.program,O.LINK_STATUS))throw new Error(`Program failed to link: ${O.getProgramInfoLog(this.program)}`);O.deleteShader(We),O.deleteShader(Re);for(let et=0;et<Ie.length;et++){let rt=Ie[et];if(rt&&!ut[rt]){let lt=O.getUniformLocation(this.program,rt);lt&&(ut[rt]=lt)}}this.fixedUniforms=p(r,ut),this.terrainUniforms=((et,rt)=>({u_depth:new s.bH(et,rt.u_depth),u_terrain:new s.bH(et,rt.u_terrain),u_terrain_dim:new s.b8(et,rt.u_terrain_dim),u_terrain_matrix:new s.bJ(et,rt.u_terrain_matrix),u_terrain_unpack:new s.bK(et,rt.u_terrain_unpack),u_terrain_exaggeration:new s.b8(et,rt.u_terrain_exaggeration)}))(r,ut),this.projectionUniforms=((et,rt)=>({u_projection_matrix:new s.bJ(et,rt.u_projection_matrix),u_projection_tile_mercator_coords:new s.bK(et,rt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bK(et,rt.u_projection_clipping_plane),u_projection_transition:new s.b8(et,rt.u_projection_transition),u_projection_fallback_matrix:new s.bJ(et,rt.u_projection_fallback_matrix)}))(r,ut),this.binderUniforms=h?h.getUniforms(r,ut):[]}draw(r,l,h,p,g,y,E,M,A,O,F,N,K,ee,_e,ge,be,Ce,Ie){let Me=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(h),r.setStencilMode(p),r.setColorMode(g),r.setCullFace(y),M){r.activeTexture.set(Me.TEXTURE2),Me.bindTexture(Me.TEXTURE_2D,M.depthTexture),r.activeTexture.set(Me.TEXTURE3),Me.bindTexture(Me.TEXTURE_2D,M.texture);for(let ze in this.terrainUniforms)this.terrainUniforms[ze].set(M[ze])}if(A)for(let ze in A)this.projectionUniforms[yc[ze]].set(A[ze]);if(E)for(let ze in this.fixedUniforms)this.fixedUniforms[ze].set(E[ze]);ge&&ge.setUniforms(r,this.binderUniforms,ee,{zoom:_e});let Ae=0;switch(l){case Me.LINES:Ae=2;break;case Me.TRIANGLES:Ae=3;break;case Me.LINE_STRIP:Ae=1}for(let ze of K.get()){let Re=ze.vaos||(ze.vaos={});(Re[O]||(Re[O]=new ta)).bind(r,this,F,ge?ge.getPaintVertexBuffers():[],N,ze.vertexOffset,be,Ce,Ie),Me.drawElements(l,ze.primitiveLength*Ae,Me.UNSIGNED_SHORT,ze.primitiveOffset*Ae*2)}}}function fo(m,r,l){let h=1/s.az(l,1,r.transform.tileZoom),p=Math.pow(2,l.tileID.overscaledZ),g=l.tileSize*Math.pow(2,r.transform.tileZoom)/p,y=g*(l.tileID.canonical.x+l.tileID.wrap*p),E=g*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[h,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[y>>16,E>>16],u_pixel_coord_lower:[65535&y,65535&E]}}let al=(m,r,l,h)=>{let p=m.style.light,g=p.properties.get("position"),y=[g.x,g.y,g.z],E=s.bN();p.properties.get("anchor")==="viewport"&&s.bO(E,m.transform.bearingInRadians),s.bP(y,y,E);let M=m.transform.transformLightDirection(y),A=p.properties.get("color");return{u_lightpos:y,u_lightpos_globe:M,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[A.r,A.g,A.b],u_vertical_gradient:+r,u_opacity:l,u_fill_translate:h}},os=(m,r,l,h,p,g,y)=>s.e(al(m,r,l,h),fo(g,m,y),{u_height_factor:-Math.pow(2,p.overscaledZ)/y.tileSize/8}),wu=(m,r,l,h)=>s.e(fo(r,m,l),{u_fill_translate:h}),ll=(m,r)=>({u_world:m,u_fill_translate:r}),ra=(m,r,l,h,p)=>s.e(wu(m,r,l,p),{u_world:h}),na=(m,r,l,h,p)=>{let g=m.transform,y,E,M=0;if(l.paint.get("circle-pitch-alignment")==="map"){let A=s.az(r,1,g.zoom);y=!0,E=[A,A],M=A/(s.Z*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*p}else y=!1,E=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(l.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+y,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:E,u_globe_extrude_scale:M,u_translate:h}},Cu=m=>({u_pixel_extrude_scale:[1/m.width,1/m.height]}),qo=m=>({u_viewport_size:[m.width,m.height]}),Ul=(m,r=1)=>({u_color:m,u_overlay:0,u_overlay_scale:r}),oa=(m,r,l,h)=>{let p=s.az(m,1,r)/(s.Z*Math.pow(2,m.tileID.overscaledZ))*2*Math.PI*h;return{u_extrude_scale:s.az(m,1,r),u_intensity:l,u_globe_extrude_scale:p}},kd=(m,r,l,h)=>{let p=s.K();s.bQ(p,0,m.width,m.height,0,0,1);let g=m.context.gl;return{u_matrix:p,u_world:[g.drawingBufferWidth,g.drawingBufferHeight],u_image:l,u_color_ramp:h,u_opacity:r.paint.get("heatmap-opacity")}},Ad=(m,r,l)=>{let h=l.paint.get("hillshade-accent-color"),p;switch(l.paint.get("hillshade-method")){case"basic":p=4;break;case"combined":p=1;break;case"igor":p=2;break;case"multidirectional":p=3;break;default:p=0}let g=l.getIlluminationProperties();for(let y=0;y<g.directionRadians.length;y++)l.paint.get("hillshade-illumination-anchor")==="viewport"&&(g.directionRadians[y]+=m.transform.bearingInRadians);return{u_image:0,u_latrange:Dd(0,r.tileID),u_exaggeration:l.paint.get("hillshade-exaggeration"),u_altitudes:g.altitudeRadians,u_azimuths:g.directionRadians,u_accent:h,u_method:p,u_highlights:g.highlightColor,u_shadows:g.shadowColor}},Oa=(m,r)=>{let l=r.stride,h=s.K();return s.bQ(h,0,s.Z,-8192,0,0,1),s.L(h,h,[0,-8192,0]),{u_matrix:h,u_image:1,u_dimension:[l,l],u_zoom:m.overscaledZ,u_unpack:r.getUnpackVector()}};function Dd(m,r){let l=Math.pow(2,r.canonical.z),h=r.canonical.y;return[new s.$(0,h/l).toLngLat().lat,new s.$(0,(h+1)/l).toLngLat().lat]}let jl=(m,r,l,h)=>{let p=m.transform;return{u_translation:sa(m,r,l),u_ratio:h/s.az(r,1,p.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Rd=(m,r,l,h,p)=>s.e(jl(m,r,l,h),{u_image:0,u_image_height:p}),Od=(m,r,l,h,p)=>{let g=m.transform,y=cl(r,g);return{u_translation:sa(m,r,l),u_texsize:r.imageAtlasTexture.size,u_ratio:h/s.az(r,1,g.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[y,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},wc=(m,r,l,h,p,g)=>{let y=m.lineAtlas,E=cl(r,m.transform),M=l.layout.get("line-cap")==="round",A=y.getDash(p.from,M),O=y.getDash(p.to,M),F=A.width*g.fromScale,N=O.width*g.toScale;return s.e(jl(m,r,l,h),{u_patternscale_a:[E/F,-A.height/2],u_patternscale_b:[E/N,-O.height/2],u_sdfgamma:y.width/(256*Math.min(F,N)*m.pixelRatio)/2,u_image:0,u_tex_y_a:A.y,u_tex_y_b:O.y,u_mix:g.t})};function cl(m,r){return 1/s.az(m,1,r.tileZoom)}function sa(m,r,l){return s.aA(m.transform,r,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}let Ld=(m,r,l,h,p)=>{return{u_tl_parent:m,u_scale_parent:r,u_buffer_scale:1,u_fade_t:l.mix,u_opacity:l.opacity*h.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:h.paint.get("raster-brightness-min"),u_brightness_high:h.paint.get("raster-brightness-max"),u_saturation_factor:(y=h.paint.get("raster-saturation"),y>0?1-1/(1.001-y):-y),u_contrast_factor:(g=h.paint.get("raster-contrast"),g>0?1/(1-g):1+g),u_spin_weights:Eu(h.paint.get("raster-hue-rotate")),u_coords_top:[p[0].x,p[0].y,p[1].x,p[1].y],u_coords_bottom:[p[3].x,p[3].y,p[2].x,p[2].y]};var g,y};function Eu(m){m*=Math.PI/180;let r=Math.sin(m),l=Math.cos(m);return[(2*l+1)/3,(-Math.sqrt(3)*r-l+1)/3,(Math.sqrt(3)*r-l+1)/3]}let aa=(m,r,l,h,p,g,y,E,M,A,O,F,N)=>{let K=y.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:K.width/K.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_label_plane_matrix:E,u_coord_matrix:M,u_is_text:+O,u_pitch_with_map:+h,u_is_along_line:p,u_is_variable_anchor:g,u_texsize:F,u_texture:0,u_translation:A,u_pitched_scale:N}},Su=(m,r,l,h,p,g,y,E,M,A,O,F,N,K)=>{let ee=y.transform;return s.e(aa(m,r,l,h,p,g,y,E,M,A,O,F,K),{u_gamma_scale:h?Math.cos(ee.pitch*Math.PI/180)*ee.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:1})},Cc=(m,r,l,h,p,g,y,E,M,A,O,F,N)=>s.e(Su(m,r,l,h,p,g,y,E,M,A,!0,O,0,N),{u_texsize_icon:F,u_texture_icon:1}),vp=(m,r)=>({u_opacity:m,u_color:r}),Nd=(m,r,l,h,p)=>s.e(function(g,y,E,M){let A=E.imageManager.getPattern(g.from.toString()),O=E.imageManager.getPattern(g.to.toString()),{width:F,height:N}=E.imageManager.getPixelSize(),K=Math.pow(2,M.tileID.overscaledZ),ee=M.tileSize*Math.pow(2,E.transform.tileZoom)/K,_e=ee*(M.tileID.canonical.x+M.tileID.wrap*K),ge=ee*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:A.tl,u_pattern_br_a:A.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[F,N],u_mix:y.t,u_pattern_size_a:A.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:y.fromScale,u_scale_b:y.toScale,u_tile_units_to_pixels:1/s.az(M,1,E.transform.tileZoom),u_pixel_coord_upper:[_e>>16,ge>>16],u_pixel_coord_lower:[65535&_e,65535&ge]}}(l,p,r,h),{u_opacity:m}),Ec=(m,r)=>{},Tu={fillExtrusion:(m,r)=>({u_lightpos:new s.bL(m,r.u_lightpos),u_lightpos_globe:new s.bL(m,r.u_lightpos_globe),u_lightintensity:new s.b8(m,r.u_lightintensity),u_lightcolor:new s.bL(m,r.u_lightcolor),u_vertical_gradient:new s.b8(m,r.u_vertical_gradient),u_opacity:new s.b8(m,r.u_opacity),u_fill_translate:new s.bM(m,r.u_fill_translate)}),fillExtrusionPattern:(m,r)=>({u_lightpos:new s.bL(m,r.u_lightpos),u_lightpos_globe:new s.bL(m,r.u_lightpos_globe),u_lightintensity:new s.b8(m,r.u_lightintensity),u_lightcolor:new s.bL(m,r.u_lightcolor),u_vertical_gradient:new s.b8(m,r.u_vertical_gradient),u_height_factor:new s.b8(m,r.u_height_factor),u_opacity:new s.b8(m,r.u_opacity),u_fill_translate:new s.bM(m,r.u_fill_translate),u_image:new s.bH(m,r.u_image),u_texsize:new s.bM(m,r.u_texsize),u_pixel_coord_upper:new s.bM(m,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(m,r.u_pixel_coord_lower),u_scale:new s.bL(m,r.u_scale),u_fade:new s.b8(m,r.u_fade)}),fill:(m,r)=>({u_fill_translate:new s.bM(m,r.u_fill_translate)}),fillPattern:(m,r)=>({u_image:new s.bH(m,r.u_image),u_texsize:new s.bM(m,r.u_texsize),u_pixel_coord_upper:new s.bM(m,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(m,r.u_pixel_coord_lower),u_scale:new s.bL(m,r.u_scale),u_fade:new s.b8(m,r.u_fade),u_fill_translate:new s.bM(m,r.u_fill_translate)}),fillOutline:(m,r)=>({u_world:new s.bM(m,r.u_world),u_fill_translate:new s.bM(m,r.u_fill_translate)}),fillOutlinePattern:(m,r)=>({u_world:new s.bM(m,r.u_world),u_image:new s.bH(m,r.u_image),u_texsize:new s.bM(m,r.u_texsize),u_pixel_coord_upper:new s.bM(m,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(m,r.u_pixel_coord_lower),u_scale:new s.bL(m,r.u_scale),u_fade:new s.b8(m,r.u_fade),u_fill_translate:new s.bM(m,r.u_fill_translate)}),circle:(m,r)=>({u_camera_to_center_distance:new s.b8(m,r.u_camera_to_center_distance),u_scale_with_map:new s.bH(m,r.u_scale_with_map),u_pitch_with_map:new s.bH(m,r.u_pitch_with_map),u_extrude_scale:new s.bM(m,r.u_extrude_scale),u_device_pixel_ratio:new s.b8(m,r.u_device_pixel_ratio),u_globe_extrude_scale:new s.b8(m,r.u_globe_extrude_scale),u_translate:new s.bM(m,r.u_translate)}),collisionBox:(m,r)=>({u_pixel_extrude_scale:new s.bM(m,r.u_pixel_extrude_scale)}),collisionCircle:(m,r)=>({u_viewport_size:new s.bM(m,r.u_viewport_size)}),debug:(m,r)=>({u_color:new s.bI(m,r.u_color),u_overlay:new s.bH(m,r.u_overlay),u_overlay_scale:new s.b8(m,r.u_overlay_scale)}),depth:Ec,clippingMask:Ec,heatmap:(m,r)=>({u_extrude_scale:new s.b8(m,r.u_extrude_scale),u_intensity:new s.b8(m,r.u_intensity),u_globe_extrude_scale:new s.b8(m,r.u_globe_extrude_scale)}),heatmapTexture:(m,r)=>({u_matrix:new s.bJ(m,r.u_matrix),u_world:new s.bM(m,r.u_world),u_image:new s.bH(m,r.u_image),u_color_ramp:new s.bH(m,r.u_color_ramp),u_opacity:new s.b8(m,r.u_opacity)}),hillshade:(m,r)=>({u_image:new s.bH(m,r.u_image),u_latrange:new s.bM(m,r.u_latrange),u_exaggeration:new s.b8(m,r.u_exaggeration),u_altitudes:new s.bS(m,r.u_altitudes),u_azimuths:new s.bS(m,r.u_azimuths),u_accent:new s.bI(m,r.u_accent),u_method:new s.bH(m,r.u_method),u_shadows:new s.bR(m,r.u_shadows),u_highlights:new s.bR(m,r.u_highlights)}),hillshadePrepare:(m,r)=>({u_matrix:new s.bJ(m,r.u_matrix),u_image:new s.bH(m,r.u_image),u_dimension:new s.bM(m,r.u_dimension),u_zoom:new s.b8(m,r.u_zoom),u_unpack:new s.bK(m,r.u_unpack)}),line:(m,r)=>({u_translation:new s.bM(m,r.u_translation),u_ratio:new s.b8(m,r.u_ratio),u_device_pixel_ratio:new s.b8(m,r.u_device_pixel_ratio),u_units_to_pixels:new s.bM(m,r.u_units_to_pixels)}),lineGradient:(m,r)=>({u_translation:new s.bM(m,r.u_translation),u_ratio:new s.b8(m,r.u_ratio),u_device_pixel_ratio:new s.b8(m,r.u_device_pixel_ratio),u_units_to_pixels:new s.bM(m,r.u_units_to_pixels),u_image:new s.bH(m,r.u_image),u_image_height:new s.b8(m,r.u_image_height)}),linePattern:(m,r)=>({u_translation:new s.bM(m,r.u_translation),u_texsize:new s.bM(m,r.u_texsize),u_ratio:new s.b8(m,r.u_ratio),u_device_pixel_ratio:new s.b8(m,r.u_device_pixel_ratio),u_image:new s.bH(m,r.u_image),u_units_to_pixels:new s.bM(m,r.u_units_to_pixels),u_scale:new s.bL(m,r.u_scale),u_fade:new s.b8(m,r.u_fade)}),lineSDF:(m,r)=>({u_translation:new s.bM(m,r.u_translation),u_ratio:new s.b8(m,r.u_ratio),u_device_pixel_ratio:new s.b8(m,r.u_device_pixel_ratio),u_units_to_pixels:new s.bM(m,r.u_units_to_pixels),u_patternscale_a:new s.bM(m,r.u_patternscale_a),u_patternscale_b:new s.bM(m,r.u_patternscale_b),u_sdfgamma:new s.b8(m,r.u_sdfgamma),u_image:new s.bH(m,r.u_image),u_tex_y_a:new s.b8(m,r.u_tex_y_a),u_tex_y_b:new s.b8(m,r.u_tex_y_b),u_mix:new s.b8(m,r.u_mix)}),raster:(m,r)=>({u_tl_parent:new s.bM(m,r.u_tl_parent),u_scale_parent:new s.b8(m,r.u_scale_parent),u_buffer_scale:new s.b8(m,r.u_buffer_scale),u_fade_t:new s.b8(m,r.u_fade_t),u_opacity:new s.b8(m,r.u_opacity),u_image0:new s.bH(m,r.u_image0),u_image1:new s.bH(m,r.u_image1),u_brightness_low:new s.b8(m,r.u_brightness_low),u_brightness_high:new s.b8(m,r.u_brightness_high),u_saturation_factor:new s.b8(m,r.u_saturation_factor),u_contrast_factor:new s.b8(m,r.u_contrast_factor),u_spin_weights:new s.bL(m,r.u_spin_weights),u_coords_top:new s.bK(m,r.u_coords_top),u_coords_bottom:new s.bK(m,r.u_coords_bottom)}),symbolIcon:(m,r)=>({u_is_size_zoom_constant:new s.bH(m,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(m,r.u_is_size_feature_constant),u_size_t:new s.b8(m,r.u_size_t),u_size:new s.b8(m,r.u_size),u_camera_to_center_distance:new s.b8(m,r.u_camera_to_center_distance),u_pitch:new s.b8(m,r.u_pitch),u_rotate_symbol:new s.bH(m,r.u_rotate_symbol),u_aspect_ratio:new s.b8(m,r.u_aspect_ratio),u_fade_change:new s.b8(m,r.u_fade_change),u_label_plane_matrix:new s.bJ(m,r.u_label_plane_matrix),u_coord_matrix:new s.bJ(m,r.u_coord_matrix),u_is_text:new s.bH(m,r.u_is_text),u_pitch_with_map:new s.bH(m,r.u_pitch_with_map),u_is_along_line:new s.bH(m,r.u_is_along_line),u_is_variable_anchor:new s.bH(m,r.u_is_variable_anchor),u_texsize:new s.bM(m,r.u_texsize),u_texture:new s.bH(m,r.u_texture),u_translation:new s.bM(m,r.u_translation),u_pitched_scale:new s.b8(m,r.u_pitched_scale)}),symbolSDF:(m,r)=>({u_is_size_zoom_constant:new s.bH(m,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(m,r.u_is_size_feature_constant),u_size_t:new s.b8(m,r.u_size_t),u_size:new s.b8(m,r.u_size),u_camera_to_center_distance:new s.b8(m,r.u_camera_to_center_distance),u_pitch:new s.b8(m,r.u_pitch),u_rotate_symbol:new s.bH(m,r.u_rotate_symbol),u_aspect_ratio:new s.b8(m,r.u_aspect_ratio),u_fade_change:new s.b8(m,r.u_fade_change),u_label_plane_matrix:new s.bJ(m,r.u_label_plane_matrix),u_coord_matrix:new s.bJ(m,r.u_coord_matrix),u_is_text:new s.bH(m,r.u_is_text),u_pitch_with_map:new s.bH(m,r.u_pitch_with_map),u_is_along_line:new s.bH(m,r.u_is_along_line),u_is_variable_anchor:new s.bH(m,r.u_is_variable_anchor),u_texsize:new s.bM(m,r.u_texsize),u_texture:new s.bH(m,r.u_texture),u_gamma_scale:new s.b8(m,r.u_gamma_scale),u_device_pixel_ratio:new s.b8(m,r.u_device_pixel_ratio),u_is_halo:new s.bH(m,r.u_is_halo),u_translation:new s.bM(m,r.u_translation),u_pitched_scale:new s.b8(m,r.u_pitched_scale)}),symbolTextAndIcon:(m,r)=>({u_is_size_zoom_constant:new s.bH(m,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(m,r.u_is_size_feature_constant),u_size_t:new s.b8(m,r.u_size_t),u_size:new s.b8(m,r.u_size),u_camera_to_center_distance:new s.b8(m,r.u_camera_to_center_distance),u_pitch:new s.b8(m,r.u_pitch),u_rotate_symbol:new s.bH(m,r.u_rotate_symbol),u_aspect_ratio:new s.b8(m,r.u_aspect_ratio),u_fade_change:new s.b8(m,r.u_fade_change),u_label_plane_matrix:new s.bJ(m,r.u_label_plane_matrix),u_coord_matrix:new s.bJ(m,r.u_coord_matrix),u_is_text:new s.bH(m,r.u_is_text),u_pitch_with_map:new s.bH(m,r.u_pitch_with_map),u_is_along_line:new s.bH(m,r.u_is_along_line),u_is_variable_anchor:new s.bH(m,r.u_is_variable_anchor),u_texsize:new s.bM(m,r.u_texsize),u_texsize_icon:new s.bM(m,r.u_texsize_icon),u_texture:new s.bH(m,r.u_texture),u_texture_icon:new s.bH(m,r.u_texture_icon),u_gamma_scale:new s.b8(m,r.u_gamma_scale),u_device_pixel_ratio:new s.b8(m,r.u_device_pixel_ratio),u_is_halo:new s.bH(m,r.u_is_halo),u_translation:new s.bM(m,r.u_translation),u_pitched_scale:new s.b8(m,r.u_pitched_scale)}),background:(m,r)=>({u_opacity:new s.b8(m,r.u_opacity),u_color:new s.bI(m,r.u_color)}),backgroundPattern:(m,r)=>({u_opacity:new s.b8(m,r.u_opacity),u_image:new s.bH(m,r.u_image),u_pattern_tl_a:new s.bM(m,r.u_pattern_tl_a),u_pattern_br_a:new s.bM(m,r.u_pattern_br_a),u_pattern_tl_b:new s.bM(m,r.u_pattern_tl_b),u_pattern_br_b:new s.bM(m,r.u_pattern_br_b),u_texsize:new s.bM(m,r.u_texsize),u_mix:new s.b8(m,r.u_mix),u_pattern_size_a:new s.bM(m,r.u_pattern_size_a),u_pattern_size_b:new s.bM(m,r.u_pattern_size_b),u_scale_a:new s.b8(m,r.u_scale_a),u_scale_b:new s.b8(m,r.u_scale_b),u_pixel_coord_upper:new s.bM(m,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(m,r.u_pixel_coord_lower),u_tile_units_to_pixels:new s.b8(m,r.u_tile_units_to_pixels)}),terrain:(m,r)=>({u_texture:new s.bH(m,r.u_texture),u_ele_delta:new s.b8(m,r.u_ele_delta),u_fog_matrix:new s.bJ(m,r.u_fog_matrix),u_fog_color:new s.bI(m,r.u_fog_color),u_fog_ground_blend:new s.b8(m,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.b8(m,r.u_fog_ground_blend_opacity),u_horizon_color:new s.bI(m,r.u_horizon_color),u_horizon_fog_blend:new s.b8(m,r.u_horizon_fog_blend),u_is_globe_mode:new s.b8(m,r.u_is_globe_mode)}),terrainDepth:(m,r)=>({u_ele_delta:new s.b8(m,r.u_ele_delta)}),terrainCoords:(m,r)=>({u_texture:new s.bH(m,r.u_texture),u_terrain_coords_id:new s.b8(m,r.u_terrain_coords_id),u_ele_delta:new s.b8(m,r.u_ele_delta)}),projectionErrorMeasurement:(m,r)=>({u_input:new s.b8(m,r.u_input),u_output_expected:new s.b8(m,r.u_output_expected)}),atmosphere:(m,r)=>({u_sun_pos:new s.bL(m,r.u_sun_pos),u_atmosphere_blend:new s.b8(m,r.u_atmosphere_blend),u_globe_position:new s.bL(m,r.u_globe_position),u_globe_radius:new s.b8(m,r.u_globe_radius),u_inv_proj_matrix:new s.bJ(m,r.u_inv_proj_matrix)}),sky:(m,r)=>({u_sky_color:new s.bI(m,r.u_sky_color),u_horizon_color:new s.bI(m,r.u_horizon_color),u_horizon:new s.bM(m,r.u_horizon),u_horizon_normal:new s.bM(m,r.u_horizon_normal),u_sky_horizon_blend:new s.b8(m,r.u_sky_horizon_blend),u_sky_blend:new s.b8(m,r.u_sky_blend)})};class Fd{constructor(r,l,h){this.context=r;let p=r.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){let l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Mu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class zd{constructor(r,l,h,p){this.length=l.length,this.attributes=h,this.itemSize=l.bytesPerElement,this.dynamicDraw=p,this.context=r;let g=r.gl;this.buffer=g.createBuffer(),r.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);let l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,l){for(let h=0;h<this.attributes.length;h++){let p=l.attributes[this.attributes[h].name];p!==void 0&&r.enableVertexAttribArray(p)}}setVertexAttribPointers(r,l,h){for(let p=0;p<this.attributes.length;p++){let g=this.attributes[p],y=l.attributes[g.name];y!==void 0&&r.vertexAttribPointer(y,g.components,r[Mu[g.type]],!1,this.itemSize,g.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Bi{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Do extends Bi{getDefault(){return s.b7.transparent}set(r){let l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Sc extends Bi{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class ss extends Bi{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class ql extends Bi{getDefault(){return[!0,!0,!0,!0]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Bd extends Bi{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Iu extends Bi{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Ho extends Bi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){let l=this.current;(r.func!==l.func||r.ref!==l.ref||r.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Tc extends Bi{getDefault(){let r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class yp extends Bi{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}}class xp extends Bi{getDefault(){return[0,1]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class wp extends Bi{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}}class Cp extends Bi{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Vd extends Bi{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}}class Mc extends Bi{getDefault(){let r=this.gl;return[r.ONE,r.ZERO]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class la extends Bi{getDefault(){return s.b7.transparent}set(r){let l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ic extends Bi{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Hl extends Bi{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}}class La extends Bi{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Sr extends Bi{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class ca extends Bi{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class ul extends Bi{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class ii extends Bi{getDefault(){let r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Un extends Bi{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class mo extends Bi{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Ud extends Bi{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class $l extends Bi{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class as extends Bi{getDefault(){return null}set(r){let l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ls extends Bi{getDefault(){return null}set(r){var l;if(r===this.current&&!this.dirty)return;let h=this.gl;Sn(h)?h.bindVertexArray(r):(l=h.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class ua extends Bi{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class cs extends Bi{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Ro extends Bi{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Na extends Bi{constructor(r,l){super(r),this.context=r,this.parent=l}getDefault(){return null}}class da extends Na{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Fa extends Na{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Pc extends Na{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}let kc="Framebuffer is not complete";class Li{constructor(r,l,h,p,g){this.context=r,this.width=l,this.height=h;let y=r.gl,E=this.framebuffer=y.createFramebuffer();if(this.colorAttachment=new da(r,E),p)this.depthAttachment=g?new Pc(r,E):new Fa(r,E);else if(g)throw new Error("Stencil cannot be set without depth");if(y.checkFramebufferStatus(y.FRAMEBUFFER)!==y.FRAMEBUFFER_COMPLETE)throw new Error(kc)}destroy(){let r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){let h=this.depthAttachment.get();h&&r.deleteRenderbuffer(h)}r.deleteFramebuffer(this.framebuffer)}}class Ac{constructor(r){var l,h;if(this.gl=r,this.clearColor=new Do(this),this.clearDepth=new Sc(this),this.clearStencil=new ss(this),this.colorMask=new ql(this),this.depthMask=new Bd(this),this.stencilMask=new Iu(this),this.stencilFunc=new Ho(this),this.stencilOp=new Tc(this),this.stencilTest=new yp(this),this.depthRange=new xp(this),this.depthTest=new wp(this),this.depthFunc=new Cp(this),this.blend=new Vd(this),this.blendFunc=new Mc(this),this.blendColor=new la(this),this.blendEquation=new Ic(this),this.cullFace=new Hl(this),this.cullFaceSide=new La(this),this.frontFace=new Sr(this),this.program=new ca(this),this.activeTexture=new ul(this),this.viewport=new ii(this),this.bindFramebuffer=new Un(this),this.bindRenderbuffer=new mo(this),this.bindTexture=new Ud(this),this.bindVertexBuffer=new $l(this),this.bindElementBuffer=new as(this),this.bindVertexArray=new ls(this),this.pixelStoreUnpack=new ua(this),this.pixelStoreUnpackPremultiplyAlpha=new cs(this),this.pixelStoreUnpackFlipY=new Ro(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Sn(r)){this.HALF_FLOAT=r.HALF_FLOAT;let p=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=r.RGBA16F)!==null&&l!==void 0?l:p?.RGBA16F_EXT,this.RGB16F=(h=r.RGB16F)!==null&&h!==void 0?h:p?.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");let p=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=p?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,l){return new Fd(this,r,l)}createVertexBuffer(r,l,h){return new zd(this,r,l,h)}createRenderbuffer(r,l,h){let p=this.gl,g=p.createRenderbuffer();return this.bindRenderbuffer.set(g),p.renderbufferStorage(p.RENDERBUFFER,r,l,h),this.bindRenderbuffer.set(null),g}createFramebuffer(r,l,h,p){return new Li(this,r,l,h,p)}clear({color:r,depth:l,stencil:h}){let p=this.gl,g=0;r&&(g|=p.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(g|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),h!==void 0&&(g|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(h),this.stencilMask.set(255)),p.clear(g)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){s.bE(r.blendFunction,ir.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Sn(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var l;return Sn(this.gl)?this.gl.deleteVertexArray(r):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let Gl;function B(m,r,l,h,p){let g=m.context,y=m.transform,E=g.gl,M=m.useProgram("collisionBox"),A=[],O=0,F=0;for(let be=0;be<h.length;be++){let Ce=h[be],Ie=r.getTile(Ce).getBucket(l);if(!Ie)continue;let Me=p?Ie.textCollisionBox:Ie.iconCollisionBox,Ae=Ie.collisionCircleArray;Ae.length>0&&(A.push({circleArray:Ae,circleOffset:F,coord:Ce}),O+=Ae.length/4,F=O),Me&&M.draw(g,E.LINES,fi.disabled,Jt.disabled,m.colorModeForRenderPass(),Ai.disabled,Cu(m.transform),m.style.map.terrain&&m.style.map.terrain.getTerrainData(Ce),y.getProjectionData({overscaledTileID:Ce,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),l.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,null,m.transform.zoom,null,null,Me.collisionVertexBuffer)}if(!p||!A.length)return;let N=m.useProgram("collisionCircle"),K=new s.bT;K.resize(4*O),K._trim();let ee=0;for(let be of A)for(let Ce=0;Ce<be.circleArray.length/4;Ce++){let Ie=4*Ce,Me=be.circleArray[Ie+0],Ae=be.circleArray[Ie+1],ze=be.circleArray[Ie+2],Re=be.circleArray[Ie+3];K.emplace(ee++,Me,Ae,ze,Re,0),K.emplace(ee++,Me,Ae,ze,Re,1),K.emplace(ee++,Me,Ae,ze,Re,2),K.emplace(ee++,Me,Ae,ze,Re,3)}(!Gl||Gl.length<2*O)&&(Gl=function(be){let Ce=2*be,Ie=new s.bV;Ie.resize(Ce),Ie._trim();for(let Me=0;Me<Ce;Me++){let Ae=6*Me;Ie.uint16[Ae+0]=4*Me+0,Ie.uint16[Ae+1]=4*Me+1,Ie.uint16[Ae+2]=4*Me+2,Ie.uint16[Ae+3]=4*Me+2,Ie.uint16[Ae+4]=4*Me+3,Ie.uint16[Ae+5]=4*Me+0}return Ie}(O));let _e=g.createIndexBuffer(Gl,!0),ge=g.createVertexBuffer(K,s.bU.members,!0);for(let be of A){let Ce=qo(m.transform);N.draw(g,E.TRIANGLES,fi.disabled,Jt.disabled,m.colorModeForRenderPass(),Ai.disabled,Ce,m.style.map.terrain&&m.style.map.terrain.getTerrainData(be.coord),null,l.id,ge,_e,s.aJ.simpleSegment(0,2*be.circleOffset,be.circleArray.length,be.circleArray.length/2),null,m.transform.zoom,null,null,null)}ge.destroy(),_e.destroy()}let $=s.ad(new Float32Array(16));function Se(m,r,l,h,p,g){let{horizontalAlign:y,verticalAlign:E}=s.aE(m);return new s.P((-(y-.5)*r/p+h[0])*g,(-(E-.5)*l/p+h[1])*g)}function Ke(m,r,l,h,p,g){let y=r.tileAnchorPoint.add(new s.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let E=h.mult(g);l||(E=E.rotate(-p));let M=y.add(E);return $e(M.x,M.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(l){let E=Ji(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(m),M=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return m.add(h.rotate(M))}return m.add(h)}function ft(m,r,l,h,p,g,y,E,M,A,O,F){let N=m.text.placedSymbolArray,K=m.text.dynamicLayoutVertexArray,ee=m.icon.dynamicLayoutVertexArray,_e={};K.clear();for(let ge=0;ge<N.length;ge++){let be=N.get(ge),Ce=be.hidden||!be.crossTileID||m.allowVerticalPlacement&&!be.placedOrientation?null:h[be.crossTileID];if(Ce){let Ie=new s.P(be.anchorX,be.anchorY),Me={getElevation:F,width:p.width,height:p.height,pitchedLabelPlaneMatrix:g,pitchWithMap:l,transform:p,tileAnchorPoint:Ie,translation:A,unwrappedTileID:O},Ae=l?it(Ie.x,Ie.y,Me):Ji(Ie.x,Ie.y,Me),ze=Zi(p.cameraToCenterDistance,Ae.signedDistanceFromCamera),Re=s.am(m.textSizeData,E,be)*ze/s.ay;l&&(Re*=m.tilePixelRatio/y);let{width:We,height:ut,anchor:et,textOffset:rt,textBoxScale:lt}=Ce,Pt=Se(et,We,ut,rt,lt,Re),Tt=p.getPitchedTextCorrection(Ie.x+A[0],Ie.y+A[1],O),vt=Ke(Ae.point,Me,r,Pt,-p.bearingInRadians,Tt),Gt=m.allowVerticalPlacement&&be.placedOrientation===s.al.vertical?Math.PI/2:0;for(let Ti=0;Ti<be.numGlyphs;Ti++)s.as(K,vt,Gt);M&&be.associatedIconIndex>=0&&(_e[be.associatedIconIndex]={shiftedAnchor:vt,angle:Gt})}else Bn(be.numGlyphs,K)}if(M){ee.clear();let ge=m.icon.placedSymbolArray;for(let be=0;be<ge.length;be++){let Ce=ge.get(be);if(Ce.hidden)Bn(Ce.numGlyphs,ee);else{let Ie=_e[be];if(Ie)for(let Me=0;Me<Ce.numGlyphs;Me++)s.as(ee,Ie.shiftedAnchor,Ie.angle);else Bn(Ce.numGlyphs,ee)}}m.icon.dynamicLayoutVertexBuffer.updateData(ee)}m.text.dynamicLayoutVertexBuffer.updateData(K)}function zt(m,r,l){return l.iconsInText&&r?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function oi(m,r,l,h,p,g,y,E,M,A,O,F,N){let K=m.context,ee=K.gl,_e=m.transform,ge=E==="map",be=M==="map",Ce=E!=="viewport"&&l.layout.get("symbol-placement")!=="point",Ie=ge&&!be&&!Ce,Me=!l.layout.get("symbol-sort-key").isConstant(),Ae=!1,ze=m.getDepthModeForSublayer(0,fi.ReadOnly),Re=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),We=[],ut=_e.getCircleRadiusCorrection();for(let et of h){let rt=r.getTile(et),lt=rt.getBucket(l);if(!lt)continue;let Pt=p?lt.text:lt.icon;if(!Pt||!Pt.segments.get().length||!Pt.hasVisibleVertices)continue;let Tt=Pt.programConfigurations.get(l.id),vt=p||lt.sdfIcons,Gt=p?lt.textSizeData:lt.iconSizeData,Ti=be||_e.pitch!==0,Gi=m.useProgram(zt(vt,p,lt),Tt),Rr=s.ak(Gt,_e.zoom),vr=m.style.map.terrain&&m.style.map.terrain.getTerrainData(et),Or,Lr,Cr,nr,hn=[0,0],Mn=null;if(p)Lr=rt.glyphAtlasTexture,Cr=ee.LINEAR,Or=rt.glyphAtlasTexture.size,lt.iconsInText&&(hn=rt.imageAtlasTexture.size,Mn=rt.imageAtlasTexture,nr=Ti||m.options.rotating||m.options.zooming||Gt.kind==="composite"||Gt.kind==="camera"?ee.LINEAR:ee.NEAREST);else{let on=l.layout.get("icon-size").constantOr(0)!==1||lt.iconsNeedLinear;Lr=rt.imageAtlasTexture,Cr=vt||m.options.rotating||m.options.zooming||on||Ti?ee.LINEAR:ee.NEAREST,Or=rt.imageAtlasTexture.size}let qn=s.az(rt,1,m.transform.zoom),or=ke(ge,m.transform,qn),hl=s.K();s.an(hl,or);let fa=li(be,ge,m.transform,qn),pl=s.aA(_e,rt,g,y),Xl=_e.getProjectionData({overscaledTileID:et,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),Vu=Re&&lt.hasTextData(),fl=l.layout.get("icon-text-fit")!=="none"&&Vu&&lt.hasIconData();if(Ce){let on=m.style.map.terrain?(bo,Mr)=>m.style.map.terrain.getElevation(et,bo,Mr):null,sn=l.layout.get("text-rotation-alignment")==="map";_i(lt,m,p,or,hl,be,A,sn,et.toUnwrapped(),_e.width,_e.height,pl,on)}let Yl=p&&Re||fl,Wo=Ce||Yl?$:be?or:m.transform.clipSpaceToPixelsMatrix,ml=vt&&l.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Ba;Ba=vt?lt.iconsInText?Cc(Gt.kind,Rr,Ie,be,Ce,Yl,m,Wo,fa,pl,Or,hn,ut):Su(Gt.kind,Rr,Ie,be,Ce,Yl,m,Wo,fa,pl,p,Or,0,ut):aa(Gt.kind,Rr,Ie,be,Ce,Yl,m,Wo,fa,pl,p,Or,ut);let gl={program:Gi,buffers:Pt,uniformValues:Ba,projectionData:Xl,atlasTexture:Lr,atlasTextureIcon:Mn,atlasInterpolation:Cr,atlasInterpolationIcon:nr,isSDF:vt,hasHalo:ml};if(Me&&lt.canOverlap){Ae=!0;let on=Pt.segments.get();for(let sn of on)We.push({segments:new s.aJ([sn]),sortKey:sn.sortKey,state:gl,terrainData:vr})}else We.push({segments:Pt.segments,sortKey:0,state:gl,terrainData:vr})}Ae&&We.sort((et,rt)=>et.sortKey-rt.sortKey);for(let et of We){let rt=et.state;if(K.activeTexture.set(ee.TEXTURE0),rt.atlasTexture.bind(rt.atlasInterpolation,ee.CLAMP_TO_EDGE),rt.atlasTextureIcon&&(K.activeTexture.set(ee.TEXTURE1),rt.atlasTextureIcon&&rt.atlasTextureIcon.bind(rt.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),rt.isSDF){let lt=rt.uniformValues;rt.hasHalo&&(lt.u_is_halo=1,Di(rt.buffers,et.segments,l,m,rt.program,ze,O,F,lt,rt.projectionData,et.terrainData)),lt.u_is_halo=0}Di(rt.buffers,et.segments,l,m,rt.program,ze,O,F,rt.uniformValues,rt.projectionData,et.terrainData)}}function Di(m,r,l,h,p,g,y,E,M,A,O){let F=h.context;p.draw(F,F.gl.TRIANGLES,g,y,E,Ai.backCCW,M,O,A,l.id,m.layoutVertexBuffer,m.indexBuffer,r,l.paint,h.transform.zoom,m.programConfigurations.get(l.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function br(m,r,l,h,p){let g=m.context,y=g.gl,E=Jt.disabled,M=new ir([y.ONE,y.ONE],s.b7.transparent,[!0,!0,!0,!0]),A=r.getBucket(l);if(!A)return;let O=h.key,F=l.heatmapFbos.get(O);F||(F=jn(g,r.tileSize,r.tileSize),l.heatmapFbos.set(O,F)),g.bindFramebuffer.set(F.framebuffer),g.viewport.set([0,0,r.tileSize,r.tileSize]),g.clear({color:s.b7.transparent});let N=A.programConfigurations.get(l.id),K=m.useProgram("heatmap",N,!p),ee=m.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),_e=m.style.map.terrain.getTerrainData(h);K.draw(g,y.TRIANGLES,fi.disabled,E,M,Ai.disabled,oa(r,m.transform.zoom,l.paint.get("heatmap-intensity"),1),_e,ee,l.id,A.layoutVertexBuffer,A.indexBuffer,A.segments,l.paint,m.transform.zoom,N)}function Kr(m,r,l,h,p){let g=m.context,y=g.gl,E=m.transform;g.setColorMode(m.colorModeForRenderPass());let M=go(g,r),A=l.key,O=r.heatmapFbos.get(A);if(!O)return;g.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,O.colorAttachment.get()),g.activeTexture.set(y.TEXTURE1),M.bind(y.LINEAR,y.CLAMP_TO_EDGE);let F=E.getProjectionData({overscaledTileID:l,applyTerrainMatrix:p,applyGlobeMatrix:!h});m.useProgram("heatmapTexture").draw(g,y.TRIANGLES,fi.disabled,Jt.disabled,m.colorModeForRenderPass(),Ai.disabled,kd(m,r,0,1),null,F,r.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments,r.paint,E.zoom),O.destroy(),r.heatmapFbos.delete(A)}function jn(m,r,l){var h,p;let g=m.gl,y=g.createTexture();g.bindTexture(g.TEXTURE_2D,y),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);let E=(h=m.HALF_FLOAT)!==null&&h!==void 0?h:g.UNSIGNED_BYTE,M=(p=m.RGBA16F)!==null&&p!==void 0?p:g.RGBA;g.texImage2D(g.TEXTURE_2D,0,M,r,l,0,g.RGBA,E,null);let A=m.createFramebuffer(r,l,!1,!1);return A.colorAttachment.set(y),A}function go(m,r){return r.colorRampTexture||(r.colorRampTexture=new Ve(m,r.colorRamp,m.gl.RGBA)),r.colorRampTexture}function $o(m,r,l,h,p){if(!l||!h||!h.imageAtlas)return;let g=h.imageAtlas.patternPositions,y=g[l.to.toString()],E=g[l.from.toString()];if(!y&&E&&(y=E),!E&&y&&(E=y),!y||!E){let M=p.getPaintProperty(r);y=g[M],E=g[M]}y&&E&&m.setConstantPatternPositions(y,E)}function Oo(m,r,l,h,p,g,y,E){let M=m.context.gl,A="fill-pattern",O=l.paint.get(A),F=O&&O.constantOr(1),N=l.getCrossfadeParameters(),K,ee,_e,ge,be,Ce=m.transform,Ie=l.paint.get("fill-translate"),Me=l.paint.get("fill-translate-anchor");y?(ee=F&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=M.LINES):(ee=F?"fillPattern":"fill",K=M.TRIANGLES);let Ae=O.constantOr(null);for(let ze of h){let Re=r.getTile(ze);if(F&&!Re.patternsLoaded())continue;let We=Re.getBucket(l);if(!We)continue;let ut=We.programConfigurations.get(l.id),et=m.useProgram(ee,ut),rt=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ze);F&&(m.context.activeTexture.set(M.TEXTURE0),Re.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),ut.updatePaintBuffers(N)),$o(ut,A,Ae,Re,l);let lt=Ce.getProjectionData({overscaledTileID:ze,applyGlobeMatrix:!E,applyTerrainMatrix:!0}),Pt=s.aA(Ce,Re,Ie,Me);if(y){ge=We.indexBuffer2,be=We.segments2;let vt=[M.drawingBufferWidth,M.drawingBufferHeight];_e=ee==="fillOutlinePattern"&&F?ra(m,N,Re,vt,Pt):ll(vt,Pt)}else ge=We.indexBuffer,be=We.segments,_e=F?wu(m,N,Re,Pt):{u_fill_translate:Pt};let Tt=m.stencilModeForClipping(ze);et.draw(m.context,K,p,Tt,g,Ai.backCCW,_e,rt,lt,l.id,We.layoutVertexBuffer,ge,be,l.paint,m.transform.zoom,ut)}}function Ss(m,r,l,h,p,g,y,E){let M=m.context,A=M.gl,O="fill-extrusion-pattern",F=l.paint.get(O),N=F.constantOr(1),K=l.getCrossfadeParameters(),ee=l.paint.get("fill-extrusion-opacity"),_e=F.constantOr(null),ge=m.transform;for(let be of h){let Ce=r.getTile(be),Ie=Ce.getBucket(l);if(!Ie)continue;let Me=m.style.map.terrain&&m.style.map.terrain.getTerrainData(be),Ae=Ie.programConfigurations.get(l.id),ze=m.useProgram(N?"fillExtrusionPattern":"fillExtrusion",Ae);N&&(m.context.activeTexture.set(A.TEXTURE0),Ce.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),Ae.updatePaintBuffers(K));let Re=ge.getProjectionData({overscaledTileID:be,applyGlobeMatrix:!E,applyTerrainMatrix:!0});$o(Ae,O,_e,Ce,l);let We=s.aA(ge,Ce,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),ut=l.paint.get("fill-extrusion-vertical-gradient"),et=N?os(m,ut,ee,We,be,K,Ce):al(m,ut,ee,We);ze.draw(M,M.gl.TRIANGLES,p,g,y,Ai.backCCW,et,Me,Re,l.id,Ie.layoutVertexBuffer,Ie.indexBuffer,Ie.segments,l.paint,m.transform.zoom,Ae,m.style.map.terrain&&Ie.centroidVertexBuffer)}}function Pu(m,r,l,h,p,g,y,E,M){var A;let O=m.style.projection,F=m.context,N=m.transform,K=F.gl,ee=[`#define NUM_ILLUMINATION_SOURCES ${l.paint.get("hillshade-highlight-color").values.length}`],_e=m.useProgram("hillshade",null,!1,ee),ge=!m.options.moving;for(let be of h){let Ce=r.getTile(be),Ie=Ce.fbo;if(!Ie)continue;let Me=O.getMeshFromTileID(F,be.canonical,E,!0,"raster"),Ae=(A=m.style.map.terrain)===null||A===void 0?void 0:A.getTerrainData(be);F.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,Ie.colorAttachment.get());let ze=N.getProjectionData({overscaledTileID:be,aligned:ge,applyGlobeMatrix:!M,applyTerrainMatrix:!0});_e.draw(F,K.TRIANGLES,g,p[be.overscaledZ],y,Ai.backCCW,Ad(m,Ce,l),Ae,ze,l.id,Me.vertexBuffer,Me.indexBuffer,Me.segments)}}let ku=[new s.P(0,0),new s.P(s.Z,0),new s.P(s.Z,s.Z),new s.P(0,s.Z)];function jd(m,r,l,h,p,g,y,E,M=!1,A=!1){let O=h[h.length-1].overscaledZ,F=m.context,N=F.gl,K=m.useProgram("raster"),ee=m.transform,_e=m.style.projection,ge=m.colorModeForRenderPass(),be=!m.options.moving;for(let Ce of h){let Ie=m.getDepthModeForSublayer(Ce.overscaledZ-O,l.paint.get("raster-opacity")===1?fi.ReadWrite:fi.ReadOnly,N.LESS),Me=r.getTile(Ce);Me.registerFadeDuration(l.paint.get("raster-fade-duration"));let Ae=r.findLoadedParent(Ce,0),ze=r.findLoadedSibling(Ce),Re=Gm(Me,Ae||ze||null,r,l,m.transform,m.style.map.terrain),We,ut,et=l.paint.get("raster-resampling")==="nearest"?N.NEAREST:N.LINEAR;F.activeTexture.set(N.TEXTURE0),Me.texture.bind(et,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),F.activeTexture.set(N.TEXTURE1),Ae?(Ae.texture.bind(et,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),We=Math.pow(2,Ae.tileID.overscaledZ-Me.tileID.overscaledZ),ut=[Me.tileID.canonical.x*We%1,Me.tileID.canonical.y*We%1]):Me.texture.bind(et,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),Me.texture.useMipmap&&F.extTextureFilterAnisotropic&&m.transform.pitch>20&&N.texParameterf(N.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax);let rt=m.style.map.terrain&&m.style.map.terrain.getTerrainData(Ce),lt=ee.getProjectionData({overscaledTileID:Ce,aligned:be,applyGlobeMatrix:!A,applyTerrainMatrix:!0}),Pt=Ld(ut||[0,0],We||1,Re,l,E),Tt=_e.getMeshFromTileID(F,Ce.canonical,g,y,"raster");K.draw(F,N.TRIANGLES,Ie,p?p[Ce.overscaledZ]:Jt.disabled,ge,M?Ai.frontCCW:Ai.backCCW,Pt,rt,lt,l.id,Tt.vertexBuffer,Tt.indexBuffer,Tt.segments)}}function Gm(m,r,l,h,p,g){let y=h.paint.get("raster-fade-duration");if(!g&&y>0){let E=I.now(),M=(E-m.timeAdded)/y,A=r?(E-r.timeAdded)/y:-1,O=l.getSource(),F=De(p,{tileSize:O.tileSize,roundZoom:O.roundZoom}),N=!r||Math.abs(r.tileID.overscaledZ-F)>Math.abs(m.tileID.overscaledZ-F),K=N&&m.refreshedUponExpiration?1:s.ae(N?M:1-A,0,1);return m.refreshedUponExpiration&&M>=1&&(m.refreshedUponExpiration=!1),r?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}let qd=new s.b7(1,0,0,1),Ep=new s.b7(0,1,0,1),Wm=new s.b7(0,0,1,1),Zm=new s.b7(1,0,1,1),Hd=new s.b7(0,1,1,1);function $d(m,r,l,h){Au(m,0,r+l/2,m.transform.width,l,h)}function Xm(m,r,l,h){Au(m,r-l/2,0,l,m.transform.height,h)}function Au(m,r,l,h,p,g){let y=m.context,E=y.gl;E.enable(E.SCISSOR_TEST),E.scissor(r*m.pixelRatio,l*m.pixelRatio,h*m.pixelRatio,p*m.pixelRatio),y.clear({color:g}),E.disable(E.SCISSOR_TEST)}function $r(m,r,l){let h=m.context,p=h.gl,g=m.useProgram("debug"),y=fi.disabled,E=Jt.disabled,M=m.colorModeForRenderPass(),A="$debug",O=m.style.map.terrain&&m.style.map.terrain.getTerrainData(l);h.activeTexture.set(p.TEXTURE0);let F=r.getTileByID(l.key).latestRawTileData,N=Math.floor((F&&F.byteLength||0)/1024),K=r.getTile(l).tileSize,ee=512/Math.min(K,512)*(l.overscaledZ/m.transform.zoom)*.5,_e=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(_e+=` => ${l.overscaledZ}`),function(be,Ce){be.initDebugOverlayCanvas();let Ie=be.debugOverlayCanvas,Me=be.context.gl,Ae=be.debugOverlayCanvas.getContext("2d");Ae.clearRect(0,0,Ie.width,Ie.height),Ae.shadowColor="white",Ae.shadowBlur=2,Ae.lineWidth=1.5,Ae.strokeStyle="white",Ae.textBaseline="top",Ae.font="bold 36px Open Sans, sans-serif",Ae.fillText(Ce,5,5),Ae.strokeText(Ce,5,5),be.debugOverlayTexture.update(Ie),be.debugOverlayTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE)}(m,`${_e} ${N}kB`);let ge=m.transform.getProjectionData({overscaledTileID:l,applyGlobeMatrix:!0,applyTerrainMatrix:!0});g.draw(h,p.TRIANGLES,y,E,ir.alphaBlended,Ai.disabled,Ul(s.b7.transparent,ee),null,ge,A,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments),g.draw(h,p.LINE_STRIP,y,E,M,Ai.disabled,Ul(s.b7.red),O,ge,A,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments)}function dl(m,r,l,h){let{isRenderingGlobe:p}=h,g=m.context,y=g.gl,E=m.transform,M=m.colorModeForRenderPass(),A=m.getDepthModeFor3D(),O=m.useProgram("terrain");g.bindFramebuffer.set(null),g.viewport.set([0,0,m.width,m.height]);for(let F of l){let N=r.getTerrainMesh(F.tileID),K=m.renderToTexture.getTexture(F),ee=r.getTerrainData(F.tileID);g.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,K.texture);let _e=r.getMeshFrameDelta(E.zoom),ge=E.calculateFogMatrix(F.tileID.toUnwrapped()),be=bp(_e,ge,m.style.sky,E.pitch,p),Ce=E.getProjectionData({overscaledTileID:F.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});O.draw(g,y.TRIANGLES,A,Jt.disabled,M,Ai.backCCW,be,ee,Ce,"terrain",N.vertexBuffer,N.indexBuffer,N.segments)}}function Go(m,r){if(!r.mesh){let l=new s.aI;l.emplaceBack(-1,-1),l.emplaceBack(1,-1),l.emplaceBack(1,1),l.emplaceBack(-1,1);let h=new s.aK;h.emplaceBack(0,1,2),h.emplaceBack(0,2,3),r.mesh=new rs(m.createVertexBuffer(l,Yr.members),m.createIndexBuffer(h),s.aJ.simpleSegment(0,0,l.length,h.length))}return r.mesh}class Sp{constructor(r,l){this.context=new Ac(r),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=He.maxUnderzooming+He.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xi}resize(r,l,h){if(this.width=Math.floor(r*h),this.height=Math.floor(l*h),this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let p of this.style._order)this.style._layers[p].resize()}setup(){let r=this.context,l=new s.aI;l.emplaceBack(0,0),l.emplaceBack(s.Z,0),l.emplaceBack(0,s.Z),l.emplaceBack(s.Z,s.Z),this.tileExtentBuffer=r.createVertexBuffer(l,Yr.members),this.tileExtentSegments=s.aJ.simpleSegment(0,0,4,2);let h=new s.aI;h.emplaceBack(0,0),h.emplaceBack(s.Z,0),h.emplaceBack(0,s.Z),h.emplaceBack(s.Z,s.Z),this.debugBuffer=r.createVertexBuffer(h,Yr.members),this.debugSegments=s.aJ.simpleSegment(0,0,4,5);let p=new s.b_;p.emplaceBack(0,0,0,0),p.emplaceBack(s.Z,0,s.Z,0),p.emplaceBack(0,s.Z,0,s.Z),p.emplaceBack(s.Z,s.Z,s.Z,s.Z),this.rasterBoundsBuffer=r.createVertexBuffer(p,_p.members),this.rasterBoundsSegments=s.aJ.simpleSegment(0,0,4,2);let g=new s.aI;g.emplaceBack(0,0),g.emplaceBack(s.Z,0),g.emplaceBack(0,s.Z),g.emplaceBack(s.Z,s.Z),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(g,Yr.members),this.rasterBoundsSegmentsPosOnly=s.aJ.simpleSegment(0,0,4,5);let y=new s.aI;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(y,Yr.members),this.viewportSegments=s.aJ.simpleSegment(0,0,4,2);let E=new s.b$;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(E);let M=new s.aK;M.emplaceBack(1,0,2),M.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(M);let A=this.context.gl;this.stencilClearMode=new Jt({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO),this.tileExtentMesh=new rs(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let h=s.K();s.bQ(h,0,this.width,this.height,0,0,1),s.M(h,h,[l.drawingBufferWidth,l.drawingBufferHeight,0]);let p={mainMatrix:h,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:h};this.useProgram("clippingMask",null,!0).draw(r,l.TRIANGLES,fi.disabled,this.stencilClearMode,ir.disabled,Ai.disabled,null,null,p,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,l,h){if(this.currentStencilSource===r.source||!r.isTileClipped()||!l||!l.length)return;this.currentStencilSource=r.source,this.nextStencilID+l.length>256&&this.clearStencil();let p=this.context;p.setColorMode(ir.disabled),p.setDepthMode(fi.disabled);let g={};for(let y of l)g[y.key]=this.nextStencilID++;this._renderTileMasks(g,l,h,!0),this._renderTileMasks(g,l,h,!1),this._tileClippingMaskIDs=g}_renderTileMasks(r,l,h,p){let g=this.context,y=g.gl,E=this.style.projection,M=this.transform,A=this.useProgram("clippingMask");for(let O of l){let F=r[O.key],N=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O),K=E.getMeshFromTileID(this.context,O.canonical,p,!0,"stencil"),ee=M.getProjectionData({overscaledTileID:O,applyGlobeMatrix:!h,applyTerrainMatrix:!0});A.draw(g,y.TRIANGLES,fi.disabled,new Jt({func:y.ALWAYS,mask:0},F,255,y.KEEP,y.KEEP,y.REPLACE),ir.disabled,h?Ai.disabled:Ai.backCCW,null,N,ee,"$clipping",K.vertexBuffer,K.indexBuffer,K.segments)}}_renderTilesDepthBuffer(){let r=this.context,l=r.gl,h=this.style.projection,p=this.transform,g=this.useProgram("depth"),y=this.getDepthModeFor3D(),E=Be(p,{tileSize:p.tileSize});for(let M of E){let A=this.style.map.terrain&&this.style.map.terrain.getTerrainData(M),O=h.getMeshFromTileID(this.context,M.canonical,!0,!0,"raster"),F=p.getProjectionData({overscaledTileID:M,applyGlobeMatrix:!0,applyTerrainMatrix:!0});g.draw(r,l.TRIANGLES,y,Jt.disabled,ir.disabled,Ai.backCCW,null,A,F,"$clipping",O.vertexBuffer,O.indexBuffer,O.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let r=this.nextStencilID++,l=this.context.gl;return new Jt({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(r){let l=this.context.gl;return new Jt({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){let l=this.context.gl,h=r.sort((y,E)=>E.overscaledZ-y.overscaledZ),p=h[h.length-1].overscaledZ,g=h[0].overscaledZ-p+1;if(g>1){this.currentStencilSource=void 0,this.nextStencilID+g>256&&this.clearStencil();let y={};for(let E=0;E<g;E++)y[E+p]=new Jt({func:l.GEQUAL,mask:255},E+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=g,[y,h]}return[{[p]:Jt.disabled},h]}stencilConfigForOverlapTwoPass(r){let l=this.context.gl,h=r.sort((y,E)=>E.overscaledZ-y.overscaledZ),p=h[h.length-1].overscaledZ,g=h[0].overscaledZ-p+1;if(this.clearStencil(),g>1){let y={},E={};for(let M=0;M<g;M++)y[M+p]=new Jt({func:l.GREATER,mask:255},g+1+M,255,l.KEEP,l.KEEP,l.REPLACE),E[M+p]=new Jt({func:l.GREATER,mask:255},1+M,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID=2*g+1,[y,E,h]}return this.nextStencilID=3,[{[p]:new Jt({func:l.GREATER,mask:255},2,255,l.KEEP,l.KEEP,l.REPLACE)},{[p]:new Jt({func:l.GREATER,mask:255},1,255,l.KEEP,l.KEEP,l.REPLACE)},h]}colorModeForRenderPass(){let r=this.context.gl;return this._showOverdrawInspector?new ir([r.CONSTANT_COLOR,r.ONE],new s.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ir.unblended:ir.alphaBlended}getDepthModeForSublayer(r,l,h){if(!this.opaquePassEnabledForLayer())return fi.disabled;let p=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new fi(h||this.context.gl.LEQUAL,l,[p,p])}getDepthModeFor3D(){return new fi(this.context.gl.LEQUAL,fi.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,l){var h,p;this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(I.now()),this.imageManager.beginFrame();let g=this.style._order,y=this.style.sourceCaches,E={},M={},A={},O={isRenderingToTexture:!1,isRenderingGlobe:((h=r.projection)===null||h===void 0?void 0:h.transitionState)>0};for(let N in y){let K=y[N];K.used&&K.prepare(this.context),E[N]=K.getVisibleCoordinates(!1),M[N]=E[N].slice().reverse(),A[N]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let N=0;N<g.length;N++)if(this.style._layers[g[N]].is3D()){this.opaquePassCutoff=N;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let N of g){let K=this.style._layers[N];if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;let ee=M[K.source];(K.type==="custom"||ee.length)&&this.renderLayer(this,y[K.source],K,ee,O)}if((p=this.style.projection)===null||p===void 0||p.updateGPUdependent({context:this.context,useProgram:N=>this.useProgram(N)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?s.b7.black:s.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(N,K){let ee=N.context,_e=ee.gl,ge=((ze,Re,We)=>{let ut=Math.cos(Re.rollInRadians),et=Math.sin(Re.rollInRadians),rt=qe(Re),lt=Re.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ze.properties.get("sky-color"),u_horizon_color:ze.properties.get("horizon-color"),u_horizon:[(Re.width/2-rt*et)*We,(Re.height/2+rt*ut)*We],u_horizon_normal:[-et,ut],u_sky_horizon_blend:ze.properties.get("sky-horizon-blend")*Re.height/2*We,u_sky_blend:lt}})(K,N.style.map.transform,N.pixelRatio),be=new fi(_e.LEQUAL,fi.ReadWrite,[0,1]),Ce=Jt.disabled,Ie=N.colorModeForRenderPass(),Me=N.useProgram("sky"),Ae=Go(ee,K);Me.draw(ee,_e.TRIANGLES,be,Ce,Ie,Ai.disabled,ge,null,void 0,"sky",Ae.vertexBuffer,Ae.indexBuffer,Ae.segments)}(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){let N=this.style._layers[g[this.currentLayer]],K=y[N.source],ee=E[N.source];this._renderTileClippingMasks(N,ee,!1),this.renderLayer(this,K,N,ee,O)}this.renderPass="translucent";let F=!1;for(this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){let N=this.style._layers[g[this.currentLayer]],K=y[N.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(N,O))continue;this.opaquePassEnabledForLayer()||F||(F=!0,O.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let ee=(N.type==="symbol"?A:M)[N.source];this._renderTileClippingMasks(N,E[N.source],!!this.renderToTexture),this.renderLayer(this,K,N,ee,O)}if(O.isRenderingGlobe&&function(N,K,ee){let _e=N.context,ge=_e.gl,be=N.useProgram("atmosphere"),Ce=new fi(ge.LEQUAL,fi.ReadOnly,[0,1]),Ie=N.transform,Me=function(lt,Pt){let Tt=lt.properties.get("position"),vt=[-Tt.x,-Tt.y,-Tt.z],Gt=s.ad(new Float64Array(16));return lt.properties.get("anchor")==="map"&&(s.a_(Gt,Gt,Pt.rollInRadians),s.a$(Gt,Gt,-Pt.pitchInRadians),s.a_(Gt,Gt,Pt.bearingInRadians),s.a$(Gt,Gt,Pt.center.lat*Math.PI/180),s.bp(Gt,Gt,-Pt.center.lng*Math.PI/180)),s.bZ(vt,vt,Gt),vt}(ee,N.transform),Ae=Ie.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ze=K.properties.get("atmosphere-blend")*Ae.projectionTransition;if(ze===0)return;let Re=Qs(Ie.worldSize,Ie.center.lat),We=Ie.inverseProjectionMatrix,ut=new Float64Array(4);ut[3]=1,s.at(ut,ut,Ie.modelViewProjectionMatrix),ut[0]/=ut[3],ut[1]/=ut[3],ut[2]/=ut[3],ut[3]=1,s.at(ut,ut,We),ut[0]/=ut[3],ut[1]/=ut[3],ut[2]/=ut[3],ut[3]=1;let et=((lt,Pt,Tt,vt,Gt)=>({u_sun_pos:lt,u_atmosphere_blend:Pt,u_globe_position:Tt,u_globe_radius:vt,u_inv_proj_matrix:Gt}))(Me,ze,[ut[0],ut[1],ut[2]],Re,We),rt=Go(_e,K);be.draw(_e,ge.TRIANGLES,Ce,Jt.disabled,ir.alphaBlended,Ai.disabled,et,null,null,"atmosphere",rt.vertexBuffer,rt.indexBuffer,rt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let N=function(K,ee){let _e=null,ge=Object.values(K._layers).flatMap(Me=>Me.source&&!Me.isHidden(ee)?[K.sourceCaches[Me.source]]:[]),be=ge.filter(Me=>Me.getSource().type==="vector"),Ce=ge.filter(Me=>Me.getSource().type!=="vector"),Ie=Me=>{(!_e||_e.getSource().maxzoom<Me.getSource().maxzoom)&&(_e=Me)};return be.forEach(Me=>Ie(Me)),_e||Ce.forEach(Me=>Ie(Me)),_e}(this.style,this.transform.zoom);N&&function(K,ee,_e){for(let ge=0;ge<_e.length;ge++)$r(K,ee,_e[ge])}(this,N,N.getVisibleCoordinates())}this.options.showPadding&&function(N){let K=N.transform.padding;$d(N,N.transform.height-(K.top||0),3,qd),$d(N,K.bottom||0,3,Ep),Xm(N,K.left||0,3,Wm),Xm(N,N.transform.width-(K.right||0),3,Zm);let ee=N.transform.centerPoint;(function(_e,ge,be,Ce){Au(_e,ge-1,be-10,2,20,Ce),Au(_e,ge-10,be-1,20,2,Ce)})(N,ee.x,N.transform.height-ee.y,Hd)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;let l=this.terrainFacilitator.matrix,h=this.transform.modelViewProjectionMatrix,p=this.terrainFacilitator.dirty;p||(p=r?!s.c0(l,h):!s.c1(l,h)),p||(p=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),p&&(s.c2(l,h),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(g,y){let E=g.context,M=E.gl,A=g.transform,O=ir.unblended,F=new fi(M.LEQUAL,fi.ReadWrite,[0,1]),N=y.sourceCache.getRenderableTiles(),K=g.useProgram("terrainDepth");E.bindFramebuffer.set(y.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),E.clear({color:s.b7.transparent,depth:1});for(let ee of N){let _e=y.getTerrainMesh(ee.tileID),ge=y.getTerrainData(ee.tileID),be=A.getProjectionData({overscaledTileID:ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ce={u_ele_delta:y.getMeshFrameDelta(A.zoom)};K.draw(E,M.TRIANGLES,F,Jt.disabled,O,Ai.backCCW,Ce,ge,be,"terrain",_e.vertexBuffer,_e.indexBuffer,_e.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain),function(g,y){let E=g.context,M=E.gl,A=g.transform,O=ir.unblended,F=new fi(M.LEQUAL,fi.ReadWrite,[0,1]),N=y.getCoordsTexture(),K=y.sourceCache.getRenderableTiles(),ee=g.useProgram("terrainCoords");E.bindFramebuffer.set(y.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),E.clear({color:s.b7.transparent,depth:1}),y.coordsIndex=[];for(let _e of K){let ge=y.getTerrainMesh(_e.tileID),be=y.getTerrainData(_e.tileID);E.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,N.texture);let Ce={u_terrain_coords_id:(255-y.coordsIndex.length)/255,u_texture:0,u_ele_delta:y.getMeshFrameDelta(A.zoom)},Ie=A.getProjectionData({overscaledTileID:_e.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ee.draw(E,M.TRIANGLES,F,Jt.disabled,O,Ai.backCCW,Ce,be,Ie,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),y.coordsIndex.push(_e.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain))}renderLayer(r,l,h,p,g){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||(p||[]).length)&&(this.id=h.id,s.c3(h)?function(y,E,M,A,O,F){if(y.renderPass!=="translucent")return;let{isRenderingToTexture:N}=F,K=Jt.disabled,ee=y.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(_e,ge,be,Ce,Ie,Me,Ae,ze,Re){let We=ge.transform,ut=ge.style.map.terrain,et=Ie==="map",rt=Me==="map";for(let lt of _e){let Pt=Ce.getTile(lt),Tt=Pt.getBucket(be);if(!Tt||!Tt.text||!Tt.text.segments.get().length)continue;let vt=s.ak(Tt.textSizeData,We.zoom),Gt=s.az(Pt,1,ge.transform.zoom),Ti=ke(et,ge.transform,Gt),Gi=be.layout.get("icon-text-fit")!=="none"&&Tt.hasIconData();if(vt){let Rr=Math.pow(2,We.zoom-Pt.tileID.overscaledZ),vr=ut?(Or,Lr)=>ut.getElevation(lt,Or,Lr):null;ft(Tt,et,rt,Re,We,Ti,Rr,vt,Gi,s.aA(We,Pt,Ae,ze),lt.toUnwrapped(),vr)}}}(A,y,M,E,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),O),M.paint.get("icon-opacity").constantOr(1)!==0&&oi(y,E,M,A,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),K,ee,N),M.paint.get("text-opacity").constantOr(1)!==0&&oi(y,E,M,A,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),K,ee,N),E.map.showCollisionBoxes&&(B(y,E,M,A,!0),B(y,E,M,A,!1))}(r,l,h,p,this.style.placement.variableOffsets,g):s.c4(h)?function(y,E,M,A,O){if(y.renderPass!=="translucent")return;let{isRenderingToTexture:F}=O,N=M.paint.get("circle-opacity"),K=M.paint.get("circle-stroke-width"),ee=M.paint.get("circle-stroke-opacity"),_e=!M.layout.get("circle-sort-key").isConstant();if(N.constantOr(1)===0&&(K.constantOr(1)===0||ee.constantOr(1)===0))return;let ge=y.context,be=ge.gl,Ce=y.transform,Ie=y.getDepthModeForSublayer(0,fi.ReadOnly),Me=Jt.disabled,Ae=y.colorModeForRenderPass(),ze=[],Re=Ce.getCircleRadiusCorrection();for(let We=0;We<A.length;We++){let ut=A[We],et=E.getTile(ut),rt=et.getBucket(M);if(!rt)continue;let lt=M.paint.get("circle-translate"),Pt=M.paint.get("circle-translate-anchor"),Tt=s.aA(Ce,et,lt,Pt),vt=rt.programConfigurations.get(M.id),Gt=y.useProgram("circle",vt),Ti=rt.layoutVertexBuffer,Gi=rt.indexBuffer,Rr=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ut),vr={programConfiguration:vt,program:Gt,layoutVertexBuffer:Ti,indexBuffer:Gi,uniformValues:na(y,et,M,Tt,Re),terrainData:Rr,projectionData:Ce.getProjectionData({overscaledTileID:ut,applyGlobeMatrix:!F,applyTerrainMatrix:!0})};if(_e){let Or=rt.segments.get();for(let Lr of Or)ze.push({segments:new s.aJ([Lr]),sortKey:Lr.sortKey,state:vr})}else ze.push({segments:rt.segments,sortKey:0,state:vr})}_e&&ze.sort((We,ut)=>We.sortKey-ut.sortKey);for(let We of ze){let{programConfiguration:ut,program:et,layoutVertexBuffer:rt,indexBuffer:lt,uniformValues:Pt,terrainData:Tt,projectionData:vt}=We.state;et.draw(ge,be.TRIANGLES,Ie,Me,Ae,Ai.backCCW,Pt,Tt,vt,M.id,rt,lt,We.segments,M.paint,y.transform.zoom,ut)}}(r,l,h,p,g):s.c5(h)?function(y,E,M,A,O){if(M.paint.get("heatmap-opacity")===0)return;let F=y.context,{isRenderingToTexture:N,isRenderingGlobe:K}=O;if(y.style.map.terrain){for(let ee of A){let _e=E.getTile(ee);E.hasRenderableParent(ee)||(y.renderPass==="offscreen"?br(y,_e,M,ee,K):y.renderPass==="translucent"&&Kr(y,M,ee,N,K))}F.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(ee,_e,ge,be){let Ce=ee.context,Ie=Ce.gl,Me=ee.transform,Ae=Jt.disabled,ze=new ir([Ie.ONE,Ie.ONE],s.b7.transparent,[!0,!0,!0,!0]);(function(Re,We,ut){let et=Re.gl;Re.activeTexture.set(et.TEXTURE1),Re.viewport.set([0,0,We.width/4,We.height/4]);let rt=ut.heatmapFbos.get(s.bW);rt?(et.bindTexture(et.TEXTURE_2D,rt.colorAttachment.get()),Re.bindFramebuffer.set(rt.framebuffer)):(rt=jn(Re,We.width/4,We.height/4),ut.heatmapFbos.set(s.bW,rt))})(Ce,ee,ge),Ce.clear({color:s.b7.transparent});for(let Re=0;Re<be.length;Re++){let We=be[Re];if(_e.hasRenderableParent(We))continue;let ut=_e.getTile(We),et=ut.getBucket(ge);if(!et)continue;let rt=et.programConfigurations.get(ge.id),lt=ee.useProgram("heatmap",rt),Pt=Me.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Tt=Me.getCircleRadiusCorrection();lt.draw(Ce,Ie.TRIANGLES,fi.disabled,Ae,ze,Ai.backCCW,oa(ut,Me.zoom,ge.paint.get("heatmap-intensity"),Tt),null,Pt,ge.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,ge.paint,Me.zoom,rt)}Ce.viewport.set([0,0,ee.width,ee.height])}(y,E,M,A):y.renderPass==="translucent"&&function(ee,_e){let ge=ee.context,be=ge.gl;ge.setColorMode(ee.colorModeForRenderPass());let Ce=_e.heatmapFbos.get(s.bW);Ce&&(ge.activeTexture.set(be.TEXTURE0),be.bindTexture(be.TEXTURE_2D,Ce.colorAttachment.get()),ge.activeTexture.set(be.TEXTURE1),go(ge,_e).bind(be.LINEAR,be.CLAMP_TO_EDGE),ee.useProgram("heatmapTexture").draw(ge,be.TRIANGLES,fi.disabled,Jt.disabled,ee.colorModeForRenderPass(),Ai.disabled,kd(ee,_e,0,1),null,null,_e.id,ee.viewportBuffer,ee.quadTriangleIndexBuffer,ee.viewportSegments,_e.paint,ee.transform.zoom))}(y,M)}(r,l,h,p,g):s.c6(h)?function(y,E,M,A,O){if(y.renderPass!=="translucent")return;let{isRenderingToTexture:F}=O,N=M.paint.get("line-opacity"),K=M.paint.get("line-width");if(N.constantOr(1)===0||K.constantOr(1)===0)return;let ee=y.getDepthModeForSublayer(0,fi.ReadOnly),_e=y.colorModeForRenderPass(),ge=M.paint.get("line-dasharray"),be=M.paint.get("line-pattern"),Ce=be.constantOr(1),Ie=M.paint.get("line-gradient"),Me=M.getCrossfadeParameters(),Ae=Ce?"linePattern":ge?"lineSDF":Ie?"lineGradient":"line",ze=y.context,Re=ze.gl,We=y.transform,ut=!0;for(let et of A){let rt=E.getTile(et);if(Ce&&!rt.patternsLoaded())continue;let lt=rt.getBucket(M);if(!lt)continue;let Pt=lt.programConfigurations.get(M.id),Tt=y.context.program.get(),vt=y.useProgram(Ae,Pt),Gt=ut||vt.program!==Tt,Ti=y.style.map.terrain&&y.style.map.terrain.getTerrainData(et),Gi=be.constantOr(null);if(Gi&&rt.imageAtlas){let Cr=rt.imageAtlas,nr=Cr.patternPositions[Gi.to.toString()],hn=Cr.patternPositions[Gi.from.toString()];nr&&hn&&Pt.setConstantPatternPositions(nr,hn)}let Rr=We.getProjectionData({overscaledTileID:et,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),vr=We.getPixelScale(),Or=Ce?Od(y,rt,M,vr,Me):ge?wc(y,rt,M,vr,ge,Me):Ie?Rd(y,rt,M,vr,lt.lineClipsArray.length):jl(y,rt,M,vr);if(Ce)ze.activeTexture.set(Re.TEXTURE0),rt.imageAtlasTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),Pt.updatePaintBuffers(Me);else if(ge&&(Gt||y.lineAtlas.dirty))ze.activeTexture.set(Re.TEXTURE0),y.lineAtlas.bind(ze);else if(Ie){let Cr=lt.gradients[M.id],nr=Cr.texture;if(M.gradientVersion!==Cr.version){let hn=256;if(M.stepInterpolant){let Mn=E.getSource().maxzoom,qn=et.canonical.z===Mn?Math.ceil(1<<y.transform.maxZoom-et.canonical.z):1;hn=s.ae(s.bX(lt.maxLineLength/s.Z*1024*qn),256,ze.maxTextureSize)}Cr.gradient=s.bY({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:hn,image:Cr.gradient||void 0,clips:lt.lineClipsArray}),Cr.texture?Cr.texture.update(Cr.gradient):Cr.texture=new Ve(ze,Cr.gradient,Re.RGBA),Cr.version=M.gradientVersion,nr=Cr.texture}ze.activeTexture.set(Re.TEXTURE0),nr.bind(M.stepInterpolant?Re.NEAREST:Re.LINEAR,Re.CLAMP_TO_EDGE)}let Lr=y.stencilModeForClipping(et);vt.draw(ze,Re.TRIANGLES,ee,Lr,_e,Ai.disabled,Or,Ti,Rr,M.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,M.paint,y.transform.zoom,Pt,lt.layoutVertexBuffer2),ut=!1}}(r,l,h,p,g):s.c7(h)?function(y,E,M,A,O){let F=M.paint.get("fill-color"),N=M.paint.get("fill-opacity");if(N.constantOr(1)===0)return;let{isRenderingToTexture:K}=O,ee=y.colorModeForRenderPass(),_e=M.paint.get("fill-pattern"),ge=y.opaquePassEnabledForLayer()&&!_e.constantOr(1)&&F.constantOr(s.b7.transparent).a===1&&N.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===ge){let be=y.getDepthModeForSublayer(1,y.renderPass==="opaque"?fi.ReadWrite:fi.ReadOnly);Oo(y,E,M,A,be,ee,!1,K)}if(y.renderPass==="translucent"&&M.paint.get("fill-antialias")){let be=y.getDepthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,fi.ReadOnly);Oo(y,E,M,A,be,ee,!0,K)}}(r,l,h,p,g):s.c8(h)?function(y,E,M,A,O){let F=M.paint.get("fill-extrusion-opacity");if(F===0)return;let{isRenderingToTexture:N}=O;if(y.renderPass==="translucent"){let K=new fi(y.context.gl.LEQUAL,fi.ReadWrite,y.depthRangeFor3D);if(F!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))Ss(y,E,M,A,K,Jt.disabled,ir.disabled,N),Ss(y,E,M,A,K,y.stencilModeFor3D(),y.colorModeForRenderPass(),N);else{let ee=y.colorModeForRenderPass();Ss(y,E,M,A,K,Jt.disabled,ee,N)}}}(r,l,h,p,g):s.c9(h)?function(y,E,M,A,O){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;let{isRenderingToTexture:F}=O,N=y.context,K=y.style.projection.useSubdivision,ee=y.getDepthModeForSublayer(0,fi.ReadOnly),_e=y.colorModeForRenderPass();if(y.renderPass==="offscreen")(function(ge,be,Ce,Ie,Me,Ae,ze){let Re=ge.context,We=Re.gl;for(let ut of Ce){let et=be.getTile(ut),rt=et.dem;if(!rt||!rt.data||!et.needsHillshadePrepare)continue;let lt=rt.dim,Pt=rt.stride,Tt=rt.getPixels();if(Re.activeTexture.set(We.TEXTURE1),Re.pixelStoreUnpackPremultiplyAlpha.set(!1),et.demTexture=et.demTexture||ge.getTileTexture(Pt),et.demTexture){let Gt=et.demTexture;Gt.update(Tt,{premultiply:!1}),Gt.bind(We.NEAREST,We.CLAMP_TO_EDGE)}else et.demTexture=new Ve(Re,Tt,We.RGBA,{premultiply:!1}),et.demTexture.bind(We.NEAREST,We.CLAMP_TO_EDGE);Re.activeTexture.set(We.TEXTURE0);let vt=et.fbo;if(!vt){let Gt=new Ve(Re,{width:lt,height:lt,data:null},We.RGBA);Gt.bind(We.LINEAR,We.CLAMP_TO_EDGE),vt=et.fbo=Re.createFramebuffer(lt,lt,!0,!1),vt.colorAttachment.set(Gt.texture)}Re.bindFramebuffer.set(vt.framebuffer),Re.viewport.set([0,0,lt,lt]),ge.useProgram("hillshadePrepare").draw(Re,We.TRIANGLES,Me,Ae,ze,Ai.disabled,Oa(et.tileID,rt),null,null,Ie.id,ge.rasterBoundsBuffer,ge.quadTriangleIndexBuffer,ge.rasterBoundsSegments),et.needsHillshadePrepare=!1}})(y,E,A,M,ee,Jt.disabled,_e),N.viewport.set([0,0,y.width,y.height]);else if(y.renderPass==="translucent")if(K){let[ge,be,Ce]=y.stencilConfigForOverlapTwoPass(A);Pu(y,E,M,Ce,ge,ee,_e,!1,F),Pu(y,E,M,Ce,be,ee,_e,!0,F)}else{let[ge,be]=y.getStencilConfigForOverlapAndUpdateStencilID(A);Pu(y,E,M,be,ge,ee,_e,!1,F)}}(r,l,h,p,g):s.ca(h)?function(y,E,M,A,O){if(y.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!A.length)return;let{isRenderingToTexture:F}=O,N=E.getSource(),K=y.style.projection.useSubdivision;if(N instanceof Qn)jd(y,E,M,A,null,!1,!1,N.tileCoords,N.flippedWindingOrder,F);else if(K){let[ee,_e,ge]=y.stencilConfigForOverlapTwoPass(A);jd(y,E,M,ge,ee,!1,!0,ku,!1,F),jd(y,E,M,ge,_e,!0,!0,ku,!1,F)}else{let[ee,_e]=y.getStencilConfigForOverlapAndUpdateStencilID(A);jd(y,E,M,_e,ee,!1,!0,ku,!1,F)}}(r,l,h,p,g):s.cb(h)?function(y,E,M,A,O){let F=M.paint.get("background-color"),N=M.paint.get("background-opacity");if(N===0)return;let{isRenderingToTexture:K}=O,ee=y.context,_e=ee.gl,ge=y.style.projection,be=y.transform,Ce=be.tileSize,Ie=M.paint.get("background-pattern");if(y.isPatternMissing(Ie))return;let Me=!Ie&&F.a===1&&N===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==Me)return;let Ae=Jt.disabled,ze=y.getDepthModeForSublayer(0,Me==="opaque"?fi.ReadWrite:fi.ReadOnly),Re=y.colorModeForRenderPass(),We=y.useProgram(Ie?"backgroundPattern":"background"),ut=A||Be(be,{tileSize:Ce,terrain:y.style.map.terrain});Ie&&(ee.activeTexture.set(_e.TEXTURE0),y.imageManager.bind(y.context));let et=M.getCrossfadeParameters();for(let rt of ut){let lt=be.getProjectionData({overscaledTileID:rt,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),Pt=Ie?Nd(N,y,Ie,{tileID:rt,tileSize:Ce},et):vp(N,F),Tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(rt),vt=ge.getMeshFromTileID(ee,rt.canonical,!1,!0,"raster");We.draw(ee,_e.TRIANGLES,ze,Ae,Re,Ai.backCCW,Pt,Tt,lt,M.id,vt.vertexBuffer,vt.indexBuffer,vt.segments)}}(r,0,h,p,g):s.cc(h)&&function(y,E,M,A){let{isRenderingGlobe:O}=A,F=y.context,N=M.implementation,K=y.style.projection,ee=y.transform,_e=ee.getProjectionDataForCustomLayer(O),ge={farZ:ee.farZ,nearZ:ee.nearZ,fov:ee.fov*Math.PI/180,modelViewProjectionMatrix:ee.modelViewProjectionMatrix,projectionMatrix:ee.projectionMatrix,shaderData:{variantName:K.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${K.shaderPreludeCode.vertexSource}`,define:K.shaderDefine},defaultProjectionData:_e},be=N.renderingMode?N.renderingMode:"2d";if(y.renderPass==="offscreen"){let Ce=N.prerender;Ce&&(y.setCustomLayerDefaults(),F.setColorMode(y.colorModeForRenderPass()),Ce.call(N,F.gl,ge),F.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),F.setColorMode(y.colorModeForRenderPass()),F.setStencilMode(Jt.disabled);let Ce=be==="3d"?y.getDepthModeFor3D():y.getDepthModeForSublayer(0,fi.ReadOnly);F.setDepthMode(Ce),N.render(F.gl,ge),F.setDirty(),y.setBaseState(),F.bindFramebuffer.set(null)}}(r,0,h,g))}saveTileTexture(r){let l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){let l=this._tileTextures[r];return l&&l.length>0?l.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;let l=this.imageManager.getPattern(r.from.toString()),h=this.imageManager.getPattern(r.to.toString());return!l||!h}useProgram(r,l,h=!1,p=[]){this.cache=this.cache||{};let g=!!this.style.map.terrain,y=this.style.projection,E=h?gr.projectionMercator:y.shaderPreludeCode,M=h?Ia:y.shaderDefine,A=r+(l?l.cacheKey:"")+`/${h?vi:y.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(g?"/terrain":"")+(p?`/${p.join("/")}`:"");return this.cache[A]||(this.cache[A]=new xc(this.context,gr[r],l,Tu[r],this._showOverdrawInspector,g,E,M,p)),this.cache[A]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ve(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:r,drawingBufferHeight:l}=this.context.gl;return this.width!==r||this.height!==l}}function Du(m,r){let l,h=!1,p=null,g=null,y=()=>{p=null,h&&(m.apply(g,l),p=setTimeout(y,r),h=!1)};return(...E)=>(h=!0,g=this,l=E,p||y(),p)}class Tp{constructor(r){this._getCurrentHash=()=>{let l=window.location.hash.replace("#","");if(this._hashName){let h;return l.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(h=p)}),(h&&h[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{let l=this._getCurrentHash();if(!this._isValidHash(l))return!1;let h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:h,pitch:+(l[4]||0)}),!0},this._updateHashUnthrottled=()=>{let l=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,l)},this._removeHash=()=>{let l=this._getCurrentHash();if(l.length===0)return;let h=l.join("/"),p=h;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${h}`);let g=window.location.hash.replace(p,"");g.startsWith("#&")?g=g.slice(0,1)+g.slice(2):g==="#"&&(g="");let y=window.location.href.replace(/(#.+)?$/,g);y=y.replace("&&","&"),window.history.replaceState(window.history.state,null,y)},this._updateHash=Du(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){let l=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,p=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,p),y=Math.round(l.lng*g)/g,E=Math.round(l.lat*g)/g,M=this._map.getBearing(),A=this._map.getPitch(),O="";if(O+=r?`/${y}/${E}/${h}`:`${h}/${E}/${y}`,(M||A)&&(O+="/"+Math.round(10*M)/10),A&&(O+=`/${Math.round(A)}`),this._hashName){let F=this._hashName,N=!1,K=window.location.hash.slice(1).split("&").map(ee=>{let _e=ee.split("=")[0];return _e===F?(N=!0,`${_e}=${O}`):ee}).filter(ee=>ee);return N||K.push(`${F}=${O}`),`#${K.join("&")}`}return`#${O}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new s.Q(+r[2],+r[1])}catch{return!1}let l=+r[0],h=+(r[3]||0),p=+(r[4]||0);return l>=this._map.getMinZoom()&&l<=this._map.getMaxZoom()&&h>=-180&&h<=180&&p>=this._map.getMinPitch()&&p<=this._map.getMaxPitch()}}let ha={linearity:.3,easing:s.cd(0,0,.3,1)},Mp=s.e({deceleration:2500,maxSpeed:1400},ha),Ru=s.e({deceleration:20,maxSpeed:1400},ha),Ip=s.e({deceleration:1e3,maxSpeed:360},ha),Ym=s.e({deceleration:1e3,maxSpeed:90},ha),Km=s.e({deceleration:1e3,maxSpeed:360},ha);class Qm{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:I.now(),settings:r})}_drainInertiaBuffer(){let r=this._inertiaBuffer,l=I.now();for(;r.length>0&&l-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let l={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:g}of this._inertiaBuffer)l.zoom+=g.zoomDelta||0,l.bearing+=g.bearingDelta||0,l.pitch+=g.pitchDelta||0,l.roll+=g.rollDelta||0,g.panDelta&&l.pan._add(g.panDelta),g.around&&(l.around=g.around),g.pinchAround&&(l.pinchAround=g.pinchAround);let h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(l.pan.mag()){let g=Rc(l.pan.mag(),h,s.e({},Mp,r||{})),y=l.pan.mult(g.amount/l.pan.mag()),E=this._map.cameraHelper.handlePanInertia(y,this._map.transform);p.center=E.easingCenter,p.offset=E.easingOffset,Dc(p,g)}if(l.zoom){let g=Rc(l.zoom,h,Ru);p.zoom=this._map.transform.zoom+g.amount,Dc(p,g)}if(l.bearing){let g=Rc(l.bearing,h,Ip);p.bearing=this._map.transform.bearing+s.ae(g.amount,-179,179),Dc(p,g)}if(l.pitch){let g=Rc(l.pitch,h,Ym);p.pitch=this._map.transform.pitch+g.amount,Dc(p,g)}if(l.roll){let g=Rc(l.roll,h,Km);p.roll=this._map.transform.roll+s.ae(g.amount,-179,179),Dc(p,g)}if(p.zoom||p.bearing){let g=l.pinchAround===void 0?l.around:l.pinchAround;p.around=g?this._map.unproject(g):this._map.getCenter()}return this.clear(),s.e(p,{noMoveStart:!0})}}function Dc(m,r){(!m.duration||m.duration<r.duration)&&(m.duration=r.duration,m.easing=r.easing)}function Rc(m,r,l){let{maxSpeed:h,linearity:p,deceleration:g}=l,y=s.ae(m*p/(r/1e3),-h,h),E=Math.abs(y)/(g*p);return{easing:l.easing,duration:1e3*E,amount:y*(E/2)}}class dn extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,h,p={}){h=h instanceof MouseEvent?h:new MouseEvent(r,h);let g=P.mousePos(l.getCanvas(),h),y=l.unproject(g);super(r,s.e({point:g,lngLat:y,originalEvent:h},p)),this._defaultPrevented=!1,this.target=l}}class Oc extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,h){let p=r==="touchend"?h.changedTouches:h.touches,g=P.touchPos(l.getCanvasContainer(),p),y=g.map(M=>l.unproject(M)),E=g.reduce((M,A,O,F)=>M.add(A.div(F.length)),new s.P(0,0));super(r,{points:g,point:E,lngLats:y,lngLat:l.unproject(E),originalEvent:h}),this._defaultPrevented=!1}}class Pp extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,h){super(r,{originalEvent:h}),this._defaultPrevented=!1}}class Jm{constructor(r,l){this._map=r,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Pp(r.type,this._map,r))}mousedown(r,l){return this._mousedownPos=l,this._firePreventable(new dn(r.type,this._map,r))}mouseup(r){this._map.fire(new dn(r.type,this._map,r))}click(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new dn(r.type,this._map,r))}dblclick(r){return this._firePreventable(new dn(r.type,this._map,r))}mouseover(r){this._map.fire(new dn(r.type,this._map,r))}mouseout(r){this._map.fire(new dn(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Oc(r.type,this._map,r))}touchmove(r){this._map.fire(new Oc(r.type,this._map,r))}touchend(r){this._map.fire(new Oc(r.type,this._map,r))}touchcancel(r){this._map.fire(new Oc(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class eg{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new dn(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new dn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new dn(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Lc{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(s.P.convert(r),this._map.terrain)}}class kp{constructor(r,l){this._map=r,this._tr=new Lc(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(P.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(r,l){if(!this._active)return;let h=l;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;let p=this._startPos;this._lastPos=h,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));let g=Math.min(p.x,h.x),y=Math.max(p.x,h.x),E=Math.min(p.y,h.y),M=Math.max(p.y,h.y);P.setTransform(this._box,`translate(${g}px,${E}px)`),this._box.style.width=y-g+"px",this._box.style.height=M-E+"px"}mouseupWindow(r,l){if(!this._active||r.button!==0)return;let h=this._startPos,p=l;if(this.reset(),P.suppressClick(),h.x!==p.x||h.y!==p.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:r})),{cameraAnimation:g=>g.fitScreenCoordinates(h,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,l){return this._map.fire(new s.l(r,{originalEvent:l}))}}function Gd(m,r){if(m.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${m.length}, points ${r.length}`);let l={};for(let h=0;h<m.length;h++)l[m[h].identifier]=r[h];return l}class tg{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,l,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),h.length===this.numTouches&&(this.centroid=function(p){let g=new s.P(0,0);for(let y of p)g._add(y);return g.div(p.length)}(l),this.touches=Gd(h,l)))}touchmove(r,l,h){if(this.aborted||!this.centroid)return;let p=Gd(h,l);for(let g in this.touches){let y=p[g];(!y||y.dist(this.touches[g])>30)&&(this.aborted=!0)}}touchend(r,l,h){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){let p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Nc{constructor(r){this.singleTap=new tg(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,l,h){this.singleTap.touchstart(r,l,h)}touchmove(r,l,h){this.singleTap.touchmove(r,l,h)}touchend(r,l,h){let p=this.singleTap.touchend(r,l,h);if(p){let g=r.timeStamp-this.lastTime<500,y=!this.lastTap||this.lastTap.dist(p)<30;if(g&&y||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class ig{constructor(r){this._tr=new Lc(r),this._zoomIn=new Nc({numTouches:1,numTaps:2}),this._zoomOut=new Nc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,l,h){this._zoomIn.touchstart(r,l,h),this._zoomOut.touchstart(r,l,h)}touchmove(r,l,h){this._zoomIn.touchmove(r,l,h),this._zoomOut.touchmove(r,l,h)}touchend(r,l,h){let p=this._zoomIn.touchend(r,l,h),g=this._zoomOut.touchend(r,l,h),y=this._tr;return p?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:y.zoom+1,around:y.unproject(p)},{originalEvent:r})}):g?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:y.zoom-1,around:y.unproject(g)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class to{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){let l=this._moveFunction(...r);if(l.bearingDelta||l.pitchDelta||l.rollDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(r,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(l)?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,l){if(!this.isEnabled())return;let h=this._lastPoint;if(!h)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);let p=Array.isArray(l)?l[0]:l;return!this._moved&&p.dist(h)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(h,p))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&P.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let Ts={0:1,2:2};class Fc{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){let l=P.mouseButton(r);this._eventButton=l}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(l,h){let p=Ts[h];return l.buttons===void 0||(l.buttons&p)!==p}(r,this._eventButton)}isValidEndEvent(r){return P.mouseButton(r)===this._eventButton}}class Ms{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class zc{constructor(r=new Fc({checkCorrectEvent:()=>!0}),l=new Ms){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=l}_executeRelevantHandler(r,l,h){return r instanceof MouseEvent?l(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?h(r):void 0}startMove(r){this._executeRelevantHandler(r,l=>this.mouseMoveStateManager.startMove(l),l=>this.oneFingerTouchMoveStateManager.startMove(l))}endMove(r){this._executeRelevantHandler(r,l=>this.mouseMoveStateManager.endMove(l),l=>this.oneFingerTouchMoveStateManager.endMove(l))}isValidStartEvent(r){return this._executeRelevantHandler(r,l=>this.mouseMoveStateManager.isValidStartEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidStartEvent(l))}isValidMoveEvent(r){return this._executeRelevantHandler(r,l=>this.mouseMoveStateManager.isValidMoveEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(l))}isValidEndEvent(r){return this._executeRelevantHandler(r,l=>this.mouseMoveStateManager.isValidEndEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidEndEvent(l))}}let Wd=m=>{m.mousedown=m.dragStart,m.mousemoveWindow=m.dragMove,m.mouseup=m.dragEnd,m.contextmenu=r=>{r.preventDefault()}};class Pb{constructor(r,l){this._clickTolerance=r.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,l,h){return this._calculateTransform(r,l,h)}touchmove(r,l,h){if(this._active){if(!this._shouldBePrevented(h.length))return r.preventDefault(),this._calculateTransform(r,l,h);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,l,h){this._calculateTransform(r,l,h),this._active&&this._shouldBePrevented(h.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,l,h){h.length>0&&(this._active=!0);let p=Gd(h,l),g=new s.P(0,0),y=new s.P(0,0),E=0;for(let A in p){let O=p[A],F=this._touches[A];F&&(g._add(O),y._add(O.sub(F)),E++,p[A]=O)}if(this._touches=p,this._shouldBePrevented(E)||!y.mag())return;let M=y.div(E);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:g.div(E),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ap{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,l,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([l[0],l[1]]))}touchmove(r,l,h){if(!this._firstTwoTouches)return;r.preventDefault();let[p,g]=this._firstTwoTouches,y=Zd(h,l,p),E=Zd(h,l,g);if(!y||!E)return;let M=this._aroundCenter?null:y.add(E).div(2);return this._move([y,E],M,r)}touchend(r,l,h){if(!this._firstTwoTouches)return;let[p,g]=this._firstTwoTouches,y=Zd(h,l,p),E=Zd(h,l,g);y&&E||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Zd(m,r,l){for(let h=0;h<m.length;h++)if(m[h].identifier===l)return r[h]}function Dp(m,r){return Math.log(m/r)/Math.LN2}class Bc extends Ap{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,l){let h=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Dp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Dp(this._distance,h),pinchAround:l}}}function pa(m,r){return 180*m.angleWith(r)/Math.PI}class Lt extends Ap{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,l,h){let p=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:pa(this._vector,p),pinchAround:l}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());let l=25/(Math.PI*this._minDiameter)*360,h=pa(r,this._startVector);return Math.abs(h)<l}}function Xd(m){return Math.abs(m.y)>Math.abs(m.x)}class Yd extends Ap{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,l,h){super.touchstart(r,l,h),this._currentTouchCount=h.length}_start(r){this._lastPoints=r,Xd(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,l,h){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let p=r[0].sub(this._lastPoints[0]),g=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,g,h.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(p.y+g.y)/2*-.5}):void 0}gestureBeginsVertically(r,l,h){if(this._valid!==void 0)return this._valid;let p=r.mag()>=2,g=l.mag()>=2;if(!p&&!g)return;if(!p||!g)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;let y=r.y>0==l.y>0;return Xd(r)&&Xd(l)&&y}}let rg={panStep:100,bearingStep:15,pitchStep:10};class Vc{constructor(r){this._tr=new Lc(r);let l=rg;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let l=0,h=0,p=0,g=0,y=0;switch(r.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:r.shiftKey?h=-1:(r.preventDefault(),g=-1);break;case 39:r.shiftKey?h=1:(r.preventDefault(),g=1);break;case 38:r.shiftKey?p=1:(r.preventDefault(),y=-1);break;case 40:r.shiftKey?p=-1:(r.preventDefault(),y=1);break;default:return}return this._rotationDisabled&&(h=0,p=0),{cameraAnimation:E=>{let M=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:Ou,zoom:l?Math.round(M.zoom)+l*(r.shiftKey?2:1):M.zoom,bearing:M.bearing+h*this._bearingStep,pitch:M.pitch+p*this._pitchStep,offset:[-g*this._panStep,-y*this._panStep],center:M.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ou(m){return m*(2-m)}let Rp=4.000244140625;class Vi{constructor(r,l){this._onTimeout=h=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)},this._map=r,this._tr=new Lc(r),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let l=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY,h=I.now(),p=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,l!==0&&l%Rp==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(p*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let l=P.mousePos(this._map.getCanvas(),r),h=this._tr;this._aroundPoint=this._aroundCenter?h.transform.locationToScreenPoint(s.Q.convert(h.center)):l,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let E=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=E),typeof this._targetZoom=="number"&&(this._targetZoom+=E)}if(this._delta!==0){let E=this._type==="wheel"&&Math.abs(this._delta)>Rp?this._wheelZoomRate:this._defaultZoomRate,M=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&M!==0&&(M=1/M);let A=typeof this._targetZoom!="number"?r.scale:s.ac(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),s.ah(A*M)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let l=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,h=this._startZoom,p=this._easing,g,y=!1;if(this._type==="wheel"&&h&&p){let E=I.now()-this._lastWheelEventTime,M=Math.min((E+5)/200,1),A=p(M);g=s.B.number(h,l,A),M<1?this._frameId||(this._frameId=!0):y=!0}else g=l,y=!0;return this._active=!0,y&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=g,{noInertia:!0,needsRenderFrame:!y,zoomDelta:g-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let l=s.cf;if(this._prevEase){let h=this._prevEase,p=(I.now()-h.start)/h.duration,g=h.easing(p+.01)-h.easing(p),y=.27/Math.sqrt(g*g+1e-4)*.01,E=Math.sqrt(.0729-y*y);l=s.cd(y,E,.25,1)}return this._prevEase={start:I.now(),duration:r,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Kd{constructor(r,l){this._clickZoom=r,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class kb{constructor(r){this._tr=new Lc(r),this.reset()}reset(){this._active=!1}dblclick(r,l){return r.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Op{constructor(){this._tap=new Nc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,l,h){if(!this._swipePoint)if(this._tapTime){let p=l[0],g=r.timeStamp-this._tapTime<500,y=this._tapPoint.dist(p)<30;g&&y?h.length>0&&(this._swipePoint=p,this._swipeTouch=h[0].identifier):this.reset()}else this._tap.touchstart(r,l,h)}touchmove(r,l,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;let p=l[0],g=p.y-this._swipePoint.y;return this._swipePoint=p,r.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(r,l,h)}touchend(r,l,h){if(this._tapTime)this._swipePoint&&h.length===0&&this.reset();else{let p=this._tap.touchend(r,l,h);p&&(this._tapTime=r.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ng{constructor(r,l,h){this._el=r,this._mousePan=l,this._touchPan=h}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class og{constructor(r,l,h,p){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=l,this._mousePitch=h,this._mouseRoll=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Lp{constructor(r,l,h,p){this._el=r,this._touchZoom=l,this._touchRotate=h,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Qd{constructor(r,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",r);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let h=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=l,this._container.appendChild(p);let g=document.createElement("div");g.className="maplibregl-mobile-message",g.textContent=h,this._container.appendChild(g),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,l){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:r,originalEvent:l})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let Lu=m=>m.zoom||m.drag||m.roll||m.pitch||m.rotate;class Ab extends s.l{}function Jd(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta||m.rollDelta}class Db{constructor(r,l){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,g)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let y=p.type==="renderFrame"?void 0:p,E={needsRenderFrame:!1},M={},A={};for(let{handlerName:N,handler:K,allowed:ee}of this._handlers){if(!K.isEnabled())continue;let _e;if(this._blockedByActive(A,ee,N))K.reset();else if(K[g||p.type]){if(s.cg(p,g||p.type)){let ge=P.mousePos(this._map.getCanvas(),p);_e=K[g||p.type](p,ge)}else if(s.ch(p,g||p.type)){let ge=this._getMapTouches(p.touches),be=P.touchPos(this._map.getCanvas(),ge);_e=K[g||p.type](p,be,ge)}else s.ci(g||p.type)||(_e=K[g||p.type](p));this.mergeHandlerResult(E,M,_e,N,y),_e&&_e.needsRenderFrame&&this._triggerRenderFrame()}(_e||K.isActive())&&(A[N]=K)}let O={};for(let N in this._previousActiveHandlers)A[N]||(O[N]=y);this._previousActiveHandlers=A,(Object.keys(O).length||Jd(E))&&(this._changes.push([E,M,O]),this._triggerRenderFrame()),(Object.keys(A).length||Jd(E))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:F}=E;F&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],F(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Qm(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);let h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(let[p,g,y]of this._listeners)P.addEventListener(p,g,p===document?this.handleWindowEvent:this.handleEvent,y)}destroy(){for(let[r,l,h]of this._listeners)P.removeEventListener(r,l,r===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(r){let l=this._map,h=l.getCanvasContainer();this._add("mapEvent",new Jm(l,r));let p=l.boxZoom=new kp(l,r);this._add("boxZoom",p),r.interactive&&r.boxZoom&&p.enable();let g=l.cooperativeGestures=new Qd(l,r.cooperativeGestures);this._add("cooperativeGestures",g),r.cooperativeGestures&&g.enable();let y=new ig(l),E=new kb(l);l.doubleClickZoom=new Kd(E,y),this._add("tapZoom",y),this._add("clickZoom",E),r.interactive&&r.doubleClickZoom&&l.doubleClickZoom.enable();let M=new Op;this._add("tapDragZoom",M);let A=l.touchPitch=new Yd(l);this._add("touchPitch",A),r.interactive&&r.touchPitch&&l.touchPitch.enable(r.touchPitch);let O=()=>l.project(l.getCenter()),F=function({enable:Me,clickTolerance:Ae,aroundCenter:ze=!0,minPixelCenterThreshold:Re=100,rotateDegreesPerPixelMoved:We=.8},ut){let et=new Fc({checkCorrectEvent:rt=>P.mouseButton(rt)===0&&rt.ctrlKey||P.mouseButton(rt)===2&&!rt.ctrlKey});return new to({clickTolerance:Ae,move:(rt,lt)=>{let Pt=ut();if(ze&&Math.abs(Pt.y-rt.y)>Re)return{bearingDelta:s.ce(new s.P(rt.x,lt.y),lt,Pt)};let Tt=(lt.x-rt.x)*We;return ze&&lt.y<Pt.y&&(Tt=-Tt),{bearingDelta:Tt}},moveStateManager:et,enable:Me,assignEvents:Wd})}(r,O),N=function({enable:Me,clickTolerance:Ae,pitchDegreesPerPixelMoved:ze=-.5}){let Re=new Fc({checkCorrectEvent:We=>P.mouseButton(We)===0&&We.ctrlKey||P.mouseButton(We)===2});return new to({clickTolerance:Ae,move:(We,ut)=>({pitchDelta:(ut.y-We.y)*ze}),moveStateManager:Re,enable:Me,assignEvents:Wd})}(r),K=function({enable:Me,clickTolerance:Ae,rollDegreesPerPixelMoved:ze=.3},Re){let We=new Fc({checkCorrectEvent:ut=>P.mouseButton(ut)===2&&ut.ctrlKey});return new to({clickTolerance:Ae,move:(ut,et)=>{let rt=Re(),lt=(et.x-ut.x)*ze;return et.y<rt.y&&(lt=-lt),{rollDelta:lt}},moveStateManager:We,enable:Me,assignEvents:Wd})}(r,O);l.dragRotate=new og(r,F,N,K),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",N,["mouseRotate","mouseRoll"]),this._add("mouseRoll",K,["mousePitch"]),r.interactive&&r.dragRotate&&l.dragRotate.enable();let ee=function({enable:Me,clickTolerance:Ae}){let ze=new Fc({checkCorrectEvent:Re=>P.mouseButton(Re)===0&&!Re.ctrlKey});return new to({clickTolerance:Ae,move:(Re,We)=>({around:We,panDelta:We.sub(Re)}),activateOnStart:!0,moveStateManager:ze,enable:Me,assignEvents:Wd})}(r),_e=new Pb(r,l);l.dragPan=new ng(h,ee,_e),this._add("mousePan",ee),this._add("touchPan",_e,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&l.dragPan.enable(r.dragPan);let ge=new Lt,be=new Bc;l.touchZoomRotate=new Lp(h,be,ge,M),this._add("touchRotate",ge,["touchPan","touchZoom"]),this._add("touchZoom",be,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&l.touchZoomRotate.enable(r.touchZoomRotate);let Ce=l.scrollZoom=new Vi(l,()=>this._triggerRenderFrame());this._add("scrollZoom",Ce,["mousePan"]),r.interactive&&r.scrollZoom&&l.scrollZoom.enable(r.scrollZoom);let Ie=l.keyboard=new Vc(l);this._add("keyboard",Ie),r.interactive&&r.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new eg(l))}_add(r,l,h){this._handlers.push({handlerName:r,handler:l,allowed:h}),this._handlersById[r]=l}stop(r){if(!this._updatingCamera){for(let{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(let{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Lu(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,l,h){for(let p in r)if(p!==h&&(!l||l.indexOf(p)<0))return!0;return!1}_getMapTouches(r){let l=[];for(let h of r)this._el.contains(h.target)&&l.push(h);return l}mergeHandlerResult(r,l,h,p,g){if(!h)return;s.e(r,h);let y={handlerName:p,originalEvent:h.originalEvent||g};h.zoomDelta!==void 0&&(l.zoom=y),h.panDelta!==void 0&&(l.drag=y),h.rollDelta!==void 0&&(l.roll=y),h.pitchDelta!==void 0&&(l.pitch=y),h.bearingDelta!==void 0&&(l.rotate=y)}_applyChanges(){let r={},l={},h={};for(let[p,g,y]of this._changes)p.panDelta&&(r.panDelta=(r.panDelta||new s.P(0,0))._add(p.panDelta)),p.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+p.pitchDelta),p.rollDelta&&(r.rollDelta=(r.rollDelta||0)+p.rollDelta),p.around!==void 0&&(r.around=p.around),p.pinchAround!==void 0&&(r.pinchAround=p.pinchAround),p.noInertia&&(r.noInertia=p.noInertia),s.e(l,g),s.e(h,y);this._updateMapTransform(r,l,h),this._changes=[]}_updateMapTransform(r,l,h){let p=this._map,g=p._getTransformForUpdate(),y=p.terrain;if(!(Jd(r)||y&&this._terrainMovement))return this._fireEvents(l,h,!0);p._stop(!0);let{panDelta:E,zoomDelta:M,bearingDelta:A,pitchDelta:O,rollDelta:F,around:N,pinchAround:K}=r;K!==void 0&&(N=K),N=N||p.transform.centerPoint,y&&!g.isPointOnMapSurface(N)&&(N=g.centerPoint);let ee={panDelta:E,zoomDelta:M,rollDelta:F,pitchDelta:O,bearingDelta:A,around:N};this._map.cameraHelper.useGlobeControls&&!g.isPointOnMapSurface(N)&&(N=g.centerPoint);let _e=N.distSqr(g.centerPoint)<.01?g.center:g.screenPointToLocation(E?N.sub(E):N);y?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ee,g),this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?g.setCenter(g.screenPointToLocation(g.centerPoint.sub(E))):this._map.cameraHelper.handleMapControlsPan(ee,g,_e):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ee,g,_e))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ee,g),this._map.cameraHelper.handleMapControlsPan(ee,g,_e)),p._applyUpdatedTransform(g),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,h,!0)}_fireEvents(r,l,h){let p=Lu(this._eventsInProgress),g=Lu(r),y={};for(let F in r){let{originalEvent:N}=r[F];this._eventsInProgress[F]||(y[`${F}start`]=N),this._eventsInProgress[F]=r[F]}!p&&g&&this._fireEvent("movestart",g.originalEvent);for(let F in y)this._fireEvent(F,y[F]);g&&this._fireEvent("move",g.originalEvent);for(let F in r){let{originalEvent:N}=r[F];this._fireEvent(F,N)}let E={},M;for(let F in this._eventsInProgress){let{handlerName:N,originalEvent:K}=this._eventsInProgress[F];this._handlersById[N].isActive()||(delete this._eventsInProgress[F],M=l[N]||K,E[`${F}end`]=M)}for(let F in E)this._fireEvent(F,E[F]);let A=Lu(this._eventsInProgress),O=(p||g)&&!A;if(O&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let F=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&F.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(F)}if(h&&O){this._updatingCamera=!0;let F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;!F||!F.essential&&I.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:M})),N(this._map.getBearing())&&this._map.resetNorth()):(N(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(r,l){this._map.fire(new s.l(r,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Ab("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Rb extends s.E{constructor(r,l,h){super(),this._renderFrameCallback=()=>{let p=Math.min((I.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=h.bearingSnap,this.cameraHelper=l,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,l){r.apply(this.transform),this.transform=r,this.cameraHelper=l}getCenter(){return new s.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(r,l){return this.jumpTo({center:r},l)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,l){return this.jumpTo({elevation:r},l),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,l,h){return r=s.P.convert(r).mult(-1),this.panTo(this.transform.center,s.e({offset:r},l),h)}panTo(r,l,h){return this.easeTo(s.e({center:r},l),h)}getZoom(){return this.transform.zoom}setZoom(r,l){return this.jumpTo({zoom:r},l),this}zoomTo(r,l,h){return this.easeTo(s.e({zoom:r},l),h)}zoomIn(r,l){return this.zoomTo(this.getZoom()+1,r,l),this}zoomOut(r,l){return this.zoomTo(this.getZoom()-1,r,l),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,l){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new s.l("movestart",l)).fire(new s.l("move",l)).fire(new s.l("moveend",l))),this}getBearing(){return this.transform.bearing}setBearing(r,l){return this.jumpTo({bearing:r},l),this}getPadding(){return this.transform.padding}setPadding(r,l){return this.jumpTo({padding:r},l),this}rotateTo(r,l,h){return this.easeTo(s.e({bearing:r},l),h)}resetNorth(r,l){return this.rotateTo(0,s.e({duration:1e3},r),l),this}resetNorthPitch(r,l){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},r),l),this}snapToNorth(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this}getPitch(){return this.transform.pitch}setPitch(r,l){return this.jumpTo({pitch:r},l),this}getRoll(){return this.transform.roll}setRoll(r,l){return this.jumpTo({roll:r},l),this}cameraForBounds(r,l){r=rr.convert(r).adjustAntiMeridian();let h=l&&l.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),h,l)}_cameraForBoxAndBearing(r,l,h,p){let g={top:0,bottom:0,right:0,left:0};if(typeof(p=s.e({padding:g,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){let A=p.padding;p.padding={top:A,bottom:A,right:A,left:A}}let y=s.e(g,p.padding);p.padding=y;let E=this.transform,M=new rr(r,l);return this.cameraHelper.cameraForBoxAndBearing(p,y,M,h,E)}fitBounds(r,l,h){return this._fitInternal(this.cameraForBounds(r,l),l,h)}fitScreenCoordinates(r,l,h,p,g){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(r)),this.transform.screenPointToLocation(s.P.convert(l)),h,p),p,g)}_fitInternal(r,l,h){return r?(delete(l=s.e(r,l)).padding,l.linear?this.easeTo(l,h):this.flyTo(l,h)):this}jumpTo(r,l){this.stop();let h=this._getTransformForUpdate(),p=!1,g=!1,y=!1,E=h.zoom;this.cameraHelper.handleJumpToCenterZoom(h,r);let M=h.zoom!==E;return"elevation"in r&&h.elevation!==+r.elevation&&h.setElevation(+r.elevation),"bearing"in r&&h.bearing!==+r.bearing&&(p=!0,h.setBearing(+r.bearing)),"pitch"in r&&h.pitch!==+r.pitch&&(g=!0,h.setPitch(+r.pitch)),"roll"in r&&h.roll!==+r.roll&&(y=!0,h.setRoll(+r.roll)),r.padding==null||h.isPaddingEqual(r.padding)||h.setPadding(r.padding),this._applyUpdatedTransform(h),this.fire(new s.l("movestart",l)).fire(new s.l("move",l)),M&&this.fire(new s.l("zoomstart",l)).fire(new s.l("zoom",l)).fire(new s.l("zoomend",l)),p&&this.fire(new s.l("rotatestart",l)).fire(new s.l("rotate",l)).fire(new s.l("rotateend",l)),g&&this.fire(new s.l("pitchstart",l)).fire(new s.l("pitch",l)).fire(new s.l("pitchend",l)),y&&this.fire(new s.l("rollstart",l)).fire(new s.l("roll",l)).fire(new s.l("rollend",l)),this.fire(new s.l("moveend",l))}calculateCameraOptionsFromTo(r,l,h,p=0){let g=s.$.fromLngLat(r,l),y=s.$.fromLngLat(h,p),E=y.x-g.x,M=y.y-g.y,A=y.z-g.z,O=Math.hypot(E,M,A);if(O===0)throw new Error("Can't calculate camera options with same From and To");let F=Math.hypot(E,M),N=s.ah(this.transform.cameraToCenterDistance/O/this.transform.tileSize),K=180*Math.atan2(E,-M)/Math.PI,ee=180*Math.acos(F/O)/Math.PI;return ee=A<0?90-ee:90+ee,{center:y.toLngLat(),elevation:p,zoom:N,pitch:ee,bearing:K}}calculateCameraOptionsFromCameraLngLatAltRotation(r,l,h,p,g){let y=this.transform.calculateCenterFromCameraLngLatAlt(r,l,h,p);return{center:y.center,elevation:y.elevation,zoom:y.zoom,bearing:h,pitch:p,roll:g}}easeTo(r,l){this._stop(!1,r.easeId),((r=s.e({offset:[0,0],duration:500,easing:s.cf},r)).animate===!1||!r.essential&&I.prefersReducedMotion)&&(r.duration=0);let h=this._getTransformForUpdate(),p=this.getBearing(),g=h.pitch,y=h.roll,E="bearing"in r?this._normalizeBearing(r.bearing,p):p,M="pitch"in r?+r.pitch:g,A="roll"in r?this._normalizeBearing(r.roll,y):y,O="padding"in r?r.padding:h.padding,F=s.P.convert(r.offset),N,K;r.around&&(N=s.Q.convert(r.around),K=h.locationToScreenPoint(N));let ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},_e=this.cameraHelper.handleEaseTo(h,{bearing:E,pitch:M,roll:A,padding:O,around:N,aroundPoint:K,offsetAsPoint:F,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||p!==E,this._pitching=this._pitching||M!==g,this._rolling=this._rolling||A!==y,this._padding=!h.isPaddingEqual(O),this._zooming=this._zooming||_e.isZooming,this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,ee),this.terrain&&this._prepareElevation(_e.elevationCenter),this._ease(ge=>{_e.easeFunc(ge),this.terrain&&!r.freezeElevation&&this._updateElevation(ge),this._applyUpdatedTransform(h),this._fireMoveEvents(l)},ge=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(l,ge)},r),this}_prepareEase(r,l,h={}){this._moving=!0,l||h.moving||this.fire(new s.l("movestart",r)),this._zooming&&!h.zooming&&this.fire(new s.l("zoomstart",r)),this._rotating&&!h.rotating&&this.fire(new s.l("rotatestart",r)),this._pitching&&!h.pitching&&this.fire(new s.l("pitchstart",r)),this._rolling&&!h.rolling&&this.fire(new s.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&l!==this._elevationTarget){let h=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(h-(l-(h*r+this._elevationStart))/(1-r)),this._elevationTarget=l}this.transform.setElevation(s.B.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};let l=r.getCameraLngLat(),h=r.getCameraAltitude(),p=this.terrain?this.terrain.getElevationForLngLatZoom(l,r.zoom):0;if(h<p){let g=this.calculateCameraOptionsFromTo(l,p,r.center,r.elevation);return{pitch:g.pitch,zoom:g.zoom}}return{}}_applyUpdatedTransform(r){let l=[];if(l.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&l.push(p=>this.transformCameraUpdate(p)),!l.length)return;let h=r.clone();for(let p of l){let g=h.clone(),{center:y,zoom:E,roll:M,pitch:A,bearing:O,elevation:F}=p(g);y&&g.setCenter(y),F!==void 0&&g.setElevation(F),E!==void 0&&g.setZoom(E),M!==void 0&&g.setRoll(M),A!==void 0&&g.setPitch(A),O!==void 0&&g.setBearing(O),h.apply(g)}this.transform.apply(h)}_fireMoveEvents(r){this.fire(new s.l("move",r)),this._zooming&&this.fire(new s.l("zoom",r)),this._rotating&&this.fire(new s.l("rotate",r)),this._pitching&&this.fire(new s.l("pitch",r)),this._rolling&&this.fire(new s.l("roll",r))}_afterEase(r,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;let h=this._zooming,p=this._rotating,g=this._pitching,y=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,h&&this.fire(new s.l("zoomend",r)),p&&this.fire(new s.l("rotateend",r)),g&&this.fire(new s.l("pitchend",r)),y&&this.fire(new s.l("rollend",r)),this.fire(new s.l("moveend",r))}flyTo(r,l){if(!r.essential&&I.prefersReducedMotion){let lt=s.O(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(lt,l)}this.stop(),r=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.cf},r);let h=this._getTransformForUpdate(),p=h.bearing,g=h.pitch,y=h.roll,E=h.padding,M="bearing"in r?this._normalizeBearing(r.bearing,p):p,A="pitch"in r?+r.pitch:g,O="roll"in r?this._normalizeBearing(r.roll,y):y,F="padding"in r?r.padding:h.padding,N=s.P.convert(r.offset),K=h.centerPoint.add(N),ee=h.screenPointToLocation(K),_e=this.cameraHelper.handleFlyTo(h,{bearing:M,pitch:A,roll:O,padding:F,locationAtOffset:ee,offsetAsPoint:N,center:r.center,minZoom:r.minZoom,zoom:r.zoom}),ge=r.curve,be=Math.max(h.width,h.height),Ce=be/_e.scaleOfZoom,Ie=_e.pixelPathLength;typeof _e.scaleOfMinZoom=="number"&&(ge=Math.sqrt(be/_e.scaleOfMinZoom/Ie*2));let Me=ge*ge;function Ae(lt){let Pt=(Ce*Ce-be*be+(lt?-1:1)*Me*Me*Ie*Ie)/(2*(lt?Ce:be)*Me*Ie);return Math.log(Math.sqrt(Pt*Pt+1)-Pt)}function ze(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function Re(lt){return(Math.exp(lt)+Math.exp(-lt))/2}let We=Ae(!1),ut=function(lt){return Re(We)/Re(We+ge*lt)},et=function(lt){return be*((Re(We)*(ze(Pt=We+ge*lt)/Re(Pt))-ze(We))/Me)/Ie;var Pt},rt=(Ae(!0)-We)/ge;if(Math.abs(Ie)<2e-6||!isFinite(rt)){if(Math.abs(be-Ce)<1e-6)return this.easeTo(r,l);let lt=Ce<be?-1:1;rt=Math.abs(Math.log(Ce/be))/ge,et=()=>0,ut=Pt=>Math.exp(lt*ge*Pt)}return r.duration="duration"in r?+r.duration:1e3*rt/("screenSpeed"in r?+r.screenSpeed/ge:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=p!==M,this._pitching=A!==g,this._rolling=O!==y,this._padding=!h.isPaddingEqual(F),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(_e.targetCenter),this._ease(lt=>{let Pt=lt*rt,Tt=1/ut(Pt),vt=et(Pt);this._rotating&&h.setBearing(s.B.number(p,M,lt)),this._pitching&&h.setPitch(s.B.number(g,A,lt)),this._rolling&&h.setRoll(s.B.number(y,O,lt)),this._padding&&(h.interpolatePadding(E,F,lt),K=h.centerPoint.add(N)),_e.easeFunc(lt,Tt,vt,K),this.terrain&&!r.freezeElevation&&this._updateElevation(lt),this._applyUpdatedTransform(h),this._fireMoveEvents(l)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(l)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,l){var h;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,l)}return r||(h=this.handlers)===null||h===void 0||h.stop(!1),this}_ease(r,l,h){h.animate===!1||h.duration===0?(r(1),l()):(this._easeStart=I.now(),this._easeOptions=h,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,l){r=s.aL(r,-180,180);let h=Math.abs(r-l);return Math.abs(r-360-l)<h&&(r-=360),Math.abs(r+360-l)<h&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(s.Q.convert(r),this.transform.tileZoom):null}}let za={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Tr{constructor(r=za){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,l){let h=this._map._getUIString(`AttributionControl.${l}`);r.title=h,r.setAttribute("aria-label",h)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){let p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}let l=this._map.style.sourceCaches;for(let p in l){let g=l[p];if(g.used||g.usedForTerrain){let y=g.getSource();y.attribution&&r.indexOf(y.attribution)<0&&r.push(y.attribution)}}r=r.filter(p=>String(p).trim()),r.sort((p,g)=>p.length-g.length),r=r.filter((p,g)=>{for(let y=g+1;y<r.length;y++)if(r[y].indexOf(p)>=0)return!1;return!0});let h=r.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,r.length?(this._innerContainer.innerHTML=P.sanitize(h),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Nu{constructor(r={}){this._updateCompact=()=>{let l=this._container.children;if(l.length){let h=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact"):h.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");let l=P.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Np{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){let l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l}remove(r){let l=this._currentlyRunning,h=l?this._queue.concat(l):this._queue;for(let p of h)if(p.id===r)return void(p.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let l=this._currentlyRunning=this._queue;this._queue=[];for(let h of l)if(!h.cancelled&&(h.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var sg=s.aG([{name:"a_pos3d",type:"Int16",components:3}]);class ag extends s.E{constructor(r){super(),this._lastTilesetChange=I.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,l){this.sourceCache.update(r,l),this._renderableTilesKeys=[];let h={};for(let p of Be(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))h[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.terrainRttPosMatrix32f=new Float64Array(16),s.bQ(p.terrainRttPosMatrix32f,0,s.Z,s.Z,0,0,1),this._tiles[p.key]=new ts(p,this.tileSize),this._lastTilesetChange=I.now());for(let p in this._tiles)h[p]||delete this._tiles[p]}freeRtt(r){for(let l in this._tiles){let h=this._tiles[l];(!r||h.tileID.equals(r)||h.tileID.isChildOf(r)||r.isChildOf(h.tileID))&&(h.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,l){return l?this._getTerrainCoordsForTileRanges(r,l):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){let l={};for(let h of this._renderableTilesKeys){let p=this._tiles[h].tileID,g=r.clone(),y=s.b2();if(p.canonical.equals(r.canonical))s.bQ(y,0,s.Z,s.Z,0,0,1);else if(p.canonical.isChildOf(r.canonical)){let E=p.canonical.z-r.canonical.z,M=p.canonical.x-(p.canonical.x>>E<<E),A=p.canonical.y-(p.canonical.y>>E<<E),O=s.Z>>E;s.bQ(y,0,O,O,0,0,1),s.L(y,y,[-M*O,-A*O,0])}else{if(!r.canonical.isChildOf(p.canonical))continue;{let E=r.canonical.z-p.canonical.z,M=r.canonical.x-(r.canonical.x>>E<<E),A=r.canonical.y-(r.canonical.y>>E<<E),O=s.Z>>E;s.bQ(y,0,s.Z,s.Z,0,0,1),s.L(y,y,[M*O,A*O,0]),s.M(y,y,[1/2**E,1/2**E,0])}}g.terrainRttPosMatrix32f=new Float32Array(y),l[h]=g}return l}_getTerrainCoordsForTileRanges(r,l){let h={};for(let p of this._renderableTilesKeys){let g=this._tiles[p].tileID;if(!this._isWithinTileRanges(g,l))continue;let y=r.clone(),E=s.b2();if(g.canonical.z===r.canonical.z){let M=r.canonical.x-g.canonical.x,A=r.canonical.y-g.canonical.y;s.bQ(E,0,s.Z,s.Z,0,0,1),s.L(E,E,[M*s.Z,A*s.Z,0])}else if(g.canonical.z>r.canonical.z){let M=g.canonical.z-r.canonical.z,A=g.canonical.x-(g.canonical.x>>M<<M),O=g.canonical.y-(g.canonical.y>>M<<M),F=r.canonical.x-(g.canonical.x>>M),N=r.canonical.y-(g.canonical.y>>M),K=s.Z>>M;s.bQ(E,0,K,K,0,0,1),s.L(E,E,[-A*K+F*s.Z,-O*K+N*s.Z,0])}else{let M=r.canonical.z-g.canonical.z,A=r.canonical.x-(r.canonical.x>>M<<M),O=r.canonical.y-(r.canonical.y>>M<<M),F=(r.canonical.x>>M)-g.canonical.x,N=(r.canonical.y>>M)-g.canonical.y,K=s.Z<<M;s.bQ(E,0,K,K,0,0,1),s.L(E,E,[A*s.Z+F*K,O*s.Z+N*K,0])}y.terrainRttPosMatrix32f=new Float32Array(E),h[p]=y}return h}getSourceTile(r,l){let h=this.sourceCache._source,p=r.overscaledZ-this.deltaZoom;if(p>h.maxzoom&&(p=h.maxzoom),p<h.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(p).key);let g=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!g||!g.dem)&&l)for(;p>=h.minzoom&&(!g||!g.dem);)g=this.sourceCache.getTileByID(r.scaledTo(p--).key);return g}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,l){return l[r.canonical.z]&&r.canonical.x>=l[r.canonical.z].minTileX&&r.canonical.x<=l[r.canonical.z].maxTileX&&r.canonical.y>=l[r.canonical.z].minTileY&&r.canonical.y<=l[r.canonical.z].maxTileY}}class lg{constructor(r,l,h){this._meshCache={},this.painter=r,this.sourceCache=new ag(l),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,l,h,p=s.Z){var g;if(!(l>=0&&l<p&&h>=0&&h<p))return 0;let y=this.getTerrainData(r),E=(g=y.tile)===null||g===void 0?void 0:g.dem;if(!E)return 0;let M=s.cj([],[l/p*s.Z,h/p*s.Z],y.u_terrain_matrix),A=[M[0]*E.dim,M[1]*E.dim],O=Math.floor(A[0]),F=Math.floor(A[1]),N=A[0]-O,K=A[1]-F;return E.get(O,F)*(1-N)*(1-K)+E.get(O+1,F)*N*(1-K)+E.get(O,F+1)*(1-N)*K+E.get(O+1,F+1)*N*K}getElevationForLngLatZoom(r,l){if(!s.ck(l,r.wrap()))return 0;let{tileID:h,mercatorX:p,mercatorY:g}=this._getOverscaledTileIDFromLngLatZoom(r,l);return this.getElevation(h,p%s.Z,g%s.Z,s.Z)}getElevation(r,l,h,p=s.Z){return this.getDEMElevation(r,l,h,p)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){let p=this.painter.context,g=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ve(p,g,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ve(p,new s.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ad([])}let l=this.sourceCache.getSourceTile(r,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){let p=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new Ve(p,l.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),l.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}let h=l&&l+l.tileID.key+r.key;if(h&&!this._demMatrixCache[h]){let p=this.sourceCache.sourceCache._source.maxzoom,g=r.canonical.z-l.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=p?g=r.canonical.z-p:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let y=r.canonical.x-(r.canonical.x>>g<<g),E=r.canonical.y-(r.canonical.y>>g<<g),M=s.cl(new Float64Array(16),[1/(s.Z<<g),1/(s.Z<<g),0]);s.L(M,M,[y*s.Z,E*s.Z,0]),this._demMatrixCache[r.key]={matrix:M,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(r){let l=this.painter,h=l.width/devicePixelRatio,p=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ve(l.context,{width:h,height:p,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ve(l.context,{width:h,height:p,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(h,p,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,h,p))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let g=0,y=0;g<this._coordsTextureSize;g++)for(let E=0;E<this._coordsTextureSize;E++,y+=4)l[y+0]=255&E,l[y+1]=255&g,l[y+2]=E>>8<<4|g>>8,l[y+3]=0;let h=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),p=new Ve(r,h,r.gl.RGBA,{premultiply:!1});return p.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);let l=new Uint8Array(4),h=this.painter.context,p=h.gl,g=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),y=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);h.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(g,E-y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,l),h.bindFramebuffer.set(null);let M=l[0]+(l[2]>>4<<8),A=l[1]+((15&l[2])<<8),O=this.coordsIndex[255-l[3]],F=O&&this.sourceCache.getTileByID(O);if(!F)return null;let N=this._coordsTextureSize,K=(1<<F.tileID.canonical.z)*N;return new s.$((F.tileID.canonical.x*N+M)/K+F.tileID.wrap,(F.tileID.canonical.y*N+A)/K,this.getElevation(F.tileID,M,A,N))}depthAtPoint(r){let l=new Uint8Array(4),h=this.painter.context,p=h.gl;return h.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,l),h.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(r){var l;let h=((l=this.painter.style.projection)===null||l===void 0?void 0:l.transitionState)>0,p=h&&r.canonical.y===0,g=h&&r.canonical.y===(1<<r.canonical.z)-1,y=`m_${p?"n":""}_${g?"s":""}`;if(this._meshCache[y])return this._meshCache[y];let E=this.painter.context,M=new s.cm,A=new s.aK,O=this.meshSize,F=s.Z/O,N=O*O;for(let Re=0;Re<=O;Re++)for(let We=0;We<=O;We++)M.emplaceBack(We*F,Re*F,0);for(let Re=0;Re<N;Re+=O+1)for(let We=0;We<O;We++)A.emplaceBack(We+Re,O+We+Re+1,O+We+Re+2),A.emplaceBack(We+Re,O+We+Re+2,We+Re+1);let K=M.length,ee=K+(O+1),_e=(O+1)*O,ge=p?s.b9:0,be=p?0:1,Ce=g?s.ba:s.Z,Ie=g?0:1;for(let Re=0;Re<=O;Re++)M.emplaceBack(Re*F,ge,be);for(let Re=0;Re<=O;Re++)M.emplaceBack(Re*F,Ce,Ie);for(let Re=0;Re<O;Re++)A.emplaceBack(_e+Re,ee+Re,ee+Re+1),A.emplaceBack(_e+Re,ee+Re+1,_e+Re+1),A.emplaceBack(0+Re,K+Re+1,K+Re),A.emplaceBack(0+Re,0+Re+1,K+Re+1);let Me=M.length,Ae=Me+2*(O+1);for(let Re of[0,1])for(let We=0;We<=O;We++)for(let ut of[0,1])M.emplaceBack(Re*s.Z,We*F,ut);for(let Re=0;Re<2*O;Re+=2)A.emplaceBack(Me+Re,Me+Re+1,Me+Re+3),A.emplaceBack(Me+Re,Me+Re+3,Me+Re+2),A.emplaceBack(Ae+Re,Ae+Re+3,Ae+Re+1),A.emplaceBack(Ae+Re,Ae+Re+2,Ae+Re+3);let ze=new rs(E.createVertexBuffer(M,sg.members),E.createIndexBuffer(A),s.aJ.simpleSegment(0,0,M.length,A.length));return this._meshCache[y]=ze,ze}getMeshFrameDelta(r){return 2*Math.PI*s.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,l){var h;let{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(r,l);return(h=this.getMinMaxElevation(p).minElevation)!==null&&h!==void 0?h:0}getMinMaxElevation(r){let l=this.getTerrainData(r).tile,h={minElevation:null,maxElevation:null};return l&&l.dem&&(h.minElevation=l.dem.min*this.exaggeration,h.maxElevation=l.dem.max*this.exaggeration),h}_getOverscaledTileIDFromLngLatZoom(r,l){let h=s.$.fromLngLat(r.wrap()),p=(1<<l)*s.Z,g=h.x*p,y=h.y*p,E=Math.floor(g/s.Z),M=Math.floor(y/s.Z);return{tileID:new s.Y(l,0,l,E,M),mercatorX:g,mercatorY:y}}}class Ob{constructor(r,l,h){this._context=r,this._size=l,this._tileSize=h,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){let l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),h=new Ve(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return h.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(h.texture),{id:r,fbo:l,texture:h,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>r.id!==l),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(let l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(let r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}let _o={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class eh{constructor(r,l){this.painter=r,this.terrain=l,this.pool=new Ob(r.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(h=>!r._layers[h].isHidden(l)),this._coordsAscending={};for(let h in r.sourceCaches){this._coordsAscending[h]={};let p=r.sourceCaches[h].getVisibleCoordinates(),g=r.sourceCaches[h].getSource(),y=g instanceof Qn?g.terrainTileRanges:null;for(let E of p){let M=this.terrain.sourceCache.getTerrainCoords(E,y);for(let A in M)this._coordsAscending[h][A]||(this._coordsAscending[h][A]=[]),this._coordsAscending[h][A].push(M[A])}}this._coordsAscendingStr={};for(let h of r._order){let p=r._layers[h],g=p.source;if(_o[p.type]&&!this._coordsAscendingStr[g]){this._coordsAscendingStr[g]={};for(let y in this._coordsAscending[g])this._coordsAscendingStr[g][y]=this._coordsAscending[g][y].map(E=>E.key).sort().join()}}for(let h of this._renderableTiles)for(let p in this._coordsAscendingStr){let g=this._coordsAscendingStr[p][h.tileID.key];g&&g!==h.rttCoords[p]&&(h.rtt=[])}}renderLayer(r,l){if(r.isHidden(this.painter.transform.zoom))return!1;let h=Object.assign(Object.assign({},l),{isRenderingToTexture:!0}),p=r.type,g=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(_o[p]&&(this._prevType&&_o[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(r.id),!y))return!0;if(_o[this._prevType]||_o[p]&&y){this._prevType=p;let E=this._stacks.length-1,M=this._stacks[E]||[];for(let A of this._renderableTiles){if(this.pool.isFull()&&(dl(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[E]){let F=this.pool.getObjectForId(A.rtt[E].id);if(F.stamp===A.rtt[E].stamp){this.pool.useObject(F);continue}}let O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),A.rtt[E]={id:O.id,stamp:O.stamp},g.context.bindFramebuffer.set(O.fbo.framebuffer),g.context.clear({color:s.b7.transparent,stencil:0}),g.currentStencilSource=void 0;for(let F=0;F<M.length;F++){let N=g.style._layers[M[F]],K=N.source?this._coordsAscending[N.source][A.tileID.key]:[A.tileID];g.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),g._renderTileClippingMasks(N,K,!0),g.renderLayer(g,g.style.sourceCaches[N.source],N,K,h),N.source&&(A.rttCoords[N.source]=this._coordsAscendingStr[N.source][A.tileID.key])}}return dl(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects(),_o[p]}return!1}}let Zt={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ri=_,Fu={hash:!1,interactive:!0,bearingSnap:7,attributionControl:za,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Fp={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class zp{constructor(r,l,h=!1){this.mousedown=g=>{this.startMove(g,P.mousePos(this.element,g)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=g=>{this.move(g,P.mousePos(this.element,g))},this.mouseup=g=>{this._rotatePitchHanlder.dragEnd(g),this.offTemp()},this.touchstart=g=>{g.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,g.targetTouches)[0],this.startMove(g,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=g=>{g.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,g.targetTouches)[0],this.move(g,this._lastPos))},this.touchend=g=>{g.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=l;let p=new zc;this._rotatePitchHanlder=new to({clickTolerance:3,move:(g,y)=>{let E=l.getBoundingClientRect(),M=new s.P((E.bottom-E.top)/2,(E.right-E.left)/2);return{bearingDelta:s.ce(new s.P(g.x,y.y),y,M),pitchDelta:h?-.5*(y.y-g.y):void 0}},moveStateManager:p,enable:!0,assignEvents:()=>{}}),this.map=r,P.addEventListener(l,"mousedown",this.mousedown),P.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(l,"touchcancel",this.reset)}startMove(r,l){this._rotatePitchHanlder.dragStart(r,l),P.disableDrag()}move(r,l){let h=this.map,{bearingDelta:p,pitchDelta:g}=this._rotatePitchHanlder.dragMove(r,l)||{};p&&h.setBearing(h.getBearing()+p),g&&h.setPitch(h.getPitch()+g)}off(){let r=this.element;P.removeEventListener(r,"mousedown",this.mousedown),P.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let nn;function Bp(m,r,l,h=!1){if(h||!l.getCoveringTilesDetailsProvider().allowWorldCopies())return m?.wrap();let p=new s.Q(m.lng,m.lat);if(m=new s.Q(m.lng,m.lat),r){let g=new s.Q(m.lng-360,m.lat),y=new s.Q(m.lng+360,m.lat),E=l.locationToScreenPoint(m).distSqr(r);l.locationToScreenPoint(g).distSqr(r)<E?m=g:l.locationToScreenPoint(y).distSqr(r)<E&&(m=y)}for(;Math.abs(m.lng-l.center.lng)>180;){let g=l.locationToScreenPoint(m);if(g.x>=0&&g.y>=0&&g.x<=l.width&&g.y<=l.height)break;m.lng>l.center.lng?m.lng-=360:m.lng+=360}return m.lng!==p.lng&&l.isPointOnMapSurface(l.locationToScreenPoint(m))?m:p}let us={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function cg(m,r,l){let h=m.classList;for(let p in us)h.remove(`maplibregl-${l}-anchor-${p}`);h.add(`maplibregl-${l}-anchor-${r}`)}class Wl extends s.E{constructor(r){if(super(),this._onKeyPress=l=>{let h=l.code,p=l.charCode||l.keyCode;h!=="Space"&&h!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=l=>{let h=l.originalEvent.target,p=this._element;this._popup&&(h===p||p.contains(h))&&this.togglePopup()},this._update=l=>{if(!this._map)return;let h=this._map.loaded()&&!this._map.isMoving();(l?.type==="terrain"||l?.type==="render"&&!h)&&this._map.once("render",this._update),this._lngLat=Bp(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let g="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?g="rotateX(0deg)":this._pitchAlignment==="map"&&(g=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||l&&l.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${us[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${g} ${p}`),I.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){let h=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r?.opacity,r?.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=s.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");let l=P.createNS("http://www.w3.org/2000/svg","svg"),h=41,p=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${h}px`),l.setAttributeNS(null,"width",`${p}px`),l.setAttributeNS(null,"viewBox",`0 0 ${p} ${h}`);let g=P.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"stroke","none"),g.setAttributeNS(null,"stroke-width","1"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"fill-rule","evenodd");let y=P.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"fill-rule","nonzero");let E=P.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");let M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let be of M){let Ce=P.createNS("http://www.w3.org/2000/svg","ellipse");Ce.setAttributeNS(null,"opacity","0.04"),Ce.setAttributeNS(null,"cx","10.5"),Ce.setAttributeNS(null,"cy","5.80029008"),Ce.setAttributeNS(null,"rx",be.rx),Ce.setAttributeNS(null,"ry",be.ry),E.appendChild(Ce)}let A=P.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill",this._color);let O=P.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),A.appendChild(O);let F=P.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"opacity","0.25"),F.setAttributeNS(null,"fill","#000000");let N=P.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),F.appendChild(N);let K=P.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");let ee=P.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");let _e=P.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#000000"),_e.setAttributeNS(null,"opacity","0.25"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962");let ge=P.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),ee.appendChild(_e),ee.appendChild(ge),y.appendChild(E),y.appendChild(A),y.appendChild(F),y.appendChild(K),y.appendChild(ee),l.appendChild(y),l.setAttributeNS(null,"height",h*this._scale+"px"),l.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(l),this._offset=s.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),cg(this._element,this._anchor,"marker"),r&&r.className)for(let l of r.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=s.Q.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){let p=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){let r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var l,h;let p=(l=this._map)===null||l===void 0?void 0:l.terrain,g=this._map.transform.isLocationOccluded(this._lngLat);if(!p||g){let K=g?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==K&&(this._element.style.opacity=K))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let y=this._map,E=y.terrain.depthAtPoint(this._pos),M=y.terrain.getElevationForLngLatZoom(this._lngLat,y.transform.tileZoom);if(y.transform.lngLatToCameraDepth(this._lngLat,M)-E<.006)return void(this._element.style.opacity=this._opacity);let A=-this._offset.y/y.transform.pixelsPerMeter,O=Math.sin(y.getPitch()*Math.PI/180)*A,F=y.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),N=y.transform.lngLatToCameraDepth(this._lngLat,M+O)-F>.006;!((h=this._popup)===null||h===void 0)&&h.isOpen()&&N&&this._popup.remove(),this._element.style.opacity=N?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=s.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,l){return(this._opacity===void 0||r===void 0&&l===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}let Br={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Dr=0,Uc=!1,zu={maxWidth:100,unit:"metric"};function Bu(m,r,l){let h=l&&l.maxWidth||100,p=m._container.clientHeight/2,g=m._container.clientWidth/2,y=m.unproject([g-h/2,p]),E=m.unproject([g+h/2,p]),M=Math.round(m.project(E).x-m.project(y).x),A=Math.min(h,M,m._container.clientWidth),O=y.distanceTo(E);if(l&&l.unit==="imperial"){let F=3.2808*O;F>5280?Zl(r,A,F/5280,m._getUIString("ScaleControl.Miles")):Zl(r,A,F,m._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?Zl(r,A,O/1852,m._getUIString("ScaleControl.NauticalMiles")):O>=1e3?Zl(r,A,O/1e3,m._getUIString("ScaleControl.Kilometers")):Zl(r,A,O,m._getUIString("ScaleControl.Meters"))}function Zl(m,r,l,h){let p=function(g){let y=Math.pow(10,`${Math.floor(g)}`.length-1),E=g/y;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(M){let A=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*A)/A}(E),y*E}(l);m.style.width=r*(p/l)+"px",m.innerHTML=`${p}&nbsp;${h}`}let Vp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Up=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function jc(m){if(m){if(typeof m=="number"){let r=Math.round(Math.abs(m)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,m),"top-left":new s.P(r,r),"top-right":new s.P(-r,r),bottom:new s.P(0,-m),"bottom-left":new s.P(r,-r),"bottom-right":new s.P(-r,-r),left:new s.P(m,0),right:new s.P(-m,0)}}if(m instanceof s.P||Array.isArray(m)){let r=s.P.convert(m);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:s.P.convert(m.center||[0,0]),top:s.P.convert(m.top||[0,0]),"top-left":s.P.convert(m["top-left"]||[0,0]),"top-right":s.P.convert(m["top-right"]||[0,0]),bottom:s.P.convert(m.bottom||[0,0]),"bottom-left":s.P.convert(m["bottom-left"]||[0,0]),"bottom-right":s.P.convert(m["bottom-right"]||[0,0]),left:s.P.convert(m.left||[0,0]),right:s.P.convert(m.right||[0,0])}}return jc(new s.P(0,0))}let jp=_;a.AJAXError=s.cq,a.Event=s.l,a.Evented=s.E,a.LngLat=s.Q,a.MercatorCoordinate=s.$,a.Point=s.P,a.addProtocol=s.cr,a.config=s.a,a.removeProtocol=s.cs,a.AttributionControl=Tr,a.BoxZoomHandler=kp,a.CanvasSource=ys,a.CooperativeGesturesHandler=Qd,a.DoubleClickZoomHandler=Kd,a.DragPanHandler=ng,a.DragRotateHandler=og,a.EdgeInsets=zl,a.FullscreenControl=class extends s.E{constructor(m={}){super(),this._onFullscreenChange=()=>{var r;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=l?.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let m=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=el,a.GeolocateControl=class extends s.E{constructor(m){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{let l=new s.Q(r.coords.longitude,r.coords.latitude),h=r.coords.accuracy,p=this._map.getBearing(),g=s.e({bearing:p},this.options.fitBoundsOptions),y=rr.fromLngLat(l,h);this._map.fitBounds(y,g,{geolocateSource:!0})},this._updateMarker=r=>{if(r){let l=new s.Q(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Uc)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");let l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{let l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Wl({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Wl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))})}},this.options=s.e({},Br,m)}onAdd(m){return this._map=m,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(r=!1){if(nn!==void 0&&!r)return nn;if(window.navigator.permissions===void 0)return nn=!!window.navigator.geolocation,nn;try{nn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{nn=!!window.navigator.geolocation}return nn})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Dr=0,Uc=!1}_isOutOfMapMaxBounds(m){let r=this._map.getMaxBounds(),l=m.coords;return r&&(l.longitude<r.getWest()||l.longitude>r.getEast()||l.latitude<r.getSouth()||l.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let m=this._map.getBounds(),r=m.getSouthEast(),l=m.getNorthEast(),h=r.distanceTo(l),p=Math.ceil(this._accuracy/(h/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Dr--,Uc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Dr++,Dr>1?(m={maximumAge:6e5,timeout:0},Uc=!0):(m=this.options.positionOptions,Uc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.GlobeControl=class{constructor(){this._toggleProjection=()=>{var m;let r=(m=this._map.getProjection())===null||m===void 0?void 0:m.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var m;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((m=this._map.getProjection())===null||m===void 0?void 0:m.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(m){return this._map=m,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=P.create("button","maplibregl-ctrl-globe",this._container),P.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},a.Hash=Tp,a.ImageSource=Qn,a.KeyboardHandler=Vc,a.LngLatBounds=rr,a.LogoControl=Nu,a.Map=class extends Rb{constructor(m){var r,l;s.cn.mark(s.co.create);let h=Object.assign(Object.assign(Object.assign({},Fu),m),{canvasContextAttributes:Object.assign(Object.assign({},Fu.canvasContextAttributes),m.canvasContextAttributes)});if(h.minZoom!=null&&h.maxZoom!=null&&h.minZoom>h.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(h.minPitch!=null&&h.maxPitch!=null&&h.minPitch>h.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(h.minPitch!=null&&h.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(h.maxPitch!=null&&h.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let p=new po,g=new ol;if(h.minZoom!==void 0&&p.setMinZoom(h.minZoom),h.maxZoom!==void 0&&p.setMaxZoom(h.maxZoom),h.minPitch!==void 0&&p.setMinPitch(h.minPitch),h.maxPitch!==void 0&&p.setMaxPitch(h.maxPitch),h.renderWorldCopies!==void 0&&p.setRenderWorldCopies(h.renderWorldCopies),super(p,g,{bearingSnap:h.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Np,this._controls=[],this._mapId=s.a4(),this._contextLost=E=>{E.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:E}))},this._contextRestored=E=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:E}))},this._onMapScroll=E=>{if(E.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=h.interactive,this._maxTileCacheSize=h.maxTileCacheSize,this._maxTileCacheZoomLevels=h.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},h.canvasContextAttributes),this._trackResize=h.trackResize===!0,this._bearingSnap=h.bearingSnap,this._centerClampedToGround=h.centerClampedToGround,this._refreshExpiredTiles=h.refreshExpiredTiles===!0,this._fadeDuration=h.fadeDuration,this._crossSourceCollisions=h.crossSourceCollisions===!0,this._collectResourceTiming=h.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Zt),h.locale),this._clickTolerance=h.clickTolerance,this._overridePixelRatio=h.pixelRatio,this._maxCanvasSize=h.maxCanvasSize,this.transformCameraUpdate=h.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=h.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ne.addThrottleControl(()=>this.isMoving()),this._requestManager=new re(h.transformRequest),typeof h.container=="string"){if(this._container=document.getElementById(h.container),!this._container)throw new Error(`Container '${h.container}' not found.`)}else{if(!(h.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=h.container}if(h.maxBounds&&this.setMaxBounds(h.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let E=!1,M=Du(A=>{this._trackResize&&!this._removed&&(this.resize(A),this.redraw())},50);this._resizeObserver=new ResizeObserver(A=>{E?M(A):E=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Db(this,h),this._hash=h.hash&&new Tp(typeof h.hash=="string"&&h.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:h.center,elevation:h.elevation,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch,roll:h.roll}),h.bounds&&(this.resize(),this.fitBounds(h.bounds,s.e({},h.fitBoundsOptions,{duration:0}))));let y=typeof h.style=="string"||((l=(r=h.style)===null||r===void 0?void 0:r.projection)===null||l===void 0?void 0:l.type)!=="globe";this.resize(null,y),this._localIdeographFontFamily=h.localIdeographFontFamily,this._validateStyle=h.validateStyle,h.style&&this.setStyle(h.style,{localIdeographFontFamily:h.localIdeographFontFamily}),h.attributionControl&&this.addControl(new Tr(typeof h.attributionControl=="boolean"?void 0:h.attributionControl)),h.maplibreLogo&&this.addControl(new Nu,h.logoPosition),this.on("style.load",()=>{if(y||this._resizeTransform(),this.transform.unmodified){let E=s.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(E)}}),this.on("data",E=>{this._update(E.dataType==="style"),this.fire(new s.l(`${E.dataType}data`,E))}),this.on("dataloading",E=>{this.fire(new s.l(`${E.dataType}dataloading`,E))}),this.on("dataabort",E=>{this.fire(new s.l("sourcedataabort",E))})}_getMapId(){return this._mapId}addControl(m,r){if(r===void 0&&(r=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let l=m.onAdd(this);this._controls.push(m);let h=this._controlPositions[r];return r.indexOf("bottom")!==-1?h.insertBefore(l,h.firstChild):h.appendChild(l),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let r=this._controls.indexOf(m);return r>-1&&this._controls.splice(r,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}calculateCameraOptionsFromTo(m,r,l,h){return h==null&&this.terrain&&(h=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(m,r,l,h)}resize(m,r=!0){let[l,h]=this._containerDimensions(),p=this._getClampedPixelRatio(l,h);if(this._resizeCanvas(l,h,p),this.painter.resize(l,h,p),this.painter.overLimit()){let y=this.painter.context.gl;this._maxCanvasSize=[y.drawingBufferWidth,y.drawingBufferHeight];let E=this._getClampedPixelRatio(l,h);this._resizeCanvas(l,h,E),this.painter.resize(l,h,E)}this._resizeTransform(r);let g=!this._moving;return g&&(this.stop(),this.fire(new s.l("movestart",m)).fire(new s.l("move",m))),this.fire(new s.l("resize",m)),g&&this.fire(new s.l("moveend",m)),this}_resizeTransform(m=!0){var r;let[l,h]=this._containerDimensions();this.transform.resize(l,h,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(l,h,m)}_getClampedPixelRatio(m,r){let{0:l,1:h}=this._maxCanvasSize,p=this.getPixelRatio(),g=m*p,y=r*p;return Math.min(g>l?l/g:1,y>h?h/y:1)*p}getPixelRatio(){var m;return(m=this._overridePixelRatio)!==null&&m!==void 0?m:devicePixelRatio}setPixelRatio(m){this._overridePixelRatio=m,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(rr.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.setMinZoom(m),this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.setMaxZoom(m),this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.setMinPitch(m),this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(m>=this.transform.minPitch)return this.transform.setMaxPitch(m),this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.setRenderWorldCopies(m),this._update()}project(m){return this.transform.locationToScreenPoint(s.Q.convert(m),this.style&&this.terrain)}unproject(m){return this.transform.screenPointToLocation(s.P.convert(m),this.terrain)}isMoving(){var m;return this._moving||((m=this.handlers)===null||m===void 0?void 0:m.isMoving())}isZooming(){var m;return this._zooming||((m=this.handlers)===null||m===void 0?void 0:m.isZooming())}isRotating(){var m;return this._rotating||((m=this.handlers)===null||m===void 0?void 0:m.isRotating())}_createDelegatedListener(m,r,l){if(m==="mouseenter"||m==="mouseover"){let h=!1;return{layers:r,listener:l,delegates:{mousemove:g=>{let y=r.filter(M=>this.getLayer(M)),E=y.length!==0?this.queryRenderedFeatures(g.point,{layers:y}):[];E.length?h||(h=!0,l.call(this,new dn(m,this,g.originalEvent,{features:E}))):h=!1},mouseout:()=>{h=!1}}}}if(m==="mouseleave"||m==="mouseout"){let h=!1;return{layers:r,listener:l,delegates:{mousemove:y=>{let E=r.filter(M=>this.getLayer(M));(E.length!==0?this.queryRenderedFeatures(y.point,{layers:E}):[]).length?h=!0:h&&(h=!1,l.call(this,new dn(m,this,y.originalEvent)))},mouseout:y=>{h&&(h=!1,l.call(this,new dn(m,this,y.originalEvent)))}}}}{let h=p=>{let g=r.filter(E=>this.getLayer(E)),y=g.length!==0?this.queryRenderedFeatures(p.point,{layers:g}):[];y.length&&(p.features=y,l.call(this,p),delete p.features)};return{layers:r,listener:l,delegates:{[m]:h}}}}_saveDelegatedListener(m,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(r)}_removeDelegatedListener(m,r,l){if(!this._delegatedListeners||!this._delegatedListeners[m])return;let h=this._delegatedListeners[m];for(let p=0;p<h.length;p++){let g=h[p];if(g.listener===l&&g.layers.length===r.length&&g.layers.every(y=>r.includes(y))){for(let y in g.delegates)this.off(y,g.delegates[y]);return void h.splice(p,1)}}}on(m,r,l){if(l===void 0)return super.on(m,r);let h=typeof r=="string"?[r]:r,p=this._createDelegatedListener(m,h,l);this._saveDelegatedListener(m,p);for(let g in p.delegates)this.on(g,p.delegates[g]);return{unsubscribe:()=>{this._removeDelegatedListener(m,h,l)}}}once(m,r,l){if(l===void 0)return super.once(m,r);let h=typeof r=="string"?[r]:r,p=this._createDelegatedListener(m,h,l);for(let g in p.delegates){let y=p.delegates[g];p.delegates[g]=(...E)=>{this._removeDelegatedListener(m,h,l),y(...E)}}this._saveDelegatedListener(m,p);for(let g in p.delegates)this.once(g,p.delegates[g]);return this}off(m,r,l){return l===void 0?super.off(m,r):(this._removeDelegatedListener(m,typeof r=="string"?[r]:r,l),this)}queryRenderedFeatures(m,r){if(!this.style)return[];let l,h=m instanceof s.P||Array.isArray(m),p=h?m:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(h?{}:m)||{},p instanceof s.P||typeof p[0]=="number")l=[s.P.convert(p)];else{let g=s.P.convert(p[0]),y=s.P.convert(p[1]);l=[g,new s.P(y.x,g.y),y,new s.P(g.x,y.y),g]}return this.style.queryRenderedFeatures(l,r,this.transform)}querySourceFeatures(m,r){return this.style.querySourceFeatures(m,r)}setStyle(m,r){return(r=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(m,r))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){let r=this._locale[m];if(r==null)throw new Error(`Missing UI string '${m}'`);return r}_updateStyle(m,r){var l,h;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(m,r));let p=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!m)),m?(this.style=new xu(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m,r,p):this.style.loadJSON(m,r,p),this):((h=(l=this.style)===null||l===void 0?void 0:l.projection)===null||h===void 0||h.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new xu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,r){if(typeof m=="string"){let l=this._requestManager.transformRequest(m,"Style");s.j(l,new AbortController).then(h=>{this._updateDiff(h.data,r)}).catch(h=>{h&&this.fire(new s.k(h))})}else typeof m=="object"&&this._updateDiff(m,r)}_updateDiff(m,r){try{this.style.setState(m,r)&&this._update(!0)}catch(l){s.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(m,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(m,r){return this._lazyInitEmptyStyle(),this.style.addSource(m,r),this._update(!0)}isSourceLoaded(m){let r=this.style&&this.style.sourceCaches[m];if(r!==void 0)return r.loaded();this.fire(new s.k(new Error(`There is no source with ID '${m}'`)))}setTerrain(m){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),m){let r=this.style.sourceCaches[m.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${m.source}`);this.terrain===null&&r.reload();for(let l in this.style._layers){let h=this.style._layers[l];h.type==="hillshade"&&h.source===m.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new lg(this.painter,r,m),this.painter.renderToTexture=new eh(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=l=>{var h;l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==m.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((h=l.source)===null||h===void 0?void 0:h.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:m})),this}getTerrain(){var m,r;return(r=(m=this.terrain)===null||m===void 0?void 0:m.options)!==null&&r!==void 0?r:null}areTilesLoaded(){let m=this.style&&this.style.sourceCaches;for(let r in m){let l=m[r]._tiles;for(let h in l){let p=l[h];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}setSourceTileLodParams(m,r,l){if(l){let h=this.getSource(l);if(!h)throw new Error(`There is no source with ID "${l}", cannot set LOD parameters`);h.calculateTileZoom=xe(Math.max(1,m),Math.max(1,r))}else for(let h in this.style.sourceCaches)this.style.sourceCaches[h].getSource().calculateTileZoom=xe(Math.max(1,m),Math.max(1,r));return this._update(!0),this}refreshTiles(m,r){let l=this.style.sourceCaches[m];if(!l)throw new Error(`There is no source cache with ID "${m}", cannot refresh tile`);r===void 0?l.reload():l.refreshTiles(r.map(h=>new s.a1(h.z,h.x,h.y)))}addImage(m,r,l={}){let{pixelRatio:h=1,sdf:p=!1,stretchX:g,stretchY:y,content:E,textFitWidth:M,textFitHeight:A}=l;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||s.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:O,height:F,data:N}=r,K=r;return this.style.addImage(m,{data:new s.R({width:O,height:F},new Uint8Array(N)),pixelRatio:h,stretchX:g,stretchY:y,content:E,textFitWidth:M,textFitHeight:A,sdf:p,version:0,userImage:K}),K.onAdd&&K.onAdd(this,m),this}}{let{width:O,height:F,data:N}=I.getImageData(r);this.style.addImage(m,{data:new s.R({width:O,height:F},N),pixelRatio:h,stretchX:g,stretchY:y,content:E,textFitWidth:M,textFitHeight:A,sdf:p,version:0})}}updateImage(m,r){let l=this.style.getImage(m);if(!l)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let h=r instanceof HTMLImageElement||s.b(r)?I.getImageData(r):r,{width:p,height:g,data:y}=h;if(p===void 0||g===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==l.data.width||g!==l.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let E=!(r instanceof HTMLImageElement||s.b(r));return l.data.replace(y,E),this.style.updateImage(m,l),this}getImage(m){return this.style.getImage(m)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m){return ne.getImage(this._requestManager.transformRequest(m,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(m,r){return this._lazyInitEmptyStyle(),this.style.addLayer(m,r),this._update(!0)}moveLayer(m,r){return this.style.moveLayer(m,r),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(m,r,l){return this.style.setLayerZoomRange(m,r,l),this._update(!0)}setFilter(m,r,l={}){return this.style.setFilter(m,r,l),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,r,l,h={}){return this.style.setPaintProperty(m,r,l,h),this._update(!0)}getPaintProperty(m,r){return this.style.getPaintProperty(m,r)}setLayoutProperty(m,r,l,h={}){return this.style.setLayoutProperty(m,r,l,h),this._update(!0)}getLayoutProperty(m,r){return this.style.getLayoutProperty(m,r)}setGlyphs(m,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(m,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(m,r,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(m,r,l,h=>{h||this._update(!0)}),this}removeSprite(m){return this._lazyInitEmptyStyle(),this.style.removeSprite(m),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(m,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(m,r,l=>{l||this._update(!0)}),this}setLight(m,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(m,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(m,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(m,r){return this.style.setFeatureState(m,r),this._update()}removeFeatureState(m,r){return this.style.removeFeatureState(m,r),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,r=0;return this._container&&(m=this._container.clientWidth||400,r=this._container.clientHeight||300),[m,r]}_setupContainer(){let m=this._container;m.classList.add("maplibregl-map");let r=this._canvasContainer=P.create("div","maplibregl-canvas-container",m);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let l=this._containerDimensions(),h=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],h);let p=this._controlContainer=P.create("div","maplibregl-control-container",m),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(y=>{g[y]=P.create("div",`maplibregl-ctrl-${y} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,r,l){this._canvas.width=Math.floor(l*m),this._canvas.height=Math.floor(l*r),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${r}px`}_setupPainter(){let m=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),r=null;this._canvas.addEventListener("webglcontextcreationerror",h=>{r={requestedAttributes:m},h&&(r.statusMessage=h.statusMessage,r.type=h.type)},{once:!0});let l=null;if(l=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,m):this._canvas.getContext("webgl2",m)||this._canvas.getContext("webgl",m),!l){let h="Failed to initialize WebGL";throw r?(r.message=h,new Error(JSON.stringify(r))):new Error(h)}this.painter=new Sp(l,this.transform),R.testSupport(l)}migrateProjection(m,r){super.migrateProjection(m,r),this.painter.transform=m,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){var r,l,h,p,g;let y=this._idleTriggered?this._fadeDuration:0,E=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let F=this.transform.zoom,N=I.now();this.style.zoomHistory.update(F,N);let K=new s.C(F,{now:N,fadeDuration:y,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ee=K.crossFadingFactor();ee===1&&ee===this._crossFadingFactor||(M=!0,this._crossFadingFactor=ee),this.style.update(K)}let A=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0!==E;(h=this.style.projection)===null||h===void 0||h.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((p=this.style.projection)===null||p===void 0?void 0:p.transitionState,(g=this.style.projection)===null||g===void 0?void 0:g.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||A)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,y,this._crossSourceCollisions,A),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:y,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cn.mark(s.co.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let O=this._sourcesDirty||this._styleDirty||this._placementDirty;return O||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,s.cn.mark(s.co.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var m;this._hash&&this._hash.remove();for(let l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ne.removeThrottleControl(this._imageQueueHandle),(m=this._resizeObserver)===null||m===void 0||m.disconnect();let r=this.painter.context.gl.getExtension("WEBGL_lose_context");r?.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cn.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,I.frame(this._frameRequest,m=>{s.cn.frame(m),this._frameRequest=null;try{this._render(m)}catch(r){if(!s.cp(r)&&!function(l){return l.message===kc}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get version(){return ri}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(m){return this._lazyInitEmptyStyle(),this.style.setProjection(m),this._update(!0)}},a.MapMouseEvent=dn,a.MapTouchEvent=Oc,a.MapWheelEvent=Pp,a.Marker=Wl,a.NavigationControl=class{constructor(m){this._updateZoomButtons=()=>{let r=this._map.getZoom(),l=r===this._map.getMaxZoom(),h=r===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,l)=>{let h=this._map._getUIString(`NavigationControl.${l}`);r.title=h,r.setAttribute("aria-label",h)},this.options=s.e({},Fp,m),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new zp(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,r){let l=P.create("button",m,this._container);return l.type="button",l.addEventListener("click",r),l}},a.Popup=class extends s.E{constructor(m){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let y of this.options.className.split(" "))this._container.classList.add(y);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Bp(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;let l=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let h=this.options.anchor,p=jc(this.options.offset);if(!h){let y=this._container.offsetWidth,E=this._container.offsetHeight,M;M=l.y+p.bottom.y<E?["top"]:l.y>this._map.transform.height-E?["bottom"]:[],l.x<y/2?M.push("left"):l.x>this._map.transform.width-y/2&&M.push("right"),h=M.length===0?"bottom":M.join("-")}let g=l.add(p[h]);this.options.subpixelPositioning||(g=g.round()),P.setTransform(this._container,`${us[h]} translate(${g.x}px,${g.y}px)`),cg(this._container,h,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Vp),m)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=s.Q.convert(m),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){let r=document.createDocumentFragment(),l=document.createElement("body"),h;for(l.innerHTML=m;h=l.firstChild,h;)r.appendChild(h);return this.setDOMContent(r)}getMaxWidth(){var m;return(m=this._container)===null||m===void 0?void 0:m.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){return this._container&&this._container.classList.add(m),this}removeClassName(m){return this._container&&this._container.classList.remove(m),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}setSubpixelPositioning(m){this.options.subpixelPositioning=m}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let m=this._container.querySelector(Up);m&&m.focus()}},a.RasterDEMTileSource=Ol,a.RasterTileSource=lo,a.ScaleControl=class{constructor(m){this._onMove=()=>{Bu(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Bu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},zu),m)}getDefaultPosition(){return"bottom-left"}onAdd(m){return this._map=m,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=Vi,a.Style=xu,a.TerrainControl=class{constructor(m){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=m}onAdd(m){return this._map=m,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=Yd,a.TwoFingersTouchRotateHandler=Lt,a.TwoFingersTouchZoomHandler=Bc,a.TwoFingersTouchZoomRotateHandler=Lp,a.VectorTileSource=Gs,a.VideoSource=co,a.addSourceType=(m,r)=>s._(void 0,void 0,void 0,function*(){if(Fn(m))throw new Error(`A source type called "${m}" already exists.`);((l,h)=>{Ea[l]=h})(m,r)}),a.clearPrewarmedResources=function(){let m=Pe;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(Rt),Pe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.createTileMesh=Yt,a.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return zi().getRTLTextPluginStatus()},a.getVersion=function(){return jp},a.getWorkerCount=function(){return Ut.workerCount},a.getWorkerUrl=function(){return s.a.WORKER_URL},a.importScriptInWorkers=function(m){return Hr().broadcast("IS",m)},a.prewarm=function(){Dt().acquire(Rt)},a.setMaxParallelImageRequests=function(m){s.a.MAX_PARALLEL_IMAGE_REQUESTS=m},a.setRTLTextPlugin=function(m,r){return zi().setRTLTextPlugin(m,r)},a.setWorkerCount=function(m){Ut.workerCount=m},a.setWorkerUrl=function(m){s.a.WORKER_URL=m}});var o=i;return o})});import wL from"./angular-app-manifest.mjs";var Pf=class{},r0=class{},Ya=class i{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let o=e.indexOf(":");if(o>0){let a=e.slice(0,o),s=e.slice(o+1).trim();this.addHeaderEntry(a,s)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,o)=>{this.addHeaderEntry(o,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,o])=>{this.setHeaderEntries(e,o)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new i;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let o=t.value;if(typeof o=="string"&&(o=[o]),o.length===0)return;this.maybeSetNormalizedName(t.name,e);let a=(t.op==="a"?this.headers.get(e):void 0)||[];a.push(...o),this.headers.set(e,a);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let _=this.headers.get(e);if(!_)return;_=_.filter(w=>s.indexOf(w)===-1),_.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,_)}break}}addHeaderEntry(t,e){let o=t.toLowerCase();this.maybeSetNormalizedName(t,o),this.headers.has(o)?this.headers.get(o).push(e):this.headers.set(o,[e])}setHeaderEntries(t,e){let o=(Array.isArray(e)?e:[e]).map(s=>s.toString()),a=t.toLowerCase();this.headers.set(a,o),this.maybeSetNormalizedName(t,a)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Zv=class{encodeKey(t){return ZE(t)}encodeValue(t){return ZE(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function tD(i,t){let e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(a=>{let s=a.indexOf("="),[_,w]=s==-1?[t.decodeKey(a),""]:[t.decodeKey(a.slice(0,s)),t.decodeValue(a.slice(s+1))],C=e.get(_)||[];C.push(w),e.set(_,C)}),e}var iD=/%(\d[a-f0-9])/gi,rD={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ZE(i){return encodeURIComponent(i).replace(iD,(t,e)=>rD[e]??t)}function i0(i){return`${i}`}var Sl=class i{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new Zv,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=tD(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let o=t.fromObject[e],a=Array.isArray(o)?o.map(i0):[i0(o)];this.map.set(e,a)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(o=>{let a=t[o];Array.isArray(a)?a.forEach(s=>{e.push({param:o,value:s,op:"a"})}):e.push({param:o,value:a,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(o=>e+"="+this.encoder.encodeValue(o)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new i({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(i0(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let o=this.map.get(t.param)||[],a=o.indexOf(i0(t.value));a!==-1&&o.splice(a,1),o.length>0?this.map.set(t.param,o):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Xv=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function nD(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function XE(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function YE(i){return typeof Blob<"u"&&i instanceof Blob}function KE(i){return typeof FormData<"u"&&i instanceof FormData}function oD(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var If=class i{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,o,a){this.url=e,this.method=t.toUpperCase();let s;if(nD(this.method)||a?(this.body=o!==void 0?o:null,s=a):s=o,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Ya,this.context??=new Xv,!this.params)this.params=new Sl,this.urlWithParams=e;else{let _=this.params.toString();if(_.length===0)this.urlWithParams=e;else{let w=e.indexOf("?"),C=w===-1?"?":w<e.length-1?"&":"";this.urlWithParams=e+C+_}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||XE(this.body)||YE(this.body)||KE(this.body)||oD(this.body)?this.body:this.body instanceof Sl?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||KE(this.body)?null:YE(this.body)?this.body.type||null:XE(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Sl?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,o=t.url||this.url,a=t.responseType||this.responseType,s=t.transferCache??this.transferCache,_=t.body!==void 0?t.body:this.body,w=t.withCredentials??this.withCredentials,C=t.reportProgress??this.reportProgress,T=t.headers||this.headers,I=t.params||this.params,P=t.context??this.context;return t.setHeaders!==void 0&&(T=Object.keys(t.setHeaders).reduce((R,H)=>R.set(H,t.setHeaders[H]),T)),t.setParams&&(I=Object.keys(t.setParams).reduce((R,H)=>R.set(H,t.setParams[H]),I)),new i(e,o,_,{params:I,headers:T,context:P,reportProgress:C,responseType:a,withCredentials:w,transferCache:s})}},iu=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(iu||{}),kf=class{headers;status;statusText;url;ok;type;constructor(t,e=200,o="OK"){this.headers=t.headers||new Ya,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||o,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},n0=class i extends kf{constructor(t={}){super(t)}type=iu.ResponseHeader;clone(t={}){return new i({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Af=class i extends kf{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=iu.Response;clone(t={}){return new i({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},tu=class extends kf{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},iS=200,sD=204;function Wv(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}var Fs=(()=>{class i{handler;constructor(e){this.handler=e}request(e,o,a={}){let s;if(e instanceof If)s=e;else{let C;a.headers instanceof Ya?C=a.headers:C=new Ya(a.headers);let T;a.params&&(a.params instanceof Sl?T=a.params:T=new Sl({fromObject:a.params})),s=new If(e,o,a.body!==void 0?a.body:null,{headers:C,context:a.context,params:T,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials,transferCache:a.transferCache})}let _=ti(s).pipe(Yc(C=>this.handler.handle(C)));if(e instanceof If||a.observe==="events")return _;let w=_.pipe(ln(C=>C instanceof Af));switch(a.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return w.pipe(wi(C=>{if(C.body!==null&&!(C.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return C.body}));case"blob":return w.pipe(wi(C=>{if(C.body!==null&&!(C.body instanceof Blob))throw new Error("Response is not a Blob.");return C.body}));case"text":return w.pipe(wi(C=>{if(C.body!==null&&typeof C.body!="string")throw new Error("Response is not a string.");return C.body}));case"json":default:return w.pipe(wi(C=>C.body))}case"response":return w;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(e,o={}){return this.request("DELETE",e,o)}get(e,o={}){return this.request("GET",e,o)}head(e,o={}){return this.request("HEAD",e,o)}jsonp(e,o){return this.request("JSONP",e,{params:new Sl().append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,o={}){return this.request("OPTIONS",e,o)}patch(e,o,a={}){return this.request("PATCH",e,Wv(a,o))}post(e,o,a={}){return this.request("POST",e,Wv(a,o))}put(e,o,a={}){return this.request("PUT",e,Wv(a,o))}static \u0275fac=function(o){return new(o||i)(hi(Pf))};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})(),aD=/^\)\]\}',?\n/,lD="X-Request-URL";function QE(i){if(i.url)return i.url;let t=lD.toLocaleLowerCase();return i.headers.get(t)}var cD=(()=>{class i{fetchImpl=Le(Yv,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e));ngZone=Le(tr);handle(e){return new Jl(o=>{let a=new AbortController;return this.doRequest(e,a.signal,o).then(Kv,s=>o.error(new tu({error:s}))),()=>a.abort()})}doRequest(e,o,a){return qi(this,null,function*(){let s=this.createRequestInit(e),_;try{let H=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,gt({signal:o},s)));uD(H),a.next({type:iu.Sent}),_=yield H}catch(H){a.error(new tu({error:H,status:H.status??0,statusText:H.statusText,url:e.urlWithParams,headers:H.headers}));return}let w=new Ya(_.headers),C=_.statusText,T=QE(_)??e.urlWithParams,I=_.status,P=null;if(e.reportProgress&&a.next(new n0({headers:w,status:I,statusText:C,url:T})),_.body){let H=_.headers.get("content-length"),Z=[],X=_.body.getReader(),fe=0,ae,ne,re=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>qi(this,null,function*(){for(;;){let{done:oe,value:Ve}=yield X.read();if(oe)break;if(Z.push(Ve),fe+=Ve.length,e.reportProgress){ne=e.responseType==="text"?(ne??"")+(ae??=new TextDecoder).decode(Ve,{stream:!0}):void 0;let tt=()=>a.next({type:iu.DownloadProgress,total:H?+H:void 0,loaded:fe,partialText:ne});re?re.run(tt):tt()}}}));let de=this.concatChunks(Z,fe);try{let oe=_.headers.get("Content-Type")??"";P=this.parseBody(e,de,oe)}catch(oe){a.error(new tu({error:oe,headers:new Ya(_.headers),status:_.status,statusText:_.statusText,url:QE(_)??e.urlWithParams}));return}}I===0&&(I=P?iS:0),I>=200&&I<300?(a.next(new Af({body:P,headers:w,status:I,statusText:C,url:T})),a.complete()):a.error(new tu({error:P,headers:w,status:I,statusText:C,url:T}))})}parseBody(e,o,a){switch(e.responseType){case"json":let s=new TextDecoder().decode(o).replace(aD,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(o);case"blob":return new Blob([o],{type:a});case"arraybuffer":return o.buffer}}createRequestInit(e){let o={},a=e.withCredentials?"include":void 0;if(e.headers.forEach((s,_)=>o[s]=_.join(",")),e.headers.has("Accept")||(o.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let s=e.detectContentTypeHeader();s!==null&&(o["Content-Type"]=s)}return{body:e.serializeBody(),method:e.method,headers:o,credentials:a}}concatChunks(e,o){let a=new Uint8Array(o),s=0;for(let _ of e)a.set(_,s),s+=_.length;return a}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})(),Yv=class{};function Kv(){}function uD(i){i.then(Kv,Kv)}function rS(i,t){return t(i)}function dD(i,t){return(e,o)=>t.intercept(e,{handle:a=>i(a,o)})}function hD(i,t,e){return(o,a)=>fs(e,()=>t(o,s=>i(s,a)))}var pD=new Bt(""),Qv=new Bt(""),Jv=new Bt(""),nS=new Bt("",{providedIn:"root",factory:()=>!0});function fD(){let i=null;return(t,e)=>{i===null&&(i=(Le(pD,{optional:!0})??[]).reduceRight(dD,rS));let o=Le(mf);if(Le(nS)){let s=o.add();return i(t,e).pipe(ec(()=>o.remove(s)))}else return i(t,e)}}var JE=(()=>{class i extends Pf{backend;injector;chain=null;pendingTasks=Le(mf);contributeToStability=Le(nS);constructor(e,o){super(),this.backend=e,this.injector=o}handle(e){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(Qv),...this.injector.get(Jv,[])]));this.chain=o.reduceRight((a,s)=>hD(a,s,this.injector),rS)}if(this.contributeToStability){let o=this.pendingTasks.add();return this.chain(e,a=>this.backend.handle(a)).pipe(ec(()=>this.pendingTasks.remove(o)))}else return this.chain(e,o=>this.backend.handle(o))}static \u0275fac=function(o){return new(o||i)(hi(r0),hi(Wa))};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})();var mD=/^\)\]\}',?\n/;function gD(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}var eS=(()=>{class i{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Er(-2800,!1);let o=this.xhrFactory;return(o.\u0275loadImpl?yo(o.\u0275loadImpl()):ti(null)).pipe(xo(()=>new Jl(s=>{let _=o.build();if(_.open(e.method,e.urlWithParams),e.withCredentials&&(_.withCredentials=!0),e.headers.forEach((X,fe)=>_.setRequestHeader(X,fe.join(","))),e.headers.has("Accept")||_.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let X=e.detectContentTypeHeader();X!==null&&_.setRequestHeader("Content-Type",X)}if(e.responseType){let X=e.responseType.toLowerCase();_.responseType=X!=="json"?X:"text"}let w=e.serializeBody(),C=null,T=()=>{if(C!==null)return C;let X=_.statusText||"OK",fe=new Ya(_.getAllResponseHeaders()),ae=gD(_)||e.url;return C=new n0({headers:fe,status:_.status,statusText:X,url:ae}),C},I=()=>{let{headers:X,status:fe,statusText:ae,url:ne}=T(),re=null;fe!==sD&&(re=typeof _.response>"u"?_.responseText:_.response),fe===0&&(fe=re?iS:0);let de=fe>=200&&fe<300;if(e.responseType==="json"&&typeof re=="string"){let oe=re;re=re.replace(mD,"");try{re=re!==""?JSON.parse(re):null}catch(Ve){re=oe,de&&(de=!1,re={error:Ve,text:re})}}de?(s.next(new Af({body:re,headers:X,status:fe,statusText:ae,url:ne||void 0})),s.complete()):s.error(new tu({error:re,headers:X,status:fe,statusText:ae,url:ne||void 0}))},P=X=>{let{url:fe}=T(),ae=new tu({error:X,status:_.status||0,statusText:_.statusText||"Unknown Error",url:fe||void 0});s.error(ae)},R=!1,H=X=>{R||(s.next(T()),R=!0);let fe={type:iu.DownloadProgress,loaded:X.loaded};X.lengthComputable&&(fe.total=X.total),e.responseType==="text"&&_.responseText&&(fe.partialText=_.responseText),s.next(fe)},Z=X=>{let fe={type:iu.UploadProgress,loaded:X.loaded};X.lengthComputable&&(fe.total=X.total),s.next(fe)};return _.addEventListener("load",I),_.addEventListener("error",P),_.addEventListener("timeout",P),_.addEventListener("abort",P),e.reportProgress&&(_.addEventListener("progress",H),w!==null&&_.upload&&_.upload.addEventListener("progress",Z)),_.send(w),s.next({type:iu.Sent}),()=>{_.removeEventListener("error",P),_.removeEventListener("abort",P),_.removeEventListener("load",I),_.removeEventListener("timeout",P),e.reportProgress&&(_.removeEventListener("progress",H),w!==null&&_.upload&&_.upload.removeEventListener("progress",Z)),_.readyState!==_.DONE&&_.abort()}})))}static \u0275fac=function(o){return new(o||i)(hi(Ch))};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})(),oS=new Bt(""),_D="XSRF-TOKEN",bD=new Bt("",{providedIn:"root",factory:()=>_D}),vD="X-XSRF-TOKEN",yD=new Bt("",{providedIn:"root",factory:()=>vD}),o0=class{},xD=(()=>{class i{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,o,a){this.doc=e,this.platform=o,this.cookieName=a}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Wg(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(o){return new(o||i)(hi(Oi),hi(Ls),hi(bD))};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})();function wD(i,t){let e=i.url.toLowerCase();if(!Le(oS)||i.method==="GET"||i.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(i);let o=Le(o0).getToken(),a=Le(yD);return o!=null&&!i.headers.has(a)&&(i=i.clone({headers:i.headers.set(a,o)})),t(i)}var sS=function(i){return i[i.Interceptors=0]="Interceptors",i[i.LegacyInterceptors=1]="LegacyInterceptors",i[i.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",i[i.NoXsrfProtection=3]="NoXsrfProtection",i[i.JsonpSupport=4]="JsonpSupport",i[i.RequestsMadeViaParent=5]="RequestsMadeViaParent",i[i.Fetch=6]="Fetch",i}(sS||{});function CD(i,t){return{\u0275kind:i,\u0275providers:t}}function ey(...i){let t=[Fs,eS,JE,{provide:Pf,useExisting:JE},{provide:r0,useFactory:()=>Le(cD,{optional:!0})??Le(eS)},{provide:Qv,useValue:wD,multi:!0},{provide:oS,useValue:!0},{provide:o0,useClass:xD}];for(let e of i)t.push(...e.\u0275providers);return Ga(t)}var tS=new Bt("");function ED(){return CD(sS.LegacyInterceptors,[{provide:tS,useFactory:fD},{provide:Qv,useExisting:tS,multi:!0}])}var Tl=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({providers:[ey(ED())]})}return i})();var iy=class extends OE{supportsDOMEvents=!0},Th=class i extends iy{static makeCurrent(){Gg(new i)}onAndCancel(t,e,o){return t.addEventListener(e,o),()=>{t.removeEventListener(e,o)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=TD();return e==null?null:MD(e)}resetBaseElement(){Df=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Wg(document.cookie,t)}},Df=null;function TD(){return Df=Df||document.querySelector("base"),Df?Df.getAttribute("href"):null}function MD(i){return new URL(i,document.baseURI).pathname}var ID=(()=>{class i{build(){return new XMLHttpRequest}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})(),Rf=new Bt(""),dS=(()=>{class i{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,o){this._zone=o,e.forEach(a=>{a.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,o,a){return this._findPluginFor(o).addEventListener(e,o,a)}getZone(){return this._zone}_findPluginFor(e){let o=this._eventNameToPlugin.get(e);if(o)return o;if(o=this._plugins.find(s=>s.supports(e)),!o)throw new Er(5101,!1);return this._eventNameToPlugin.set(e,o),o}static \u0275fac=function(o){return new(o||i)(hi(Rf),hi(tr))};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})(),Mh=class{_doc;constructor(t){this._doc=t}manager},ry="ng-app-id";function aS(i){for(let t of i)t.remove()}function lS(i,t){let e=t.createElement("style");return e.textContent=i,e}function PD(i,t,e){let o=i.head?.querySelectorAll(`style[${ry}="${t}"]`);if(o)for(let a of o)a.textContent&&(a.removeAttribute(ry),e.set(a.textContent,{usage:0,elements:[a]}))}function ny(i,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",i),e}var hS=(()=>{class i{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,o,a,s={}){this.doc=e,this.appId=o,this.nonce=a,this.isServer=Kg(s),PD(e,o,this.inline),this.hosts.add(e.head)}addStyles(e,o){for(let a of e)this.addUsage(a,this.inline,lS);o?.forEach(a=>this.addUsage(a,this.external,ny))}removeStyles(e,o){for(let a of e)this.removeUsage(a,this.inline);o?.forEach(a=>this.removeUsage(a,this.external))}addUsage(e,o,a){let s=o.get(e);s?s.usage++:o.set(e,{usage:1,elements:[...this.hosts].map(_=>this.addElement(_,a(e,this.doc)))})}removeUsage(e,o){let a=o.get(e);a&&(a.usage--,a.usage<=0&&(aS(a.elements),o.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])aS(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[o,{elements:a}]of this.inline)a.push(this.addElement(e,lS(o,this.doc)));for(let[o,{elements:a}]of this.external)a.push(this.addElement(e,ny(o,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,o){return this.nonce&&o.setAttribute("nonce",this.nonce),this.isServer&&o.setAttribute(ry,this.appId),e.appendChild(o)}static \u0275fac=function(o){return new(o||i)(hi(Oi),hi(Qc),hi(ed,8),hi(Ls))};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})(),ty={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},sy=/%COMP%/g,pS="%COMP%",kD=`_nghost-${pS}`,AD=`_ngcontent-${pS}`,DD=!0,RD=new Bt("",{providedIn:"root",factory:()=>DD});function OD(i){return AD.replace(sy,i)}function LD(i){return kD.replace(sy,i)}function fS(i,t){return t.map(e=>e.replace(sy,i))}var Ih=(()=>{class i{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,o,a,s,_,w,C,T=null){this.eventManager=e,this.sharedStylesHost=o,this.appId=a,this.removeStylesOnCompDestroy=s,this.doc=_,this.platformId=w,this.ngZone=C,this.nonce=T,this.platformIsServer=Kg(w),this.defaultRenderer=new Of(e,_,C,this.platformIsServer)}createRenderer(e,o){if(!e||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===gf.ShadowDom&&(o=ui(gt({},o),{encapsulation:gf.Emulated}));let a=this.getOrCreateRenderer(e,o);return a instanceof s0?a.applyToHost(e):a instanceof Lf&&a.applyStyles(),a}getOrCreateRenderer(e,o){let a=this.rendererByCompId,s=a.get(o.id);if(!s){let _=this.doc,w=this.ngZone,C=this.eventManager,T=this.sharedStylesHost,I=this.removeStylesOnCompDestroy,P=this.platformIsServer;switch(o.encapsulation){case gf.Emulated:s=new s0(C,T,o,this.appId,I,_,w,P);break;case gf.ShadowDom:return new oy(C,T,e,o,_,w,this.nonce,P);default:s=new Lf(C,T,o,I,_,w,P);break}a.set(o.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(o){return new(o||i)(hi(dS),hi(hS),hi(Qc),hi(RD),hi(Oi),hi(Ls),hi(tr),hi(ed))};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})(),Of=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,o,a){this.eventManager=t,this.doc=e,this.ngZone=o,this.platformIsServer=a}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(ty[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(cS(t)?t.content:t).appendChild(e)}insertBefore(t,e,o){t&&(cS(t)?t.content:t).insertBefore(e,o)}removeChild(t,e){e.remove()}selectRootElement(t,e){let o=typeof t=="string"?this.doc.querySelector(t):t;if(!o)throw new Er(-5104,!1);return e||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,o,a){if(a){e=a+":"+e;let s=ty[a];s?t.setAttributeNS(s,e,o):t.setAttribute(e,o)}else t.setAttribute(e,o)}removeAttribute(t,e,o){if(o){let a=ty[o];a?t.removeAttributeNS(a,e):t.removeAttribute(`${o}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,o,a){a&(_f.DashCase|_f.Important)?t.style.setProperty(e,o,a&_f.Important?"important":""):t.style[e]=o}removeStyle(t,e,o){o&_f.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,o){t!=null&&(t[e]=o)}setValue(t,e){t.nodeValue=e}listen(t,e,o){if(typeof t=="string"&&(t=El().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(o))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function cS(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var oy=class extends Of{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,o,a,s,_,w,C){super(t,s,_,C),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let T=fS(a.id,a.styles);for(let P of T){let R=document.createElement("style");w&&R.setAttribute("nonce",w),R.textContent=P,this.shadowRoot.appendChild(R)}let I=a.getExternalStyles?.();if(I)for(let P of I){let R=ny(P,s);w&&R.setAttribute("nonce",w),this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,o){return super.insertBefore(this.nodeOrShadowRoot(t),e,o)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Lf=class extends Of{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,o,a,s,_,w,C){super(t,s,_,w),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=a,this.styles=C?fS(C,o.styles):o.styles,this.styleUrls=o.getExternalStyles?.(C)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},s0=class extends Lf{contentAttr;hostAttr;constructor(t,e,o,a,s,_,w,C){let T=a+"-"+o.id;super(t,e,o,s,_,w,C,T),this.contentAttr=OD(T),this.hostAttr=LD(T)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let o=super.createElement(t,e);return super.setAttribute(o,this.contentAttr,""),o}},ND=(()=>{class i extends Mh{constructor(e){super(e)}supports(e){return!0}addEventListener(e,o,a){return e.addEventListener(o,a,!1),()=>this.removeEventListener(e,o,a)}removeEventListener(e,o,a){return e.removeEventListener(o,a)}static \u0275fac=function(o){return new(o||i)(hi(Oi))};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})(),uS=["alt","control","meta","shift"],FD={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zD={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},BD=(()=>{class i extends Mh{constructor(e){super(e)}supports(e){return i.parseEventName(e)!=null}addEventListener(e,o,a){let s=i.parseEventName(o),_=i.eventCallback(s.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>El().onAndCancel(e,s.domEventName,_))}static parseEventName(e){let o=e.toLowerCase().split("."),a=o.shift();if(o.length===0||!(a==="keydown"||a==="keyup"))return null;let s=i._normalizeKey(o.pop()),_="",w=o.indexOf("code");if(w>-1&&(o.splice(w,1),_="code."),uS.forEach(T=>{let I=o.indexOf(T);I>-1&&(o.splice(I,1),_+=T+".")}),_+=s,o.length!=0||s.length===0)return null;let C={};return C.domEventName=a,C.fullKey=_,C}static matchEventFullKeyCode(e,o){let a=FD[e.key]||e.key,s="";return o.indexOf("code.")>-1&&(a=e.code,s="code."),a==null||!a?!1:(a=a.toLowerCase(),a===" "?a="space":a==="."&&(a="dot"),uS.forEach(_=>{if(_!==a){let w=zD[_];w(e)&&(s+=_+".")}}),s+=a,s===o)}static eventCallback(e,o,a){return s=>{i.matchEventFullKeyCode(s,e)&&a.runGuarded(()=>o(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(o){return new(o||i)(hi(Oi))};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})();function mS(i,t){return TE(gt({rootComponent:i},VD(t)))}function VD(i){return{appProviders:[...$D,...i?.providers??[]],platformProviders:HD}}function UD(){Th.makeCurrent()}function jD(){return new Ju}function qD(){return Lg(document),document}var HD=[{provide:Ls,useValue:BE},{provide:Ng,useValue:UD,multi:!0},{provide:Oi,useFactory:qD,deps:[]}];var $D=[{provide:tE,useValue:"root"},{provide:Ju,useFactory:jD,deps:[]},{provide:Rf,useClass:ND,multi:!0,deps:[Oi,tr,Ls]},{provide:Rf,useClass:BD,multi:!0,deps:[Oi]},Ih,hS,dS,{provide:vh,useExisting:Ih},{provide:Ch,useClass:ID,deps:[]},[]];var gS=(()=>{class i{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(o){return new(o||i)(hi(Oi))};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Nf=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:function(o){let a=null;return o?a=new(o||i):a=hi(GD),a},providedIn:"root"})}return i})(),GD=(()=>{class i extends Nf{_doc;constructor(e){super(),this._doc=e}sanitize(e,o){if(o==null)return null;switch(e){case Ns.NONE:return o;case Ns.HTML:return bh(o,"HTML")?_h(o):fE(this._doc,String(o)).toString();case Ns.STYLE:return bh(o,"Style")?_h(o):o;case Ns.SCRIPT:if(bh(o,"Script"))return _h(o);throw new Er(5200,!1);case Ns.URL:return bh(o,"URL")?_h(o):pE(String(o));case Ns.RESOURCE_URL:if(bh(o,"ResourceURL"))return _h(o);throw new Er(5201,!1);default:throw new Er(5202,!1)}}bypassSecurityTrustHtml(e){return lE(e)}bypassSecurityTrustStyle(e){return cE(e)}bypassSecurityTrustScript(e){return uE(e)}bypassSecurityTrustUrl(e){return dE(e)}bypassSecurityTrustResourceUrl(e){return hE(e)}static \u0275fac=function(o){return new(o||i)(hi(Oi))};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ZD=(()=>{class i extends t0{constructor(e,o,a){super(e,o,a)}ngOnDestroy(){this.flush()}static \u0275fac=function(o){return new(o||i)(hi(Oi),hi(Mf),hi(e0))};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})();function XD(){return new $E}function YD(i,t,e){return new WE(i,t,e)}var _S=[{provide:e0,useFactory:XD},{provide:t0,useClass:ZD},{provide:vh,useFactory:YD,deps:[Ih,t0,tr]}],YU=[{provide:Mf,useFactory:()=>new GE},{provide:Fo,useValue:"BrowserAnimations"},..._S],KD=[{provide:Mf,useClass:HE},{provide:Fo,useValue:"NoopAnimations"},..._S];function bS(){return[...KD]}var QD=Object.getOwnPropertyNames,pi=(i,t)=>function(){return t||(0,i[QD(i)[0]])((t={exports:{}}).exports,t),t.exports},Ff=pi({"external/npm/node_modules/domino/lib/Event.js"(i,t){"use strict";t.exports=e,e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3;function e(o,a){if(this.type="",this.target=null,this.currentTarget=null,this.eventPhase=e.AT_TARGET,this.bubbles=!1,this.cancelable=!1,this.isTrusted=!1,this.defaultPrevented=!1,this.timeStamp=Date.now(),this._propagationStopped=!1,this._immediatePropagationStopped=!1,this._initialized=!0,this._dispatching=!1,o&&(this.type=o),a)for(var s in a)this[s]=a[s]}e.prototype=Object.create(Object.prototype,{constructor:{value:e},stopPropagation:{value:function(){this._propagationStopped=!0}},stopImmediatePropagation:{value:function(){this._propagationStopped=!0,this._immediatePropagationStopped=!0}},preventDefault:{value:function(){this.cancelable&&(this.defaultPrevented=!0)}},initEvent:{value:function(a,s,_){this._initialized=!0,!this._dispatching&&(this._propagationStopped=!1,this._immediatePropagationStopped=!1,this.defaultPrevented=!1,this.isTrusted=!1,this.target=null,this.type=a,this.bubbles=s,this.cancelable=_)}}})}}),wS=pi({"external/npm/node_modules/domino/lib/UIEvent.js"(i,t){"use strict";var e=Ff();t.exports=o;function o(){e.call(this),this.view=null,this.detail=0}o.prototype=Object.create(e.prototype,{constructor:{value:o},initUIEvent:{value:function(a,s,_,w,C){this.initEvent(a,s,_),this.view=w,this.detail=C}}})}}),CS=pi({"external/npm/node_modules/domino/lib/MouseEvent.js"(i,t){"use strict";var e=wS();t.exports=o;function o(){e.call(this),this.screenX=this.screenY=this.clientX=this.clientY=0,this.ctrlKey=this.altKey=this.shiftKey=this.metaKey=!1,this.button=0,this.buttons=1,this.relatedTarget=null}o.prototype=Object.create(e.prototype,{constructor:{value:o},initMouseEvent:{value:function(a,s,_,w,C,T,I,P,R,H,Z,X,fe,ae,ne){switch(this.initEvent(a,s,_,w,C),this.screenX=T,this.screenY=I,this.clientX=P,this.clientY=R,this.ctrlKey=H,this.altKey=Z,this.shiftKey=X,this.metaKey=fe,this.button=ae,ae){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2;break;default:this.buttons=0;break}this.relatedTarget=ne}},getModifierState:{value:function(a){switch(a){case"Alt":return this.altKey;case"Control":return this.ctrlKey;case"Shift":return this.shiftKey;case"Meta":return this.metaKey;default:return!1}}}})}}),ly=pi({"external/npm/node_modules/domino/lib/DOMException.js"(i,t){"use strict";t.exports=we;var e=1,o=3,a=4,s=5,_=7,w=8,C=9,T=11,I=12,P=13,R=14,H=15,Z=17,X=18,fe=19,ae=20,ne=21,re=22,de=23,oe=24,Ve=25,tt=[null,"INDEX_SIZE_ERR",null,"HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR",null,"NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR",null,"TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR"],dt=[null,"INDEX_SIZE_ERR (1): the index is not in the allowed range",null,"HIERARCHY_REQUEST_ERR (3): the operation would yield an incorrect nodes model","WRONG_DOCUMENT_ERR (4): the object is in the wrong Document, a call to importNode is required","INVALID_CHARACTER_ERR (5): the string contains invalid characters",null,"NO_MODIFICATION_ALLOWED_ERR (7): the object can not be modified","NOT_FOUND_ERR (8): the object can not be found here","NOT_SUPPORTED_ERR (9): this operation is not supported","INUSE_ATTRIBUTE_ERR (10): setAttributeNode called on owned Attribute","INVALID_STATE_ERR (11): the object is in an invalid state","SYNTAX_ERR (12): the string did not match the expected pattern","INVALID_MODIFICATION_ERR (13): the object can not be modified in this way","NAMESPACE_ERR (14): the operation is not allowed by Namespaces in XML","INVALID_ACCESS_ERR (15): the object does not support the operation or argument",null,"TYPE_MISMATCH_ERR (17): the type of the object does not match the expected type","SECURITY_ERR (18): the operation is insecure","NETWORK_ERR (19): a network error occurred","ABORT_ERR (20): the user aborted an operation","URL_MISMATCH_ERR (21): the given URL does not match another URL","QUOTA_EXCEEDED_ERR (22): the quota has been exceeded","TIMEOUT_ERR (23): a timeout occurred","INVALID_NODE_TYPE_ERR (24): the supplied node is invalid or has an invalid ancestor for this operation","DATA_CLONE_ERR (25): the object can not be cloned."],Je={INDEX_SIZE_ERR:e,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:o,WRONG_DOCUMENT_ERR:a,INVALID_CHARACTER_ERR:s,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:_,NOT_FOUND_ERR:w,NOT_SUPPORTED_ERR:C,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:T,SYNTAX_ERR:I,INVALID_MODIFICATION_ERR:P,NAMESPACE_ERR:R,INVALID_ACCESS_ERR:H,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:Z,SECURITY_ERR:X,NETWORK_ERR:fe,ABORT_ERR:ae,URL_MISMATCH_ERR:ne,QUOTA_EXCEEDED_ERR:re,TIMEOUT_ERR:de,INVALID_NODE_TYPE_ERR:oe,DATA_CLONE_ERR:Ve};function we(le){Error.call(this),Error.captureStackTrace(this,this.constructor),this.code=le,this.message=dt[le],this.name=tt[le]}we.prototype.__proto__=Error.prototype;for(yt in Je)Ge={value:Je[yt]},Object.defineProperty(we,yt,Ge),Object.defineProperty(we.prototype,yt,Ge);var Ge,yt}}),cy=pi({"external/npm/node_modules/domino/lib/config.js"(i){i.isApiWritable=!globalThis.__domino_frozen__}}),bn=pi({"external/npm/node_modules/domino/lib/utils.js"(i){"use strict";var t=ly(),e=t,o=cy().isApiWritable;i.NAMESPACE={HTML:"http://www.w3.org/1999/xhtml",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink"},i.IndexSizeError=function(){throw new t(e.INDEX_SIZE_ERR)},i.HierarchyRequestError=function(){throw new t(e.HIERARCHY_REQUEST_ERR)},i.WrongDocumentError=function(){throw new t(e.WRONG_DOCUMENT_ERR)},i.InvalidCharacterError=function(){throw new t(e.INVALID_CHARACTER_ERR)},i.NoModificationAllowedError=function(){throw new t(e.NO_MODIFICATION_ALLOWED_ERR)},i.NotFoundError=function(){throw new t(e.NOT_FOUND_ERR)},i.NotSupportedError=function(){throw new t(e.NOT_SUPPORTED_ERR)},i.InvalidStateError=function(){throw new t(e.INVALID_STATE_ERR)},i.SyntaxError=function(){throw new t(e.SYNTAX_ERR)},i.InvalidModificationError=function(){throw new t(e.INVALID_MODIFICATION_ERR)},i.NamespaceError=function(){throw new t(e.NAMESPACE_ERR)},i.InvalidAccessError=function(){throw new t(e.INVALID_ACCESS_ERR)},i.TypeMismatchError=function(){throw new t(e.TYPE_MISMATCH_ERR)},i.SecurityError=function(){throw new t(e.SECURITY_ERR)},i.NetworkError=function(){throw new t(e.NETWORK_ERR)},i.AbortError=function(){throw new t(e.ABORT_ERR)},i.UrlMismatchError=function(){throw new t(e.URL_MISMATCH_ERR)},i.QuotaExceededError=function(){throw new t(e.QUOTA_EXCEEDED_ERR)},i.TimeoutError=function(){throw new t(e.TIMEOUT_ERR)},i.InvalidNodeTypeError=function(){throw new t(e.INVALID_NODE_TYPE_ERR)},i.DataCloneError=function(){throw new t(e.DATA_CLONE_ERR)},i.nyi=function(){throw new Error("NotYetImplemented")},i.shouldOverride=function(){throw new Error("Abstract function; should be overriding in subclass.")},i.assert=function(a,s){if(!a)throw new Error("Assertion failed: "+(s||"")+`
`+new Error().stack)},i.expose=function(a,s){for(var _ in a)Object.defineProperty(s.prototype,_,{value:a[_],writable:o})},i.merge=function(a,s){for(var _ in s)a[_]=s[_]},i.documentOrder=function(a,s){return 3-(a.compareDocumentPosition(s)&6)},i.toASCIILowerCase=function(a){return a.replace(/[A-Z]+/g,function(s){return s.toLowerCase()})},i.toASCIIUpperCase=function(a){return a.replace(/[a-z]+/g,function(s){return s.toUpperCase()})}}}),ES=pi({"external/npm/node_modules/domino/lib/EventTarget.js"(i,t){"use strict";var e=Ff(),o=CS(),a=bn();t.exports=s;function s(){}s.prototype={addEventListener:function(w,C,T){if(C){T===void 0&&(T=!1),this._listeners||(this._listeners=Object.create(null)),this._listeners[w]||(this._listeners[w]=[]);for(var I=this._listeners[w],P=0,R=I.length;P<R;P++){var H=I[P];if(H.listener===C&&H.capture===T)return}var Z={listener:C,capture:T};typeof C=="function"&&(Z.f=C),I.push(Z)}},removeEventListener:function(w,C,T){if(T===void 0&&(T=!1),this._listeners){var I=this._listeners[w];if(I)for(var P=0,R=I.length;P<R;P++){var H=I[P];if(H.listener===C&&H.capture===T){I.length===1?this._listeners[w]=void 0:I.splice(P,1);return}}}},dispatchEvent:function(w){return this._dispatchEvent(w,!1)},_dispatchEvent:function(w,C){typeof C!="boolean"&&(C=!1);function T(X,fe){var ae=fe.type,ne=fe.eventPhase;if(fe.currentTarget=X,ne!==e.CAPTURING_PHASE&&X._handlers&&X._handlers[ae]){var re=X._handlers[ae],de;if(typeof re=="function")de=re.call(fe.currentTarget,fe);else{var oe=re.handleEvent;if(typeof oe!="function")throw new TypeError("handleEvent property of event handler object isnot a function.");de=oe.call(re,fe)}switch(fe.type){case"mouseover":de===!0&&fe.preventDefault();break;case"beforeunload":default:de===!1&&fe.preventDefault();break}}var Ve=X._listeners&&X._listeners[ae];if(Ve){Ve=Ve.slice();for(var tt=0,dt=Ve.length;tt<dt;tt++){if(fe._immediatePropagationStopped)return;var Je=Ve[tt];if(!(ne===e.CAPTURING_PHASE&&!Je.capture||ne===e.BUBBLING_PHASE&&Je.capture))if(Je.f)Je.f.call(fe.currentTarget,fe);else{var we=Je.listener.handleEvent;if(typeof we!="function")throw new TypeError("handleEvent property of event listener object is not a function.");we.call(Je.listener,fe)}}}}(!w._initialized||w._dispatching)&&a.InvalidStateError(),w.isTrusted=C,w._dispatching=!0,w.target=this;for(var I=[],P=this.parentNode;P;P=P.parentNode)I.push(P);w.eventPhase=e.CAPTURING_PHASE;for(var R=I.length-1;R>=0&&(T(I[R],w),!w._propagationStopped);R--);if(w._propagationStopped||(w.eventPhase=e.AT_TARGET,T(this,w)),w.bubbles&&!w._propagationStopped){w.eventPhase=e.BUBBLING_PHASE;for(var H=0,Z=I.length;H<Z&&(T(I[H],w),!w._propagationStopped);H++);}if(w._dispatching=!1,w.eventPhase=e.AT_TARGET,w.currentTarget=null,C&&!w.defaultPrevented&&w instanceof o)switch(w.type){case"mousedown":this._armed={x:w.clientX,y:w.clientY,t:w.timeStamp};break;case"mouseout":case"mouseover":this._armed=null;break;case"mouseup":this._isClick(w)&&this._doClick(w),this._armed=null;break}return!w.defaultPrevented},_isClick:function(_){return this._armed!==null&&_.type==="mouseup"&&_.isTrusted&&_.button===0&&_.timeStamp-this._armed.t<1e3&&Math.abs(_.clientX-this._armed.x)<10&&Math.abs(_.clientY-this._armed.Y)<10},_doClick:function(_){if(!this._click_in_progress){this._click_in_progress=!0;for(var w=this;w&&!w._post_click_activation_steps;)w=w.parentNode;w&&w._pre_click_activation_steps&&w._pre_click_activation_steps();var C=this.ownerDocument.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,this.ownerDocument.defaultView,1,_.screenX,_.screenY,_.clientX,_.clientY,_.ctrlKey,_.altKey,_.shiftKey,_.metaKey,_.button,null);var T=this._dispatchEvent(C,!0);w&&(T?w._post_click_activation_steps&&w._post_click_activation_steps(C):w._cancelled_activation_steps&&w._cancelled_activation_steps())}},_setEventHandler:function(w,C){this._handlers||(this._handlers=Object.create(null)),this._handlers[w]=C},_getEventHandler:function(w){return this._handlers&&this._handlers[w]||null}}}}),SS=pi({"external/npm/node_modules/domino/lib/LinkedList.js"(i,t){"use strict";var e=bn(),o=t.exports={valid:function(a){return e.assert(a,"list falsy"),e.assert(a._previousSibling,"previous falsy"),e.assert(a._nextSibling,"next falsy"),!0},insertBefore:function(a,s){e.assert(o.valid(a)&&o.valid(s));var _=a,w=a._previousSibling,C=s,T=s._previousSibling;_._previousSibling=T,w._nextSibling=C,T._nextSibling=_,C._previousSibling=w,e.assert(o.valid(a)&&o.valid(s))},replace:function(a,s){e.assert(o.valid(a)&&(s===null||o.valid(s))),s!==null&&o.insertBefore(s,a),o.remove(a),e.assert(o.valid(a)&&(s===null||o.valid(s)))},remove:function(a){e.assert(o.valid(a));var s=a._previousSibling;if(s!==a){var _=a._nextSibling;s._nextSibling=_,_._previousSibling=s,a._previousSibling=a._nextSibling=a,e.assert(o.valid(a))}}}}}),TS=pi({"external/npm/node_modules/domino/lib/NodeUtils.js"(i,t){"use strict";t.exports={serializeOne:fe,\u0275escapeMatchingClosingTag:R,\u0275escapeClosingCommentTag:Z,\u0275escapeProcessingInstructionContent:X};var e=bn(),o=e.NAMESPACE,a={STYLE:!0,SCRIPT:!0,XMP:!0,IFRAME:!0,NOEMBED:!0,NOFRAMES:!0,PLAINTEXT:!0},s={area:!0,base:!0,basefont:!0,bgsound:!0,br:!0,col:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},_={},w=/[&<>\u00A0]/g,C=/[&"<>\u00A0]/g;function T(ae){return w.test(ae)?ae.replace(w,ne=>{switch(ne){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case"\xA0":return"&nbsp;"}}):ae}function I(ae){return C.test(ae)?ae.replace(C,ne=>{switch(ne){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;";case"\xA0":return"&nbsp;"}}):ae}function P(ae){var ne=ae.namespaceURI;return ne?ne===o.XML?"xml:"+ae.localName:ne===o.XLINK?"xlink:"+ae.localName:ne===o.XMLNS?ae.localName==="xmlns"?"xmlns":"xmlns:"+ae.localName:ae.name:ae.localName}function R(ae,ne){let re="</"+ne;if(!ae.toLowerCase().includes(re))return ae;let de=[...ae],oe=ae.matchAll(new RegExp(re,"ig"));for(let Ve of oe)de[Ve.index]="&lt;";return de.join("")}var H=/--!?>/;function Z(ae){return H.test(ae)?ae.replace(/(--\!?)>/g,"$1&gt;"):ae}function X(ae){return ae.includes(">")?ae.replaceAll(">","&gt;"):ae}function fe(ae,ne){var re="";switch(ae.nodeType){case 1:var de=ae.namespaceURI,oe=de===o.HTML,Ve=oe||de===o.SVG||de===o.MATHML?ae.localName:ae.tagName;re+="<"+Ve;for(var tt=0,dt=ae._numattrs;tt<dt;tt++){var Je=ae._attr(tt);re+=" "+P(Je),Je.value!==void 0&&(re+='="'+I(Je.value)+'"')}if(re+=">",!(oe&&s[Ve])){var we=ae.serialize();a[Ve.toUpperCase()]&&(we=R(we,Ve)),oe&&_[Ve]&&we.charAt(0)===`
`&&(re+=`
`),re+=we,re+="</"+Ve+">"}break;case 3:case 4:var Ge;ne.nodeType===1&&ne.namespaceURI===o.HTML?Ge=ne.tagName:Ge="",a[Ge]||Ge==="NOSCRIPT"&&ne.ownerDocument._scripting_enabled?re+=ae.data:re+=T(ae.data);break;case 8:re+="<!--"+Z(ae.data)+"-->";break;case 7:let yt=X(ae.data);re+="<?"+ae.target+" "+yt+"?>";break;case 10:re+="<!DOCTYPE "+ae.name,re+=">";break;default:e.InvalidStateError()}return re}}}),Bo=pi({"external/npm/node_modules/domino/lib/Node.js"(i,t){"use strict";t.exports=_;var e=ES(),o=SS(),a=TS(),s=bn();function _(){e.call(this),this.parentNode=null,this._nextSibling=this._previousSibling=this,this._index=void 0}var w=_.ELEMENT_NODE=1,C=_.ATTRIBUTE_NODE=2,T=_.TEXT_NODE=3,I=_.CDATA_SECTION_NODE=4,P=_.ENTITY_REFERENCE_NODE=5,R=_.ENTITY_NODE=6,H=_.PROCESSING_INSTRUCTION_NODE=7,Z=_.COMMENT_NODE=8,X=_.DOCUMENT_NODE=9,fe=_.DOCUMENT_TYPE_NODE=10,ae=_.DOCUMENT_FRAGMENT_NODE=11,ne=_.NOTATION_NODE=12,re=_.DOCUMENT_POSITION_DISCONNECTED=1,de=_.DOCUMENT_POSITION_PRECEDING=2,oe=_.DOCUMENT_POSITION_FOLLOWING=4,Ve=_.DOCUMENT_POSITION_CONTAINS=8,tt=_.DOCUMENT_POSITION_CONTAINED_BY=16,dt=_.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;_.prototype=Object.create(e.prototype,{baseURI:{get:s.nyi},parentElement:{get:function(){return this.parentNode&&this.parentNode.nodeType===w?this.parentNode:null}},hasChildNodes:{value:s.shouldOverride},firstChild:{get:s.shouldOverride},lastChild:{get:s.shouldOverride},isConnected:{get:function(){let Je=this;for(;Je!=null;){if(Je.nodeType===_.DOCUMENT_NODE)return!0;Je=Je.parentNode,Je!=null&&Je.nodeType===_.DOCUMENT_FRAGMENT_NODE&&(Je=Je.host)}return!1}},previousSibling:{get:function(){var Je=this.parentNode;return!Je||this===Je.firstChild?null:this._previousSibling}},nextSibling:{get:function(){var Je=this.parentNode,we=this._nextSibling;return!Je||we===Je.firstChild?null:we}},textContent:{get:function(){return null},set:function(Je){}},innerText:{get:function(){return null},set:function(Je){}},_countChildrenOfType:{value:function(Je){for(var we=0,Ge=this.firstChild;Ge!==null;Ge=Ge.nextSibling)Ge.nodeType===Je&&we++;return we}},_ensureInsertValid:{value:function(we,Ge,yt){var le=this,te,V;if(!we.nodeType)throw new TypeError("not a node");switch(le.nodeType){case X:case ae:case w:break;default:s.HierarchyRequestError()}switch(we.isAncestor(le)&&s.HierarchyRequestError(),(Ge!==null||!yt)&&Ge.parentNode!==le&&s.NotFoundError(),we.nodeType){case ae:case fe:case w:case T:case H:case Z:break;default:s.HierarchyRequestError()}if(le.nodeType===X)switch(we.nodeType){case T:s.HierarchyRequestError();break;case ae:switch(we._countChildrenOfType(T)>0&&s.HierarchyRequestError(),we._countChildrenOfType(w)){case 0:break;case 1:if(Ge!==null)for(yt&&Ge.nodeType===fe&&s.HierarchyRequestError(),V=Ge.nextSibling;V!==null;V=V.nextSibling)V.nodeType===fe&&s.HierarchyRequestError();te=le._countChildrenOfType(w),yt?te>0&&s.HierarchyRequestError():(te>1||te===1&&Ge.nodeType!==w)&&s.HierarchyRequestError();break;default:s.HierarchyRequestError()}break;case w:if(Ge!==null)for(yt&&Ge.nodeType===fe&&s.HierarchyRequestError(),V=Ge.nextSibling;V!==null;V=V.nextSibling)V.nodeType===fe&&s.HierarchyRequestError();te=le._countChildrenOfType(w),yt?te>0&&s.HierarchyRequestError():(te>1||te===1&&Ge.nodeType!==w)&&s.HierarchyRequestError();break;case fe:if(Ge===null)le._countChildrenOfType(w)&&s.HierarchyRequestError();else for(V=le.firstChild;V!==null&&V!==Ge;V=V.nextSibling)V.nodeType===w&&s.HierarchyRequestError();te=le._countChildrenOfType(fe),yt?te>0&&s.HierarchyRequestError():(te>1||te===1&&Ge.nodeType!==fe)&&s.HierarchyRequestError();break}else we.nodeType===fe&&s.HierarchyRequestError()}},insertBefore:{value:function(we,Ge){var yt=this;yt._ensureInsertValid(we,Ge,!0);var le=Ge;return le===we&&(le=we.nextSibling),yt.doc.adoptNode(we),we._insertOrReplace(yt,le,!1),we}},appendChild:{value:function(Je){return this.insertBefore(Je,null)}},_appendChild:{value:function(Je){Je._insertOrReplace(this,null,!1)}},removeChild:{value:function(we){var Ge=this;if(!we.nodeType)throw new TypeError("not a node");return we.parentNode!==Ge&&s.NotFoundError(),we.remove(),we}},replaceChild:{value:function(we,Ge){var yt=this;return yt._ensureInsertValid(we,Ge,!1),we.doc!==yt.doc&&yt.doc.adoptNode(we),we._insertOrReplace(yt,Ge,!0),Ge}},contains:{value:function(we){return we===null?!1:this===we?!0:(this.compareDocumentPosition(we)&tt)!==0}},compareDocumentPosition:{value:function(we){if(this===we)return 0;if(this.doc!==we.doc||this.rooted!==we.rooted)return re+dt;for(var Ge=[],yt=[],le=this;le!==null;le=le.parentNode)Ge.push(le);for(le=we;le!==null;le=le.parentNode)yt.push(le);if(Ge.reverse(),yt.reverse(),Ge[0]!==yt[0])return re+dt;le=Math.min(Ge.length,yt.length);for(var te=1;te<le;te++)if(Ge[te]!==yt[te])return Ge[te].index<yt[te].index?oe:de;return Ge.length<yt.length?oe+tt:de+Ve}},isSameNode:{value:function(we){return this===we}},isEqualNode:{value:function(we){if(!we||we.nodeType!==this.nodeType||!this.isEqual(we))return!1;for(var Ge=this.firstChild,yt=we.firstChild;Ge&&yt;Ge=Ge.nextSibling,yt=yt.nextSibling)if(!Ge.isEqualNode(yt))return!1;return Ge===null&&yt===null}},cloneNode:{value:function(Je){var we=this.clone();if(Je)for(var Ge=this.firstChild;Ge!==null;Ge=Ge.nextSibling)we._appendChild(Ge.cloneNode(!0));return we}},lookupPrefix:{value:function(we){var Ge;if(we===""||we===null||we===void 0)return null;switch(this.nodeType){case w:return this._lookupNamespacePrefix(we,this);case X:return Ge=this.documentElement,Ge?Ge.lookupPrefix(we):null;case R:case ne:case ae:case fe:return null;case C:return Ge=this.ownerElement,Ge?Ge.lookupPrefix(we):null;default:return Ge=this.parentElement,Ge?Ge.lookupPrefix(we):null}}},lookupNamespaceURI:{value:function(we){(we===""||we===void 0)&&(we=null);var Ge;switch(this.nodeType){case w:return s.shouldOverride();case X:return Ge=this.documentElement,Ge?Ge.lookupNamespaceURI(we):null;case R:case ne:case fe:case ae:return null;case C:return Ge=this.ownerElement,Ge?Ge.lookupNamespaceURI(we):null;default:return Ge=this.parentElement,Ge?Ge.lookupNamespaceURI(we):null}}},isDefaultNamespace:{value:function(we){(we===""||we===void 0)&&(we=null);var Ge=this.lookupNamespaceURI(null);return Ge===we}},index:{get:function(){var Je=this.parentNode;if(this===Je.firstChild)return 0;var we=Je.childNodes;if(this._index===void 0||we[this._index]!==this){for(var Ge=0;Ge<we.length;Ge++)we[Ge]._index=Ge;s.assert(we[this._index]===this)}return this._index}},isAncestor:{value:function(Je){if(this.doc!==Je.doc||this.rooted!==Je.rooted)return!1;for(var we=Je;we;we=we.parentNode)if(we===this)return!0;return!1}},ensureSameDoc:{value:function(Je){Je.ownerDocument===null?Je.ownerDocument=this.doc:Je.ownerDocument!==this.doc&&s.WrongDocumentError()}},removeChildren:{value:s.shouldOverride},_insertOrReplace:{value:function(we,Ge,yt){var le=this,te,V;if(le.nodeType===ae&&le.rooted&&s.HierarchyRequestError(),we._childNodes&&(te=Ge===null?we._childNodes.length:Ge.index,le.parentNode===we)){var me=le.index;me<te&&te--}yt&&(Ge.rooted&&Ge.doc.mutateRemove(Ge),Ge.parentNode=null);var Ue=Ge;Ue===null&&(Ue=we.firstChild);var ot=le.rooted&&we.rooted;if(le.nodeType===ae){for(var Rt=[0,yt?1:0],Ut,Fi=le.firstChild;Fi!==null;Fi=Ut)Ut=Fi.nextSibling,Rt.push(Fi),Fi.parentNode=we;var Pe=Rt.length;if(yt?o.replace(Ue,Pe>2?Rt[2]:null):Pe>2&&Ue!==null&&o.insertBefore(Rt[2],Ue),we._childNodes)for(Rt[0]=Ge===null?we._childNodes.length:Ge._index,we._childNodes.splice.apply(we._childNodes,Rt),V=2;V<Pe;V++)Rt[V]._index=Rt[0]+(V-2);else we._firstChild===Ge&&(Pe>2?we._firstChild=Rt[2]:yt&&(we._firstChild=null));if(le._childNodes?le._childNodes.length=0:le._firstChild=null,we.rooted)for(we.modify(),V=2;V<Pe;V++)we.doc.mutateInsert(Rt[V])}else{if(Ge===le)return;ot?le._remove():le.parentNode&&le.remove(),le.parentNode=we,yt?(o.replace(Ue,le),we._childNodes?(le._index=te,we._childNodes[te]=le):we._firstChild===Ge&&(we._firstChild=le)):(Ue!==null&&o.insertBefore(le,Ue),we._childNodes?(le._index=te,we._childNodes.splice(te,0,le)):we._firstChild===Ge&&(we._firstChild=le)),ot?(we.modify(),we.doc.mutateMove(le)):we.rooted&&(we.modify(),we.doc.mutateInsert(le))}}},lastModTime:{get:function(){return this._lastModTime||(this._lastModTime=this.doc.modclock),this._lastModTime}},modify:{value:function(){if(this.doc.modclock)for(var Je=++this.doc.modclock,we=this;we;we=we.parentElement)we._lastModTime&&(we._lastModTime=Je)}},doc:{get:function(){return this.ownerDocument||this}},rooted:{get:function(){return!!this._nid}},normalize:{value:function(){for(var Je,we=this.firstChild;we!==null;we=Je)if(Je=we.nextSibling,we.normalize&&we.normalize(),we.nodeType===_.TEXT_NODE){if(we.nodeValue===""){this.removeChild(we);continue}var Ge=we.previousSibling;Ge!==null&&Ge.nodeType===_.TEXT_NODE&&(Ge.appendData(we.nodeValue),this.removeChild(we))}}},serialize:{value:function(){if(this._innerHTML)return this._innerHTML;for(var Je="",we=this.firstChild;we!==null;we=we.nextSibling)Je+=a.serializeOne(we,this);return Je}},outerHTML:{get:function(){return a.serializeOne(this,{nodeType:0})},set:s.nyi},ELEMENT_NODE:{value:w},ATTRIBUTE_NODE:{value:C},TEXT_NODE:{value:T},CDATA_SECTION_NODE:{value:I},ENTITY_REFERENCE_NODE:{value:P},ENTITY_NODE:{value:R},PROCESSING_INSTRUCTION_NODE:{value:H},COMMENT_NODE:{value:Z},DOCUMENT_NODE:{value:X},DOCUMENT_TYPE_NODE:{value:fe},DOCUMENT_FRAGMENT_NODE:{value:ae},NOTATION_NODE:{value:ne},DOCUMENT_POSITION_DISCONNECTED:{value:re},DOCUMENT_POSITION_PRECEDING:{value:de},DOCUMENT_POSITION_FOLLOWING:{value:oe},DOCUMENT_POSITION_CONTAINS:{value:Ve},DOCUMENT_POSITION_CONTAINED_BY:{value:tt},DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:{value:dt}})}}),JD=pi({"external/npm/node_modules/domino/lib/NodeList.es6.js"(i,t){"use strict";t.exports=class extends Array{constructor(o){if(super(o&&o.length||0),o)for(var a in o)this[a]=o[a]}item(o){return this[o]||null}}}}),eR=pi({"external/npm/node_modules/domino/lib/NodeList.es5.js"(i,t){"use strict";function e(a){return this[a]||null}function o(a){return a||(a=[]),a.item=e,a}t.exports=o}}),Ph=pi({"external/npm/node_modules/domino/lib/NodeList.js"(i,t){"use strict";var e;try{e=JD()}catch{e=eR()}t.exports=e}}),uy=pi({"external/npm/node_modules/domino/lib/ContainerNode.js"(i,t){"use strict";t.exports=a;var e=Bo(),o=Ph();function a(){e.call(this),this._firstChild=this._childNodes=null}a.prototype=Object.create(e.prototype,{hasChildNodes:{value:function(){return this._childNodes?this._childNodes.length>0:this._firstChild!==null}},childNodes:{get:function(){return this._ensureChildNodes(),this._childNodes}},firstChild:{get:function(){return this._childNodes?this._childNodes.length===0?null:this._childNodes[0]:this._firstChild}},lastChild:{get:function(){var s=this._childNodes,_;return s?s.length===0?null:s[s.length-1]:(_=this._firstChild,_===null?null:_._previousSibling)}},_ensureChildNodes:{value:function(){if(!this._childNodes){var s=this._firstChild,_=s,w=this._childNodes=new o;if(s)do w.push(_),_=_._nextSibling;while(_!==s);this._firstChild=null}}},removeChildren:{value:function(){for(var _=this.rooted?this.ownerDocument:null,w=this.firstChild,C;w!==null;)C=w,w=C.nextSibling,_&&_.mutateRemove(C),C.parentNode=null;this._childNodes?this._childNodes.length=0:this._firstChild=null,this.modify()}}})}}),dy=pi({"external/npm/node_modules/domino/lib/xmlnames.js"(i){"use strict";i.isValidName=X,i.isValidQName=fe;var t=/^[_:A-Za-z][-.:\w]+$/,e=/^([_A-Za-z][-.\w]+|[_A-Za-z][-.\w]+:[_A-Za-z][-.\w]+)$/,o="_A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",a="-._A-Za-z0-9\xB7\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0300-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",s="["+o+"]["+a+"]*",_=o+":",w=a+":",C=new RegExp("^["+_+"]["+w+"]*$"),T=new RegExp("^("+s+"|"+s+":"+s+")$"),I=/[\uD800-\uDB7F\uDC00-\uDFFF]/,P=/[\uD800-\uDB7F\uDC00-\uDFFF]/g,R=/[\uD800-\uDB7F][\uDC00-\uDFFF]/g;o+="\uD800-\u{EFC00}-\uDFFF",a+="\uD800-\u{EFC00}-\uDFFF",s="["+o+"]["+a+"]*",_=o+":",w=a+":";var H=new RegExp("^["+_+"]["+w+"]*$"),Z=new RegExp("^("+s+"|"+s+":"+s+")$");function X(ae){if(t.test(ae)||C.test(ae))return!0;if(!I.test(ae)||!H.test(ae))return!1;var ne=ae.match(P),re=ae.match(R);return re!==null&&2*re.length===ne.length}function fe(ae){if(e.test(ae)||T.test(ae))return!0;if(!I.test(ae)||!Z.test(ae))return!1;var ne=ae.match(P),re=ae.match(R);return re!==null&&2*re.length===ne.length}}}),MS=pi({"external/npm/node_modules/domino/lib/attributes.js"(i){"use strict";var t=bn();i.property=function(o){if(Array.isArray(o.type)){var a=Object.create(null);o.type.forEach(function(w){a[w.value||w]=w.alias||w});var s=o.missing;s===void 0&&(s=null);var _=o.invalid;return _===void 0&&(_=s),{get:function(){var w=this._getattr(o.name);return w===null?s:(w=a[w.toLowerCase()],w!==void 0?w:_!==null?_:w)},set:function(w){this._setattr(o.name,w)}}}else{if(o.type===Boolean)return{get:function(){return this.hasAttribute(o.name)},set:function(w){w?this._setattr(o.name,""):this.removeAttribute(o.name)}};if(o.type===Number||o.type==="long"||o.type==="unsigned long"||o.type==="limited unsigned long with fallback")return e(o);if(!o.type||o.type===String)return{get:function(){return this._getattr(o.name)||""},set:function(w){o.treatNullAsEmptyString&&w===null&&(w=""),this._setattr(o.name,w)}};if(typeof o.type=="function")return o.type(o.name,o)}throw new Error("Invalid attribute definition")};function e(o){var a;typeof o.default=="function"?a=o.default:typeof o.default=="number"?a=function(){return o.default}:a=function(){t.assert(!1,typeof o.default)};var s=o.type==="unsigned long",_=o.type==="long",w=o.type==="limited unsigned long with fallback",C=o.min,T=o.max,I=o.setmin;return C===void 0&&(s&&(C=0),_&&(C=-2147483648),w&&(C=1)),T===void 0&&(s||_||w)&&(T=2147483647),{get:function(){var P=this._getattr(o.name),R=o.float?parseFloat(P):parseInt(P,10);if(P===null||!isFinite(R)||C!==void 0&&R<C||T!==void 0&&R>T)return a.call(this);if(s||_||w){if(!/^[ \t\n\f\r]*[-+]?[0-9]/.test(P))return a.call(this);R=R|0}return R},set:function(P){o.float||(P=Math.floor(P)),I!==void 0&&P<I&&t.IndexSizeError(o.name+" set to "+P),s?P=P<0||P>2147483647?a.call(this):P|0:w?P=P<1||P>2147483647?a.call(this):P|0:_&&(P=P<-2147483648||P>2147483647?a.call(this):P|0),this._setattr(o.name,String(P))}}}i.registerChangeHandler=function(o,a,s){var _=o.prototype;Object.prototype.hasOwnProperty.call(_,"_attributeChangeHandlers")||(_._attributeChangeHandlers=Object.create(_._attributeChangeHandlers||null)),_._attributeChangeHandlers[a]=s}}}),tR=pi({"external/npm/node_modules/domino/lib/FilteredElementList.js"(i,t){"use strict";t.exports=o;var e=Bo();function o(a,s){this.root=a,this.filter=s,this.lastModTime=a.lastModTime,this.done=!1,this.cache=[],this.traverse()}o.prototype=Object.create(Object.prototype,{length:{get:function(){return this.checkcache(),this.done||this.traverse(),this.cache.length}},item:{value:function(a){return this.checkcache(),!this.done&&a>=this.cache.length&&this.traverse(),this.cache[a]}},checkcache:{value:function(){if(this.lastModTime!==this.root.lastModTime){for(var a=this.cache.length-1;a>=0;a--)this[a]=void 0;this.cache.length=0,this.done=!1,this.lastModTime=this.root.lastModTime}}},traverse:{value:function(a){a!==void 0&&a++;for(var s;(s=this.next())!==null;)if(this[this.cache.length]=s,this.cache.push(s),a&&this.cache.length===a)return;this.done=!0}},next:{value:function(){var a=this.cache.length===0?this.root:this.cache[this.cache.length-1],s;for(a.nodeType===e.DOCUMENT_NODE?s=a.documentElement:s=a.nextElement(this.root);s;){if(this.filter(s))return s;s=s.nextElement(this.root)}return null}}})}}),IS=pi({"external/npm/node_modules/domino/lib/DOMTokenList.js"(i,t){"use strict";var e=bn();t.exports=o;function o(C,T){this._getString=C,this._setString=T,this._length=0,this._lastStringValue="",this._update()}Object.defineProperties(o.prototype,{length:{get:function(){return this._length}},item:{value:function(C){var T=w(this);return C<0||C>=T.length?null:T[C]}},contains:{value:function(C){C=String(C);var T=w(this);return T.indexOf(C)>-1}},add:{value:function(){for(var C=w(this),T=0,I=arguments.length;T<I;T++){var P=s(arguments[T]);C.indexOf(P)<0&&C.push(P)}this._update(C)}},remove:{value:function(){for(var C=w(this),T=0,I=arguments.length;T<I;T++){var P=s(arguments[T]),R=C.indexOf(P);R>-1&&C.splice(R,1)}this._update(C)}},toggle:{value:function(T,I){return T=s(T),this.contains(T)?I===void 0||I===!1?(this.remove(T),!1):!0:I===void 0||I===!0?(this.add(T),!0):!1}},replace:{value:function(T,I){String(I)===""&&e.SyntaxError(),T=s(T),I=s(I);var P=w(this),R=P.indexOf(T);if(R<0)return!1;var H=P.indexOf(I);return H<0?P[R]=I:R<H?(P[R]=I,P.splice(H,1)):P.splice(R,1),this._update(P),!0}},toString:{value:function(){return this._getString()}},value:{get:function(){return this._getString()},set:function(C){this._setString(C),this._update()}},_update:{value:function(C){C?(a(this,C),this._setString(C.join(" ").trim())):a(this,w(this)),this._lastStringValue=this._getString()}}});function a(C,T){var I=C._length,P;for(C._length=T.length,P=0;P<T.length;P++)C[P]=T[P];for(;P<I;P++)C[P]=void 0}function s(C){return C=String(C),C===""&&e.SyntaxError(),/[ \t\r\n\f]/.test(C)&&e.InvalidCharacterError(),C}function _(C){for(var T=C._length,I=Array(T),P=0;P<T;P++)I[P]=C[P];return I}function w(C){var T=C._getString();if(T===C._lastStringValue)return _(C);var I=T.replace(/(^[ \t\r\n\f]+)|([ \t\r\n\f]+$)/g,"");if(I==="")return[];var P=Object.create(null);return I.split(/[ \t\r\n\f]+/g).filter(function(R){var H="$"+R;return P[H]?!1:(P[H]=!0,!0)})}}}),hy=pi({"external/npm/node_modules/domino/lib/select.js"(i,t){"use strict";var e=Object.create(null,{location:{get:function(){throw new Error("window.location is not supported.")}}}),o=function(le,te){return le.compareDocumentPosition(te)},a=function(le,te){return o(le,te)&2?1:-1},s=function(le){for(;(le=le.nextSibling)&&le.nodeType!==1;);return le},_=function(le){for(;(le=le.previousSibling)&&le.nodeType!==1;);return le},w=function(le){if(le=le.firstChild)for(;le.nodeType!==1&&(le=le.nextSibling););return le},C=function(le){if(le=le.lastChild)for(;le.nodeType!==1&&(le=le.previousSibling););return le},T=function(le){if(!le.parentNode)return!1;var te=le.parentNode.nodeType;return te===1||te===9},I=function(le){if(!le)return le;var te=le[0];return te==='"'||te==="'"?(le[le.length-1]===te?le=le.slice(1,-1):le=le.slice(1),le.replace(oe.str_escape,function(V){var me=/^\\(?:([0-9A-Fa-f]+)|([\r\n\f]+))/.exec(V);if(!me)return V.slice(1);if(me[2])return"";var Ue=parseInt(me[1],16);return String.fromCodePoint?String.fromCodePoint(Ue):String.fromCharCode(Ue)})):oe.ident.test(le)?P(le):le},P=function(le){return le.replace(oe.escape,function(te){var V=/^\\([0-9A-Fa-f]+)/.exec(te);if(!V)return te[1];var me=parseInt(V[1],16);return String.fromCodePoint?String.fromCodePoint(me):String.fromCharCode(me)})},R=function(){return Array.prototype.indexOf?Array.prototype.indexOf:function(le,te){for(var V=this.length;V--;)if(this[V]===te)return V;return-1}}(),H=function(le,te){var V=oe.inside.source.replace(/</g,le).replace(/>/g,te);return new RegExp(V)},Z=function(le,te,V){return le=le.source,le=le.replace(te,V.source||V),new RegExp(le)},X=function(le,te){return le.replace(/^(?:\w+:\/\/|\/+)/,"").replace(/(?:\/+|\/*#.*?)$/,"").split("/",te).join("/")},fe=function(le,te){var V=le.replace(/\s+/g,""),me;return V==="even"?V="2n+0":V==="odd"?V="2n+1":V.indexOf("n")===-1&&(V="0n"+V),me=/^([+-])?(\d+)?n([+-])?(\d+)?$/.exec(V),{group:me[1]==="-"?-(me[2]||1):+(me[2]||1),offset:me[4]?me[3]==="-"?-me[4]:+me[4]:0}},ae=function(le,te,V){var me=fe(le),Ue=me.group,ot=me.offset,Rt=V?C:w,Ut=V?_:s;return function(Fi){if(T(Fi))for(var Pe=Rt(Fi.parentNode),Ne=0;Pe;){if(te(Pe,Fi)&&Ne++,Pe===Fi)return Ne-=ot,Ue&&Ne?Ne%Ue===0&&Ne<0==Ue<0:!Ne;Pe=Ut(Pe)}}},ne={"*":function(){return function(){return!0}}(),type:function(le){return le=le.toLowerCase(),function(te){return te.nodeName.toLowerCase()===le}},attr:function(le,te,V,me){return te=re[te],function(Ue){var ot;switch(le){case"for":ot=Ue.htmlFor;break;case"class":ot=Ue.className,ot===""&&Ue.getAttribute("class")==null&&(ot=null);break;case"href":case"src":ot=Ue.getAttribute(le,2);break;case"title":ot=Ue.getAttribute("title")||null;break;case"id":case"lang":case"dir":case"accessKey":case"hidden":case"tabIndex":case"style":if(Ue.getAttribute){ot=Ue.getAttribute(le);break}default:if(Ue.hasAttribute&&!Ue.hasAttribute(le))break;ot=Ue[le]!=null?Ue[le]:Ue.getAttribute&&Ue.getAttribute(le);break}if(ot!=null)return ot=ot+"",me&&(ot=ot.toLowerCase(),V=V.toLowerCase()),te(ot,V)}},":first-child":function(le){return!_(le)&&T(le)},":last-child":function(le){return!s(le)&&T(le)},":only-child":function(le){return!_(le)&&!s(le)&&T(le)},":nth-child":function(le,te){return ae(le,function(){return!0},te)},":nth-last-child":function(le){return ne[":nth-child"](le,!0)},":root":function(le){return le.ownerDocument.documentElement===le},":empty":function(le){return!le.firstChild},":not":function(le){var te=Ge(le);return function(V){return!te(V)}},":first-of-type":function(le){if(T(le)){for(var te=le.nodeName;le=_(le);)if(le.nodeName===te)return;return!0}},":last-of-type":function(le){if(T(le)){for(var te=le.nodeName;le=s(le);)if(le.nodeName===te)return;return!0}},":only-of-type":function(le){return ne[":first-of-type"](le)&&ne[":last-of-type"](le)},":nth-of-type":function(le,te){return ae(le,function(V,me){return V.nodeName===me.nodeName},te)},":nth-last-of-type":function(le){return ne[":nth-of-type"](le,!0)},":checked":function(le){return!!(le.checked||le.selected)},":indeterminate":function(le){return!ne[":checked"](le)},":enabled":function(le){return!le.disabled&&le.type!=="hidden"},":disabled":function(le){return!!le.disabled},":target":function(le){return le.id===e.location.hash.substring(1)},":focus":function(le){return le===le.ownerDocument.activeElement},":is":function(le){return Ge(le)},":matches":function(le){return ne[":is"](le)},":nth-match":function(le,te){var V=le.split(/\s*,\s*/),me=V.shift(),Ue=Ge(V.join(","));return ae(me,Ue,te)},":nth-last-match":function(le){return ne[":nth-match"](le,!0)},":links-here":function(le){return le+""==e.location+""},":lang":function(le){return function(te){for(;te;){if(te.lang)return te.lang.indexOf(le)===0;te=te.parentNode}}},":dir":function(le){return function(te){for(;te;){if(te.dir)return te.dir===le;te=te.parentNode}}},":scope":function(le,te){var V=te||le.ownerDocument;return V.nodeType===9?le===V.documentElement:le===V},":any-link":function(le){return typeof le.href=="string"},":local-link":function(le){if(le.nodeName)return le.href&&le.host===e.location.host;var te=+le+1;return function(V){if(V.href){var me=e.location+"",Ue=V+"";return X(me,te)===X(Ue,te)}}},":default":function(le){return!!le.defaultSelected},":valid":function(le){return le.willValidate||le.validity&&le.validity.valid},":invalid":function(le){return!ne[":valid"](le)},":in-range":function(le){return le.value>le.min&&le.value<=le.max},":out-of-range":function(le){return!ne[":in-range"](le)},":required":function(le){return!!le.required},":optional":function(le){return!le.required},":read-only":function(le){if(le.readOnly)return!0;var te=le.getAttribute("contenteditable"),V=le.contentEditable,me=le.nodeName.toLowerCase();return me=me!=="input"&&me!=="textarea",(me||le.disabled)&&te==null&&V!=="true"},":read-write":function(le){return!ne[":read-only"](le)},":hover":function(){throw new Error(":hover is not supported.")},":active":function(){throw new Error(":active is not supported.")},":link":function(){throw new Error(":link is not supported.")},":visited":function(){throw new Error(":visited is not supported.")},":column":function(){throw new Error(":column is not supported.")},":nth-column":function(){throw new Error(":nth-column is not supported.")},":nth-last-column":function(){throw new Error(":nth-last-column is not supported.")},":current":function(){throw new Error(":current is not supported.")},":past":function(){throw new Error(":past is not supported.")},":future":function(){throw new Error(":future is not supported.")},":contains":function(le){return function(te){var V=te.innerText||te.textContent||te.value||"";return V.indexOf(le)!==-1}},":has":function(le){return function(te){return yt(le,te).length>0}}},re={"-":function(){return!0},"=":function(le,te){return le===te},"*=":function(le,te){return le.indexOf(te)!==-1},"~=":function(le,te){var V,me,Ue,ot;for(me=0;;me=V+1){if(V=le.indexOf(te,me),V===-1)return!1;if(Ue=le[V-1],ot=le[V+te.length],(!Ue||Ue===" ")&&(!ot||ot===" "))return!0}},"|=":function(le,te){var V=le.indexOf(te),me;if(V===0)return me=le[V+te.length],me==="-"||!me},"^=":function(le,te){return le.indexOf(te)===0},"$=":function(le,te){var V=le.lastIndexOf(te);return V!==-1&&V+te.length===le.length},"!=":function(le,te){return le!==te}},de={" ":function(le){return function(te){for(;te=te.parentNode;)if(le(te))return te}},">":function(le){return function(te){if(te=te.parentNode)return le(te)&&te}},"+":function(le){return function(te){if(te=_(te))return le(te)&&te}},"~":function(le){return function(te){for(;te=_(te);)if(le(te))return te}},noop:function(le){return function(te){return le(te)&&te}},ref:function(le,te){var V;function me(Ue){for(var ot=Ue.ownerDocument,Rt=ot.getElementsByTagName("*"),Ut=Rt.length;Ut--;)if(V=Rt[Ut],me.test(Ue))return V=null,!0;V=null}return me.combinator=function(Ue){if(!(!V||!V.getAttribute)){var ot=V.getAttribute(te)||"";if(ot[0]==="#"&&(ot=ot.substring(1)),ot===Ue.id&&le(V))return V}},me}},oe={escape:/\\(?:[^0-9A-Fa-f\r\n]|[0-9A-Fa-f]{1,6}[\r\n\t ]?)/g,str_escape:/(escape)|\\(\n|\r\n?|\f)/g,nonascii:/[\u00A0-\uFFFF]/,cssid:/(?:(?!-?[0-9])(?:escape|nonascii|[-_a-zA-Z0-9])+)/,qname:/^ *(cssid|\*)/,simple:/^(?:([.#]cssid)|pseudo|attr)/,ref:/^ *\/(cssid)\/ */,combinator:/^(?: +([^ \w*.#\\]) +|( )+|([^ \w*.#\\]))(?! *$)/,attr:/^\[(cssid)(?:([^\w]?=)(inside))?\]/,pseudo:/^(:cssid)(?:\((inside)\))?/,inside:/(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|<[^"'>]*>|\\["'>]|[^"'>])*/,ident:/^(cssid)$/};oe.cssid=Z(oe.cssid,"nonascii",oe.nonascii),oe.cssid=Z(oe.cssid,"escape",oe.escape),oe.qname=Z(oe.qname,"cssid",oe.cssid),oe.simple=Z(oe.simple,"cssid",oe.cssid),oe.ref=Z(oe.ref,"cssid",oe.cssid),oe.attr=Z(oe.attr,"cssid",oe.cssid),oe.pseudo=Z(oe.pseudo,"cssid",oe.cssid),oe.inside=Z(oe.inside,`[^"'>]*`,oe.inside),oe.attr=Z(oe.attr,"inside",H("\\[","\\]")),oe.pseudo=Z(oe.pseudo,"inside",H("\\(","\\)")),oe.simple=Z(oe.simple,"pseudo",oe.pseudo),oe.simple=Z(oe.simple,"attr",oe.attr),oe.ident=Z(oe.ident,"cssid",oe.cssid),oe.str_escape=Z(oe.str_escape,"escape",oe.escape);var Ve=function(le){for(var te=le.replace(/^\s+|\s+$/g,""),V,me=[],Ue=[],ot,Rt,Ut,Fi,Pe;te;){if(Ut=oe.qname.exec(te))te=te.substring(Ut[0].length),Rt=P(Ut[1]),Ue.push(tt(Rt,!0));else if(Ut=oe.simple.exec(te))te=te.substring(Ut[0].length),Rt="*",Ue.push(tt(Rt,!0)),Ue.push(tt(Ut));else throw new SyntaxError("Invalid selector.");for(;Ut=oe.simple.exec(te);)te=te.substring(Ut[0].length),Ue.push(tt(Ut));if(te[0]==="!"&&(te=te.substring(1),ot=we(),ot.qname=Rt,Ue.push(ot.simple)),Ut=oe.ref.exec(te)){te=te.substring(Ut[0].length),Pe=de.ref(dt(Ue),P(Ut[1])),me.push(Pe.combinator),Ue=[];continue}if(Ut=oe.combinator.exec(te)){if(te=te.substring(Ut[0].length),Fi=Ut[1]||Ut[2]||Ut[3],Fi===","){me.push(de.noop(dt(Ue)));break}}else Fi="noop";if(!de[Fi])throw new SyntaxError("Bad combinator.");me.push(de[Fi](dt(Ue))),Ue=[]}return V=Je(me),V.qname=Rt,V.sel=te,ot&&(ot.lname=V.qname,ot.test=V,ot.qname=ot.qname,ot.sel=V.sel,V=ot),Pe&&(Pe.test=V,Pe.qname=V.qname,Pe.sel=V.sel,V=Pe),V},tt=function(le,te){if(te)return le==="*"?ne["*"]:ne.type(le);if(le[1])return le[1][0]==="."?ne.attr("class","~=",P(le[1].substring(1)),!1):ne.attr("id","=",P(le[1].substring(1)),!1);if(le[2])return le[3]?ne[P(le[2])](I(le[3])):ne[P(le[2])];if(le[4]){var V=le[6],me=/["'\s]\s*I$/i.test(V);return me&&(V=V.replace(/\s*I$/i,"")),ne.attr(P(le[4]),le[5]||"-",I(V),me)}throw new SyntaxError("Unknown Selector.")},dt=function(le){var te=le.length,V;return te<2?le[0]:function(me){if(me){for(V=0;V<te;V++)if(!le[V](me))return;return!0}}},Je=function(le){return le.length<2?function(te){return!!le[0](te)}:function(te){for(var V=le.length;V--;)if(!(te=le[V](te)))return;return!0}},we=function(){var le;function te(V){for(var me=V.ownerDocument,Ue=me.getElementsByTagName(te.lname),ot=Ue.length;ot--;)if(te.test(Ue[ot])&&le===V)return le=null,!0;le=null}return te.simple=function(V){return le=V,!0},te},Ge=function(le){for(var te=Ve(le),V=[te];te.sel;)te=Ve(te.sel),V.push(te);return V.length<2?te:function(me){for(var Ue=V.length,ot=0;ot<Ue;ot++)if(V[ot](me))return!0}},yt=function(le,te){for(var V=[],me=Ve(le),Ue=te.getElementsByTagName(me.qname),ot=0,Rt;Rt=Ue[ot++];)me(Rt)&&V.push(Rt);if(me.sel){for(;me.sel;)for(me=Ve(me.sel),Ue=te.getElementsByTagName(me.qname),ot=0;Rt=Ue[ot++];)me(Rt)&&R.call(V,Rt)===-1&&V.push(Rt);V.sort(a)}return V};t.exports=i=function(le,te){var V,me;if(te.nodeType!==11&&le.indexOf(" ")===-1){if(le[0]==="#"&&te.rooted&&/^#[A-Z_][-A-Z0-9_]*$/i.test(le)&&te.doc._hasMultipleElementsWithId&&(V=le.substring(1),!te.doc._hasMultipleElementsWithId(V)))return me=te.doc.getElementById(V),me?[me]:[];if(le[0]==="."&&/^\.\w+$/.test(le))return te.getElementsByClassName(le.substring(1));if(/^\w+$/.test(le))return te.getElementsByTagName(le)}return yt(le,te)},i.selectors=ne,i.operators=re,i.combinators=de,i.matches=function(le,te){var V={sel:te};do if(V=Ve(V.sel),V(le))return!0;while(V.sel);return!1}}}),py=pi({"external/npm/node_modules/domino/lib/ChildNode.js"(i,t){"use strict";var e=Bo(),o=SS(),a=function(_,w){for(var C=_.createDocumentFragment(),T=0;T<w.length;T++){var I=w[T],P=I instanceof e;C.appendChild(P?I:_.createTextNode(String(I)))}return C},s={after:{value:function(){var w=Array.prototype.slice.call(arguments),C=this.parentNode,T=this.nextSibling;if(C!==null){for(;T&&w.some(function(P){return P===T});)T=T.nextSibling;var I=a(this.doc,w);C.insertBefore(I,T)}}},before:{value:function(){var w=Array.prototype.slice.call(arguments),C=this.parentNode,T=this.previousSibling;if(C!==null){for(;T&&w.some(function(R){return R===T});)T=T.previousSibling;var I=a(this.doc,w),P=T?T.nextSibling:C.firstChild;C.insertBefore(I,P)}}},remove:{value:function(){this.parentNode!==null&&(this.doc&&(this.doc._preremoveNodeIterators(this),this.rooted&&this.doc.mutateRemove(this)),this._remove(),this.parentNode=null)}},_remove:{value:function(){var w=this.parentNode;w!==null&&(w._childNodes?w._childNodes.splice(this.index,1):w._firstChild===this&&(this._nextSibling===this?w._firstChild=null:w._firstChild=this._nextSibling),o.remove(this),w.modify())}},replaceWith:{value:function(){var w=Array.prototype.slice.call(arguments),C=this.parentNode,T=this.nextSibling;if(C!==null){for(;T&&w.some(function(P){return P===T});)T=T.nextSibling;var I=a(this.doc,w);this.parentNode===C?C.replaceChild(I,this):C.insertBefore(I,T)}}}};t.exports=s}}),PS=pi({"external/npm/node_modules/domino/lib/NonDocumentTypeChildNode.js"(i,t){"use strict";var e=Bo(),o={nextElementSibling:{get:function(){if(this.parentNode){for(var a=this.nextSibling;a!==null;a=a.nextSibling)if(a.nodeType===e.ELEMENT_NODE)return a}return null}},previousElementSibling:{get:function(){if(this.parentNode){for(var a=this.previousSibling;a!==null;a=a.previousSibling)if(a.nodeType===e.ELEMENT_NODE)return a}return null}}};t.exports=o}}),kS=pi({"external/npm/node_modules/domino/lib/NamedNodeMap.js"(i,t){"use strict";t.exports=o;var e=bn();function o(a){this.element=a}Object.defineProperties(o.prototype,{length:{get:e.shouldOverride},item:{value:e.shouldOverride},getNamedItem:{value:function(s){return this.element.getAttributeNode(s)}},getNamedItemNS:{value:function(s,_){return this.element.getAttributeNodeNS(s,_)}},setNamedItem:{value:e.nyi},setNamedItemNS:{value:e.nyi},removeNamedItem:{value:function(s){var _=this.element.getAttributeNode(s);if(_)return this.element.removeAttribute(s),_;e.NotFoundError()}},removeNamedItemNS:{value:function(s,_){var w=this.element.getAttributeNodeNS(s,_);if(w)return this.element.removeAttributeNS(s,_),w;e.NotFoundError()}}})}}),zf=pi({"external/npm/node_modules/domino/lib/Element.js"(i,t){"use strict";t.exports=ne;var e=dy(),o=bn(),a=o.NAMESPACE,s=MS(),_=Bo(),w=Ph(),C=TS(),T=tR(),I=ly(),P=IS(),R=hy(),H=uy(),Z=py(),X=PS(),fe=kS(),ae=Object.create(null);function ne(te,V,me,Ue){H.call(this),this.nodeType=_.ELEMENT_NODE,this.ownerDocument=te,this.localName=V,this.namespaceURI=me,this.prefix=Ue,this._tagName=void 0,this._attrsByQName=Object.create(null),this._attrsByLName=Object.create(null),this._attrKeys=[]}function re(te,V){if(te.nodeType===_.TEXT_NODE)V.push(te._data);else for(var me=0,Ue=te.childNodes.length;me<Ue;me++)re(te.childNodes[me],V)}ne.prototype=Object.create(H.prototype,{isHTML:{get:function(){return this.namespaceURI===a.HTML&&this.ownerDocument.isHTML}},tagName:{get:function(){if(this._tagName===void 0){var V;if(this.prefix===null?V=this.localName:V=this.prefix+":"+this.localName,this.isHTML){var me=ae[V];me||(ae[V]=me=o.toASCIIUpperCase(V)),V=me}this._tagName=V}return this._tagName}},nodeName:{get:function(){return this.tagName}},nodeValue:{get:function(){return null},set:function(){}},textContent:{get:function(){var te=[];return re(this,te),te.join("")},set:function(te){this.removeChildren(),te!=null&&te!==""&&this._appendChild(this.ownerDocument.createTextNode(te))}},innerText:{get:function(){var te=[];return re(this,te),te.join("").replace(/[ \t\n\f\r]+/g," ").trim()},set:function(te){this.removeChildren(),te!=null&&te!==""&&this._appendChild(this.ownerDocument.createTextNode(te))}},innerHTML:{get:function(){return this.serialize()},set:o.nyi},outerHTML:{get:function(){return C.serializeOne(this,{nodeType:0})},set:function(te){var V=this.ownerDocument,me=this.parentNode;if(me!==null){me.nodeType===_.DOCUMENT_NODE&&o.NoModificationAllowedError(),me.nodeType===_.DOCUMENT_FRAGMENT_NODE&&(me=me.ownerDocument.createElement("body"));var Ue=V.implementation.mozHTMLParser(V._address,me);Ue.parse(te===null?"":String(te),!0),this.replaceWith(Ue._asDocumentFragment())}}},_insertAdjacent:{value:function(V,me){var Ue=!1;switch(V){case"beforebegin":Ue=!0;case"afterend":var ot=this.parentNode;return ot===null?null:ot.insertBefore(me,Ue?this:this.nextSibling);case"afterbegin":Ue=!0;case"beforeend":return this.insertBefore(me,Ue?this.firstChild:null);default:return o.SyntaxError()}}},insertAdjacentElement:{value:function(V,me){if(me.nodeType!==_.ELEMENT_NODE)throw new TypeError("not an element");return V=o.toASCIILowerCase(String(V)),this._insertAdjacent(V,me)}},insertAdjacentText:{value:function(V,me){var Ue=this.ownerDocument.createTextNode(me);V=o.toASCIILowerCase(String(V)),this._insertAdjacent(V,Ue)}},insertAdjacentHTML:{value:function(V,me){V=o.toASCIILowerCase(String(V)),me=String(me);var Ue;switch(V){case"beforebegin":case"afterend":Ue=this.parentNode,(Ue===null||Ue.nodeType===_.DOCUMENT_NODE)&&o.NoModificationAllowedError();break;case"afterbegin":case"beforeend":Ue=this;break;default:o.SyntaxError()}(!(Ue instanceof ne)||Ue.ownerDocument.isHTML&&Ue.localName==="html"&&Ue.namespaceURI===a.HTML)&&(Ue=Ue.ownerDocument.createElementNS(a.HTML,"body"));var ot=this.ownerDocument.implementation.mozHTMLParser(this.ownerDocument._address,Ue);ot.parse(me,!0),this._insertAdjacent(V,ot._asDocumentFragment())}},children:{get:function(){return this._children||(this._children=new tt(this)),this._children}},attributes:{get:function(){return this._attributes||(this._attributes=new oe(this)),this._attributes}},firstElementChild:{get:function(){for(var te=this.firstChild;te!==null;te=te.nextSibling)if(te.nodeType===_.ELEMENT_NODE)return te;return null}},lastElementChild:{get:function(){for(var te=this.lastChild;te!==null;te=te.previousSibling)if(te.nodeType===_.ELEMENT_NODE)return te;return null}},childElementCount:{get:function(){return this.children.length}},nextElement:{value:function(te){te||(te=this.ownerDocument.documentElement);var V=this.firstElementChild;if(!V){if(this===te)return null;V=this.nextElementSibling}if(V)return V;for(var me=this.parentElement;me&&me!==te;me=me.parentElement)if(V=me.nextElementSibling,V)return V;return null}},getElementsByTagName:{value:function(V){var me;return V?(V==="*"?me=function(){return!0}:this.isHTML?me=Je(V):me=dt(V),new T(this,me)):new w}},getElementsByTagNameNS:{value:function(V,me){var Ue;return V==="*"&&me==="*"?Ue=function(){return!0}:V==="*"?Ue=dt(me):me==="*"?Ue=we(V):Ue=Ge(V,me),new T(this,Ue)}},getElementsByClassName:{value:function(V){if(V=String(V).trim(),V===""){var me=new w;return me}return V=V.split(/[ \t\r\n\f]+/),new T(this,yt(V))}},getElementsByName:{value:function(V){return new T(this,le(String(V)))}},clone:{value:function(){var V;this.namespaceURI!==a.HTML||this.prefix||!this.ownerDocument.isHTML?V=this.ownerDocument.createElementNS(this.namespaceURI,this.prefix!==null?this.prefix+":"+this.localName:this.localName):V=this.ownerDocument.createElement(this.localName);for(var me=0,Ue=this._attrKeys.length;me<Ue;me++){var ot=this._attrKeys[me],Rt=this._attrsByLName[ot],Ut=Rt.cloneNode();Ut._setOwnerElement(V),V._attrsByLName[ot]=Ut,V._addQName(Ut)}return V._attrKeys=this._attrKeys.concat(),V}},isEqual:{value:function(V){if(this.localName!==V.localName||this.namespaceURI!==V.namespaceURI||this.prefix!==V.prefix||this._numattrs!==V._numattrs)return!1;for(var me=0,Ue=this._numattrs;me<Ue;me++){var ot=this._attr(me);if(!V.hasAttributeNS(ot.namespaceURI,ot.localName)||V.getAttributeNS(ot.namespaceURI,ot.localName)!==ot.value)return!1}return!0}},_lookupNamespacePrefix:{value:function(V,me){if(this.namespaceURI&&this.namespaceURI===V&&this.prefix!==null&&me.lookupNamespaceURI(this.prefix)===V)return this.prefix;for(var Ue=0,ot=this._numattrs;Ue<ot;Ue++){var Rt=this._attr(Ue);if(Rt.prefix==="xmlns"&&Rt.value===V&&me.lookupNamespaceURI(Rt.localName)===V)return Rt.localName}var Ut=this.parentElement;return Ut?Ut._lookupNamespacePrefix(V,me):null}},lookupNamespaceURI:{value:function(V){if((V===""||V===void 0)&&(V=null),this.namespaceURI!==null&&this.prefix===V)return this.namespaceURI;for(var me=0,Ue=this._numattrs;me<Ue;me++){var ot=this._attr(me);if(ot.namespaceURI===a.XMLNS&&(ot.prefix==="xmlns"&&ot.localName===V||V===null&&ot.prefix===null&&ot.localName==="xmlns"))return ot.value||null}var Rt=this.parentElement;return Rt?Rt.lookupNamespaceURI(V):null}},getAttribute:{value:function(V){var me=this.getAttributeNode(V);return me?me.value:null}},getAttributeNS:{value:function(V,me){var Ue=this.getAttributeNodeNS(V,me);return Ue?Ue.value:null}},getAttributeNode:{value:function(V){V=String(V),/[A-Z]/.test(V)&&this.isHTML&&(V=o.toASCIILowerCase(V));var me=this._attrsByQName[V];return me?(Array.isArray(me)&&(me=me[0]),me):null}},getAttributeNodeNS:{value:function(V,me){V=V==null?"":String(V),me=String(me);var Ue=this._attrsByLName[V+"|"+me];return Ue||null}},hasAttribute:{value:function(V){return V=String(V),/[A-Z]/.test(V)&&this.isHTML&&(V=o.toASCIILowerCase(V)),this._attrsByQName[V]!==void 0}},hasAttributeNS:{value:function(V,me){V=V==null?"":String(V),me=String(me);var Ue=V+"|"+me;return this._attrsByLName[Ue]!==void 0}},hasAttributes:{value:function(){return this._numattrs>0}},toggleAttribute:{value:function(V,me){V=String(V),e.isValidName(V)||o.InvalidCharacterError(),/[A-Z]/.test(V)&&this.isHTML&&(V=o.toASCIILowerCase(V));var Ue=this._attrsByQName[V];return Ue===void 0?me===void 0||me===!0?(this._setAttribute(V,""),!0):!1:me===void 0||me===!1?(this.removeAttribute(V),!1):!0}},_setAttribute:{value:function(V,me){var Ue=this._attrsByQName[V],ot;Ue?Array.isArray(Ue)&&(Ue=Ue[0]):(Ue=this._newattr(V),ot=!0),Ue.value=me,this._attributes&&(this._attributes[V]=Ue),ot&&this._newattrhook&&this._newattrhook(V,me)}},setAttribute:{value:function(V,me){V=String(V),e.isValidName(V)||o.InvalidCharacterError(),/[A-Z]/.test(V)&&this.isHTML&&(V=o.toASCIILowerCase(V)),this._setAttribute(V,String(me))}},_setAttributeNS:{value:function(V,me,Ue){var ot=me.indexOf(":"),Rt,Ut;ot<0?(Rt=null,Ut=me):(Rt=me.substring(0,ot),Ut=me.substring(ot+1)),(V===""||V===void 0)&&(V=null);var Fi=(V===null?"":V)+"|"+Ut,Pe=this._attrsByLName[Fi],Ne;Pe||(Pe=new de(this,Ut,Rt,V),Ne=!0,this._attrsByLName[Fi]=Pe,this._attributes&&(this._attributes[this._attrKeys.length]=Pe),this._attrKeys.push(Fi),this._addQName(Pe)),Pe.value=Ue,Ne&&this._newattrhook&&this._newattrhook(me,Ue)}},setAttributeNS:{value:function(V,me,Ue){V=V==null||V===""?null:String(V),me=String(me),e.isValidQName(me)||o.InvalidCharacterError();var ot=me.indexOf(":"),Rt=ot<0?null:me.substring(0,ot);(Rt!==null&&V===null||Rt==="xml"&&V!==a.XML||(me==="xmlns"||Rt==="xmlns")&&V!==a.XMLNS||V===a.XMLNS&&!(me==="xmlns"||Rt==="xmlns"))&&o.NamespaceError(),this._setAttributeNS(V,me,String(Ue))}},setAttributeNode:{value:function(V){if(V.ownerElement!==null&&V.ownerElement!==this)throw new I(I.INUSE_ATTRIBUTE_ERR);var me=null,Ue=this._attrsByQName[V.name];if(Ue){if(Array.isArray(Ue)||(Ue=[Ue]),Ue.some(function(ot){return ot===V}))return V;if(V.ownerElement!==null)throw new I(I.INUSE_ATTRIBUTE_ERR);Ue.forEach(function(ot){this.removeAttributeNode(ot)},this),me=Ue[0]}return this.setAttributeNodeNS(V),me}},setAttributeNodeNS:{value:function(V){if(V.ownerElement!==null)throw new I(I.INUSE_ATTRIBUTE_ERR);var me=V.namespaceURI,Ue=(me===null?"":me)+"|"+V.localName,ot=this._attrsByLName[Ue];return ot&&this.removeAttributeNode(ot),V._setOwnerElement(this),this._attrsByLName[Ue]=V,this._attributes&&(this._attributes[this._attrKeys.length]=V),this._attrKeys.push(Ue),this._addQName(V),this._newattrhook&&this._newattrhook(V.name,V.value),ot||null}},removeAttribute:{value:function(V){V=String(V),/[A-Z]/.test(V)&&this.isHTML&&(V=o.toASCIILowerCase(V));var me=this._attrsByQName[V];if(me){Array.isArray(me)?me.length>2?me=me.shift():(this._attrsByQName[V]=me[1],me=me[0]):this._attrsByQName[V]=void 0;var Ue=me.namespaceURI,ot=(Ue===null?"":Ue)+"|"+me.localName;this._attrsByLName[ot]=void 0;var Rt=this._attrKeys.indexOf(ot);this._attributes&&(Array.prototype.splice.call(this._attributes,Rt,1),this._attributes[V]=void 0),this._attrKeys.splice(Rt,1);var Ut=me.onchange;me._setOwnerElement(null),Ut&&Ut.call(me,this,me.localName,me.value,null),this.rooted&&this.ownerDocument.mutateRemoveAttr(me)}}},removeAttributeNS:{value:function(V,me){V=V==null?"":String(V),me=String(me);var Ue=V+"|"+me,ot=this._attrsByLName[Ue];if(ot){this._attrsByLName[Ue]=void 0;var Rt=this._attrKeys.indexOf(Ue);this._attributes&&Array.prototype.splice.call(this._attributes,Rt,1),this._attrKeys.splice(Rt,1),this._removeQName(ot);var Ut=ot.onchange;ot._setOwnerElement(null),Ut&&Ut.call(ot,this,ot.localName,ot.value,null),this.rooted&&this.ownerDocument.mutateRemoveAttr(ot)}}},removeAttributeNode:{value:function(V){var me=V.namespaceURI,Ue=(me===null?"":me)+"|"+V.localName;return this._attrsByLName[Ue]!==V&&o.NotFoundError(),this.removeAttributeNS(me,V.localName),V}},getAttributeNames:{value:function(){var V=this;return this._attrKeys.map(function(me){return V._attrsByLName[me].name})}},_getattr:{value:function(V){var me=this._attrsByQName[V];return me?me.value:null}},_setattr:{value:function(V,me){var Ue=this._attrsByQName[V],ot;Ue||(Ue=this._newattr(V),ot=!0),Ue.value=String(me),this._attributes&&(this._attributes[V]=Ue),ot&&this._newattrhook&&this._newattrhook(V,me)}},_newattr:{value:function(V){var me=new de(this,V,null,null),Ue="|"+V;return this._attrsByQName[V]=me,this._attrsByLName[Ue]=me,this._attributes&&(this._attributes[this._attrKeys.length]=me),this._attrKeys.push(Ue),me}},_addQName:{value:function(te){var V=te.name,me=this._attrsByQName[V];me?Array.isArray(me)?me.push(te):this._attrsByQName[V]=[me,te]:this._attrsByQName[V]=te,this._attributes&&(this._attributes[V]=te)}},_removeQName:{value:function(te){var V=te.name,me=this._attrsByQName[V];if(Array.isArray(me)){var Ue=me.indexOf(te);o.assert(Ue!==-1),me.length===2?(this._attrsByQName[V]=me[1-Ue],this._attributes&&(this._attributes[V]=this._attrsByQName[V])):(me.splice(Ue,1),this._attributes&&this._attributes[V]===te&&(this._attributes[V]=me[0]))}else o.assert(me===te),this._attrsByQName[V]=void 0,this._attributes&&(this._attributes[V]=void 0)}},_numattrs:{get:function(){return this._attrKeys.length}},_attr:{value:function(te){return this._attrsByLName[this._attrKeys[te]]}},id:s.property({name:"id"}),className:s.property({name:"class"}),classList:{get:function(){var te=this;if(this._classList)return this._classList;var V=new P(function(){return te.className||""},function(me){te.className=me});return this._classList=V,V},set:function(te){this.className=te}},matches:{value:function(te){return R.matches(this,te)}},closest:{value:function(te){var V=this;do{if(V.matches&&V.matches(te))return V;V=V.parentElement||V.parentNode}while(V!==null&&V.nodeType===_.ELEMENT_NODE);return null}},querySelector:{value:function(te){return R(te,this)[0]}},querySelectorAll:{value:function(te){var V=R(te,this);return V.item?V:new w(V)}}}),Object.defineProperties(ne.prototype,Z),Object.defineProperties(ne.prototype,X),s.registerChangeHandler(ne,"id",function(te,V,me,Ue){te.rooted&&(me&&te.ownerDocument.delId(me,te),Ue&&te.ownerDocument.addId(Ue,te))}),s.registerChangeHandler(ne,"class",function(te,V,me,Ue){te._classList&&te._classList._update()});function de(te,V,me,Ue,ot){this.localName=V,this.prefix=me===null||me===""?null:""+me,this.namespaceURI=Ue===null||Ue===""?null:""+Ue,this.data=ot,this._setOwnerElement(te)}de.prototype=Object.create(Object.prototype,{ownerElement:{get:function(){return this._ownerElement}},_setOwnerElement:{value:function(V){this._ownerElement=V,this.prefix===null&&this.namespaceURI===null&&V?this.onchange=V._attributeChangeHandlers[this.localName]:this.onchange=null}},name:{get:function(){return this.prefix?this.prefix+":"+this.localName:this.localName}},specified:{get:function(){return!0}},value:{get:function(){return this.data},set:function(te){var V=this.data;te=te===void 0?"":te+"",te!==V&&(this.data=te,this.ownerElement&&(this.onchange&&this.onchange(this.ownerElement,this.localName,V,te),this.ownerElement.rooted&&this.ownerElement.ownerDocument.mutateAttr(this,V)))}},cloneNode:{value:function(V){return new de(null,this.localName,this.prefix,this.namespaceURI,this.data)}},nodeType:{get:function(){return _.ATTRIBUTE_NODE}},nodeName:{get:function(){return this.name}},nodeValue:{get:function(){return this.value},set:function(te){this.value=te}},textContent:{get:function(){return this.value},set:function(te){te==null&&(te=""),this.value=te}},innerText:{get:function(){return this.value},set:function(te){te==null&&(te=""),this.value=te}}}),ne._Attr=de;function oe(te){fe.call(this,te);for(var V in te._attrsByQName)this[V]=te._attrsByQName[V];for(var me=0;me<te._attrKeys.length;me++)this[me]=te._attrsByLName[te._attrKeys[me]]}oe.prototype=Object.create(fe.prototype,{length:{get:function(){return this.element._attrKeys.length},set:function(){}},item:{value:function(te){return te=te>>>0,te>=this.length?null:this.element._attrsByLName[this.element._attrKeys[te]]}}});var Ve;(Ve=globalThis.Symbol)!=null&&Ve.iterator&&(oe.prototype[globalThis.Symbol.iterator]=function(){var te=0,V=this.length,me=this;return{next:function(){return te<V?{value:me.item(te++)}:{done:!0}}}});function tt(te){this.element=te,this.updateCache()}tt.prototype=Object.create(Object.prototype,{length:{get:function(){return this.updateCache(),this.childrenByNumber.length}},item:{value:function(V){return this.updateCache(),this.childrenByNumber[V]||null}},namedItem:{value:function(V){return this.updateCache(),this.childrenByName[V]||null}},namedItems:{get:function(){return this.updateCache(),this.childrenByName}},updateCache:{value:function(){var V=/^(a|applet|area|embed|form|frame|frameset|iframe|img|object)$/;if(this.lastModTime!==this.element.lastModTime){this.lastModTime=this.element.lastModTime;for(var me=this.childrenByNumber&&this.childrenByNumber.length||0,Ue=0;Ue<me;Ue++)this[Ue]=void 0;this.childrenByNumber=[],this.childrenByName=Object.create(null);for(var ot=this.element.firstChild;ot!==null;ot=ot.nextSibling)if(ot.nodeType===_.ELEMENT_NODE){this[this.childrenByNumber.length]=ot,this.childrenByNumber.push(ot);var Rt=ot.getAttribute("id");Rt&&!this.childrenByName[Rt]&&(this.childrenByName[Rt]=ot);var Ut=ot.getAttribute("name");Ut&&this.element.namespaceURI===a.HTML&&V.test(this.element.localName)&&!this.childrenByName[Ut]&&(this.childrenByName[Rt]=ot)}}}}});function dt(te){return function(V){return V.localName===te}}function Je(te){var V=o.toASCIILowerCase(te);return V===te?dt(te):function(me){return me.isHTML?me.localName===V:me.localName===te}}function we(te){return function(V){return V.namespaceURI===te}}function Ge(te,V){return function(me){return me.namespaceURI===te&&me.localName===V}}function yt(te){return function(V){return te.every(function(me){return V.classList.contains(me)})}}function le(te){return function(V){return V.namespaceURI!==a.HTML?!1:V.getAttribute("name")===te}}}}),AS=pi({"external/npm/node_modules/domino/lib/Leaf.js"(i,t){"use strict";t.exports=w;var e=Bo(),o=Ph(),a=bn(),s=a.HierarchyRequestError,_=a.NotFoundError;function w(){e.call(this)}w.prototype=Object.create(e.prototype,{hasChildNodes:{value:function(){return!1}},firstChild:{value:null},lastChild:{value:null},insertBefore:{value:function(C,T){if(!C.nodeType)throw new TypeError("not a node");s()}},replaceChild:{value:function(C,T){if(!C.nodeType)throw new TypeError("not a node");s()}},removeChild:{value:function(C){if(!C.nodeType)throw new TypeError("not a node");_()}},removeChildren:{value:function(){}},childNodes:{get:function(){return this._childNodes||(this._childNodes=new o),this._childNodes}}})}}),c0=pi({"external/npm/node_modules/domino/lib/CharacterData.js"(i,t){"use strict";t.exports=_;var e=AS(),o=bn(),a=py(),s=PS();function _(){e.call(this)}_.prototype=Object.create(e.prototype,{substringData:{value:function(C,T){if(arguments.length<2)throw new TypeError("Not enough arguments");return C=C>>>0,T=T>>>0,(C>this.data.length||C<0||T<0)&&o.IndexSizeError(),this.data.substring(C,C+T)}},appendData:{value:function(C){if(arguments.length<1)throw new TypeError("Not enough arguments");this.data+=String(C)}},insertData:{value:function(C,T){return this.replaceData(C,0,T)}},deleteData:{value:function(C,T){return this.replaceData(C,T,"")}},replaceData:{value:function(C,T,I){var P=this.data,R=P.length;C=C>>>0,T=T>>>0,I=String(I),(C>R||C<0)&&o.IndexSizeError(),C+T>R&&(T=R-C);var H=P.substring(0,C),Z=P.substring(C+T);this.data=H+I+Z}},isEqual:{value:function(C){return this._data===C._data}},length:{get:function(){return this.data.length}}}),Object.defineProperties(_.prototype,a),Object.defineProperties(_.prototype,s)}}),DS=pi({"external/npm/node_modules/domino/lib/Text.js"(i,t){"use strict";t.exports=s;var e=bn(),o=Bo(),a=c0();function s(w,C){a.call(this),this.nodeType=o.TEXT_NODE,this.ownerDocument=w,this._data=C,this._index=void 0}var _={get:function(){return this._data},set:function(w){w==null?w="":w=String(w),w!==this._data&&(this._data=w,this.rooted&&this.ownerDocument.mutateValue(this),this.parentNode&&this.parentNode._textchangehook&&this.parentNode._textchangehook(this))}};s.prototype=Object.create(a.prototype,{nodeName:{value:"#text"},nodeValue:_,textContent:_,innerText:_,data:{get:_.get,set:function(w){_.set.call(this,w===null?"":String(w))}},splitText:{value:function(C){(C>this._data.length||C<0)&&e.IndexSizeError();var T=this._data.substring(C),I=this.ownerDocument.createTextNode(T);this.data=this.data.substring(0,C);var P=this.parentNode;return P!==null&&P.insertBefore(I,this.nextSibling),I}},wholeText:{get:function(){for(var C=this.textContent,T=this.nextSibling;T&&T.nodeType===o.TEXT_NODE;T=T.nextSibling)C+=T.textContent;return C}},replaceWholeText:{value:e.nyi},clone:{value:function(){return new s(this.ownerDocument,this._data)}}})}}),RS=pi({"external/npm/node_modules/domino/lib/Comment.js"(i,t){"use strict";t.exports=a;var e=Bo(),o=c0();function a(_,w){o.call(this),this.nodeType=e.COMMENT_NODE,this.ownerDocument=_,this._data=w}var s={get:function(){return this._data},set:function(_){_==null?_="":_=String(_),this._data=_,this.rooted&&this.ownerDocument.mutateValue(this)}};a.prototype=Object.create(o.prototype,{nodeName:{value:"#comment"},nodeValue:s,textContent:s,innerText:s,data:{get:s.get,set:function(_){s.set.call(this,_===null?"":String(_))}},clone:{value:function(){return new a(this.ownerDocument,this._data)}}})}}),OS=pi({"external/npm/node_modules/domino/lib/DocumentFragment.js"(i,t){"use strict";t.exports=C;var e=Bo(),o=Ph(),a=uy(),s=zf(),_=hy(),w=bn();function C(T){a.call(this),this.nodeType=e.DOCUMENT_FRAGMENT_NODE,this.ownerDocument=T}C.prototype=Object.create(a.prototype,{nodeName:{value:"#document-fragment"},nodeValue:{get:function(){return null},set:function(){}},textContent:Object.getOwnPropertyDescriptor(s.prototype,"textContent"),innerText:Object.getOwnPropertyDescriptor(s.prototype,"innerText"),querySelector:{value:function(T){var I=this.querySelectorAll(T);return I.length?I[0]:null}},querySelectorAll:{value:function(T){var I=Object.create(this);I.isHTML=!0,I.getElementsByTagName=s.prototype.getElementsByTagName,I.nextElement=Object.getOwnPropertyDescriptor(s.prototype,"firstElementChild").get;var P=_(T,I);return P.item?P:new o(P)}},clone:{value:function(){return new C(this.ownerDocument)}},isEqual:{value:function(I){return!0}},innerHTML:{get:function(){return this.serialize()},set:w.nyi},outerHTML:{get:function(){return this.serialize()},set:w.nyi}})}}),LS=pi({"external/npm/node_modules/domino/lib/ProcessingInstruction.js"(i,t){"use strict";t.exports=a;var e=Bo(),o=c0();function a(_,w,C){o.call(this),this.nodeType=e.PROCESSING_INSTRUCTION_NODE,this.ownerDocument=_,this.target=w,this._data=C}var s={get:function(){return this._data},set:function(_){_==null?_="":_=String(_),this._data=_,this.rooted&&this.ownerDocument.mutateValue(this)}};a.prototype=Object.create(o.prototype,{nodeName:{get:function(){return this.target}},nodeValue:s,textContent:s,innerText:s,data:{get:s.get,set:function(_){s.set.call(this,_===null?"":String(_))}},clone:{value:function(){return new a(this.ownerDocument,this.target,this._data)}},isEqual:{value:function(w){return this.target===w.target&&this._data===w._data}}})}}),u0=pi({"external/npm/node_modules/domino/lib/NodeFilter.js"(i,t){"use strict";var e={FILTER_ACCEPT:1,FILTER_REJECT:2,FILTER_SKIP:3,SHOW_ALL:4294967295,SHOW_ELEMENT:1,SHOW_ATTRIBUTE:2,SHOW_TEXT:4,SHOW_CDATA_SECTION:8,SHOW_ENTITY_REFERENCE:16,SHOW_ENTITY:32,SHOW_PROCESSING_INSTRUCTION:64,SHOW_COMMENT:128,SHOW_DOCUMENT:256,SHOW_DOCUMENT_TYPE:512,SHOW_DOCUMENT_FRAGMENT:1024,SHOW_NOTATION:2048};t.exports=e.constructor=e.prototype=e}}),NS=pi({"external/npm/node_modules/domino/lib/NodeTraversal.js"(i,t){"use strict";var e=t.exports={nextSkippingChildren:o,nextAncestorSibling:a,next:s,previous:w,deepLastChild:_};function o(C,T){return C===T?null:C.nextSibling!==null?C.nextSibling:a(C,T)}function a(C,T){for(C=C.parentNode;C!==null;C=C.parentNode){if(C===T)return null;if(C.nextSibling!==null)return C.nextSibling}return null}function s(C,T){var I;return I=C.firstChild,I!==null?I:C===T?null:(I=C.nextSibling,I!==null?I:a(C,T))}function _(C){for(;C.lastChild;)C=C.lastChild;return C}function w(C,T){var I;return I=C.previousSibling,I!==null?_(I):(I=C.parentNode,I===T?null:I)}}}),iR=pi({"external/npm/node_modules/domino/lib/TreeWalker.js"(i,t){"use strict";t.exports=I;var e=Bo(),o=u0(),a=NS(),s=bn(),_={first:"firstChild",last:"lastChild",next:"firstChild",previous:"lastChild"},w={first:"nextSibling",last:"previousSibling",next:"nextSibling",previous:"previousSibling"};function C(P,R){var H,Z,X,fe,ae;for(Z=P._currentNode[_[R]];Z!==null;){if(fe=P._internalFilter(Z),fe===o.FILTER_ACCEPT)return P._currentNode=Z,Z;if(fe===o.FILTER_SKIP&&(H=Z[_[R]],H!==null)){Z=H;continue}for(;Z!==null;){if(ae=Z[w[R]],ae!==null){Z=ae;break}if(X=Z.parentNode,X===null||X===P.root||X===P._currentNode)return null;Z=X}}return null}function T(P,R){var H,Z,X;if(H=P._currentNode,H===P.root)return null;for(;;){for(X=H[w[R]];X!==null;){if(H=X,Z=P._internalFilter(H),Z===o.FILTER_ACCEPT)return P._currentNode=H,H;X=H[_[R]],(Z===o.FILTER_REJECT||X===null)&&(X=H[w[R]])}if(H=H.parentNode,H===null||H===P.root||P._internalFilter(H)===o.FILTER_ACCEPT)return null}}function I(P,R,H){(!P||!P.nodeType)&&s.NotSupportedError(),this._root=P,this._whatToShow=Number(R)||0,this._filter=H||null,this._active=!1,this._currentNode=P}Object.defineProperties(I.prototype,{root:{get:function(){return this._root}},whatToShow:{get:function(){return this._whatToShow}},filter:{get:function(){return this._filter}},currentNode:{get:function(){return this._currentNode},set:function(R){if(!(R instanceof e))throw new TypeError("Not a Node");this._currentNode=R}},_internalFilter:{value:function(R){var H,Z;if(this._active&&s.InvalidStateError(),!(1<<R.nodeType-1&this._whatToShow))return o.FILTER_SKIP;if(Z=this._filter,Z===null)H=o.FILTER_ACCEPT;else{this._active=!0;try{typeof Z=="function"?H=Z(R):H=Z.acceptNode(R)}finally{this._active=!1}}return+H}},parentNode:{value:function(){for(var R=this._currentNode;R!==this.root;){if(R=R.parentNode,R===null)return null;if(this._internalFilter(R)===o.FILTER_ACCEPT)return this._currentNode=R,R}return null}},firstChild:{value:function(){return C(this,"first")}},lastChild:{value:function(){return C(this,"last")}},previousSibling:{value:function(){return T(this,"previous")}},nextSibling:{value:function(){return T(this,"next")}},previousNode:{value:function(){var R,H,Z,X;for(R=this._currentNode;R!==this._root;){for(Z=R.previousSibling;Z;Z=R.previousSibling)if(R=Z,H=this._internalFilter(R),H!==o.FILTER_REJECT){for(X=R.lastChild;X&&(R=X,H=this._internalFilter(R),H!==o.FILTER_REJECT);X=R.lastChild);if(H===o.FILTER_ACCEPT)return this._currentNode=R,R}if(R===this.root||R.parentNode===null)return null;if(R=R.parentNode,this._internalFilter(R)===o.FILTER_ACCEPT)return this._currentNode=R,R}return null}},nextNode:{value:function(){var R,H,Z,X;R=this._currentNode,H=o.FILTER_ACCEPT;e:for(;;){for(Z=R.firstChild;Z;Z=R.firstChild){if(R=Z,H=this._internalFilter(R),H===o.FILTER_ACCEPT)return this._currentNode=R,R;if(H===o.FILTER_REJECT)break}for(X=a.nextSkippingChildren(R,this.root);X;X=a.nextSkippingChildren(R,this.root)){if(R=X,H=this._internalFilter(R),H===o.FILTER_ACCEPT)return this._currentNode=R,R;if(H===o.FILTER_SKIP)continue e}return null}}},toString:{value:function(){return"[object TreeWalker]"}}})}}),rR=pi({"external/npm/node_modules/domino/lib/NodeIterator.js"(i,t){"use strict";t.exports=C;var e=u0(),o=NS(),a=bn();function s(T,I,P){return P?o.next(T,I):T===I?null:o.previous(T,null)}function _(T,I){for(;I;I=I.parentNode)if(T===I)return!0;return!1}function w(T,I){var P,R;for(P=T._referenceNode,R=T._pointerBeforeReferenceNode;;){if(R===I)R=!R;else if(P=s(P,T._root,I),P===null)return null;var H=T._internalFilter(P);if(H===e.FILTER_ACCEPT)break}return T._referenceNode=P,T._pointerBeforeReferenceNode=R,P}function C(T,I,P){(!T||!T.nodeType)&&a.NotSupportedError(),this._root=T,this._referenceNode=T,this._pointerBeforeReferenceNode=!0,this._whatToShow=Number(I)||0,this._filter=P||null,this._active=!1,T.doc._attachNodeIterator(this)}Object.defineProperties(C.prototype,{root:{get:function(){return this._root}},referenceNode:{get:function(){return this._referenceNode}},pointerBeforeReferenceNode:{get:function(){return this._pointerBeforeReferenceNode}},whatToShow:{get:function(){return this._whatToShow}},filter:{get:function(){return this._filter}},_internalFilter:{value:function(I){var P,R;if(this._active&&a.InvalidStateError(),!(1<<I.nodeType-1&this._whatToShow))return e.FILTER_SKIP;if(R=this._filter,R===null)P=e.FILTER_ACCEPT;else{this._active=!0;try{typeof R=="function"?P=R(I):P=R.acceptNode(I)}finally{this._active=!1}}return+P}},_preremove:{value:function(I){if(!_(I,this._root)&&_(I,this._referenceNode)){if(this._pointerBeforeReferenceNode){for(var P=I;P.lastChild;)P=P.lastChild;if(P=o.next(P,this.root),P){this._referenceNode=P;return}this._pointerBeforeReferenceNode=!1}if(I.previousSibling===null)this._referenceNode=I.parentNode;else{this._referenceNode=I.previousSibling;var R;for(R=this._referenceNode.lastChild;R;R=this._referenceNode.lastChild)this._referenceNode=R}}}},nextNode:{value:function(){return w(this,!0)}},previousNode:{value:function(){return w(this,!1)}},detach:{value:function(){}},toString:{value:function(){return"[object NodeIterator]"}}})}}),fy=pi({"external/npm/node_modules/domino/lib/URL.js"(i,t){"use strict";t.exports=e;function e(o){if(!o)return Object.create(e.prototype);this.url=o.replace(/^[ \t\n\r\f]+|[ \t\n\r\f]+$/g,"");var a=e.pattern.exec(this.url);if(a){if(a[2]&&(this.scheme=a[2]),a[4]){var s=a[4].match(e.userinfoPattern);if(s&&(this.username=s[1],this.password=s[3],a[4]=a[4].substring(s[0].length)),a[4].match(e.portPattern)){var _=a[4].lastIndexOf(":");this.host=a[4].substring(0,_),this.port=a[4].substring(_+1)}else this.host=a[4]}a[5]&&(this.path=a[5]),a[6]&&(this.query=a[7]),a[8]&&(this.fragment=a[9])}}e.pattern=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,e.userinfoPattern=/^([^@:]*)(:([^@]*))?@/,e.portPattern=/:\d+$/,e.authorityPattern=/^[^:\/?#]+:\/\//,e.hierarchyPattern=/^[^:\/?#]+:\//,e.percentEncode=function(a){var s=a.charCodeAt(0);if(s<256)return"%"+s.toString(16);throw Error("can't percent-encode codepoints > 255 yet")},e.prototype={constructor:e,isAbsolute:function(){return!!this.scheme},isAuthorityBased:function(){return e.authorityPattern.test(this.url)},isHierarchical:function(){return e.hierarchyPattern.test(this.url)},toString:function(){var o="";return this.scheme!==void 0&&(o+=this.scheme+":"),this.isAbsolute()&&(o+="//",(this.username||this.password)&&(o+=this.username||"",this.password&&(o+=":"+this.password),o+="@"),this.host&&(o+=this.host)),this.port!==void 0&&(o+=":"+this.port),this.path!==void 0&&(o+=this.path),this.query!==void 0&&(o+="?"+this.query),this.fragment!==void 0&&(o+="#"+this.fragment),o},resolve:function(o){var a=this,s=new e(o),_=new e;return s.scheme!==void 0?(_.scheme=s.scheme,_.username=s.username,_.password=s.password,_.host=s.host,_.port=s.port,_.path=C(s.path),_.query=s.query):(_.scheme=a.scheme,s.host!==void 0?(_.username=s.username,_.password=s.password,_.host=s.host,_.port=s.port,_.path=C(s.path),_.query=s.query):(_.username=a.username,_.password=a.password,_.host=a.host,_.port=a.port,s.path?(s.path.charAt(0)==="/"?_.path=C(s.path):(_.path=w(a.path,s.path),_.path=C(_.path)),_.query=s.query):(_.path=a.path,s.query!==void 0?_.query=s.query:_.query=a.query))),_.fragment=s.fragment,_.toString();function w(T,I){if(a.host!==void 0&&!a.path)return"/"+I;var P=T.lastIndexOf("/");return P===-1?I:T.substring(0,P+1)+I}function C(T){if(!T)return T;for(var I="";T.length>0;){if(T==="."||T===".."){T="";break}var P=T.substring(0,2),R=T.substring(0,3),H=T.substring(0,4);if(R==="../")T=T.substring(3);else if(P==="./")T=T.substring(2);else if(R==="/./")T="/"+T.substring(3);else if(P==="/."&&T.length===2)T="/";else if(H==="/../"||R==="/.."&&T.length===3)T="/"+T.substring(4),I=I.replace(/\/?[^\/]*$/,"");else{var Z=T.match(/(\/?([^\/]*))/)[0];I+=Z,T=T.substring(Z.length)}}return I}}}}}),nR=pi({"external/npm/node_modules/domino/lib/CustomEvent.js"(i,t){"use strict";t.exports=o;var e=Ff();function o(a,s){e.call(this,a,s)}o.prototype=Object.create(e.prototype,{constructor:{value:o}})}}),FS=pi({"external/npm/node_modules/domino/lib/events.js"(i,t){"use strict";t.exports={Event:Ff(),UIEvent:wS(),MouseEvent:CS(),CustomEvent:nR()}}}),oR=pi({"external/npm/node_modules/domino/lib/style_parser.js"(i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.hyphenate=i.parse=void 0;function t(o){let a=[],s=0,_=0,w=0,C=0,T=0,I=null;for(;s<o.length;)switch(o.charCodeAt(s++)){case 40:_++;break;case 41:_--;break;case 39:w===0?w=39:w===39&&o.charCodeAt(s-1)!==92&&(w=0);break;case 34:w===0?w=34:w===34&&o.charCodeAt(s-1)!==92&&(w=0);break;case 58:!I&&_===0&&w===0&&(I=e(o.substring(T,s-1).trim()),C=s);break;case 59:if(I&&C>0&&_===0&&w===0){let R=o.substring(C,s-1).trim();a.push(I,R),T=s,C=0,I=null}break}if(I&&C){let P=o.slice(C).trim();a.push(I,P)}return a}i.parse=t;function e(o){return o.replace(/[a-z][A-Z]/g,a=>a.charAt(0)+"-"+a.charAt(1)).toLowerCase()}i.hyphenate=e}}),my=pi({"external/npm/node_modules/domino/lib/CSSStyleDeclaration.js"(i,t){"use strict";var{parse:e}=oR();t.exports=function(C){let T=new a(C),I={get:function(P,R){return R in P?P[R]:P.getPropertyValue(o(R))},has:function(P,R){return!0},set:function(P,R,H){return R in P?P[R]=H:P.setProperty(o(R),H??void 0),!0}};return new Proxy(T,I)};function o(C){return C.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function a(C){this._element=C}var s="!important";function _(C){let T={property:{},priority:{}};if(!C)return T;let I=e(C);if(I.length<2)return T;for(let P=0;P<I.length;P+=2){let R=I[P],H=I[P+1];H.endsWith(s)&&(T.priority[R]="important",H=H.slice(0,-s.length).trim()),T.property[R]=H}return T}var w={};a.prototype=Object.create(Object.prototype,{_parsed:{get:function(){if(!this._parsedStyles||this.cssText!==this._lastParsedText){var C=this.cssText;this._parsedStyles=_(C),this._lastParsedText=C,delete this._names}return this._parsedStyles}},_serialize:{value:function(){var C=this._parsed,T="";for(var I in C.property)T&&(T+=" "),T+=I+": "+C.property[I],C.priority[I]&&(T+=" !"+C.priority[I]),T+=";";this.cssText=T,this._lastParsedText=T,delete this._names}},cssText:{get:function(){return this._element.getAttribute("style")},set:function(C){this._element.setAttribute("style",C)}},length:{get:function(){return this._names||(this._names=Object.getOwnPropertyNames(this._parsed.property)),this._names.length}},item:{value:function(C){return this._names||(this._names=Object.getOwnPropertyNames(this._parsed.property)),this._names[C]}},getPropertyValue:{value:function(C){return C=C.toLowerCase(),this._parsed.property[C]||""}},getPropertyPriority:{value:function(C){return C=C.toLowerCase(),this._parsed.priority[C]||""}},setProperty:{value:function(C,T,I){if(C=C.toLowerCase(),T==null&&(T=""),I==null&&(I=""),T!==w&&(T=""+T),T=T.trim(),T===""){this.removeProperty(C);return}if(!(I!==""&&I!==w&&!/^important$/i.test(I))){var P=this._parsed;if(T===w){if(!P.property[C])return;I!==""?P.priority[C]="important":delete P.priority[C]}else{if(T.includes(";")&&!T.includes("data:"))return;var R=_(C+":"+T);if(Object.getOwnPropertyNames(R.property).length===0||Object.getOwnPropertyNames(R.priority).length!==0)return;for(var H in R.property)P.property[H]=R.property[H],I!==w&&(I!==""?P.priority[H]="important":P.priority[H]&&delete P.priority[H])}this._serialize()}}},setPropertyValue:{value:function(C,T){return this.setProperty(C,T,w)}},setPropertyPriority:{value:function(C,T){return this.setProperty(C,w,T)}},removeProperty:{value:function(C){C=C.toLowerCase();var T=this._parsed;C in T.property&&(delete T.property[C],delete T.priority[C],this._serialize())}}})}}),zS=pi({"external/npm/node_modules/domino/lib/URLUtils.js"(i,t){"use strict";var e=fy();t.exports=o;function o(){}o.prototype=Object.create(Object.prototype,{_url:{get:function(){return new e(this.href)}},protocol:{get:function(){var a=this._url;return a&&a.scheme?a.scheme+":":":"},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&(a=a.replace(/:+$/,""),a=a.replace(/[^-+\.a-zA-Z0-9]/g,e.percentEncode),a.length>0&&(_.scheme=a,s=_.toString())),this.href=s}},host:{get:function(){var a=this._url;return a.isAbsolute()&&a.isAuthorityBased()?a.host+(a.port?":"+a.port:""):""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&_.isAuthorityBased()&&(a=a.replace(/[^-+\._~!$&'()*,;:=a-zA-Z0-9]/g,e.percentEncode),a.length>0&&(_.host=a,delete _.port,s=_.toString())),this.href=s}},hostname:{get:function(){var a=this._url;return a.isAbsolute()&&a.isAuthorityBased()?a.host:""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&_.isAuthorityBased()&&(a=a.replace(/^\/+/,""),a=a.replace(/[^-+\._~!$&'()*,;:=a-zA-Z0-9]/g,e.percentEncode),a.length>0&&(_.host=a,s=_.toString())),this.href=s}},port:{get:function(){var a=this._url;return a.isAbsolute()&&a.isAuthorityBased()&&a.port!==void 0?a.port:""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&_.isAuthorityBased()&&(a=""+a,a=a.replace(/[^0-9].*$/,""),a=a.replace(/^0+/,""),a.length===0&&(a="0"),parseInt(a,10)<=65535&&(_.port=a,s=_.toString())),this.href=s}},pathname:{get:function(){var a=this._url;return a.isAbsolute()&&a.isHierarchical()?a.path:""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&_.isHierarchical()&&(a.charAt(0)!=="/"&&(a="/"+a),a=a.replace(/[^-+\._~!$&'()*,;:=@\/a-zA-Z0-9]/g,e.percentEncode),_.path=a,s=_.toString()),this.href=s}},search:{get:function(){var a=this._url;return a.isAbsolute()&&a.isHierarchical()&&a.query!==void 0?"?"+a.query:""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&_.isHierarchical()&&(a.charAt(0)==="?"&&(a=a.substring(1)),a=a.replace(/[^-+\._~!$&'()*,;:=@\/?a-zA-Z0-9]/g,e.percentEncode),_.query=a,s=_.toString()),this.href=s}},hash:{get:function(){var a=this._url;return a==null||a.fragment==null||a.fragment===""?"":"#"+a.fragment},set:function(a){var s=this.href,_=new e(s);a.charAt(0)==="#"&&(a=a.substring(1)),a=a.replace(/[^-+\._~!$&'()*,;:=@\/?a-zA-Z0-9]/g,e.percentEncode),_.fragment=a,s=_.toString(),this.href=s}},username:{get:function(){var a=this._url;return a.username||""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&(a=a.replace(/[\x00-\x1F\x7F-\uFFFF "#<>?`\/@\\:]/g,e.percentEncode),_.username=a,s=_.toString()),this.href=s}},password:{get:function(){var a=this._url;return a.password||""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&(a===""?_.password=null:(a=a.replace(/[\x00-\x1F\x7F-\uFFFF "#<>?`\/@\\]/g,e.percentEncode),_.password=a),s=_.toString()),this.href=s}},origin:{get:function(){var a=this._url;if(a==null)return"";var s=function(_){var w=[a.scheme,a.host,+a.port||_];return w[0]+"://"+w[1]+(w[2]===_?"":":"+w[2])};switch(a.scheme){case"ftp":return s(21);case"gopher":return s(70);case"http":case"ws":return s(80);case"https":case"wss":return s(443);default:return a.scheme+"://"}}}}),o._inherit=function(a){Object.getOwnPropertyNames(o.prototype).forEach(function(s){if(!(s==="constructor"||s==="href")){var _=Object.getOwnPropertyDescriptor(o.prototype,s);Object.defineProperty(a,s,_)}})}}}),BS=pi({"external/npm/node_modules/domino/lib/defineElement.js"(i,t){"use strict";var e=MS(),o=cy().isApiWritable;t.exports=function(w,C,T,I){var P=w.ctor;if(P){var R=w.props||{};if(w.attributes)for(var H in w.attributes){var Z=w.attributes[H];(typeof Z!="object"||Array.isArray(Z))&&(Z={type:Z}),Z.name||(Z.name=H.toLowerCase()),R[H]=e.property(Z)}R.constructor={value:P,writable:o},P.prototype=Object.create((w.superclass||C).prototype,R),w.events&&_(P,w.events),T[w.name]=P}else P=C;return(w.tags||w.tag&&[w.tag]||[]).forEach(function(X){I[X]=P}),P};function a(w,C,T,I){this.body=w,this.document=C,this.form=T,this.element=I}a.prototype.build=function(){return()=>{}};function s(w,C,T,I){var P=w.ownerDocument||Object.create(null),R=w.form||Object.create(null);w[C]=new a(I,P,R,w).build()}function _(w,C){var T=w.prototype;C.forEach(function(I){Object.defineProperty(T,"on"+I,{get:function(){return this._getEventHandler(I)},set:function(P){this._setEventHandler(I,P)}}),e.registerChangeHandler(w,"on"+I,s)})}}}),gy=pi({"external/npm/node_modules/domino/lib/htmlelts.js"(i){"use strict";var t=Bo(),e=zf(),o=my(),a=bn(),s=zS(),_=BS(),w=i.elements={},C=Object.create(null);i.createElement=function(ne,re,de){var oe=C[re]||fe;return new oe(ne,re,de)};function T(ne){return _(ne,X,w,C)}function I(ne){return{get:function(){var re=this._getattr(ne);if(re===null)return"";var de=this.doc._resolve(re);return de===null?re:de},set:function(re){this._setattr(ne,re)}}}function P(ne){return{get:function(){var re=this._getattr(ne);return re===null?null:re.toLowerCase()==="use-credentials"?"use-credentials":"anonymous"},set:function(re){re==null?this.removeAttribute(ne):this._setattr(ne,re)}}}var R={type:["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],missing:""},H={A:!0,LINK:!0,BUTTON:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0,COMMAND:!0},Z=function(ne,re,de){X.call(this,ne,re,de),this._form=null},X=i.HTMLElement=T({superclass:e,name:"HTMLElement",ctor:function(re,de,oe){e.call(this,re,de,a.NAMESPACE.HTML,oe)},props:{dangerouslySetInnerHTML:{set:function(ne){this._innerHTML=ne}},innerHTML:{get:function(){return this.serialize()},set:function(ne){var re=this.ownerDocument.implementation.mozHTMLParser(this.ownerDocument._address,this);re.parse(ne===null?"":String(ne),!0);for(var de=this instanceof C.template?this.content:this;de.hasChildNodes();)de.removeChild(de.firstChild);de.appendChild(re._asDocumentFragment())}},style:{get:function(){return this._style||(this._style=new o(this)),this._style},set:function(ne){ne==null&&(ne=""),this._setattr("style",String(ne))}},blur:{value:function(){}},focus:{value:function(){}},forceSpellCheck:{value:function(){}},click:{value:function(){if(!this._click_in_progress){this._click_in_progress=!0;try{this._pre_click_activation_steps&&this._pre_click_activation_steps();var ne=this.ownerDocument.createEvent("MouseEvent");ne.initMouseEvent("click",!0,!0,this.ownerDocument.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null);var re=this.dispatchEvent(ne);re?this._post_click_activation_steps&&this._post_click_activation_steps(ne):this._cancelled_activation_steps&&this._cancelled_activation_steps()}finally{this._click_in_progress=!1}}}},submit:{value:a.nyi}},attributes:{title:String,lang:String,dir:{type:["ltr","rtl","auto"],missing:""},draggable:{type:["true","false"],treatNullAsEmptyString:!0},spellcheck:{type:["true","false"],missing:""},enterKeyHint:{type:["enter","done","go","next","previous","search","send"],missing:""},autoCapitalize:{type:["off","on","none","sentences","words","characters"],missing:""},autoFocus:Boolean,accessKey:String,nonce:String,hidden:Boolean,translate:{type:["no","yes"],missing:""},tabIndex:{type:"long",default:function(){return this.tagName in H||this.contentEditable?0:-1}}},events:["abort","canplay","canplaythrough","change","click","contextmenu","cuechange","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","input","invalid","keydown","keypress","keyup","loadeddata","loadedmetadata","loadstart","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","pause","play","playing","progress","ratechange","readystatechange","reset","seeked","seeking","select","show","stalled","submit","suspend","timeupdate","volumechange","waiting","blur","error","focus","load","scroll"]}),fe=T({name:"HTMLUnknownElement",ctor:function(re,de,oe){X.call(this,re,de,oe)}}),ae={form:{get:function(){return this._form}}};T({tag:"a",name:"HTMLAnchorElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},props:{_post_click_activation_steps:{value:function(ne){this.href&&(this.ownerDocument.defaultView.location=this.href)}}},attributes:{href:I,ping:String,download:String,target:String,rel:String,media:String,hreflang:String,type:String,referrerPolicy:R,coords:String,charset:String,name:String,rev:String,shape:String}}),s._inherit(C.a.prototype),T({tag:"area",name:"HTMLAreaElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{alt:String,target:String,download:String,rel:String,media:String,href:I,hreflang:String,type:String,shape:String,coords:String,ping:String,referrerPolicy:R,noHref:Boolean}}),s._inherit(C.area.prototype),T({tag:"br",name:"HTMLBRElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{clear:String}}),T({tag:"base",name:"HTMLBaseElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{target:String}}),T({tag:"body",name:"HTMLBodyElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},events:["afterprint","beforeprint","beforeunload","blur","error","focus","hashchange","load","message","offline","online","pagehide","pageshow","popstate","resize","scroll","storage","unload"],attributes:{text:{type:String,treatNullAsEmptyString:!0},link:{type:String,treatNullAsEmptyString:!0},vLink:{type:String,treatNullAsEmptyString:!0},aLink:{type:String,treatNullAsEmptyString:!0},bgColor:{type:String,treatNullAsEmptyString:!0},background:String}}),T({tag:"button",name:"HTMLButtonElement",ctor:function(re,de,oe){Z.call(this,re,de,oe)},props:ae,attributes:{name:String,value:String,disabled:Boolean,autofocus:Boolean,type:{type:["submit","reset","button","menu"],missing:"submit"},formTarget:String,formAction:I,formNoValidate:Boolean,formMethod:{type:["get","post","dialog"],invalid:"get",missing:""},formEnctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:""}}}),T({tag:"dl",name:"HTMLDListElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{compact:Boolean}}),T({tag:"data",name:"HTMLDataElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{value:String}}),T({tag:"datalist",name:"HTMLDataListElement",ctor:function(re,de,oe){X.call(this,re,de,oe)}}),T({tag:"details",name:"HTMLDetailsElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{open:Boolean}}),T({tag:"div",name:"HTMLDivElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{align:String}}),T({tag:"embed",name:"HTMLEmbedElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{src:I,type:String,width:String,height:String,align:String,name:String}}),T({tag:"fieldset",name:"HTMLFieldSetElement",ctor:function(re,de,oe){Z.call(this,re,de,oe)},props:ae,attributes:{disabled:Boolean,name:String}}),T({tag:"form",name:"HTMLFormElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{action:String,autocomplete:{type:["on","off"],missing:"on"},name:String,acceptCharset:{name:"accept-charset"},target:String,noValidate:Boolean,method:{type:["get","post","dialog"],invalid:"get",missing:"get"},enctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:"application/x-www-form-urlencoded"},encoding:{name:"enctype",type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:"application/x-www-form-urlencoded"}}}),T({tag:"hr",name:"HTMLHRElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{align:String,color:String,noShade:Boolean,size:String,width:String}}),T({tag:"head",name:"HTMLHeadElement",ctor:function(re,de,oe){X.call(this,re,de,oe)}}),T({tags:["h1","h2","h3","h4","h5","h6"],name:"HTMLHeadingElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{align:String}}),T({tag:"html",name:"HTMLHtmlElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{xmlns:I,version:String}}),T({tag:"iframe",name:"HTMLIFrameElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{src:I,srcdoc:String,name:String,width:String,height:String,seamless:Boolean,allow:Boolean,allowFullscreen:Boolean,allowUserMedia:Boolean,allowPaymentRequest:Boolean,referrerPolicy:R,loading:{type:["eager","lazy"],treatNullAsEmptyString:!0},align:String,scrolling:String,frameBorder:String,longDesc:I,marginHeight:{type:String,treatNullAsEmptyString:!0},marginWidth:{type:String,treatNullAsEmptyString:!0}}}),T({tag:"img",name:"HTMLImageElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{alt:String,src:I,srcset:String,crossOrigin:P,useMap:String,isMap:Boolean,sizes:String,height:{type:"unsigned long",default:0},width:{type:"unsigned long",default:0},referrerPolicy:R,loading:{type:["eager","lazy"],missing:""},name:String,lowsrc:I,align:String,hspace:{type:"unsigned long",default:0},vspace:{type:"unsigned long",default:0},longDesc:I,border:{type:String,treatNullAsEmptyString:!0}}}),T({tag:"input",name:"HTMLInputElement",ctor:function(re,de,oe){Z.call(this,re,de,oe)},props:{form:ae.form,_post_click_activation_steps:{value:function(ne){if(this.type==="checkbox")this.checked=!this.checked;else if(this.type==="radio")for(var re=this.form.getElementsByName(this.name),de=re.length-1;de>=0;de--){var oe=re[de];oe.checked=oe===this}}}},attributes:{name:String,disabled:Boolean,autofocus:Boolean,accept:String,alt:String,max:String,min:String,pattern:String,placeholder:String,step:String,dirName:String,defaultValue:{name:"value"},multiple:Boolean,required:Boolean,readOnly:Boolean,checked:Boolean,value:String,src:I,defaultChecked:{name:"checked",type:Boolean},size:{type:"unsigned long",default:20,min:1,setmin:1},width:{type:"unsigned long",min:0,setmin:0,default:0},height:{type:"unsigned long",min:0,setmin:0,default:0},minLength:{type:"unsigned long",min:0,setmin:0,default:-1},maxLength:{type:"unsigned long",min:0,setmin:0,default:-1},autocomplete:String,type:{type:["text","hidden","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"],missing:"text"},formTarget:String,formNoValidate:Boolean,formMethod:{type:["get","post"],invalid:"get",missing:""},formEnctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:""},inputMode:{type:["verbatim","latin","latin-name","latin-prose","full-width-latin","kana","kana-name","katakana","numeric","tel","email","url"],missing:""},align:String,useMap:String}}),T({tag:"keygen",name:"HTMLKeygenElement",ctor:function(re,de,oe){Z.call(this,re,de,oe)},props:ae,attributes:{name:String,disabled:Boolean,autofocus:Boolean,challenge:String,keytype:{type:["rsa"],missing:""}}}),T({tag:"li",name:"HTMLLIElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{value:{type:"long",default:0},type:String}}),T({tag:"label",name:"HTMLLabelElement",ctor:function(re,de,oe){Z.call(this,re,de,oe)},props:ae,attributes:{htmlFor:{name:"for",type:String}}}),T({tag:"legend",name:"HTMLLegendElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{align:String}}),T({tag:"link",name:"HTMLLinkElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{href:I,rel:String,media:String,hreflang:String,type:String,crossOrigin:P,nonce:String,integrity:String,referrerPolicy:R,imageSizes:String,imageSrcset:String,charset:String,rev:String,target:String}}),T({tag:"map",name:"HTMLMapElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{name:String}}),T({tag:"menu",name:"HTMLMenuElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{type:{type:["context","popup","toolbar"],missing:"toolbar"},label:String,compact:Boolean}}),T({tag:"meta",name:"HTMLMetaElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{name:String,content:String,httpEquiv:{name:"http-equiv",type:String},scheme:String}}),T({tag:"meter",name:"HTMLMeterElement",ctor:function(re,de,oe){Z.call(this,re,de,oe)},props:ae}),T({tags:["ins","del"],name:"HTMLModElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{cite:I,dateTime:String}}),T({tag:"ol",name:"HTMLOListElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},props:{_numitems:{get:function(){var ne=0;return this.childNodes.forEach(function(re){re.nodeType===t.ELEMENT_NODE&&re.tagName==="LI"&&ne++}),ne}}},attributes:{type:String,reversed:Boolean,start:{type:"long",default:function(){return this.reversed?this._numitems:1}},compact:Boolean}}),T({tag:"object",name:"HTMLObjectElement",ctor:function(re,de,oe){Z.call(this,re,de,oe)},props:ae,attributes:{data:I,type:String,name:String,useMap:String,typeMustMatch:Boolean,width:String,height:String,align:String,archive:String,code:String,declare:Boolean,hspace:{type:"unsigned long",default:0},standby:String,vspace:{type:"unsigned long",default:0},codeBase:I,codeType:String,border:{type:String,treatNullAsEmptyString:!0}}}),T({tag:"optgroup",name:"HTMLOptGroupElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{disabled:Boolean,label:String}}),T({tag:"option",name:"HTMLOptionElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},props:{form:{get:function(){for(var ne=this.parentNode;ne&&ne.nodeType===t.ELEMENT_NODE;){if(ne.localName==="select")return ne.form;ne=ne.parentNode}}},value:{get:function(){return this._getattr("value")||this.text},set:function(ne){this._setattr("value",ne)}},text:{get:function(){return this.textContent.replace(/[ \t\n\f\r]+/g," ").trim()},set:function(ne){this.textContent=ne}}},attributes:{disabled:Boolean,defaultSelected:{name:"selected",type:Boolean},label:String}}),T({tag:"output",name:"HTMLOutputElement",ctor:function(re,de,oe){Z.call(this,re,de,oe)},props:ae,attributes:{name:String}}),T({tag:"p",name:"HTMLParagraphElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{align:String}}),T({tag:"param",name:"HTMLParamElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{name:String,value:String,type:String,valueType:String}}),T({tags:["pre","listing","xmp"],name:"HTMLPreElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{width:{type:"long",default:0}}}),T({tag:"progress",name:"HTMLProgressElement",ctor:function(re,de,oe){Z.call(this,re,de,oe)},props:ae,attributes:{max:{type:Number,float:!0,default:1,min:0}}}),T({tags:["q","blockquote"],name:"HTMLQuoteElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{cite:I}}),T({tag:"script",name:"HTMLScriptElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},props:{text:{get:function(){for(var ne="",re=0,de=this.childNodes.length;re<de;re++){var oe=this.childNodes[re];oe.nodeType===t.TEXT_NODE&&(ne+=oe._data)}return ne},set:function(ne){this.removeChildren(),ne!==null&&ne!==""&&this.appendChild(this.ownerDocument.createTextNode(ne))}}},attributes:{src:I,type:String,charset:String,referrerPolicy:R,defer:Boolean,async:Boolean,nomodule:Boolean,crossOrigin:P,nonce:String,integrity:String}}),T({tag:"select",name:"HTMLSelectElement",ctor:function(re,de,oe){Z.call(this,re,de,oe)},props:{form:ae.form,options:{get:function(){return this.getElementsByTagName("option")}}},attributes:{autocomplete:String,name:String,disabled:Boolean,autofocus:Boolean,multiple:Boolean,required:Boolean,size:{type:"unsigned long",default:0}}}),T({tag:"span",name:"HTMLSpanElement",ctor:function(re,de,oe){X.call(this,re,de,oe)}}),T({tag:"style",name:"HTMLStyleElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{media:String,type:String,scoped:Boolean}}),T({tag:"caption",name:"HTMLTableCaptionElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{align:String}}),T({name:"HTMLTableCellElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{colSpan:{type:"unsigned long",default:1},rowSpan:{type:"unsigned long",default:1},scope:{type:["row","col","rowgroup","colgroup"],missing:""},abbr:String,align:String,axis:String,height:String,width:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},noWrap:Boolean,vAlign:String,bgColor:{type:String,treatNullAsEmptyString:!0}}}),T({tags:["col","colgroup"],name:"HTMLTableColElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{span:{type:"limited unsigned long with fallback",default:1,min:1},align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String,width:String}}),T({tag:"table",name:"HTMLTableElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},props:{rows:{get:function(){return this.getElementsByTagName("tr")}}},attributes:{align:String,border:String,frame:String,rules:String,summary:String,width:String,bgColor:{type:String,treatNullAsEmptyString:!0},cellPadding:{type:String,treatNullAsEmptyString:!0},cellSpacing:{type:String,treatNullAsEmptyString:!0}}}),T({tag:"template",name:"HTMLTemplateElement",ctor:function(re,de,oe){X.call(this,re,de,oe),this._contentFragment=re._templateDoc.createDocumentFragment()},props:{content:{get:function(){return this._contentFragment}},serialize:{value:function(){return this.content.serialize()}}}}),T({tag:"tr",name:"HTMLTableRowElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},props:{cells:{get:function(){return this.querySelectorAll("td,th")}}},attributes:{align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String,bgColor:{type:String,treatNullAsEmptyString:!0}}}),T({tags:["thead","tfoot","tbody"],name:"HTMLTableSectionElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},props:{rows:{get:function(){return this.getElementsByTagName("tr")}}},attributes:{align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String}}),T({tag:"textarea",name:"HTMLTextAreaElement",ctor:function(re,de,oe){Z.call(this,re,de,oe)},props:{form:ae.form,type:{get:function(){return"textarea"}},defaultValue:{get:function(){return this.textContent},set:function(ne){this.textContent=ne}},value:{get:function(){return this.defaultValue},set:function(ne){this.defaultValue=ne}},textLength:{get:function(){return this.value.length}}},attributes:{autocomplete:String,name:String,disabled:Boolean,autofocus:Boolean,placeholder:String,wrap:String,dirName:String,required:Boolean,readOnly:Boolean,rows:{type:"limited unsigned long with fallback",default:2},cols:{type:"limited unsigned long with fallback",default:20},maxLength:{type:"unsigned long",min:0,setmin:0,default:-1},minLength:{type:"unsigned long",min:0,setmin:0,default:-1},inputMode:{type:["verbatim","latin","latin-name","latin-prose","full-width-latin","kana","kana-name","katakana","numeric","tel","email","url"],missing:""}}}),T({tag:"time",name:"HTMLTimeElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{dateTime:String,pubDate:Boolean}}),T({tag:"title",name:"HTMLTitleElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},props:{text:{get:function(){return this.textContent}}}}),T({tag:"ul",name:"HTMLUListElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{type:String,compact:Boolean}}),T({name:"HTMLMediaElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{src:I,crossOrigin:P,preload:{type:["metadata","none","auto",{value:"",alias:"auto"}],missing:"auto"},loop:Boolean,autoplay:Boolean,mediaGroup:String,controls:Boolean,defaultMuted:{name:"muted",type:Boolean}}}),T({name:"HTMLAudioElement",tag:"audio",superclass:w.HTMLMediaElement,ctor:function(re,de,oe){w.HTMLMediaElement.call(this,re,de,oe)}}),T({name:"HTMLVideoElement",tag:"video",superclass:w.HTMLMediaElement,ctor:function(re,de,oe){w.HTMLMediaElement.call(this,re,de,oe)},attributes:{poster:I,width:{type:"unsigned long",min:0,default:0},height:{type:"unsigned long",min:0,default:0}}}),T({tag:"td",name:"HTMLTableDataCellElement",superclass:w.HTMLTableCellElement,ctor:function(re,de,oe){w.HTMLTableCellElement.call(this,re,de,oe)}}),T({tag:"th",name:"HTMLTableHeaderCellElement",superclass:w.HTMLTableCellElement,ctor:function(re,de,oe){w.HTMLTableCellElement.call(this,re,de,oe)}}),T({tag:"frameset",name:"HTMLFrameSetElement",ctor:function(re,de,oe){X.call(this,re,de,oe)}}),T({tag:"frame",name:"HTMLFrameElement",ctor:function(re,de,oe){X.call(this,re,de,oe)}}),T({tag:"canvas",name:"HTMLCanvasElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},props:{getContext:{value:a.nyi},probablySupportsContext:{value:a.nyi},setContext:{value:a.nyi},transferControlToProxy:{value:a.nyi},toDataURL:{value:a.nyi},toBlob:{value:a.nyi}},attributes:{width:{type:"unsigned long",default:300},height:{type:"unsigned long",default:150}}}),T({tag:"dialog",name:"HTMLDialogElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},props:{show:{value:a.nyi},showModal:{value:a.nyi},close:{value:a.nyi}},attributes:{open:Boolean,returnValue:String}}),T({tag:"menuitem",name:"HTMLMenuItemElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},props:{_label:{get:function(){var ne=this._getattr("label");return ne!==null&&ne!==""?ne:(ne=this.textContent,ne.replace(/[ \t\n\f\r]+/g," ").trim())}},label:{get:function(){var ne=this._getattr("label");return ne!==null?ne:this._label},set:function(ne){this._setattr("label",ne)}}},attributes:{type:{type:["command","checkbox","radio"],missing:"command"},icon:I,disabled:Boolean,checked:Boolean,radiogroup:String,default:Boolean}}),T({tag:"source",name:"HTMLSourceElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{srcset:String,sizes:String,media:String,src:I,type:String,width:String,height:String}}),T({tag:"track",name:"HTMLTrackElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{src:I,srclang:String,label:String,default:Boolean,kind:{type:["subtitles","captions","descriptions","chapters","metadata"],missing:"subtitles",invalid:"metadata"}},props:{NONE:{get:function(){return 0}},LOADING:{get:function(){return 1}},LOADED:{get:function(){return 2}},ERROR:{get:function(){return 3}},readyState:{get:a.nyi},track:{get:a.nyi}}}),T({tag:"font",name:"HTMLFontElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{color:{type:String,treatNullAsEmptyString:!0},face:{type:String},size:{type:String}}}),T({tag:"dir",name:"HTMLDirectoryElement",ctor:function(re,de,oe){X.call(this,re,de,oe)},attributes:{compact:Boolean}}),T({tags:["abbr","address","article","aside","b","bdi","bdo","cite","content","code","dd","dfn","dt","em","figcaption","figure","footer","header","hgroup","i","kbd","main","mark","nav","noscript","rb","rp","rt","rtc","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr","acronym","basefont","big","center","nobr","noembed","noframes","plaintext","strike","tt"]})}}),VS=pi({"external/npm/node_modules/domino/lib/svg.js"(i){"use strict";var t=zf(),e=BS(),o=bn(),a=my(),s=i.elements={},_=Object.create(null);i.createElement=function(T,I,P){var R=_[I]||C;return new R(T,I,P)};function w(T){return e(T,C,s,_)}var C=w({superclass:t,name:"SVGElement",ctor:function(I,P,R){t.call(this,I,P,o.NAMESPACE.SVG,R)},props:{style:{get:function(){return this._style||(this._style=new a(this)),this._style}}}});w({name:"SVGSVGElement",ctor:function(I,P,R){C.call(this,I,P,R)},tag:"svg",props:{createSVGRect:{value:function(){return i.createElement(this.ownerDocument,"rect",null)}}}}),w({tags:["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]})}}),sR=pi({"external/npm/node_modules/domino/lib/MutationConstants.js"(i,t){"use strict";t.exports={VALUE:1,ATTR:2,REMOVE_ATTR:3,REMOVE:4,MOVE:5,INSERT:6}}}),_y=pi({"external/npm/node_modules/domino/lib/Document.js"(i,t){"use strict";t.exports=Je;var e=Bo(),o=Ph(),a=uy(),s=zf(),_=DS(),w=RS(),C=Ff(),T=OS(),I=LS(),P=d0(),R=iR(),H=rR(),Z=u0(),X=fy(),fe=hy(),ae=FS(),ne=dy(),re=gy(),de=VS(),oe=bn(),Ve=sR(),tt=oe.NAMESPACE,dt=cy().isApiWritable;function Je(Pe,Ne){a.call(this),this.nodeType=e.DOCUMENT_NODE,this.isHTML=Pe,this._address=Ne||"about:blank",this.readyState="loading",this.implementation=new P(this),this.ownerDocument=null,this._contentType=Pe?"text/html":"application/xml",this.doctype=null,this.documentElement=null,this._templateDocCache=null,this._nodeIterators=null,this._nid=1,this._nextnid=2,this._nodes=[null,this],this.byId=Object.create(null),this.modclock=0}var we={event:"Event",customevent:"CustomEvent",uievent:"UIEvent",mouseevent:"MouseEvent"},Ge={events:"event",htmlevents:"event",mouseevents:"mouseevent",mutationevents:"mutationevent",uievents:"uievent"},yt=function(Pe,Ne,Dt){return{get:function(){var di=Pe.call(this);return di?di[Ne]:Dt},set:function(di){var Hr=Pe.call(this);Hr&&(Hr[Ne]=di)}}};function le(Pe,Ne){var Dt,di,Hr;return Pe===""&&(Pe=null),ne.isValidQName(Ne)||oe.InvalidCharacterError(),Dt=null,di=Ne,Hr=Ne.indexOf(":"),Hr>=0&&(Dt=Ne.substring(0,Hr),di=Ne.substring(Hr+1)),Dt!==null&&Pe===null&&oe.NamespaceError(),Dt==="xml"&&Pe!==tt.XML&&oe.NamespaceError(),(Dt==="xmlns"||Ne==="xmlns")&&Pe!==tt.XMLNS&&oe.NamespaceError(),Pe===tt.XMLNS&&!(Dt==="xmlns"||Ne==="xmlns")&&oe.NamespaceError(),{namespace:Pe,prefix:Dt,localName:di}}Je.prototype=Object.create(a.prototype,{_setMutationHandler:{value:function(Pe){this.mutationHandler=Pe}},_dispatchRendererEvent:{value:function(Pe,Ne,Dt){var di=this._nodes[Pe];di&&di._dispatchEvent(new C(Ne,Dt),!0)}},nodeName:{value:"#document"},nodeValue:{get:function(){return null},set:function(){}},documentURI:{get:function(){return this._address},set:oe.nyi},compatMode:{get:function(){return this._quirks?"BackCompat":"CSS1Compat"}},createTextNode:{value:function(Pe){return new _(this,String(Pe))}},createComment:{value:function(Pe){return new w(this,Pe)}},createDocumentFragment:{value:function(){return new T(this)}},createProcessingInstruction:{value:function(Pe,Ne){return(!ne.isValidName(Pe)||Ne.indexOf("?>")!==-1)&&oe.InvalidCharacterError(),new I(this,Pe,Ne)}},createAttribute:{value:function(Pe){return Pe=String(Pe),ne.isValidName(Pe)||oe.InvalidCharacterError(),this.isHTML&&(Pe=oe.toASCIILowerCase(Pe)),new s._Attr(null,Pe,null,null,"")}},createAttributeNS:{value:function(Pe,Ne){Pe=Pe==null||Pe===""?null:String(Pe),Ne=String(Ne);var Dt=le(Pe,Ne);return new s._Attr(null,Dt.localName,Dt.prefix,Dt.namespace,"")}},createElement:{value:function(Pe){return Pe=String(Pe),ne.isValidName(Pe)||oe.InvalidCharacterError(),this.isHTML?(/[A-Z]/.test(Pe)&&(Pe=oe.toASCIILowerCase(Pe)),re.createElement(this,Pe,null)):this.contentType==="application/xhtml+xml"?re.createElement(this,Pe,null):new s(this,Pe,null,null)},writable:dt},createElementNS:{value:function(Pe,Ne){Pe=Pe==null||Pe===""?null:String(Pe),Ne=String(Ne);var Dt=le(Pe,Ne);return this._createElementNS(Dt.localName,Dt.namespace,Dt.prefix)},writable:dt},_createElementNS:{value:function(Pe,Ne,Dt){return Ne===tt.HTML?re.createElement(this,Pe,Dt):Ne===tt.SVG?de.createElement(this,Pe,Dt):new s(this,Pe,Ne,Dt)}},createEvent:{value:function(Ne){Ne=Ne.toLowerCase();var Dt=Ge[Ne]||Ne,di=ae[we[Dt]];if(di){var Hr=new di;return Hr._initialized=!1,Hr}else oe.NotSupportedError()}},createTreeWalker:{value:function(Pe,Ne,Dt){if(!Pe)throw new TypeError("root argument is required");if(!(Pe instanceof e))throw new TypeError("root not a node");return Ne=Ne===void 0?Z.SHOW_ALL:+Ne,Dt=Dt===void 0?null:Dt,new R(Pe,Ne,Dt)}},createNodeIterator:{value:function(Pe,Ne,Dt){if(!Pe)throw new TypeError("root argument is required");if(!(Pe instanceof e))throw new TypeError("root not a node");return Ne=Ne===void 0?Z.SHOW_ALL:+Ne,Dt=Dt===void 0?null:Dt,new H(Pe,Ne,Dt)}},_attachNodeIterator:{value:function(Pe){this._nodeIterators||(this._nodeIterators=[]),this._nodeIterators.push(Pe)}},_detachNodeIterator:{value:function(Pe){var Ne=this._nodeIterators.indexOf(Pe);this._nodeIterators.splice(Ne,1)}},_preremoveNodeIterators:{value:function(Pe){this._nodeIterators&&this._nodeIterators.forEach(function(Ne){Ne._preremove(Pe)})}},_updateDocTypeElement:{value:function(){this.doctype=this.documentElement=null;for(var Ne=this.firstChild;Ne!==null;Ne=Ne.nextSibling)Ne.nodeType===e.DOCUMENT_TYPE_NODE?this.doctype=Ne:Ne.nodeType===e.ELEMENT_NODE&&(this.documentElement=Ne)}},insertBefore:{value:function(Ne,Dt){return e.prototype.insertBefore.call(this,Ne,Dt),this._updateDocTypeElement(),Ne}},replaceChild:{value:function(Ne,Dt){return e.prototype.replaceChild.call(this,Ne,Dt),this._updateDocTypeElement(),Dt}},removeChild:{value:function(Ne){return e.prototype.removeChild.call(this,Ne),this._updateDocTypeElement(),Ne}},getElementById:{value:function(Pe){var Ne=this.byId[Pe];return Ne?Ne instanceof Fi?Ne.getFirst():Ne:null}},_hasMultipleElementsWithId:{value:function(Pe){return this.byId[Pe]instanceof Fi}},getElementsByName:{value:s.prototype.getElementsByName},getElementsByTagName:{value:s.prototype.getElementsByTagName},getElementsByTagNameNS:{value:s.prototype.getElementsByTagNameNS},getElementsByClassName:{value:s.prototype.getElementsByClassName},adoptNode:{value:function(Ne){return Ne.nodeType===e.DOCUMENT_NODE&&oe.NotSupportedError(),Ne.nodeType===e.ATTRIBUTE_NODE||(Ne.parentNode&&Ne.parentNode.removeChild(Ne),Ne.ownerDocument!==this&&Ut(Ne,this)),Ne}},importNode:{value:function(Ne,Dt){return this.adoptNode(Ne.cloneNode(Dt))},writable:dt},origin:{get:function(){return null}},characterSet:{get:function(){return"UTF-8"}},contentType:{get:function(){return this._contentType}},URL:{get:function(){return this._address}},domain:{get:oe.nyi,set:oe.nyi},referrer:{get:oe.nyi},cookie:{get:oe.nyi,set:oe.nyi},lastModified:{get:oe.nyi},location:{get:function(){return this.defaultView?this.defaultView.location:null},set:oe.nyi},_titleElement:{get:function(){return this.getElementsByTagName("title").item(0)||null}},title:{get:function(){var Pe=this._titleElement,Ne=Pe?Pe.textContent:"";return Ne.replace(/[ \t\n\r\f]+/g," ").replace(/(^ )|( $)/g,"")},set:function(Pe){var Ne=this._titleElement,Dt=this.head;!Ne&&!Dt||(Ne||(Ne=this.createElement("title"),Dt.appendChild(Ne)),Ne.textContent=Pe)}},dir:yt(function(){var Pe=this.documentElement;if(Pe&&Pe.tagName==="HTML")return Pe},"dir",""),fgColor:yt(function(){return this.body},"text",""),linkColor:yt(function(){return this.body},"link",""),vlinkColor:yt(function(){return this.body},"vLink",""),alinkColor:yt(function(){return this.body},"aLink",""),bgColor:yt(function(){return this.body},"bgColor",""),charset:{get:function(){return this.characterSet}},inputEncoding:{get:function(){return this.characterSet}},scrollingElement:{get:function(){return this._quirks?this.body:this.documentElement}},body:{get:function(){return V(this.documentElement,"body")},set:oe.nyi},head:{get:function(){return V(this.documentElement,"head")}},images:{get:oe.nyi},embeds:{get:oe.nyi},plugins:{get:oe.nyi},links:{get:oe.nyi},forms:{get:oe.nyi},scripts:{get:oe.nyi},applets:{get:function(){return[]}},activeElement:{get:function(){return null}},innerHTML:{get:function(){return this.serialize()},set:oe.nyi},outerHTML:{get:function(){return this.serialize()},set:oe.nyi},write:{value:function(Pe){if(this.isHTML||oe.InvalidStateError(),!!this._parser){this._parser;var Ne=arguments.join("");this._parser.parse(Ne)}}},writeln:{value:function(Ne){this.write(Array.prototype.join.call(arguments,"")+`
`)}},open:{value:function(){this.documentElement=null}},close:{value:function(){this.readyState="interactive",this._dispatchEvent(new C("readystatechange"),!0),this._dispatchEvent(new C("DOMContentLoaded"),!0),this.readyState="complete",this._dispatchEvent(new C("readystatechange"),!0),this.defaultView&&this.defaultView._dispatchEvent(new C("load"),!0)}},clone:{value:function(){var Ne=new Je(this.isHTML,this._address);return Ne._quirks=this._quirks,Ne._contentType=this._contentType,Ne}},cloneNode:{value:function(Ne){var Dt=e.prototype.cloneNode.call(this,!1);if(Ne)for(var di=this.firstChild;di!==null;di=di.nextSibling)Dt._appendChild(Dt.importNode(di,!0));return Dt._updateDocTypeElement(),Dt}},isEqual:{value:function(Ne){return!0}},mutateValue:{value:function(Pe){this.mutationHandler&&this.mutationHandler({type:Ve.VALUE,target:Pe,data:Pe.data})}},mutateAttr:{value:function(Pe,Ne){this.mutationHandler&&this.mutationHandler({type:Ve.ATTR,target:Pe.ownerElement,attr:Pe})}},mutateRemoveAttr:{value:function(Pe){this.mutationHandler&&this.mutationHandler({type:Ve.REMOVE_ATTR,target:Pe.ownerElement,attr:Pe})}},mutateRemove:{value:function(Pe){this.mutationHandler&&this.mutationHandler({type:Ve.REMOVE,target:Pe.parentNode,node:Pe}),Rt(Pe)}},mutateInsert:{value:function(Pe){ot(Pe),this.mutationHandler&&this.mutationHandler({type:Ve.INSERT,target:Pe.parentNode,node:Pe})}},mutateMove:{value:function(Pe){this.mutationHandler&&this.mutationHandler({type:Ve.MOVE,target:Pe})}},addId:{value:function(Ne,Dt){var di=this.byId[Ne];di?(di instanceof Fi||(di=new Fi(di),this.byId[Ne]=di),di.add(Dt)):this.byId[Ne]=Dt}},delId:{value:function(Ne,Dt){var di=this.byId[Ne];oe.assert(di),di instanceof Fi?(di.del(Dt),di.length===1&&(this.byId[Ne]=di.downgrade())):this.byId[Ne]=void 0}},_resolve:{value:function(Pe){return new X(this._documentBaseURL).resolve(Pe)}},_documentBaseURL:{get:function(){var Pe=this._address;Pe==="about:blank"&&(Pe="/");var Ne=this.querySelector("base[href]");return Ne?new X(Pe).resolve(Ne.getAttribute("href")):Pe}},_templateDoc:{get:function(){if(!this._templateDocCache){var Pe=new Je(this.isHTML,this._address);this._templateDocCache=Pe._templateDocCache=Pe}return this._templateDocCache}},querySelector:{value:function(Pe){return fe(Pe,this)[0]}},querySelectorAll:{value:function(Pe){var Ne=fe(Pe,this);return Ne.item?Ne:new o(Ne)}}});var te=["abort","canplay","canplaythrough","change","click","contextmenu","cuechange","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","input","invalid","keydown","keypress","keyup","loadeddata","loadedmetadata","loadstart","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","pause","play","playing","progress","ratechange","readystatechange","reset","seeked","seeking","select","show","stalled","submit","suspend","timeupdate","volumechange","waiting","blur","error","focus","load","scroll"];te.forEach(function(Pe){Object.defineProperty(Je.prototype,"on"+Pe,{get:function(){return this._getEventHandler(Pe)},set:function(Ne){this._setEventHandler(Pe,Ne)}})});function V(Pe,Ne){if(Pe&&Pe.isHTML){for(var Dt=Pe.firstChild;Dt!==null;Dt=Dt.nextSibling)if(Dt.nodeType===e.ELEMENT_NODE&&Dt.localName===Ne&&Dt.namespaceURI===tt.HTML)return Dt}return null}function me(Pe){if(Pe._nid=Pe.ownerDocument._nextnid++,Pe.ownerDocument._nodes[Pe._nid]=Pe,Pe.nodeType===e.ELEMENT_NODE){var Ne=Pe.getAttribute("id");Ne&&Pe.ownerDocument.addId(Ne,Pe),Pe._roothook&&Pe._roothook()}}function Ue(Pe){if(Pe.nodeType===e.ELEMENT_NODE){var Ne=Pe.getAttribute("id");Ne&&Pe.ownerDocument.delId(Ne,Pe)}Pe.ownerDocument._nodes[Pe._nid]=void 0,Pe._nid=void 0}function ot(Pe){if(me(Pe),Pe.nodeType===e.ELEMENT_NODE)for(var Ne=Pe.firstChild;Ne!==null;Ne=Ne.nextSibling)ot(Ne)}function Rt(Pe){Ue(Pe);for(var Ne=Pe.firstChild;Ne!==null;Ne=Ne.nextSibling)Rt(Ne)}function Ut(Pe,Ne){Pe.ownerDocument=Ne,Pe._lastModTime=void 0,Object.prototype.hasOwnProperty.call(Pe,"_tagName")&&(Pe._tagName=void 0);for(var Dt=Pe.firstChild;Dt!==null;Dt=Dt.nextSibling)Ut(Dt,Ne)}function Fi(Pe){this.nodes=Object.create(null),this.nodes[Pe._nid]=Pe,this.length=1,this.firstNode=void 0}Fi.prototype.add=function(Pe){this.nodes[Pe._nid]||(this.nodes[Pe._nid]=Pe,this.length++,this.firstNode=void 0)},Fi.prototype.del=function(Pe){this.nodes[Pe._nid]&&(delete this.nodes[Pe._nid],this.length--,this.firstNode=void 0)},Fi.prototype.getFirst=function(){if(!this.firstNode){var Pe;for(Pe in this.nodes)(this.firstNode===void 0||this.firstNode.compareDocumentPosition(this.nodes[Pe])&e.DOCUMENT_POSITION_PRECEDING)&&(this.firstNode=this.nodes[Pe])}return this.firstNode},Fi.prototype.downgrade=function(){if(this.length===1){var Pe;for(Pe in this.nodes)return this.nodes[Pe]}return this}}}),by=pi({"external/npm/node_modules/domino/lib/DocumentType.js"(i,t){"use strict";t.exports=s;var e=Bo(),o=AS(),a=py();function s(_,w,C,T){o.call(this),this.nodeType=e.DOCUMENT_TYPE_NODE,this.ownerDocument=_||null,this.name=w,this.publicId=C||"",this.systemId=T||""}s.prototype=Object.create(o.prototype,{nodeName:{get:function(){return this.name}},nodeValue:{get:function(){return null},set:function(){}},clone:{value:function(){return new s(this.ownerDocument,this.name,this.publicId,this.systemId)}},isEqual:{value:function(w){return this.name===w.name&&this.publicId===w.publicId&&this.systemId===w.systemId}}}),Object.defineProperties(s.prototype,a)}}),vy=pi({"external/npm/node_modules/domino/lib/HTMLParser.js"(i,t){"use strict";t.exports=J;var e=_y(),o=by(),a=Bo(),s=bn().NAMESPACE,_=gy(),w=_.elements,C=Function.prototype.apply.bind(Array.prototype.push),T=-1,I=1,P=2,R=3,H=4,Z=5,X=[],fe=/^HTML$|^-\/\/W3O\/\/DTD W3 HTML Strict 3\.0\/\/EN\/\/$|^-\/W3C\/DTD HTML 4\.0 Transitional\/EN$|^\+\/\/Silmaril\/\/dtd html Pro v0r11 19970101\/\/|^-\/\/AdvaSoft Ltd\/\/DTD HTML 3\.0 asWedit \+ extensions\/\/|^-\/\/AS\/\/DTD HTML 3\.0 asWedit \+ extensions\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Level 1\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Level 2\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict Level 1\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict Level 2\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict\/\/|^-\/\/IETF\/\/DTD HTML 2\.0\/\/|^-\/\/IETF\/\/DTD HTML 2\.1E\/\/|^-\/\/IETF\/\/DTD HTML 3\.0\/\/|^-\/\/IETF\/\/DTD HTML 3\.2 Final\/\/|^-\/\/IETF\/\/DTD HTML 3\.2\/\/|^-\/\/IETF\/\/DTD HTML 3\/\/|^-\/\/IETF\/\/DTD HTML Level 0\/\/|^-\/\/IETF\/\/DTD HTML Level 1\/\/|^-\/\/IETF\/\/DTD HTML Level 2\/\/|^-\/\/IETF\/\/DTD HTML Level 3\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 0\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 1\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 2\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 3\/\/|^-\/\/IETF\/\/DTD HTML Strict\/\/|^-\/\/IETF\/\/DTD HTML\/\/|^-\/\/Metrius\/\/DTD Metrius Presentational\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 HTML Strict\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 HTML\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 Tables\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 HTML Strict\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 HTML\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 Tables\/\/|^-\/\/Netscape Comm\. Corp\.\/\/DTD HTML\/\/|^-\/\/Netscape Comm\. Corp\.\/\/DTD Strict HTML\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML 2\.0\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML Extended 1\.0\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML Extended Relaxed 1\.0\/\/|^-\/\/SoftQuad Software\/\/DTD HoTMetaL PRO 6\.0::19990601::extensions to HTML 4\.0\/\/|^-\/\/SoftQuad\/\/DTD HoTMetaL PRO 4\.0::19971010::extensions to HTML 4\.0\/\/|^-\/\/Spyglass\/\/DTD HTML 2\.0 Extended\/\/|^-\/\/SQ\/\/DTD HTML 2\.0 HoTMetaL \+ extensions\/\/|^-\/\/Sun Microsystems Corp\.\/\/DTD HotJava HTML\/\/|^-\/\/Sun Microsystems Corp\.\/\/DTD HotJava Strict HTML\/\/|^-\/\/W3C\/\/DTD HTML 3 1995-03-24\/\/|^-\/\/W3C\/\/DTD HTML 3\.2 Draft\/\/|^-\/\/W3C\/\/DTD HTML 3\.2 Final\/\/|^-\/\/W3C\/\/DTD HTML 3\.2\/\/|^-\/\/W3C\/\/DTD HTML 3\.2S Draft\/\/|^-\/\/W3C\/\/DTD HTML 4\.0 Frameset\/\/|^-\/\/W3C\/\/DTD HTML 4\.0 Transitional\/\/|^-\/\/W3C\/\/DTD HTML Experimental 19960712\/\/|^-\/\/W3C\/\/DTD HTML Experimental 970421\/\/|^-\/\/W3C\/\/DTD W3 HTML\/\/|^-\/\/W3O\/\/DTD W3 HTML 3\.0\/\/|^-\/\/WebTechs\/\/DTD Mozilla HTML 2\.0\/\/|^-\/\/WebTechs\/\/DTD Mozilla HTML\/\//i,ae="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",ne=/^-\/\/W3C\/\/DTD HTML 4\.01 Frameset\/\/|^-\/\/W3C\/\/DTD HTML 4\.01 Transitional\/\//i,re=/^-\/\/W3C\/\/DTD XHTML 1\.0 Frameset\/\/|^-\/\/W3C\/\/DTD XHTML 1\.0 Transitional\/\//i,de=Object.create(null);de[s.HTML]={__proto__:null,address:!0,applet:!0,area:!0,article:!0,aside:!0,base:!0,basefont:!0,bgsound:!0,blockquote:!0,body:!0,br:!0,button:!0,caption:!0,center:!0,col:!0,colgroup:!0,dd:!0,details:!0,dir:!0,div:!0,dl:!0,dt:!0,embed:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,frame:!0,frameset:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,head:!0,header:!0,hgroup:!0,hr:!0,html:!0,iframe:!0,img:!0,input:!0,li:!0,link:!0,listing:!0,main:!0,marquee:!0,menu:!0,meta:!0,nav:!0,noembed:!0,noframes:!0,noscript:!0,object:!0,ol:!0,p:!0,param:!0,plaintext:!0,pre:!0,script:!0,section:!0,select:!0,source:!0,style:!0,summary:!0,table:!0,tbody:!0,td:!0,template:!0,textarea:!0,tfoot:!0,th:!0,thead:!0,title:!0,tr:!0,track:!0,ul:!0,wbr:!0,xmp:!0},de[s.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0},de[s.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0};var oe=Object.create(null);oe[s.HTML]={__proto__:null,address:!0,div:!0,p:!0};var Ve=Object.create(null);Ve[s.HTML]={__proto__:null,dd:!0,dt:!0};var tt=Object.create(null);tt[s.HTML]={__proto__:null,table:!0,thead:!0,tbody:!0,tfoot:!0,tr:!0};var dt=Object.create(null);dt[s.HTML]={__proto__:null,dd:!0,dt:!0,li:!0,menuitem:!0,optgroup:!0,option:!0,p:!0,rb:!0,rp:!0,rt:!0,rtc:!0};var Je=Object.create(null);Je[s.HTML]={__proto__:null,caption:!0,colgroup:!0,dd:!0,dt:!0,li:!0,optgroup:!0,option:!0,p:!0,rb:!0,rp:!0,rt:!0,rtc:!0,tbody:!0,td:!0,tfoot:!0,th:!0,thead:!0,tr:!0};var we=Object.create(null);we[s.HTML]={__proto__:null,table:!0,template:!0,html:!0};var Ge=Object.create(null);Ge[s.HTML]={__proto__:null,tbody:!0,tfoot:!0,thead:!0,template:!0,html:!0};var yt=Object.create(null);yt[s.HTML]={__proto__:null,tr:!0,template:!0,html:!0};var le=Object.create(null);le[s.HTML]={__proto__:null,button:!0,fieldset:!0,input:!0,keygen:!0,object:!0,output:!0,select:!0,textarea:!0,img:!0};var te=Object.create(null);te[s.HTML]={__proto__:null,applet:!0,caption:!0,html:!0,table:!0,td:!0,th:!0,marquee:!0,object:!0,template:!0},te[s.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0},te[s.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0};var V=Object.create(te);V[s.HTML]=Object.create(te[s.HTML]),V[s.HTML].ol=!0,V[s.HTML].ul=!0;var me=Object.create(te);me[s.HTML]=Object.create(te[s.HTML]),me[s.HTML].button=!0;var Ue=Object.create(null);Ue[s.HTML]={__proto__:null,html:!0,table:!0,template:!0};var ot=Object.create(null);ot[s.HTML]={__proto__:null,optgroup:!0,option:!0};var Rt=Object.create(null);Rt[s.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0};var Ut=Object.create(null);Ut[s.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0};var Fi={__proto__:null,"xlink:actuate":s.XLINK,"xlink:arcrole":s.XLINK,"xlink:href":s.XLINK,"xlink:role":s.XLINK,"xlink:show":s.XLINK,"xlink:title":s.XLINK,"xlink:type":s.XLINK,"xml:base":s.XML,"xml:lang":s.XML,"xml:space":s.XML,xmlns:s.XMLNS,"xmlns:xlink":s.XMLNS},Pe={__proto__:null,attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},Ne={__proto__:null,altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},Dt={__proto__:null,0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},di={__proto__:null,AElig:198,"AElig;":198,AMP:38,"AMP;":38,Aacute:193,"Aacute;":193,"Abreve;":258,Acirc:194,"Acirc;":194,"Acy;":1040,"Afr;":[55349,56580],Agrave:192,"Agrave;":192,"Alpha;":913,"Amacr;":256,"And;":10835,"Aogon;":260,"Aopf;":[55349,56632],"ApplyFunction;":8289,Aring:197,"Aring;":197,"Ascr;":[55349,56476],"Assign;":8788,Atilde:195,"Atilde;":195,Auml:196,"Auml;":196,"Backslash;":8726,"Barv;":10983,"Barwed;":8966,"Bcy;":1041,"Because;":8757,"Bernoullis;":8492,"Beta;":914,"Bfr;":[55349,56581],"Bopf;":[55349,56633],"Breve;":728,"Bscr;":8492,"Bumpeq;":8782,"CHcy;":1063,COPY:169,"COPY;":169,"Cacute;":262,"Cap;":8914,"CapitalDifferentialD;":8517,"Cayleys;":8493,"Ccaron;":268,Ccedil:199,"Ccedil;":199,"Ccirc;":264,"Cconint;":8752,"Cdot;":266,"Cedilla;":184,"CenterDot;":183,"Cfr;":8493,"Chi;":935,"CircleDot;":8857,"CircleMinus;":8854,"CirclePlus;":8853,"CircleTimes;":8855,"ClockwiseContourIntegral;":8754,"CloseCurlyDoubleQuote;":8221,"CloseCurlyQuote;":8217,"Colon;":8759,"Colone;":10868,"Congruent;":8801,"Conint;":8751,"ContourIntegral;":8750,"Copf;":8450,"Coproduct;":8720,"CounterClockwiseContourIntegral;":8755,"Cross;":10799,"Cscr;":[55349,56478],"Cup;":8915,"CupCap;":8781,"DD;":8517,"DDotrahd;":10513,"DJcy;":1026,"DScy;":1029,"DZcy;":1039,"Dagger;":8225,"Darr;":8609,"Dashv;":10980,"Dcaron;":270,"Dcy;":1044,"Del;":8711,"Delta;":916,"Dfr;":[55349,56583],"DiacriticalAcute;":180,"DiacriticalDot;":729,"DiacriticalDoubleAcute;":733,"DiacriticalGrave;":96,"DiacriticalTilde;":732,"Diamond;":8900,"DifferentialD;":8518,"Dopf;":[55349,56635],"Dot;":168,"DotDot;":8412,"DotEqual;":8784,"DoubleContourIntegral;":8751,"DoubleDot;":168,"DoubleDownArrow;":8659,"DoubleLeftArrow;":8656,"DoubleLeftRightArrow;":8660,"DoubleLeftTee;":10980,"DoubleLongLeftArrow;":10232,"DoubleLongLeftRightArrow;":10234,"DoubleLongRightArrow;":10233,"DoubleRightArrow;":8658,"DoubleRightTee;":8872,"DoubleUpArrow;":8657,"DoubleUpDownArrow;":8661,"DoubleVerticalBar;":8741,"DownArrow;":8595,"DownArrowBar;":10515,"DownArrowUpArrow;":8693,"DownBreve;":785,"DownLeftRightVector;":10576,"DownLeftTeeVector;":10590,"DownLeftVector;":8637,"DownLeftVectorBar;":10582,"DownRightTeeVector;":10591,"DownRightVector;":8641,"DownRightVectorBar;":10583,"DownTee;":8868,"DownTeeArrow;":8615,"Downarrow;":8659,"Dscr;":[55349,56479],"Dstrok;":272,"ENG;":330,ETH:208,"ETH;":208,Eacute:201,"Eacute;":201,"Ecaron;":282,Ecirc:202,"Ecirc;":202,"Ecy;":1069,"Edot;":278,"Efr;":[55349,56584],Egrave:200,"Egrave;":200,"Element;":8712,"Emacr;":274,"EmptySmallSquare;":9723,"EmptyVerySmallSquare;":9643,"Eogon;":280,"Eopf;":[55349,56636],"Epsilon;":917,"Equal;":10869,"EqualTilde;":8770,"Equilibrium;":8652,"Escr;":8496,"Esim;":10867,"Eta;":919,Euml:203,"Euml;":203,"Exists;":8707,"ExponentialE;":8519,"Fcy;":1060,"Ffr;":[55349,56585],"FilledSmallSquare;":9724,"FilledVerySmallSquare;":9642,"Fopf;":[55349,56637],"ForAll;":8704,"Fouriertrf;":8497,"Fscr;":8497,"GJcy;":1027,GT:62,"GT;":62,"Gamma;":915,"Gammad;":988,"Gbreve;":286,"Gcedil;":290,"Gcirc;":284,"Gcy;":1043,"Gdot;":288,"Gfr;":[55349,56586],"Gg;":8921,"Gopf;":[55349,56638],"GreaterEqual;":8805,"GreaterEqualLess;":8923,"GreaterFullEqual;":8807,"GreaterGreater;":10914,"GreaterLess;":8823,"GreaterSlantEqual;":10878,"GreaterTilde;":8819,"Gscr;":[55349,56482],"Gt;":8811,"HARDcy;":1066,"Hacek;":711,"Hat;":94,"Hcirc;":292,"Hfr;":8460,"HilbertSpace;":8459,"Hopf;":8461,"HorizontalLine;":9472,"Hscr;":8459,"Hstrok;":294,"HumpDownHump;":8782,"HumpEqual;":8783,"IEcy;":1045,"IJlig;":306,"IOcy;":1025,Iacute:205,"Iacute;":205,Icirc:206,"Icirc;":206,"Icy;":1048,"Idot;":304,"Ifr;":8465,Igrave:204,"Igrave;":204,"Im;":8465,"Imacr;":298,"ImaginaryI;":8520,"Implies;":8658,"Int;":8748,"Integral;":8747,"Intersection;":8898,"InvisibleComma;":8291,"InvisibleTimes;":8290,"Iogon;":302,"Iopf;":[55349,56640],"Iota;":921,"Iscr;":8464,"Itilde;":296,"Iukcy;":1030,Iuml:207,"Iuml;":207,"Jcirc;":308,"Jcy;":1049,"Jfr;":[55349,56589],"Jopf;":[55349,56641],"Jscr;":[55349,56485],"Jsercy;":1032,"Jukcy;":1028,"KHcy;":1061,"KJcy;":1036,"Kappa;":922,"Kcedil;":310,"Kcy;":1050,"Kfr;":[55349,56590],"Kopf;":[55349,56642],"Kscr;":[55349,56486],"LJcy;":1033,LT:60,"LT;":60,"Lacute;":313,"Lambda;":923,"Lang;":10218,"Laplacetrf;":8466,"Larr;":8606,"Lcaron;":317,"Lcedil;":315,"Lcy;":1051,"LeftAngleBracket;":10216,"LeftArrow;":8592,"LeftArrowBar;":8676,"LeftArrowRightArrow;":8646,"LeftCeiling;":8968,"LeftDoubleBracket;":10214,"LeftDownTeeVector;":10593,"LeftDownVector;":8643,"LeftDownVectorBar;":10585,"LeftFloor;":8970,"LeftRightArrow;":8596,"LeftRightVector;":10574,"LeftTee;":8867,"LeftTeeArrow;":8612,"LeftTeeVector;":10586,"LeftTriangle;":8882,"LeftTriangleBar;":10703,"LeftTriangleEqual;":8884,"LeftUpDownVector;":10577,"LeftUpTeeVector;":10592,"LeftUpVector;":8639,"LeftUpVectorBar;":10584,"LeftVector;":8636,"LeftVectorBar;":10578,"Leftarrow;":8656,"Leftrightarrow;":8660,"LessEqualGreater;":8922,"LessFullEqual;":8806,"LessGreater;":8822,"LessLess;":10913,"LessSlantEqual;":10877,"LessTilde;":8818,"Lfr;":[55349,56591],"Ll;":8920,"Lleftarrow;":8666,"Lmidot;":319,"LongLeftArrow;":10229,"LongLeftRightArrow;":10231,"LongRightArrow;":10230,"Longleftarrow;":10232,"Longleftrightarrow;":10234,"Longrightarrow;":10233,"Lopf;":[55349,56643],"LowerLeftArrow;":8601,"LowerRightArrow;":8600,"Lscr;":8466,"Lsh;":8624,"Lstrok;":321,"Lt;":8810,"Map;":10501,"Mcy;":1052,"MediumSpace;":8287,"Mellintrf;":8499,"Mfr;":[55349,56592],"MinusPlus;":8723,"Mopf;":[55349,56644],"Mscr;":8499,"Mu;":924,"NJcy;":1034,"Nacute;":323,"Ncaron;":327,"Ncedil;":325,"Ncy;":1053,"NegativeMediumSpace;":8203,"NegativeThickSpace;":8203,"NegativeThinSpace;":8203,"NegativeVeryThinSpace;":8203,"NestedGreaterGreater;":8811,"NestedLessLess;":8810,"NewLine;":10,"Nfr;":[55349,56593],"NoBreak;":8288,"NonBreakingSpace;":160,"Nopf;":8469,"Not;":10988,"NotCongruent;":8802,"NotCupCap;":8813,"NotDoubleVerticalBar;":8742,"NotElement;":8713,"NotEqual;":8800,"NotEqualTilde;":[8770,824],"NotExists;":8708,"NotGreater;":8815,"NotGreaterEqual;":8817,"NotGreaterFullEqual;":[8807,824],"NotGreaterGreater;":[8811,824],"NotGreaterLess;":8825,"NotGreaterSlantEqual;":[10878,824],"NotGreaterTilde;":8821,"NotHumpDownHump;":[8782,824],"NotHumpEqual;":[8783,824],"NotLeftTriangle;":8938,"NotLeftTriangleBar;":[10703,824],"NotLeftTriangleEqual;":8940,"NotLess;":8814,"NotLessEqual;":8816,"NotLessGreater;":8824,"NotLessLess;":[8810,824],"NotLessSlantEqual;":[10877,824],"NotLessTilde;":8820,"NotNestedGreaterGreater;":[10914,824],"NotNestedLessLess;":[10913,824],"NotPrecedes;":8832,"NotPrecedesEqual;":[10927,824],"NotPrecedesSlantEqual;":8928,"NotReverseElement;":8716,"NotRightTriangle;":8939,"NotRightTriangleBar;":[10704,824],"NotRightTriangleEqual;":8941,"NotSquareSubset;":[8847,824],"NotSquareSubsetEqual;":8930,"NotSquareSuperset;":[8848,824],"NotSquareSupersetEqual;":8931,"NotSubset;":[8834,8402],"NotSubsetEqual;":8840,"NotSucceeds;":8833,"NotSucceedsEqual;":[10928,824],"NotSucceedsSlantEqual;":8929,"NotSucceedsTilde;":[8831,824],"NotSuperset;":[8835,8402],"NotSupersetEqual;":8841,"NotTilde;":8769,"NotTildeEqual;":8772,"NotTildeFullEqual;":8775,"NotTildeTilde;":8777,"NotVerticalBar;":8740,"Nscr;":[55349,56489],Ntilde:209,"Ntilde;":209,"Nu;":925,"OElig;":338,Oacute:211,"Oacute;":211,Ocirc:212,"Ocirc;":212,"Ocy;":1054,"Odblac;":336,"Ofr;":[55349,56594],Ograve:210,"Ograve;":210,"Omacr;":332,"Omega;":937,"Omicron;":927,"Oopf;":[55349,56646],"OpenCurlyDoubleQuote;":8220,"OpenCurlyQuote;":8216,"Or;":10836,"Oscr;":[55349,56490],Oslash:216,"Oslash;":216,Otilde:213,"Otilde;":213,"Otimes;":10807,Ouml:214,"Ouml;":214,"OverBar;":8254,"OverBrace;":9182,"OverBracket;":9140,"OverParenthesis;":9180,"PartialD;":8706,"Pcy;":1055,"Pfr;":[55349,56595],"Phi;":934,"Pi;":928,"PlusMinus;":177,"Poincareplane;":8460,"Popf;":8473,"Pr;":10939,"Precedes;":8826,"PrecedesEqual;":10927,"PrecedesSlantEqual;":8828,"PrecedesTilde;":8830,"Prime;":8243,"Product;":8719,"Proportion;":8759,"Proportional;":8733,"Pscr;":[55349,56491],"Psi;":936,QUOT:34,"QUOT;":34,"Qfr;":[55349,56596],"Qopf;":8474,"Qscr;":[55349,56492],"RBarr;":10512,REG:174,"REG;":174,"Racute;":340,"Rang;":10219,"Rarr;":8608,"Rarrtl;":10518,"Rcaron;":344,"Rcedil;":342,"Rcy;":1056,"Re;":8476,"ReverseElement;":8715,"ReverseEquilibrium;":8651,"ReverseUpEquilibrium;":10607,"Rfr;":8476,"Rho;":929,"RightAngleBracket;":10217,"RightArrow;":8594,"RightArrowBar;":8677,"RightArrowLeftArrow;":8644,"RightCeiling;":8969,"RightDoubleBracket;":10215,"RightDownTeeVector;":10589,"RightDownVector;":8642,"RightDownVectorBar;":10581,"RightFloor;":8971,"RightTee;":8866,"RightTeeArrow;":8614,"RightTeeVector;":10587,"RightTriangle;":8883,"RightTriangleBar;":10704,"RightTriangleEqual;":8885,"RightUpDownVector;":10575,"RightUpTeeVector;":10588,"RightUpVector;":8638,"RightUpVectorBar;":10580,"RightVector;":8640,"RightVectorBar;":10579,"Rightarrow;":8658,"Ropf;":8477,"RoundImplies;":10608,"Rrightarrow;":8667,"Rscr;":8475,"Rsh;":8625,"RuleDelayed;":10740,"SHCHcy;":1065,"SHcy;":1064,"SOFTcy;":1068,"Sacute;":346,"Sc;":10940,"Scaron;":352,"Scedil;":350,"Scirc;":348,"Scy;":1057,"Sfr;":[55349,56598],"ShortDownArrow;":8595,"ShortLeftArrow;":8592,"ShortRightArrow;":8594,"ShortUpArrow;":8593,"Sigma;":931,"SmallCircle;":8728,"Sopf;":[55349,56650],"Sqrt;":8730,"Square;":9633,"SquareIntersection;":8851,"SquareSubset;":8847,"SquareSubsetEqual;":8849,"SquareSuperset;":8848,"SquareSupersetEqual;":8850,"SquareUnion;":8852,"Sscr;":[55349,56494],"Star;":8902,"Sub;":8912,"Subset;":8912,"SubsetEqual;":8838,"Succeeds;":8827,"SucceedsEqual;":10928,"SucceedsSlantEqual;":8829,"SucceedsTilde;":8831,"SuchThat;":8715,"Sum;":8721,"Sup;":8913,"Superset;":8835,"SupersetEqual;":8839,"Supset;":8913,THORN:222,"THORN;":222,"TRADE;":8482,"TSHcy;":1035,"TScy;":1062,"Tab;":9,"Tau;":932,"Tcaron;":356,"Tcedil;":354,"Tcy;":1058,"Tfr;":[55349,56599],"Therefore;":8756,"Theta;":920,"ThickSpace;":[8287,8202],"ThinSpace;":8201,"Tilde;":8764,"TildeEqual;":8771,"TildeFullEqual;":8773,"TildeTilde;":8776,"Topf;":[55349,56651],"TripleDot;":8411,"Tscr;":[55349,56495],"Tstrok;":358,Uacute:218,"Uacute;":218,"Uarr;":8607,"Uarrocir;":10569,"Ubrcy;":1038,"Ubreve;":364,Ucirc:219,"Ucirc;":219,"Ucy;":1059,"Udblac;":368,"Ufr;":[55349,56600],Ugrave:217,"Ugrave;":217,"Umacr;":362,"UnderBar;":95,"UnderBrace;":9183,"UnderBracket;":9141,"UnderParenthesis;":9181,"Union;":8899,"UnionPlus;":8846,"Uogon;":370,"Uopf;":[55349,56652],"UpArrow;":8593,"UpArrowBar;":10514,"UpArrowDownArrow;":8645,"UpDownArrow;":8597,"UpEquilibrium;":10606,"UpTee;":8869,"UpTeeArrow;":8613,"Uparrow;":8657,"Updownarrow;":8661,"UpperLeftArrow;":8598,"UpperRightArrow;":8599,"Upsi;":978,"Upsilon;":933,"Uring;":366,"Uscr;":[55349,56496],"Utilde;":360,Uuml:220,"Uuml;":220,"VDash;":8875,"Vbar;":10987,"Vcy;":1042,"Vdash;":8873,"Vdashl;":10982,"Vee;":8897,"Verbar;":8214,"Vert;":8214,"VerticalBar;":8739,"VerticalLine;":124,"VerticalSeparator;":10072,"VerticalTilde;":8768,"VeryThinSpace;":8202,"Vfr;":[55349,56601],"Vopf;":[55349,56653],"Vscr;":[55349,56497],"Vvdash;":8874,"Wcirc;":372,"Wedge;":8896,"Wfr;":[55349,56602],"Wopf;":[55349,56654],"Wscr;":[55349,56498],"Xfr;":[55349,56603],"Xi;":926,"Xopf;":[55349,56655],"Xscr;":[55349,56499],"YAcy;":1071,"YIcy;":1031,"YUcy;":1070,Yacute:221,"Yacute;":221,"Ycirc;":374,"Ycy;":1067,"Yfr;":[55349,56604],"Yopf;":[55349,56656],"Yscr;":[55349,56500],"Yuml;":376,"ZHcy;":1046,"Zacute;":377,"Zcaron;":381,"Zcy;":1047,"Zdot;":379,"ZeroWidthSpace;":8203,"Zeta;":918,"Zfr;":8488,"Zopf;":8484,"Zscr;":[55349,56501],aacute:225,"aacute;":225,"abreve;":259,"ac;":8766,"acE;":[8766,819],"acd;":8767,acirc:226,"acirc;":226,acute:180,"acute;":180,"acy;":1072,aelig:230,"aelig;":230,"af;":8289,"afr;":[55349,56606],agrave:224,"agrave;":224,"alefsym;":8501,"aleph;":8501,"alpha;":945,"amacr;":257,"amalg;":10815,amp:38,"amp;":38,"and;":8743,"andand;":10837,"andd;":10844,"andslope;":10840,"andv;":10842,"ang;":8736,"ange;":10660,"angle;":8736,"angmsd;":8737,"angmsdaa;":10664,"angmsdab;":10665,"angmsdac;":10666,"angmsdad;":10667,"angmsdae;":10668,"angmsdaf;":10669,"angmsdag;":10670,"angmsdah;":10671,"angrt;":8735,"angrtvb;":8894,"angrtvbd;":10653,"angsph;":8738,"angst;":197,"angzarr;":9084,"aogon;":261,"aopf;":[55349,56658],"ap;":8776,"apE;":10864,"apacir;":10863,"ape;":8778,"apid;":8779,"apos;":39,"approx;":8776,"approxeq;":8778,aring:229,"aring;":229,"ascr;":[55349,56502],"ast;":42,"asymp;":8776,"asympeq;":8781,atilde:227,"atilde;":227,auml:228,"auml;":228,"awconint;":8755,"awint;":10769,"bNot;":10989,"backcong;":8780,"backepsilon;":1014,"backprime;":8245,"backsim;":8765,"backsimeq;":8909,"barvee;":8893,"barwed;":8965,"barwedge;":8965,"bbrk;":9141,"bbrktbrk;":9142,"bcong;":8780,"bcy;":1073,"bdquo;":8222,"becaus;":8757,"because;":8757,"bemptyv;":10672,"bepsi;":1014,"bernou;":8492,"beta;":946,"beth;":8502,"between;":8812,"bfr;":[55349,56607],"bigcap;":8898,"bigcirc;":9711,"bigcup;":8899,"bigodot;":10752,"bigoplus;":10753,"bigotimes;":10754,"bigsqcup;":10758,"bigstar;":9733,"bigtriangledown;":9661,"bigtriangleup;":9651,"biguplus;":10756,"bigvee;":8897,"bigwedge;":8896,"bkarow;":10509,"blacklozenge;":10731,"blacksquare;":9642,"blacktriangle;":9652,"blacktriangledown;":9662,"blacktriangleleft;":9666,"blacktriangleright;":9656,"blank;":9251,"blk12;":9618,"blk14;":9617,"blk34;":9619,"block;":9608,"bne;":[61,8421],"bnequiv;":[8801,8421],"bnot;":8976,"bopf;":[55349,56659],"bot;":8869,"bottom;":8869,"bowtie;":8904,"boxDL;":9559,"boxDR;":9556,"boxDl;":9558,"boxDr;":9555,"boxH;":9552,"boxHD;":9574,"boxHU;":9577,"boxHd;":9572,"boxHu;":9575,"boxUL;":9565,"boxUR;":9562,"boxUl;":9564,"boxUr;":9561,"boxV;":9553,"boxVH;":9580,"boxVL;":9571,"boxVR;":9568,"boxVh;":9579,"boxVl;":9570,"boxVr;":9567,"boxbox;":10697,"boxdL;":9557,"boxdR;":9554,"boxdl;":9488,"boxdr;":9484,"boxh;":9472,"boxhD;":9573,"boxhU;":9576,"boxhd;":9516,"boxhu;":9524,"boxminus;":8863,"boxplus;":8862,"boxtimes;":8864,"boxuL;":9563,"boxuR;":9560,"boxul;":9496,"boxur;":9492,"boxv;":9474,"boxvH;":9578,"boxvL;":9569,"boxvR;":9566,"boxvh;":9532,"boxvl;":9508,"boxvr;":9500,"bprime;":8245,"breve;":728,brvbar:166,"brvbar;":166,"bscr;":[55349,56503],"bsemi;":8271,"bsim;":8765,"bsime;":8909,"bsol;":92,"bsolb;":10693,"bsolhsub;":10184,"bull;":8226,"bullet;":8226,"bump;":8782,"bumpE;":10926,"bumpe;":8783,"bumpeq;":8783,"cacute;":263,"cap;":8745,"capand;":10820,"capbrcup;":10825,"capcap;":10827,"capcup;":10823,"capdot;":10816,"caps;":[8745,65024],"caret;":8257,"caron;":711,"ccaps;":10829,"ccaron;":269,ccedil:231,"ccedil;":231,"ccirc;":265,"ccups;":10828,"ccupssm;":10832,"cdot;":267,cedil:184,"cedil;":184,"cemptyv;":10674,cent:162,"cent;":162,"centerdot;":183,"cfr;":[55349,56608],"chcy;":1095,"check;":10003,"checkmark;":10003,"chi;":967,"cir;":9675,"cirE;":10691,"circ;":710,"circeq;":8791,"circlearrowleft;":8634,"circlearrowright;":8635,"circledR;":174,"circledS;":9416,"circledast;":8859,"circledcirc;":8858,"circleddash;":8861,"cire;":8791,"cirfnint;":10768,"cirmid;":10991,"cirscir;":10690,"clubs;":9827,"clubsuit;":9827,"colon;":58,"colone;":8788,"coloneq;":8788,"comma;":44,"commat;":64,"comp;":8705,"compfn;":8728,"complement;":8705,"complexes;":8450,"cong;":8773,"congdot;":10861,"conint;":8750,"copf;":[55349,56660],"coprod;":8720,copy:169,"copy;":169,"copysr;":8471,"crarr;":8629,"cross;":10007,"cscr;":[55349,56504],"csub;":10959,"csube;":10961,"csup;":10960,"csupe;":10962,"ctdot;":8943,"cudarrl;":10552,"cudarrr;":10549,"cuepr;":8926,"cuesc;":8927,"cularr;":8630,"cularrp;":10557,"cup;":8746,"cupbrcap;":10824,"cupcap;":10822,"cupcup;":10826,"cupdot;":8845,"cupor;":10821,"cups;":[8746,65024],"curarr;":8631,"curarrm;":10556,"curlyeqprec;":8926,"curlyeqsucc;":8927,"curlyvee;":8910,"curlywedge;":8911,curren:164,"curren;":164,"curvearrowleft;":8630,"curvearrowright;":8631,"cuvee;":8910,"cuwed;":8911,"cwconint;":8754,"cwint;":8753,"cylcty;":9005,"dArr;":8659,"dHar;":10597,"dagger;":8224,"daleth;":8504,"darr;":8595,"dash;":8208,"dashv;":8867,"dbkarow;":10511,"dblac;":733,"dcaron;":271,"dcy;":1076,"dd;":8518,"ddagger;":8225,"ddarr;":8650,"ddotseq;":10871,deg:176,"deg;":176,"delta;":948,"demptyv;":10673,"dfisht;":10623,"dfr;":[55349,56609],"dharl;":8643,"dharr;":8642,"diam;":8900,"diamond;":8900,"diamondsuit;":9830,"diams;":9830,"die;":168,"digamma;":989,"disin;":8946,"div;":247,divide:247,"divide;":247,"divideontimes;":8903,"divonx;":8903,"djcy;":1106,"dlcorn;":8990,"dlcrop;":8973,"dollar;":36,"dopf;":[55349,56661],"dot;":729,"doteq;":8784,"doteqdot;":8785,"dotminus;":8760,"dotplus;":8724,"dotsquare;":8865,"doublebarwedge;":8966,"downarrow;":8595,"downdownarrows;":8650,"downharpoonleft;":8643,"downharpoonright;":8642,"drbkarow;":10512,"drcorn;":8991,"drcrop;":8972,"dscr;":[55349,56505],"dscy;":1109,"dsol;":10742,"dstrok;":273,"dtdot;":8945,"dtri;":9663,"dtrif;":9662,"duarr;":8693,"duhar;":10607,"dwangle;":10662,"dzcy;":1119,"dzigrarr;":10239,"eDDot;":10871,"eDot;":8785,eacute:233,"eacute;":233,"easter;":10862,"ecaron;":283,"ecir;":8790,ecirc:234,"ecirc;":234,"ecolon;":8789,"ecy;":1101,"edot;":279,"ee;":8519,"efDot;":8786,"efr;":[55349,56610],"eg;":10906,egrave:232,"egrave;":232,"egs;":10902,"egsdot;":10904,"el;":10905,"elinters;":9191,"ell;":8467,"els;":10901,"elsdot;":10903,"emacr;":275,"empty;":8709,"emptyset;":8709,"emptyv;":8709,"emsp13;":8196,"emsp14;":8197,"emsp;":8195,"eng;":331,"ensp;":8194,"eogon;":281,"eopf;":[55349,56662],"epar;":8917,"eparsl;":10723,"eplus;":10865,"epsi;":949,"epsilon;":949,"epsiv;":1013,"eqcirc;":8790,"eqcolon;":8789,"eqsim;":8770,"eqslantgtr;":10902,"eqslantless;":10901,"equals;":61,"equest;":8799,"equiv;":8801,"equivDD;":10872,"eqvparsl;":10725,"erDot;":8787,"erarr;":10609,"escr;":8495,"esdot;":8784,"esim;":8770,"eta;":951,eth:240,"eth;":240,euml:235,"euml;":235,"euro;":8364,"excl;":33,"exist;":8707,"expectation;":8496,"exponentiale;":8519,"fallingdotseq;":8786,"fcy;":1092,"female;":9792,"ffilig;":64259,"fflig;":64256,"ffllig;":64260,"ffr;":[55349,56611],"filig;":64257,"fjlig;":[102,106],"flat;":9837,"fllig;":64258,"fltns;":9649,"fnof;":402,"fopf;":[55349,56663],"forall;":8704,"fork;":8916,"forkv;":10969,"fpartint;":10765,frac12:189,"frac12;":189,"frac13;":8531,frac14:188,"frac14;":188,"frac15;":8533,"frac16;":8537,"frac18;":8539,"frac23;":8532,"frac25;":8534,frac34:190,"frac34;":190,"frac35;":8535,"frac38;":8540,"frac45;":8536,"frac56;":8538,"frac58;":8541,"frac78;":8542,"frasl;":8260,"frown;":8994,"fscr;":[55349,56507],"gE;":8807,"gEl;":10892,"gacute;":501,"gamma;":947,"gammad;":989,"gap;":10886,"gbreve;":287,"gcirc;":285,"gcy;":1075,"gdot;":289,"ge;":8805,"gel;":8923,"geq;":8805,"geqq;":8807,"geqslant;":10878,"ges;":10878,"gescc;":10921,"gesdot;":10880,"gesdoto;":10882,"gesdotol;":10884,"gesl;":[8923,65024],"gesles;":10900,"gfr;":[55349,56612],"gg;":8811,"ggg;":8921,"gimel;":8503,"gjcy;":1107,"gl;":8823,"glE;":10898,"gla;":10917,"glj;":10916,"gnE;":8809,"gnap;":10890,"gnapprox;":10890,"gne;":10888,"gneq;":10888,"gneqq;":8809,"gnsim;":8935,"gopf;":[55349,56664],"grave;":96,"gscr;":8458,"gsim;":8819,"gsime;":10894,"gsiml;":10896,gt:62,"gt;":62,"gtcc;":10919,"gtcir;":10874,"gtdot;":8919,"gtlPar;":10645,"gtquest;":10876,"gtrapprox;":10886,"gtrarr;":10616,"gtrdot;":8919,"gtreqless;":8923,"gtreqqless;":10892,"gtrless;":8823,"gtrsim;":8819,"gvertneqq;":[8809,65024],"gvnE;":[8809,65024],"hArr;":8660,"hairsp;":8202,"half;":189,"hamilt;":8459,"hardcy;":1098,"harr;":8596,"harrcir;":10568,"harrw;":8621,"hbar;":8463,"hcirc;":293,"hearts;":9829,"heartsuit;":9829,"hellip;":8230,"hercon;":8889,"hfr;":[55349,56613],"hksearow;":10533,"hkswarow;":10534,"hoarr;":8703,"homtht;":8763,"hookleftarrow;":8617,"hookrightarrow;":8618,"hopf;":[55349,56665],"horbar;":8213,"hscr;":[55349,56509],"hslash;":8463,"hstrok;":295,"hybull;":8259,"hyphen;":8208,iacute:237,"iacute;":237,"ic;":8291,icirc:238,"icirc;":238,"icy;":1080,"iecy;":1077,iexcl:161,"iexcl;":161,"iff;":8660,"ifr;":[55349,56614],igrave:236,"igrave;":236,"ii;":8520,"iiiint;":10764,"iiint;":8749,"iinfin;":10716,"iiota;":8489,"ijlig;":307,"imacr;":299,"image;":8465,"imagline;":8464,"imagpart;":8465,"imath;":305,"imof;":8887,"imped;":437,"in;":8712,"incare;":8453,"infin;":8734,"infintie;":10717,"inodot;":305,"int;":8747,"intcal;":8890,"integers;":8484,"intercal;":8890,"intlarhk;":10775,"intprod;":10812,"iocy;":1105,"iogon;":303,"iopf;":[55349,56666],"iota;":953,"iprod;":10812,iquest:191,"iquest;":191,"iscr;":[55349,56510],"isin;":8712,"isinE;":8953,"isindot;":8949,"isins;":8948,"isinsv;":8947,"isinv;":8712,"it;":8290,"itilde;":297,"iukcy;":1110,iuml:239,"iuml;":239,"jcirc;":309,"jcy;":1081,"jfr;":[55349,56615],"jmath;":567,"jopf;":[55349,56667],"jscr;":[55349,56511],"jsercy;":1112,"jukcy;":1108,"kappa;":954,"kappav;":1008,"kcedil;":311,"kcy;":1082,"kfr;":[55349,56616],"kgreen;":312,"khcy;":1093,"kjcy;":1116,"kopf;":[55349,56668],"kscr;":[55349,56512],"lAarr;":8666,"lArr;":8656,"lAtail;":10523,"lBarr;":10510,"lE;":8806,"lEg;":10891,"lHar;":10594,"lacute;":314,"laemptyv;":10676,"lagran;":8466,"lambda;":955,"lang;":10216,"langd;":10641,"langle;":10216,"lap;":10885,laquo:171,"laquo;":171,"larr;":8592,"larrb;":8676,"larrbfs;":10527,"larrfs;":10525,"larrhk;":8617,"larrlp;":8619,"larrpl;":10553,"larrsim;":10611,"larrtl;":8610,"lat;":10923,"latail;":10521,"late;":10925,"lates;":[10925,65024],"lbarr;":10508,"lbbrk;":10098,"lbrace;":123,"lbrack;":91,"lbrke;":10635,"lbrksld;":10639,"lbrkslu;":10637,"lcaron;":318,"lcedil;":316,"lceil;":8968,"lcub;":123,"lcy;":1083,"ldca;":10550,"ldquo;":8220,"ldquor;":8222,"ldrdhar;":10599,"ldrushar;":10571,"ldsh;":8626,"le;":8804,"leftarrow;":8592,"leftarrowtail;":8610,"leftharpoondown;":8637,"leftharpoonup;":8636,"leftleftarrows;":8647,"leftrightarrow;":8596,"leftrightarrows;":8646,"leftrightharpoons;":8651,"leftrightsquigarrow;":8621,"leftthreetimes;":8907,"leg;":8922,"leq;":8804,"leqq;":8806,"leqslant;":10877,"les;":10877,"lescc;":10920,"lesdot;":10879,"lesdoto;":10881,"lesdotor;":10883,"lesg;":[8922,65024],"lesges;":10899,"lessapprox;":10885,"lessdot;":8918,"lesseqgtr;":8922,"lesseqqgtr;":10891,"lessgtr;":8822,"lesssim;":8818,"lfisht;":10620,"lfloor;":8970,"lfr;":[55349,56617],"lg;":8822,"lgE;":10897,"lhard;":8637,"lharu;":8636,"lharul;":10602,"lhblk;":9604,"ljcy;":1113,"ll;":8810,"llarr;":8647,"llcorner;":8990,"llhard;":10603,"lltri;":9722,"lmidot;":320,"lmoust;":9136,"lmoustache;":9136,"lnE;":8808,"lnap;":10889,"lnapprox;":10889,"lne;":10887,"lneq;":10887,"lneqq;":8808,"lnsim;":8934,"loang;":10220,"loarr;":8701,"lobrk;":10214,"longleftarrow;":10229,"longleftrightarrow;":10231,"longmapsto;":10236,"longrightarrow;":10230,"looparrowleft;":8619,"looparrowright;":8620,"lopar;":10629,"lopf;":[55349,56669],"loplus;":10797,"lotimes;":10804,"lowast;":8727,"lowbar;":95,"loz;":9674,"lozenge;":9674,"lozf;":10731,"lpar;":40,"lparlt;":10643,"lrarr;":8646,"lrcorner;":8991,"lrhar;":8651,"lrhard;":10605,"lrm;":8206,"lrtri;":8895,"lsaquo;":8249,"lscr;":[55349,56513],"lsh;":8624,"lsim;":8818,"lsime;":10893,"lsimg;":10895,"lsqb;":91,"lsquo;":8216,"lsquor;":8218,"lstrok;":322,lt:60,"lt;":60,"ltcc;":10918,"ltcir;":10873,"ltdot;":8918,"lthree;":8907,"ltimes;":8905,"ltlarr;":10614,"ltquest;":10875,"ltrPar;":10646,"ltri;":9667,"ltrie;":8884,"ltrif;":9666,"lurdshar;":10570,"luruhar;":10598,"lvertneqq;":[8808,65024],"lvnE;":[8808,65024],"mDDot;":8762,macr:175,"macr;":175,"male;":9794,"malt;":10016,"maltese;":10016,"map;":8614,"mapsto;":8614,"mapstodown;":8615,"mapstoleft;":8612,"mapstoup;":8613,"marker;":9646,"mcomma;":10793,"mcy;":1084,"mdash;":8212,"measuredangle;":8737,"mfr;":[55349,56618],"mho;":8487,micro:181,"micro;":181,"mid;":8739,"midast;":42,"midcir;":10992,middot:183,"middot;":183,"minus;":8722,"minusb;":8863,"minusd;":8760,"minusdu;":10794,"mlcp;":10971,"mldr;":8230,"mnplus;":8723,"models;":8871,"mopf;":[55349,56670],"mp;":8723,"mscr;":[55349,56514],"mstpos;":8766,"mu;":956,"multimap;":8888,"mumap;":8888,"nGg;":[8921,824],"nGt;":[8811,8402],"nGtv;":[8811,824],"nLeftarrow;":8653,"nLeftrightarrow;":8654,"nLl;":[8920,824],"nLt;":[8810,8402],"nLtv;":[8810,824],"nRightarrow;":8655,"nVDash;":8879,"nVdash;":8878,"nabla;":8711,"nacute;":324,"nang;":[8736,8402],"nap;":8777,"napE;":[10864,824],"napid;":[8779,824],"napos;":329,"napprox;":8777,"natur;":9838,"natural;":9838,"naturals;":8469,nbsp:160,"nbsp;":160,"nbump;":[8782,824],"nbumpe;":[8783,824],"ncap;":10819,"ncaron;":328,"ncedil;":326,"ncong;":8775,"ncongdot;":[10861,824],"ncup;":10818,"ncy;":1085,"ndash;":8211,"ne;":8800,"neArr;":8663,"nearhk;":10532,"nearr;":8599,"nearrow;":8599,"nedot;":[8784,824],"nequiv;":8802,"nesear;":10536,"nesim;":[8770,824],"nexist;":8708,"nexists;":8708,"nfr;":[55349,56619],"ngE;":[8807,824],"nge;":8817,"ngeq;":8817,"ngeqq;":[8807,824],"ngeqslant;":[10878,824],"nges;":[10878,824],"ngsim;":8821,"ngt;":8815,"ngtr;":8815,"nhArr;":8654,"nharr;":8622,"nhpar;":10994,"ni;":8715,"nis;":8956,"nisd;":8954,"niv;":8715,"njcy;":1114,"nlArr;":8653,"nlE;":[8806,824],"nlarr;":8602,"nldr;":8229,"nle;":8816,"nleftarrow;":8602,"nleftrightarrow;":8622,"nleq;":8816,"nleqq;":[8806,824],"nleqslant;":[10877,824],"nles;":[10877,824],"nless;":8814,"nlsim;":8820,"nlt;":8814,"nltri;":8938,"nltrie;":8940,"nmid;":8740,"nopf;":[55349,56671],not:172,"not;":172,"notin;":8713,"notinE;":[8953,824],"notindot;":[8949,824],"notinva;":8713,"notinvb;":8951,"notinvc;":8950,"notni;":8716,"notniva;":8716,"notnivb;":8958,"notnivc;":8957,"npar;":8742,"nparallel;":8742,"nparsl;":[11005,8421],"npart;":[8706,824],"npolint;":10772,"npr;":8832,"nprcue;":8928,"npre;":[10927,824],"nprec;":8832,"npreceq;":[10927,824],"nrArr;":8655,"nrarr;":8603,"nrarrc;":[10547,824],"nrarrw;":[8605,824],"nrightarrow;":8603,"nrtri;":8939,"nrtrie;":8941,"nsc;":8833,"nsccue;":8929,"nsce;":[10928,824],"nscr;":[55349,56515],"nshortmid;":8740,"nshortparallel;":8742,"nsim;":8769,"nsime;":8772,"nsimeq;":8772,"nsmid;":8740,"nspar;":8742,"nsqsube;":8930,"nsqsupe;":8931,"nsub;":8836,"nsubE;":[10949,824],"nsube;":8840,"nsubset;":[8834,8402],"nsubseteq;":8840,"nsubseteqq;":[10949,824],"nsucc;":8833,"nsucceq;":[10928,824],"nsup;":8837,"nsupE;":[10950,824],"nsupe;":8841,"nsupset;":[8835,8402],"nsupseteq;":8841,"nsupseteqq;":[10950,824],"ntgl;":8825,ntilde:241,"ntilde;":241,"ntlg;":8824,"ntriangleleft;":8938,"ntrianglelefteq;":8940,"ntriangleright;":8939,"ntrianglerighteq;":8941,"nu;":957,"num;":35,"numero;":8470,"numsp;":8199,"nvDash;":8877,"nvHarr;":10500,"nvap;":[8781,8402],"nvdash;":8876,"nvge;":[8805,8402],"nvgt;":[62,8402],"nvinfin;":10718,"nvlArr;":10498,"nvle;":[8804,8402],"nvlt;":[60,8402],"nvltrie;":[8884,8402],"nvrArr;":10499,"nvrtrie;":[8885,8402],"nvsim;":[8764,8402],"nwArr;":8662,"nwarhk;":10531,"nwarr;":8598,"nwarrow;":8598,"nwnear;":10535,"oS;":9416,oacute:243,"oacute;":243,"oast;":8859,"ocir;":8858,ocirc:244,"ocirc;":244,"ocy;":1086,"odash;":8861,"odblac;":337,"odiv;":10808,"odot;":8857,"odsold;":10684,"oelig;":339,"ofcir;":10687,"ofr;":[55349,56620],"ogon;":731,ograve:242,"ograve;":242,"ogt;":10689,"ohbar;":10677,"ohm;":937,"oint;":8750,"olarr;":8634,"olcir;":10686,"olcross;":10683,"oline;":8254,"olt;":10688,"omacr;":333,"omega;":969,"omicron;":959,"omid;":10678,"ominus;":8854,"oopf;":[55349,56672],"opar;":10679,"operp;":10681,"oplus;":8853,"or;":8744,"orarr;":8635,"ord;":10845,"order;":8500,"orderof;":8500,ordf:170,"ordf;":170,ordm:186,"ordm;":186,"origof;":8886,"oror;":10838,"orslope;":10839,"orv;":10843,"oscr;":8500,oslash:248,"oslash;":248,"osol;":8856,otilde:245,"otilde;":245,"otimes;":8855,"otimesas;":10806,ouml:246,"ouml;":246,"ovbar;":9021,"par;":8741,para:182,"para;":182,"parallel;":8741,"parsim;":10995,"parsl;":11005,"part;":8706,"pcy;":1087,"percnt;":37,"period;":46,"permil;":8240,"perp;":8869,"pertenk;":8241,"pfr;":[55349,56621],"phi;":966,"phiv;":981,"phmmat;":8499,"phone;":9742,"pi;":960,"pitchfork;":8916,"piv;":982,"planck;":8463,"planckh;":8462,"plankv;":8463,"plus;":43,"plusacir;":10787,"plusb;":8862,"pluscir;":10786,"plusdo;":8724,"plusdu;":10789,"pluse;":10866,plusmn:177,"plusmn;":177,"plussim;":10790,"plustwo;":10791,"pm;":177,"pointint;":10773,"popf;":[55349,56673],pound:163,"pound;":163,"pr;":8826,"prE;":10931,"prap;":10935,"prcue;":8828,"pre;":10927,"prec;":8826,"precapprox;":10935,"preccurlyeq;":8828,"preceq;":10927,"precnapprox;":10937,"precneqq;":10933,"precnsim;":8936,"precsim;":8830,"prime;":8242,"primes;":8473,"prnE;":10933,"prnap;":10937,"prnsim;":8936,"prod;":8719,"profalar;":9006,"profline;":8978,"profsurf;":8979,"prop;":8733,"propto;":8733,"prsim;":8830,"prurel;":8880,"pscr;":[55349,56517],"psi;":968,"puncsp;":8200,"qfr;":[55349,56622],"qint;":10764,"qopf;":[55349,56674],"qprime;":8279,"qscr;":[55349,56518],"quaternions;":8461,"quatint;":10774,"quest;":63,"questeq;":8799,quot:34,"quot;":34,"rAarr;":8667,"rArr;":8658,"rAtail;":10524,"rBarr;":10511,"rHar;":10596,"race;":[8765,817],"racute;":341,"radic;":8730,"raemptyv;":10675,"rang;":10217,"rangd;":10642,"range;":10661,"rangle;":10217,raquo:187,"raquo;":187,"rarr;":8594,"rarrap;":10613,"rarrb;":8677,"rarrbfs;":10528,"rarrc;":10547,"rarrfs;":10526,"rarrhk;":8618,"rarrlp;":8620,"rarrpl;":10565,"rarrsim;":10612,"rarrtl;":8611,"rarrw;":8605,"ratail;":10522,"ratio;":8758,"rationals;":8474,"rbarr;":10509,"rbbrk;":10099,"rbrace;":125,"rbrack;":93,"rbrke;":10636,"rbrksld;":10638,"rbrkslu;":10640,"rcaron;":345,"rcedil;":343,"rceil;":8969,"rcub;":125,"rcy;":1088,"rdca;":10551,"rdldhar;":10601,"rdquo;":8221,"rdquor;":8221,"rdsh;":8627,"real;":8476,"realine;":8475,"realpart;":8476,"reals;":8477,"rect;":9645,reg:174,"reg;":174,"rfisht;":10621,"rfloor;":8971,"rfr;":[55349,56623],"rhard;":8641,"rharu;":8640,"rharul;":10604,"rho;":961,"rhov;":1009,"rightarrow;":8594,"rightarrowtail;":8611,"rightharpoondown;":8641,"rightharpoonup;":8640,"rightleftarrows;":8644,"rightleftharpoons;":8652,"rightrightarrows;":8649,"rightsquigarrow;":8605,"rightthreetimes;":8908,"ring;":730,"risingdotseq;":8787,"rlarr;":8644,"rlhar;":8652,"rlm;":8207,"rmoust;":9137,"rmoustache;":9137,"rnmid;":10990,"roang;":10221,"roarr;":8702,"robrk;":10215,"ropar;":10630,"ropf;":[55349,56675],"roplus;":10798,"rotimes;":10805,"rpar;":41,"rpargt;":10644,"rppolint;":10770,"rrarr;":8649,"rsaquo;":8250,"rscr;":[55349,56519],"rsh;":8625,"rsqb;":93,"rsquo;":8217,"rsquor;":8217,"rthree;":8908,"rtimes;":8906,"rtri;":9657,"rtrie;":8885,"rtrif;":9656,"rtriltri;":10702,"ruluhar;":10600,"rx;":8478,"sacute;":347,"sbquo;":8218,"sc;":8827,"scE;":10932,"scap;":10936,"scaron;":353,"sccue;":8829,"sce;":10928,"scedil;":351,"scirc;":349,"scnE;":10934,"scnap;":10938,"scnsim;":8937,"scpolint;":10771,"scsim;":8831,"scy;":1089,"sdot;":8901,"sdotb;":8865,"sdote;":10854,"seArr;":8664,"searhk;":10533,"searr;":8600,"searrow;":8600,sect:167,"sect;":167,"semi;":59,"seswar;":10537,"setminus;":8726,"setmn;":8726,"sext;":10038,"sfr;":[55349,56624],"sfrown;":8994,"sharp;":9839,"shchcy;":1097,"shcy;":1096,"shortmid;":8739,"shortparallel;":8741,shy:173,"shy;":173,"sigma;":963,"sigmaf;":962,"sigmav;":962,"sim;":8764,"simdot;":10858,"sime;":8771,"simeq;":8771,"simg;":10910,"simgE;":10912,"siml;":10909,"simlE;":10911,"simne;":8774,"simplus;":10788,"simrarr;":10610,"slarr;":8592,"smallsetminus;":8726,"smashp;":10803,"smeparsl;":10724,"smid;":8739,"smile;":8995,"smt;":10922,"smte;":10924,"smtes;":[10924,65024],"softcy;":1100,"sol;":47,"solb;":10692,"solbar;":9023,"sopf;":[55349,56676],"spades;":9824,"spadesuit;":9824,"spar;":8741,"sqcap;":8851,"sqcaps;":[8851,65024],"sqcup;":8852,"sqcups;":[8852,65024],"sqsub;":8847,"sqsube;":8849,"sqsubset;":8847,"sqsubseteq;":8849,"sqsup;":8848,"sqsupe;":8850,"sqsupset;":8848,"sqsupseteq;":8850,"squ;":9633,"square;":9633,"squarf;":9642,"squf;":9642,"srarr;":8594,"sscr;":[55349,56520],"ssetmn;":8726,"ssmile;":8995,"sstarf;":8902,"star;":9734,"starf;":9733,"straightepsilon;":1013,"straightphi;":981,"strns;":175,"sub;":8834,"subE;":10949,"subdot;":10941,"sube;":8838,"subedot;":10947,"submult;":10945,"subnE;":10955,"subne;":8842,"subplus;":10943,"subrarr;":10617,"subset;":8834,"subseteq;":8838,"subseteqq;":10949,"subsetneq;":8842,"subsetneqq;":10955,"subsim;":10951,"subsub;":10965,"subsup;":10963,"succ;":8827,"succapprox;":10936,"succcurlyeq;":8829,"succeq;":10928,"succnapprox;":10938,"succneqq;":10934,"succnsim;":8937,"succsim;":8831,"sum;":8721,"sung;":9834,sup1:185,"sup1;":185,sup2:178,"sup2;":178,sup3:179,"sup3;":179,"sup;":8835,"supE;":10950,"supdot;":10942,"supdsub;":10968,"supe;":8839,"supedot;":10948,"suphsol;":10185,"suphsub;":10967,"suplarr;":10619,"supmult;":10946,"supnE;":10956,"supne;":8843,"supplus;":10944,"supset;":8835,"supseteq;":8839,"supseteqq;":10950,"supsetneq;":8843,"supsetneqq;":10956,"supsim;":10952,"supsub;":10964,"supsup;":10966,"swArr;":8665,"swarhk;":10534,"swarr;":8601,"swarrow;":8601,"swnwar;":10538,szlig:223,"szlig;":223,"target;":8982,"tau;":964,"tbrk;":9140,"tcaron;":357,"tcedil;":355,"tcy;":1090,"tdot;":8411,"telrec;":8981,"tfr;":[55349,56625],"there4;":8756,"therefore;":8756,"theta;":952,"thetasym;":977,"thetav;":977,"thickapprox;":8776,"thicksim;":8764,"thinsp;":8201,"thkap;":8776,"thksim;":8764,thorn:254,"thorn;":254,"tilde;":732,times:215,"times;":215,"timesb;":8864,"timesbar;":10801,"timesd;":10800,"tint;":8749,"toea;":10536,"top;":8868,"topbot;":9014,"topcir;":10993,"topf;":[55349,56677],"topfork;":10970,"tosa;":10537,"tprime;":8244,"trade;":8482,"triangle;":9653,"triangledown;":9663,"triangleleft;":9667,"trianglelefteq;":8884,"triangleq;":8796,"triangleright;":9657,"trianglerighteq;":8885,"tridot;":9708,"trie;":8796,"triminus;":10810,"triplus;":10809,"trisb;":10701,"tritime;":10811,"trpezium;":9186,"tscr;":[55349,56521],"tscy;":1094,"tshcy;":1115,"tstrok;":359,"twixt;":8812,"twoheadleftarrow;":8606,"twoheadrightarrow;":8608,"uArr;":8657,"uHar;":10595,uacute:250,"uacute;":250,"uarr;":8593,"ubrcy;":1118,"ubreve;":365,ucirc:251,"ucirc;":251,"ucy;":1091,"udarr;":8645,"udblac;":369,"udhar;":10606,"ufisht;":10622,"ufr;":[55349,56626],ugrave:249,"ugrave;":249,"uharl;":8639,"uharr;":8638,"uhblk;":9600,"ulcorn;":8988,"ulcorner;":8988,"ulcrop;":8975,"ultri;":9720,"umacr;":363,uml:168,"uml;":168,"uogon;":371,"uopf;":[55349,56678],"uparrow;":8593,"updownarrow;":8597,"upharpoonleft;":8639,"upharpoonright;":8638,"uplus;":8846,"upsi;":965,"upsih;":978,"upsilon;":965,"upuparrows;":8648,"urcorn;":8989,"urcorner;":8989,"urcrop;":8974,"uring;":367,"urtri;":9721,"uscr;":[55349,56522],"utdot;":8944,"utilde;":361,"utri;":9653,"utrif;":9652,"uuarr;":8648,uuml:252,"uuml;":252,"uwangle;":10663,"vArr;":8661,"vBar;":10984,"vBarv;":10985,"vDash;":8872,"vangrt;":10652,"varepsilon;":1013,"varkappa;":1008,"varnothing;":8709,"varphi;":981,"varpi;":982,"varpropto;":8733,"varr;":8597,"varrho;":1009,"varsigma;":962,"varsubsetneq;":[8842,65024],"varsubsetneqq;":[10955,65024],"varsupsetneq;":[8843,65024],"varsupsetneqq;":[10956,65024],"vartheta;":977,"vartriangleleft;":8882,"vartriangleright;":8883,"vcy;":1074,"vdash;":8866,"vee;":8744,"veebar;":8891,"veeeq;":8794,"vellip;":8942,"verbar;":124,"vert;":124,"vfr;":[55349,56627],"vltri;":8882,"vnsub;":[8834,8402],"vnsup;":[8835,8402],"vopf;":[55349,56679],"vprop;":8733,"vrtri;":8883,"vscr;":[55349,56523],"vsubnE;":[10955,65024],"vsubne;":[8842,65024],"vsupnE;":[10956,65024],"vsupne;":[8843,65024],"vzigzag;":10650,"wcirc;":373,"wedbar;":10847,"wedge;":8743,"wedgeq;":8793,"weierp;":8472,"wfr;":[55349,56628],"wopf;":[55349,56680],"wp;":8472,"wr;":8768,"wreath;":8768,"wscr;":[55349,56524],"xcap;":8898,"xcirc;":9711,"xcup;":8899,"xdtri;":9661,"xfr;":[55349,56629],"xhArr;":10234,"xharr;":10231,"xi;":958,"xlArr;":10232,"xlarr;":10229,"xmap;":10236,"xnis;":8955,"xodot;":10752,"xopf;":[55349,56681],"xoplus;":10753,"xotime;":10754,"xrArr;":10233,"xrarr;":10230,"xscr;":[55349,56525],"xsqcup;":10758,"xuplus;":10756,"xutri;":9651,"xvee;":8897,"xwedge;":8896,yacute:253,"yacute;":253,"yacy;":1103,"ycirc;":375,"ycy;":1099,yen:165,"yen;":165,"yfr;":[55349,56630],"yicy;":1111,"yopf;":[55349,56682],"yscr;":[55349,56526],"yucy;":1102,yuml:255,"yuml;":255,"zacute;":378,"zcaron;":382,"zcy;":1079,"zdot;":380,"zeetrf;":8488,"zeta;":950,"zfr;":[55349,56631],"zhcy;":1078,"zigrarr;":8669,"zopf;":[55349,56683],"zscr;":[55349,56527],"zwj;":8205,"zwnj;":8204},Hr=/(A(?:Elig;?|MP;?|acute;?|breve;|c(?:irc;?|y;)|fr;|grave;?|lpha;|macr;|nd;|o(?:gon;|pf;)|pplyFunction;|ring;?|s(?:cr;|sign;)|tilde;?|uml;?)|B(?:a(?:ckslash;|r(?:v;|wed;))|cy;|e(?:cause;|rnoullis;|ta;)|fr;|opf;|reve;|scr;|umpeq;)|C(?:Hcy;|OPY;?|a(?:cute;|p(?:;|italDifferentialD;)|yleys;)|c(?:aron;|edil;?|irc;|onint;)|dot;|e(?:dilla;|nterDot;)|fr;|hi;|ircle(?:Dot;|Minus;|Plus;|Times;)|lo(?:ckwiseContourIntegral;|seCurly(?:DoubleQuote;|Quote;))|o(?:lon(?:;|e;)|n(?:gruent;|int;|tourIntegral;)|p(?:f;|roduct;)|unterClockwiseContourIntegral;)|ross;|scr;|up(?:;|Cap;))|D(?:D(?:;|otrahd;)|Jcy;|Scy;|Zcy;|a(?:gger;|rr;|shv;)|c(?:aron;|y;)|el(?:;|ta;)|fr;|i(?:a(?:critical(?:Acute;|Do(?:t;|ubleAcute;)|Grave;|Tilde;)|mond;)|fferentialD;)|o(?:pf;|t(?:;|Dot;|Equal;)|uble(?:ContourIntegral;|Do(?:t;|wnArrow;)|L(?:eft(?:Arrow;|RightArrow;|Tee;)|ong(?:Left(?:Arrow;|RightArrow;)|RightArrow;))|Right(?:Arrow;|Tee;)|Up(?:Arrow;|DownArrow;)|VerticalBar;)|wn(?:Arrow(?:;|Bar;|UpArrow;)|Breve;|Left(?:RightVector;|TeeVector;|Vector(?:;|Bar;))|Right(?:TeeVector;|Vector(?:;|Bar;))|Tee(?:;|Arrow;)|arrow;))|s(?:cr;|trok;))|E(?:NG;|TH;?|acute;?|c(?:aron;|irc;?|y;)|dot;|fr;|grave;?|lement;|m(?:acr;|pty(?:SmallSquare;|VerySmallSquare;))|o(?:gon;|pf;)|psilon;|qu(?:al(?:;|Tilde;)|ilibrium;)|s(?:cr;|im;)|ta;|uml;?|x(?:ists;|ponentialE;))|F(?:cy;|fr;|illed(?:SmallSquare;|VerySmallSquare;)|o(?:pf;|rAll;|uriertrf;)|scr;)|G(?:Jcy;|T;?|amma(?:;|d;)|breve;|c(?:edil;|irc;|y;)|dot;|fr;|g;|opf;|reater(?:Equal(?:;|Less;)|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;)|scr;|t;)|H(?:ARDcy;|a(?:cek;|t;)|circ;|fr;|ilbertSpace;|o(?:pf;|rizontalLine;)|s(?:cr;|trok;)|ump(?:DownHump;|Equal;))|I(?:Ecy;|Jlig;|Ocy;|acute;?|c(?:irc;?|y;)|dot;|fr;|grave;?|m(?:;|a(?:cr;|ginaryI;)|plies;)|n(?:t(?:;|e(?:gral;|rsection;))|visible(?:Comma;|Times;))|o(?:gon;|pf;|ta;)|scr;|tilde;|u(?:kcy;|ml;?))|J(?:c(?:irc;|y;)|fr;|opf;|s(?:cr;|ercy;)|ukcy;)|K(?:Hcy;|Jcy;|appa;|c(?:edil;|y;)|fr;|opf;|scr;)|L(?:Jcy;|T;?|a(?:cute;|mbda;|ng;|placetrf;|rr;)|c(?:aron;|edil;|y;)|e(?:ft(?:A(?:ngleBracket;|rrow(?:;|Bar;|RightArrow;))|Ceiling;|Do(?:ubleBracket;|wn(?:TeeVector;|Vector(?:;|Bar;)))|Floor;|Right(?:Arrow;|Vector;)|T(?:ee(?:;|Arrow;|Vector;)|riangle(?:;|Bar;|Equal;))|Up(?:DownVector;|TeeVector;|Vector(?:;|Bar;))|Vector(?:;|Bar;)|arrow;|rightarrow;)|ss(?:EqualGreater;|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;))|fr;|l(?:;|eftarrow;)|midot;|o(?:ng(?:Left(?:Arrow;|RightArrow;)|RightArrow;|left(?:arrow;|rightarrow;)|rightarrow;)|pf;|wer(?:LeftArrow;|RightArrow;))|s(?:cr;|h;|trok;)|t;)|M(?:ap;|cy;|e(?:diumSpace;|llintrf;)|fr;|inusPlus;|opf;|scr;|u;)|N(?:Jcy;|acute;|c(?:aron;|edil;|y;)|e(?:gative(?:MediumSpace;|Thi(?:ckSpace;|nSpace;)|VeryThinSpace;)|sted(?:GreaterGreater;|LessLess;)|wLine;)|fr;|o(?:Break;|nBreakingSpace;|pf;|t(?:;|C(?:ongruent;|upCap;)|DoubleVerticalBar;|E(?:lement;|qual(?:;|Tilde;)|xists;)|Greater(?:;|Equal;|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;)|Hump(?:DownHump;|Equal;)|Le(?:ftTriangle(?:;|Bar;|Equal;)|ss(?:;|Equal;|Greater;|Less;|SlantEqual;|Tilde;))|Nested(?:GreaterGreater;|LessLess;)|Precedes(?:;|Equal;|SlantEqual;)|R(?:everseElement;|ightTriangle(?:;|Bar;|Equal;))|S(?:quareSu(?:bset(?:;|Equal;)|perset(?:;|Equal;))|u(?:bset(?:;|Equal;)|cceeds(?:;|Equal;|SlantEqual;|Tilde;)|perset(?:;|Equal;)))|Tilde(?:;|Equal;|FullEqual;|Tilde;)|VerticalBar;))|scr;|tilde;?|u;)|O(?:Elig;|acute;?|c(?:irc;?|y;)|dblac;|fr;|grave;?|m(?:acr;|ega;|icron;)|opf;|penCurly(?:DoubleQuote;|Quote;)|r;|s(?:cr;|lash;?)|ti(?:lde;?|mes;)|uml;?|ver(?:B(?:ar;|rac(?:e;|ket;))|Parenthesis;))|P(?:artialD;|cy;|fr;|hi;|i;|lusMinus;|o(?:incareplane;|pf;)|r(?:;|ecedes(?:;|Equal;|SlantEqual;|Tilde;)|ime;|o(?:duct;|portion(?:;|al;)))|s(?:cr;|i;))|Q(?:UOT;?|fr;|opf;|scr;)|R(?:Barr;|EG;?|a(?:cute;|ng;|rr(?:;|tl;))|c(?:aron;|edil;|y;)|e(?:;|verse(?:E(?:lement;|quilibrium;)|UpEquilibrium;))|fr;|ho;|ight(?:A(?:ngleBracket;|rrow(?:;|Bar;|LeftArrow;))|Ceiling;|Do(?:ubleBracket;|wn(?:TeeVector;|Vector(?:;|Bar;)))|Floor;|T(?:ee(?:;|Arrow;|Vector;)|riangle(?:;|Bar;|Equal;))|Up(?:DownVector;|TeeVector;|Vector(?:;|Bar;))|Vector(?:;|Bar;)|arrow;)|o(?:pf;|undImplies;)|rightarrow;|s(?:cr;|h;)|uleDelayed;)|S(?:H(?:CHcy;|cy;)|OFTcy;|acute;|c(?:;|aron;|edil;|irc;|y;)|fr;|hort(?:DownArrow;|LeftArrow;|RightArrow;|UpArrow;)|igma;|mallCircle;|opf;|q(?:rt;|uare(?:;|Intersection;|Su(?:bset(?:;|Equal;)|perset(?:;|Equal;))|Union;))|scr;|tar;|u(?:b(?:;|set(?:;|Equal;))|c(?:ceeds(?:;|Equal;|SlantEqual;|Tilde;)|hThat;)|m;|p(?:;|erset(?:;|Equal;)|set;)))|T(?:HORN;?|RADE;|S(?:Hcy;|cy;)|a(?:b;|u;)|c(?:aron;|edil;|y;)|fr;|h(?:e(?:refore;|ta;)|i(?:ckSpace;|nSpace;))|ilde(?:;|Equal;|FullEqual;|Tilde;)|opf;|ripleDot;|s(?:cr;|trok;))|U(?:a(?:cute;?|rr(?:;|ocir;))|br(?:cy;|eve;)|c(?:irc;?|y;)|dblac;|fr;|grave;?|macr;|n(?:der(?:B(?:ar;|rac(?:e;|ket;))|Parenthesis;)|ion(?:;|Plus;))|o(?:gon;|pf;)|p(?:Arrow(?:;|Bar;|DownArrow;)|DownArrow;|Equilibrium;|Tee(?:;|Arrow;)|arrow;|downarrow;|per(?:LeftArrow;|RightArrow;)|si(?:;|lon;))|ring;|scr;|tilde;|uml;?)|V(?:Dash;|bar;|cy;|dash(?:;|l;)|e(?:e;|r(?:bar;|t(?:;|ical(?:Bar;|Line;|Separator;|Tilde;))|yThinSpace;))|fr;|opf;|scr;|vdash;)|W(?:circ;|edge;|fr;|opf;|scr;)|X(?:fr;|i;|opf;|scr;)|Y(?:Acy;|Icy;|Ucy;|acute;?|c(?:irc;|y;)|fr;|opf;|scr;|uml;)|Z(?:Hcy;|acute;|c(?:aron;|y;)|dot;|e(?:roWidthSpace;|ta;)|fr;|opf;|scr;)|a(?:acute;?|breve;|c(?:;|E;|d;|irc;?|ute;?|y;)|elig;?|f(?:;|r;)|grave;?|l(?:e(?:fsym;|ph;)|pha;)|m(?:a(?:cr;|lg;)|p;?)|n(?:d(?:;|and;|d;|slope;|v;)|g(?:;|e;|le;|msd(?:;|a(?:a;|b;|c;|d;|e;|f;|g;|h;))|rt(?:;|vb(?:;|d;))|s(?:ph;|t;)|zarr;))|o(?:gon;|pf;)|p(?:;|E;|acir;|e;|id;|os;|prox(?:;|eq;))|ring;?|s(?:cr;|t;|ymp(?:;|eq;))|tilde;?|uml;?|w(?:conint;|int;))|b(?:Not;|a(?:ck(?:cong;|epsilon;|prime;|sim(?:;|eq;))|r(?:vee;|wed(?:;|ge;)))|brk(?:;|tbrk;)|c(?:ong;|y;)|dquo;|e(?:caus(?:;|e;)|mptyv;|psi;|rnou;|t(?:a;|h;|ween;))|fr;|ig(?:c(?:ap;|irc;|up;)|o(?:dot;|plus;|times;)|s(?:qcup;|tar;)|triangle(?:down;|up;)|uplus;|vee;|wedge;)|karow;|l(?:a(?:ck(?:lozenge;|square;|triangle(?:;|down;|left;|right;))|nk;)|k(?:1(?:2;|4;)|34;)|ock;)|n(?:e(?:;|quiv;)|ot;)|o(?:pf;|t(?:;|tom;)|wtie;|x(?:D(?:L;|R;|l;|r;)|H(?:;|D;|U;|d;|u;)|U(?:L;|R;|l;|r;)|V(?:;|H;|L;|R;|h;|l;|r;)|box;|d(?:L;|R;|l;|r;)|h(?:;|D;|U;|d;|u;)|minus;|plus;|times;|u(?:L;|R;|l;|r;)|v(?:;|H;|L;|R;|h;|l;|r;)))|prime;|r(?:eve;|vbar;?)|s(?:cr;|emi;|im(?:;|e;)|ol(?:;|b;|hsub;))|u(?:ll(?:;|et;)|mp(?:;|E;|e(?:;|q;))))|c(?:a(?:cute;|p(?:;|and;|brcup;|c(?:ap;|up;)|dot;|s;)|r(?:et;|on;))|c(?:a(?:ps;|ron;)|edil;?|irc;|ups(?:;|sm;))|dot;|e(?:dil;?|mptyv;|nt(?:;|erdot;|))|fr;|h(?:cy;|eck(?:;|mark;)|i;)|ir(?:;|E;|c(?:;|eq;|le(?:arrow(?:left;|right;)|d(?:R;|S;|ast;|circ;|dash;)))|e;|fnint;|mid;|scir;)|lubs(?:;|uit;)|o(?:lon(?:;|e(?:;|q;))|m(?:ma(?:;|t;)|p(?:;|fn;|le(?:ment;|xes;)))|n(?:g(?:;|dot;)|int;)|p(?:f;|rod;|y(?:;|sr;|)))|r(?:arr;|oss;)|s(?:cr;|u(?:b(?:;|e;)|p(?:;|e;)))|tdot;|u(?:darr(?:l;|r;)|e(?:pr;|sc;)|larr(?:;|p;)|p(?:;|brcap;|c(?:ap;|up;)|dot;|or;|s;)|r(?:arr(?:;|m;)|ly(?:eq(?:prec;|succ;)|vee;|wedge;)|ren;?|vearrow(?:left;|right;))|vee;|wed;)|w(?:conint;|int;)|ylcty;)|d(?:Arr;|Har;|a(?:gger;|leth;|rr;|sh(?:;|v;))|b(?:karow;|lac;)|c(?:aron;|y;)|d(?:;|a(?:gger;|rr;)|otseq;)|e(?:g;?|lta;|mptyv;)|f(?:isht;|r;)|har(?:l;|r;)|i(?:am(?:;|ond(?:;|suit;)|s;)|e;|gamma;|sin;|v(?:;|ide(?:;|ontimes;|)|onx;))|jcy;|lc(?:orn;|rop;)|o(?:llar;|pf;|t(?:;|eq(?:;|dot;)|minus;|plus;|square;)|ublebarwedge;|wn(?:arrow;|downarrows;|harpoon(?:left;|right;)))|r(?:bkarow;|c(?:orn;|rop;))|s(?:c(?:r;|y;)|ol;|trok;)|t(?:dot;|ri(?:;|f;))|u(?:arr;|har;)|wangle;|z(?:cy;|igrarr;))|e(?:D(?:Dot;|ot;)|a(?:cute;?|ster;)|c(?:aron;|ir(?:;|c;?)|olon;|y;)|dot;|e;|f(?:Dot;|r;)|g(?:;|rave;?|s(?:;|dot;))|l(?:;|inters;|l;|s(?:;|dot;))|m(?:acr;|pty(?:;|set;|v;)|sp(?:1(?:3;|4;)|;))|n(?:g;|sp;)|o(?:gon;|pf;)|p(?:ar(?:;|sl;)|lus;|si(?:;|lon;|v;))|q(?:c(?:irc;|olon;)|s(?:im;|lant(?:gtr;|less;))|u(?:als;|est;|iv(?:;|DD;))|vparsl;)|r(?:Dot;|arr;)|s(?:cr;|dot;|im;)|t(?:a;|h;?)|u(?:ml;?|ro;)|x(?:cl;|ist;|p(?:ectation;|onentiale;)))|f(?:allingdotseq;|cy;|emale;|f(?:ilig;|l(?:ig;|lig;)|r;)|ilig;|jlig;|l(?:at;|lig;|tns;)|nof;|o(?:pf;|r(?:all;|k(?:;|v;)))|partint;|r(?:a(?:c(?:1(?:2;?|3;|4;?|5;|6;|8;)|2(?:3;|5;)|3(?:4;?|5;|8;)|45;|5(?:6;|8;)|78;)|sl;)|own;)|scr;)|g(?:E(?:;|l;)|a(?:cute;|mma(?:;|d;)|p;)|breve;|c(?:irc;|y;)|dot;|e(?:;|l;|q(?:;|q;|slant;)|s(?:;|cc;|dot(?:;|o(?:;|l;))|l(?:;|es;)))|fr;|g(?:;|g;)|imel;|jcy;|l(?:;|E;|a;|j;)|n(?:E;|ap(?:;|prox;)|e(?:;|q(?:;|q;))|sim;)|opf;|rave;|s(?:cr;|im(?:;|e;|l;))|t(?:;|c(?:c;|ir;)|dot;|lPar;|quest;|r(?:a(?:pprox;|rr;)|dot;|eq(?:less;|qless;)|less;|sim;)|)|v(?:ertneqq;|nE;))|h(?:Arr;|a(?:irsp;|lf;|milt;|r(?:dcy;|r(?:;|cir;|w;)))|bar;|circ;|e(?:arts(?:;|uit;)|llip;|rcon;)|fr;|ks(?:earow;|warow;)|o(?:arr;|mtht;|ok(?:leftarrow;|rightarrow;)|pf;|rbar;)|s(?:cr;|lash;|trok;)|y(?:bull;|phen;))|i(?:acute;?|c(?:;|irc;?|y;)|e(?:cy;|xcl;?)|f(?:f;|r;)|grave;?|i(?:;|i(?:int;|nt;)|nfin;|ota;)|jlig;|m(?:a(?:cr;|g(?:e;|line;|part;)|th;)|of;|ped;)|n(?:;|care;|fin(?:;|tie;)|odot;|t(?:;|cal;|e(?:gers;|rcal;)|larhk;|prod;))|o(?:cy;|gon;|pf;|ta;)|prod;|quest;?|s(?:cr;|in(?:;|E;|dot;|s(?:;|v;)|v;))|t(?:;|ilde;)|u(?:kcy;|ml;?))|j(?:c(?:irc;|y;)|fr;|math;|opf;|s(?:cr;|ercy;)|ukcy;)|k(?:appa(?:;|v;)|c(?:edil;|y;)|fr;|green;|hcy;|jcy;|opf;|scr;)|l(?:A(?:arr;|rr;|tail;)|Barr;|E(?:;|g;)|Har;|a(?:cute;|emptyv;|gran;|mbda;|ng(?:;|d;|le;)|p;|quo;?|rr(?:;|b(?:;|fs;)|fs;|hk;|lp;|pl;|sim;|tl;)|t(?:;|ail;|e(?:;|s;)))|b(?:arr;|brk;|r(?:ac(?:e;|k;)|k(?:e;|sl(?:d;|u;))))|c(?:aron;|e(?:dil;|il;)|ub;|y;)|d(?:ca;|quo(?:;|r;)|r(?:dhar;|ushar;)|sh;)|e(?:;|ft(?:arrow(?:;|tail;)|harpoon(?:down;|up;)|leftarrows;|right(?:arrow(?:;|s;)|harpoons;|squigarrow;)|threetimes;)|g;|q(?:;|q;|slant;)|s(?:;|cc;|dot(?:;|o(?:;|r;))|g(?:;|es;)|s(?:approx;|dot;|eq(?:gtr;|qgtr;)|gtr;|sim;)))|f(?:isht;|loor;|r;)|g(?:;|E;)|h(?:ar(?:d;|u(?:;|l;))|blk;)|jcy;|l(?:;|arr;|corner;|hard;|tri;)|m(?:idot;|oust(?:;|ache;))|n(?:E;|ap(?:;|prox;)|e(?:;|q(?:;|q;))|sim;)|o(?:a(?:ng;|rr;)|brk;|ng(?:left(?:arrow;|rightarrow;)|mapsto;|rightarrow;)|oparrow(?:left;|right;)|p(?:ar;|f;|lus;)|times;|w(?:ast;|bar;)|z(?:;|enge;|f;))|par(?:;|lt;)|r(?:arr;|corner;|har(?:;|d;)|m;|tri;)|s(?:aquo;|cr;|h;|im(?:;|e;|g;)|q(?:b;|uo(?:;|r;))|trok;)|t(?:;|c(?:c;|ir;)|dot;|hree;|imes;|larr;|quest;|r(?:Par;|i(?:;|e;|f;))|)|ur(?:dshar;|uhar;)|v(?:ertneqq;|nE;))|m(?:DDot;|a(?:cr;?|l(?:e;|t(?:;|ese;))|p(?:;|sto(?:;|down;|left;|up;))|rker;)|c(?:omma;|y;)|dash;|easuredangle;|fr;|ho;|i(?:cro;?|d(?:;|ast;|cir;|dot;?)|nus(?:;|b;|d(?:;|u;)))|l(?:cp;|dr;)|nplus;|o(?:dels;|pf;)|p;|s(?:cr;|tpos;)|u(?:;|ltimap;|map;))|n(?:G(?:g;|t(?:;|v;))|L(?:eft(?:arrow;|rightarrow;)|l;|t(?:;|v;))|Rightarrow;|V(?:Dash;|dash;)|a(?:bla;|cute;|ng;|p(?:;|E;|id;|os;|prox;)|tur(?:;|al(?:;|s;)))|b(?:sp;?|ump(?:;|e;))|c(?:a(?:p;|ron;)|edil;|ong(?:;|dot;)|up;|y;)|dash;|e(?:;|Arr;|ar(?:hk;|r(?:;|ow;))|dot;|quiv;|s(?:ear;|im;)|xist(?:;|s;))|fr;|g(?:E;|e(?:;|q(?:;|q;|slant;)|s;)|sim;|t(?:;|r;))|h(?:Arr;|arr;|par;)|i(?:;|s(?:;|d;)|v;)|jcy;|l(?:Arr;|E;|arr;|dr;|e(?:;|ft(?:arrow;|rightarrow;)|q(?:;|q;|slant;)|s(?:;|s;))|sim;|t(?:;|ri(?:;|e;)))|mid;|o(?:pf;|t(?:;|in(?:;|E;|dot;|v(?:a;|b;|c;))|ni(?:;|v(?:a;|b;|c;))|))|p(?:ar(?:;|allel;|sl;|t;)|olint;|r(?:;|cue;|e(?:;|c(?:;|eq;))))|r(?:Arr;|arr(?:;|c;|w;)|ightarrow;|tri(?:;|e;))|s(?:c(?:;|cue;|e;|r;)|hort(?:mid;|parallel;)|im(?:;|e(?:;|q;))|mid;|par;|qsu(?:be;|pe;)|u(?:b(?:;|E;|e;|set(?:;|eq(?:;|q;)))|cc(?:;|eq;)|p(?:;|E;|e;|set(?:;|eq(?:;|q;)))))|t(?:gl;|ilde;?|lg;|riangle(?:left(?:;|eq;)|right(?:;|eq;)))|u(?:;|m(?:;|ero;|sp;))|v(?:Dash;|Harr;|ap;|dash;|g(?:e;|t;)|infin;|l(?:Arr;|e;|t(?:;|rie;))|r(?:Arr;|trie;)|sim;)|w(?:Arr;|ar(?:hk;|r(?:;|ow;))|near;))|o(?:S;|a(?:cute;?|st;)|c(?:ir(?:;|c;?)|y;)|d(?:ash;|blac;|iv;|ot;|sold;)|elig;|f(?:cir;|r;)|g(?:on;|rave;?|t;)|h(?:bar;|m;)|int;|l(?:arr;|c(?:ir;|ross;)|ine;|t;)|m(?:acr;|ega;|i(?:cron;|d;|nus;))|opf;|p(?:ar;|erp;|lus;)|r(?:;|arr;|d(?:;|er(?:;|of;)|f;?|m;?)|igof;|or;|slope;|v;)|s(?:cr;|lash;?|ol;)|ti(?:lde;?|mes(?:;|as;))|uml;?|vbar;)|p(?:ar(?:;|a(?:;|llel;|)|s(?:im;|l;)|t;)|cy;|er(?:cnt;|iod;|mil;|p;|tenk;)|fr;|h(?:i(?:;|v;)|mmat;|one;)|i(?:;|tchfork;|v;)|l(?:an(?:ck(?:;|h;)|kv;)|us(?:;|acir;|b;|cir;|d(?:o;|u;)|e;|mn;?|sim;|two;))|m;|o(?:intint;|pf;|und;?)|r(?:;|E;|ap;|cue;|e(?:;|c(?:;|approx;|curlyeq;|eq;|n(?:approx;|eqq;|sim;)|sim;))|ime(?:;|s;)|n(?:E;|ap;|sim;)|o(?:d;|f(?:alar;|line;|surf;)|p(?:;|to;))|sim;|urel;)|s(?:cr;|i;)|uncsp;)|q(?:fr;|int;|opf;|prime;|scr;|u(?:at(?:ernions;|int;)|est(?:;|eq;)|ot;?))|r(?:A(?:arr;|rr;|tail;)|Barr;|Har;|a(?:c(?:e;|ute;)|dic;|emptyv;|ng(?:;|d;|e;|le;)|quo;?|rr(?:;|ap;|b(?:;|fs;)|c;|fs;|hk;|lp;|pl;|sim;|tl;|w;)|t(?:ail;|io(?:;|nals;)))|b(?:arr;|brk;|r(?:ac(?:e;|k;)|k(?:e;|sl(?:d;|u;))))|c(?:aron;|e(?:dil;|il;)|ub;|y;)|d(?:ca;|ldhar;|quo(?:;|r;)|sh;)|e(?:al(?:;|ine;|part;|s;)|ct;|g;?)|f(?:isht;|loor;|r;)|h(?:ar(?:d;|u(?:;|l;))|o(?:;|v;))|i(?:ght(?:arrow(?:;|tail;)|harpoon(?:down;|up;)|left(?:arrows;|harpoons;)|rightarrows;|squigarrow;|threetimes;)|ng;|singdotseq;)|l(?:arr;|har;|m;)|moust(?:;|ache;)|nmid;|o(?:a(?:ng;|rr;)|brk;|p(?:ar;|f;|lus;)|times;)|p(?:ar(?:;|gt;)|polint;)|rarr;|s(?:aquo;|cr;|h;|q(?:b;|uo(?:;|r;)))|t(?:hree;|imes;|ri(?:;|e;|f;|ltri;))|uluhar;|x;)|s(?:acute;|bquo;|c(?:;|E;|a(?:p;|ron;)|cue;|e(?:;|dil;)|irc;|n(?:E;|ap;|sim;)|polint;|sim;|y;)|dot(?:;|b;|e;)|e(?:Arr;|ar(?:hk;|r(?:;|ow;))|ct;?|mi;|swar;|tm(?:inus;|n;)|xt;)|fr(?:;|own;)|h(?:arp;|c(?:hcy;|y;)|ort(?:mid;|parallel;)|y;?)|i(?:gma(?:;|f;|v;)|m(?:;|dot;|e(?:;|q;)|g(?:;|E;)|l(?:;|E;)|ne;|plus;|rarr;))|larr;|m(?:a(?:llsetminus;|shp;)|eparsl;|i(?:d;|le;)|t(?:;|e(?:;|s;)))|o(?:ftcy;|l(?:;|b(?:;|ar;))|pf;)|pa(?:des(?:;|uit;)|r;)|q(?:c(?:ap(?:;|s;)|up(?:;|s;))|su(?:b(?:;|e;|set(?:;|eq;))|p(?:;|e;|set(?:;|eq;)))|u(?:;|ar(?:e;|f;)|f;))|rarr;|s(?:cr;|etmn;|mile;|tarf;)|t(?:ar(?:;|f;)|r(?:aight(?:epsilon;|phi;)|ns;))|u(?:b(?:;|E;|dot;|e(?:;|dot;)|mult;|n(?:E;|e;)|plus;|rarr;|s(?:et(?:;|eq(?:;|q;)|neq(?:;|q;))|im;|u(?:b;|p;)))|cc(?:;|approx;|curlyeq;|eq;|n(?:approx;|eqq;|sim;)|sim;)|m;|ng;|p(?:1;?|2;?|3;?|;|E;|d(?:ot;|sub;)|e(?:;|dot;)|hs(?:ol;|ub;)|larr;|mult;|n(?:E;|e;)|plus;|s(?:et(?:;|eq(?:;|q;)|neq(?:;|q;))|im;|u(?:b;|p;))))|w(?:Arr;|ar(?:hk;|r(?:;|ow;))|nwar;)|zlig;?)|t(?:a(?:rget;|u;)|brk;|c(?:aron;|edil;|y;)|dot;|elrec;|fr;|h(?:e(?:re(?:4;|fore;)|ta(?:;|sym;|v;))|i(?:ck(?:approx;|sim;)|nsp;)|k(?:ap;|sim;)|orn;?)|i(?:lde;|mes(?:;|b(?:;|ar;)|d;|)|nt;)|o(?:ea;|p(?:;|bot;|cir;|f(?:;|ork;))|sa;)|prime;|r(?:ade;|i(?:angle(?:;|down;|left(?:;|eq;)|q;|right(?:;|eq;))|dot;|e;|minus;|plus;|sb;|time;)|pezium;)|s(?:c(?:r;|y;)|hcy;|trok;)|w(?:ixt;|ohead(?:leftarrow;|rightarrow;)))|u(?:Arr;|Har;|a(?:cute;?|rr;)|br(?:cy;|eve;)|c(?:irc;?|y;)|d(?:arr;|blac;|har;)|f(?:isht;|r;)|grave;?|h(?:ar(?:l;|r;)|blk;)|l(?:c(?:orn(?:;|er;)|rop;)|tri;)|m(?:acr;|l;?)|o(?:gon;|pf;)|p(?:arrow;|downarrow;|harpoon(?:left;|right;)|lus;|si(?:;|h;|lon;)|uparrows;)|r(?:c(?:orn(?:;|er;)|rop;)|ing;|tri;)|scr;|t(?:dot;|ilde;|ri(?:;|f;))|u(?:arr;|ml;?)|wangle;)|v(?:Arr;|Bar(?:;|v;)|Dash;|a(?:ngrt;|r(?:epsilon;|kappa;|nothing;|p(?:hi;|i;|ropto;)|r(?:;|ho;)|s(?:igma;|u(?:bsetneq(?:;|q;)|psetneq(?:;|q;)))|t(?:heta;|riangle(?:left;|right;))))|cy;|dash;|e(?:e(?:;|bar;|eq;)|llip;|r(?:bar;|t;))|fr;|ltri;|nsu(?:b;|p;)|opf;|prop;|rtri;|s(?:cr;|u(?:bn(?:E;|e;)|pn(?:E;|e;)))|zigzag;)|w(?:circ;|e(?:d(?:bar;|ge(?:;|q;))|ierp;)|fr;|opf;|p;|r(?:;|eath;)|scr;)|x(?:c(?:ap;|irc;|up;)|dtri;|fr;|h(?:Arr;|arr;)|i;|l(?:Arr;|arr;)|map;|nis;|o(?:dot;|p(?:f;|lus;)|time;)|r(?:Arr;|arr;)|s(?:cr;|qcup;)|u(?:plus;|tri;)|vee;|wedge;)|y(?:ac(?:ute;?|y;)|c(?:irc;|y;)|en;?|fr;|icy;|opf;|scr;|u(?:cy;|ml;?))|z(?:acute;|c(?:aron;|y;)|dot;|e(?:etrf;|ta;)|fr;|hcy;|igrarr;|opf;|scr;|w(?:j;|nj;)))|[\s\S]/g,Uo=32,Ca=/[^\r"&\u0000]+/g,Ln=/[^\r'&\u0000]+/g,Nn=/[^\r\t\n\f &>\u0000]+/g,Ar=/[^\r\t\n\f \/>A-Z\u0000]+/g,rr=/[^\r\t\n\f \/=>A-Z\u0000]+/g,ao=/[^\]\r\u0000\uffff]*/g,Gs=/[^&<\r\u0000\uffff]*/g,lo=/[^<\r\u0000\uffff]*/g,Ol=/[^\r\u0000\uffff]*/g,el=/(?:(\/)?([a-z]+)>)|[\s\S]/g,Qn=/(?:([-a-z]+)[ \t\n\f]*=[ \t\n\f]*('[^'&\r\u0000]*'|"[^"&\r\u0000]*"|[^\t\n\r\f "&'\u0000>][^&> \t\n\r\f\u0000]*[ \t\n\f]))|[\s\S]/g,co=/[^\x09\x0A\x0C\x0D\x20]/,ys=/[^\x09\x0A\x0C\x0D\x20]/g,Ea=/[^\x00\x09\x0A\x0C\x0D\x20]/,Fn=/^[\x09\x0A\x0C\x0D\x20]+/,xs=/\x00/g;function zr(q){var Q=16384;if(q.length<Q)return String.fromCharCode.apply(String,q);for(var pe="",xe=0;xe<q.length;xe+=Q)pe+=String.fromCharCode.apply(String,q.slice(xe,xe+Q));return pe}function tl(q){for(var Q=[],pe=0;pe<q.length;pe++)Q[pe]=q.charCodeAt(pe);return Q}function zi(q,Q){if(typeof Q=="string")return q.namespaceURI===s.HTML&&q.localName===Q;var pe=Q[q.namespaceURI];return pe&&pe[q.localName]}function ts(q){return zi(q,Rt)}function ws(q){if(zi(q,Ut))return!0;if(q.namespaceURI===s.MATHML&&q.localName==="annotation-xml"){var Q=q.getAttribute("encoding");if(Q&&(Q=Q.toLowerCase()),Q==="text/html"||Q==="application/xhtml+xml")return!0}return!1}function il(q){return q in Ne?Ne[q]:q}function uo(q){for(var Q=0,pe=q.length;Q<pe;Q++)q[Q][0]in Pe&&(q[Q][0]=Pe[q[Q][0]])}function zn(q){for(var Q=0,pe=q.length;Q<pe;Q++)if(q[Q][0]==="definitionurl"){q[Q][0]="definitionURL";break}}function Io(q){for(var Q=0,pe=q.length;Q<pe;Q++)q[Q][0]in Fi&&q[Q].push(Fi[q[Q][0]])}function qe(q,Q){for(var pe=0,xe=q.length;pe<xe;pe++){var se=q[pe][0],De=q[pe][1];Q.hasAttribute(se)||Q._setAttribute(se,De)}}J.ElementStack=function(){this.elements=[],this.top=null},J.ElementStack.prototype.push=function(q){this.elements.push(q),this.top=q},J.ElementStack.prototype.pop=function(q){this.elements.pop(),this.top=this.elements[this.elements.length-1]},J.ElementStack.prototype.popTag=function(q){for(var Q=this.elements.length-1;Q>0;Q--){var pe=this.elements[Q];if(zi(pe,q))break}this.elements.length=Q,this.top=this.elements[Q-1]},J.ElementStack.prototype.popElementType=function(q){for(var Q=this.elements.length-1;Q>0&&!(this.elements[Q]instanceof q);Q--);this.elements.length=Q,this.top=this.elements[Q-1]},J.ElementStack.prototype.popElement=function(q){for(var Q=this.elements.length-1;Q>0&&this.elements[Q]!==q;Q--);this.elements.length=Q,this.top=this.elements[Q-1]},J.ElementStack.prototype.removeElement=function(q){if(this.top===q)this.pop();else{var Q=this.elements.lastIndexOf(q);Q!==-1&&this.elements.splice(Q,1)}},J.ElementStack.prototype.clearToContext=function(q){for(var Q=this.elements.length-1;Q>0&&!zi(this.elements[Q],q);Q--);this.elements.length=Q+1,this.top=this.elements[Q]},J.ElementStack.prototype.contains=function(q){return this.inSpecificScope(q,Object.create(null))},J.ElementStack.prototype.inSpecificScope=function(q,Q){for(var pe=this.elements.length-1;pe>=0;pe--){var xe=this.elements[pe];if(zi(xe,q))return!0;if(zi(xe,Q))return!1}return!1},J.ElementStack.prototype.elementInSpecificScope=function(q,Q){for(var pe=this.elements.length-1;pe>=0;pe--){var xe=this.elements[pe];if(xe===q)return!0;if(zi(xe,Q))return!1}return!1},J.ElementStack.prototype.elementTypeInSpecificScope=function(q,Q){for(var pe=this.elements.length-1;pe>=0;pe--){var xe=this.elements[pe];if(xe instanceof q)return!0;if(zi(xe,Q))return!1}return!1},J.ElementStack.prototype.inScope=function(q){return this.inSpecificScope(q,te)},J.ElementStack.prototype.elementInScope=function(q){return this.elementInSpecificScope(q,te)},J.ElementStack.prototype.elementTypeInScope=function(q){return this.elementTypeInSpecificScope(q,te)},J.ElementStack.prototype.inButtonScope=function(q){return this.inSpecificScope(q,me)},J.ElementStack.prototype.inListItemScope=function(q){return this.inSpecificScope(q,V)},J.ElementStack.prototype.inTableScope=function(q){return this.inSpecificScope(q,Ue)},J.ElementStack.prototype.inSelectScope=function(q){for(var Q=this.elements.length-1;Q>=0;Q--){var pe=this.elements[Q];if(pe.namespaceURI!==s.HTML)return!1;var xe=pe.localName;if(xe===q)return!0;if(xe!=="optgroup"&&xe!=="option")return!1}return!1},J.ElementStack.prototype.generateImpliedEndTags=function(q,Q){for(var pe=Q?Je:dt,xe=this.elements.length-1;xe>=0;xe--){var se=this.elements[xe];if(q&&zi(se,q)||!zi(this.elements[xe],pe))break}this.elements.length=xe+1,this.top=this.elements[xe]},J.ActiveFormattingElements=function(){this.list=[],this.attrs=[]},J.ActiveFormattingElements.prototype.MARKER={localName:"|"},J.ActiveFormattingElements.prototype.insertMarker=function(){this.list.push(this.MARKER),this.attrs.push(this.MARKER)},J.ActiveFormattingElements.prototype.push=function(q,Q){for(var pe=0,xe=this.list.length-1;xe>=0&&this.list[xe]!==this.MARKER;xe--)if(Be(q,this.list[xe],this.attrs[xe])&&(pe++,pe===3)){this.list.splice(xe,1),this.attrs.splice(xe,1);break}this.list.push(q);for(var se=[],De=0;De<Q.length;De++)se[De]=Q[De];this.attrs.push(se);function Be(He,Xe,je){if(He.localName!==Xe.localName||He._numattrs!==je.length)return!1;for(var pt=0,St=je.length;pt<St;pt++){var It=je[pt][0],ke=je[pt][1];if(!He.hasAttribute(It)||He.getAttribute(It)!==ke)return!1}return!0}},J.ActiveFormattingElements.prototype.clearToMarker=function(){for(var q=this.list.length-1;q>=0&&this.list[q]!==this.MARKER;q--);q<0&&(q=0),this.list.length=q,this.attrs.length=q},J.ActiveFormattingElements.prototype.findElementByTag=function(q){for(var Q=this.list.length-1;Q>=0;Q--){var pe=this.list[Q];if(pe===this.MARKER)break;if(pe.localName===q)return pe}return null},J.ActiveFormattingElements.prototype.indexOf=function(q){return this.list.lastIndexOf(q)},J.ActiveFormattingElements.prototype.remove=function(q){var Q=this.list.lastIndexOf(q);Q!==-1&&(this.list.splice(Q,1),this.attrs.splice(Q,1))},J.ActiveFormattingElements.prototype.replace=function(q,Q,pe){var xe=this.list.lastIndexOf(q);xe!==-1&&(this.list[xe]=Q,this.attrs[xe]=pe)},J.ActiveFormattingElements.prototype.insertAfter=function(q,Q){var pe=this.list.lastIndexOf(q);pe!==-1&&(this.list.splice(pe,0,Q),this.attrs.splice(pe,0,Q))};function J(q,Q,pe){var xe=null,se=0,De=0,Be=!1,He=!1,Xe=0,je=[],pt="",St=!0,It=0,ke=Si,li,Ft,$e="",Zi="",Ht=[],_i="",$t="",nt=[],Xt=[],ci=[],sr=[],Ji=[],un=!1,it=Ic,Jn=null,ho=[],Fe=new J.ElementStack,Ei=new J.ActiveFormattingElements,Bn=Q!==void 0,is=null,dr=null,xn=!0;Q&&(xn=Q.ownerDocument._scripting_enabled),pe&&pe.scripting_enabled===!1&&(xn=!1);var bi=!0,Sa=!1,Cs,Ll,At=[],wn=!1,Ws=!1,rl={document:function(){return er},_asDocumentFragment:function(){for(var B=er.createDocumentFragment(),$=er.firstChild;$.hasChildNodes();)B.appendChild($.firstChild);return B},pause:function(){It++},resume:function(){It--,this.parse("")},parse:function(B,$,Se){var Ke;return It>0?(pt+=B,!0):(Xe===0?(pt&&(B=pt+B,pt=""),$&&(B+="\uFFFF",Be=!0),xe=B,se=B.length,De=0,St&&(St=!1,xe.charCodeAt(0)===65279&&(De=1)),Xe++,Ke=Md(Se),pt=xe.substring(De,se),Xe--):(Xe++,je.push(xe,se,De),xe=B,se=B.length,De=0,Md(),Ke=!1,pt=xe.substring(De,se),De=je.pop(),se=je.pop(),xe=je.pop(),pt&&(xe=pt+xe.substring(De),se=xe.length,De=0,pt=""),Xe--),Ke)}},er=new e(!0,q);if(er._parser=rl,er._scripting_enabled=xn,Q){if(Q.ownerDocument._quirks&&(er._quirks=!0),Q.ownerDocument._limitedQuirks&&(er._limitedQuirks=!0),Q.namespaceURI===s.HTML)switch(Q.localName){case"title":case"textarea":ke=ko;break;case"style":case"xmp":case"iframe":case"noembed":case"noframes":case"script":case"plaintext":ke=Aa;break}var Ta=er.createElement("html");er._appendChild(Ta),Fe.push(Ta),Q instanceof w.HTMLTemplateElement&&ho.push(da),fr();for(var nl=Q;nl!==null;nl=nl.parentElement)if(nl instanceof w.HTMLFormElement){dr=nl;break}}function Md(B){for(var $,Se,Ke,ft;De<se;){if(It>0||B&&B())return!0;switch(typeof ke.lookahead){case"undefined":if($=xe.charCodeAt(De++),He&&(He=!1,$===10)){De++;continue}switch($){case 13:De<se?xe.charCodeAt(De)===10&&De++:He=!0,ke(10);break;case 65535:if(Be&&De===se){ke(T);break}default:ke($);break}break;case"number":$=xe.charCodeAt(De);var zt=ke.lookahead,oi=!0;if(zt<0&&(oi=!1,zt=-zt),zt<se-De)Se=oi?xe.substring(De,De+zt):null,ft=!1;else if(Be)Se=oi?xe.substring(De,se):null,ft=!0,$===65535&&De===se-1&&($=T);else return!0;ke($,Se,ft);break;case"string":$=xe.charCodeAt(De),Ke=ke.lookahead;var Di=xe.indexOf(Ke,De);if(Di!==-1)Se=xe.substring(De,Di+Ke.length),ft=!1;else{if(!Be)return!0;Se=xe.substring(De,se),$===65535&&De===se-1&&($=T),ft=!0}ke($,Se,ft);break}}return!1}function Zs(B,$){for(var Se=0;Se<Ji.length;Se++)if(Ji[Se][0]===B)return;$!==void 0?Ji.push([B,$]):Ji.push([B])}function fp(){Qn.lastIndex=De-1;var B=Qn.exec(xe);if(!B)throw new Error("should never happen");var $=B[1];if(!$)return!1;var Se=B[2],Ke=Se.length;switch(Se[0]){case'"':case"'":Se=Se.substring(1,Ke-1),De+=B[0].length-1,ke=Cu;break;default:ke=fo,De+=B[0].length-1,Se=Se.substring(0,Ke-1);break}for(var ft=0;ft<Ji.length;ft++)if(Ji[ft][0]===$)return!0;return Ji.push([$,Se]),!0}function Id(){un=!1,$e="",Ji.length=0}function Ma(){un=!0,$e="",Ji.length=0}function Vn(){Ht.length=0}function Nl(){_i=""}function gc(){$t=""}function Xs(){nt.length=0}function Ys(){Xt.length=0,ci=null,sr=null}function _c(){ci=[]}function Po(){sr=[]}function Xi(){Sa=!0}function vu(){return Fe.top&&Fe.top.namespaceURI!=="http://www.w3.org/1999/xhtml"}function gr(B){return Zi===B}function ki(){if(At.length>0){var B=zr(At);if(At.length=0,Ws&&(Ws=!1,B[0]===`
`&&(B=B.substring(1)),B.length===0))return;Ui(I,B),wn=!1}Ws=!1}function rs(B){B.lastIndex=De-1;var $=B.exec(xe);if($&&$.index===De-1)return $=$[0],De+=$.length-1,Be&&De===se&&($=$.slice(0,-1),De--),$;throw new Error("should never happen")}function Yr(B){B.lastIndex=De-1;var $=B.exec(xe)[0];return $?(Ia($),De+=$.length-1,!0):!1}function Ia(B){At.length>0&&ki(),!(Ws&&(Ws=!1,B[0]===`
`&&(B=B.substring(1)),B.length===0))&&Ui(I,B)}function vi(){if(un)Ui(R,$e);else{var B=$e;$e="",Zi=B,Ui(P,B,Ji)}}function Fl(){if(De===se)return!1;el.lastIndex=De;var B=el.exec(xe);if(!B)throw new Error("should never happen");var $=B[2];if(!$)return!1;var Se=B[1];return Se?(De+=$.length+2,Ui(R,$)):(De+=$.length+1,Zi=$,Ui(P,$,X)),!0}function zl(){un?Ui(R,$e,null,!0):Ui(P,$e,Ji,!0)}function $i(){Ui(Z,zr(Xt),ci?zr(ci):void 0,sr?zr(sr):void 0)}function ni(){ki(),it(T),er.modclock=1}var Ui=rl.insertToken=function($,Se,Ke,ft){ki();var zt=Fe.top;!zt||zt.namespaceURI===s.HTML?it($,Se,Ke,ft):$!==P&&$!==I?Gl($,Se,Ke,ft):ts(zt)&&($===I||$===P&&Se!=="mglyph"&&Se!=="malignmark")||$===P&&Se==="svg"&&zt.namespaceURI===s.MATHML&&zt.localName==="annotation-xml"||ws(zt)?(Ll=!0,it($,Se,Ke,ft),Ll=!1):Gl($,Se,Ke,ft)};function ar(B){var $=Fe.top;po&&zi($,tt)?ir(function(Se){return Se.createComment(B)}):($ instanceof w.HTMLTemplateElement&&($=$.content),$._appendChild($.ownerDocument.createComment(B)))}function _r(B){var $=Fe.top;if(po&&zi($,tt))ir(function(Ke){return Ke.createTextNode(B)});else{$ instanceof w.HTMLTemplateElement&&($=$.content);var Se=$.lastChild;Se&&Se.nodeType===a.TEXT_NODE?Se.appendData(B):$._appendChild($.ownerDocument.createTextNode(B))}}function lr(B,$,Se){var Ke=_.createElement(B,$,null);if(Se)for(var ft=0,zt=Se.length;ft<zt;ft++)Ke._setAttribute(Se[ft][0],Se[ft][1]);return Ke}var po=!1;function Kt(B,$){var Se=Cn(function(Ke){return lr(Ke,B,$)});return zi(Se,le)&&(Se._form=dr),Se}function Cn(B){var $;return po&&zi(Fe.top,tt)?$=ir(B):Fe.top instanceof w.HTMLTemplateElement?($=B(Fe.top.content.ownerDocument),Fe.top.content._appendChild($)):($=B(Fe.top.ownerDocument),Fe.top._appendChild($)),Fe.push($),$}function En(B,$,Se){return Cn(function(Ke){var ft=Ke._createElementNS(B,Se,null);if($)for(var zt=0,oi=$.length;zt<oi;zt++){var Di=$[zt];Di.length===2?ft._setAttribute(Di[0],Di[1]):ft._setAttributeNS(Di[2],Di[0],Di[1])}return ft})}function ol(B){for(var $=Fe.elements.length-1;$>=0;$--)if(Fe.elements[$]instanceof B)return $;return-1}function ir(B){var $,Se,Ke=-1,ft=-1,zt;if(Ke=ol(w.HTMLTableElement),ft=ol(w.HTMLTemplateElement),ft>=0&&(Ke<0||ft>Ke)?$=Fe.elements[ft]:Ke>=0&&($=Fe.elements[Ke].parentNode,$?Se=Fe.elements[Ke]:$=Fe.elements[Ke-1]),$||($=Fe.elements[0]),$ instanceof w.HTMLTemplateElement&&($=$.content),zt=B($.ownerDocument),zt.nodeType===a.TEXT_NODE){var oi;if(Se?oi=Se.previousSibling:oi=$.lastChild,oi&&oi.nodeType===a.TEXT_NODE)return oi.appendData(zt.data),zt}return Se?$.insertBefore(zt,Se):$._appendChild(zt),zt}function fr(){for(var B=!1,$=Fe.elements.length-1;$>=0;$--){var Se=Fe.elements[$];if($===0&&(B=!0,Bn&&(Se=Q)),Se.namespaceURI===s.HTML){var Ke=Se.localName;switch(Ke){case"select":for(var ft=$;ft>0;){var zt=Fe.elements[--ft];if(zt instanceof w.HTMLTemplateElement)break;if(zt instanceof w.HTMLTableElement){it=Na;return}}it=Ro;return;case"tr":it=ua;return;case"tbody":case"tfoot":case"thead":it=ls;return;case"caption":it=$l;return;case"colgroup":it=as;return;case"table":it=mo;return;case"template":it=ho[ho.length-1];return;case"body":it=ii;return;case"frameset":it=Pc;return;case"html":is===null?it=La:it=ul;return;default:if(!B){if(Ke==="head"){it=Sr;return}if(Ke==="td"||Ke==="th"){it=cs;return}}}}if(B){it=ii;return}}}function Ai(B,$){Kt(B,$),ke=ka,Jn=it,it=Un}function fi(B,$){Kt(B,$),ke=ko,Jn=it,it=Un}function Ks(B,$){return{elt:lr(B,Ei.list[$].localName,Ei.attrs[$]),attrs:Ei.attrs[$]}}function Jt(){if(Ei.list.length!==0){var B=Ei.list[Ei.list.length-1];if(B!==Ei.MARKER&&Fe.elements.lastIndexOf(B)===-1){for(var $=Ei.list.length-2;$>=0&&(B=Ei.list[$],!(B===Ei.MARKER||Fe.elements.lastIndexOf(B)!==-1));$--);for($=$+1;$<Ei.list.length;$++){var Se=Cn(function(Ke){return Ks(Ke,$).elt});Ei.list[$]=Se}}}}var Pa={localName:"BM"};function Sn(B){if(zi(Fe.top,B)&&Ei.indexOf(Fe.top)===-1)return Fe.pop(),!0;for(var $=0;$<8;){$++;var Se=Ei.findElementByTag(B);if(!Se)return!1;var Ke=Fe.elements.lastIndexOf(Se);if(Ke===-1)return Ei.remove(Se),!0;if(!Fe.elementInScope(Se))return!0;for(var ft=null,zt,oi=Ke+1;oi<Fe.elements.length;oi++)if(zi(Fe.elements[oi],de)){ft=Fe.elements[oi],zt=oi;break}if(ft){var Di=Fe.elements[Ke-1];Ei.insertAfter(Se,Pa);for(var br=ft,Kr=ft,jn=zt,go,$o=0;$o++,br=Fe.elements[--jn],br!==Se;){if(go=Ei.indexOf(br),$o>3&&go!==-1&&(Ei.remove(br),go=-1),go===-1){Fe.removeElement(br);continue}var Oo=Ks(Di.ownerDocument,go);Ei.replace(br,Oo.elt,Oo.attrs),Fe.elements[jn]=Oo.elt,br=Oo.elt,Kr===ft&&(Ei.remove(Pa),Ei.insertAfter(Oo.elt,Pa)),br._appendChild(Kr),Kr=br}po&&zi(Di,tt)?ir(function(){return Kr}):Di instanceof w.HTMLTemplateElement?Di.content._appendChild(Kr):Di._appendChild(Kr);for(var Ss=Ks(ft.ownerDocument,Ei.indexOf(Se));ft.hasChildNodes();)Ss.elt._appendChild(ft.firstChild);ft._appendChild(Ss.elt),Ei.remove(Se),Ei.replace(Pa,Ss.elt,Ss.attrs),Fe.removeElement(Se);var Pu=Fe.elements.lastIndexOf(ft);Fe.elements.splice(Pu+1,0,Ss.elt)}else return Fe.popElement(Se),Ei.remove(Se),!0}return!0}function yu(){Fe.pop(),it=Jn}function Es(){delete er._parser,Fe.elements.length=0,er.defaultView&&er.defaultView.dispatchEvent(new w.Event("load",{}))}function Yt(B,$){ke=$,De--}function Si(B){switch(B){case 38:li=Si,ke=Ho;break;case 60:if(Fl())break;ke=Da;break;case 0:At.push(B),wn=!0;break;case-1:ni();break;default:Yr(Gs)||At.push(B);break}}function ko(B){switch(B){case 38:li=ko,ke=Ho;break;case 60:ke=Bl;break;case 0:At.push(65533),wn=!0;break;case-1:ni();break;default:At.push(B);break}}function ka(B){switch(B){case 60:ke=bc;break;case 0:At.push(65533);break;case-1:ni();break;default:Yr(lo)||At.push(B);break}}function jo(B){switch(B){case 60:ke=mp;break;case 0:At.push(65533);break;case-1:ni();break;default:Yr(lo)||At.push(B);break}}function Aa(B){switch(B){case 0:At.push(65533);break;case-1:ni();break;default:Yr(Ol)||At.push(B);break}}function Da(B){switch(B){case 33:ke=oa;break;case 47:ke=tn;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Id(),Yt(B,Qs);break;case 63:Yt(B,Ul);break;default:At.push(60),Yt(B,Si);break}}function tn(B){switch(B){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ma(),Yt(B,Qs);break;case 62:ke=Si;break;case-1:At.push(60),At.push(47),ni();break;default:Yt(B,Ul);break}}function Qs(B){switch(B){case 9:case 10:case 12:case 32:ke=fo;break;case 47:ke=qo;break;case 62:ke=Si,vi();break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:$e+=String.fromCharCode(B+32);break;case 0:$e+="\uFFFD";break;case-1:ni();break;default:$e+=rs(Ar);break}}function Bl(B){B===47?(Vn(),ke=Js):(At.push(60),Yt(B,ko))}function Js(B){switch(B){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ma(),Yt(B,rn);break;default:At.push(60),At.push(47),Yt(B,ko);break}}function rn(B){switch(B){case 9:case 10:case 12:case 32:if(gr($e)){ke=fo;return}break;case 47:if(gr($e)){ke=qo;return}break;case 62:if(gr($e)){ke=Si,vi();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:$e+=String.fromCharCode(B+32),Ht.push(B);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:$e+=String.fromCharCode(B),Ht.push(B);return;default:break}At.push(60),At.push(47),C(At,Ht),Yt(B,ko)}function bc(B){B===47?(Vn(),ke=vc):(At.push(60),Yt(B,ka))}function vc(B){switch(B){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ma(),Yt(B,Pd);break;default:At.push(60),At.push(47),Yt(B,ka);break}}function Pd(B){switch(B){case 9:case 10:case 12:case 32:if(gr($e)){ke=fo;return}break;case 47:if(gr($e)){ke=qo;return}break;case 62:if(gr($e)){ke=Si,vi();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:$e+=String.fromCharCode(B+32),Ht.push(B);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:$e+=String.fromCharCode(B),Ht.push(B);return;default:break}At.push(60),At.push(47),C(At,Ht),Yt(B,ka)}function mp(B){switch(B){case 47:Vn(),ke=Tn;break;case 33:ke=ns,At.push(60),At.push(33);break;default:At.push(60),Yt(B,jo);break}}function Tn(B){switch(B){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ma(),Yt(B,Vl);break;default:At.push(60),At.push(47),Yt(B,jo);break}}function Vl(B){switch(B){case 9:case 10:case 12:case 32:if(gr($e)){ke=fo;return}break;case 47:if(gr($e)){ke=qo;return}break;case 62:if(gr($e)){ke=Si,vi();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:$e+=String.fromCharCode(B+32),Ht.push(B);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:$e+=String.fromCharCode(B),Ht.push(B);return;default:break}At.push(60),At.push(47),C(At,Ht),Yt(B,jo)}function ns(B){B===45?(ke=Ra,At.push(45)):Yt(B,jo)}function Ra(B){B===45?(ke=ea,At.push(45)):Yt(B,jo)}function eo(B){switch(B){case 45:ke=Ao,At.push(45);break;case 60:ke=sl;break;case 0:At.push(65533);break;case-1:ni();break;default:At.push(B);break}}function Ao(B){switch(B){case 45:ke=ea,At.push(45);break;case 60:ke=sl;break;case 0:ke=eo,At.push(65533);break;case-1:ni();break;default:ke=eo,At.push(B);break}}function ea(B){switch(B){case 45:At.push(45);break;case 60:ke=sl;break;case 62:ke=jo,At.push(62);break;case 0:ke=eo,At.push(65533);break;case-1:ni();break;default:ke=eo,At.push(B);break}}function sl(B){switch(B){case 47:Vn(),ke=gp;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Vn(),At.push(60),Yt(B,_p);break;default:At.push(60),Yt(B,eo);break}}function gp(B){switch(B){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ma(),Yt(B,xu);break;default:At.push(60),At.push(47),Yt(B,eo);break}}function xu(B){switch(B){case 9:case 10:case 12:case 32:if(gr($e)){ke=fo;return}break;case 47:if(gr($e)){ke=qo;return}break;case 62:if(gr($e)){ke=Si,vi();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:$e+=String.fromCharCode(B+32),Ht.push(B);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:$e+=String.fromCharCode(B),Ht.push(B);return;default:break}At.push(60),At.push(47),C(At,Ht),Yt(B,eo)}function _p(B){switch(B){case 9:case 10:case 12:case 32:case 47:case 62:zr(Ht)==="script"?ke=ta:ke=eo,At.push(B);break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:Ht.push(B+32),At.push(B);break;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ht.push(B),At.push(B);break;default:Yt(B,eo);break}}function ta(B){switch(B){case 45:ke=bp,At.push(45);break;case 60:ke=ia,At.push(60);break;case 0:At.push(65533);break;case-1:ni();break;default:At.push(B);break}}function bp(B){switch(B){case 45:ke=yc,At.push(45);break;case 60:ke=ia,At.push(60);break;case 0:ke=ta,At.push(65533);break;case-1:ni();break;default:ke=ta,At.push(B);break}}function yc(B){switch(B){case 45:At.push(45);break;case 60:ke=ia,At.push(60);break;case 62:ke=jo,At.push(62);break;case 0:ke=ta,At.push(65533);break;case-1:ni();break;default:ke=ta,At.push(B);break}}function ia(B){B===47?(Vn(),ke=xc,At.push(47)):Yt(B,ta)}function xc(B){switch(B){case 9:case 10:case 12:case 32:case 47:case 62:zr(Ht)==="script"?ke=eo:ke=ta,At.push(B);break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:Ht.push(B+32),At.push(B);break;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ht.push(B),At.push(B);break;default:Yt(B,ta);break}}function fo(B){switch(B){case 9:case 10:case 12:case 32:break;case 47:ke=qo;break;case 62:ke=Si,vi();break;case-1:ni();break;case 61:Nl(),_i+=String.fromCharCode(B),ke=al;break;default:if(fp())break;Nl(),Yt(B,al);break}}function al(B){switch(B){case 9:case 10:case 12:case 32:case 47:case 62:case-1:Yt(B,os);break;case 61:ke=wu;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:_i+=String.fromCharCode(B+32);break;case 0:_i+="\uFFFD";break;case 34:case 39:case 60:default:_i+=rs(rr);break}}function os(B){switch(B){case 9:case 10:case 12:case 32:break;case 47:Zs(_i),ke=qo;break;case 61:ke=wu;break;case 62:ke=Si,Zs(_i),vi();break;case-1:Zs(_i),ni();break;default:Zs(_i),Nl(),Yt(B,al);break}}function wu(B){switch(B){case 9:case 10:case 12:case 32:break;case 34:gc(),ke=ll;break;case 39:gc(),ke=ra;break;case 62:default:gc(),Yt(B,na);break}}function ll(B){switch(B){case 34:Zs(_i,$t),ke=Cu;break;case 38:li=ll,ke=Ho;break;case 0:$t+="\uFFFD";break;case-1:ni();break;case 10:$t+=String.fromCharCode(B);break;default:$t+=rs(Ca);break}}function ra(B){switch(B){case 39:Zs(_i,$t),ke=Cu;break;case 38:li=ra,ke=Ho;break;case 0:$t+="\uFFFD";break;case-1:ni();break;case 10:$t+=String.fromCharCode(B);break;default:$t+=rs(Ln);break}}function na(B){switch(B){case 9:case 10:case 12:case 32:Zs(_i,$t),ke=fo;break;case 38:li=na,ke=Ho;break;case 62:Zs(_i,$t),ke=Si,vi();break;case 0:$t+="\uFFFD";break;case-1:De--,ke=Si;break;case 34:case 39:case 60:case 61:case 96:default:$t+=rs(Nn);break}}function Cu(B){switch(B){case 9:case 10:case 12:case 32:ke=fo;break;case 47:ke=qo;break;case 62:ke=Si,vi();break;case-1:ni();break;default:Yt(B,fo);break}}function qo(B){switch(B){case 62:ke=Si,zl(!0);break;case-1:ni();break;default:Yt(B,fo);break}}function Ul(B,$,Se){var Ke=$.length;Se?De+=Ke-1:De+=Ke;var ft=$.substring(0,Ke-1);ft=ft.replace(/\u0000/g,"\uFFFD"),ft=ft.replace(/\u000D\u000A/g,`
`),ft=ft.replace(/\u000D/g,`
`),Ui(H,ft),ke=Si}Ul.lookahead=">";function oa(B,$,Se){if($[0]==="-"&&$[1]==="-"){De+=2,Xs(),ke=kd;return}$.toUpperCase()==="DOCTYPE"?(De+=7,ke=Ld):$==="[CDATA["&&vu()?(De+=7,ke=ql):ke=Ul}oa.lookahead=7;function kd(B){switch(Xs(),B){case 45:ke=Ad;break;case 62:ke=Si,Ui(H,zr(nt));break;default:Yt(B,Oa);break}}function Ad(B){switch(B){case 45:ke=cl;break;case 62:ke=Si,Ui(H,zr(nt));break;case-1:Ui(H,zr(nt)),ni();break;default:nt.push(45),Yt(B,Oa);break}}function Oa(B){switch(B){case 60:nt.push(B),ke=Dd;break;case 45:ke=wc;break;case 0:nt.push(65533);break;case-1:Ui(H,zr(nt)),ni();break;default:nt.push(B);break}}function Dd(B){switch(B){case 33:nt.push(B),ke=jl;break;case 60:nt.push(B);break;default:Yt(B,Oa);break}}function jl(B){switch(B){case 45:ke=Rd;break;default:Yt(B,Oa);break}}function Rd(B){switch(B){case 45:ke=Od;break;default:Yt(B,wc);break}}function Od(B){switch(B){case 62:case-1:Yt(B,cl);break;default:Yt(B,cl);break}}function wc(B){switch(B){case 45:ke=cl;break;case-1:Ui(H,zr(nt)),ni();break;default:nt.push(45),Yt(B,Oa);break}}function cl(B){switch(B){case 62:ke=Si,Ui(H,zr(nt));break;case 33:ke=sa;break;case 45:nt.push(45);break;case-1:Ui(H,zr(nt)),ni();break;default:nt.push(45),nt.push(45),Yt(B,Oa);break}}function sa(B){switch(B){case 45:nt.push(45),nt.push(45),nt.push(33),ke=wc;break;case 62:ke=Si,Ui(H,zr(nt));break;case-1:Ui(H,zr(nt)),ni();break;default:nt.push(45),nt.push(45),nt.push(33),Yt(B,Oa);break}}function Ld(B){switch(B){case 9:case 10:case 12:case 32:ke=Eu;break;case-1:Ys(),Xi(),$i(),ni();break;default:Yt(B,Eu);break}}function Eu(B){switch(B){case 9:case 10:case 12:case 32:break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:Ys(),Xt.push(B+32),ke=aa;break;case 0:Ys(),Xt.push(65533),ke=aa;break;case 62:Ys(),Xi(),ke=Si,$i();break;case-1:Ys(),Xi(),$i(),ni();break;default:Ys(),Xt.push(B),ke=aa;break}}function aa(B){switch(B){case 9:case 10:case 12:case 32:ke=Su;break;case 62:ke=Si,$i();break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:Xt.push(B+32);break;case 0:Xt.push(65533);break;case-1:Xi(),$i(),ni();break;default:Xt.push(B);break}}function Su(B,$,Se){switch(B){case 9:case 10:case 12:case 32:De+=1;break;case 62:ke=Si,De+=1,$i();break;case-1:Xi(),$i(),ni();break;default:$=$.toUpperCase(),$==="PUBLIC"?(De+=6,ke=Cc):$==="SYSTEM"?(De+=6,ke=Mu):(Xi(),ke=ss);break}}Su.lookahead=6;function Cc(B){switch(B){case 9:case 10:case 12:case 32:ke=vp;break;case 34:_c(),ke=Nd;break;case 39:_c(),ke=Ec;break;case 62:Xi(),ke=Si,$i();break;case-1:Xi(),$i(),ni();break;default:Xi(),ke=ss;break}}function vp(B){switch(B){case 9:case 10:case 12:case 32:break;case 34:_c(),ke=Nd;break;case 39:_c(),ke=Ec;break;case 62:Xi(),ke=Si,$i();break;case-1:Xi(),$i(),ni();break;default:Xi(),ke=ss;break}}function Nd(B){switch(B){case 34:ke=Tu;break;case 0:ci.push(65533);break;case 62:Xi(),ke=Si,$i();break;case-1:Xi(),$i(),ni();break;default:ci.push(B);break}}function Ec(B){switch(B){case 39:ke=Tu;break;case 0:ci.push(65533);break;case 62:Xi(),ke=Si,$i();break;case-1:Xi(),$i(),ni();break;default:ci.push(B);break}}function Tu(B){switch(B){case 9:case 10:case 12:case 32:ke=Fd;break;case 62:ke=Si,$i();break;case 34:Po(),ke=Bi;break;case 39:Po(),ke=Do;break;case-1:Xi(),$i(),ni();break;default:Xi(),ke=ss;break}}function Fd(B){switch(B){case 9:case 10:case 12:case 32:break;case 62:ke=Si,$i();break;case 34:Po(),ke=Bi;break;case 39:Po(),ke=Do;break;case-1:Xi(),$i(),ni();break;default:Xi(),ke=ss;break}}function Mu(B){switch(B){case 9:case 10:case 12:case 32:ke=zd;break;case 34:Po(),ke=Bi;break;case 39:Po(),ke=Do;break;case 62:Xi(),ke=Si,$i();break;case-1:Xi(),$i(),ni();break;default:Xi(),ke=ss;break}}function zd(B){switch(B){case 9:case 10:case 12:case 32:break;case 34:Po(),ke=Bi;break;case 39:Po(),ke=Do;break;case 62:Xi(),ke=Si,$i();break;case-1:Xi(),$i(),ni();break;default:Xi(),ke=ss;break}}function Bi(B){switch(B){case 34:ke=Sc;break;case 0:sr.push(65533);break;case 62:Xi(),ke=Si,$i();break;case-1:Xi(),$i(),ni();break;default:sr.push(B);break}}function Do(B){switch(B){case 39:ke=Sc;break;case 0:sr.push(65533);break;case 62:Xi(),ke=Si,$i();break;case-1:Xi(),$i(),ni();break;default:sr.push(B);break}}function Sc(B){switch(B){case 9:case 10:case 12:case 32:break;case 62:ke=Si,$i();break;case-1:Xi(),$i(),ni();break;default:ke=ss;break}}function ss(B){switch(B){case 62:ke=Si,$i();break;case-1:$i(),ni();break;default:break}}function ql(B){switch(B){case 93:ke=Bd;break;case-1:ni();break;case 0:wn=!0;default:Yr(ao)||At.push(B);break}}function Bd(B){switch(B){case 93:ke=Iu;break;default:At.push(93),Yt(B,ql);break}}function Iu(B){switch(B){case 93:At.push(93);break;case 62:ki(),ke=Si;break;default:At.push(93),At.push(93),Yt(B,ql);break}}function Ho(B){switch(Vn(),Ht.push(38),B){case 9:case 10:case 12:case 32:case 60:case 38:case-1:Yt(B,la);break;case 35:Ht.push(B),ke=yp;break;default:Yt(B,Tc);break}}function Tc(B){Hr.lastIndex=De;var $=Hr.exec(xe);if(!$)throw new Error("should never happen");var Se=$[1];if(!Se){ke=la;return}switch(De+=Se.length,C(Ht,tl(Se)),li){case ll:case ra:case na:if(Se[Se.length-1]!==";"&&/[=A-Za-z0-9]/.test(xe[De])){ke=la;return}break;default:break}Vn();var Ke=di[Se];typeof Ke=="number"?Ht.push(Ke):C(Ht,Ke),ke=la}Tc.lookahead=-Uo;function yp(B){switch(Ft=0,B){case 120:case 88:Ht.push(B),ke=xp;break;default:Yt(B,wp);break}}function xp(B){switch(B){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 66:case 67:case 68:case 69:case 70:case 97:case 98:case 99:case 100:case 101:case 102:Yt(B,Cp);break;default:Yt(B,la);break}}function wp(B){switch(B){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:Yt(B,Vd);break;default:Yt(B,la);break}}function Cp(B){switch(B){case 65:case 66:case 67:case 68:case 69:case 70:Ft*=16,Ft+=B-55;break;case 97:case 98:case 99:case 100:case 101:case 102:Ft*=16,Ft+=B-87;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:Ft*=16,Ft+=B-48;break;case 59:ke=Mc;break;default:Yt(B,Mc);break}}function Vd(B){switch(B){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:Ft*=10,Ft+=B-48;break;case 59:ke=Mc;break;default:Yt(B,Mc);break}}function Mc(B){Ft in Dt?Ft=Dt[Ft]:(Ft>1114111||Ft>=55296&&Ft<57344)&&(Ft=65533),Vn(),Ft<=65535?Ht.push(Ft):(Ft=Ft-65536,Ht.push(55296+(Ft>>10)),Ht.push(56320+(Ft&1023))),Yt(B,la)}function la(B){switch(li){case ll:case ra:case na:$t+=zr(Ht);break;default:C(At,Ht);break}Yt(B,li)}function Ic(B,$,Se,Ke){switch(B){case 1:if($=$.replace(Fn,""),$.length===0)return;break;case 4:er._appendChild(er.createComment($));return;case 5:var ft=$,zt=Se,oi=Ke;er.appendChild(new o(er,ft,zt,oi)),Sa||ft.toLowerCase()!=="html"||fe.test(zt)||oi&&oi.toLowerCase()===ae||oi===void 0&&ne.test(zt)?er._quirks=!0:(re.test(zt)||oi!==void 0&&ne.test(zt))&&(er._limitedQuirks=!0),it=Hl;return}er._quirks=!0,it=Hl,it(B,$,Se,Ke)}function Hl(B,$,Se,Ke){var ft;switch(B){case 1:if($=$.replace(Fn,""),$.length===0)return;break;case 5:return;case 4:er._appendChild(er.createComment($));return;case 2:if($==="html"){ft=lr(er,$,Se),Fe.push(ft),er.appendChild(ft),it=La;return}break;case 3:switch($){case"html":case"head":case"body":case"br":break;default:return}}ft=lr(er,"html",null),Fe.push(ft),er.appendChild(ft),it=La,it(B,$,Se,Ke)}function La(B,$,Se,Ke){switch(B){case 1:if($=$.replace(Fn,""),$.length===0)return;break;case 5:return;case 4:ar($);return;case 2:switch($){case"html":ii(B,$,Se,Ke);return;case"head":var ft=Kt($,Se);is=ft,it=Sr;return}break;case 3:switch($){case"html":case"head":case"body":case"br":break;default:return}}La(P,"head",null),it(B,$,Se,Ke)}function Sr(B,$,Se,Ke){switch(B){case 1:var ft=$.match(Fn);if(ft&&(_r(ft[0]),$=$.substring(ft[0].length)),$.length===0)return;break;case 4:ar($);return;case 5:return;case 2:switch($){case"html":ii(B,$,Se,Ke);return;case"meta":case"base":case"basefont":case"bgsound":case"link":Kt($,Se),Fe.pop();return;case"title":fi($,Se);return;case"noscript":if(!xn){Kt($,Se),it=ca;return}case"noframes":case"style":Ai($,Se);return;case"script":Cn(function(zt){var oi=lr(zt,$,Se);return oi._parser_inserted=!0,oi._force_async=!1,Bn&&(oi._already_started=!0),ki(),oi}),ke=jo,Jn=it,it=Un;return;case"template":Kt($,Se),Ei.insertMarker(),bi=!1,it=da,ho.push(it);return;case"head":return}break;case 3:switch($){case"head":Fe.pop(),it=ul;return;case"body":case"html":case"br":break;case"template":if(!Fe.contains("template"))return;Fe.generateImpliedEndTags(null,"thorough"),Fe.popTag("template"),Ei.clearToMarker(),ho.pop(),fr();return;default:return}break}Sr(R,"head",null),it(B,$,Se,Ke)}function ca(B,$,Se,Ke){switch(B){case 5:return;case 4:Sr(B,$);return;case 1:var ft=$.match(Fn);if(ft&&(Sr(B,ft[0]),$=$.substring(ft[0].length)),$.length===0)return;break;case 2:switch($){case"html":ii(B,$,Se,Ke);return;case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"style":Sr(B,$,Se);return;case"head":case"noscript":return}break;case 3:switch($){case"noscript":Fe.pop(),it=Sr;return;case"br":break;default:return}break}ca(R,"noscript",null),it(B,$,Se,Ke)}function ul(B,$,Se,Ke){switch(B){case 1:var ft=$.match(Fn);if(ft&&(_r(ft[0]),$=$.substring(ft[0].length)),$.length===0)return;break;case 4:ar($);return;case 5:return;case 2:switch($){case"html":ii(B,$,Se,Ke);return;case"body":Kt($,Se),bi=!1,it=ii;return;case"frameset":Kt($,Se),it=Pc;return;case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":Fe.push(is),Sr(P,$,Se),Fe.removeElement(is);return;case"head":return}break;case 3:switch($){case"template":return Sr(B,$,Se,Ke);case"body":case"html":case"br":break;default:return}break}ul(P,"body",null),bi=!0,it(B,$,Se,Ke)}function ii(B,$,Se,Ke){var ft,zt,oi,Di;switch(B){case 1:if(wn&&($=$.replace(xs,""),$.length===0))return;bi&&co.test($)&&(bi=!1),Jt(),_r($);return;case 5:return;case 4:ar($);return;case-1:if(ho.length)return da(B);Es();return;case 2:switch($){case"html":if(Fe.contains("template"))return;qe(Se,Fe.elements[0]);return;case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":Sr(P,$,Se);return;case"body":if(ft=Fe.elements[1],!ft||!(ft instanceof w.HTMLBodyElement)||Fe.contains("template"))return;bi=!1,qe(Se,ft);return;case"frameset":if(!bi||(ft=Fe.elements[1],!ft||!(ft instanceof w.HTMLBodyElement)))return;for(ft.parentNode&&ft.parentNode.removeChild(ft);!(Fe.top instanceof w.HTMLHtmlElement);)Fe.pop();Kt($,Se),it=Pc;return;case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"nav":case"ol":case"p":case"section":case"summary":case"ul":Fe.inButtonScope("p")&&ii(R,"p"),Kt($,Se);return;case"menu":Fe.inButtonScope("p")&&ii(R,"p"),zi(Fe.top,"menuitem")&&Fe.pop(),Kt($,Se);return;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":Fe.inButtonScope("p")&&ii(R,"p"),Fe.top instanceof w.HTMLHeadingElement&&Fe.pop(),Kt($,Se);return;case"pre":case"listing":Fe.inButtonScope("p")&&ii(R,"p"),Kt($,Se),Ws=!0,bi=!1;return;case"form":if(dr&&!Fe.contains("template"))return;Fe.inButtonScope("p")&&ii(R,"p"),Di=Kt($,Se),Fe.contains("template")||(dr=Di);return;case"li":for(bi=!1,zt=Fe.elements.length-1;zt>=0;zt--){if(oi=Fe.elements[zt],oi instanceof w.HTMLLIElement){ii(R,"li");break}if(zi(oi,de)&&!zi(oi,oe))break}Fe.inButtonScope("p")&&ii(R,"p"),Kt($,Se);return;case"dd":case"dt":for(bi=!1,zt=Fe.elements.length-1;zt>=0;zt--){if(oi=Fe.elements[zt],zi(oi,Ve)){ii(R,oi.localName);break}if(zi(oi,de)&&!zi(oi,oe))break}Fe.inButtonScope("p")&&ii(R,"p"),Kt($,Se);return;case"plaintext":Fe.inButtonScope("p")&&ii(R,"p"),Kt($,Se),ke=Aa;return;case"button":Fe.inScope("button")?(ii(R,"button"),it(B,$,Se,Ke)):(Jt(),Kt($,Se),bi=!1);return;case"a":var br=Ei.findElementByTag("a");br&&(ii(R,$),Ei.remove(br),Fe.removeElement(br));case"b":case"big":case"code":case"em":case"font":case"i":case"s":case"small":case"strike":case"strong":case"tt":case"u":Jt(),Ei.push(Kt($,Se),Se);return;case"nobr":Jt(),Fe.inScope($)&&(ii(R,$),Jt()),Ei.push(Kt($,Se),Se);return;case"applet":case"marquee":case"object":Jt(),Kt($,Se),Ei.insertMarker(),bi=!1;return;case"table":!er._quirks&&Fe.inButtonScope("p")&&ii(R,"p"),Kt($,Se),bi=!1,it=mo;return;case"area":case"br":case"embed":case"img":case"keygen":case"wbr":Jt(),Kt($,Se),Fe.pop(),bi=!1;return;case"input":Jt(),Di=Kt($,Se),Fe.pop();var Kr=Di.getAttribute("type");(!Kr||Kr.toLowerCase()!=="hidden")&&(bi=!1);return;case"param":case"source":case"track":Kt($,Se),Fe.pop();return;case"hr":Fe.inButtonScope("p")&&ii(R,"p"),zi(Fe.top,"menuitem")&&Fe.pop(),Kt($,Se),Fe.pop(),bi=!1;return;case"image":ii(P,"img",Se,Ke);return;case"textarea":Kt($,Se),Ws=!0,bi=!1,ke=ko,Jn=it,it=Un;return;case"xmp":Fe.inButtonScope("p")&&ii(R,"p"),Jt(),bi=!1,Ai($,Se);return;case"iframe":bi=!1,Ai($,Se);return;case"noembed":Ai($,Se);return;case"select":Jt(),Kt($,Se),bi=!1,it===mo||it===$l||it===ls||it===ua||it===cs?it=Na:it=Ro;return;case"optgroup":case"option":Fe.top instanceof w.HTMLOptionElement&&ii(R,"option"),Jt(),Kt($,Se);return;case"menuitem":zi(Fe.top,"menuitem")&&Fe.pop(),Jt(),Kt($,Se);return;case"rb":case"rtc":Fe.inScope("ruby")&&Fe.generateImpliedEndTags(),Kt($,Se);return;case"rp":case"rt":Fe.inScope("ruby")&&Fe.generateImpliedEndTags("rtc"),Kt($,Se);return;case"math":Jt(),zn(Se),Io(Se),En($,Se,s.MATHML),Ke&&Fe.pop();return;case"svg":Jt(),uo(Se),Io(Se),En($,Se,s.SVG),Ke&&Fe.pop();return;case"caption":case"col":case"colgroup":case"frame":case"head":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return}Jt(),Kt($,Se);return;case 3:switch($){case"template":Sr(R,$,Se);return;case"body":if(!Fe.inScope("body"))return;it=Fa;return;case"html":if(!Fe.inScope("body"))return;it=Fa,it(B,$,Se);return;case"address":case"article":case"aside":case"blockquote":case"button":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"listing":case"main":case"menu":case"nav":case"ol":case"pre":case"section":case"summary":case"ul":if(!Fe.inScope($))return;Fe.generateImpliedEndTags(),Fe.popTag($);return;case"form":if(Fe.contains("template")){if(!Fe.inScope("form"))return;Fe.generateImpliedEndTags(),Fe.popTag("form")}else{var jn=dr;if(dr=null,!jn||!Fe.elementInScope(jn))return;Fe.generateImpliedEndTags(),Fe.removeElement(jn)}return;case"p":Fe.inButtonScope($)?(Fe.generateImpliedEndTags($),Fe.popTag($)):(ii(P,$,null),it(B,$,Se,Ke));return;case"li":if(!Fe.inListItemScope($))return;Fe.generateImpliedEndTags($),Fe.popTag($);return;case"dd":case"dt":if(!Fe.inScope($))return;Fe.generateImpliedEndTags($),Fe.popTag($);return;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":if(!Fe.elementTypeInScope(w.HTMLHeadingElement))return;Fe.generateImpliedEndTags(),Fe.popElementType(w.HTMLHeadingElement);return;case"sarcasm":break;case"a":case"b":case"big":case"code":case"em":case"font":case"i":case"nobr":case"s":case"small":case"strike":case"strong":case"tt":case"u":var go=Sn($);if(go)return;break;case"applet":case"marquee":case"object":if(!Fe.inScope($))return;Fe.generateImpliedEndTags(),Fe.popTag($),Ei.clearToMarker();return;case"br":ii(P,$,null);return}for(zt=Fe.elements.length-1;zt>=0;zt--)if(oi=Fe.elements[zt],zi(oi,$)){Fe.generateImpliedEndTags($),Fe.popElement(oi);break}else if(zi(oi,de))return;return}}function Un(B,$,Se,Ke){switch(B){case 1:_r($);return;case-1:Fe.top instanceof w.HTMLScriptElement&&(Fe.top._already_started=!0),Fe.pop(),it=Jn,it(B);return;case 3:$==="script"?yu():(Fe.pop(),it=Jn);return;default:return}}function mo(B,$,Se,Ke){function ft(oi){for(var Di=0,br=oi.length;Di<br;Di++)if(oi[Di][0]==="type")return oi[Di][1].toLowerCase();return null}switch(B){case 1:if(Ll){ii(B,$,Se,Ke);return}else if(zi(Fe.top,tt)){Cs=[],Jn=it,it=Ud,it(B,$,Se,Ke);return}break;case 4:ar($);return;case 5:return;case 2:switch($){case"caption":Fe.clearToContext(we),Ei.insertMarker(),Kt($,Se),it=$l;return;case"colgroup":Fe.clearToContext(we),Kt($,Se),it=as;return;case"col":mo(P,"colgroup",null),it(B,$,Se,Ke);return;case"tbody":case"tfoot":case"thead":Fe.clearToContext(we),Kt($,Se),it=ls;return;case"td":case"th":case"tr":mo(P,"tbody",null),it(B,$,Se,Ke);return;case"table":if(!Fe.inTableScope($))return;mo(R,$),it(B,$,Se,Ke);return;case"style":case"script":case"template":Sr(B,$,Se,Ke);return;case"input":var zt=ft(Se);if(zt!=="hidden")break;Kt($,Se),Fe.pop();return;case"form":if(dr||Fe.contains("template"))return;dr=Kt($,Se),Fe.popElement(dr);return}break;case 3:switch($){case"table":if(!Fe.inTableScope($))return;Fe.popTag($),fr();return;case"body":case"caption":case"col":case"colgroup":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return;case"template":Sr(B,$,Se,Ke);return}break;case-1:ii(B,$,Se,Ke);return}po=!0,ii(B,$,Se,Ke),po=!1}function Ud(B,$,Se,Ke){if(B===I){if(wn&&($=$.replace(xs,""),$.length===0))return;Cs.push($)}else{var ft=Cs.join("");Cs.length=0,co.test(ft)?(po=!0,ii(I,ft),po=!1):_r(ft),it=Jn,it(B,$,Se,Ke)}}function $l(B,$,Se,Ke){function ft(){return Fe.inTableScope("caption")?(Fe.generateImpliedEndTags(),Fe.popTag("caption"),Ei.clearToMarker(),it=mo,!0):!1}switch(B){case 2:switch($){case"caption":case"col":case"colgroup":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":ft()&&it(B,$,Se,Ke);return}break;case 3:switch($){case"caption":ft();return;case"table":ft()&&it(B,$,Se,Ke);return;case"body":case"col":case"colgroup":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return}break}ii(B,$,Se,Ke)}function as(B,$,Se,Ke){switch(B){case 1:var ft=$.match(Fn);if(ft&&(_r(ft[0]),$=$.substring(ft[0].length)),$.length===0)return;break;case 4:ar($);return;case 5:return;case 2:switch($){case"html":ii(B,$,Se,Ke);return;case"col":Kt($,Se),Fe.pop();return;case"template":Sr(B,$,Se,Ke);return}break;case 3:switch($){case"colgroup":if(!zi(Fe.top,"colgroup"))return;Fe.pop(),it=mo;return;case"col":return;case"template":Sr(B,$,Se,Ke);return}break;case-1:ii(B,$,Se,Ke);return}zi(Fe.top,"colgroup")&&(as(R,"colgroup"),it(B,$,Se,Ke))}function ls(B,$,Se,Ke){function ft(){!Fe.inTableScope("tbody")&&!Fe.inTableScope("thead")&&!Fe.inTableScope("tfoot")||(Fe.clearToContext(Ge),ls(R,Fe.top.localName,null),it(B,$,Se,Ke))}switch(B){case 2:switch($){case"tr":Fe.clearToContext(Ge),Kt($,Se),it=ua;return;case"th":case"td":ls(P,"tr",null),it(B,$,Se,Ke);return;case"caption":case"col":case"colgroup":case"tbody":case"tfoot":case"thead":ft();return}break;case 3:switch($){case"table":ft();return;case"tbody":case"tfoot":case"thead":Fe.inTableScope($)&&(Fe.clearToContext(Ge),Fe.pop(),it=mo);return;case"body":case"caption":case"col":case"colgroup":case"html":case"td":case"th":case"tr":return}break}mo(B,$,Se,Ke)}function ua(B,$,Se,Ke){function ft(){return Fe.inTableScope("tr")?(Fe.clearToContext(yt),Fe.pop(),it=ls,!0):!1}switch(B){case 2:switch($){case"th":case"td":Fe.clearToContext(yt),Kt($,Se),it=cs,Ei.insertMarker();return;case"caption":case"col":case"colgroup":case"tbody":case"tfoot":case"thead":case"tr":ft()&&it(B,$,Se,Ke);return}break;case 3:switch($){case"tr":ft();return;case"table":ft()&&it(B,$,Se,Ke);return;case"tbody":case"tfoot":case"thead":Fe.inTableScope($)&&ft()&&it(B,$,Se,Ke);return;case"body":case"caption":case"col":case"colgroup":case"html":case"td":case"th":return}break}mo(B,$,Se,Ke)}function cs(B,$,Se,Ke){switch(B){case 2:switch($){case"caption":case"col":case"colgroup":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":Fe.inTableScope("td")?(cs(R,"td"),it(B,$,Se,Ke)):Fe.inTableScope("th")&&(cs(R,"th"),it(B,$,Se,Ke));return}break;case 3:switch($){case"td":case"th":if(!Fe.inTableScope($))return;Fe.generateImpliedEndTags(),Fe.popTag($),Ei.clearToMarker(),it=ua;return;case"body":case"caption":case"col":case"colgroup":case"html":return;case"table":case"tbody":case"tfoot":case"thead":case"tr":if(!Fe.inTableScope($))return;cs(R,Fe.inTableScope("td")?"td":"th"),it(B,$,Se,Ke);return}break}ii(B,$,Se,Ke)}function Ro(B,$,Se,Ke){switch(B){case 1:if(wn&&($=$.replace(xs,""),$.length===0))return;_r($);return;case 4:ar($);return;case 5:return;case-1:ii(B,$,Se,Ke);return;case 2:switch($){case"html":ii(B,$,Se,Ke);return;case"option":Fe.top instanceof w.HTMLOptionElement&&Ro(R,$),Kt($,Se);return;case"optgroup":Fe.top instanceof w.HTMLOptionElement&&Ro(R,"option"),Fe.top instanceof w.HTMLOptGroupElement&&Ro(R,$),Kt($,Se);return;case"select":Ro(R,$);return;case"input":case"keygen":case"textarea":if(!Fe.inSelectScope("select"))return;Ro(R,"select"),it(B,$,Se,Ke);return;case"script":case"template":Sr(B,$,Se,Ke);return}break;case 3:switch($){case"optgroup":Fe.top instanceof w.HTMLOptionElement&&Fe.elements[Fe.elements.length-2]instanceof w.HTMLOptGroupElement&&Ro(R,"option"),Fe.top instanceof w.HTMLOptGroupElement&&Fe.pop();return;case"option":Fe.top instanceof w.HTMLOptionElement&&Fe.pop();return;case"select":if(!Fe.inSelectScope($))return;Fe.popTag($),fr();return;case"template":Sr(B,$,Se,Ke);return}break}}function Na(B,$,Se,Ke){switch($){case"caption":case"table":case"tbody":case"tfoot":case"thead":case"tr":case"td":case"th":switch(B){case 2:Na(R,"select"),it(B,$,Se,Ke);return;case 3:Fe.inTableScope($)&&(Na(R,"select"),it(B,$,Se,Ke));return}}Ro(B,$,Se,Ke)}function da(B,$,Se,Ke){function ft(zt){it=zt,ho[ho.length-1]=it,it(B,$,Se,Ke)}switch(B){case 1:case 4:case 5:ii(B,$,Se,Ke);return;case-1:Fe.contains("template")?(Fe.popTag("template"),Ei.clearToMarker(),ho.pop(),fr(),it(B,$,Se,Ke)):Es();return;case 2:switch($){case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":Sr(B,$,Se,Ke);return;case"caption":case"colgroup":case"tbody":case"tfoot":case"thead":ft(mo);return;case"col":ft(as);return;case"tr":ft(ls);return;case"td":case"th":ft(ua);return}ft(ii);return;case 3:switch($){case"template":Sr(B,$,Se,Ke);return;default:return}}}function Fa(B,$,Se,Ke){switch(B){case 1:if(co.test($))break;ii(B,$);return;case 4:Fe.elements[0]._appendChild(er.createComment($));return;case 5:return;case-1:Es();return;case 2:if($==="html"){ii(B,$,Se,Ke);return}break;case 3:if($==="html"){if(Bn)return;it=Li;return}break}it=ii,it(B,$,Se,Ke)}function Pc(B,$,Se,Ke){switch(B){case 1:$=$.replace(ys,""),$.length>0&&_r($);return;case 4:ar($);return;case 5:return;case-1:Es();return;case 2:switch($){case"html":ii(B,$,Se,Ke);return;case"frameset":Kt($,Se);return;case"frame":Kt($,Se),Fe.pop();return;case"noframes":Sr(B,$,Se,Ke);return}break;case 3:if($==="frameset"){if(Bn&&Fe.top instanceof w.HTMLHtmlElement)return;Fe.pop(),!Bn&&!(Fe.top instanceof w.HTMLFrameSetElement)&&(it=kc);return}break}}function kc(B,$,Se,Ke){switch(B){case 1:$=$.replace(ys,""),$.length>0&&_r($);return;case 4:ar($);return;case 5:return;case-1:Es();return;case 2:switch($){case"html":ii(B,$,Se,Ke);return;case"noframes":Sr(B,$,Se,Ke);return}break;case 3:if($==="html"){it=Ac;return}break}}function Li(B,$,Se,Ke){switch(B){case 1:if(co.test($))break;ii(B,$,Se,Ke);return;case 4:er._appendChild(er.createComment($));return;case 5:ii(B,$,Se,Ke);return;case-1:Es();return;case 2:if($==="html"){ii(B,$,Se,Ke);return}break}it=ii,it(B,$,Se,Ke)}function Ac(B,$,Se,Ke){switch(B){case 1:$=$.replace(ys,""),$.length>0&&ii(B,$,Se,Ke);return;case 4:er._appendChild(er.createComment($));return;case 5:ii(B,$,Se,Ke);return;case-1:Es();return;case 2:switch($){case"html":ii(B,$,Se,Ke);return;case"noframes":Sr(B,$,Se,Ke);return}break}}function Gl(B,$,Se,Ke){function ft(br){for(var Kr=0,jn=br.length;Kr<jn;Kr++)switch(br[Kr][0]){case"color":case"face":case"size":return!0}return!1}var zt;switch(B){case 1:bi&&Ea.test($)&&(bi=!1),wn&&($=$.replace(xs,"\uFFFD")),_r($);return;case 4:ar($);return;case 5:return;case 2:switch($){case"font":if(!ft(Se))break;case"b":case"big":case"blockquote":case"body":case"br":case"center":case"code":case"dd":case"div":case"dl":case"dt":case"em":case"embed":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"head":case"hr":case"i":case"img":case"li":case"listing":case"menu":case"meta":case"nobr":case"ol":case"p":case"pre":case"ruby":case"s":case"small":case"span":case"strong":case"strike":case"sub":case"sup":case"table":case"tt":case"u":case"ul":case"var":if(Bn)break;do Fe.pop(),zt=Fe.top;while(zt.namespaceURI!==s.HTML&&!ts(zt)&&!ws(zt));Ui(B,$,Se,Ke);return}zt=Fe.elements.length===1&&Bn?Q:Fe.top,zt.namespaceURI===s.MATHML?zn(Se):zt.namespaceURI===s.SVG&&($=il($),uo(Se)),Io(Se),En($,Se,zt.namespaceURI),Ke&&($==="script"&&(zt.namespaceURI,s.SVG),Fe.pop());return;case 3:if(zt=Fe.top,$==="script"&&zt.namespaceURI===s.SVG&&zt.localName==="script")Fe.pop();else for(var oi=Fe.elements.length-1,Di=Fe.elements[oi];;){if(Di.localName.toLowerCase()===$){Fe.popElement(Di);break}if(Di=Fe.elements[--oi],Di.namespaceURI===s.HTML){it(B,$,Se,Ke);break}}return}}return rl.testTokenizer=function(B,$,Se,Ke){var ft=[];switch($){case"PCDATA state":ke=Si;break;case"RCDATA state":ke=ko;break;case"RAWTEXT state":ke=ka;break;case"PLAINTEXT state":ke=Aa;break}if(Se&&(Zi=Se),Ui=function(oi,Di,br,Kr){switch(ki(),oi){case 1:ft.length>0&&ft[ft.length-1][0]==="Character"?ft[ft.length-1][1]+=Di:ft.push(["Character",Di]);break;case 4:ft.push(["Comment",Di]);break;case 5:ft.push(["DOCTYPE",Di,br===void 0?null:br,Kr===void 0?null:Kr,!Sa]);break;case 2:for(var jn=Object.create(null),go=0;go<br.length;go++){var $o=br[go];$o.length===1?jn[$o[0]]="":jn[$o[0]]=$o[1]}var Oo=["StartTag",Di,jn];Kr&&Oo.push(!0),ft.push(Oo);break;case 3:ft.push(["EndTag",Di]);break;case-1:break}},!Ke)this.parse(B,!0);else{for(var zt=0;zt<B.length;zt++)this.parse(B[zt]);this.parse("",!0)}return ft},rl}}}),d0=pi({"external/npm/node_modules/domino/lib/DOMImplementation.js"(i,t){"use strict";t.exports=w;var e=_y(),o=by(),a=vy(),s=bn(),_=dy();function w(T){this.contextObject=T}var C={xml:{"":!0,"1.0":!0,"2.0":!0},core:{"":!0,"2.0":!0},html:{"":!0,"1.0":!0,"2.0":!0},xhtml:{"":!0,"1.0":!0,"2.0":!0}};w.prototype={hasFeature:function(I,P){var R=C[(I||"").toLowerCase()];return R&&R[P||""]||!1},createDocumentType:function(I,P,R){return _.isValidQName(I)||s.InvalidCharacterError(),new o(this.contextObject,I,P,R)},createDocument:function(I,P,R){var H=new e(!1,null),Z;return P?Z=H.createElementNS(I,P):Z=null,R&&H.appendChild(R),Z&&H.appendChild(Z),I===s.NAMESPACE.HTML?H._contentType="application/xhtml+xml":I===s.NAMESPACE.SVG?H._contentType="image/svg+xml":H._contentType="application/xml",H},createHTMLDocument:function(I){var P=new e(!0,null);P.appendChild(new o(P,"html"));var R=P.createElement("html");P.appendChild(R);var H=P.createElement("head");if(R.appendChild(H),I!==void 0){var Z=P.createElement("title");H.appendChild(Z),Z.appendChild(P.createTextNode(I))}return R.appendChild(P.createElement("body")),P.modclock=1,P},mozSetOutputMutationHandler:function(T,I){T.mutationHandler=I},mozGetInputMutationHandler:function(T){s.nyi()},mozHTMLParser:a}}}),aR=pi({"external/npm/node_modules/domino/lib/Location.js"(i,t){"use strict";var e=fy(),o=zS();t.exports=a;function a(s,_){this._window=s,this._href=_}a.prototype=Object.create(o.prototype,{constructor:{value:a},href:{get:function(){return this._href},set:function(s){this.assign(s)}},assign:{value:function(s){var _=new e(this._href),w=_.resolve(s);this._href=w}},replace:{value:function(s){this.assign(s)}},reload:{value:function(){this.assign(this.href)}},toString:{value:function(){return this.href}}})}}),lR=pi({"external/npm/node_modules/domino/lib/NavigatorID.js"(i,t){"use strict";var e=Object.create(null,{appCodeName:{value:"Mozilla"},appName:{value:"Netscape"},appVersion:{value:"4.0"},platform:{value:""},product:{value:"Gecko"},productSub:{value:"20100101"},userAgent:{value:""},vendor:{value:""},vendorSub:{value:""},taintEnabled:{value:function(){return!1}}});t.exports=e}}),cR=pi({"external/npm/node_modules/domino/lib/WindowTimers.js"(i,t){"use strict";var e={setTimeout,clearTimeout,setInterval,clearInterval};t.exports=e}}),US=pi({"external/npm/node_modules/domino/lib/impl.js"(i,t){"use strict";var e=bn();i=t.exports={CSSStyleDeclaration:my(),CharacterData:c0(),Comment:RS(),DOMException:ly(),DOMImplementation:d0(),DOMTokenList:IS(),Document:_y(),DocumentFragment:OS(),DocumentType:by(),Element:zf(),HTMLParser:vy(),NamedNodeMap:kS(),Node:Bo(),NodeList:Ph(),NodeFilter:u0(),ProcessingInstruction:LS(),Text:DS(),Window:jS()},e.merge(i,FS()),e.merge(i,gy().elements),e.merge(i,VS().elements)}}),jS=pi({"external/npm/node_modules/domino/lib/Window.js"(i,t){"use strict";var e=d0(),o=ES(),a=aR(),s=bn();t.exports=_;function _(w){this.document=w||new e(null).createHTMLDocument(""),this.document._scripting_enabled=!0,this.document.defaultView=this,this.location=new a(this,this.document._address||"about:blank")}_.prototype=Object.create(o.prototype,{console:{value:console},history:{value:{back:s.nyi,forward:s.nyi,go:s.nyi}},navigator:{value:lR()},window:{get:function(){return this}},self:{get:function(){return this}},frames:{get:function(){return this}},parent:{get:function(){return this}},top:{get:function(){return this}},length:{value:0},frameElement:{value:null},opener:{value:null},onload:{get:function(){return this._getEventHandler("load")},set:function(w){this._setEventHandler("load",w)}},getComputedStyle:{value:function(C){return C.style}}}),s.expose(cR(),_),s.expose(US(),_)}}),uR=pi({"external/npm/node_modules/domino/lib/index.js"(i){var t=d0(),e=vy(),o=jS(),a=US();i.createDOMImplementation=function(){return new t(null)},i.createDocument=function(s,_){if(s||_){var w=new e;return w.parse(s||"",!0),w.document()}return new t(null).createHTMLDocument("")},i.createIncrementalHTMLParser=function(){var s=new e;return{write:function(_){_.length>0&&s.parse(_,!1,function(){return!0})},end:function(_){s.parse(_||"",!0,function(){return!0})},process:function(_){return s.parse("",!1,_)},document:function(){return s.document()}}},i.createWindow=function(s,_){var w=i.createDocument(s);return _!==void 0&&(w._address=_),new a.Window(w)},i.impl=a}}),l0=uR();function dR(){Object.assign(globalThis,l0.impl),globalThis.KeyboardEvent=l0.impl.Event}function qS(i,t="/"){return l0.createWindow(i,t).document}function hR(i){return i.serialize()}var pR=(()=>{class i extends Th{static makeCurrent(){dR(),Gg(new i)}supportsDOMEvents=!1;static defaultDoc;createHtmlDocument(){return qS("<html><head><title>fakeTitle</title></head><body></body></html>")}getDefaultDocument(){return i.defaultDoc||(i.defaultDoc=l0.createDocument()),i.defaultDoc}isElementNode(e){return e?e.nodeType===i.defaultDoc.ELEMENT_NODE:!1}isShadowRoot(e){return e.shadowRoot==e}getGlobalEventTarget(e,o){return o==="window"?e.defaultView:o==="document"?e:o==="body"?e.body:null}getBaseHref(e){return e.documentElement.querySelector("base")?.getAttribute("href")||""}dispatchEvent(e,o){e.dispatchEvent(o);let s=(e.ownerDocument||e).defaultView;s&&s.dispatchEvent(o)}getUserAgent(){return"Fake user agent"}getCookie(e){throw new Error("getCookie has not been implemented")}}return i})(),kh=new Bt("Server.INITIAL_CONFIG"),HS=new Bt("Server.RENDER_MODULE_HOOK"),fR=new Bt("ENABLE_DOM_EMULATION"),$S=(()=>{class i{_doc;_enableDomEmulation=yy(Le(Dn));constructor(e){this._doc=e}renderToString(){let e="renderToString";wl(e);let o=this._enableDomEmulation?hR(this._doc):this._doc.documentElement.outerHTML;return Cl(e),o}getDocument(){return this._doc}static \u0275fac=function(o){return new(o||i)(hi(Oi))};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})();function yy(i){return i.get(fR,!0)}var mR=(()=>{class i{xhrImpl;\u0275loadImpl(){return qi(this,null,function*(){if(!this.xhrImpl){let{default:e}=yield import("./chunk-FE3ZEMPP.mjs");this.xhrImpl=e}})}build(){let e=this.xhrImpl;if(!e)throw new Error("Unexpected state in ServerXhr: XHR implementation is not loaded.");return new e.XMLHttpRequest}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})();function gR(i,t){let e=Le(wf),{href:o,protocol:a,hostname:s,port:_}=e;if(!a.startsWith("http"))return t(i);let w=`${a}//${s}`;_&&(w+=`:${_}`);let C=e.getBaseHrefFromDOM()||o,T=new URL(C,w),I=new URL(i.url,T).toString();return t(i.clone({url:I}))}var _R=[{provide:Ch,useClass:mR},{provide:Jv,useValue:gR,multi:!0}],vS="resolve:";function yS(i){let{hostname:t,protocol:e,port:o,pathname:a,search:s,hash:_}=new URL(i,vS+"//");return{hostname:t,protocol:e===vS?"":e,port:o,pathname:a,search:s,hash:_}}var bR=(()=>{class i{_doc;href="/";hostname="/";protocol="/";port="/";pathname="/";search="";hash="";_hashUpdate=new Mi;constructor(e,o){this._doc=e;let a=o;if(a&&a.url){let s=yS(a.url);this.protocol=s.protocol,this.hostname=s.hostname,this.port=s.port,this.pathname=s.pathname,this.search=s.search,this.hash=s.hash,this.href=e.location.href}}getBaseHrefFromDOM(){return El().getBaseHref(this._doc)}onPopState(e){return()=>{}}onHashChange(e){let o=this._hashUpdate.subscribe(e);return()=>o.unsubscribe()}get url(){return`${this.pathname}${this.search}${this.hash}`}setHash(e,o){if(this.hash===e)return;this.hash=e;let a=this.url;queueMicrotask(()=>this._hashUpdate.next({type:"hashchange",state:null,oldUrl:o,newUrl:a}))}replaceState(e,o,a){let s=this.url,_=yS(a);this.pathname=_.pathname,this.search=_.search,this.setHash(_.hash,s)}pushState(e,o,a){this.replaceState(e,o,a)}forward(){throw new Error("Not implemented")}back(){throw new Error("Not implemented")}getState(){}static \u0275fac=function(o){return new(o||i)(hi(Oi),hi(kh,8))};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})(),vR=(()=>{class i extends Mh{doc;constructor(e){super(e),this.doc=e}supports(e){return!0}addEventListener(e,o,a){return El().onAndCancel(e,o,a)}static \u0275fac=function(o){return new(o||i)(hi(Oi))};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})(),yR=[{provide:HS,useFactory:xR,deps:[Oi,Qc,zv],multi:!0}];function GS(i,t,e){let o=i.createElement("script");return o.textContent=t,e&&o.setAttribute("nonce",e),o}function xR(i,t,e){return()=>{let o="serializeTransferStateFactory";wl(o);let a=e.toJson();if(e.isEmpty)return;let s=GS(i,a,null);s.id=t+"-state",s.setAttribute("type","application/json"),i.body.appendChild(s),Cl(o)}}var wR=[{provide:Oi,useFactory:TR,deps:[Dn]},{provide:Ls,useValue:VE},{provide:Ng,useFactory:CR,multi:!0,deps:[Dn]},{provide:wf,useClass:bR,deps:[Oi,[Ku,kh]]},{provide:$S,deps:[Oi]},{provide:SE,useValue:!0}];function CR(i){let t=yy(i);return()=>{t?pR.makeCurrent():Th.makeCurrent()}}var ER=[{provide:Rf,multi:!0,useClass:vR}],SR=[yR,ER,_R,{provide:Uv,useValue:null},{provide:Vv,useValue:null},{provide:Qg,useClass:UE}];function TR(i){let t=i.get(kh,null),e=yy(i),o;return t&&t.document?o=typeof t.document=="string"?e?qS(t.document,t.url):window.document:t.document:o=El().createHtmlDocument(),Lg(o),o}function xy(i){let t=$v(Gv,"server",wR)(i);return t.onDestroy(()=>{globalThis.ngServerMode=void 0}),t}function WS(){return Ga([bS(),...SR])}var MR="ng-event-dispatch-contract";function ZS(i){let t=i.platformProviders??[],e="createServerPlatform";wl(e);let o=xy([{provide:kh,useValue:{document:i.document,url:i.url}},t]);return Cl(e),o}function XS(i){return i.getElementById(MR)}function xS(i){XS(i)?.remove()}function IR(i,t){let e="prepareForHydration";wl(e);let o=t.injector,a=i.getDocument();if(!o.get(sE,!1)){xS(a);return}PR(a);let s=ME(t,a);s.regular.size||s.capture.size?AR(o.get(Qc),a,s,o.get(ed,null)):xS(a),Cl(e)}function PR(i){let t=i.createComment(aE);i.body.firstChild?i.body.insertBefore(t,i.body.firstChild):i.body.append(t)}function kR(i){let t=i.injector,e=DR(t.get(wy,QS));i.components.forEach(o=>{let a=o.injector.get(tc),s=o.location.nativeElement;s&&a.setAttribute(s,"ng-server-context",e)})}function AR(i,t,e,o){let a="insertEventRecordScript";wl(a);let{regular:s,capture:_}=e,w=XS(t);if(w){let C=`window.__jsaction_bootstrap(document.body,"${i}",${JSON.stringify(Array.from(s))},${JSON.stringify(Array.from(_))});`,T=GS(t,C,o);w.after(T)}Cl(a)}function YS(i,t){return qi(this,null,function*(){let e="whenStable";wl(e),yield t.whenStable(),Cl(e);let o=i.injector.get($S);IR(o,t);let s=t.injector.get(HS,null);if(s){let _=[];for(let w of s)try{let C=w();C&&_.push(C)}catch(C){console.warn("Ignoring BEFORE_APP_SERIALIZED Exception: ",C)}if(_.length)for(let w of yield Promise.allSettled(_))w.status==="rejected"&&console.warn("Ignoring BEFORE_APP_SERIALIZED Exception: ",w.reason)}return kR(t),o.renderToString()})}function KS(i){return new Promise(t=>{setTimeout(()=>{i.destroy(),t()},0)})}var QS="other",wy=new Bt("SERVER_CONTEXT");function DR(i){let t=i.replace(/[^a-zA-Z0-9\-]/g,"");return t.length>0?t:QS}function JS(i,t){return qi(this,null,function*(){let{document:e,url:o,extraProviders:a}=t,s=ZS({document:e,url:o,platformProviders:a});try{let w=(yield s.bootstrapModule(i)).injector.get(ga);return yield YS(s,w)}finally{yield KS(s)}})}function eT(i,t){return qi(this,null,function*(){let e="renderApplication",o="bootstrap",a="_render";wl(e);let s=ZS(t);try{wl(o);let _=yield i();Cl(o),wl(a);let w=yield YS(s,_);return Cl(a),w}finally{yield KS(s),Cl(e)}})}var Hi="primary",Jf=Symbol("RouteTitle"),My=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Nh(i){return new My(i)}function RR(i,t,e){let o=e.path.split("/");if(o.length>i.length||e.pathMatch==="full"&&(t.hasChildren()||o.length<i.length))return null;let a={};for(let s=0;s<o.length;s++){let _=o[s],w=i[s];if(_[0]===":")a[_.substring(1)]=w;else if(_!==w.path)return null}return{consumed:i.slice(0,o.length),posParams:a}}function OR(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!Ml(i[e],t[e]))return!1;return!0}function Ml(i,t){let e=i?Iy(i):void 0,o=t?Iy(t):void 0;if(!e||!o||e.length!=o.length)return!1;let a;for(let s=0;s<e.length;s++)if(a=e[s],!dT(i[a],t[a]))return!1;return!0}function Iy(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function dT(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;let e=[...i].sort(),o=[...t].sort();return e.every((a,s)=>o[s]===a)}else return i===t}function hT(i){return i.length>0?i[i.length-1]:null}function su(i){return df(i)?i:Ug(i)?yo(Promise.resolve(i)):ti(i)}var LR={exact:fT,subset:mT},pT={exact:NR,subset:FR,ignored:()=>!0};function tT(i,t,e){return LR[e.paths](i.root,t.root,e.matrixParams)&&pT[e.queryParams](i.queryParams,t.queryParams)&&!(e.fragment==="exact"&&i.fragment!==t.fragment)}function NR(i,t){return Ml(i,t)}function fT(i,t,e){if(!sd(i.segments,t.segments)||!f0(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(let o in t.children)if(!i.children[o]||!fT(i.children[o],t.children[o],e))return!1;return!0}function FR(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>dT(i[e],t[e]))}function mT(i,t,e){return gT(i,t,t.segments,e)}function gT(i,t,e,o){if(i.segments.length>e.length){let a=i.segments.slice(0,e.length);return!(!sd(a,e)||t.hasChildren()||!f0(a,e,o))}else if(i.segments.length===e.length){if(!sd(i.segments,e)||!f0(i.segments,e,o))return!1;for(let a in t.children)if(!i.children[a]||!mT(i.children[a],t.children[a],o))return!1;return!0}else{let a=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!sd(i.segments,a)||!f0(i.segments,a,o)||!i.children[Hi]?!1:gT(i.children[Hi],t,s,o)}}function f0(i,t,e){return t.every((o,a)=>pT[e](i[a].parameters,o.parameters))}var nc=class{root;queryParams;fragment;_queryParamMap;constructor(t=new xr([],{}),e={},o=null){this.root=t,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap??=Nh(this.queryParams),this._queryParamMap}toString(){return VR.serialize(this)}},xr=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(o=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return m0(this)}},od=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Nh(this.parameters),this._parameterMap}toString(){return bT(this)}};function zR(i,t){return sd(i,t)&&i.every((e,o)=>Ml(e.parameters,t[o].parameters))}function sd(i,t){return i.length!==t.length?!1:i.every((e,o)=>e.path===t[o].path)}function BR(i,t){let e=[];return Object.entries(i.children).forEach(([o,a])=>{o===Hi&&(e=e.concat(t(a,o)))}),Object.entries(i.children).forEach(([o,a])=>{o!==Hi&&(e=e.concat(t(a,o)))}),e}var em=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:()=>new Fh,providedIn:"root"})}return i})(),Fh=class{parse(t){let e=new ky(t);return new nc(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Bf(t.root,!0)}`,o=qR(t.queryParams),a=typeof t.fragment=="string"?`#${UR(t.fragment)}`:"";return`${e}${o}${a}`}},VR=new Fh;function m0(i){return i.segments.map(t=>bT(t)).join("/")}function Bf(i,t){if(!i.hasChildren())return m0(i);if(t){let e=i.children[Hi]?Bf(i.children[Hi],!1):"",o=[];return Object.entries(i.children).forEach(([a,s])=>{a!==Hi&&o.push(`${a}:${Bf(s,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}else{let e=BR(i,(o,a)=>a===Hi?[Bf(i.children[Hi],!1)]:[`${a}:${Bf(o,!1)}`]);return Object.keys(i.children).length===1&&i.children[Hi]!=null?`${m0(i)}/${e[0]}`:`${m0(i)}/(${e.join("//")})`}}function _T(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function h0(i){return _T(i).replace(/%3B/gi,";")}function UR(i){return encodeURI(i)}function Py(i){return _T(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function g0(i){return decodeURIComponent(i)}function iT(i){return g0(i.replace(/\+/g,"%20"))}function bT(i){return`${Py(i.path)}${jR(i.parameters)}`}function jR(i){return Object.entries(i).map(([t,e])=>`;${Py(t)}=${Py(e)}`).join("")}function qR(i){let t=Object.entries(i).map(([e,o])=>Array.isArray(o)?o.map(a=>`${h0(e)}=${h0(a)}`).join("&"):`${h0(e)}=${h0(o)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var HR=/^[^\/()?;#]+/;function Cy(i){let t=i.match(HR);return t?t[0]:""}var $R=/^[^\/()?;=#]+/;function GR(i){let t=i.match($R);return t?t[0]:""}var WR=/^[^=?&#]+/;function ZR(i){let t=i.match(WR);return t?t[0]:""}var XR=/^[^&#]+/;function YR(i){let t=i.match(XR);return t?t[0]:""}var ky=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xr([],{}):new xr([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(o[Hi]=new xr(t,e)),o}parseSegment(){let t=Cy(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Er(4009,!1);return this.capture(t),new od(g0(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=GR(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){let a=Cy(this.remaining);a&&(o=a,this.capture(o))}t[g0(e)]=g0(o)}parseQueryParam(t){let e=ZR(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){let _=YR(this.remaining);_&&(o=_,this.capture(o))}let a=iT(e),s=iT(o);if(t.hasOwnProperty(a)){let _=t[a];Array.isArray(_)||(_=[_],t[a]=_),_.push(s)}else t[a]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let o=Cy(this.remaining),a=this.remaining[o.length];if(a!=="/"&&a!==")"&&a!==";")throw new Er(4010,!1);let s;o.indexOf(":")>-1?(s=o.slice(0,o.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Hi);let _=this.parseChildren();e[s]=Object.keys(_).length===1?_[Hi]:new xr([],_),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Er(4011,!1)}};function vT(i){return i.segments.length>0?new xr([],{[Hi]:i}):i}function yT(i){let t={};for(let[o,a]of Object.entries(i.children)){let s=yT(a);if(o===Hi&&s.segments.length===0&&s.hasChildren())for(let[_,w]of Object.entries(s.children))t[_]=w;else(s.segments.length>0||s.hasChildren())&&(t[o]=s)}let e=new xr(i.segments,t);return KR(e)}function KR(i){if(i.numberOfChildren===1&&i.children[Hi]){let t=i.children[Hi];return new xr(i.segments.concat(t.segments),t.children)}return i}function ad(i){return i instanceof nc}function QR(i,t,e=null,o=null){let a=xT(i);return wT(a,t,e,o)}function xT(i){let t;function e(s){let _={};for(let C of s.children){let T=e(C);_[C.outlet]=T}let w=new xr(s.url,_);return s===i&&(t=w),w}let o=e(i.root),a=vT(o);return t??a}function wT(i,t,e,o){let a=i;for(;a.parent;)a=a.parent;if(t.length===0)return Ey(a,a,a,e,o);let s=JR(t);if(s.toRoot())return Ey(a,a,new xr([],{}),e,o);let _=e8(s,a,i),w=_.processChildren?jf(_.segmentGroup,_.index,s.commands):ET(_.segmentGroup,_.index,s.commands);return Ey(a,_.segmentGroup,w,e,o)}function _0(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function $f(i){return typeof i=="object"&&i!=null&&i.outlets}function Ey(i,t,e,o,a){let s={};o&&Object.entries(o).forEach(([C,T])=>{s[C]=Array.isArray(T)?T.map(I=>`${I}`):`${T}`});let _;i===t?_=e:_=CT(i,t,e);let w=vT(yT(_));return new nc(w,s,a)}function CT(i,t,e){let o={};return Object.entries(i.children).forEach(([a,s])=>{s===t?o[a]=e:o[a]=CT(s,t,e)}),new xr(i.segments,o)}var b0=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,o){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=o,t&&o.length>0&&_0(o[0]))throw new Er(4003,!1);let a=o.find($f);if(a&&a!==hT(o))throw new Er(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function JR(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new b0(!0,0,i);let t=0,e=!1,o=i.reduce((a,s,_)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let w={};return Object.entries(s.outlets).forEach(([C,T])=>{w[C]=typeof T=="string"?T.split("/"):T}),[...a,{outlets:w}]}if(s.segmentPath)return[...a,s.segmentPath]}return typeof s!="string"?[...a,s]:_===0?(s.split("/").forEach((w,C)=>{C==0&&w==="."||(C==0&&w===""?e=!0:w===".."?t++:w!=""&&a.push(w))}),a):[...a,s]},[]);return new b0(e,t,o)}var Rh=class{segmentGroup;processChildren;index;constructor(t,e,o){this.segmentGroup=t,this.processChildren=e,this.index=o}};function e8(i,t,e){if(i.isAbsolute)return new Rh(t,!0,0);if(!e)return new Rh(t,!1,NaN);if(e.parent===null)return new Rh(e,!0,0);let o=_0(i.commands[0])?0:1,a=e.segments.length-1+o;return t8(e,a,i.numberOfDoubleDots)}function t8(i,t,e){let o=i,a=t,s=e;for(;s>a;){if(s-=a,o=o.parent,!o)throw new Er(4005,!1);a=o.segments.length}return new Rh(o,!1,a-s)}function i8(i){return $f(i[0])?i[0].outlets:{[Hi]:i}}function ET(i,t,e){if(i??=new xr([],{}),i.segments.length===0&&i.hasChildren())return jf(i,t,e);let o=r8(i,t,e),a=e.slice(o.commandIndex);if(o.match&&o.pathIndex<i.segments.length){let s=new xr(i.segments.slice(0,o.pathIndex),{});return s.children[Hi]=new xr(i.segments.slice(o.pathIndex),i.children),jf(s,0,a)}else return o.match&&a.length===0?new xr(i.segments,{}):o.match&&!i.hasChildren()?Ay(i,t,e):o.match?jf(i,0,a):Ay(i,t,e)}function jf(i,t,e){if(e.length===0)return new xr(i.segments,{});{let o=i8(e),a={};if(Object.keys(o).some(s=>s!==Hi)&&i.children[Hi]&&i.numberOfChildren===1&&i.children[Hi].segments.length===0){let s=jf(i.children[Hi],t,e);return new xr(i.segments,s.children)}return Object.entries(o).forEach(([s,_])=>{typeof _=="string"&&(_=[_]),_!==null&&(a[s]=ET(i.children[s],t,_))}),Object.entries(i.children).forEach(([s,_])=>{o[s]===void 0&&(a[s]=_)}),new xr(i.segments,a)}}function r8(i,t,e){let o=0,a=t,s={match:!1,pathIndex:0,commandIndex:0};for(;a<i.segments.length;){if(o>=e.length)return s;let _=i.segments[a],w=e[o];if($f(w))break;let C=`${w}`,T=o<e.length-1?e[o+1]:null;if(a>0&&C===void 0)break;if(C&&T&&typeof T=="object"&&T.outlets===void 0){if(!nT(C,T,_))return s;o+=2}else{if(!nT(C,{},_))return s;o++}a++}return{match:!0,pathIndex:a,commandIndex:o}}function Ay(i,t,e){let o=i.segments.slice(0,t),a=0;for(;a<e.length;){let s=e[a];if($f(s)){let C=n8(s.outlets);return new xr(o,C)}if(a===0&&_0(e[0])){let C=i.segments[t];o.push(new od(C.path,rT(e[0]))),a++;continue}let _=$f(s)?s.outlets[Hi]:`${s}`,w=a<e.length-1?e[a+1]:null;_&&w&&_0(w)?(o.push(new od(_,rT(w))),a+=2):(o.push(new od(_,{})),a++)}return new xr(o,{})}function n8(i){let t={};return Object.entries(i).forEach(([e,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(t[e]=Ay(new xr([],{}),0,o))}),t}function rT(i){let t={};return Object.entries(i).forEach(([e,o])=>t[e]=`${o}`),t}function nT(i,t,e){return i==e.path&&Ml(t,e.parameters)}var qf="imperative",no=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(no||{}),va=class{id;url;constructor(t,e){this.id=t,this.url=e}},zh=class extends va{type=no.NavigationStart;navigationTrigger;restoredState;constructor(t,e,o="imperative",a=null){super(t,e),this.navigationTrigger=o,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Il=class extends va{urlAfterRedirects;type=no.NavigationEnd;constructor(t,e,o){super(t,e),this.urlAfterRedirects=o}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bs=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(Bs||{}),v0=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(v0||{}),rc=class extends va{reason;code;type=no.NavigationCancel;constructor(t,e,o,a){super(t,e),this.reason=o,this.code=a}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},nu=class extends va{reason;code;type=no.NavigationSkipped;constructor(t,e,o,a){super(t,e),this.reason=o,this.code=a}},Gf=class extends va{error;target;type=no.NavigationError;constructor(t,e,o,a){super(t,e),this.error=o,this.target=a}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},y0=class extends va{urlAfterRedirects;state;type=no.RoutesRecognized;constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dy=class extends va{urlAfterRedirects;state;type=no.GuardsCheckStart;constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ry=class extends va{urlAfterRedirects;state;shouldActivate;type=no.GuardsCheckEnd;constructor(t,e,o,a,s){super(t,e),this.urlAfterRedirects=o,this.state=a,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Oy=class extends va{urlAfterRedirects;state;type=no.ResolveStart;constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ly=class extends va{urlAfterRedirects;state;type=no.ResolveEnd;constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ny=class{route;type=no.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fy=class{route;type=no.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zy=class{snapshot;type=no.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},By=class{snapshot;type=no.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vy=class{snapshot;type=no.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uy=class{snapshot;type=no.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},x0=class{routerEvent;position;anchor;type=no.Scroll;constructor(t,e,o){this.routerEvent=t,this.position=e,this.anchor=o}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Wf=class{},Bh=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function o8(i,t){return i.providers&&!i._injector&&(i._injector=Bv(i.providers,t,`Route: ${i.path}`)),i._injector??t}function Ka(i){return i.outlet||Hi}function s8(i,t){let e=i.filter(o=>Ka(o)===t);return e.push(...i.filter(o=>Ka(o)!==t)),e}function tm(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var jy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return tm(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new im(this.rootInjector)}},im=(()=>{class i{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,o){let a=this.getOrCreateContext(e);a.outlet=o,this.contexts.set(e,a)}onChildOutletDestroyed(e){let o=this.getContext(e);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let o=this.getContext(e);return o||(o=new jy(this.rootInjector),this.contexts.set(e,o)),o}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(o){return new(o||i)(hi(Wa))};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),w0=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=qy(t,this._root);return e?e.children.map(o=>o.value):[]}firstChild(t){let e=qy(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Hy(t,this._root);return e.length<2?[]:e[e.length-2].children.map(a=>a.value).filter(a=>a!==t)}pathFromRoot(t){return Hy(t,this._root).map(e=>e.value)}};function qy(i,t){if(i===t.value)return t;for(let e of t.children){let o=qy(i,e);if(o)return o}return null}function Hy(i,t){if(i===t.value)return[t];for(let e of t.children){let o=Hy(i,e);if(o.length)return o.unshift(t),o}return[]}var zs=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Dh(i){let t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}var C0=class extends w0{snapshot;constructor(t,e){super(t),this.snapshot=e,Jy(this,t)}toString(){return this.snapshot.toString()}};function ST(i){let t=a8(i),e=new ps([new od("",{})]),o=new ps({}),a=new ps({}),s=new ps({}),_=new ps(""),w=new ou(e,o,s,_,a,Hi,i,t.root);return w.snapshot=t.root,new C0(new zs(w,[]),t)}function a8(i){let t={},e={},o={},a="",s=new Oh([],t,o,a,e,Hi,i,null,{});return new S0("",new zs(s,[]))}var ou=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,o,a,s,_,w,C){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=o,this.fragmentSubject=a,this.dataSubject=s,this.outlet=_,this.component=w,this._futureSnapshot=C,this.title=this.dataSubject?.pipe(wi(T=>T[Jf]))??ti(void 0),this.url=t,this.params=e,this.queryParams=o,this.fragment=a,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(wi(t=>Nh(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(wi(t=>Nh(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function E0(i,t,e="emptyOnly"){let o,{routeConfig:a}=i;return t!==null&&(e==="always"||a?.path===""||!t.component&&!t.routeConfig?.loadComponent)?o={params:gt(gt({},t.params),i.params),data:gt(gt({},t.data),i.data),resolve:gt(gt(gt(gt({},i.data),t.data),a?.data),i._resolvedData)}:o={params:gt({},i.params),data:gt({},i.data),resolve:gt(gt({},i.data),i._resolvedData??{})},a&&MT(a)&&(o.resolve[Jf]=a.title),o}var Oh=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Jf]}constructor(t,e,o,a,s,_,w,C,T){this.url=t,this.params=e,this.queryParams=o,this.fragment=a,this.data=s,this.outlet=_,this.component=w,this.routeConfig=C,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Nh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Nh(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(o=>o.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},S0=class extends w0{url;constructor(t,e){super(e),this.url=t,Jy(this,e)}toString(){return TT(this._root)}};function Jy(i,t){t.value._routerState=i,t.children.forEach(e=>Jy(i,e))}function TT(i){let t=i.children.length>0?` { ${i.children.map(TT).join(", ")} } `:"";return`${i.value}${t}`}function Sy(i){if(i.snapshot){let t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Ml(t.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),Ml(t.params,e.params)||i.paramsSubject.next(e.params),OR(t.url,e.url)||i.urlSubject.next(e.url),Ml(t.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function $y(i,t){let e=Ml(i.params,t.params)&&zR(i.url,t.url),o=!i.parent!=!t.parent;return e&&!o&&(!i.parent||$y(i.parent,t.parent))}function MT(i){return typeof i.title=="string"||i.title===null}var l8=new Bt(""),rm=(()=>{class i{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Hi;activateEvents=new Yi;deactivateEvents=new Yi;attachEvents=new Yi;detachEvents=new Yi;routerOutletData=oE(void 0);parentContexts=Le(im);location=Le(yh);changeDetector=Le(wo);inputBinder=Le(P0,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:o,previousValue:a}=e.name;if(o)return;this.isTrackedInParentContexts(a)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(a)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Er(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Er(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Er(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,o){this.activated=e,this._activatedRoute=o,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,o){if(this.isActivated)throw new Er(4013,!1);this._activatedRoute=e;let a=this.location,_=e.snapshot.component,w=this.parentContexts.getOrCreateContext(this.name).children,C=new Gy(e,w,a.injector,this.routerOutletData);this.activated=a.createComponent(_,{index:a.length,injector:C,environmentInjector:o}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ko]})}return i})(),Gy=class i{route;childContexts;parent;outletData;__ngOutletInjector(t){return new i(this.route,this.childContexts,t,this.outletData)}constructor(t,e,o,a){this.route=t,this.childContexts=e,this.parent=o,this.outletData=a}get(t,e){return t===ou?this.route:t===im?this.childContexts:t===l8?this.outletData:this.parent.get(t,e)}},P0=new Bt(""),oT=(()=>{class i{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:o}=e,a=mh([o.queryParams,o.params,o.data]).pipe(xo(([s,_,w],C)=>(w=gt(gt(gt({},s),_),w),C===0?ti(w):Promise.resolve(w)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==o||o.component===null){this.unsubscribeFromRouteData(e);return}let _=PE(o.component);if(!_){this.unsubscribeFromRouteData(e);return}for(let{templateName:w}of _.inputs)e.activatedComponentRef.setInput(w,s[w])});this.outletDataSubscriptions.set(e,a)}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})();function c8(i,t,e){let o=Zf(i,t._root,e?e._root:void 0);return new C0(o,t)}function Zf(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){let o=e.value;o._futureSnapshot=t.value;let a=u8(i,t,e);return new zs(o,a)}else{if(i.shouldAttach(t.value)){let s=i.retrieve(t.value);if(s!==null){let _=s.route;return _.value._futureSnapshot=t.value,_.children=t.children.map(w=>Zf(i,w)),_}}let o=d8(t.value),a=t.children.map(s=>Zf(i,s));return new zs(o,a)}}function u8(i,t,e){return t.children.map(o=>{for(let a of e.children)if(i.shouldReuseRoute(o.value,a.value.snapshot))return Zf(i,o,a);return Zf(i,o)})}function d8(i){return new ou(new ps(i.url),new ps(i.params),new ps(i.queryParams),new ps(i.fragment),new ps(i.data),i.outlet,i.component,i)}var Xf=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},IT="ngNavigationCancelingError";function T0(i,t){let{redirectTo:e,navigationBehaviorOptions:o}=ad(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,a=PT(!1,Bs.Redirect);return a.url=e,a.navigationBehaviorOptions=o,a}function PT(i,t){let e=new Error(`NavigationCancelingError: ${i||""}`);return e[IT]=!0,e.cancellationCode=t,e}function h8(i){return kT(i)&&ad(i.url)}function kT(i){return!!i&&i[IT]}var p8=(i,t,e,o)=>wi(a=>(new Wy(t,a.targetRouterState,a.currentRouterState,e,o).activate(i),a)),Wy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,o,a,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=o,this.forwardEvent=a,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,t),Sy(this.futureState.root),this.activateChildRoutes(e,o,t)}deactivateChildRoutes(t,e,o){let a=Dh(e);t.children.forEach(s=>{let _=s.value.outlet;this.deactivateRoutes(s,a[_],o),delete a[_]}),Object.values(a).forEach(s=>{this.deactivateRouteAndItsChildren(s,o)})}deactivateRoutes(t,e,o){let a=t.value,s=e?e.value:null;if(a===s)if(a.component){let _=o.getContext(a.outlet);_&&this.deactivateChildRoutes(t,e,_.children)}else this.deactivateChildRoutes(t,e,o);else s&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let o=e.getContext(t.value.outlet),a=o&&t.value.component?o.children:e,s=Dh(t);for(let _ of Object.values(s))this.deactivateRouteAndItsChildren(_,a);if(o&&o.outlet){let _=o.outlet.detach(),w=o.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:_,route:t,contexts:w})}}deactivateRouteAndOutlet(t,e){let o=e.getContext(t.value.outlet),a=o&&t.value.component?o.children:e,s=Dh(t);for(let _ of Object.values(s))this.deactivateRouteAndItsChildren(_,a);o&&(o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated()),o.attachRef=null,o.route=null)}activateChildRoutes(t,e,o){let a=Dh(e);t.children.forEach(s=>{this.activateRoutes(s,a[s.value.outlet],o),this.forwardEvent(new Uy(s.value.snapshot))}),t.children.length&&this.forwardEvent(new By(t.value.snapshot))}activateRoutes(t,e,o){let a=t.value,s=e?e.value:null;if(Sy(a),a===s)if(a.component){let _=o.getOrCreateContext(a.outlet);this.activateChildRoutes(t,e,_.children)}else this.activateChildRoutes(t,e,o);else if(a.component){let _=o.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){let w=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),_.children.onOutletReAttached(w.contexts),_.attachRef=w.componentRef,_.route=w.route.value,_.outlet&&_.outlet.attach(w.componentRef,w.route.value),Sy(w.route.value),this.activateChildRoutes(t,null,_.children)}else _.attachRef=null,_.route=a,_.outlet&&_.outlet.activateWith(a,_.injector),this.activateChildRoutes(t,null,_.children)}else this.activateChildRoutes(t,null,o)}},M0=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Lh=class{component;route;constructor(t,e){this.component=t,this.route=e}};function f8(i,t,e){let o=i._root,a=t?t._root:null;return Vf(o,a,e,[o.value])}function m8(i){let t=i.routeConfig?i.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:i,guards:t}}function Uh(i,t){let e=Symbol(),o=t.get(i,e);return o===e?typeof i=="function"&&!eE(i)?i:t.get(i):o}function Vf(i,t,e,o,a={canDeactivateChecks:[],canActivateChecks:[]}){let s=Dh(t);return i.children.forEach(_=>{g8(_,s[_.value.outlet],e,o.concat([_.value]),a),delete s[_.value.outlet]}),Object.entries(s).forEach(([_,w])=>Hf(w,e.getContext(_),a)),a}function g8(i,t,e,o,a={canDeactivateChecks:[],canActivateChecks:[]}){let s=i.value,_=t?t.value:null,w=e?e.getContext(i.value.outlet):null;if(_&&s.routeConfig===_.routeConfig){let C=_8(_,s,s.routeConfig.runGuardsAndResolvers);C?a.canActivateChecks.push(new M0(o)):(s.data=_.data,s._resolvedData=_._resolvedData),s.component?Vf(i,t,w?w.children:null,o,a):Vf(i,t,e,o,a),C&&w&&w.outlet&&w.outlet.isActivated&&a.canDeactivateChecks.push(new Lh(w.outlet.component,_))}else _&&Hf(t,w,a),a.canActivateChecks.push(new M0(o)),s.component?Vf(i,null,w?w.children:null,o,a):Vf(i,null,e,o,a);return a}function _8(i,t,e){if(typeof e=="function")return e(i,t);switch(e){case"pathParamsChange":return!sd(i.url,t.url);case"pathParamsOrQueryParamsChange":return!sd(i.url,t.url)||!Ml(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$y(i,t)||!Ml(i.queryParams,t.queryParams);case"paramsChange":default:return!$y(i,t)}}function Hf(i,t,e){let o=Dh(i),a=i.value;Object.entries(o).forEach(([s,_])=>{a.component?t?Hf(_,t.children.getContext(s),e):Hf(_,null,e):Hf(_,t,e)}),a.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Lh(t.outlet.component,a)):e.canDeactivateChecks.push(new Lh(null,a)):e.canDeactivateChecks.push(new Lh(null,a))}function nm(i){return typeof i=="function"}function b8(i){return typeof i=="boolean"}function v8(i){return i&&nm(i.canLoad)}function y8(i){return i&&nm(i.canActivate)}function x8(i){return i&&nm(i.canActivateChild)}function w8(i){return i&&nm(i.canDeactivate)}function C8(i){return i&&nm(i.canMatch)}function AT(i){return i instanceof $C||i?.name==="EmptyError"}var p0=Symbol("INITIAL_VALUE");function Vh(){return xo(i=>mh(i.map(t=>t.pipe(Os(1),xl(p0)))).pipe(wi(t=>{for(let e of t)if(e!==!0){if(e===p0)return p0;if(e===!1||E8(e))return e}return!0}),ln(t=>t!==p0),Os(1)))}function E8(i){return ad(i)||i instanceof Xf}function S8(i,t){return Rs(e=>{let{targetSnapshot:o,currentSnapshot:a,guards:{canActivateChecks:s,canDeactivateChecks:_}}=e;return _.length===0&&s.length===0?ti(ui(gt({},e),{guardsResult:!0})):T8(_,o,a,i).pipe(Rs(w=>w&&b8(w)?M8(o,s,i,t):ti(w)),wi(w=>ui(gt({},e),{guardsResult:w})))})}function T8(i,t,e,o){return yo(i).pipe(Rs(a=>D8(a.component,a.route,e,t,o)),Kc(a=>a!==!0,!0))}function M8(i,t,e,o){return yo(t).pipe(Yc(a=>Ag(P8(a.route.parent,o),I8(a.route,o),A8(i,a.path,e),k8(i,a.route,e))),Kc(a=>a!==!0,!0))}function I8(i,t){return i!==null&&t&&t(new Vy(i)),ti(!0)}function P8(i,t){return i!==null&&t&&t(new zy(i)),ti(!0)}function k8(i,t,e){let o=t.routeConfig?t.routeConfig.canActivate:null;if(!o||o.length===0)return ti(!0);let a=o.map(s=>hf(()=>{let _=tm(t)??e,w=Uh(s,_),C=y8(w)?w.canActivate(t,i):fs(_,()=>w(t,i));return su(C).pipe(Kc())}));return ti(a).pipe(Vh())}function A8(i,t,e){let o=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(_=>m8(_)).filter(_=>_!==null).map(_=>hf(()=>{let w=_.guards.map(C=>{let T=tm(_.node)??e,I=Uh(C,T),P=x8(I)?I.canActivateChild(o,i):fs(T,()=>I(o,i));return su(P).pipe(Kc())});return ti(w).pipe(Vh())}));return ti(s).pipe(Vh())}function D8(i,t,e,o,a){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return ti(!0);let _=s.map(w=>{let C=tm(t)??a,T=Uh(w,C),I=w8(T)?T.canDeactivate(i,t,e,o):fs(C,()=>T(i,t,e,o));return su(I).pipe(Kc())});return ti(_).pipe(Vh())}function R8(i,t,e,o){let a=t.canLoad;if(a===void 0||a.length===0)return ti(!0);let s=a.map(_=>{let w=Uh(_,i),C=v8(w)?w.canLoad(t,e):fs(i,()=>w(t,e));return su(C)});return ti(s).pipe(Vh(),DT(o))}function DT(i){return HC(Ur(t=>{if(typeof t!="boolean")throw T0(i,t)}),wi(t=>t===!0))}function O8(i,t,e,o){let a=t.canMatch;if(!a||a.length===0)return ti(!0);let s=a.map(_=>{let w=Uh(_,i),C=C8(w)?w.canMatch(t,e):fs(i,()=>w(t,e));return su(C)});return ti(s).pipe(Vh(),DT(o))}var Yf=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Kf=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Ah(i){return Yu(new Yf(i))}function L8(i){return Yu(new Er(4e3,!1))}function N8(i){return Yu(PT(!1,Bs.GuardRejected))}var Zy=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let o=[],a=e.root;for(;;){if(o=o.concat(a.segments),a.numberOfChildren===0)return ti(o);if(a.numberOfChildren>1||!a.children[Hi])return L8(`${t.redirectTo}`);a=a.children[Hi]}}applyRedirectCommands(t,e,o,a,s){if(typeof e!="string"){let w=e,{queryParams:C,fragment:T,routeConfig:I,url:P,outlet:R,params:H,data:Z,title:X}=a,fe=fs(s,()=>w({params:H,data:Z,queryParams:C,fragment:T,routeConfig:I,url:P,outlet:R,title:X}));if(fe instanceof nc)throw new Kf(fe);e=fe}let _=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,o);if(e[0]==="/")throw new Kf(_);return _}applyRedirectCreateUrlTree(t,e,o,a){let s=this.createSegmentGroup(t,e.root,o,a);return new nc(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let o={};return Object.entries(t).forEach(([a,s])=>{if(typeof s=="string"&&s[0]===":"){let w=s.substring(1);o[a]=e[w]}else o[a]=s}),o}createSegmentGroup(t,e,o,a){let s=this.createSegments(t,e.segments,o,a),_={};return Object.entries(e.children).forEach(([w,C])=>{_[w]=this.createSegmentGroup(t,C,o,a)}),new xr(s,_)}createSegments(t,e,o,a){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,a):this.findOrReturn(s,o))}findPosParam(t,e,o){let a=o[e.path.substring(1)];if(!a)throw new Er(4001,!1);return a}findOrReturn(t,e){let o=0;for(let a of e){if(a.path===t.path)return e.splice(o),a;o++}return t}},Xy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function F8(i,t,e,o,a){let s=RT(i,t,e);return s.matched?(o=o8(t,o),O8(o,t,e,a).pipe(wi(_=>_===!0?s:gt({},Xy)))):ti(s)}function RT(i,t,e){if(t.path==="**")return z8(e);if(t.path==="")return t.pathMatch==="full"&&(i.hasChildren()||e.length>0)?gt({},Xy):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let a=(t.matcher||RR)(e,i,t);if(!a)return gt({},Xy);let s={};Object.entries(a.posParams??{}).forEach(([w,C])=>{s[w]=C.path});let _=a.consumed.length>0?gt(gt({},s),a.consumed[a.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:a.consumed,remainingSegments:e.slice(a.consumed.length),parameters:_,positionalParamSegments:a.posParams??{}}}function z8(i){return{matched:!0,parameters:i.length>0?hT(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function sT(i,t,e,o){return e.length>0&&U8(i,e,o)?{segmentGroup:new xr(t,V8(o,new xr(e,i.children))),slicedSegments:[]}:e.length===0&&j8(i,e,o)?{segmentGroup:new xr(i.segments,B8(i,e,o,i.children)),slicedSegments:e}:{segmentGroup:new xr(i.segments,i.children),slicedSegments:e}}function B8(i,t,e,o){let a={};for(let s of e)if(k0(i,t,s)&&!o[Ka(s)]){let _=new xr([],{});a[Ka(s)]=_}return gt(gt({},o),a)}function V8(i,t){let e={};e[Hi]=t;for(let o of i)if(o.path===""&&Ka(o)!==Hi){let a=new xr([],{});e[Ka(o)]=a}return e}function U8(i,t,e){return e.some(o=>k0(i,t,o)&&Ka(o)!==Hi)}function j8(i,t,e){return e.some(o=>k0(i,t,o))}function k0(i,t,e){return(i.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function q8(i,t,e){return t.length===0&&!i.children[e]}var Yy=class{};function H8(i,t,e,o,a,s,_="emptyOnly"){return new Ky(i,t,e,o,a,_,s).recognize()}var $8=31,Ky=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,o,a,s,_,w){this.injector=t,this.configLoader=e,this.rootComponentType=o,this.config=a,this.urlTree=s,this.paramsInheritanceStrategy=_,this.urlSerializer=w,this.applyRedirects=new Zy(this.urlSerializer,this.urlTree)}noMatchError(t){return new Er(4002,`'${t.segmentGroup}'`)}recognize(){let t=sT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(wi(({children:e,rootSnapshot:o})=>{let a=new zs(o,e),s=new S0("",a),_=QR(o,[],this.urlTree.queryParams,this.urlTree.fragment);return _.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(_),{state:s,tree:_}}))}match(t){let e=new Oh([],Object.freeze({}),Object.freeze(gt({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Hi,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,Hi,e).pipe(wi(o=>({children:o,rootSnapshot:e})),yl(o=>{if(o instanceof Kf)return this.urlTree=o.urlTree,this.match(o.urlTree.root);throw o instanceof Yf?this.noMatchError(o):o}))}processSegmentGroup(t,e,o,a,s){return o.segments.length===0&&o.hasChildren()?this.processChildren(t,e,o,s):this.processSegment(t,e,o,o.segments,a,!0,s).pipe(wi(_=>_ instanceof zs?[_]:[]))}processChildren(t,e,o,a){let s=[];for(let _ of Object.keys(o.children))_==="primary"?s.unshift(_):s.push(_);return yo(s).pipe(Yc(_=>{let w=o.children[_],C=s8(e,_);return this.processSegmentGroup(t,C,w,_,a)}),KC((_,w)=>(_.push(...w),_)),Av(null),YC(),Rs(_=>{if(_===null)return Ah(o);let w=OT(_);return G8(w),ti(w)}))}processSegment(t,e,o,a,s,_,w){return yo(e).pipe(Yc(C=>this.processSegmentAgainstRoute(C._injector??t,e,C,o,a,s,_,w).pipe(yl(T=>{if(T instanceof Yf)return ti(null);throw T}))),Kc(C=>!!C),yl(C=>{if(AT(C))return q8(o,a,s)?ti(new Yy):Ah(o);throw C}))}processSegmentAgainstRoute(t,e,o,a,s,_,w,C){return Ka(o)!==_&&(_===Hi||!k0(a,s,o))?Ah(a):o.redirectTo===void 0?this.matchSegmentAgainstRoute(t,a,o,s,_,C):this.allowRedirects&&w?this.expandSegmentAgainstRouteUsingRedirect(t,a,e,o,s,_,C):Ah(a)}expandSegmentAgainstRouteUsingRedirect(t,e,o,a,s,_,w){let{matched:C,parameters:T,consumedSegments:I,positionalParamSegments:P,remainingSegments:R}=RT(e,a,s);if(!C)return Ah(e);typeof a.redirectTo=="string"&&a.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>$8&&(this.allowRedirects=!1));let H=new Oh(s,T,Object.freeze(gt({},this.urlTree.queryParams)),this.urlTree.fragment,aT(a),Ka(a),a.component??a._loadedComponent??null,a,lT(a)),Z=E0(H,w,this.paramsInheritanceStrategy);H.params=Object.freeze(Z.params),H.data=Object.freeze(Z.data);let X=this.applyRedirects.applyRedirectCommands(I,a.redirectTo,P,H,t);return this.applyRedirects.lineralizeSegments(a,X).pipe(Rs(fe=>this.processSegment(t,o,e,fe.concat(R),_,!1,w)))}matchSegmentAgainstRoute(t,e,o,a,s,_){let w=F8(e,o,a,t,this.urlSerializer);return o.path==="**"&&(e.children={}),w.pipe(xo(C=>C.matched?(t=o._injector??t,this.getChildConfig(t,o,a).pipe(xo(({routes:T})=>{let I=o._loadedInjector??t,{parameters:P,consumedSegments:R,remainingSegments:H}=C,Z=new Oh(R,P,Object.freeze(gt({},this.urlTree.queryParams)),this.urlTree.fragment,aT(o),Ka(o),o.component??o._loadedComponent??null,o,lT(o)),X=E0(Z,_,this.paramsInheritanceStrategy);Z.params=Object.freeze(X.params),Z.data=Object.freeze(X.data);let{segmentGroup:fe,slicedSegments:ae}=sT(e,R,H,T);if(ae.length===0&&fe.hasChildren())return this.processChildren(I,T,fe,Z).pipe(wi(re=>new zs(Z,re)));if(T.length===0&&ae.length===0)return ti(new zs(Z,[]));let ne=Ka(o)===s;return this.processSegment(I,T,fe,ae,ne?Hi:s,!0,Z).pipe(wi(re=>new zs(Z,re instanceof zs?[re]:[])))}))):Ah(e)))}getChildConfig(t,e,o){return e.children?ti({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?ti({routes:e._loadedRoutes,injector:e._loadedInjector}):R8(t,e,o,this.urlSerializer).pipe(Rs(a=>a?this.configLoader.loadChildren(t,e).pipe(Ur(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):N8(e))):ti({routes:[],injector:t})}};function G8(i){i.sort((t,e)=>t.value.outlet===Hi?-1:e.value.outlet===Hi?1:t.value.outlet.localeCompare(e.value.outlet))}function W8(i){let t=i.value.routeConfig;return t&&t.path===""}function OT(i){let t=[],e=new Set;for(let o of i){if(!W8(o)){t.push(o);continue}let a=t.find(s=>o.value.routeConfig===s.value.routeConfig);a!==void 0?(a.children.push(...o.children),e.add(a)):t.push(o)}for(let o of e){let a=OT(o.children);t.push(new zs(o.value,a))}return t.filter(o=>!e.has(o))}function aT(i){return i.data||{}}function lT(i){return i.resolve||{}}function Z8(i,t,e,o,a,s){return Rs(_=>H8(i,t,e,o,_.extractedUrl,a,s).pipe(wi(({state:w,tree:C})=>ui(gt({},_),{targetSnapshot:w,urlAfterRedirects:C}))))}function X8(i,t){return Rs(e=>{let{targetSnapshot:o,guards:{canActivateChecks:a}}=e;if(!a.length)return ti(e);let s=new Set(a.map(C=>C.route)),_=new Set;for(let C of s)if(!_.has(C))for(let T of LT(C))_.add(T);let w=0;return yo(_).pipe(Yc(C=>s.has(C)?Y8(C,o,i,t):(C.data=E0(C,C.parent,i).resolve,ti(void 0))),Ur(()=>w++),Dv(1),Rs(C=>w===_.size?ti(e):Zc))})}function LT(i){let t=i.children.map(e=>LT(e)).flat();return[i,...t]}function Y8(i,t,e,o){let a=i.routeConfig,s=i._resolve;return a?.title!==void 0&&!MT(a)&&(s[Jf]=a.title),K8(s,i,t,o).pipe(wi(_=>(i._resolvedData=_,i.data=E0(i,i.parent,e).resolve,null)))}function K8(i,t,e,o){let a=Iy(i);if(a.length===0)return ti({});let s={};return yo(a).pipe(Rs(_=>Q8(i[_],t,e,o).pipe(Kc(),Ur(w=>{if(w instanceof Xf)throw T0(new Fh,w);s[_]=w}))),Dv(1),XC(s),yl(_=>AT(_)?Zc:Yu(_)))}function Q8(i,t,e,o){let a=tm(t)??o,s=Uh(i,a),_=s.resolve?s.resolve(t,e):fs(a,()=>s(t,e));return su(_)}function Ty(i){return xo(t=>{let e=i(t);return e?yo(e).pipe(wi(()=>t)):ti(t)})}var NT=(()=>{class i{buildTitle(e){let o,a=e.root;for(;a!==void 0;)o=this.getResolvedTitleForRoute(a)??o,a=a.children.find(s=>s.outlet===Hi);return o}getResolvedTitleForRoute(e){return e.data[Jf]}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:()=>Le(J8),providedIn:"root"})}return i})(),J8=(()=>{class i extends NT{title;constructor(e){super(),this.title=e}updateTitle(e){let o=this.buildTitle(e);o!==void 0&&this.title.setTitle(o)}static \u0275fac=function(o){return new(o||i)(hi(gS))};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),om=new Bt("",{providedIn:"root",factory:()=>({})}),e6=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(o,a){o&1&&Ye(0,"router-outlet")},dependencies:[rm],encapsulation:2})}return i})();function e1(i){let t=i.children&&i.children.map(e1),e=t?ui(gt({},i),{children:t}):gt({},i);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Hi&&(e.component=e6),e}var Qf=new Bt(""),t1=(()=>{class i{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Le(xh);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ti(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let o=su(e.loadComponent()).pipe(wi(FT),Ur(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),ec(()=>{this.componentLoaders.delete(e)})),a=new kg(o,()=>new Mi).pipe(Iv());return this.componentLoaders.set(e,a),a}loadChildren(e,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return ti({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);let s=i1(o,this.compiler,e,this.onLoadEndListener).pipe(ec(()=>{this.childrenLoaders.delete(o)})),_=new kg(s,()=>new Mi).pipe(Iv());return this.childrenLoaders.set(o,_),_}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function i1(i,t,e,o){return su(i.loadChildren()).pipe(wi(FT),Rs(a=>a instanceof vE||Array.isArray(a)?ti(a):yo(t.compileModuleAsync(a))),wi(a=>{o&&o(i);let s,_,w=!1;return Array.isArray(a)?(_=a,w=!0):(s=a.create(e).injector,_=s.get(Qf,[],{optional:!0,self:!0}).flat()),{routes:_.map(e1),injector:s}}))}function t6(i){return i&&typeof i=="object"&&"default"in i}function FT(i){return t6(i)?i.default:i}var r1=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:()=>Le(i6),providedIn:"root"})}return i})(),i6=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,o){return e}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),zT=new Bt(""),BT=new Bt("");function r6(i,t,e){let o=i.get(BT),a=i.get(Oi);return i.get(tr).runOutsideAngular(()=>{if(!a.startViewTransition||o.skipNextTransition)return o.skipNextTransition=!1,new Promise(T=>setTimeout(T));let s,_=new Promise(T=>{s=T}),w=a.startViewTransition(()=>(s(),n6(i))),{onViewTransitionCreated:C}=o;return C&&fs(i,()=>C({transition:w,from:t,to:e})),_})}function n6(i){return new Promise(t=>{gh({read:()=>setTimeout(t)},{injector:i})})}var VT=new Bt(""),n1=(()=>{class i{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Mi;transitionAbortSubject=new Mi;configLoader=Le(t1);environmentInjector=Le(Wa);urlSerializer=Le(em);rootContexts=Le(im);location=Le(rd);inputBindingEnabled=Le(P0,{optional:!0})!==null;titleStrategy=Le(NT);options=Le(om,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Le(r1);createViewTransition=Le(zT,{optional:!0});navigationErrorHandler=Le(VT,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ti(void 0);rootComponentType=null;constructor(){let e=a=>this.events.next(new Ny(a)),o=a=>this.events.next(new Fy(a));this.configLoader.onLoadEndListener=o,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let o=++this.navigationId;this.transitions?.next(ui(gt(gt({},this.transitions.value),e),{id:o}))}setupNavigations(e,o,a){return this.transitions=new ps({id:0,currentUrlTree:o,currentRawUrl:o,extractedUrl:this.urlHandlingStrategy.extract(o),urlAfterRedirects:this.urlHandlingStrategy.extract(o),rawUrl:o,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:qf,restoredState:null,currentSnapshot:a.snapshot,targetSnapshot:null,currentRouterState:a,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ln(s=>s.id!==0),wi(s=>ui(gt({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),xo(s=>{let _=!1,w=!1;return ti(s).pipe(xo(C=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Bs.SupersededByNewNavigation),Zc;this.currentTransition=s,this.currentNavigation={id:C.id,initialUrl:C.rawUrl,extractedUrl:C.extractedUrl,targetBrowserUrl:typeof C.extras.browserUrl=="string"?this.urlSerializer.parse(C.extras.browserUrl):C.extras.browserUrl,trigger:C.source,extras:C.extras,previousNavigation:this.lastSuccessfulNavigation?ui(gt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let T=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),I=C.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!T&&I!=="reload"){let P="";return this.events.next(new nu(C.id,this.urlSerializer.serialize(C.rawUrl),P,v0.IgnoredSameUrlNavigation)),C.resolve(!1),Zc}if(this.urlHandlingStrategy.shouldProcessUrl(C.rawUrl))return ti(C).pipe(xo(P=>{let R=this.transitions?.getValue();return this.events.next(new zh(P.id,this.urlSerializer.serialize(P.extractedUrl),P.source,P.restoredState)),R!==this.transitions?.getValue()?Zc:Promise.resolve(P)}),Z8(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Ur(P=>{s.targetSnapshot=P.targetSnapshot,s.urlAfterRedirects=P.urlAfterRedirects,this.currentNavigation=ui(gt({},this.currentNavigation),{finalUrl:P.urlAfterRedirects});let R=new y0(P.id,this.urlSerializer.serialize(P.extractedUrl),this.urlSerializer.serialize(P.urlAfterRedirects),P.targetSnapshot);this.events.next(R)}));if(T&&this.urlHandlingStrategy.shouldProcessUrl(C.currentRawUrl)){let{id:P,extractedUrl:R,source:H,restoredState:Z,extras:X}=C,fe=new zh(P,this.urlSerializer.serialize(R),H,Z);this.events.next(fe);let ae=ST(this.rootComponentType).snapshot;return this.currentTransition=s=ui(gt({},C),{targetSnapshot:ae,urlAfterRedirects:R,extras:ui(gt({},X),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=R,ti(s)}else{let P="";return this.events.next(new nu(C.id,this.urlSerializer.serialize(C.extractedUrl),P,v0.IgnoredByUrlHandlingStrategy)),C.resolve(!1),Zc}}),Ur(C=>{let T=new Dy(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(T)}),wi(C=>(this.currentTransition=s=ui(gt({},C),{guards:f8(C.targetSnapshot,C.currentSnapshot,this.rootContexts)}),s)),S8(this.environmentInjector,C=>this.events.next(C)),Ur(C=>{if(s.guardsResult=C.guardsResult,C.guardsResult&&typeof C.guardsResult!="boolean")throw T0(this.urlSerializer,C.guardsResult);let T=new Ry(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot,!!C.guardsResult);this.events.next(T)}),ln(C=>C.guardsResult?!0:(this.cancelNavigationTransition(C,"",Bs.GuardRejected),!1)),Ty(C=>{if(C.guards.canActivateChecks.length)return ti(C).pipe(Ur(T=>{let I=new Oy(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(I)}),xo(T=>{let I=!1;return ti(T).pipe(X8(this.paramsInheritanceStrategy,this.environmentInjector),Ur({next:()=>I=!0,complete:()=>{I||this.cancelNavigationTransition(T,"",Bs.NoDataFromResolver)}}))}),Ur(T=>{let I=new Ly(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(I)}))}),Ty(C=>{let T=I=>{let P=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&P.push(this.configLoader.loadComponent(I.routeConfig).pipe(Ur(R=>{I.component=R}),wi(()=>{})));for(let R of I.children)P.push(...T(R));return P};return mh(T(C.targetSnapshot.root)).pipe(Av(null),Os(1))}),Ty(()=>this.afterPreactivation()),xo(()=>{let{currentSnapshot:C,targetSnapshot:T}=s,I=this.createViewTransition?.(this.environmentInjector,C.root,T.root);return I?yo(I).pipe(wi(()=>s)):ti(s)}),wi(C=>{let T=c8(e.routeReuseStrategy,C.targetSnapshot,C.currentRouterState);return this.currentTransition=s=ui(gt({},C),{targetRouterState:T}),this.currentNavigation.targetRouterState=T,s}),Ur(()=>{this.events.next(new Wf)}),p8(this.rootContexts,e.routeReuseStrategy,C=>this.events.next(C),this.inputBindingEnabled),Os(1),Ur({next:C=>{_=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Il(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects))),this.titleStrategy?.updateTitle(C.targetRouterState.snapshot),C.resolve(!0)},complete:()=>{_=!0}}),gn(this.transitionAbortSubject.pipe(Ur(C=>{throw C}))),ec(()=>{!_&&!w&&this.cancelNavigationTransition(s,"",Bs.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),yl(C=>{if(w=!0,kT(C))this.events.next(new rc(s.id,this.urlSerializer.serialize(s.extractedUrl),C.message,C.cancellationCode)),h8(C)?this.events.next(new Bh(C.url,C.navigationBehaviorOptions)):s.resolve(!1);else{let T=new Gf(s.id,this.urlSerializer.serialize(s.extractedUrl),C,s.targetSnapshot??void 0);try{let I=fs(this.environmentInjector,()=>this.navigationErrorHandler?.(T));if(I instanceof Xf){let{message:P,cancellationCode:R}=T0(this.urlSerializer,I);this.events.next(new rc(s.id,this.urlSerializer.serialize(s.extractedUrl),P,R)),this.events.next(new Bh(I.redirectTo,I.navigationBehaviorOptions))}else throw this.events.next(T),C}catch(I){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(I)}}return Zc}))}))}cancelNavigationTransition(e,o,a){let s=new rc(e.id,this.urlSerializer.serialize(e.extractedUrl),o,a);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),o=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==o?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function o6(i){return i!==qf}var s6=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:()=>Le(a6),providedIn:"root"})}return i})(),Qy=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},a6=(()=>{class i extends Qy{static \u0275fac=(()=>{let e;return function(a){return(e||(e=Za(i)))(a||i)}})();static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),UT=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:()=>Le(l6),providedIn:"root"})}return i})(),l6=(()=>{class i extends UT{location=Le(rd);urlSerializer=Le(em);options=Le(om,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=Le(r1);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new nc;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=ST(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(o=>{o.type==="popstate"&&e(o.url,o.state)})}handleRouterEvent(e,o){if(e instanceof zh)this.stateMemento=this.createStateMemento();else if(e instanceof nu)this.rawUrlTree=o.initialUrl;else if(e instanceof y0){if(this.urlUpdateStrategy==="eager"&&!o.extras.skipLocationChange){let a=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl);this.setBrowserUrl(o.targetBrowserUrl??a,o)}}else e instanceof Wf?(this.currentUrlTree=o.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl),this.routerState=o.targetRouterState,this.urlUpdateStrategy==="deferred"&&!o.extras.skipLocationChange&&this.setBrowserUrl(o.targetBrowserUrl??this.rawUrlTree,o)):e instanceof rc&&(e.code===Bs.GuardRejected||e.code===Bs.NoDataFromResolver)?this.restoreHistory(o):e instanceof Gf?this.restoreHistory(o,!0):e instanceof Il&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,o){let a=e instanceof nc?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(a)||o.extras.replaceUrl){let s=this.browserPageId,_=gt(gt({},o.extras.state),this.generateNgRouterState(o.id,s));this.location.replaceState(a,"",_)}else{let s=gt(gt({},o.extras.state),this.generateNgRouterState(o.id,this.browserPageId+1));this.location.go(a,"",s)}}restoreHistory(e,o=!1){if(this.canceledNavigationResolution==="computed"){let a=this.browserPageId,s=this.currentPageId-a;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(o&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,o){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:o}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(a){return(e||(e=Za(i)))(a||i)}})();static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Uf=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(Uf||{});function jT(i,t){i.events.pipe(ln(e=>e instanceof Il||e instanceof rc||e instanceof Gf||e instanceof nu),wi(e=>e instanceof Il||e instanceof nu?Uf.COMPLETE:(e instanceof rc?e.code===Bs.Redirect||e.code===Bs.SupersededByNewNavigation:!1)?Uf.REDIRECTING:Uf.FAILED),ln(e=>e!==Uf.REDIRECTING),Os(1)).subscribe(()=>{t()})}var c6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},u6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Co=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Le(eu);stateManager=Le(UT);options=Le(om,{optional:!0})||{};pendingTasks=Le(mf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Le(n1);urlSerializer=Le(em);location=Le(rd);urlHandlingStrategy=Le(r1);_events=new Mi;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Le(s6);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Le(Qf,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Le(P0,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new No;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(o=>{try{let a=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(a!==null&&s!==null){if(this.stateManager.handleRouterEvent(o,s),o instanceof rc&&o.code!==Bs.Redirect&&o.code!==Bs.SupersededByNewNavigation)this.navigated=!0;else if(o instanceof Il)this.navigated=!0;else if(o instanceof Bh){let _=o.navigationBehaviorOptions,w=this.urlHandlingStrategy.merge(o.url,a.currentRawUrl),C=gt({browserUrl:a.extras.browserUrl,info:a.extras.info,skipLocationChange:a.extras.skipLocationChange,replaceUrl:a.extras.replaceUrl||this.urlUpdateStrategy==="eager"||o6(a.source)},_);this.scheduleNavigation(w,qf,null,C,{resolve:a.resolve,reject:a.reject,promise:a.promise})}}h6(o)&&this._events.next(o)}catch(a){this.navigationTransitions.transitionAbortSubject.next(a)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),qf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",o)},0)})}navigateToSyncWithBrowser(e,o,a){let s={replaceUrl:!0},_=a?.navigationId?a:null;if(a){let C=gt({},a);delete C.navigationId,delete C.\u0275routerPageId,Object.keys(C).length!==0&&(s.state=C)}let w=this.parseUrl(e);this.scheduleNavigation(w,o,_,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(e1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,o={}){let{relativeTo:a,queryParams:s,fragment:_,queryParamsHandling:w,preserveFragment:C}=o,T=C?this.currentUrlTree.fragment:_,I=null;switch(w??this.options.defaultQueryParamsHandling){case"merge":I=gt(gt({},this.currentUrlTree.queryParams),s);break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}I!==null&&(I=this.removeEmptyProps(I));let P;try{let R=a?a.snapshot:this.routerState.snapshot.root;P=xT(R)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),P=this.currentUrlTree.root}return wT(P,e,I,T??null)}navigateByUrl(e,o={skipLocationChange:!1}){let a=ad(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(s,qf,null,o)}navigate(e,o={skipLocationChange:!1}){return d6(e),this.navigateByUrl(this.createUrlTree(e,o),o)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,o){let a;if(o===!0?a=gt({},c6):o===!1?a=gt({},u6):a=o,ad(e))return tT(this.currentUrlTree,e,a);let s=this.parseUrl(e);return tT(this.currentUrlTree,s,a)}removeEmptyProps(e){return Object.entries(e).reduce((o,[a,s])=>(s!=null&&(o[a]=s),o),{})}scheduleNavigation(e,o,a,s,_){if(this.disposed)return Promise.resolve(!1);let w,C,T;_?(w=_.resolve,C=_.reject,T=_.promise):T=new Promise((P,R)=>{w=P,C=R});let I=this.pendingTasks.add();return jT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(I))}),this.navigationTransitions.handleNavigationRequest({source:o,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:w,reject:C,promise:T,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),T.catch(P=>Promise.reject(P))}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function d6(i){for(let t=0;t<i.length;t++)if(i[t]==null)throw new Er(4008,!1)}function h6(i){return!(i instanceof Wf)&&!(i instanceof Bh)}var qT=(()=>{class i{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Mi;constructor(e,o,a,s,_,w){this.router=e,this.route=o,this.tabIndexAttribute=a,this.renderer=s,this.el=_,this.locationStrategy=w;let C=_.nativeElement.tagName?.toLowerCase();this.isAnchorElement=C==="a"||C==="area",this.isAnchorElement?this.subscription=e.events.subscribe(T=>{T instanceof Il&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ad(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,o,a,s,_){let w=this.urlTree;if(w===null||this.isAnchorElement&&(e!==0||o||a||s||_||typeof this.target=="string"&&this.target!="_self"))return!0;let C={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(w,C),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let o=this.href===null?null:gE(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",o)}applyAttributeValue(e,o){let a=this.renderer,s=this.el.nativeElement;o!==null?a.setAttribute(s,e,o):a.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:ad(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(o){return new(o||i)(si(Co),si(ou),rE("tabindex"),si(tc),si(hr),si(Cf))};static \u0275dir=Ni({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(o,a){o&1&&kt("click",function(_){return a.onClick(_.button,_.ctrlKey,_.shiftKey,_.altKey,_.metaKey)}),o&2&&yr("target",a.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Qi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Qi],replaceUrl:[2,"replaceUrl","replaceUrl",Qi],routerLink:"routerLink"},features:[Wn,Ko]})}return i})();var I0=class{};var p6=(()=>{class i{router;injector;preloadingStrategy;loader;subscription;constructor(e,o,a,s,_){this.router=e,this.injector=a,this.preloadingStrategy=s,this.loader=_}setUpPreloading(){this.subscription=this.router.events.pipe(ln(e=>e instanceof Il),Yc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,o){let a=[];for(let s of o){s.providers&&!s._injector&&(s._injector=Bv(s.providers,e,`Route: ${s.path}`));let _=s._injector??e,w=s._loadedInjector??_;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&a.push(this.preloadConfig(_,s)),(s.children||s._loadedRoutes)&&a.push(this.processRoutes(w,s.children??s._loadedRoutes))}return yo(a).pipe(Pv())}preloadConfig(e,o){return this.preloadingStrategy.preload(o,()=>{let a;o.loadChildren&&o.canLoad===void 0?a=this.loader.loadChildren(e,o):a=ti(null);let s=a.pipe(Rs(_=>_===null?ti(void 0):(o._loadedRoutes=_.routes,o._loadedInjector=_.injector,this.processRoutes(_.injector??e,_.routes))));if(o.loadComponent&&!o._loadedComponent){let _=this.loader.loadComponent(o);return yo([s,_]).pipe(Pv())}else return s})}static \u0275fac=function(o){return new(o||i)(hi(Co),hi(xh),hi(Wa),hi(I0),hi(t1))};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),HT=new Bt(""),f6=(()=>{class i{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,o,a,s,_={}){this.urlSerializer=e,this.transitions=o,this.viewportScroller=a,this.zone=s,this.options=_,_.scrollPositionRestoration||="disabled",_.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof zh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Il?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof nu&&e.code===v0.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof x0&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,o){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new x0(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,o))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(o){Bg()};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})();function $T(i,...t){return Ga([{provide:Qf,multi:!0,useValue:i},[],{provide:ou,useFactory:GT,deps:[Co]},{provide:jg,multi:!0,useFactory:WT},t.map(e=>e.\u0275providers)])}function GT(i){return i.routerState.root}function sm(i,t){return{\u0275kind:i,\u0275providers:t}}function WT(){let i=Le(Dn);return t=>{let e=i.get(ga);if(t!==e.components[0])return;let o=i.get(Co),a=i.get(ZT);i.get(o1)===1&&o.initialNavigation(),i.get(XT,null,Lv.Optional)?.setUpPreloading(),i.get(HT,null,Lv.Optional)?.init(),o.resetRootComponentType(e.componentTypes[0]),a.closed||(a.next(),a.complete(),a.unsubscribe())}}var ZT=new Bt("",{factory:()=>new Mi}),o1=new Bt("",{providedIn:"root",factory:()=>1});function m6(){return sm(2,[{provide:o1,useValue:0},{provide:jv,multi:!0,deps:[Dn],useFactory:t=>{let e=t.get(LE,Promise.resolve());return()=>e.then(()=>new Promise(o=>{let a=t.get(Co),s=t.get(ZT);jT(a,()=>{o(!0)}),t.get(n1).afterPreactivation=()=>(o(!0),s.closed?ti(void 0):s),a.initialNavigation()}))}}])}function g6(){return sm(3,[{provide:jv,multi:!0,useFactory:()=>{let t=Le(Co);return()=>{t.setUpLocationChangeListener()}}},{provide:o1,useValue:2}])}var XT=new Bt("");function _6(i){return sm(0,[{provide:XT,useExisting:p6},{provide:I0,useExisting:i}])}function b6(){return sm(8,[oT,{provide:P0,useExisting:oT}])}function v6(i){let t=[{provide:zT,useValue:r6},{provide:BT,useValue:gt({skipNextTransition:!!i?.skipInitialTransition},i)}];return sm(9,t)}var cT=new Bt("ROUTER_FORROOT_GUARD"),y6=[rd,{provide:em,useClass:Fh},Co,im,{provide:ou,useFactory:GT,deps:[Co]},t1,[]],au=(()=>{class i{constructor(e){}static forRoot(e,o){return{ngModule:i,providers:[y6,[],{provide:Qf,multi:!0,useValue:e},{provide:cT,useFactory:E6,deps:[[Co,new Ku,new Nv]]},o?.errorHandler?{provide:VT,useValue:o.errorHandler}:[],{provide:om,useValue:o||{}},o?.useHash?w6():C6(),x6(),o?.preloadingStrategy?_6(o.preloadingStrategy).\u0275providers:[],o?.initialNavigation?S6(o):[],o?.bindToComponentInputs?b6().\u0275providers:[],o?.enableViewTransitions?v6().\u0275providers:[],T6()]}}static forChild(e){return{ngModule:i,providers:[{provide:Qf,multi:!0,useValue:e}]}}static \u0275fac=function(o){return new(o||i)(hi(cT,8))};static \u0275mod=Pi({type:i});static \u0275inj=Ii({})}return i})();function x6(){return{provide:HT,useFactory:()=>{let i=Le(Qg),t=Le(tr),e=Le(om),o=Le(n1),a=Le(em);return e.scrollOffset&&i.setOffset(e.scrollOffset),new f6(a,o,i,t,e)}}}function w6(){return{provide:Cf,useClass:zE}}function C6(){return{provide:Cf,useClass:FE}}function E6(i){return"guarded"}function S6(i){return[i.initialNavigation==="disabled"?g6().\u0275providers:[],i.initialNavigation==="enabledBlocking"?m6().\u0275providers:[]]}var uT=new Bt("");function T6(){return[{provide:uT,useFactory:WT},{provide:jg,multi:!0,useExisting:uT}]}function M6(i){throw new Error(`[unenv] ${i} is not implemented yet!`)}function I6(i){return Object.assign(()=>{throw M6(i)},{__unenv__:!0})}var P6=I6("fs.readFile");function k6(i){let t=function(...e){let o=e.pop();i().catch(a=>o(a)).then(a=>o(void 0,a))};return t.__promisify__=i,t.native=t,t}var A6=k6(P6),D6=/^[A-Za-z]:\//;function uu(i=""){return i&&i.replace(/\\/g,"/").replace(D6,t=>t.toUpperCase())}var R6=/^[/\\]{2}/,O6=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,KM=/^[A-Za-z]:$/,YT=/^\/([A-Za-z]:)?$/,QM="/",JM=":",tx=function(i){if(i.length===0)return".";i=uu(i);let t=i.match(R6),e=ud(i),o=i[i.length-1]==="/";return i=W0(i,!e),i.length===0?e?"/":o?"./":".":(o&&(i+="/"),KM.test(i)&&(i+="/"),t?e?`//${i}`:`//./${i}`:e&&!ud(i)?`/${i}`:i)},eI=function(...i){if(i.length===0)return".";let t;for(let e of i)e&&e.length>0&&(t===void 0?t=e:t+=`/${e}`);return t===void 0?".":tx(t.replace(/\/\/+/g,"/"))};function L6(){return typeof process<"u"&&typeof process.cwd=="function"?process.cwd().replace(/\\/g,"/"):"/"}var dm=function(...i){i=i.map(o=>uu(o));let t="",e=!1;for(let o=i.length-1;o>=-1&&!e;o--){let a=o>=0?i[o]:L6();!a||a.length===0||(t=`${a}/${t}`,e=ud(a))}return t=W0(t,!e),e&&!ud(t)?`/${t}`:t.length>0?t:"."};function W0(i,t){let e="",o=0,a=-1,s=0,_=null;for(let w=0;w<=i.length;++w){if(w<i.length)_=i[w];else{if(_==="/")break;_="/"}if(_==="/"){if(!(a===w-1||s===1))if(s===2){if(e.length<2||o!==2||e[e.length-1]!=="."||e[e.length-2]!=="."){if(e.length>2){let C=e.lastIndexOf("/");C===-1?(e="",o=0):(e=e.slice(0,C),o=e.length-1-e.lastIndexOf("/")),a=w,s=0;continue}else if(e.length>0){e="",o=0,a=w,s=0;continue}}t&&(e+=e.length>0?"/..":"..",o=2)}else e.length>0?e+=`/${i.slice(a+1,w)}`:e=i.slice(a+1,w),o=w-a-1;a=w,s=0}else _==="."&&s!==-1?++s:s=-1}return e}var ud=function(i){return O6.test(i)},tI=function(i){return uu(i)},N6=/.(\.[^./]+)$/,ix=function(i){let t=N6.exec(uu(i));return t&&t[1]||""},iI=function(i,t){let e=dm(i).replace(YT,"$1").split("/"),o=dm(t).replace(YT,"$1").split("/");if(o[0][1]===":"&&e[0][1]===":"&&e[0]!==o[0])return o.join("/");let a=[...e];for(let s of a){if(o[0]!==s)break;e.shift(),o.shift()}return[...e.map(()=>".."),...o].join("/")},rx=function(i){let t=uu(i).replace(/\/$/,"").split("/").slice(0,-1);return t.length===1&&KM.test(t[0])&&(t[0]+="/"),t.join("/")||(ud(i)?"/":".")},rI=function(i){let t=[i.root,i.dir,i.base??i.name+i.ext].filter(Boolean);return uu(i.root?dm(...t):t.join("/"))},nx=function(i,t){let e=uu(i).split("/").pop();return t&&e.endsWith(t)?e.slice(0,-t.length):e},nI=function(i){let t=uu(i).split("/").shift()||"/",e=nx(i),o=ix(e);return{root:t,dir:rx(i),base:e,ext:o,name:e.slice(0,e.length-o.length)}},F6={__proto__:null,basename:nx,delimiter:JM,dirname:rx,extname:ix,format:rI,isAbsolute:ud,join:eI,normalize:tx,normalizeString:W0,parse:nI,relative:iI,resolve:dm,sep:QM,toNamespacedPath:tI},z6=Object.freeze({__proto__:null,basename:nx,default:F6,delimiter:JM,dirname:rx,extname:ix,format:rI,isAbsolute:ud,join:eI,normalize:tx,normalizeString:W0,parse:nI,relative:iI,resolve:dm,sep:QM,toNamespacedPath:tI}),Hh=ui(gt({},z6),{platform:"posix",posix:void 0,win32:void 0});Hh.posix=Hh;Hh.win32=Hh;function Z0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function B6(i){if(i.__esModule)return i;var t=i.default;if(typeof t=="function"){var e=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var a=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:function(){return i[o]}})}),e}var A0={exports:{}},KT;function oI(){if(KT)return A0.exports;KT=1;var i=String,t=function(){return{isColorSupported:!1,reset:i,bold:i,dim:i,italic:i,underline:i,inverse:i,hidden:i,strikethrough:i,black:i,red:i,green:i,yellow:i,blue:i,magenta:i,cyan:i,white:i,gray:i,bgBlack:i,bgRed:i,bgGreen:i,bgYellow:i,bgBlue:i,bgMagenta:i,bgCyan:i,bgWhite:i,blackBright:i,redBright:i,greenBright:i,yellowBright:i,blueBright:i,magentaBright:i,cyanBright:i,whiteBright:i,bgBlackBright:i,bgRedBright:i,bgGreenBright:i,bgYellowBright:i,bgBlueBright:i,bgMagentaBright:i,bgCyanBright:i,bgWhiteBright:i}};return A0.exports=t(),A0.exports.createColors=t,A0.exports}var V6={},U6=Object.freeze({__proto__:null,default:V6}),Ja=B6(U6),s1,QT;function ox(){if(QT)return s1;QT=1;let i=oI(),t=Ja;class e extends Error{constructor(a,s,_,w,C,T){super(a),this.name="CssSyntaxError",this.reason=a,C&&(this.file=C),w&&(this.source=w),T&&(this.plugin=T),typeof s<"u"&&typeof _<"u"&&(typeof s=="number"?(this.line=s,this.column=_):(this.line=s.line,this.column=s.column,this.endLine=_.line,this.endColumn=_.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(a){if(!this.source)return"";let s=this.source;a==null&&(a=i.isColorSupported);let _=H=>H,w=H=>H,C=H=>H;if(a){let{bold:H,gray:Z,red:X}=i.createColors(!0);w=fe=>H(X(fe)),_=fe=>Z(fe),t&&(C=fe=>t(fe))}let T=s.split(/\r?\n/),I=Math.max(this.line-3,0),P=Math.min(this.line+2,T.length),R=String(P).length;return T.slice(I,P).map((H,Z)=>{let X=I+1+Z,fe=" "+(" "+X).slice(-R)+" | ";if(X===this.line){if(H.length>160){let ne=20,re=Math.max(0,this.column-ne),de=Math.max(this.column+ne,this.endColumn+ne),oe=H.slice(re,de),Ve=_(fe.replace(/\d/g," "))+H.slice(0,Math.min(this.column-1,ne-1)).replace(/[^\t]/g," ");return w(">")+_(fe)+C(oe)+`
 `+Ve+w("^")}let ae=_(fe.replace(/\d/g," "))+H.slice(0,this.column-1).replace(/[^\t]/g," ");return w(">")+_(fe)+C(H)+`
 `+ae+w("^")}return" "+_(fe)+C(H)}).join(`
`)}toString(){let a=this.showSourceCode();return a&&(a=`

`+a+`
`),this.name+": "+this.message+a}}return s1=e,e.default=e,s1}var a1,JT;function sI(){if(JT)return a1;JT=1;let i={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function t(o){return o[0].toUpperCase()+o.slice(1)}class e{constructor(a){this.builder=a}atrule(a,s){let _="@"+a.name,w=a.params?this.rawValue(a,"params"):"";if(typeof a.raws.afterName<"u"?_+=a.raws.afterName:w&&(_+=" "),a.nodes)this.block(a,_+w);else{let C=(a.raws.between||"")+(s?";":"");this.builder(_+w+C,a)}}beforeAfter(a,s){let _;a.type==="decl"?_=this.raw(a,null,"beforeDecl"):a.type==="comment"?_=this.raw(a,null,"beforeComment"):s==="before"?_=this.raw(a,null,"beforeRule"):_=this.raw(a,null,"beforeClose");let w=a.parent,C=0;for(;w&&w.type!=="root";)C+=1,w=w.parent;if(_.includes(`
`)){let T=this.raw(a,null,"indent");if(T.length)for(let I=0;I<C;I++)_+=T}return _}block(a,s){let _=this.raw(a,"between","beforeOpen");this.builder(s+_+"{",a,"start");let w;a.nodes&&a.nodes.length?(this.body(a),w=this.raw(a,"after")):w=this.raw(a,"after","emptyBody"),w&&this.builder(w),this.builder("}",a,"end")}body(a){let s=a.nodes.length-1;for(;s>0&&a.nodes[s].type==="comment";)s-=1;let _=this.raw(a,"semicolon");for(let w=0;w<a.nodes.length;w++){let C=a.nodes[w],T=this.raw(C,"before");T&&this.builder(T),this.stringify(C,s!==w||_)}}comment(a){let s=this.raw(a,"left","commentLeft"),_=this.raw(a,"right","commentRight");this.builder("/*"+s+a.text+_+"*/",a)}decl(a,s){let _=this.raw(a,"between","colon"),w=a.prop+_+this.rawValue(a,"value");a.important&&(w+=a.raws.important||" !important"),s&&(w+=";"),this.builder(w,a)}document(a){this.body(a)}raw(a,s,_){let w;if(_||(_=s),s&&(w=a.raws[s],typeof w<"u"))return w;let C=a.parent;if(_==="before"&&(!C||C.type==="root"&&C.first===a||C&&C.type==="document"))return"";if(!C)return i[_];let T=a.root();if(T.rawCache||(T.rawCache={}),typeof T.rawCache[_]<"u")return T.rawCache[_];if(_==="before"||_==="after")return this.beforeAfter(a,_);{let I="raw"+t(_);this[I]?w=this[I](T,a):T.walk(P=>{if(w=P.raws[s],typeof w<"u")return!1})}return typeof w>"u"&&(w=i[_]),T.rawCache[_]=w,w}rawBeforeClose(a){let s;return a.walk(_=>{if(_.nodes&&_.nodes.length>0&&typeof _.raws.after<"u")return s=_.raws.after,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),s&&(s=s.replace(/\S/g,"")),s}rawBeforeComment(a,s){let _;return a.walkComments(w=>{if(typeof w.raws.before<"u")return _=w.raws.before,_.includes(`
`)&&(_=_.replace(/[^\n]+$/,"")),!1}),typeof _>"u"?_=this.raw(s,null,"beforeDecl"):_&&(_=_.replace(/\S/g,"")),_}rawBeforeDecl(a,s){let _;return a.walkDecls(w=>{if(typeof w.raws.before<"u")return _=w.raws.before,_.includes(`
`)&&(_=_.replace(/[^\n]+$/,"")),!1}),typeof _>"u"?_=this.raw(s,null,"beforeRule"):_&&(_=_.replace(/\S/g,"")),_}rawBeforeOpen(a){let s;return a.walk(_=>{if(_.type!=="decl"&&(s=_.raws.between,typeof s<"u"))return!1}),s}rawBeforeRule(a){let s;return a.walk(_=>{if(_.nodes&&(_.parent!==a||a.first!==_)&&typeof _.raws.before<"u")return s=_.raws.before,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),s&&(s=s.replace(/\S/g,"")),s}rawColon(a){let s;return a.walkDecls(_=>{if(typeof _.raws.between<"u")return s=_.raws.between.replace(/[^\s:]/g,""),!1}),s}rawEmptyBody(a){let s;return a.walk(_=>{if(_.nodes&&_.nodes.length===0&&(s=_.raws.after,typeof s<"u"))return!1}),s}rawIndent(a){if(a.raws.indent)return a.raws.indent;let s;return a.walk(_=>{let w=_.parent;if(w&&w!==a&&w.parent&&w.parent===a&&typeof _.raws.before<"u"){let C=_.raws.before.split(`
`);return s=C[C.length-1],s=s.replace(/\S/g,""),!1}}),s}rawSemicolon(a){let s;return a.walk(_=>{if(_.nodes&&_.nodes.length&&_.last.type==="decl"&&(s=_.raws.semicolon,typeof s<"u"))return!1}),s}rawValue(a,s){let _=a[s],w=a.raws[s];return w&&w.value===_?w.raw:_}root(a){this.body(a),a.raws.after&&this.builder(a.raws.after)}rule(a){this.block(a,this.rawValue(a,"selector")),a.raws.ownSemicolon&&this.builder(a.raws.ownSemicolon,a,"end")}stringify(a,s){if(!this[a.type])throw new Error("Unknown AST node type "+a.type+". Maybe you need to change PostCSS stringifier.");this[a.type](a,s)}}return a1=e,e.default=e,a1}var l1,eM;function X0(){if(eM)return l1;eM=1;let i=sI();function t(e,o){new i(o).stringify(e)}return l1=t,t.default=t,l1}var D0={},tM;function sx(){return tM||(tM=1,D0.isClean=Symbol("isClean"),D0.my=Symbol("my")),D0}var c1,iM;function Y0(){if(iM)return c1;iM=1;let i=ox(),t=sI(),e=X0(),{isClean:o,my:a}=sx();function s(C,T){let I=new C.constructor;for(let P in C){if(!Object.prototype.hasOwnProperty.call(C,P)||P==="proxyCache")continue;let R=C[P],H=typeof R;P==="parent"&&H==="object"?T&&(I[P]=T):P==="source"?I[P]=R:Array.isArray(R)?I[P]=R.map(Z=>s(Z,I)):(H==="object"&&R!==null&&(R=s(R)),I[P]=R)}return I}function _(C,T){if(T&&typeof T.offset<"u")return T.offset;let I=1,P=1,R=0;for(let H=0;H<C.length;H++){if(P===T.line&&I===T.column){R=H;break}C[H]===`
`?(I=1,P+=1):I+=1}return R}class w{constructor(T={}){this.raws={},this[o]=!1,this[a]=!0;for(let I in T)if(I==="nodes"){this.nodes=[];for(let P of T[I])typeof P.clone=="function"?this.append(P.clone()):this.append(P)}else this[I]=T[I]}addToError(T){if(T.postcssNode=this,T.stack&&this.source&&/\n\s{4}at /.test(T.stack)){let I=this.source;T.stack=T.stack.replace(/\n\s{4}at /,`$&${I.input.from}:${I.start.line}:${I.start.column}$&`)}return T}after(T){return this.parent.insertAfter(this,T),this}assign(T={}){for(let I in T)this[I]=T[I];return this}before(T){return this.parent.insertBefore(this,T),this}cleanRaws(T){delete this.raws.before,delete this.raws.after,T||delete this.raws.between}clone(T={}){let I=s(this);for(let P in T)I[P]=T[P];return I}cloneAfter(T={}){let I=this.clone(T);return this.parent.insertAfter(this,I),I}cloneBefore(T={}){let I=this.clone(T);return this.parent.insertBefore(this,I),I}error(T,I={}){if(this.source){let{end:P,start:R}=this.rangeBy(I);return this.source.input.error(T,{column:R.column,line:R.line},{column:P.column,line:P.line},I)}return new i(T)}getProxyProcessor(){return{get(T,I){return I==="proxyOf"?T:I==="root"?()=>T.root().toProxy():T[I]},set(T,I,P){return T[I]===P||(T[I]=P,(I==="prop"||I==="value"||I==="name"||I==="params"||I==="important"||I==="text")&&T.markDirty()),!0}}}markClean(){this[o]=!0}markDirty(){if(this[o]){this[o]=!1;let T=this;for(;T=T.parent;)T[o]=!1}}next(){if(!this.parent)return;let T=this.parent.index(this);return this.parent.nodes[T+1]}positionBy(T){let I=this.source.start;if(T.index)I=this.positionInside(T.index);else if(T.word){let R=this.source.input.css.slice(_(this.source.input.css,this.source.start),_(this.source.input.css,this.source.end)).indexOf(T.word);R!==-1&&(I=this.positionInside(R))}return I}positionInside(T){let I=this.source.start.column,P=this.source.start.line,R=_(this.source.input.css,this.source.start),H=R+T;for(let Z=R;Z<H;Z++)this.source.input.css[Z]===`
`?(I=1,P+=1):I+=1;return{column:I,line:P}}prev(){if(!this.parent)return;let T=this.parent.index(this);return this.parent.nodes[T-1]}rangeBy(T){let I={column:this.source.start.column,line:this.source.start.line},P=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:I.column+1,line:I.line};if(T.word){let H=this.source.input.css.slice(_(this.source.input.css,this.source.start),_(this.source.input.css,this.source.end)).indexOf(T.word);H!==-1&&(I=this.positionInside(H),P=this.positionInside(H+T.word.length))}else T.start?I={column:T.start.column,line:T.start.line}:T.index&&(I=this.positionInside(T.index)),T.end?P={column:T.end.column,line:T.end.line}:typeof T.endIndex=="number"?P=this.positionInside(T.endIndex):T.index&&(P=this.positionInside(T.index+1));return(P.line<I.line||P.line===I.line&&P.column<=I.column)&&(P={column:I.column+1,line:I.line}),{end:P,start:I}}raw(T,I){return new t().raw(this,T,I)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...T){if(this.parent){let I=this,P=!1;for(let R of T)R===this?P=!0:P?(this.parent.insertAfter(I,R),I=R):this.parent.insertBefore(I,R);P||this.remove()}return this}root(){let T=this;for(;T.parent&&T.parent.type!=="document";)T=T.parent;return T}toJSON(T,I){let P={},R=I==null;I=I||new Map;let H=0;for(let Z in this){if(!Object.prototype.hasOwnProperty.call(this,Z)||Z==="parent"||Z==="proxyCache")continue;let X=this[Z];if(Array.isArray(X))P[Z]=X.map(fe=>typeof fe=="object"&&fe.toJSON?fe.toJSON(null,I):fe);else if(typeof X=="object"&&X.toJSON)P[Z]=X.toJSON(null,I);else if(Z==="source"){let fe=I.get(X.input);fe==null&&(fe=H,I.set(X.input,H),H++),P[Z]={end:X.end,inputId:fe,start:X.start}}else P[Z]=X}return R&&(P.inputs=[...I.keys()].map(Z=>Z.toJSON())),P}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(T=e){T.stringify&&(T=T.stringify);let I="";return T(this,P=>{I+=P}),I}warn(T,I,P){let R={node:this};for(let H in P)R[H]=P[H];return T.warn(I,R)}get proxyOf(){return this}}return c1=w,w.default=w,c1}var u1,rM;function K0(){if(rM)return u1;rM=1;let i=Y0();class t extends i{constructor(o){super(o),this.type="comment"}}return u1=t,t.default=t,u1}var d1,nM;function Q0(){if(nM)return d1;nM=1;let i=Y0();class t extends i{constructor(o){o&&typeof o.value<"u"&&typeof o.value!="string"&&(o=ui(gt({},o),{value:String(o.value)})),super(o),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}}return d1=t,t.default=t,d1}var h1,oM;function fd(){if(oM)return h1;oM=1;let i=K0(),t=Q0(),e=Y0(),{isClean:o,my:a}=sx(),s,_,w,C;function T(R){return R.map(H=>(H.nodes&&(H.nodes=T(H.nodes)),delete H.source,H))}function I(R){if(R[o]=!1,R.proxyOf.nodes)for(let H of R.proxyOf.nodes)I(H)}let P=(()=>{class R extends e{append(...Z){for(let X of Z){let fe=this.normalize(X,this.last);for(let ae of fe)this.proxyOf.nodes.push(ae)}return this.markDirty(),this}cleanRaws(Z){if(super.cleanRaws(Z),this.nodes)for(let X of this.nodes)X.cleanRaws(Z)}each(Z){if(!this.proxyOf.nodes)return;let X=this.getIterator(),fe,ae;for(;this.indexes[X]<this.proxyOf.nodes.length&&(fe=this.indexes[X],ae=Z(this.proxyOf.nodes[fe],fe),ae!==!1);)this.indexes[X]+=1;return delete this.indexes[X],ae}every(Z){return this.nodes.every(Z)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let Z=this.lastEach;return this.indexes[Z]=0,Z}getProxyProcessor(){return{get(Z,X){return X==="proxyOf"?Z:Z[X]?X==="each"||typeof X=="string"&&X.startsWith("walk")?(...fe)=>Z[X](...fe.map(ae=>typeof ae=="function"?(ne,re)=>ae(ne.toProxy(),re):ae)):X==="every"||X==="some"?fe=>Z[X]((ae,...ne)=>fe(ae.toProxy(),...ne)):X==="root"?()=>Z.root().toProxy():X==="nodes"?Z.nodes.map(fe=>fe.toProxy()):X==="first"||X==="last"?Z[X].toProxy():Z[X]:Z[X]},set(Z,X,fe){return Z[X]===fe||(Z[X]=fe,(X==="name"||X==="params"||X==="selector")&&Z.markDirty()),!0}}}index(Z){return typeof Z=="number"?Z:(Z.proxyOf&&(Z=Z.proxyOf),this.proxyOf.nodes.indexOf(Z))}insertAfter(Z,X){let fe=this.index(Z),ae=this.normalize(X,this.proxyOf.nodes[fe]).reverse();fe=this.index(Z);for(let re of ae)this.proxyOf.nodes.splice(fe+1,0,re);let ne;for(let re in this.indexes)ne=this.indexes[re],fe<ne&&(this.indexes[re]=ne+ae.length);return this.markDirty(),this}insertBefore(Z,X){let fe=this.index(Z),ae=fe===0?"prepend":!1,ne=this.normalize(X,this.proxyOf.nodes[fe],ae).reverse();fe=this.index(Z);for(let de of ne)this.proxyOf.nodes.splice(fe,0,de);let re;for(let de in this.indexes)re=this.indexes[de],fe<=re&&(this.indexes[de]=re+ne.length);return this.markDirty(),this}normalize(Z,X){if(typeof Z=="string")Z=T(_(Z).nodes);else if(typeof Z>"u")Z=[];else if(Array.isArray(Z)){Z=Z.slice(0);for(let ae of Z)ae.parent&&ae.parent.removeChild(ae,"ignore")}else if(Z.type==="root"&&this.type!=="document"){Z=Z.nodes.slice(0);for(let ae of Z)ae.parent&&ae.parent.removeChild(ae,"ignore")}else if(Z.type)Z=[Z];else if(Z.prop){if(typeof Z.value>"u")throw new Error("Value field is missed in node creation");typeof Z.value!="string"&&(Z.value=String(Z.value)),Z=[new t(Z)]}else if(Z.selector||Z.selectors)Z=[new C(Z)];else if(Z.name)Z=[new s(Z)];else if(Z.text)Z=[new i(Z)];else throw new Error("Unknown node type in node creation");return Z.map(ae=>(ae[a]||R.rebuild(ae),ae=ae.proxyOf,ae.parent&&ae.parent.removeChild(ae),ae[o]&&I(ae),ae.raws||(ae.raws={}),typeof ae.raws.before>"u"&&X&&typeof X.raws.before<"u"&&(ae.raws.before=X.raws.before.replace(/\S/g,"")),ae.parent=this.proxyOf,ae))}prepend(...Z){Z=Z.reverse();for(let X of Z){let fe=this.normalize(X,this.first,"prepend").reverse();for(let ae of fe)this.proxyOf.nodes.unshift(ae);for(let ae in this.indexes)this.indexes[ae]=this.indexes[ae]+fe.length}return this.markDirty(),this}push(Z){return Z.parent=this,this.proxyOf.nodes.push(Z),this}removeAll(){for(let Z of this.proxyOf.nodes)Z.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(Z){Z=this.index(Z),this.proxyOf.nodes[Z].parent=void 0,this.proxyOf.nodes.splice(Z,1);let X;for(let fe in this.indexes)X=this.indexes[fe],X>=Z&&(this.indexes[fe]=X-1);return this.markDirty(),this}replaceValues(Z,X,fe){return fe||(fe=X,X={}),this.walkDecls(ae=>{X.props&&!X.props.includes(ae.prop)||X.fast&&!ae.value.includes(X.fast)||(ae.value=ae.value.replace(Z,fe))}),this.markDirty(),this}some(Z){return this.nodes.some(Z)}walk(Z){return this.each((X,fe)=>{let ae;try{ae=Z(X,fe)}catch(ne){throw X.addToError(ne)}return ae!==!1&&X.walk&&(ae=X.walk(Z)),ae})}walkAtRules(Z,X){return X?Z instanceof RegExp?this.walk((fe,ae)=>{if(fe.type==="atrule"&&Z.test(fe.name))return X(fe,ae)}):this.walk((fe,ae)=>{if(fe.type==="atrule"&&fe.name===Z)return X(fe,ae)}):(X=Z,this.walk((fe,ae)=>{if(fe.type==="atrule")return X(fe,ae)}))}walkComments(Z){return this.walk((X,fe)=>{if(X.type==="comment")return Z(X,fe)})}walkDecls(Z,X){return X?Z instanceof RegExp?this.walk((fe,ae)=>{if(fe.type==="decl"&&Z.test(fe.prop))return X(fe,ae)}):this.walk((fe,ae)=>{if(fe.type==="decl"&&fe.prop===Z)return X(fe,ae)}):(X=Z,this.walk((fe,ae)=>{if(fe.type==="decl")return X(fe,ae)}))}walkRules(Z,X){return X?Z instanceof RegExp?this.walk((fe,ae)=>{if(fe.type==="rule"&&Z.test(fe.selector))return X(fe,ae)}):this.walk((fe,ae)=>{if(fe.type==="rule"&&fe.selector===Z)return X(fe,ae)}):(X=Z,this.walk((fe,ae)=>{if(fe.type==="rule")return X(fe,ae)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}return R.registerParse=H=>{_=H},R.registerRule=H=>{C=H},R.registerAtRule=H=>{s=H},R.registerRoot=H=>{w=H},R})();return h1=P,P.default=P,P.rebuild=R=>{R.type==="atrule"?Object.setPrototypeOf(R,s.prototype):R.type==="rule"?Object.setPrototypeOf(R,C.prototype):R.type==="decl"?Object.setPrototypeOf(R,t.prototype):R.type==="comment"?Object.setPrototypeOf(R,i.prototype):R.type==="root"&&Object.setPrototypeOf(R,w.prototype),R[a]=!0,R.nodes&&R.nodes.forEach(H=>{P.rebuild(H)})},h1}var p1,sM;function ax(){if(sM)return p1;sM=1;let i=fd();class t extends i{constructor(o){super(o),this.type="atrule"}append(...o){return this.proxyOf.nodes||(this.nodes=[]),super.append(...o)}prepend(...o){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...o)}}return p1=t,t.default=t,i.registerAtRule(t),p1}var f1,aM;function lx(){if(aM)return f1;aM=1;let i=fd(),t,e,o=(()=>{class a extends i{constructor(_){super(gt({type:"document"},_)),this.nodes||(this.nodes=[])}toResult(_={}){return new t(new e,this,_).stringify()}}return a.registerLazyResult=s=>{t=s},a.registerProcessor=s=>{e=s},a})();return f1=o,o.default=o,f1}var m1,lM;function j6(){if(lM)return m1;lM=1;let i="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";return m1={nanoid:(o=21)=>{let a="",s=o;for(;s--;)a+=i[Math.random()*64|0];return a},customAlphabet:(o,a=21)=>(s=a)=>{let _="",w=s;for(;w--;)_+=o[Math.random()*o.length|0];return _}},m1}var g1,cM;function aI(){if(cM)return g1;cM=1;let{existsSync:i,readFileSync:t}=Ja,{dirname:e,join:o}=Ja,{SourceMapConsumer:a,SourceMapGenerator:s}=Ja;function _(C){return Buffer?Buffer.from(C,"base64").toString():window.atob(C)}class w{constructor(T,I){if(I.map===!1)return;this.loadAnnotation(T),this.inline=this.startWith(this.annotation,"data:");let P=I.map?I.map.prev:void 0,R=this.loadMap(I.from,P);!this.mapFile&&I.from&&(this.mapFile=I.from),this.mapFile&&(this.root=e(this.mapFile)),R&&(this.text=R)}consumer(){return this.consumerCache||(this.consumerCache=new a(this.text)),this.consumerCache}decodeInline(T){let I=/^data:application\/json;charset=utf-?8;base64,/,P=/^data:application\/json;base64,/,R=/^data:application\/json;charset=utf-?8,/,H=/^data:application\/json,/,Z=T.match(R)||T.match(H);if(Z)return decodeURIComponent(T.substr(Z[0].length));let X=T.match(I)||T.match(P);if(X)return _(T.substr(X[0].length));let fe=T.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+fe)}getAnnotationURL(T){return T.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(T){return typeof T!="object"?!1:typeof T.mappings=="string"||typeof T._mappings=="string"||Array.isArray(T.sections)}loadAnnotation(T){let I=T.match(/\/\*\s*# sourceMappingURL=/g);if(!I)return;let P=T.lastIndexOf(I.pop()),R=T.indexOf("*/",P);P>-1&&R>-1&&(this.annotation=this.getAnnotationURL(T.substring(P,R)))}loadFile(T){if(this.root=e(T),i(T))return this.mapFile=T,t(T,"utf-8").toString().trim()}loadMap(T,I){if(I===!1)return!1;if(I){if(typeof I=="string")return I;if(typeof I=="function"){let P=I(T);if(P){let R=this.loadFile(P);if(!R)throw new Error("Unable to load previous source map: "+P.toString());return R}}else{if(I instanceof a)return s.fromSourceMap(I).toString();if(I instanceof s)return I.toString();if(this.isMap(I))return JSON.stringify(I);throw new Error("Unsupported previous source map format: "+I.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let P=this.annotation;return T&&(P=o(e(T),P)),this.loadFile(P)}}}startWith(T,I){return T?T.substr(0,I.length)===I:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}return g1=w,w.default=w,g1}var _1,uM;function J0(){if(uM)return _1;uM=1;let{nanoid:i}=j6(),{isAbsolute:t,resolve:e}=Ja,{SourceMapConsumer:o,SourceMapGenerator:a}=Ja,{fileURLToPath:s,pathToFileURL:_}=Ja,w=ox(),C=aI(),T=Ja,I=Symbol("fromOffsetCache"),P=!!(o&&a),R=!!(e&&t);class H{constructor(X,fe={}){if(X===null||typeof X>"u"||typeof X=="object"&&!X.toString)throw new Error(`PostCSS received ${X} instead of CSS string`);if(this.css=X.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,fe.from&&(!R||/^\w+:\/\//.test(fe.from)||t(fe.from)?this.file=fe.from:this.file=e(fe.from)),R&&P){let ae=new C(this.css,fe);if(ae.text){this.map=ae;let ne=ae.consumer().file;!this.file&&ne&&(this.file=this.mapResolve(ne))}}this.file||(this.id="<input css "+i(6)+">"),this.map&&(this.map.file=this.from)}error(X,fe,ae,ne={}){let re,de,oe;if(fe&&typeof fe=="object"){let tt=fe,dt=ae;if(typeof tt.offset=="number"){let Je=this.fromOffset(tt.offset);fe=Je.line,ae=Je.col}else fe=tt.line,ae=tt.column;if(typeof dt.offset=="number"){let Je=this.fromOffset(dt.offset);de=Je.line,re=Je.col}else de=dt.line,re=dt.column}else if(!ae){let tt=this.fromOffset(fe);fe=tt.line,ae=tt.col}let Ve=this.origin(fe,ae,de,re);return Ve?oe=new w(X,Ve.endLine===void 0?Ve.line:{column:Ve.column,line:Ve.line},Ve.endLine===void 0?Ve.column:{column:Ve.endColumn,line:Ve.endLine},Ve.source,Ve.file,ne.plugin):oe=new w(X,de===void 0?fe:{column:ae,line:fe},de===void 0?ae:{column:re,line:de},this.css,this.file,ne.plugin),oe.input={column:ae,endColumn:re,endLine:de,line:fe,source:this.css},this.file&&(_&&(oe.input.url=_(this.file).toString()),oe.input.file=this.file),oe}fromOffset(X){let fe,ae;if(this[I])ae=this[I];else{let re=this.css.split(`
`);ae=new Array(re.length);let de=0;for(let oe=0,Ve=re.length;oe<Ve;oe++)ae[oe]=de,de+=re[oe].length+1;this[I]=ae}fe=ae[ae.length-1];let ne=0;if(X>=fe)ne=ae.length-1;else{let re=ae.length-2,de;for(;ne<re;)if(de=ne+(re-ne>>1),X<ae[de])re=de-1;else if(X>=ae[de+1])ne=de+1;else{ne=de;break}}return{col:X-ae[ne]+1,line:ne+1}}mapResolve(X){return/^\w+:\/\//.test(X)?X:e(this.map.consumer().sourceRoot||this.map.root||".",X)}origin(X,fe,ae,ne){if(!this.map)return!1;let re=this.map.consumer(),de=re.originalPositionFor({column:fe,line:X});if(!de.source)return!1;let oe;typeof ae=="number"&&(oe=re.originalPositionFor({column:ne,line:ae}));let Ve;t(de.source)?Ve=_(de.source):Ve=new URL(de.source,this.map.consumer().sourceRoot||_(this.map.mapFile));let tt={column:de.column,endColumn:oe&&oe.column,endLine:oe&&oe.line,line:de.line,url:Ve.toString()};if(Ve.protocol==="file:")if(s)tt.file=s(Ve);else throw new Error("file: protocol is not available in this PostCSS build");let dt=re.sourceContentFor(de.source);return dt&&(tt.source=dt),tt}toJSON(){let X={};for(let fe of["hasBOM","css","file","id"])this[fe]!=null&&(X[fe]=this[fe]);return this.map&&(X.map=gt({},this.map),X.map.consumerCache&&(X.map.consumerCache=void 0)),X}get from(){return this.file||this.id}}return _1=H,H.default=H,T&&T.registerInput&&T.registerInput(H),_1}var b1,dM;function mm(){if(dM)return b1;dM=1;let i=fd(),t,e,o=(()=>{class a extends i{constructor(_){super(_),this.type="root",this.nodes||(this.nodes=[])}normalize(_,w,C){let T=super.normalize(_);if(w){if(C==="prepend")this.nodes.length>1?w.raws.before=this.nodes[1].raws.before:delete w.raws.before;else if(this.first!==w)for(let I of T)I.raws.before=w.raws.before}return T}removeChild(_,w){let C=this.index(_);return!w&&C===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[C].raws.before),super.removeChild(_)}toResult(_={}){return new t(new e,this,_).stringify()}}return a.registerLazyResult=s=>{t=s},a.registerProcessor=s=>{e=s},a})();return b1=o,o.default=o,i.registerRoot(o),b1}var v1,hM;function lI(){if(hM)return v1;hM=1;let i={comma(t){return i.split(t,[","],!0)},space(t){let e=[" ",`
`,"	"];return i.split(t,e)},split(t,e,o){let a=[],s="",_=!1,w=0,C=!1,T="",I=!1;for(let P of t)I?I=!1:P==="\\"?I=!0:C?P===T&&(C=!1):P==='"'||P==="'"?(C=!0,T=P):P==="("?w+=1:P===")"?w>0&&(w-=1):w===0&&e.includes(P)&&(_=!0),_?(s!==""&&a.push(s.trim()),s="",_=!1):s+=P;return(o||s!=="")&&a.push(s.trim()),a}};return v1=i,i.default=i,v1}var y1,pM;function cx(){if(pM)return y1;pM=1;let i=fd(),t=lI();class e extends i{constructor(a){super(a),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return t.comma(this.selector)}set selectors(a){let s=this.selector?this.selector.match(/,\s*/):null,_=s?s[0]:","+this.raw("between","beforeOpen");this.selector=a.join(_)}}return y1=e,e.default=e,i.registerRule(e),y1}var x1,fM;function q6(){if(fM)return x1;fM=1;let i=ax(),t=K0(),e=Q0(),o=J0(),a=aI(),s=mm(),_=cx();function w(C,T){if(Array.isArray(C))return C.map(Z=>w(Z));let R=C,{inputs:I}=R,P=Ql(R,["inputs"]);if(I){T=[];for(let Z of I){let X=ui(gt({},Z),{__proto__:o.prototype});X.map&&(X.map=ui(gt({},X.map),{__proto__:a.prototype})),T.push(X)}}if(P.nodes&&(P.nodes=C.nodes.map(Z=>w(Z,T))),P.source){let H=P.source,{inputId:Z}=H,X=Ql(H,["inputId"]);P.source=X,Z!=null&&(P.source.input=T[Z])}if(P.type==="root")return new s(P);if(P.type==="decl")return new e(P);if(P.type==="rule")return new _(P);if(P.type==="comment")return new t(P);if(P.type==="atrule")return new i(P);throw new Error("Unknown node type: "+C.type)}return x1=w,w.default=w,x1}var w1,mM;function cI(){if(mM)return w1;mM=1;let{dirname:i,relative:t,resolve:e,sep:o}=Ja,{SourceMapConsumer:a,SourceMapGenerator:s}=Ja,{pathToFileURL:_}=Ja,w=J0(),C=!!(a&&s),T=!!(i&&e&&t&&o);class I{constructor(R,H,Z,X){this.stringify=R,this.mapOpts=Z.map||{},this.root=H,this.opts=Z,this.css=X,this.originalCSS=X,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let R;this.isInline()?R="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?R=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?R=this.mapOpts.annotation(this.opts.to,this.root):R=this.outputFile()+".map";let H=`
`;this.css.includes(`\r
`)&&(H=`\r
`),this.css+=H+"/*# sourceMappingURL="+R+" */"}applyPrevMaps(){for(let R of this.previous()){let H=this.toUrl(this.path(R.file)),Z=R.root||i(R.file),X;this.mapOpts.sourcesContent===!1?(X=new a(R.text),X.sourcesContent&&(X.sourcesContent=null)):X=R.consumer(),this.map.applySourceMap(X,H,this.toUrl(this.path(Z)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let R;for(let H=this.root.nodes.length-1;H>=0;H--)R=this.root.nodes[H],R.type==="comment"&&R.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(H)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),T&&C&&this.isMap())return this.generateMap();{let R="";return this.stringify(this.root,H=>{R+=H}),[R]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let R=this.previous()[0].consumer();R.file=this.outputFile(),this.map=s.fromSourceMap(R,{ignoreInvalidMapping:!0})}else this.map=new s({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new s({file:this.outputFile(),ignoreInvalidMapping:!0});let R=1,H=1,Z="<no source>",X={generated:{column:0,line:0},original:{column:0,line:0},source:""},fe,ae;this.stringify(this.root,(ne,re,de)=>{if(this.css+=ne,re&&de!=="end"&&(X.generated.line=R,X.generated.column=H-1,re.source&&re.source.start?(X.source=this.sourcePath(re),X.original.line=re.source.start.line,X.original.column=re.source.start.column-1,this.map.addMapping(X)):(X.source=Z,X.original.line=1,X.original.column=0,this.map.addMapping(X))),ae=ne.match(/\n/g),ae?(R+=ae.length,fe=ne.lastIndexOf(`
`),H=ne.length-fe):H+=ne.length,re&&de!=="start"){let oe=re.parent||{raws:{}};(!(re.type==="decl"||re.type==="atrule"&&!re.nodes)||re!==oe.last||oe.raws.semicolon)&&(re.source&&re.source.end?(X.source=this.sourcePath(re),X.original.line=re.source.end.line,X.original.column=re.source.end.column-1,X.generated.line=R,X.generated.column=H-2,this.map.addMapping(X)):(X.source=Z,X.original.line=1,X.original.column=0,X.generated.line=R,X.generated.column=H-1,this.map.addMapping(X)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(R=>R.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let R=this.mapOpts.annotation;return typeof R<"u"&&R!==!0?!1:this.previous().length?this.previous().some(H=>H.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(R=>R.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(R){if(this.mapOpts.absolute||R.charCodeAt(0)===60||/^\w+:\/\//.test(R))return R;let H=this.memoizedPaths.get(R);if(H)return H;let Z=this.opts.to?i(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(Z=i(e(Z,this.mapOpts.annotation)));let X=t(Z,R);return this.memoizedPaths.set(R,X),X}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(R=>{if(R.source&&R.source.input.map){let H=R.source.input.map;this.previousMaps.includes(H)||this.previousMaps.push(H)}});else{let R=new w(this.originalCSS,this.opts);R.map&&this.previousMaps.push(R.map)}return this.previousMaps}setSourcesContent(){let R={};if(this.root)this.root.walk(H=>{if(H.source){let Z=H.source.input.from;if(Z&&!R[Z]){R[Z]=!0;let X=this.usesFileUrls?this.toFileUrl(Z):this.toUrl(this.path(Z));this.map.setSourceContent(X,H.source.input.css)}}});else if(this.css){let H=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(H,this.css)}}sourcePath(R){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(R.source.input.from):this.toUrl(this.path(R.source.input.from))}toBase64(R){return Buffer?Buffer.from(R).toString("base64"):window.btoa(unescape(encodeURIComponent(R)))}toFileUrl(R){let H=this.memoizedFileURLs.get(R);if(H)return H;if(_){let Z=_(R).toString();return this.memoizedFileURLs.set(R,Z),Z}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(R){let H=this.memoizedURLs.get(R);if(H)return H;o==="\\"&&(R=R.replace(/\\/g,"/"));let Z=encodeURI(R).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(R,Z),Z}}return w1=I,w1}var C1,gM;function H6(){if(gM)return C1;gM=1;let i=39,t=34,e=92,o=47,a=10,s=32,_=12,w=9,C=13,T=91,I=93,P=40,R=41,H=123,Z=125,X=59,fe=42,ae=58,ne=64,re=/[\t\n\f\r "#'()/;[\\\]{}]/g,de=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,oe=/.[\r\n"'(/\\]/,Ve=/[\da-f]/i;return C1=function(dt,Je={}){let we=dt.css.valueOf(),Ge=Je.ignoreErrors,yt,le,te,V,me,Ue,ot,Rt,Ut,Fi,Pe=we.length,Ne=0,Dt=[],di=[];function Hr(){return Ne}function Uo(Ar){throw dt.error("Unclosed "+Ar,Ne)}function Ca(){return di.length===0&&Ne>=Pe}function Ln(Ar){if(di.length)return di.pop();if(Ne>=Pe)return;let rr=Ar?Ar.ignoreUnclosed:!1;switch(yt=we.charCodeAt(Ne),yt){case a:case s:case w:case C:case _:{V=Ne;do V+=1,yt=we.charCodeAt(V);while(yt===s||yt===a||yt===w||yt===C||yt===_);Ue=["space",we.slice(Ne,V)],Ne=V-1;break}case T:case I:case H:case Z:case ae:case X:case R:{let ao=String.fromCharCode(yt);Ue=[ao,ao,Ne];break}case P:{if(Fi=Dt.length?Dt.pop()[1]:"",Ut=we.charCodeAt(Ne+1),Fi==="url"&&Ut!==i&&Ut!==t&&Ut!==s&&Ut!==a&&Ut!==w&&Ut!==_&&Ut!==C){V=Ne;do{if(ot=!1,V=we.indexOf(")",V+1),V===-1)if(Ge||rr){V=Ne;break}else Uo("bracket");for(Rt=V;we.charCodeAt(Rt-1)===e;)Rt-=1,ot=!ot}while(ot);Ue=["brackets",we.slice(Ne,V+1),Ne,V],Ne=V}else V=we.indexOf(")",Ne+1),le=we.slice(Ne,V+1),V===-1||oe.test(le)?Ue=["(","(",Ne]:(Ue=["brackets",le,Ne,V],Ne=V);break}case i:case t:{me=yt===i?"'":'"',V=Ne;do{if(ot=!1,V=we.indexOf(me,V+1),V===-1)if(Ge||rr){V=Ne+1;break}else Uo("string");for(Rt=V;we.charCodeAt(Rt-1)===e;)Rt-=1,ot=!ot}while(ot);Ue=["string",we.slice(Ne,V+1),Ne,V],Ne=V;break}case ne:{re.lastIndex=Ne+1,re.test(we),re.lastIndex===0?V=we.length-1:V=re.lastIndex-2,Ue=["at-word",we.slice(Ne,V+1),Ne,V],Ne=V;break}case e:{for(V=Ne,te=!0;we.charCodeAt(V+1)===e;)V+=1,te=!te;if(yt=we.charCodeAt(V+1),te&&yt!==o&&yt!==s&&yt!==a&&yt!==w&&yt!==C&&yt!==_&&(V+=1,Ve.test(we.charAt(V)))){for(;Ve.test(we.charAt(V+1));)V+=1;we.charCodeAt(V+1)===s&&(V+=1)}Ue=["word",we.slice(Ne,V+1),Ne,V],Ne=V;break}default:{yt===o&&we.charCodeAt(Ne+1)===fe?(V=we.indexOf("*/",Ne+2)+1,V===0&&(Ge||rr?V=we.length:Uo("comment")),Ue=["comment",we.slice(Ne,V+1),Ne,V],Ne=V):(de.lastIndex=Ne+1,de.test(we),de.lastIndex===0?V=we.length-1:V=de.lastIndex-2,Ue=["word",we.slice(Ne,V+1),Ne,V],Dt.push(Ue),Ne=V);break}}return Ne++,Ue}function Nn(Ar){di.push(Ar)}return{back:Nn,endOfFile:Ca,nextToken:Ln,position:Hr}},C1}var E1,_M;function $6(){if(_M)return E1;_M=1;let i=ax(),t=K0(),e=Q0(),o=mm(),a=cx(),s=H6(),_={empty:!0,space:!0};function w(T){for(let I=T.length-1;I>=0;I--){let P=T[I],R=P[3]||P[2];if(R)return R}}class C{constructor(I){this.input=I,this.root=new o,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:I,start:{column:1,line:1,offset:0}}}atrule(I){let P=new i;P.name=I[1].slice(1),P.name===""&&this.unnamedAtrule(P,I),this.init(P,I[2]);let R,H,Z,X=!1,fe=!1,ae=[],ne=[];for(;!this.tokenizer.endOfFile();){if(I=this.tokenizer.nextToken(),R=I[0],R==="("||R==="["?ne.push(R==="("?")":"]"):R==="{"&&ne.length>0?ne.push("}"):R===ne[ne.length-1]&&ne.pop(),ne.length===0)if(R===";"){P.source.end=this.getPosition(I[2]),P.source.end.offset++,this.semicolon=!0;break}else if(R==="{"){fe=!0;break}else if(R==="}"){if(ae.length>0){for(Z=ae.length-1,H=ae[Z];H&&H[0]==="space";)H=ae[--Z];H&&(P.source.end=this.getPosition(H[3]||H[2]),P.source.end.offset++)}this.end(I);break}else ae.push(I);else ae.push(I);if(this.tokenizer.endOfFile()){X=!0;break}}P.raws.between=this.spacesAndCommentsFromEnd(ae),ae.length?(P.raws.afterName=this.spacesAndCommentsFromStart(ae),this.raw(P,"params",ae),X&&(I=ae[ae.length-1],P.source.end=this.getPosition(I[3]||I[2]),P.source.end.offset++,this.spaces=P.raws.between,P.raws.between="")):(P.raws.afterName="",P.params=""),fe&&(P.nodes=[],this.current=P)}checkMissedSemicolon(I){let P=this.colon(I);if(P===!1)return;let R=0,H;for(let Z=P-1;Z>=0&&(H=I[Z],!(H[0]!=="space"&&(R+=1,R===2)));Z--);throw this.input.error("Missed semicolon",H[0]==="word"?H[3]+1:H[2])}colon(I){let P=0,R,H,Z;for(let[X,fe]of I.entries()){if(H=fe,Z=H[0],Z==="("&&(P+=1),Z===")"&&(P-=1),P===0&&Z===":")if(!R)this.doubleColon(H);else{if(R[0]==="word"&&R[1]==="progid")continue;return X}R=H}return!1}comment(I){let P=new t;this.init(P,I[2]),P.source.end=this.getPosition(I[3]||I[2]),P.source.end.offset++;let R=I[1].slice(2,-2);if(/^\s*$/.test(R))P.text="",P.raws.left=R,P.raws.right="";else{let H=R.match(/^(\s*)([^]*\S)(\s*)$/);P.text=H[2],P.raws.left=H[1],P.raws.right=H[3]}}createTokenizer(){this.tokenizer=s(this.input)}decl(I,P){let R=new e;this.init(R,I[0][2]);let H=I[I.length-1];for(H[0]===";"&&(this.semicolon=!0,I.pop()),R.source.end=this.getPosition(H[3]||H[2]||w(I)),R.source.end.offset++;I[0][0]!=="word";)I.length===1&&this.unknownWord(I),R.raws.before+=I.shift()[1];for(R.source.start=this.getPosition(I[0][2]),R.prop="";I.length;){let ne=I[0][0];if(ne===":"||ne==="space"||ne==="comment")break;R.prop+=I.shift()[1]}R.raws.between="";let Z;for(;I.length;)if(Z=I.shift(),Z[0]===":"){R.raws.between+=Z[1];break}else Z[0]==="word"&&/\w/.test(Z[1])&&this.unknownWord([Z]),R.raws.between+=Z[1];(R.prop[0]==="_"||R.prop[0]==="*")&&(R.raws.before+=R.prop[0],R.prop=R.prop.slice(1));let X=[],fe;for(;I.length&&(fe=I[0][0],!(fe!=="space"&&fe!=="comment"));)X.push(I.shift());this.precheckMissedSemicolon(I);for(let ne=I.length-1;ne>=0;ne--){if(Z=I[ne],Z[1].toLowerCase()==="!important"){R.important=!0;let re=this.stringFrom(I,ne);re=this.spacesFromEnd(I)+re,re!==" !important"&&(R.raws.important=re);break}else if(Z[1].toLowerCase()==="important"){let re=I.slice(0),de="";for(let oe=ne;oe>0;oe--){let Ve=re[oe][0];if(de.trim().startsWith("!")&&Ve!=="space")break;de=re.pop()[1]+de}de.trim().startsWith("!")&&(R.important=!0,R.raws.important=de,I=re)}if(Z[0]!=="space"&&Z[0]!=="comment")break}I.some(ne=>ne[0]!=="space"&&ne[0]!=="comment")&&(R.raws.between+=X.map(ne=>ne[1]).join(""),X=[]),this.raw(R,"value",X.concat(I),P),R.value.includes(":")&&!P&&this.checkMissedSemicolon(I)}doubleColon(I){throw this.input.error("Double colon",{offset:I[2]},{offset:I[2]+I[1].length})}emptyRule(I){let P=new a;this.init(P,I[2]),P.selector="",P.raws.between="",this.current=P}end(I){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(I[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(I)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(I){if(this.spaces+=I[1],this.current.nodes){let P=this.current.nodes[this.current.nodes.length-1];P&&P.type==="rule"&&!P.raws.ownSemicolon&&(P.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(I){let P=this.input.fromOffset(I);return{column:P.col,line:P.line,offset:I}}init(I,P){this.current.push(I),I.source={input:this.input,start:this.getPosition(P)},I.raws.before=this.spaces,this.spaces="",I.type!=="comment"&&(this.semicolon=!1)}other(I){let P=!1,R=null,H=!1,Z=null,X=[],fe=I[1].startsWith("--"),ae=[],ne=I;for(;ne;){if(R=ne[0],ae.push(ne),R==="("||R==="[")Z||(Z=ne),X.push(R==="("?")":"]");else if(fe&&H&&R==="{")Z||(Z=ne),X.push("}");else if(X.length===0)if(R===";")if(H){this.decl(ae,fe);return}else break;else if(R==="{"){this.rule(ae);return}else if(R==="}"){this.tokenizer.back(ae.pop()),P=!0;break}else R===":"&&(H=!0);else R===X[X.length-1]&&(X.pop(),X.length===0&&(Z=null));ne=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(P=!0),X.length>0&&this.unclosedBracket(Z),P&&H){if(!fe)for(;ae.length&&(ne=ae[ae.length-1][0],!(ne!=="space"&&ne!=="comment"));)this.tokenizer.back(ae.pop());this.decl(ae,fe)}else this.unknownWord(ae)}parse(){let I;for(;!this.tokenizer.endOfFile();)switch(I=this.tokenizer.nextToken(),I[0]){case"space":this.spaces+=I[1];break;case";":this.freeSemicolon(I);break;case"}":this.end(I);break;case"comment":this.comment(I);break;case"at-word":this.atrule(I);break;case"{":this.emptyRule(I);break;default:this.other(I);break}this.endFile()}precheckMissedSemicolon(){}raw(I,P,R,H){let Z,X,fe=R.length,ae="",ne=!0,re,de;for(let oe=0;oe<fe;oe+=1)Z=R[oe],X=Z[0],X==="space"&&oe===fe-1&&!H?ne=!1:X==="comment"?(de=R[oe-1]?R[oe-1][0]:"empty",re=R[oe+1]?R[oe+1][0]:"empty",!_[de]&&!_[re]?ae.slice(-1)===","?ne=!1:ae+=Z[1]:ne=!1):ae+=Z[1];if(!ne){let oe=R.reduce((Ve,tt)=>Ve+tt[1],"");I.raws[P]={raw:oe,value:ae}}I[P]=ae}rule(I){I.pop();let P=new a;this.init(P,I[0][2]),P.raws.between=this.spacesAndCommentsFromEnd(I),this.raw(P,"selector",I),this.current=P}spacesAndCommentsFromEnd(I){let P,R="";for(;I.length&&(P=I[I.length-1][0],!(P!=="space"&&P!=="comment"));)R=I.pop()[1]+R;return R}spacesAndCommentsFromStart(I){let P,R="";for(;I.length&&(P=I[0][0],!(P!=="space"&&P!=="comment"));)R+=I.shift()[1];return R}spacesFromEnd(I){let P,R="";for(;I.length&&(P=I[I.length-1][0],P==="space");)R=I.pop()[1]+R;return R}stringFrom(I,P){let R="";for(let H=P;H<I.length;H++)R+=I[H][1];return I.splice(P,I.length-P),R}unclosedBlock(){let I=this.current.source.start;throw this.input.error("Unclosed block",I.line,I.column)}unclosedBracket(I){throw this.input.error("Unclosed bracket",{offset:I[2]},{offset:I[2]+1})}unexpectedClose(I){throw this.input.error("Unexpected }",{offset:I[2]},{offset:I[2]+1})}unknownWord(I){throw this.input.error("Unknown word",{offset:I[0][2]},{offset:I[0][2]+I[0][1].length})}unnamedAtrule(I,P){throw this.input.error("At-rule without name",{offset:P[2]},{offset:P[2]+P[1].length})}}return E1=C,E1}var S1,bM;function ux(){if(bM)return S1;bM=1;let i=fd(),t=J0(),e=$6();function o(a,s){let _=new t(a,s),w=new e(_);try{w.parse()}catch(C){throw process.env.NODE_ENV!=="production"&&C.name==="CssSyntaxError"&&s&&s.from&&(/\.scss$/i.test(s.from)?C.message+=`
You tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser`:/\.sass/i.test(s.from)?C.message+=`
You tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser`:/\.less$/i.test(s.from)&&(C.message+=`
You tried to parse Less with the standard CSS parser; try again with the postcss-less parser`)),C}return w.root}return S1=o,o.default=o,i.registerParse(o),S1}var T1,vM;function uI(){if(vM)return T1;vM=1;class i{constructor(e,o={}){if(this.type="warning",this.text=e,o.node&&o.node.source){let a=o.node.rangeBy(o);this.line=a.start.line,this.column=a.start.column,this.endLine=a.end.line,this.endColumn=a.end.column}for(let a in o)this[a]=o[a]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}return T1=i,i.default=i,T1}var M1,yM;function dx(){if(yM)return M1;yM=1;let i=uI();class t{constructor(o,a,s){this.processor=o,this.messages=[],this.root=a,this.opts=s,this.css=void 0,this.map=void 0}toString(){return this.css}warn(o,a={}){a.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(a.plugin=this.lastPlugin.postcssPlugin);let s=new i(o,a);return this.messages.push(s),s}warnings(){return this.messages.filter(o=>o.type==="warning")}get content(){return this.css}}return M1=t,t.default=t,M1}var I1,xM;function dI(){if(xM)return I1;xM=1;let i={};return I1=function(e){i[e]||(i[e]=!0,typeof console<"u"&&console.warn&&console.warn(e))},I1}var P1,wM;function hI(){if(wM)return P1;wM=1;let i=fd(),t=lx(),e=cI(),o=ux(),a=dx(),s=mm(),_=X0(),{isClean:w,my:C}=sx(),T=dI(),I={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},P={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},R={Once:!0,postcssPlugin:!0,prepare:!0},H=0;function Z(de){return typeof de=="object"&&typeof de.then=="function"}function X(de){let oe=!1,Ve=I[de.type];return de.type==="decl"?oe=de.prop.toLowerCase():de.type==="atrule"&&(oe=de.name.toLowerCase()),oe&&de.append?[Ve,Ve+"-"+oe,H,Ve+"Exit",Ve+"Exit-"+oe]:oe?[Ve,Ve+"-"+oe,Ve+"Exit",Ve+"Exit-"+oe]:de.append?[Ve,H,Ve+"Exit"]:[Ve,Ve+"Exit"]}function fe(de){let oe;return de.type==="document"?oe=["Document",H,"DocumentExit"]:de.type==="root"?oe=["Root",H,"RootExit"]:oe=X(de),{eventIndex:0,events:oe,iterator:0,node:de,visitorIndex:0,visitors:[]}}function ae(de){return de[w]=!1,de.nodes&&de.nodes.forEach(oe=>ae(oe)),de}let ne={},re=(()=>{class de{constructor(Ve,tt,dt){this.stringified=!1,this.processed=!1;let Je;if(typeof tt=="object"&&tt!==null&&(tt.type==="root"||tt.type==="document"))Je=ae(tt);else if(tt instanceof de||tt instanceof a)Je=ae(tt.root),tt.map&&(typeof dt.map>"u"&&(dt.map={}),dt.map.inline||(dt.map.inline=!1),dt.map.prev=tt.map);else{let we=o;dt.syntax&&(we=dt.syntax.parse),dt.parser&&(we=dt.parser),we.parse&&(we=we.parse);try{Je=we(tt,dt)}catch(Ge){this.processed=!0,this.error=Ge}Je&&!Je[C]&&i.rebuild(Je)}this.result=new a(Ve,Je,dt),this.helpers=ui(gt({},ne),{postcss:ne,result:this.result}),this.plugins=this.processor.plugins.map(we=>typeof we=="object"&&we.prepare?gt(gt({},we),we.prepare(this.result)):we)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(Ve){return this.async().catch(Ve)}finally(Ve){return this.async().then(Ve,Ve)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(Ve,tt){let dt=this.result.lastPlugin;try{if(tt&&tt.addToError(Ve),this.error=Ve,Ve.name==="CssSyntaxError"&&!Ve.plugin)Ve.plugin=dt.postcssPlugin,Ve.setMessage();else if(dt.postcssVersion&&process.env.NODE_ENV!=="production"){let Je=dt.postcssPlugin,we=dt.postcssVersion,Ge=this.result.processor.version,yt=we.split("."),le=Ge.split(".");(yt[0]!==le[0]||parseInt(yt[1])>parseInt(le[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+Ge+", but "+Je+" uses "+we+". Perhaps this is the source of the error below.")}}catch(Je){console&&console.error&&console.error(Je)}return Ve}prepareVisitors(){this.listeners={};let Ve=(tt,dt,Je)=>{this.listeners[dt]||(this.listeners[dt]=[]),this.listeners[dt].push([tt,Je])};for(let tt of this.plugins)if(typeof tt=="object")for(let dt in tt){if(!P[dt]&&/^[A-Z]/.test(dt))throw new Error(`Unknown event ${dt} in ${tt.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!R[dt])if(typeof tt[dt]=="object")for(let Je in tt[dt])Je==="*"?Ve(tt,dt,tt[dt][Je]):Ve(tt,dt+"-"+Je.toLowerCase(),tt[dt][Je]);else typeof tt[dt]=="function"&&Ve(tt,dt,tt[dt])}this.hasListener=Object.keys(this.listeners).length>0}runAsync(){return qi(this,null,function*(){this.plugin=0;for(let Ve=0;Ve<this.plugins.length;Ve++){let tt=this.plugins[Ve],dt=this.runOnRoot(tt);if(Z(dt))try{yield dt}catch(Je){throw this.handleError(Je)}}if(this.prepareVisitors(),this.hasListener){let Ve=this.result.root;for(;!Ve[w];){Ve[w]=!0;let tt=[fe(Ve)];for(;tt.length>0;){let dt=this.visitTick(tt);if(Z(dt))try{yield dt}catch(Je){let we=tt[tt.length-1].node;throw this.handleError(Je,we)}}}if(this.listeners.OnceExit)for(let[tt,dt]of this.listeners.OnceExit){this.result.lastPlugin=tt;try{if(Ve.type==="document"){let Je=Ve.nodes.map(we=>dt(we,this.helpers));yield Promise.all(Je)}else yield dt(Ve,this.helpers)}catch(Je){throw this.handleError(Je)}}}return this.processed=!0,this.stringify()})}runOnRoot(Ve){this.result.lastPlugin=Ve;try{if(typeof Ve=="object"&&Ve.Once){if(this.result.root.type==="document"){let tt=this.result.root.nodes.map(dt=>Ve.Once(dt,this.helpers));return Z(tt[0])?Promise.all(tt):tt}return Ve.Once(this.result.root,this.helpers)}else if(typeof Ve=="function")return Ve(this.result.root,this.result)}catch(tt){throw this.handleError(tt)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let Ve=this.result.opts,tt=_;Ve.syntax&&(tt=Ve.syntax.stringify),Ve.stringifier&&(tt=Ve.stringifier),tt.stringify&&(tt=tt.stringify);let Je=new e(tt,this.result.root,this.result.opts).generate();return this.result.css=Je[0],this.result.map=Je[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let Ve of this.plugins){let tt=this.runOnRoot(Ve);if(Z(tt))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let Ve=this.result.root;for(;!Ve[w];)Ve[w]=!0,this.walkSync(Ve);if(this.listeners.OnceExit)if(Ve.type==="document")for(let tt of Ve.nodes)this.visitSync(this.listeners.OnceExit,tt);else this.visitSync(this.listeners.OnceExit,Ve)}return this.result}then(Ve,tt){return process.env.NODE_ENV!=="production"&&("from"in this.opts||T("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(Ve,tt)}toString(){return this.css}visitSync(Ve,tt){for(let[dt,Je]of Ve){this.result.lastPlugin=dt;let we;try{we=Je(tt,this.helpers)}catch(Ge){throw this.handleError(Ge,tt.proxyOf)}if(tt.type!=="root"&&tt.type!=="document"&&!tt.parent)return!0;if(Z(we))throw this.getAsyncError()}}visitTick(Ve){let tt=Ve[Ve.length-1],{node:dt,visitors:Je}=tt;if(dt.type!=="root"&&dt.type!=="document"&&!dt.parent){Ve.pop();return}if(Je.length>0&&tt.visitorIndex<Je.length){let[Ge,yt]=Je[tt.visitorIndex];tt.visitorIndex+=1,tt.visitorIndex===Je.length&&(tt.visitors=[],tt.visitorIndex=0),this.result.lastPlugin=Ge;try{return yt(dt.toProxy(),this.helpers)}catch(le){throw this.handleError(le,dt)}}if(tt.iterator!==0){let Ge=tt.iterator,yt;for(;yt=dt.nodes[dt.indexes[Ge]];)if(dt.indexes[Ge]+=1,!yt[w]){yt[w]=!0,Ve.push(fe(yt));return}tt.iterator=0,delete dt.indexes[Ge]}let we=tt.events;for(;tt.eventIndex<we.length;){let Ge=we[tt.eventIndex];if(tt.eventIndex+=1,Ge===H){dt.nodes&&dt.nodes.length&&(dt[w]=!0,tt.iterator=dt.getIterator());return}else if(this.listeners[Ge]){tt.visitors=this.listeners[Ge];return}}Ve.pop()}walkSync(Ve){Ve[w]=!0;let tt=X(Ve);for(let dt of tt)if(dt===H)Ve.nodes&&Ve.each(Je=>{Je[w]||this.walkSync(Je)});else{let Je=this.listeners[dt];if(Je&&this.visitSync(Je,Ve.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}}return de.registerPostcss=oe=>{ne=oe},de})();return P1=re,re.default=re,s.registerLazyResult(re),t.registerLazyResult(re),P1}var k1,CM;function G6(){if(CM)return k1;CM=1;let i=cI(),t=ux(),e=dx(),o=X0(),a=dI();class s{constructor(w,C,T){C=C.toString(),this.stringified=!1,this._processor=w,this._css=C,this._opts=T,this._map=void 0;let I,P=o;this.result=new e(this._processor,I,this._opts),this.result.css=C;let R=this;Object.defineProperty(this.result,"root",{get(){return R.root}});let H=new i(P,I,this._opts,C);if(H.isMap()){let[Z,X]=H.generate();Z&&(this.result.css=Z),X&&(this.result.map=X)}else H.clearAnnotation(),this.result.css=H.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(w){return this.async().catch(w)}finally(w){return this.async().then(w,w)}sync(){if(this.error)throw this.error;return this.result}then(w,C){return process.env.NODE_ENV!=="production"&&("from"in this._opts||a("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(w,C)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let w,C=t;try{w=C(this._css,this._opts)}catch(T){this.error=T}if(this.error)throw this.error;return this._root=w,w}get[Symbol.toStringTag](){return"NoWorkResult"}}return k1=s,s.default=s,k1}var A1,EM;function W6(){if(EM)return A1;EM=1;let i=lx(),t=hI(),e=G6(),o=mm();class a{constructor(_=[]){this.version="8.4.49",this.plugins=this.normalize(_)}normalize(_){let w=[];for(let C of _)if(C.postcss===!0?C=C():C.postcss&&(C=C.postcss),typeof C=="object"&&Array.isArray(C.plugins))w=w.concat(C.plugins);else if(typeof C=="object"&&C.postcssPlugin)w.push(C);else if(typeof C=="function")w.push(C);else if(typeof C=="object"&&(C.parse||C.stringify)){if(process.env.NODE_ENV!=="production")throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}else throw new Error(C+" is not a PostCSS plugin");return w}process(_,w={}){return!this.plugins.length&&!w.parser&&!w.stringifier&&!w.syntax?new e(this,_,w):new t(this,_,w)}use(_){return this.plugins=this.plugins.concat(this.normalize([_])),this}}return A1=a,a.default=a,o.registerProcessor(a),i.registerProcessor(a),A1}var D1,SM;function Z6(){if(SM)return D1;SM=1;let i=ax(),t=K0(),e=fd(),o=ox(),a=Q0(),s=lx(),_=q6(),w=J0(),C=hI(),T=lI(),I=Y0(),P=ux(),R=W6(),H=dx(),Z=mm(),X=cx(),fe=X0(),ae=uI();function ne(...re){return re.length===1&&Array.isArray(re[0])&&(re=re[0]),new R(re)}return ne.plugin=function(de,oe){let Ve=!1;function tt(...Je){console&&console.warn&&!Ve&&(Ve=!0,console.warn(de+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(de+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let we=oe(...Je);return we.postcssPlugin=de,we.postcssVersion=new R().version,we}let dt;return Object.defineProperty(tt,"postcss",{get(){return dt||(dt=tt()),dt}}),tt.process=function(Je,we,Ge){return ne([tt(Ge)]).process(Je,we)},tt},ne.stringify=fe,ne.parse=P,ne.fromJSON=_,ne.list=T,ne.comment=re=>new t(re),ne.atRule=re=>new i(re),ne.decl=re=>new a(re),ne.rule=re=>new X(re),ne.root=re=>new Z(re),ne.document=re=>new s(re),ne.CssSyntaxError=o,ne.Declaration=a,ne.Container=e,ne.Processor=R,ne.Document=s,ne.Comment=t,ne.Warning=ae,ne.AtRule=i,ne.Result=H,ne.Input=w,ne.Rule=X,ne.Root=Z,ne.Node=I,C.registerPostcss(ne),D1=ne,ne.default=ne,D1}var X6=Z6(),Xr=Z0(X6),Y6=Xr.stringify;Xr.fromJSON;Xr.plugin;var K6=Xr.parse;Xr.list;Xr.document;Xr.comment;Xr.atRule;Xr.rule;Xr.decl;Xr.root;Xr.CssSyntaxError;Xr.Declaration;Xr.Container;Xr.Processor;Xr.Document;Xr.Comment;Xr.Warning;Xr.AtRule;Xr.Result;Xr.Input;Xr.Rule;Xr.Root;Xr.Node;var R0={},O0={},L0={},TM;function pI(){if(TM)return L0;TM=1,Object.defineProperty(L0,"__esModule",{value:!0});function i(t){this.after=t.after,this.before=t.before,this.type=t.type,this.value=t.value,this.sourceIndex=t.sourceIndex}return L0.default=i,L0}var MM;function fI(){if(MM)return O0;MM=1,Object.defineProperty(O0,"__esModule",{value:!0});var i=pI(),t=e(i);function e(a){return a&&a.__esModule?a:{default:a}}function o(a){var s=this;this.constructor(a),this.nodes=a.nodes,this.after===void 0&&(this.after=this.nodes.length>0?this.nodes[this.nodes.length-1].after:""),this.before===void 0&&(this.before=this.nodes.length>0?this.nodes[0].before:""),this.sourceIndex===void 0&&(this.sourceIndex=this.before.length),this.nodes.forEach(function(_){_.parent=s})}return o.prototype=Object.create(t.default.prototype),o.constructor=t.default,o.prototype.walk=function(s,_){for(var w=typeof s=="string"||s instanceof RegExp,C=w?_:s,T=typeof s=="string"?new RegExp(s):s,I=0;I<this.nodes.length;I++){var P=this.nodes[I],R=w?T.test(P.type):!0;if(R&&C&&C(P,I,this.nodes)===!1||P.nodes&&P.walk(s,_)===!1)return!1}return!0},o.prototype.each=function(){for(var s=arguments.length<=0||arguments[0]===void 0?function(){}:arguments[0],_=0;_<this.nodes.length;_++){var w=this.nodes[_];if(s(w,_,this.nodes)===!1)return!1}return!0},O0.default=o,O0}var jh={},IM;function Q6(){if(IM)return jh;IM=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.parseMediaFeature=s,jh.parseMediaQuery=_,jh.parseMediaList=w;var i=pI(),t=a(i),e=fI(),o=a(e);function a(C){return C&&C.__esModule?C:{default:C}}function s(C){var T=arguments.length<=1||arguments[1]===void 0?0:arguments[1],I=[{mode:"normal",character:null}],P=[],R=0,H="",Z=null,X=null,fe=T,ae=C;C[0]==="("&&C[C.length-1]===")"&&(ae=C.substring(1,C.length-1),fe++);for(var ne=0;ne<ae.length;ne++){var re=ae[ne];if((re==="'"||re==='"')&&(I[R].isCalculationEnabled===!0?(I.push({mode:"string",isCalculationEnabled:!1,character:re}),R++):I[R].mode==="string"&&I[R].character===re&&ae[ne-1]!=="\\"&&(I.pop(),R--)),re==="{"?(I.push({mode:"interpolation",isCalculationEnabled:!0}),R++):re==="}"&&(I.pop(),R--),I[R].mode==="normal"&&re===":"){var de=ae.substring(ne+1);X={type:"value",before:/^(\s*)/.exec(de)[1],after:/(\s*)$/.exec(de)[1],value:de.trim()},X.sourceIndex=X.before.length+ne+1+fe,Z={type:"colon",sourceIndex:ne+fe,after:X.before,value:":"};break}H+=re}return H={type:"media-feature",before:/^(\s*)/.exec(H)[1],after:/(\s*)$/.exec(H)[1],value:H.trim()},H.sourceIndex=H.before.length+fe,P.push(H),Z!==null&&(Z.before=H.after,P.push(Z)),X!==null&&P.push(X),P}function _(C){var T=arguments.length<=1||arguments[1]===void 0?0:arguments[1],I=[],P=0,R=!1,H=void 0;function Z(){return{before:"",after:"",value:""}}H=Z();for(var X=0;X<C.length;X++){var fe=C[X];R?(H.value+=fe,(fe==="{"||fe==="(")&&P++,(fe===")"||fe==="}")&&P--):fe.search(/\s/)!==-1?H.before+=fe:(fe==="("&&(H.type="media-feature-expression",P++),H.value=fe,H.sourceIndex=T+X,R=!0),R&&P===0&&(fe===")"||X===C.length-1||C[X+1].search(/\s/)!==-1)&&(["not","only","and"].indexOf(H.value)!==-1&&(H.type="keyword"),H.type==="media-feature-expression"&&(H.nodes=s(H.value,H.sourceIndex)),I.push(Array.isArray(H.nodes)?new o.default(H):new t.default(H)),H=Z(),R=!1)}for(var ae=0;ae<I.length;ae++)if(H=I[ae],ae>0&&(I[ae-1].after=H.before),H.type===void 0){if(ae>0){if(I[ae-1].type==="media-feature-expression"){H.type="keyword";continue}if(I[ae-1].value==="not"||I[ae-1].value==="only"){H.type="media-type";continue}if(I[ae-1].value==="and"){H.type="media-feature-expression";continue}I[ae-1].type==="media-type"&&(I[ae+1]?H.type=I[ae+1].type==="media-feature-expression"?"keyword":"media-feature-expression":H.type="media-feature-expression")}if(ae===0){if(!I[ae+1]){H.type="media-type";continue}if(I[ae+1]&&(I[ae+1].type==="media-feature-expression"||I[ae+1].type==="keyword")){H.type="media-type";continue}if(I[ae+2]){if(I[ae+2].type==="media-feature-expression"){H.type="media-type",I[ae+1].type="keyword";continue}if(I[ae+2].type==="keyword"){H.type="keyword",I[ae+1].type="media-type";continue}}if(I[ae+3]&&I[ae+3].type==="media-feature-expression"){H.type="keyword",I[ae+1].type="media-type",I[ae+2].type="keyword";continue}}}return I}function w(C){var T=[],I=0,P=0,R=/^(\s*)url\s*\(/.exec(C);if(R!==null){for(var H=R[0].length,Z=1;Z>0;){var X=C[H];X==="("&&Z++,X===")"&&Z--,H++}T.unshift(new t.default({type:"url",value:C.substring(0,H).trim(),sourceIndex:R[1].length,before:R[1],after:/^(\s*)/.exec(C.substring(H))[1]})),I=H}for(var fe=I;fe<C.length;fe++){var ae=C[fe];if(ae==="("&&P++,ae===")"&&P--,P===0&&ae===","){var ne=C.substring(I,fe),re=/^(\s*)/.exec(ne)[1];T.push(new o.default({type:"media-query",value:ne.trim(),sourceIndex:I+re.length,nodes:_(ne,I),before:re,after:/(\s*)$/.exec(ne)[1]})),I=fe+1}}var de=C.substring(I),oe=/^(\s*)/.exec(de)[1];return T.push(new o.default({type:"media-query",value:de.trim(),sourceIndex:I+oe.length,nodes:_(de,I),before:oe,after:/(\s*)$/.exec(de)[1]})),T}return jh}var PM;function J6(){if(PM)return R0;PM=1,Object.defineProperty(R0,"__esModule",{value:!0}),R0.default=a;var i=fI(),t=o(i),e=Q6();function o(s){return s&&s.__esModule?s:{default:s}}function a(s){return new t.default({nodes:(0,e.parseMediaList)(s),type:"media-query-list",value:s.trim()})}return R0}var eO=J6(),R1=Z0(eO),wr=function(i){return i.Root="root",i.Text="text",i.Directive="directive",i.Comment="comment",i.Script="script",i.Style="style",i.Tag="tag",i.CDATA="cdata",i.Doctype="doctype",i}(wr||{});function tO(i){return i.type===wr.Tag||i.type===wr.Script||i.type===wr.Style}var iO=wr.Root,rO=wr.Text,nO=wr.Directive,oO=wr.Comment,sO=wr.Script,aO=wr.Style,lO=wr.Tag,cO=wr.CDATA,uO=wr.Doctype,B0=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(t){this.parent=t}get previousSibling(){return this.prev}set previousSibling(t){this.prev=t}get nextSibling(){return this.next}set nextSibling(t){this.next=t}cloneNode(t=!1){return gI(this,t)}},hm=class extends B0{constructor(t){super(),this.data=t}get nodeValue(){return this.data}set nodeValue(t){this.data=t}},dd=class extends hm{constructor(){super(...arguments),this.type=wr.Text}get nodeType(){return 3}},V0=class extends hm{constructor(){super(...arguments),this.type=wr.Comment}get nodeType(){return 8}},U0=class extends hm{constructor(t,e){super(e),this.name=t,this.type=wr.Directive}get nodeType(){return 1}},pm=class extends B0{constructor(t){super(),this.children=t}get firstChild(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(t){this.children=t}},j0=class extends pm{constructor(){super(...arguments),this.type=wr.CDATA}get nodeType(){return 4}},fm=class extends pm{constructor(){super(...arguments),this.type=wr.Root}get nodeType(){return 9}},$h=class extends pm{constructor(t,e,o=[],a=t==="script"?wr.Script:t==="style"?wr.Style:wr.Tag){super(o),this.name=t,this.attribs=e,this.type=a}get nodeType(){return 1}get tagName(){return this.name}set tagName(t){this.name=t}get attributes(){return Object.keys(this.attribs).map(t=>{var e,o;return{name:t,value:this.attribs[t],namespace:(e=this["x-attribsNamespace"])===null||e===void 0?void 0:e[t],prefix:(o=this["x-attribsPrefix"])===null||o===void 0?void 0:o[t]}})}};function Vs(i){return tO(i)}function e_(i){return i.type===wr.CDATA}function hd(i){return i.type===wr.Text}function hx(i){return i.type===wr.Comment}function dO(i){return i.type===wr.Directive}function mI(i){return i.type===wr.Root}function cu(i){return Object.prototype.hasOwnProperty.call(i,"children")}function gI(i,t=!1){let e;if(hd(i))e=new dd(i.data);else if(hx(i))e=new V0(i.data);else if(Vs(i)){let o=t?O1(i.children):[],a=new $h(i.name,gt({},i.attribs),o);o.forEach(s=>s.parent=a),i.namespace!=null&&(a.namespace=i.namespace),i["x-attribsNamespace"]&&(a["x-attribsNamespace"]=gt({},i["x-attribsNamespace"])),i["x-attribsPrefix"]&&(a["x-attribsPrefix"]=gt({},i["x-attribsPrefix"])),e=a}else if(e_(i)){let o=t?O1(i.children):[],a=new j0(o);o.forEach(s=>s.parent=a),e=a}else if(mI(i)){let o=t?O1(i.children):[],a=new fm(o);o.forEach(s=>s.parent=a),i["x-mode"]&&(a["x-mode"]=i["x-mode"]),e=a}else if(dO(i)){let o=new U0(i.name,i.data);i["x-name"]!=null&&(o["x-name"]=i["x-name"],o["x-publicId"]=i["x-publicId"],o["x-systemId"]=i["x-systemId"]),e=o}else throw new Error(`Not implemented yet: ${i.type}`);return e.startIndex=i.startIndex,e.endIndex=i.endIndex,i.sourceCodeLocation!=null&&(e.sourceCodeLocation=i.sourceCodeLocation),e}function O1(i){let t=i.map(e=>gI(e,!0));for(let e=1;e<t.length;e++)t[e].prev=t[e-1],t[e-1].next=t[e];return t}var kM={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},H1=class{constructor(t,e,o){this.dom=[],this.root=new fm(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof e=="function"&&(o=e,e=kM),typeof t=="object"&&(e=t,t=void 0),this.callback=t??null,this.options=e??kM,this.elementCB=o??null}onparserinit(t){this.parser=t}onreset(){this.dom=[],this.root=new fm(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(t){this.handleCallback(t)}onclosetag(){this.lastNode=null;let t=this.tagStack.pop();this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(t)}onopentag(t,e){let o=this.options.xmlMode?wr.Tag:void 0,a=new $h(t,e,void 0,o);this.addNode(a),this.tagStack.push(a)}ontext(t){let{lastNode:e}=this;if(e&&e.type===wr.Text)e.data+=t,this.options.withEndIndices&&(e.endIndex=this.parser.endIndex);else{let o=new dd(t);this.addNode(o),this.lastNode=o}}oncomment(t){if(this.lastNode&&this.lastNode.type===wr.Comment){this.lastNode.data+=t;return}let e=new V0(t);this.addNode(e),this.lastNode=e}oncommentend(){this.lastNode=null}oncdatastart(){let t=new dd(""),e=new j0([t]);this.addNode(e),t.parent=e,this.lastNode=t}oncdataend(){this.lastNode=null}onprocessinginstruction(t,e){let o=new U0(t,e);this.addNode(o)}handleCallback(t){if(typeof this.callback=="function")this.callback(t,this.dom);else if(t)throw t}addNode(t){let e=this.tagStack[this.tagStack.length-1],o=e.children[e.children.length-1];this.options.withStartIndices&&(t.startIndex=this.parser.startIndex),this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),e.children.push(t),o&&(t.prev=o,o.next=t),t.parent=e,this.lastNode=null}},hO=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(i=>i.charCodeAt(0))),pO=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(i=>i.charCodeAt(0))),L1,fO=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),AM=(L1=String.fromCodePoint)!==null&&L1!==void 0?L1:function(i){let t="";return i>65535&&(i-=65536,t+=String.fromCharCode(i>>>10&1023|55296),i=56320|i&1023),t+=String.fromCharCode(i),t};function mO(i){var t;return i>=55296&&i<=57343||i>1114111?65533:(t=fO.get(i))!==null&&t!==void 0?t:i}var To=function(i){return i[i.NUM=35]="NUM",i[i.SEMI=59]="SEMI",i[i.EQUALS=61]="EQUALS",i[i.ZERO=48]="ZERO",i[i.NINE=57]="NINE",i[i.LOWER_A=97]="LOWER_A",i[i.LOWER_F=102]="LOWER_F",i[i.LOWER_X=120]="LOWER_X",i[i.LOWER_Z=122]="LOWER_Z",i[i.UPPER_A=65]="UPPER_A",i[i.UPPER_F=70]="UPPER_F",i[i.UPPER_Z=90]="UPPER_Z",i}(To||{}),gO=32,cd=function(i){return i[i.VALUE_LENGTH=49152]="VALUE_LENGTH",i[i.BRANCH_LENGTH=16256]="BRANCH_LENGTH",i[i.JUMP_TABLE=127]="JUMP_TABLE",i}(cd||{});function $1(i){return i>=To.ZERO&&i<=To.NINE}function _O(i){return i>=To.UPPER_A&&i<=To.UPPER_F||i>=To.LOWER_A&&i<=To.LOWER_F}function bO(i){return i>=To.UPPER_A&&i<=To.UPPER_Z||i>=To.LOWER_A&&i<=To.LOWER_Z||$1(i)}function vO(i){return i===To.EQUALS||bO(i)}var So=function(i){return i[i.EntityStart=0]="EntityStart",i[i.NumericStart=1]="NumericStart",i[i.NumericDecimal=2]="NumericDecimal",i[i.NumericHex=3]="NumericHex",i[i.NamedEntity=4]="NamedEntity",i}(So||{}),sc=function(i){return i[i.Legacy=0]="Legacy",i[i.Strict=1]="Strict",i[i.Attribute=2]="Attribute",i}(sc||{}),G1=class{constructor(t,e,o){this.decodeTree=t,this.emitCodePoint=e,this.errors=o,this.state=So.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=sc.Strict}startEntity(t){this.decodeMode=t,this.state=So.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,e){switch(this.state){case So.EntityStart:return t.charCodeAt(e)===To.NUM?(this.state=So.NumericStart,this.consumed+=1,this.stateNumericStart(t,e+1)):(this.state=So.NamedEntity,this.stateNamedEntity(t,e));case So.NumericStart:return this.stateNumericStart(t,e);case So.NumericDecimal:return this.stateNumericDecimal(t,e);case So.NumericHex:return this.stateNumericHex(t,e);case So.NamedEntity:return this.stateNamedEntity(t,e)}}stateNumericStart(t,e){return e>=t.length?-1:(t.charCodeAt(e)|gO)===To.LOWER_X?(this.state=So.NumericHex,this.consumed+=1,this.stateNumericHex(t,e+1)):(this.state=So.NumericDecimal,this.stateNumericDecimal(t,e))}addToNumericResult(t,e,o,a){if(e!==o){let s=o-e;this.result=this.result*Math.pow(a,s)+parseInt(t.substr(e,s),a),this.consumed+=s}}stateNumericHex(t,e){let o=e;for(;e<t.length;){let a=t.charCodeAt(e);if($1(a)||_O(a))e+=1;else return this.addToNumericResult(t,o,e,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,o,e,16),-1}stateNumericDecimal(t,e){let o=e;for(;e<t.length;){let a=t.charCodeAt(e);if($1(a))e+=1;else return this.addToNumericResult(t,o,e,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,o,e,10),-1}emitNumericEntity(t,e){var o;if(this.consumed<=e)return(o=this.errors)===null||o===void 0||o.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===To.SEMI)this.consumed+=1;else if(this.decodeMode===sc.Strict)return 0;return this.emitCodePoint(mO(this.result),this.consumed),this.errors&&(t!==To.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,e){let{decodeTree:o}=this,a=o[this.treeIndex],s=(a&cd.VALUE_LENGTH)>>14;for(;e<t.length;e++,this.excess++){let _=t.charCodeAt(e);if(this.treeIndex=yO(o,a,this.treeIndex+Math.max(1,s),_),this.treeIndex<0)return this.result===0||this.decodeMode===sc.Attribute&&(s===0||vO(_))?0:this.emitNotTerminatedNamedEntity();if(a=o[this.treeIndex],s=(a&cd.VALUE_LENGTH)>>14,s!==0){if(_===To.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==sc.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;let{result:e,decodeTree:o}=this,a=(o[e]&cd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(e,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,e,o){let{decodeTree:a}=this;return this.emitCodePoint(e===1?a[t]&~cd.VALUE_LENGTH:a[t+1],o),e===3&&this.emitCodePoint(a[t+2],o),o}end(){var t;switch(this.state){case So.NamedEntity:return this.result!==0&&(this.decodeMode!==sc.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case So.NumericDecimal:return this.emitNumericEntity(0,2);case So.NumericHex:return this.emitNumericEntity(0,3);case So.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case So.EntityStart:return 0}}};function yO(i,t,e,o){let a=(t&cd.BRANCH_LENGTH)>>7,s=t&cd.JUMP_TABLE;if(a===0)return s!==0&&o===s?e:-1;if(s){let C=o-s;return C<0||C>=a?-1:i[e+C]-1}let _=e,w=_+a-1;for(;_<=w;){let C=_+w>>>1,T=i[C];if(T<o)_=C+1;else if(T>o)w=C-1;else return i[C+a]}return-1}var DM=/["&'<>$\x80-\uFFFF]/g,xO=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),wO=String.prototype.codePointAt!=null?(i,t)=>i.codePointAt(t):(i,t)=>(i.charCodeAt(t)&64512)===55296?(i.charCodeAt(t)-55296)*1024+i.charCodeAt(t+1)-56320+65536:i.charCodeAt(t);function _I(i){let t="",e=0,o;for(;(o=DM.exec(i))!==null;){let a=o.index,s=i.charCodeAt(a),_=xO.get(s);_!==void 0?(t+=i.substring(e,a)+_,e=a+1):(t+=`${i.substring(e,a)}&#x${wO(i,a).toString(16)};`,e=DM.lastIndex+=+((s&64512)===55296))}return t+i.substr(e)}function bI(i,t){return function(o){let a,s=0,_="";for(;a=i.exec(o);)s!==a.index&&(_+=o.substring(s,a.index)),_+=t.get(a[0].charCodeAt(0)),s=a.index+1;return _+o.substring(s)}}var CO=bI(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),EO=bI(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]));var SO=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(i=>[i.toLowerCase(),i])),TO=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(i=>[i.toLowerCase(),i])),MO=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function IO(i){return i.replace(/"/g,"&quot;")}function PO(i,t){var e;if(!i)return;let o=((e=t.encodeEntities)!==null&&e!==void 0?e:t.decodeEntities)===!1?IO:t.xmlMode||t.encodeEntities!=="utf8"?_I:CO;return Object.keys(i).map(a=>{var s,_;let w=(s=i[a])!==null&&s!==void 0?s:"";return t.xmlMode==="foreign"&&(a=(_=TO.get(a))!==null&&_!==void 0?_:a),!t.emptyAttrs&&!t.xmlMode&&w===""?a:`${a}="${o(w)}"`}).join(" ")}var RM=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function t_(i,t={}){let e="length"in i?i:[i],o="";for(let a=0;a<e.length;a++)o+=kO(e[a],t);return o}function kO(i,t){switch(i.type){case iO:return t_(i.children,t);case uO:case nO:return OO(i);case oO:return FO(i);case cO:return NO(i);case sO:case aO:case lO:return RO(i,t);case rO:return LO(i,t)}}var AO=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),DO=new Set(["svg","math"]);function RO(i,t){var e;t.xmlMode==="foreign"&&(i.name=(e=SO.get(i.name))!==null&&e!==void 0?e:i.name,i.parent&&AO.has(i.parent.name)&&(t=ui(gt({},t),{xmlMode:!1}))),!t.xmlMode&&DO.has(i.name)&&(t=ui(gt({},t),{xmlMode:"foreign"}));let o=`<${i.name}`,a=PO(i.attribs,t);return a&&(o+=` ${a}`),i.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&RM.has(i.name))?(t.xmlMode||(o+=" "),o+="/>"):(o+=">",i.children.length>0&&(o+=t_(i.children,t)),(t.xmlMode||!RM.has(i.name))&&(o+=`</${i.name}>`)),o}function OO(i){return`<${i.data}>`}function LO(i,t){var e;let o=i.data||"";return((e=t.encodeEntities)!==null&&e!==void 0?e:t.decodeEntities)!==!1&&!(!t.xmlMode&&i.parent&&MO.has(i.parent.name))&&(o=t.xmlMode||t.encodeEntities!=="utf8"?_I(o):EO(o)),o}function NO(i){return`<![CDATA[${i.children[0].data}]]>`}function FO(i){return`<!--${i.data}-->`}function vI(i,t){return t_(i,t)}function zO(i,t){return cu(i)?i.children.map(e=>vI(e,t)).join(""):""}function um(i){return Array.isArray(i)?i.map(um).join(""):Vs(i)?i.name==="br"?`
`:um(i.children):e_(i)?um(i.children):hd(i)?i.data:""}function q0(i){return Array.isArray(i)?i.map(q0).join(""):cu(i)&&!hx(i)?q0(i.children):hd(i)?i.data:""}function W1(i){return Array.isArray(i)?i.map(W1).join(""):cu(i)&&(i.type===wr.Tag||e_(i))?W1(i.children):hd(i)?i.data:""}function yI(i){return cu(i)?i.children:[]}function xI(i){return i.parent||null}function BO(i){let t=xI(i);if(t!=null)return yI(t);let e=[i],{prev:o,next:a}=i;for(;o!=null;)e.unshift(o),{prev:o}=o;for(;a!=null;)e.push(a),{next:a}=a;return e}function VO(i,t){var e;return(e=i.attribs)===null||e===void 0?void 0:e[t]}function UO(i,t){return i.attribs!=null&&Object.prototype.hasOwnProperty.call(i.attribs,t)&&i.attribs[t]!=null}function jO(i){return i.name}function qO(i){let{next:t}=i;for(;t!==null&&!Vs(t);)({next:t}=t);return t}function HO(i){let{prev:t}=i;for(;t!==null&&!Vs(t);)({prev:t}=t);return t}function pd(i){if(i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),i.parent){let t=i.parent.children,e=t.lastIndexOf(i);e>=0&&t.splice(e,1)}i.next=null,i.prev=null,i.parent=null}function $O(i,t){let e=t.prev=i.prev;e&&(e.next=t);let o=t.next=i.next;o&&(o.prev=t);let a=t.parent=i.parent;if(a){let s=a.children;s[s.lastIndexOf(i)]=t,i.parent=null}}function Z1(i,t){if(pd(t),t.next=null,t.parent=i,i.children.push(t)>1){let e=i.children[i.children.length-2];e.next=t,t.prev=e}else t.prev=null}function GO(i,t){pd(t);let{parent:e}=i,o=i.next;if(t.next=o,t.prev=i,i.next=t,t.parent=e,o){if(o.prev=t,e){let a=e.children;a.splice(a.lastIndexOf(o),0,t)}}else e&&e.children.push(t)}function WO(i,t){if(pd(t),t.parent=i,t.prev=null,i.children.unshift(t)!==1){let e=i.children[1];e.prev=t,t.next=e}else t.next=null}function wI(i,t){pd(t);let{parent:e}=i;if(e){let o=e.children;o.splice(o.indexOf(i),0,t)}i.prev&&(i.prev.next=t),t.parent=e,t.prev=i.prev,t.next=i,i.prev=t}function i_(i,t,e=!0,o=1/0){return CI(i,Array.isArray(t)?t:[t],e,o)}function CI(i,t,e,o){let a=[],s=[t],_=[0];for(;;){if(_[0]>=s[0].length){if(_.length===1)return a;s.shift(),_.shift();continue}let w=s[0][_[0]++];if(i(w)&&(a.push(w),--o<=0))return a;e&&cu(w)&&w.children.length>0&&(_.unshift(0),s.unshift(w.children))}}function ZO(i,t){return t.find(i)}function px(i,t,e=!0){let o=null;for(let a=0;a<t.length&&!o;a++){let s=t[a];if(Vs(s))i(s)?o=s:e&&s.children.length>0&&(o=px(i,s.children,!0));else continue}return o}function EI(i,t){return t.some(e=>Vs(e)&&(i(e)||EI(i,e.children)))}function XO(i,t){let e=[],o=[t],a=[0];for(;;){if(a[0]>=o[0].length){if(o.length===1)return e;o.shift(),a.shift();continue}let s=o[0][a[0]++];Vs(s)&&(i(s)&&e.push(s),s.children.length>0&&(a.unshift(0),o.unshift(s.children)))}}var H0={tag_name(i){return typeof i=="function"?t=>Vs(t)&&i(t.name):i==="*"?Vs:t=>Vs(t)&&t.name===i},tag_type(i){return typeof i=="function"?t=>i(t.type):t=>t.type===i},tag_contains(i){return typeof i=="function"?t=>hd(t)&&i(t.data):t=>hd(t)&&t.data===i}};function SI(i,t){return typeof t=="function"?e=>Vs(e)&&t(e.attribs[i]):e=>Vs(e)&&e.attribs[i]===t}function YO(i,t){return e=>i(e)||t(e)}function TI(i){let t=Object.keys(i).map(e=>{let o=i[e];return Object.prototype.hasOwnProperty.call(H0,e)?H0[e](o):SI(e,o)});return t.length===0?null:t.reduce(YO)}function KO(i,t){let e=TI(i);return e?e(t):!0}function QO(i,t,e,o=1/0){let a=TI(i);return a?i_(a,t,e,o):[]}function JO(i,t,e=!0){return Array.isArray(t)||(t=[t]),px(SI("id",i),t,e)}function Gh(i,t,e=!0,o=1/0){return i_(H0.tag_name(i),t,e,o)}function e4(i,t,e=!0,o=1/0){return i_(H0.tag_type(i),t,e,o)}function t4(i){let t=i.length;for(;--t>=0;){let e=i[t];if(t>0&&i.lastIndexOf(e,t-1)>=0){i.splice(t,1);continue}for(let o=e.parent;o;o=o.parent)if(i.includes(o)){i.splice(t,1);break}}return i}var Qa=function(i){return i[i.DISCONNECTED=1]="DISCONNECTED",i[i.PRECEDING=2]="PRECEDING",i[i.FOLLOWING=4]="FOLLOWING",i[i.CONTAINS=8]="CONTAINS",i[i.CONTAINED_BY=16]="CONTAINED_BY",i}(Qa||{});function MI(i,t){let e=[],o=[];if(i===t)return 0;let a=cu(i)?i:i.parent;for(;a;)e.unshift(a),a=a.parent;for(a=cu(t)?t:t.parent;a;)o.unshift(a),a=a.parent;let s=Math.min(e.length,o.length),_=0;for(;_<s&&e[_]===o[_];)_++;if(_===0)return Qa.DISCONNECTED;let w=e[_-1],C=w.children,T=e[_],I=o[_];return C.indexOf(T)>C.indexOf(I)?w===t?Qa.FOLLOWING|Qa.CONTAINED_BY:Qa.FOLLOWING:w===i?Qa.PRECEDING|Qa.CONTAINS:Qa.PRECEDING}function i4(i){return i=i.filter((t,e,o)=>!o.includes(t,e+1)),i.sort((t,e)=>{let o=MI(t,e);return o&Qa.PRECEDING?-1:o&Qa.FOLLOWING?1:0}),i}function r4(i){let t=$0(l4,i);return t?t.name==="feed"?n4(t):o4(t):null}function n4(i){var t;let e=i.children,o={type:"atom",items:Gh("entry",e).map(_=>{var w;let{children:C}=_,T={media:II(C)};bs(T,"id","id",C),bs(T,"title","title",C);let I=(w=$0("link",C))===null||w===void 0?void 0:w.attribs.href;I&&(T.link=I);let P=lu("summary",C)||lu("content",C);P&&(T.description=P);let R=lu("updated",C);return R&&(T.pubDate=new Date(R)),T})};bs(o,"id","id",e),bs(o,"title","title",e);let a=(t=$0("link",e))===null||t===void 0?void 0:t.attribs.href;a&&(o.link=a),bs(o,"description","subtitle",e);let s=lu("updated",e);return s&&(o.updated=new Date(s)),bs(o,"author","email",e,!0),o}function o4(i){var t,e;let o=(e=(t=$0("channel",i.children))===null||t===void 0?void 0:t.children)!==null&&e!==void 0?e:[],a={type:i.name.substr(0,3),id:"",items:Gh("item",i.children).map(_=>{let{children:w}=_,C={media:II(w)};bs(C,"id","guid",w),bs(C,"title","title",w),bs(C,"link","link",w),bs(C,"description","description",w);let T=lu("pubDate",w)||lu("dc:date",w);return T&&(C.pubDate=new Date(T)),C})};bs(a,"title","title",o),bs(a,"link","link",o),bs(a,"description","description",o);let s=lu("lastBuildDate",o);return s&&(a.updated=new Date(s)),bs(a,"author","managingEditor",o,!0),a}var s4=["url","type","lang"],a4=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function II(i){return Gh("media:content",i).map(t=>{let{attribs:e}=t,o={medium:e.medium,isDefault:!!e.isDefault};for(let a of s4)e[a]&&(o[a]=e[a]);for(let a of a4)e[a]&&(o[a]=parseInt(e[a],10));return e.expression&&(o.expression=e.expression),o})}function $0(i,t){return Gh(i,t,!0,1)[0]}function lu(i,t,e=!1){return q0(Gh(i,t,e,1)).trim()}function bs(i,t,e,o,a=!1){let s=lu(e,o,a);s&&(i[t]=s)}function l4(i){return i==="rss"||i==="feed"||i==="rdf:RDF"}var PI=Object.freeze({__proto__:null,get DocumentPosition(){return Qa},append:GO,appendChild:Z1,compareDocumentPosition:MI,existsOne:EI,filter:i_,find:CI,findAll:XO,findOne:px,findOneChild:ZO,getAttributeValue:VO,getChildren:yI,getElementById:JO,getElements:QO,getElementsByTagName:Gh,getElementsByTagType:e4,getFeed:r4,getInnerHTML:zO,getName:jO,getOuterHTML:vI,getParent:xI,getSiblings:BO,getText:um,hasAttrib:UO,hasChildren:cu,innerText:W1,isCDATA:e_,isComment:hx,isDocument:mI,isTag:Vs,isText:hd,nextElementSibling:qO,prepend:wI,prependChild:WO,prevElementSibling:HO,removeElement:pd,removeSubsets:t4,replaceElement:$O,testElement:KO,textContent:q0,uniqueSort:i4}),N1,OM;function c4(){return OM||(OM=1,N1={trueFunc:function(){return!0},falseFunc:function(){return!1}}),N1}var u4=c4(),Wi=Z0(u4),Ci=function(i){return i.Attribute="attribute",i.Pseudo="pseudo",i.PseudoElement="pseudo-element",i.Tag="tag",i.Universal="universal",i.Adjacent="adjacent",i.Child="child",i.Descendant="descendant",i.Parent="parent",i.Sibling="sibling",i.ColumnCombinator="column-combinator",i}(Ci||{}),oo=function(i){return i.Any="any",i.Element="element",i.End="end",i.Equals="equals",i.Exists="exists",i.Hyphen="hyphen",i.Not="not",i.Start="start",i}(oo||{}),LM=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,d4=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,h4=new Map([[126,oo.Element],[94,oo.Start],[36,oo.End],[42,oo.Any],[33,oo.Not],[124,oo.Hyphen]]),p4=new Set(["has","not","matches","is","where","host","host-context"]);function f4(i){switch(i.type){case Ci.Adjacent:case Ci.Child:case Ci.Descendant:case Ci.Parent:case Ci.Sibling:case Ci.ColumnCombinator:return!0;default:return!1}}var m4=new Set(["contains","icontains"]);function g4(i,t,e){let o=parseInt(t,16)-65536;return o!==o||e?t:o<0?String.fromCharCode(o+65536):String.fromCharCode(o>>10|55296,o&1023|56320)}function lm(i){return i.replace(d4,g4)}function F1(i){return i===39||i===34}function NM(i){return i===32||i===9||i===10||i===12||i===13}function fx(i){let t=[],e=kI(t,`${i}`,0);if(e<i.length)throw new Error(`Unmatched selector: ${i.slice(e)}`);return t}function kI(i,t,e){let o=[];function a(R){let H=t.slice(e+R).match(LM);if(!H)throw new Error(`Expected name, found ${t.slice(e)}`);let[Z]=H;return e+=R+Z.length,lm(Z)}function s(R){for(e+=R;e<t.length&&NM(t.charCodeAt(e));)e++}function _(){e+=1;let R=e,H=1;for(;H>0&&e<t.length;e++)t.charCodeAt(e)===40&&!w(e)?H++:t.charCodeAt(e)===41&&!w(e)&&H--;if(H)throw new Error("Parenthesis not matched");return lm(t.slice(R,e-1))}function w(R){let H=0;for(;t.charCodeAt(--R)===92;)H++;return(H&1)===1}function C(){if(o.length>0&&f4(o[o.length-1]))throw new Error("Did not expect successive traversals.")}function T(R){if(o.length>0&&o[o.length-1].type===Ci.Descendant){o[o.length-1].type=R;return}C(),o.push({type:R})}function I(R,H){o.push({type:Ci.Attribute,name:R,action:H,value:a(1),namespace:null,ignoreCase:"quirks"})}function P(){if(o.length&&o[o.length-1].type===Ci.Descendant&&o.pop(),o.length===0)throw new Error("Empty sub-selector");i.push(o)}if(s(0),t.length===e)return e;e:for(;e<t.length;){let R=t.charCodeAt(e);switch(R){case 32:case 9:case 10:case 12:case 13:{(o.length===0||o[0].type!==Ci.Descendant)&&(C(),o.push({type:Ci.Descendant})),s(1);break}case 62:{T(Ci.Child),s(1);break}case 60:{T(Ci.Parent),s(1);break}case 126:{T(Ci.Sibling),s(1);break}case 43:{T(Ci.Adjacent),s(1);break}case 46:{I("class",oo.Element);break}case 35:{I("id",oo.Equals);break}case 91:{s(1);let H,Z=null;t.charCodeAt(e)===124?H=a(1):t.startsWith("*|",e)?(Z="*",H=a(2)):(H=a(0),t.charCodeAt(e)===124&&t.charCodeAt(e+1)!==61&&(Z=H,H=a(1))),s(0);let X=oo.Exists,fe=h4.get(t.charCodeAt(e));if(fe){if(X=fe,t.charCodeAt(e+1)!==61)throw new Error("Expected `=`");s(2)}else t.charCodeAt(e)===61&&(X=oo.Equals,s(1));let ae="",ne=null;if(X!=="exists"){if(F1(t.charCodeAt(e))){let oe=t.charCodeAt(e),Ve=e+1;for(;Ve<t.length&&(t.charCodeAt(Ve)!==oe||w(Ve));)Ve+=1;if(t.charCodeAt(Ve)!==oe)throw new Error("Attribute value didn't end");ae=lm(t.slice(e+1,Ve)),e=Ve+1}else{let oe=e;for(;e<t.length&&(!NM(t.charCodeAt(e))&&t.charCodeAt(e)!==93||w(e));)e+=1;ae=lm(t.slice(oe,e))}s(0);let de=t.charCodeAt(e)|32;de===115?(ne=!1,s(1)):de===105&&(ne=!0,s(1))}if(t.charCodeAt(e)!==93)throw new Error("Attribute selector didn't terminate");e+=1;let re={type:Ci.Attribute,name:H,action:X,value:ae,namespace:Z,ignoreCase:ne};o.push(re);break}case 58:{if(t.charCodeAt(e+1)===58){o.push({type:Ci.PseudoElement,name:a(2).toLowerCase(),data:t.charCodeAt(e)===40?_():null});continue}let H=a(1).toLowerCase(),Z=null;if(t.charCodeAt(e)===40)if(p4.has(H)){if(F1(t.charCodeAt(e+1)))throw new Error(`Pseudo-selector ${H} cannot be quoted`);if(Z=[],e=kI(Z,t,e+1),t.charCodeAt(e)!==41)throw new Error(`Missing closing parenthesis in :${H} (${t})`);e+=1}else{if(Z=_(),m4.has(H)){let X=Z.charCodeAt(0);X===Z.charCodeAt(Z.length-1)&&F1(X)&&(Z=Z.slice(1,-1))}Z=lm(Z)}o.push({type:Ci.Pseudo,name:H,data:Z});break}case 44:{P(),o=[],s(1);break}default:{if(t.startsWith("/*",e)){let X=t.indexOf("*/",e+2);if(X<0)throw new Error("Comment was not terminated");e=X+2,o.length===0&&s(0);break}let H=null,Z;if(R===42)e+=1,Z="*";else if(R===124){if(Z="",t.charCodeAt(e+1)===124){T(Ci.ColumnCombinator),s(2);break}}else if(LM.test(t.slice(e)))Z=a(0);else break e;t.charCodeAt(e)===124&&t.charCodeAt(e+1)!==124&&(H=Z,t.charCodeAt(e+1)===42?(Z="*",e+=2):Z=a(1)),o.push(Z==="*"?{type:Ci.Universal,namespace:H}:{type:Ci.Tag,name:Z,namespace:H})}}}return P(),e}var _4=["\\",'"'],kj=[..._4,"(",")"],AI=new Map([[Ci.Universal,50],[Ci.Tag,30],[Ci.Attribute,1],[Ci.Pseudo,0]]);function mx(i){return!AI.has(i.type)}var b4=new Map([[oo.Exists,10],[oo.Equals,8],[oo.Not,7],[oo.Start,6],[oo.End,6],[oo.Any,5]]);function v4(i){let t=i.map(DI);for(let e=1;e<i.length;e++){let o=t[e];if(!(o<0))for(let a=e-1;a>=0&&o<t[a];a--){let s=i[a+1];i[a+1]=i[a],i[a]=s,t[a+1]=t[a],t[a]=o}}}function DI(i){var t,e;let o=(t=AI.get(i.type))!==null&&t!==void 0?t:-1;return i.type===Ci.Attribute?(o=(e=b4.get(i.action))!==null&&e!==void 0?e:4,i.action===oo.Equals&&i.name==="id"&&(o=9),i.ignoreCase&&(o>>=1)):i.type===Ci.Pseudo&&(i.data?i.name==="has"||i.name==="contains"?o=0:Array.isArray(i.data)?(o=Math.min(...i.data.map(a=>Math.min(...a.map(DI)))),o<0&&(o=0)):o=2:o=3),o}var y4=/[-[\]{}()*+?.,\\^$|#\s]/g;function FM(i){return i.replace(y4,"\\$&")}var x4=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function ld(i,t){return typeof i.ignoreCase=="boolean"?i.ignoreCase:i.ignoreCase==="quirks"?!!t.quirksMode:!t.xmlMode&&x4.has(i.name)}var w4={equals(i,t,e){let{adapter:o}=e,{name:a}=t,{value:s}=t;return ld(t,e)?(s=s.toLowerCase(),_=>{let w=o.getAttributeValue(_,a);return w!=null&&w.length===s.length&&w.toLowerCase()===s&&i(_)}):_=>o.getAttributeValue(_,a)===s&&i(_)},hyphen(i,t,e){let{adapter:o}=e,{name:a}=t,{value:s}=t,_=s.length;return ld(t,e)?(s=s.toLowerCase(),function(C){let T=o.getAttributeValue(C,a);return T!=null&&(T.length===_||T.charAt(_)==="-")&&T.substr(0,_).toLowerCase()===s&&i(C)}):function(C){let T=o.getAttributeValue(C,a);return T!=null&&(T.length===_||T.charAt(_)==="-")&&T.substr(0,_)===s&&i(C)}},element(i,t,e){let{adapter:o}=e,{name:a,value:s}=t;if(/\s/.test(s))return Wi.falseFunc;let _=new RegExp(`(?:^|\\s)${FM(s)}(?:$|\\s)`,ld(t,e)?"i":"");return function(C){let T=o.getAttributeValue(C,a);return T!=null&&T.length>=s.length&&_.test(T)&&i(C)}},exists(i,{name:t},{adapter:e}){return o=>e.hasAttrib(o,t)&&i(o)},start(i,t,e){let{adapter:o}=e,{name:a}=t,{value:s}=t,_=s.length;return _===0?Wi.falseFunc:ld(t,e)?(s=s.toLowerCase(),w=>{let C=o.getAttributeValue(w,a);return C!=null&&C.length>=_&&C.substr(0,_).toLowerCase()===s&&i(w)}):w=>{var C;return!!(!((C=o.getAttributeValue(w,a))===null||C===void 0)&&C.startsWith(s))&&i(w)}},end(i,t,e){let{adapter:o}=e,{name:a}=t,{value:s}=t,_=-s.length;return _===0?Wi.falseFunc:ld(t,e)?(s=s.toLowerCase(),w=>{var C;return((C=o.getAttributeValue(w,a))===null||C===void 0?void 0:C.substr(_).toLowerCase())===s&&i(w)}):w=>{var C;return!!(!((C=o.getAttributeValue(w,a))===null||C===void 0)&&C.endsWith(s))&&i(w)}},any(i,t,e){let{adapter:o}=e,{name:a,value:s}=t;if(s==="")return Wi.falseFunc;if(ld(t,e)){let _=new RegExp(FM(s),"i");return function(C){let T=o.getAttributeValue(C,a);return T!=null&&T.length>=s.length&&_.test(T)&&i(C)}}return _=>{var w;return!!(!((w=o.getAttributeValue(_,a))===null||w===void 0)&&w.includes(s))&&i(_)}},not(i,t,e){let{adapter:o}=e,{name:a}=t,{value:s}=t;return s===""?_=>!!o.getAttributeValue(_,a)&&i(_):ld(t,e)?(s=s.toLowerCase(),_=>{let w=o.getAttributeValue(_,a);return(w==null||w.length!==s.length||w.toLowerCase()!==s)&&i(_)}):_=>o.getAttributeValue(_,a)!==s&&i(_)}},C4=new Set([9,10,12,13,32]),zM=48,E4=57;function S4(i){if(i=i.trim().toLowerCase(),i==="even")return[2,0];if(i==="odd")return[2,1];let t=0,e=0,o=s(),a=_();if(t<i.length&&i.charAt(t)==="n"&&(t++,e=o*(a??1),w(),t<i.length?(o=s(),w(),a=_()):o=a=0),a===null||t<i.length)throw new Error(`n-th rule couldn't be parsed ('${i}')`);return[e,o*a];function s(){return i.charAt(t)==="-"?(t++,-1):(i.charAt(t)==="+"&&t++,1)}function _(){let C=t,T=0;for(;t<i.length&&i.charCodeAt(t)>=zM&&i.charCodeAt(t)<=E4;)T=T*10+(i.charCodeAt(t)-zM),t++;return t===C?null:T}function w(){for(;t<i.length&&C4.has(i.charCodeAt(t));)t++}}function T4(i){let t=i[0],e=i[1]-1;if(e<0&&t<=0)return Wi.falseFunc;if(t===-1)return s=>s<=e;if(t===0)return s=>s===e;if(t===1)return e<0?Wi.trueFunc:s=>s>=e;let o=Math.abs(t),a=(e%o+o)%o;return t>1?s=>s>=e&&s%o===a:s=>s<=e&&s%o===a}function N0(i){return T4(S4(i))}function F0(i,t){return e=>{let o=t.getParent(e);return o!=null&&t.isTag(o)&&i(e)}}var X1={contains(i,t,{adapter:e}){return function(a){return i(a)&&e.getText(a).includes(t)}},icontains(i,t,{adapter:e}){let o=t.toLowerCase();return function(s){return i(s)&&e.getText(s).toLowerCase().includes(o)}},"nth-child"(i,t,{adapter:e,equals:o}){let a=N0(t);return a===Wi.falseFunc?Wi.falseFunc:a===Wi.trueFunc?F0(i,e):function(_){let w=e.getSiblings(_),C=0;for(let T=0;T<w.length&&!o(_,w[T]);T++)e.isTag(w[T])&&C++;return a(C)&&i(_)}},"nth-last-child"(i,t,{adapter:e,equals:o}){let a=N0(t);return a===Wi.falseFunc?Wi.falseFunc:a===Wi.trueFunc?F0(i,e):function(_){let w=e.getSiblings(_),C=0;for(let T=w.length-1;T>=0&&!o(_,w[T]);T--)e.isTag(w[T])&&C++;return a(C)&&i(_)}},"nth-of-type"(i,t,{adapter:e,equals:o}){let a=N0(t);return a===Wi.falseFunc?Wi.falseFunc:a===Wi.trueFunc?F0(i,e):function(_){let w=e.getSiblings(_),C=0;for(let T=0;T<w.length;T++){let I=w[T];if(o(_,I))break;e.isTag(I)&&e.getName(I)===e.getName(_)&&C++}return a(C)&&i(_)}},"nth-last-of-type"(i,t,{adapter:e,equals:o}){let a=N0(t);return a===Wi.falseFunc?Wi.falseFunc:a===Wi.trueFunc?F0(i,e):function(_){let w=e.getSiblings(_),C=0;for(let T=w.length-1;T>=0;T--){let I=w[T];if(o(_,I))break;e.isTag(I)&&e.getName(I)===e.getName(_)&&C++}return a(C)&&i(_)}},root(i,t,{adapter:e}){return o=>{let a=e.getParent(o);return(a==null||!e.isTag(a))&&i(o)}},scope(i,t,e,o){let{equals:a}=e;return!o||o.length===0?X1.root(i,t,e):o.length===1?s=>a(o[0],s)&&i(s):s=>o.includes(s)&&i(s)},hover:z1("isHovered"),visited:z1("isVisited"),active:z1("isActive")};function z1(i){return function(e,o,{adapter:a}){let s=a[i];return typeof s!="function"?Wi.falseFunc:function(w){return s(w)&&e(w)}}}var BM={empty(i,{adapter:t}){return!t.getChildren(i).some(e=>t.isTag(e)||t.getText(e)!=="")},"first-child"(i,{adapter:t,equals:e}){if(t.prevElementSibling)return t.prevElementSibling(i)==null;let o=t.getSiblings(i).find(a=>t.isTag(a));return o!=null&&e(i,o)},"last-child"(i,{adapter:t,equals:e}){let o=t.getSiblings(i);for(let a=o.length-1;a>=0;a--){if(e(i,o[a]))return!0;if(t.isTag(o[a]))break}return!1},"first-of-type"(i,{adapter:t,equals:e}){let o=t.getSiblings(i),a=t.getName(i);for(let s=0;s<o.length;s++){let _=o[s];if(e(i,_))return!0;if(t.isTag(_)&&t.getName(_)===a)break}return!1},"last-of-type"(i,{adapter:t,equals:e}){let o=t.getSiblings(i),a=t.getName(i);for(let s=o.length-1;s>=0;s--){let _=o[s];if(e(i,_))return!0;if(t.isTag(_)&&t.getName(_)===a)break}return!1},"only-of-type"(i,{adapter:t,equals:e}){let o=t.getName(i);return t.getSiblings(i).every(a=>e(i,a)||!t.isTag(a)||t.getName(a)!==o)},"only-child"(i,{adapter:t,equals:e}){return t.getSiblings(i).every(o=>e(i,o)||!t.isTag(o))}};function VM(i,t,e,o){if(e===null){if(i.length>o)throw new Error(`Pseudo-class :${t} requires an argument`)}else if(i.length===o)throw new Error(`Pseudo-class :${t} doesn't have any arguments`)}var M4={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},RI={};function I4(i,t){return i===Wi.falseFunc?Wi.falseFunc:e=>t.isTag(e)&&i(e)}function OI(i,t){let e=t.getSiblings(i);if(e.length<=1)return[];let o=e.indexOf(i);return o<0||o===e.length-1?[]:e.slice(o+1).filter(t.isTag)}function Y1(i){return{xmlMode:!!i.xmlMode,lowerCaseAttributeNames:!!i.lowerCaseAttributeNames,lowerCaseTags:!!i.lowerCaseTags,quirksMode:!!i.quirksMode,cacheResults:!!i.cacheResults,pseudos:i.pseudos,adapter:i.adapter,equals:i.equals}}var B1=(i,t,e,o,a)=>{let s=a(t,Y1(e),o);return s===Wi.trueFunc?i:s===Wi.falseFunc?Wi.falseFunc:_=>s(_)&&i(_)},V1={is:B1,matches:B1,where:B1,not(i,t,e,o,a){let s=a(t,Y1(e),o);return s===Wi.falseFunc?i:s===Wi.trueFunc?Wi.falseFunc:_=>!s(_)&&i(_)},has(i,t,e,o,a){let{adapter:s}=e,_=Y1(e);_.relativeSelector=!0;let w=t.some(I=>I.some(mx))?[RI]:void 0,C=a(t,_,w);if(C===Wi.falseFunc)return Wi.falseFunc;let T=I4(C,s);if(w&&C!==Wi.trueFunc){let{shouldTestNextSiblings:I=!1}=C;return P=>{if(!i(P))return!1;w[0]=P;let R=s.getChildren(P),H=I?[...R,...OI(P,s)]:R;return s.existsOne(T,H)}}return I=>i(I)&&s.existsOne(T,s.getChildren(I))}};function P4(i,t,e,o,a){var s;let{name:_,data:w}=t;if(Array.isArray(w)){if(!(_ in V1))throw new Error(`Unknown pseudo-class :${_}(${w})`);return V1[_](i,w,e,o,a)}let C=(s=e.pseudos)===null||s===void 0?void 0:s[_],T=typeof C=="string"?C:M4[_];if(typeof T=="string"){if(w!=null)throw new Error(`Pseudo ${_} doesn't have any arguments`);let I=fx(T);return V1.is(i,I,e,o,a)}if(typeof C=="function")return VM(C,_,w,1),I=>C(I,w)&&i(I);if(_ in X1)return X1[_](i,w,e,o);if(_ in BM){let I=BM[_];return VM(I,_,w,2),P=>I(P,e,w)&&i(P)}throw new Error(`Unknown pseudo-class :${_}`)}function U1(i,t){let e=t.getParent(i);return e&&t.isTag(e)?e:null}function k4(i,t,e,o,a){let{adapter:s,equals:_}=e;switch(t.type){case Ci.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case Ci.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case Ci.Attribute:{if(t.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!e.xmlMode||e.lowerCaseAttributeNames)&&(t.name=t.name.toLowerCase()),w4[t.action](i,t,e)}case Ci.Pseudo:return P4(i,t,e,o,a);case Ci.Tag:{if(t.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:w}=t;return(!e.xmlMode||e.lowerCaseTags)&&(w=w.toLowerCase()),function(T){return s.getName(T)===w&&i(T)}}case Ci.Descendant:{if(e.cacheResults===!1||typeof WeakSet>"u")return function(T){let I=T;for(;I=U1(I,s);)if(i(I))return!0;return!1};let w=new WeakSet;return function(T){let I=T;for(;I=U1(I,s);)if(!w.has(I)){if(s.isTag(I)&&i(I))return!0;w.add(I)}return!1}}case"_flexibleDescendant":return function(C){let T=C;do if(i(T))return!0;while(T=U1(T,s));return!1};case Ci.Parent:return function(C){return s.getChildren(C).some(T=>s.isTag(T)&&i(T))};case Ci.Child:return function(C){let T=s.getParent(C);return T!=null&&s.isTag(T)&&i(T)};case Ci.Sibling:return function(C){let T=s.getSiblings(C);for(let I=0;I<T.length;I++){let P=T[I];if(_(C,P))break;if(s.isTag(P)&&i(P))return!0}return!1};case Ci.Adjacent:return s.prevElementSibling?function(C){let T=s.prevElementSibling(C);return T!=null&&i(T)}:function(C){let T=s.getSiblings(C),I;for(let P=0;P<T.length;P++){let R=T[P];if(_(C,R))break;s.isTag(R)&&(I=R)}return!!I&&i(I)};case Ci.Universal:{if(t.namespace!=null&&t.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return i}}}function A4(i,t,e){let o=typeof i=="string"?fx(i):i;return NI(o,t,e)}function LI(i){return i.type===Ci.Pseudo&&(i.name==="scope"||Array.isArray(i.data)&&i.data.some(t=>t.some(LI)))}var D4={type:Ci.Descendant},R4={type:"_flexibleDescendant"},O4={type:Ci.Pseudo,name:"scope",data:null};function L4(i,{adapter:t},e){let o=!!e?.every(a=>{let s=t.isTag(a)&&t.getParent(a);return a===RI||s&&t.isTag(s)});for(let a of i){if(!(a.length>0&&mx(a[0])&&a[0].type!==Ci.Descendant))if(o&&!a.some(LI))a.unshift(D4);else continue;a.unshift(O4)}}function NI(i,t,e){var o;i.forEach(v4),e=(o=t.context)!==null&&o!==void 0?o:e;let a=Array.isArray(e),s=e&&(Array.isArray(e)?e:[e]);if(t.relativeSelector!==!1)L4(i,t,s);else if(i.some(C=>C.length>0&&mx(C[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let _=!1,w=i.map(C=>{if(C.length>=2){let[T,I]=C;T.type!==Ci.Pseudo||T.name!=="scope"||(a&&I.type===Ci.Descendant?C[1]=R4:(I.type===Ci.Adjacent||I.type===Ci.Sibling)&&(_=!0))}return N4(C,t,s)}).reduce(F4,Wi.falseFunc);return w.shouldTestNextSiblings=_,w}function N4(i,t,e){var o;return i.reduce((a,s)=>a===Wi.falseFunc?Wi.falseFunc:k4(a,s,t,e,NI),(o=t.rootFunc)!==null&&o!==void 0?o:Wi.trueFunc)}function F4(i,t){return t===Wi.falseFunc||i===Wi.trueFunc?i:i===Wi.falseFunc||t===Wi.trueFunc?t:function(o){return i(o)||t(o)}}var FI=(i,t)=>i===t,z4={adapter:PI,equals:FI};function B4(i){var t,e,o,a;let s=i??z4;return(t=s.adapter)!==null&&t!==void 0||(s.adapter=PI),(e=s.equals)!==null&&e!==void 0||(s.equals=(a=(o=s.adapter)===null||o===void 0?void 0:o.equals)!==null&&a!==void 0?a:FI),s}function zI(i){return function(e,o,a){let s=B4(a);typeof e!="function"&&(e=A4(e,s,o));let _=V4(o,s.adapter,e.shouldTestNextSiblings);return i(e,_,s)}}function V4(i,t,e=!1){return e&&(i=U4(i,t)),Array.isArray(i)?t.removeSubsets(i):t.getChildren(i)}function U4(i,t){let e=Array.isArray(i)?i.slice(0):[i],o=e.length;for(let a=0;a<o;a++){let s=OI(e[a],t);e.push(...s)}return e}var BI=zI((i,t,e)=>i===Wi.falseFunc||!t||t.length===0?[]:e.adapter.findAll(i,t)),gx=zI((i,t,e)=>i===Wi.falseFunc||!t||t.length===0?null:e.adapter.findOne(i,t)),xi=function(i){return i[i.Tab=9]="Tab",i[i.NewLine=10]="NewLine",i[i.FormFeed=12]="FormFeed",i[i.CarriageReturn=13]="CarriageReturn",i[i.Space=32]="Space",i[i.ExclamationMark=33]="ExclamationMark",i[i.Number=35]="Number",i[i.Amp=38]="Amp",i[i.SingleQuote=39]="SingleQuote",i[i.DoubleQuote=34]="DoubleQuote",i[i.Dash=45]="Dash",i[i.Slash=47]="Slash",i[i.Zero=48]="Zero",i[i.Nine=57]="Nine",i[i.Semi=59]="Semi",i[i.Lt=60]="Lt",i[i.Eq=61]="Eq",i[i.Gt=62]="Gt",i[i.Questionmark=63]="Questionmark",i[i.UpperA=65]="UpperA",i[i.LowerA=97]="LowerA",i[i.UpperF=70]="UpperF",i[i.LowerF=102]="LowerF",i[i.UpperZ=90]="UpperZ",i[i.LowerZ=122]="LowerZ",i[i.LowerX=120]="LowerX",i[i.OpeningSquareBracket=91]="OpeningSquareBracket",i}(xi||{}),Mt=function(i){return i[i.Text=1]="Text",i[i.BeforeTagName=2]="BeforeTagName",i[i.InTagName=3]="InTagName",i[i.InSelfClosingTag=4]="InSelfClosingTag",i[i.BeforeClosingTagName=5]="BeforeClosingTagName",i[i.InClosingTagName=6]="InClosingTagName",i[i.AfterClosingTagName=7]="AfterClosingTagName",i[i.BeforeAttributeName=8]="BeforeAttributeName",i[i.InAttributeName=9]="InAttributeName",i[i.AfterAttributeName=10]="AfterAttributeName",i[i.BeforeAttributeValue=11]="BeforeAttributeValue",i[i.InAttributeValueDq=12]="InAttributeValueDq",i[i.InAttributeValueSq=13]="InAttributeValueSq",i[i.InAttributeValueNq=14]="InAttributeValueNq",i[i.BeforeDeclaration=15]="BeforeDeclaration",i[i.InDeclaration=16]="InDeclaration",i[i.InProcessingInstruction=17]="InProcessingInstruction",i[i.BeforeComment=18]="BeforeComment",i[i.CDATASequence=19]="CDATASequence",i[i.InSpecialComment=20]="InSpecialComment",i[i.InCommentLike=21]="InCommentLike",i[i.BeforeSpecialS=22]="BeforeSpecialS",i[i.BeforeSpecialT=23]="BeforeSpecialT",i[i.SpecialStartSequence=24]="SpecialStartSequence",i[i.InSpecialTag=25]="InSpecialTag",i[i.InEntity=26]="InEntity",i}(Mt||{});function oc(i){return i===xi.Space||i===xi.NewLine||i===xi.Tab||i===xi.FormFeed||i===xi.CarriageReturn}function z0(i){return i===xi.Slash||i===xi.Gt||oc(i)}function j4(i){return i>=xi.LowerA&&i<=xi.LowerZ||i>=xi.UpperA&&i<=xi.UpperZ}var ac=function(i){return i[i.NoValue=0]="NoValue",i[i.Unquoted=1]="Unquoted",i[i.Single=2]="Single",i[i.Double=3]="Double",i}(ac||{}),Eo={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])},K1=class{constructor({xmlMode:t=!1,decodeEntities:e=!0},o){this.cbs=o,this.state=Mt.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=Mt.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=t,this.decodeEntities=e,this.entityDecoder=new G1(t?pO:hO,(a,s)=>this.emitCodePoint(a,s))}reset(){this.state=Mt.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=Mt.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(t){this.offset+=this.buffer.length,this.buffer=t,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(t){t===xi.Lt||!this.decodeEntities&&this.fastForwardTo(xi.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=Mt.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&t===xi.Amp&&this.startEntity()}stateSpecialStartSequence(t){let e=this.sequenceIndex===this.currentSequence.length;if(!(e?z0(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!e){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=Mt.InTagName,this.stateInTagName(t)}stateInSpecialTag(t){if(this.sequenceIndex===this.currentSequence.length){if(t===xi.Gt||oc(t)){let e=this.index-this.currentSequence.length;if(this.sectionStart<e){let o=this.index;this.index=e,this.cbs.ontext(this.sectionStart,e),this.index=o}this.isSpecial=!1,this.sectionStart=e+2,this.stateInClosingTagName(t);return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Eo.TitleEnd?this.decodeEntities&&t===xi.Amp&&this.startEntity():this.fastForwardTo(xi.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===xi.Lt)}stateCDATASequence(t){t===Eo.Cdata[this.sequenceIndex]?++this.sequenceIndex===Eo.Cdata.length&&(this.state=Mt.InCommentLike,this.currentSequence=Eo.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=Mt.InDeclaration,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===t)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Eo.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=Mt.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(t){return this.xmlMode?!z0(t):j4(t)}startSpecial(t,e){this.isSpecial=!0,this.currentSequence=t,this.sequenceIndex=e,this.state=Mt.SpecialStartSequence}stateBeforeTagName(t){if(t===xi.ExclamationMark)this.state=Mt.BeforeDeclaration,this.sectionStart=this.index+1;else if(t===xi.Questionmark)this.state=Mt.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(t)){let e=t|32;this.sectionStart=this.index,this.xmlMode?this.state=Mt.InTagName:e===Eo.ScriptEnd[2]?this.state=Mt.BeforeSpecialS:e===Eo.TitleEnd[2]?this.state=Mt.BeforeSpecialT:this.state=Mt.InTagName}else t===xi.Slash?this.state=Mt.BeforeClosingTagName:(this.state=Mt.Text,this.stateText(t))}stateInTagName(t){z0(t)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=Mt.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateBeforeClosingTagName(t){oc(t)||(t===xi.Gt?this.state=Mt.Text:(this.state=this.isTagStartChar(t)?Mt.InClosingTagName:Mt.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(t){(t===xi.Gt||oc(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=Mt.AfterClosingTagName,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){(t===xi.Gt||this.fastForwardTo(xi.Gt))&&(this.state=Mt.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(t){t===xi.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=Mt.InSpecialTag,this.sequenceIndex=0):this.state=Mt.Text,this.sectionStart=this.index+1):t===xi.Slash?this.state=Mt.InSelfClosingTag:oc(t)||(this.state=Mt.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===xi.Gt?(this.cbs.onselfclosingtag(this.index),this.state=Mt.Text,this.sectionStart=this.index+1,this.isSpecial=!1):oc(t)||(this.state=Mt.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateInAttributeName(t){(t===xi.Eq||z0(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=Mt.AfterAttributeName,this.stateAfterAttributeName(t))}stateAfterAttributeName(t){t===xi.Eq?this.state=Mt.BeforeAttributeValue:t===xi.Slash||t===xi.Gt?(this.cbs.onattribend(ac.NoValue,this.sectionStart),this.sectionStart=-1,this.state=Mt.BeforeAttributeName,this.stateBeforeAttributeName(t)):oc(t)||(this.cbs.onattribend(ac.NoValue,this.sectionStart),this.state=Mt.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(t){t===xi.DoubleQuote?(this.state=Mt.InAttributeValueDq,this.sectionStart=this.index+1):t===xi.SingleQuote?(this.state=Mt.InAttributeValueSq,this.sectionStart=this.index+1):oc(t)||(this.sectionStart=this.index,this.state=Mt.InAttributeValueNq,this.stateInAttributeValueNoQuotes(t))}handleInAttributeValue(t,e){t===e||!this.decodeEntities&&this.fastForwardTo(e)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(e===xi.DoubleQuote?ac.Double:ac.Single,this.index+1),this.state=Mt.BeforeAttributeName):this.decodeEntities&&t===xi.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(t){this.handleInAttributeValue(t,xi.DoubleQuote)}stateInAttributeValueSingleQuotes(t){this.handleInAttributeValue(t,xi.SingleQuote)}stateInAttributeValueNoQuotes(t){oc(t)||t===xi.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(ac.Unquoted,this.index),this.state=Mt.BeforeAttributeName,this.stateBeforeAttributeName(t)):this.decodeEntities&&t===xi.Amp&&this.startEntity()}stateBeforeDeclaration(t){t===xi.OpeningSquareBracket?(this.state=Mt.CDATASequence,this.sequenceIndex=0):this.state=t===xi.Dash?Mt.BeforeComment:Mt.InDeclaration}stateInDeclaration(t){(t===xi.Gt||this.fastForwardTo(xi.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=Mt.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===xi.Gt||this.fastForwardTo(xi.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=Mt.Text,this.sectionStart=this.index+1)}stateBeforeComment(t){t===xi.Dash?(this.state=Mt.InCommentLike,this.currentSequence=Eo.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=Mt.InDeclaration}stateInSpecialComment(t){(t===xi.Gt||this.fastForwardTo(xi.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=Mt.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){let e=t|32;e===Eo.ScriptEnd[3]?this.startSpecial(Eo.ScriptEnd,4):e===Eo.StyleEnd[3]?this.startSpecial(Eo.StyleEnd,4):(this.state=Mt.InTagName,this.stateInTagName(t))}stateBeforeSpecialT(t){let e=t|32;e===Eo.TitleEnd[3]?this.startSpecial(Eo.TitleEnd,4):e===Eo.TextareaEnd[3]?this.startSpecial(Eo.TextareaEnd,4):(this.state=Mt.InTagName,this.stateInTagName(t))}startEntity(){this.baseState=this.state,this.state=Mt.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?sc.Strict:this.baseState===Mt.Text||this.baseState===Mt.InSpecialTag?sc.Legacy:sc.Attribute)}stateInEntity(){let t=this.entityDecoder.write(this.buffer,this.index-this.offset);t>=0?(this.state=this.baseState,t===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===Mt.Text||this.state===Mt.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===Mt.InAttributeValueDq||this.state===Mt.InAttributeValueSq||this.state===Mt.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){let t=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case Mt.Text:{this.stateText(t);break}case Mt.SpecialStartSequence:{this.stateSpecialStartSequence(t);break}case Mt.InSpecialTag:{this.stateInSpecialTag(t);break}case Mt.CDATASequence:{this.stateCDATASequence(t);break}case Mt.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(t);break}case Mt.InAttributeName:{this.stateInAttributeName(t);break}case Mt.InCommentLike:{this.stateInCommentLike(t);break}case Mt.InSpecialComment:{this.stateInSpecialComment(t);break}case Mt.BeforeAttributeName:{this.stateBeforeAttributeName(t);break}case Mt.InTagName:{this.stateInTagName(t);break}case Mt.InClosingTagName:{this.stateInClosingTagName(t);break}case Mt.BeforeTagName:{this.stateBeforeTagName(t);break}case Mt.AfterAttributeName:{this.stateAfterAttributeName(t);break}case Mt.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(t);break}case Mt.BeforeAttributeValue:{this.stateBeforeAttributeValue(t);break}case Mt.BeforeClosingTagName:{this.stateBeforeClosingTagName(t);break}case Mt.AfterClosingTagName:{this.stateAfterClosingTagName(t);break}case Mt.BeforeSpecialS:{this.stateBeforeSpecialS(t);break}case Mt.BeforeSpecialT:{this.stateBeforeSpecialT(t);break}case Mt.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(t);break}case Mt.InSelfClosingTag:{this.stateInSelfClosingTag(t);break}case Mt.InDeclaration:{this.stateInDeclaration(t);break}case Mt.BeforeDeclaration:{this.stateBeforeDeclaration(t);break}case Mt.BeforeComment:{this.stateBeforeComment(t);break}case Mt.InProcessingInstruction:{this.stateInProcessingInstruction(t);break}case Mt.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===Mt.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){let t=this.buffer.length+this.offset;this.sectionStart>=t||(this.state===Mt.InCommentLike?this.currentSequence===Eo.CdataEnd?this.cbs.oncdata(this.sectionStart,t,0):this.cbs.oncomment(this.sectionStart,t,0):this.state===Mt.InTagName||this.state===Mt.BeforeAttributeName||this.state===Mt.BeforeAttributeValue||this.state===Mt.AfterAttributeName||this.state===Mt.InAttributeName||this.state===Mt.InAttributeValueSq||this.state===Mt.InAttributeValueDq||this.state===Mt.InAttributeValueNq||this.state===Mt.InClosingTagName||this.cbs.ontext(this.sectionStart,t))}emitCodePoint(t,e){this.baseState!==Mt.Text&&this.baseState!==Mt.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+e,this.index=this.sectionStart-1,this.cbs.onattribentity(t)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+e,this.index=this.sectionStart-1,this.cbs.ontextentity(t,this.sectionStart))}},qh=new Set(["input","option","optgroup","select","button","datalist","textarea"]),kr=new Set(["p"]),UM=new Set(["thead","tbody"]),jM=new Set(["dd","dt"]),qM=new Set(["rt","rp"]),q4=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",kr],["h1",kr],["h2",kr],["h3",kr],["h4",kr],["h5",kr],["h6",kr],["select",qh],["input",qh],["output",qh],["button",qh],["datalist",qh],["textarea",qh],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",jM],["dt",jM],["address",kr],["article",kr],["aside",kr],["blockquote",kr],["details",kr],["div",kr],["dl",kr],["fieldset",kr],["figcaption",kr],["figure",kr],["footer",kr],["form",kr],["header",kr],["hr",kr],["main",kr],["nav",kr],["ol",kr],["pre",kr],["section",kr],["table",kr],["ul",kr],["rt",qM],["rp",qM],["tbody",UM],["tfoot",UM]]),H4=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),HM=new Set(["math","svg"]),$M=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),$4=/\s|\//,Q1=class{constructor(t,e={}){var o,a,s,_,w,C;this.options=e,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(o=e.lowerCaseTags)!==null&&o!==void 0?o:this.htmlMode,this.lowerCaseAttributeNames=(a=e.lowerCaseAttributeNames)!==null&&a!==void 0?a:this.htmlMode,this.recognizeSelfClosing=(s=e.recognizeSelfClosing)!==null&&s!==void 0?s:!this.htmlMode,this.tokenizer=new((_=e.Tokenizer)!==null&&_!==void 0?_:K1)(this.options,this),this.foreignContext=[!this.htmlMode],(C=(w=this.cbs).onparserinit)===null||C===void 0||C.call(w,this)}ontext(t,e){var o,a;let s=this.getSlice(t,e);this.endIndex=e-1,(a=(o=this.cbs).ontext)===null||a===void 0||a.call(o,s),this.startIndex=e}ontextentity(t,e){var o,a;this.endIndex=e-1,(a=(o=this.cbs).ontext)===null||a===void 0||a.call(o,AM(t)),this.startIndex=e}isVoidElement(t){return this.htmlMode&&H4.has(t)}onopentagname(t,e){this.endIndex=e;let o=this.getSlice(t,e);this.lowerCaseTagNames&&(o=o.toLowerCase()),this.emitOpenTag(o)}emitOpenTag(t){var e,o,a,s;this.openTagStart=this.startIndex,this.tagname=t;let _=this.htmlMode&&q4.get(t);if(_)for(;this.stack.length>0&&_.has(this.stack[0]);){let w=this.stack.shift();(o=(e=this.cbs).onclosetag)===null||o===void 0||o.call(e,w,!0)}this.isVoidElement(t)||(this.stack.unshift(t),this.htmlMode&&(HM.has(t)?this.foreignContext.unshift(!0):$M.has(t)&&this.foreignContext.unshift(!1))),(s=(a=this.cbs).onopentagname)===null||s===void 0||s.call(a,t),this.cbs.onopentag&&(this.attribs={})}endOpenTag(t){var e,o;this.startIndex=this.openTagStart,this.attribs&&((o=(e=this.cbs).onopentag)===null||o===void 0||o.call(e,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1}onclosetag(t,e){var o,a,s,_,w,C,T,I;this.endIndex=e;let P=this.getSlice(t,e);if(this.lowerCaseTagNames&&(P=P.toLowerCase()),this.htmlMode&&(HM.has(P)||$M.has(P))&&this.foreignContext.shift(),this.isVoidElement(P))this.htmlMode&&P==="br"&&((_=(s=this.cbs).onopentagname)===null||_===void 0||_.call(s,"br"),(C=(w=this.cbs).onopentag)===null||C===void 0||C.call(w,"br",{},!0),(I=(T=this.cbs).onclosetag)===null||I===void 0||I.call(T,"br",!1));else{let R=this.stack.indexOf(P);if(R!==-1)for(let H=0;H<=R;H++){let Z=this.stack.shift();(a=(o=this.cbs).onclosetag)===null||a===void 0||a.call(o,Z,H!==R)}else this.htmlMode&&P==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=e+1}onselfclosingtag(t){this.endIndex=t,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)}closeCurrentTag(t){var e,o;let a=this.tagname;this.endOpenTag(t),this.stack[0]===a&&((o=(e=this.cbs).onclosetag)===null||o===void 0||o.call(e,a,!t),this.stack.shift())}onattribname(t,e){this.startIndex=t;let o=this.getSlice(t,e);this.attribname=this.lowerCaseAttributeNames?o.toLowerCase():o}onattribdata(t,e){this.attribvalue+=this.getSlice(t,e)}onattribentity(t){this.attribvalue+=AM(t)}onattribend(t,e){var o,a;this.endIndex=e,(a=(o=this.cbs).onattribute)===null||a===void 0||a.call(o,this.attribname,this.attribvalue,t===ac.Double?'"':t===ac.Single?"'":t===ac.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(t){let e=t.search($4),o=e<0?t:t.substr(0,e);return this.lowerCaseTagNames&&(o=o.toLowerCase()),o}ondeclaration(t,e){this.endIndex=e;let o=this.getSlice(t,e);if(this.cbs.onprocessinginstruction){let a=this.getInstructionName(o);this.cbs.onprocessinginstruction(`!${a}`,`!${o}`)}this.startIndex=e+1}onprocessinginstruction(t,e){this.endIndex=e;let o=this.getSlice(t,e);if(this.cbs.onprocessinginstruction){let a=this.getInstructionName(o);this.cbs.onprocessinginstruction(`?${a}`,`?${o}`)}this.startIndex=e+1}oncomment(t,e,o){var a,s,_,w;this.endIndex=e,(s=(a=this.cbs).oncomment)===null||s===void 0||s.call(a,this.getSlice(t,e-o)),(w=(_=this.cbs).oncommentend)===null||w===void 0||w.call(_),this.startIndex=e+1}oncdata(t,e,o){var a,s,_,w,C,T,I,P,R,H;this.endIndex=e;let Z=this.getSlice(t,e-o);!this.htmlMode||this.options.recognizeCDATA?((s=(a=this.cbs).oncdatastart)===null||s===void 0||s.call(a),(w=(_=this.cbs).ontext)===null||w===void 0||w.call(_,Z),(T=(C=this.cbs).oncdataend)===null||T===void 0||T.call(C)):((P=(I=this.cbs).oncomment)===null||P===void 0||P.call(I,`[CDATA[${Z}]]`),(H=(R=this.cbs).oncommentend)===null||H===void 0||H.call(R)),this.startIndex=e+1}onend(){var t,e;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let o=0;o<this.stack.length;o++)this.cbs.onclosetag(this.stack[o],!0)}(e=(t=this.cbs).onend)===null||e===void 0||e.call(t)}reset(){var t,e,o,a;(e=(t=this.cbs).onreset)===null||e===void 0||e.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(a=(o=this.cbs).onparserinit)===null||a===void 0||a.call(o,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(t){this.reset(),this.end(t)}getSlice(t,e){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let o=this.buffers[0].slice(t-this.bufferOffset,e-this.bufferOffset);for(;e-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),o+=this.buffers[0].slice(0,e-this.bufferOffset);return o}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(t){var e,o;if(this.ended){(o=(e=this.cbs).onerror)===null||o===void 0||o.call(e,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)}end(t){var e,o;if(this.ended){(o=(e=this.cbs).onerror)===null||o===void 0||o.call(e,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(t){this.write(t)}done(t){this.end(t)}};function G4(i,t){let e=new H1(void 0,t);return new Q1(e,t).end(i),e.root}var W4=oI(),cm=Z0(W4);function GM(i){return K6(i)}function WM(i,t){let e="";return Y6(i,(o,a,s)=>{if(!(a?.type==="decl"&&a.value.includes("</style>"))){if(!t.compress){e+=o;return}if(a?.type!=="comment"){if(a?.type==="decl"){let _=a.prop+a.raws.between;e+=o.replace(_,_.trim());return}if(s==="start"){a?.type==="rule"&&a.selectors?e+=`${a.selectors.join(",")}{`:e+=o.replace(/\s\{$/,"{");return}s==="end"&&o==="}"&&a?.raws?.semicolon&&(e=e.slice(0,-1)),e+=o.trim()}}}),e}function Z4(i){return t=>{let e="selectors"in t?t.selectors:void 0;i(t)===!1&&(t.$$remove=!0),"selectors"in t&&(t.$$markedSelectors=t.selectors,t.selectors=e),t._other&&(t._other.$$markedSelectors=t._other.selectors)}}function VI(i){i.$$markedSelectors&&(i.selectors=i.$$markedSelectors),i._other&&VI(i._other)}function _x(i,t){"nodes"in i&&(i.nodes=i.nodes?.filter(e=>(jI(e)&&_x(e,t),e._other=void 0,e.filterSelectors=HI,t(e)!==!1)))}function UI(i,t,e){if(!t)return _x(i,e);[i.nodes,t.nodes]=qI(i.nodes,t.nodes,(o,a,s,_)=>{let w=_?.[a];return jI(o)&&UI(o,w,e),o._other=w,o.filterSelectors=HI,e(o)!==!1})}function jI(i){return"nodes"in i&&!!i.nodes?.length&&(!("name"in i)||i.name!=="keyframes"&&i.name!=="-webkit-keyframes")&&i.nodes.some(t=>t.type==="rule"||t.type==="atrule")}function qI(i,t,e){let o=[],a=[];for(let s=0;s<i.length;s++){let _=i[s];e(_,s,i,t)?o.push(_):a.push(_)}return[o,a]}function HI(i){if(this._other){let[t,e]=qI(this.selectors,this._other.selectors,i);this.selectors=t,this._other.selectors=e}else this.selectors=this.selectors.filter(i)}var X4=new Set(["all","print","screen","speech"]),Y4=new Set(["and","not",","]),K4=new Set(["width","aspect-ratio","color","color-index","grid","height","monochrome","orientation","resolution","scan"].flatMap(i=>[i,`min-${i}`,`max-${i}`]));function Q4(i){let{type:t,value:e}=i;if(t==="media-type")return X4.has(e);if(t==="keyword")return Y4.has(e);if(t==="media-feature")return K4.has(e)}function J4(i){let e=("default"in R1?R1.default:R1)(i),o=new Set(["media-type","keyword","media-feature"]),a=[e];for(;a.length>0;){let s=a.pop();if(o.has(s.type)&&!Q4(s))return!1;s.nodes&&a.push(...s.nodes)}return!0}var J1=null,ex=null;function eL(i){J1=new Set,ex=new Set;let t=[i];for(;t.length;){let e=t.shift();if(e.hasAttribute?.("class")&&e.getAttribute("class").trim().split(" ").forEach(a=>{J1.add(a)}),e.hasAttribute?.("id")){let o=e.getAttribute("id").trim();ex.add(o)}"children"in e&&t.push(...e.children.filter(o=>o.type==="tag"))}}function tL(i){let t=G4(i,{decodeEntities:!1});nL(t),rL($h.prototype);let e=t.querySelector("[data-beasties-container]");return e||(t.documentElement?.setAttribute("data-beasties-container",""),e=t.documentElement||t),t.beastiesContainer=e,eL(e),t}function iL(i){return t_(i,{decodeEntities:!1})}var ZM=!1;function rL(i){ZM||(ZM=!0,Object.defineProperties(i,{nodeName:{get(){return this.tagName.toUpperCase()}},id:{get(){return this.getAttribute("id")},set(t){this.setAttribue("id",t)}},className:{get(){return this.getAttribute("class")},set(t){this.setAttribute("class",t)}},insertBefore:{value(t,e){return e?(wI(e,t),t):this.appendChild(t)}},appendChild:{value(t){return Z1(this,t),t}},removeChild:{value(t){pd(t)}},remove:{value(){pd(this)}},textContent:{get(){return um(this)},set(t){this.children=[],Z1(this,new dd(t))}},setAttribute:{value(t,e){this.attribs==null&&(this.attribs={}),e==null&&(e=""),this.attribs[t]=e}},removeAttribute:{value(t){this.attribs!=null&&delete this.attribs[t]}},getAttribute:{value(t){return this.attribs!=null&&this.attribs[t]}},hasAttribute:{value(t){return this.attribs!=null&&this.attribs[t]!=null}},getAttributeNode:{value(t){let e=this.getAttribute(t);if(e!=null)return{specified:!0,value:e}}},exists:{value(t){return $I(t,this)}},querySelector:{value(t){return gx(t,this)}},querySelectorAll:{value(t){return BI(t,this)}}}))}function nL(i){Object.defineProperties(i,{nodeType:{get(){return 9}},contentType:{get(){return"text/html"}},nodeName:{get(){return"#document"}},documentElement:{get(){return this.children.find(t=>"tagName"in t&&String(t.tagName).toLowerCase()==="html")}},head:{get(){return this.querySelector("head")}},body:{get(){return this.querySelector("body")}},createElement:{value(t){return new $h(t,{})}},createTextNode:{value(t){return new dd(t)}},exists:{value(t){return $I(t,this)}},querySelector:{value(t){return gx(t,this)}},querySelectorAll:{value(t){return t===":root"?this:BI(t,this)}}})}function $I(i,t){let e=fx(i);for(let o of e)if(o.length===1){let a=o[0];if(a.type==="attribute"&&a.name==="class")return J1.has(a.value);if(a.type==="attribute"&&a.name==="id")return ex.has(a.value)}return!!gx(i,t)}var XM=["trace","debug","info","warn","error","silent"],YM={trace(i){console.trace(i)},debug(i){console.debug(i)},warn(i){console.warn(cm.yellow(i))},error(i){console.error(cm.bold(cm.red(i)))},info(i){console.info(cm.bold(cm.blue(i)))},silent(){}};function oL(i){let t=XM.indexOf(i);return XM.reduce((e,o,a)=>(a>=t?e[o]=YM[o]:e[o]=YM.silent,e),{})}function sL(i,t){return!Hh.relative(i,t).startsWith("..")}var aL=Object.defineProperty,lL=(i,t,e)=>t in i?aL(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,j1=(i,t,e)=>(lL(i,typeof t!="symbol"?t+"":t,e),e),G0=class{constructor(t={}){j1(this,"options"),j1(this,"logger"),j1(this,"fs"),this.options=Object.assign({logLevel:"info",path:"",publicPath:"",reduceInlineStyles:!0,pruneSource:!1,additionalStylesheets:[],allowRules:[]},t),this.logger=this.options.logger||oL(this.options.logLevel)}readFile(t){let e=this.fs;return new Promise((o,a)=>{let s=(_,w)=>{_?a(_):o(w.toString())};e&&e.readFile?e.readFile(t,s):A6(t,"utf-8",s)})}process(t){return qi(this,null,function*(){let e=Date.now(),o=tL(t);if(this.options.additionalStylesheets.length>0&&this.embedAdditionalStylesheet(o),this.options.external!==!1){let w=[].slice.call(o.querySelectorAll('link[rel="stylesheet"]'));yield Promise.all(w.map(C=>this.embedLinkedStylesheet(C,o)))}let a=this.getAffectedStyleTags(o);yield Promise.all(a.map(w=>this.processStyle(w,o))),this.options.mergeStylesheets!==!1&&a.length!==0&&(yield this.mergeStylesheets(o));let s=iL(o),_=Date.now();return this.logger.info?.(`Time ${_-e}ms`),s})}getAffectedStyleTags(t){let e=[...t.querySelectorAll("style")];return this.options.reduceInlineStyles===!1?e.filter(o=>o.$$external):e}mergeStylesheets(t){return qi(this,null,function*(){let e=this.getAffectedStyleTags(t);if(e.length===0){this.logger.warn?.("Merging inline stylesheets into a single <style> tag skipped, no inline stylesheets to merge");return}let o=e[0],a=o.textContent;for(let s=1;s<e.length;s++){let _=e[s];a+=_.textContent,_.remove()}o.textContent=a})}getCssAsset(t,e){return qi(this,null,function*(){let o=this.options.path,a=this.options.publicPath,s=t.replace(/^\//,""),_=`${(a||"").replace(/(^\/|\/$)/g,"")}/`;if(s.startsWith(_)&&(s=s.substring(_.length).replace(/^\//,"")),/^https?:\/\//.test(s)||t.startsWith("//"))return;let w=Hh.resolve(o,s);if(!sL(o,w))return;let C;try{C=yield this.readFile(w)}catch{this.logger.warn?.(`Unable to locate stylesheet: ${w}`)}return C})}checkInlineThreshold(t,e,o){if(this.options.inlineThreshold&&o.length<this.options.inlineThreshold){let a=e.$$name;return e.$$reduce=!1,this.logger.info?.(`\x1B[32mInlined all of ${a} (${o.length} was below the threshold of ${this.options.inlineThreshold})\x1B[39m`),t.remove(),!0}return!1}embedAdditionalStylesheet(t){return qi(this,null,function*(){let e=[],o=yield Promise.all(this.options.additionalStylesheets.map(a=>{if(e.includes(a))return[];e.push(a);let s=t.createElement("style");return s.$$external=!0,this.getCssAsset(a,s).then(_=>[_,s])}));for(let[a,s]of o)a&&(s.textContent=a,t.head.appendChild(s))})}embedLinkedStylesheet(t,e){return qi(this,null,function*(){let o=t.getAttribute("href"),a=t.getAttribute("media");a&&!J4(a)&&(a=void 0);let s=this.options.preload;if(!o?.endsWith(".css"))return;let _=e.createElement("style");_.$$external=!0;let w=yield this.getCssAsset(o,_);if(!w||(_.textContent=w,_.$$name=o,_.$$links=[t],t.parentNode?.insertBefore(_,t),this.checkInlineThreshold(t,_,w)))return;let C="function $loadcss(u,m,l){(l=document.createElement('link')).rel='stylesheet';l.href=u;document.head.appendChild(l)}";if(s==="js-lazy"&&(C=C.replace("l.href","l.media='print';l.onload=function(){l.media=m};l.href")),s===!1)return;let I=!1,P=!1,R=t.cloneNode(!1);if(s==="body")e.body.appendChild(t);else if(s==="js"||s==="js-lazy"){let H=e.createElement("script");H.setAttribute("data-href",o),H.setAttribute("data-media",a||"all");let Z=`${C}$loadcss(document.currentScript.dataset.href,document.currentScript.dataset.media)`;H.textContent=Z,t.parentNode.insertBefore(H,t.nextSibling),_.$$links.push(H),C="",I=!0,P=!0}else if(s==="media")t.setAttribute("media","print"),t.setAttribute("onload",`this.media='${a||"all"}'`),I=!0;else if(s==="swap-high")t.setAttribute("rel","alternate stylesheet preload"),t.setAttribute("title","styles"),t.setAttribute("onload","this.title='';this.rel='stylesheet'"),I=!0;else if(s==="swap")t.setAttribute("onload","this.rel='stylesheet'"),I=!0;else{let H=t.cloneNode(!1);H.removeAttribute("id"),e.body.appendChild(H),P=!0}if(this.options.noscriptFallback!==!1&&I&&!o.includes("</noscript>")){let H=e.createElement("noscript");R.removeAttribute("id"),H.appendChild(R),t.parentNode.insertBefore(H,t.nextSibling),_.$$links.push(H)}P&&(t.setAttribute("rel","preload"),t.setAttribute("as","style"))})}pruneSource(t,e,o){let a=this.options.minimumExternalSize,s=t.$$name;if(a&&o.length<a){if(this.logger.info?.(`\x1B[32mInlined all of ${s} (non-critical external stylesheet would have been ${o.length}b, which was below the threshold of ${a})\x1B[39m`),t.textContent=e,t.$$links)for(let _ of t.$$links){let w=_.parentNode;w&&w.removeChild(_)}return!0}return!1}processStyle(t,e){return qi(this,null,function*(){if(t.$$reduce===!1)return;let o=t.$$name?t.$$name.replace(/^\//,""):"inline CSS",a=this.options,s=e.beastiesContainer,_=a.keyframes??"critical";_===!0&&(_="all"),_===!1&&(_="none");let w=t.textContent,C=w;if(!w)return;let T=GM(w),I=a.pruneSource?GM(w):null,P="",R=[],H=new Set,Z=!1,X=!1,fe=!1,ae=!1,ne=a.fonts===!0||a.preloadFonts===!0,re=a.fonts!==!1&&a.inlineFonts===!0;_x(T,Z4(dt=>{if(dt.type==="comment"){let we=dt.text.match(/^(?<!! )beasties:(.*)/),Ge=we&&we[1];if(Ge)switch(Ge){case"include":Z=!0;break;case"exclude":fe=!0;break;case"include start":X=!0;break;case"include end":X=!1;break;case"exclude start":ae=!0;break;case"exclude end":ae=!1;break}}if(dt.type==="rule"){if(Z)return Z=!1,!0;if(fe)return fe=!1,!1;if(X)return!0;if(ae||(dt.filterSelectors?.(we=>{if(a.allowRules.some(yt=>yt instanceof RegExp?yt.test(we):yt===we)||we===":root"||we==="html"||we==="body"||/^::?(?:before|after)$/.test(we))return!0;if(we=we.replace(/(?<!\\)::?[a-z-]+(?![a-z-(])/gi,"").replace(/::?not\(\s*\)/g,"").replace(/\(\s*,/g,"(").replace(/,\s*\)/g,")").trim(),!we)return!1;try{return s.exists(we)}catch(yt){return R.push(`${we} -> ${yt.message||yt.toString()}`),!1}}),!dt.selector))return!1;if(dt.nodes){for(let we of dt.nodes)if("prop"in we&&(re&&/\bfont(?:-family)?\b/i.test(we.prop)&&(P+=` ${we.value}`),we.prop==="animation"||we.prop==="animation-name"))for(let Ge of we.value.split(/\s+/)){let yt=Ge.trim();yt&&H.add(yt)}}}if(dt.type==="atrule"&&dt.name==="font-face")return;let Je="nodes"in dt?dt.nodes?.filter(we=>!we.$$remove):void 0;return!Je||Je.length!==0})),R.length!==0&&this.logger.warn?.(`${R.length} rules skipped due to selector errors:
  ${R.join(`
  `)}`);let de=new Set;if(UI(T,I,dt=>{if(dt.$$remove===!0)return!1;if("selectors"in dt&&VI(dt),dt.type==="atrule"&&dt.name==="keyframes")return _==="none"?!1:_==="all"?!0:H.has(dt.params);if(dt.type==="atrule"&&dt.name==="font-face"){let Je,we;if(dt.nodes){for(let Ge of dt.nodes)"prop"in Ge&&(Ge.prop==="src"?we=(Ge.value.match(/url\s*\(\s*(['"]?)(.+?)\1\s*\)/)||[])[2]:Ge.prop==="font-family"&&(Je=Ge.value));if(we&&ne&&!de.has(we)){de.add(we);let Ge=e.createElement("link");Ge.setAttribute("rel","preload"),Ge.setAttribute("as","font"),Ge.setAttribute("crossorigin","anonymous"),Ge.setAttribute("href",we.trim()),e.head.appendChild(Ge)}}if(!re||!Je||!we||!P.includes(Je))return!1}}),w=WM(T,{compress:this.options.compress!==!1}),w.trim().length===0){t.parentNode&&t.remove();return}let oe="",Ve=!1;if(a.pruneSource){let dt=WM(I,{compress:this.options.compress!==!1});Ve=this.pruneSource(t,C,dt),Ve&&(oe=`, reducing non-inlined size ${dt.length/C.length*100|0}% to ${q1(dt.length)}`)}Ve||(t.textContent=w);let tt=w.length/C.length*100|0;this.logger.info?.(`\x1B[32mInlined ${q1(w.length)} (${tt}% of original ${q1(C.length)}) of ${o}${oe}.\x1B[39m`)})}};function q1(i){if(i<=0)return"0 bytes";let t=["bytes","kB","MB","GB"],e=Math.floor(Math.log(i)/Math.log(1024)),o=i/1024**e,a=e===0?0:2;return`${o.toFixed(a)} ${t[e]}`}var r_=class{manifest;constructor(t){this.manifest=t}getServerAsset(t){let e=this.manifest.assets[t];if(!e)throw new Error(`Server asset '${t}' does not exist.`);return e}hasServerAsset(t){return!!this.manifest.assets[t]}getIndexServerHtml(){return this.getServerAsset("index.server.html")}},n_=class extends eu{ignoredLogs=new Set(["Angular is running in development mode."]);log(t){this.ignoredLogs.has(t)||super.log(t)}},bx;function XI(i){bx=i}function YI(){if(!bx)throw new Error("Angular app manifest is not set. Please ensure you are using the '@angular/build:application' builder to build your server application.");return bx}function cL(i){return i.length>1&&i[i.length-1]==="/"?i.slice(0,-1):i}function gm(i){return i.length>1&&i[0]==="/"?i.slice(1):i}function uL(i){return i[0]==="/"?i:`/${i}`}function dL(i){return i[i.length-1]==="/"?i:`${i}/`}function Wh(...i){let t=[];for(let e of i){if(e==="")continue;let o=e;e[0]==="/"&&(o=o.slice(1)),e[e.length-1]==="/"&&(o=o.slice(0,-1)),o!==""&&t.push(o)}return uL(t.join("/"))}function KI(i){if(i.pathname.endsWith("/index.html")){let t=new URL(i);return t.pathname=t.pathname.slice(0,-11),t}return i}function hL(i,t){if(i[0]!=="/")throw new Error(`Invalid toPath: The string must start with a '/'. Received: '${i}'`);if(t[0]!=="/")throw new Error(`Invalid fromPath: The string must start with a '/'. Received: '${t}'`);if(!i.includes("/*"))return i;let e=t.split("/"),o=i.split("/"),a=o.map((s,_)=>o[_]==="*"?e[_]:s);return Wh(...a)}function pL(i,t,e,o,a){let s=[{provide:wy,useValue:a},{provide:eu,useFactory:()=>new n_},...o],_=KI(e).toString();return QI(t)?JS(t,{url:_,document:i,extraProviders:s}):eT(t,{url:_,document:i,platformProviders:s})}function QI(i){return"\u0275mod"in i}function JI(i,t,e){return new Promise((o,a)=>{let s=()=>{a(new DOMException(`${e} was aborted.
${t.reason}`,"AbortError"))};if(t.aborted){s();return}t.addEventListener("abort",s,{once:!0}),i.then(o).catch(a).finally(()=>{t.removeEventListener("abort",s)})})}var On=function(i){return i[i.Server=0]="Server",i[i.Client=1]="Client",i[i.Prerender=2]="Prerender",i}(On||{}),vx=function(i){return i[i.Server=0]="Server",i[i.Client=1]="Client",i[i.None=2]="None",i}(vx||{}),eP=new Bt("SERVER_ROUTES_CONFIG");function tP(i,t){return Ga([{provide:eP,useValue:gt({routes:i},t)}])}var _m=class i{root=this.createEmptyRouteTreeNode("");insertionIndexCounter=0;insert(t,e){let o=this.root,a=this.getPathSegments(t),s=[];for(let _ of a){let w=_[0]===":"?"*":_,C=o.children.get(w);C||(C=this.createEmptyRouteTreeNode(w),o.children.set(w,C)),o=C,s.push(w)}o.metadata=ui(gt({},e),{route:s.join("/")}),o.insertionIndex=this.insertionIndexCounter++}match(t){let e=this.getPathSegments(t);return this.traverseBySegments(e)?.metadata}toObject(){return Array.from(this.traverse())}static fromObject(t){let e=new i;for(let o of t){let a=o,{route:s}=a,_=Ql(a,["route"]);e.insert(s,_)}return e}*traverse(t=this.root){t.metadata&&(yield t.metadata);for(let e of t.children.values())yield*uf(this.traverse(e))}getPathSegments(t){return cL(t).split("/")}traverseBySegments(t,e=this.root){let{metadata:o,children:a}=e;if(!t?.length)return o?e:void 0;if(!a.size)return;let[s,..._]=t,w,C=e.children.get(s);w=this.getHigherPriorityNode(w,this.traverseBySegments(_,C));let T=e.children.get("*");w=this.getHigherPriorityNode(w,this.traverseBySegments(_,T));let I=e.children.get("**");return w=this.getHigherPriorityNode(w,I),w}getHigherPriorityNode(t,e){return e?t?e.insertionIndex<t.insertionIndex?e:t:e:t}createEmptyRouteTreeNode(t){return{segment:t,insertionIndex:-1,children:new Map}}},yx=/(?<!\\):([^/]+)/g,GI=new Set([301,302,303,307,308]);function xx(i){return Mv(this,null,function*(){let{routes:t,compiler:e,parentInjector:o,parentRoute:a,serverConfigRouteTree:s,invokeGetPrerenderParams:_,includePrerenderFallbackRoutes:w}=i;for(let C of t)try{let{path:T="",redirectTo:I,loadChildren:P,children:R}=C,H=Wh(a,T),Z;if(s){if(Z=s.match(H),!Z){yield{error:`The '${gm(H)}' route does not match any route defined in the server routing configuration. Please ensure this route is added to the server routing configuration.`};continue}Z.presentInClientRouter=!0}let X=ui(gt({renderMode:On.Prerender},Z),{route:T===""?dL(H):H});if(delete X.presentInClientRouter,X.renderMode===On.Prerender)yield*uf(fL(typeof I=="string"?I:void 0,X,o,_,w));else if(typeof I=="string"){if(X.status&&!GI.has(X.status)){yield{error:`The '${X.status}' status code is not a valid redirect response code. Please use one of the following redirect response codes: ${[...GI.values()].join(", ")}.`};continue}yield ui(gt({},X),{redirectTo:wx(X.route,I)})}else yield X;if(R?.length&&(yield*uf(xx(ui(gt({},i),{routes:R,parentRoute:H})))),P){let fe=yield new Tv(i1(C,e,o).toPromise());if(fe){let{routes:ae,injector:ne=o}=fe;yield*uf(xx(ui(gt({},i),{routes:ae,parentInjector:ne,parentRoute:H})))}}}catch(T){yield{error:`Error processing route '${gm(C.path??"")}': ${T.message}`}}})}function fL(i,t,e,o,a){return Mv(this,null,function*(){if(t.renderMode!==On.Prerender)throw new Error("'handleSSGRoute' was called for a route which rendering mode is not prerender.");let T=t,{route:s,fallback:_}=T,w=Ql(T,["route","fallback"]),C="getPrerenderParams"in w?w.getPrerenderParams:void 0;if("getPrerenderParams"in w&&delete w.getPrerenderParams,i!==void 0&&(w.redirectTo=wx(s,i)),!yx.test(s)){yield ui(gt({},w),{route:s});return}if(o){if(!C){yield{error:`The '${gm(s)}' route uses prerendering and includes parameters, but 'getPrerenderParams' is missing. Please define 'getPrerenderParams' function for this route in your server routing configuration or specify a different 'renderMode'.`};return}let I=yield new Tv(fs(e,()=>C()));try{for(let P of I){let R=s.replace(yx,H=>{let Z=H.slice(1),X=P[Z];if(typeof X!="string")throw new Error(`The 'getPrerenderParams' function defined for the '${gm(s)}' route returned a non-string value for parameter '${Z}'. Please make sure the 'getPrerenderParams' function returns values for all parameters specified in this route.`);return X});yield ui(gt({},w),{route:R,redirectTo:i===void 0?void 0:wx(R,i)})}}catch(P){yield{error:`${P.message}`};return}}a&&(_!==vx.None||!o)&&(yield ui(gt({},w),{route:s,renderMode:_===vx.Client?On.Client:On.Server}))})}function wx(i,t){if(t[0]==="/")return t;let e=i.replace(yx,"*").split("/");return e.pop(),Wh(...e,t)}function mL({routes:i,appShellRoute:t}){let e=[...i];t!==void 0&&e.unshift({path:t,renderMode:On.Prerender});let o=new _m,a=[];for(let s of e){let _=s,{path:w}=_,C=Ql(_,["path"]);if(w[0]==="/"){a.push(`Invalid '${w}' route configuration: the path cannot start with a slash.`);continue}o.insert(w,C)}return{serverConfigRouteTree:o,errors:a}}function gL(i,t,e,o=!1,a=!0){return qi(this,null,function*(){let{protocol:s,host:_}=e,w=xy([{provide:kh,useValue:{document:t,url:`${s}//${_}/`}},{provide:eu,useFactory:()=>new n_}]);try{let R;QI(i)?R=(yield w.bootstrapModule(i)).injector.get(ga):R=yield i(),yield R.whenStable();let H=R.injector,Z=H.get(Co),X=[],fe=[],ae=H.get(NE,null,{optional:!0})??H.get(wf).getBaseHrefFromDOM();ae.startsWith("./")&&(ae=ae.slice(2));let ne=H.get(xh),re=H.get(eP,null,{optional:!0}),de;if(re){let oe=mL(re);de=oe.serverConfigRouteTree,fe.push(...oe.errors)}if(fe.length)return{baseHref:ae,routes:X,errors:fe};if(Z.config.length){let oe=xx({routes:Z.config,compiler:ne,parentInjector:H,parentRoute:"",serverConfigRouteTree:de,invokeGetPrerenderParams:o,includePrerenderFallbackRoutes:a});try{for(var C=qC(oe),T,I,P;T=!(I=yield C.next()).done;T=!1){let Ve=I.value;"error"in Ve?fe.push(Ve.error):X.push(Ve)}}catch{P=[I]}finally{try{T&&(I=C.return)&&(yield I.call(C))}finally{if(P)throw P[0]}}if(de)for(let{route:Ve,presentInClientRouter:tt}of de.traverse())tt||Ve==="**"||fe.push(`The '${Ve}' server route does not match any routes defined in the Angular routing configuration (typically provided as a part of the 'provideRouter' call). Please make sure that the mentioned server route is present in the Angular routing configuration.`)}else{let oe=de?.match("")??{route:"",renderMode:On.Prerender};X.push(ui(gt({},oe),{route:""}))}return{baseHref:ae,routes:X,errors:fe,appShellRoute:re?.appShellRoute}}finally{w.destroy()}})}function iP(i){let{url:t,manifest:e=YI(),invokeGetPrerenderParams:o=!1,includePrerenderFallbackRoutes:a=!0,signal:s}=i;function _(){return qi(this,null,function*(){let w=new _m,C=yield new r_(e).getIndexServerHtml().text(),T=yield e.bootstrap(),{baseHref:I,appShellRoute:P,routes:R,errors:H}=yield gL(T,C,t,o,a);for(let Z of R){let X=Z,{route:fe}=X,ae=Ql(X,["route"]);ae.redirectTo!==void 0&&(ae.redirectTo=Wh(I,ae.redirectTo));for(let[re,de]of Object.entries(ae))de===void 0&&delete ae[re];let ne=Wh(I,fe);w.insert(ne,ae)}return{appShellRoute:P,routeTree:w,errors:H}})}return s?JI(_(),s,"Routes extraction"):_()}var Cx=class{store=new Map;run(t,e){return qi(this,null,function*(){let o=this.store.get(t);switch(t){case"html:transform:pre":{if(!o)return e.html;let a=gt({},e);for(let s of o)a.html=yield s(a);return a.html}default:throw new Error(`Running hook "${t}" is not supported.`)}})}on(t,e){let o=this.store.get(t);o?o.push(e):this.store.set(t,[e])}has(t){return!!this.store.get(t)?.length}},Ex=class i{routeTree;constructor(t){this.routeTree=t}static#e;static from(t,e){if(t.routes){let o=_m.fromObject(t.routes);return Promise.resolve(new i(o))}return i.#e??=iP({url:e,manifest:t}).then(({routeTree:o,errors:a})=>{if(a.length>0)throw new Error(`Error(s) occurred while extracting routes:
`+a.map(s=>`- ${s}`).join(`
`));return new i(o)}).finally(()=>{i.#e=void 0}),i.#e}match(t){let{pathname:e}=KI(t);return this.routeTree.match(decodeURIComponent(e))}};function _L(i){return qi(this,null,function*(){let t=new TextEncoder().encode(i),e=yield crypto.subtle.digest("SHA-256",t),o=[];for(let a of new Uint8Array(e))o.push(a.toString(16).padStart(2,"0"));return o.join("")})}var WI=/^this\.media=["'](.*)["'];?$/,rP="ngCspMedia",ZI=`
(() => {
  const CSP_MEDIA_ATTR = '${rP}';
  const documentElement = document.documentElement;

  // Listener for load events on link tags.
  const listener = (e) => {
    const target = e.target;
    if (
      !target ||
      target.tagName !== 'LINK' ||
      !target.hasAttribute(CSP_MEDIA_ATTR)
    ) {
      return;
    }

    target.media = target.getAttribute(CSP_MEDIA_ATTR);
    target.removeAttribute(CSP_MEDIA_ATTR);

    if (!document.head.querySelector(\`link[\${CSP_MEDIA_ATTR}]\`)) {
      documentElement.removeEventListener('load', listener);
    }
  };

  documentElement.addEventListener('load', listener, true);
})();`,Sx=class extends G0{},Tx=class i extends Sx{readFile;outputPath;addedCspScriptsDocuments=new WeakSet;documentNonces=new WeakMap;constructor(t,e){super({logger:{warn:o=>console.warn(o),error:o=>console.error(o),info:()=>{}},logLevel:"warn",path:e,publicPath:void 0,compress:!1,pruneSource:!1,reduceInlineStyles:!1,mergeStylesheets:!1,preload:"media",noscriptFallback:!0,inlineFonts:!0}),this.readFile=t,this.outputPath=e}embedLinkedStylesheet(t,e){return qi(this,null,function*(){if(t.getAttribute("media")==="print"&&t.next?.name==="noscript"){let s=t.getAttribute("onload")?.match(WI);s&&(t.removeAttribute("onload"),t.setAttribute("media",s[1]),t?.next?.remove())}let o=yield jC(i.prototype,this,"embedLinkedStylesheet").call(this,t,e),a=this.findCspNonce(e);if(a){let s=t.getAttribute("onload")?.match(WI);s&&(t.removeAttribute("onload"),t.setAttribute(rP,s[1]),this.conditionallyInsertCspLoadingScript(e,a,t)),e.head.children.forEach(_=>{_.tagName==="style"&&!_.hasAttribute("nonce")&&_.setAttribute("nonce",a)})}return o})}findCspNonce(t){if(this.documentNonces.has(t))return this.documentNonces.get(t);let e=t.querySelector("[ngCspNonce], [ngcspnonce]"),o=e?.getAttribute("ngCspNonce")||e?.getAttribute("ngcspnonce")||null;return this.documentNonces.set(t,o),o}conditionallyInsertCspLoadingScript(t,e,o){if(this.addedCspScriptsDocuments.has(t))return;if(t.head.textContent.includes(ZI)){this.addedCspScriptsDocuments.add(t);return}let a=t.createElement("script");a.setAttribute("nonce",e),a.textContent=ZI,t.head.insertBefore(a,o),this.addedCspScriptsDocuments.add(t)}},Mx=class{capacity;cache=new Map;head;tail;constructor(t){this.capacity=t}get(t){let e=this.cache.get(t);if(e)return this.moveToHead(e),e.value}put(t,e){let o=this.cache.get(t);if(o){o.value=e,this.moveToHead(o);return}let a={key:t,value:e,prev:void 0,next:void 0};if(this.cache.set(t,a),this.addToHead(a),this.cache.size>this.capacity){let s=this.removeTail();s&&this.cache.delete(s.key)}}addToHead(t){t.next=this.head,t.prev=void 0,this.head&&(this.head.prev=t),this.head=t,this.tail||(this.tail=t)}removeNode(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev}moveToHead(t){this.removeNode(t),this.addToHead(t)}removeTail(){let t=this.tail;return t&&this.removeNode(t),t}},bL=50,vL={[On.Prerender]:"ssg",[On.Server]:"ssr",[On.Client]:""},Ix=class{options;allowStaticRouteRender;hooks;constructor(t={}){this.options=t,this.allowStaticRouteRender=this.options.allowStaticRouteRender??!1,this.hooks=t.hooks??new Cx}manifest=YI();assets=new r_(this.manifest);router;inlineCriticalCssProcessor;boostrap;criticalCssLRUCache=new Mx(bL);handle(t,e){return qi(this,null,function*(){let o=new URL(t.url);this.router??=yield Ex.from(this.manifest,o);let a=this.router.match(o);if(!a)return null;let{redirectTo:s,status:_,renderMode:w}=a;if(s!==void 0)return Response.redirect(new URL(hL(s,o.pathname),o),_??302);if(w===On.Prerender){let C=yield this.handleServe(t,a);if(C)return C}return JI(this.handleRendering(t,a,e),t.signal,`Request for: ${t.url}`)})}handleServe(t,e){return qi(this,null,function*(){let{headers:o,renderMode:a}=e;if(a!==On.Prerender)return null;let{method:s}=t;if(s!=="GET"&&s!=="HEAD")return null;let _=this.buildServerAssetPathFromRequest(t);if(!this.assets.hasServerAsset(_))return null;let{text:w,hash:C,size:T}=this.assets.getServerAsset(_),I=`"${C}"`;return t.headers.get("if-none-match")===I?new Response(void 0,{status:304,statusText:"Not Modified"}):new Response(yield w(),{headers:gt({"Content-Length":T.toString(),ETag:I,"Content-Type":"text/html;charset=UTF-8"},o)})})}handleRendering(t,e,o){return qi(this,null,function*(){let{renderMode:a,headers:s,status:_}=e;if(!this.allowStaticRouteRender&&a===On.Prerender)return null;let w=new URL(t.url),C=[],T={status:_,headers:new Headers(gt({"Content-Type":"text/html;charset=UTF-8"},s))};if(a===On.Server)C.push({provide:AE,useValue:t},{provide:RE,useValue:o},{provide:DE,useValue:T});else if(a===On.Client){let fe=yield this.assets.getServerAsset("index.csr.html").text();return fe=yield this.runTransformsOnHtml(fe,w),new Response(fe,T)}let{manifest:{bootstrap:I,inlineCriticalCss:P,locale:R},hooks:H,assets:Z}=this;R!==void 0&&C.push({provide:Hv,useValue:R}),this.boostrap??=yield I();let X=yield Z.getIndexServerHtml().text();if(X=yield this.runTransformsOnHtml(X,w),X=yield pL(X,this.boostrap,w,C,vL[a]),P)if(this.inlineCriticalCssProcessor??=new Tx(fe=>{let ae=fe.split("/").pop()??fe;return this.assets.getServerAsset(ae).text()}),a===On.Server&&typeof crypto>"u"&&console.error("The global 'crypto' module is unavailable. If you are running on Node.js, please ensure you are using version 20 or later, which includes built-in support for the Web Crypto module."),a===On.Server&&typeof crypto<"u"){let fe=yield _L(X),ae=this.criticalCssLRUCache.get(fe);ae===void 0&&(ae=yield this.inlineCriticalCssProcessor.process(X),this.criticalCssLRUCache.put(fe,ae)),X=ae}else X=yield this.inlineCriticalCssProcessor.process(X);return new Response(X,T)})}buildServerAssetPathFromRequest(t){let{pathname:e}=new URL(t.url);e.endsWith("/index.html")||(e=Wh(e,"index.html"));let{baseHref:o}=this.manifest;return o.length>1&&e.startsWith(o)&&(e=e.slice(o.length)),gm(e)}runTransformsOnHtml(t,e){return qi(this,null,function*(){return this.hooks.has("html:transform:pre")&&(t=yield this.hooks.run("html:transform:pre",{html:t,url:e})),t})}},nP;function yL(i){return nP??=new Ix(i)}function xL(){nP=void 0}XI(wL);var o_=class i{title="mi-aplicacion";static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(e,o){e&1&&Ye(0,"router-outlet")},dependencies:[_n,au,rm],encapsulation:2})};var fP=(()=>{class i{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,o){this._renderer=e,this._elementRef=o}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(o){return new(o||i)(si(tc),si(hr))};static \u0275dir=Ni({type:i})}return i})(),Ox=(()=>{class i extends fP{static \u0275fac=(()=>{let e;return function(a){return(e||(e=Za(i)))(a||i)}})();static \u0275dir=Ni({type:i,features:[ms]})}return i})(),md=new Bt("");var CL={provide:md,useExisting:$a(()=>Pl),multi:!0};function EL(){let i=El()?El().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var SL=new Bt(""),Pl=(()=>{class i extends fP{_compositionMode;_composing=!1;constructor(e,o,a){super(e,o),this._compositionMode=a,this._compositionMode==null&&(this._compositionMode=!EL())}writeValue(e){let o=e??"";this.setProperty("value",o)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(o){return new(o||i)(si(tc),si(hr),si(SL,8))};static \u0275dir=Ni({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,a){o&1&&kt("input",function(_){return a._handleInput(_.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(_){return a._compositionEnd(_.target.value)})},standalone:!1,features:[Kn([CL]),ms]})}return i})();function du(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function mP(i){return i!=null&&typeof i.length=="number"}var f_=new Bt(""),m_=new Bt(""),TL=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Us=class{static min(t){return ML(t)}static max(t){return IL(t)}static required(t){return PL(t)}static requiredTrue(t){return kL(t)}static email(t){return AL(t)}static minLength(t){return DL(t)}static maxLength(t){return RL(t)}static pattern(t){return OL(t)}static nullValidator(t){return gP(t)}static compose(t){return wP(t)}static composeAsync(t){return CP(t)}};function ML(i){return t=>{if(du(t.value)||du(i))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}function IL(i){return t=>{if(du(t.value)||du(i))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}function PL(i){return du(i.value)?{required:!0}:null}function kL(i){return i.value===!0?null:{required:!0}}function AL(i){return du(i.value)||TL.test(i.value)?null:{email:!0}}function DL(i){return t=>du(t.value)||!mP(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}function RL(i){return t=>mP(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}function OL(i){if(!i)return gP;let t,e;return typeof i=="string"?(e="",i.charAt(0)!=="^"&&(e+="^"),e+=i,i.charAt(i.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),o=>{if(du(o.value))return null;let a=o.value;return t.test(a)?null:{pattern:{requiredPattern:e,actualValue:a}}}}function gP(i){return null}function _P(i){return i!=null}function bP(i){return Ug(i)?yo(i):i}function vP(i){let t={};return i.forEach(e=>{t=e!=null?gt(gt({},t),e):t}),Object.keys(t).length===0?null:t}function yP(i,t){return t.map(e=>e(i))}function LL(i){return!i.validate}function xP(i){return i.map(t=>LL(t)?t:e=>t.validate(e))}function wP(i){if(!i)return null;let t=i.filter(_P);return t.length==0?null:function(e){return vP(yP(e,t))}}function Lx(i){return i!=null?wP(xP(i)):null}function CP(i){if(!i)return null;let t=i.filter(_P);return t.length==0?null:function(e){let o=yP(e,t).map(bP);return Dg(o).pipe(wi(vP))}}function Nx(i){return i!=null?CP(xP(i)):null}function oP(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function EP(i){return i._rawValidators}function SP(i){return i._rawAsyncValidators}function Px(i){return i?Array.isArray(i)?i:[i]:[]}function a_(i,t){return Array.isArray(i)?i.includes(t):i===t}function sP(i,t){let e=Px(t);return Px(i).forEach(a=>{a_(e,a)||e.push(a)}),e}function aP(i,t){return Px(t).filter(e=>!a_(i,e))}var l_=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Lx(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Nx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},lc=class extends l_{name;get formDirective(){return null}get path(){return null}},cc=class extends l_{_parent=null;name=null;valueAccessor=null},c_=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},NL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},lq=ui(gt({},NL),{"[class.ng-submitted]":"isSubmitted"}),kl=(()=>{class i extends c_{constructor(e){super(e)}static \u0275fac=function(o){return new(o||i)(si(cc,2))};static \u0275dir=Ni({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,a){o&2&&Ki("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)},standalone:!1,features:[ms]})}return i})(),g_=(()=>{class i extends c_{constructor(e){super(e)}static \u0275fac=function(o){return new(o||i)(si(lc,10))};static \u0275dir=Ni({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(o,a){o&2&&Ki("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)("ng-submitted",a.isSubmitted)},standalone:!1,features:[ms]})}return i})();var bm="VALID",s_="INVALID",Zh="PENDING",vm="DISABLED",hu=class{},u_=class extends hu{value;source;constructor(t,e){super(),this.value=t,this.source=e}},xm=class extends hu{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},wm=class extends hu{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Xh=class extends hu{status;source;constructor(t,e){super(),this.status=t,this.source=e}},kx=class extends hu{source;constructor(t){super(),this.source=t}},Ax=class extends hu{source;constructor(t){super(),this.source=t}};function Fx(i){return(__(i)?i.validators:i)||null}function FL(i){return Array.isArray(i)?Lx(i):i||null}function zx(i,t){return(__(t)?t.asyncValidators:i)||null}function zL(i){return Array.isArray(i)?Nx(i):i||null}function __(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function TP(i,t,e){let o=i.controls;if(!(t?Object.keys(o):o).length)throw new Er(1e3,"");if(!o[e])throw new Er(1001,"")}function MP(i,t,e){i._forEachChild((o,a)=>{if(e[a]===void 0)throw new Er(1002,"")})}var Yh=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Xa(this.statusReactive)}set status(t){Xa(()=>this.statusReactive.set(t))}_status=ic(()=>this.statusReactive());statusReactive=Jc(void 0);get valid(){return this.status===bm}get invalid(){return this.status===s_}get pending(){return this.status==Zh}get disabled(){return this.status===vm}get enabled(){return this.status!==vm}errors;get pristine(){return Xa(this.pristineReactive)}set pristine(t){Xa(()=>this.pristineReactive.set(t))}_pristine=ic(()=>this.pristineReactive());pristineReactive=Jc(!0);get dirty(){return!this.pristine}get touched(){return Xa(this.touchedReactive)}set touched(t){Xa(()=>this.touchedReactive.set(t))}_touched=ic(()=>this.touchedReactive());touchedReactive=Jc(!1);get untouched(){return!this.touched}_events=new Mi;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(sP(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(sP(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(aP(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(aP(t,this._rawAsyncValidators))}hasValidator(t){return a_(this._rawValidators,t)}hasAsyncValidator(t){return a_(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let o=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(ui(gt({},t),{sourceControl:o})),e&&t.emitEvent!==!1&&this._events.next(new wm(!0,o))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let o=t.sourceControl??this;this._forEachChild(a=>{a.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:o})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,o),e&&t.emitEvent!==!1&&this._events.next(new wm(!1,o))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let o=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(ui(gt({},t),{sourceControl:o})),e&&t.emitEvent!==!1&&this._events.next(new xm(!1,o))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let o=t.sourceControl??this;this._forEachChild(a=>{a.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,o),e&&t.emitEvent!==!1&&this._events.next(new xm(!0,o))}markAsPending(t={}){this.status=Zh;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Xh(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(ui(gt({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=vm,this.errors=null,this._forEachChild(a=>{a.disable(ui(gt({},t),{onlySelf:!0}))}),this._updateValue();let o=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new u_(this.value,o)),this._events.next(new Xh(this.status,o)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ui(gt({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(a=>a(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=bm,this._forEachChild(o=>{o.enable(ui(gt({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ui(gt({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let o=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bm||this.status===Zh)&&this._runAsyncValidator(o,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new u_(this.value,e)),this._events.next(new Xh(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(ui(gt({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vm:bm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Zh,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let o=bP(this.asyncValidator(this));this._asyncValidationSubscription=o.subscribe(a=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(a,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((o,a)=>o&&o._find(a),this)}getError(t,e){let o=e?this.get(e):this;return o&&o.errors?o.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,o){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||o)&&this._events.next(new Xh(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,o)}_initObservables(){this.valueChanges=new Yi,this.statusChanges=new Yi}_calculateStatus(){return this._allControlsDisabled()?vm:this.errors?s_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zh)?Zh:this._anyControlsHaveStatus(s_)?s_:bm}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let o=!this._anyControlsDirty(),a=this.pristine!==o;this.pristine=o,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),a&&this._events.next(new xm(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new wm(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){__(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=FL(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=zL(this._rawAsyncValidators)}},Kh=class extends Yh{constructor(t,e,o){super(Fx(e),zx(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,o={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){MP(this,!0,t),Object.keys(t).forEach(o=>{TP(this,!0,o),this.controls[o].setValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(o=>{let a=this.controls[o];a&&a.patchValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((o,a)=>{o.reset(t?t[a]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,o)=>(t[o]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,o)=>o._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let o=this.controls[e];o&&t(o,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,o]of Object.entries(this.controls))if(this.contains(e)&&t(o))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,o,a)=>((o.enabled||this.disabled)&&(e[a]=o.value),e))}_reduceChildren(t,e){let o=t;return this._forEachChild((a,s)=>{o=e(o,a,s)}),o}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Dx=class extends Kh{};var Em=new Bt("CallSetDisabledState",{providedIn:"root",factory:()=>b_}),b_="always";function IP(i,t){return[...t.path,i]}function d_(i,t,e=b_){Bx(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),VL(i,t),jL(i,t),UL(i,t),BL(i,t)}function lP(i,t,e=!0){let o=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(o),t.valueAccessor.registerOnTouched(o)),p_(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function h_(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function BL(i,t){if(t.valueAccessor.setDisabledState){let e=o=>{t.valueAccessor.setDisabledState(o)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function Bx(i,t){let e=EP(i);t.validator!==null?i.setValidators(oP(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let o=SP(i);t.asyncValidator!==null?i.setAsyncValidators(oP(o,t.asyncValidator)):typeof o=="function"&&i.setAsyncValidators([o]);let a=()=>i.updateValueAndValidity();h_(t._rawValidators,a),h_(t._rawAsyncValidators,a)}function p_(i,t){let e=!1;if(i!==null){if(t.validator!==null){let a=EP(i);if(Array.isArray(a)&&a.length>0){let s=a.filter(_=>_!==t.validator);s.length!==a.length&&(e=!0,i.setValidators(s))}}if(t.asyncValidator!==null){let a=SP(i);if(Array.isArray(a)&&a.length>0){let s=a.filter(_=>_!==t.asyncValidator);s.length!==a.length&&(e=!0,i.setAsyncValidators(s))}}}let o=()=>{};return h_(t._rawValidators,o),h_(t._rawAsyncValidators,o),e}function VL(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&PP(i,t)})}function UL(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&PP(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function PP(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function jL(i,t){let e=(o,a)=>{t.valueAccessor.writeValue(o),a&&t.viewToModelUpdate(o)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function kP(i,t){i==null,Bx(i,t)}function qL(i,t){return p_(i,t)}function AP(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function HL(i){return Object.getPrototypeOf(i.constructor)===Ox}function DP(i,t){i._syncPendingControls(),t.forEach(e=>{let o=e.control;o.updateOn==="submit"&&o._pendingChange&&(e.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}function RP(i,t){if(!t)return null;Array.isArray(t);let e,o,a;return t.forEach(s=>{s.constructor===Pl?e=s:HL(s)?o=s:a=s}),a||o||e||null}function $L(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}var GL={provide:lc,useExisting:$a(()=>Vx)},ym=Promise.resolve(),Vx=(()=>{class i extends lc{callSetDisabledState;get submitted(){return Xa(this.submittedReactive)}_submitted=ic(()=>this.submittedReactive());submittedReactive=Jc(!1);_directives=new Set;form;ngSubmit=new Yi;options;constructor(e,o,a){super(),this.callSetDisabledState=a,this.form=new Kh({},Lx(e),Nx(o))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ym.then(()=>{let o=this._findContainer(e.path);e.control=o.registerControl(e.name,e.control),d_(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ym.then(()=>{let o=this._findContainer(e.path);o&&o.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){ym.then(()=>{let o=this._findContainer(e.path),a=new Kh({});kP(a,e),o.registerControl(e.name,a),a.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ym.then(()=>{let o=this._findContainer(e.path);o&&o.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,o){ym.then(()=>{this.form.get(e.path).setValue(o)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),DP(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(o){return new(o||i)(si(f_,10),si(m_,10),si(Em,8))};static \u0275dir=Ni({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(o,a){o&1&&kt("submit",function(_){return a.onSubmit(_)})("reset",function(){return a.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Kn([GL]),ms]})}return i})();function cP(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function uP(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Cm=class extends Yh{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,o){super(Fx(e),zx(o,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),__(e)&&(e.nonNullable||e.initialValueIsDefault)&&(uP(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(o=>o(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){cP(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){cP(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){uP(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var WL=i=>i instanceof Cm;var ZL={provide:cc,useExisting:$a(()=>uc)},dP=Promise.resolve(),uc=(()=>{class i extends cc{_changeDetectorRef;callSetDisabledState;control=new Cm;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Yi;constructor(e,o,a,s,_,w){super(),this._changeDetectorRef=_,this.callSetDisabledState=w,this._parent=e,this._setValidators(o),this._setAsyncValidators(a),this.valueAccessor=RP(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let o=e.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),AP(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){d_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){dP.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let o=e.isDisabled.currentValue,a=o!==0&&Qi(o);dP.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?IP(e,this._parent):[e]}static \u0275fac=function(o){return new(o||i)(si(lc,9),si(f_,10),si(m_,10),si(md,10),si(wo,8),si(Em,8))};static \u0275dir=Ni({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Kn([ZL]),ms,Ko]})}return i})(),v_=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return i})();var OP=new Bt("");var XL={provide:lc,useExisting:$a(()=>gd)},gd=(()=>{class i extends lc{callSetDisabledState;get submitted(){return Xa(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=ic(()=>this._submittedReactive());_submittedReactive=Jc(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Yi;constructor(e,o,a){super(),this.callSetDisabledState=a,this._setValidators(e),this._setAsyncValidators(o)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(p_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let o=this.form.get(e.path);return d_(o,e,this.callSetDisabledState),o.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),o}getControl(e){return this.form.get(e.path)}removeControl(e){lP(e.control||null,e,!1),$L(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,o){this.form.get(e.path).setValue(o)}onSubmit(e){return this._submittedReactive.set(!0),DP(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new kx(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new Ax(this.form))}_updateDomValue(){this.directives.forEach(e=>{let o=e.control,a=this.form.get(e.path);o!==a&&(lP(o||null,e),WL(a)&&(d_(a,e,this.callSetDisabledState),e.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let o=this.form.get(e.path);kP(o,e),o.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let o=this.form.get(e.path);o&&qL(o,e)&&o.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Bx(this.form,this),this._oldForm&&p_(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(o){return new(o||i)(si(f_,10),si(m_,10),si(Em,8))};static \u0275dir=Ni({type:i,selectors:[["","formGroup",""]],hostBindings:function(o,a){o&1&&kt("submit",function(_){return a.onSubmit(_)})("reset",function(){return a.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Kn([XL]),ms,Ko]})}return i})();var YL={provide:cc,useExisting:$a(()=>Sm)},Sm=(()=>{class i extends cc{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new Yi;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,o,a,s,_){super(),this._ngModelWarningConfig=_,this._parent=e,this._setValidators(o),this._setAsyncValidators(a),this.valueAccessor=RP(this,s)}ngOnChanges(e){this._added||this._setUpControl(),AP(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return IP(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(o){return new(o||i)(si(lc,13),si(f_,10),si(m_,10),si(md,10),si(OP,8))};static \u0275dir=Ni({type:i,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Kn([YL]),ms,Ko]})}return i})(),KL={provide:md,useExisting:$a(()=>pu),multi:!0};function LP(i,t){return i==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function QL(i){return i.split(":")[0]}var pu=(()=>{class i extends Ox{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let o=this._getOptionId(e),a=LP(o,e);this.setProperty("value",a)}registerOnChange(e){this.onChange=o=>{this.value=this._getOptionValue(o),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o),e))return o;return null}_getOptionValue(e){let o=QL(e);return this._optionMap.has(o)?this._optionMap.get(o):e}static \u0275fac=(()=>{let e;return function(a){return(e||(e=Za(i)))(a||i)}})();static \u0275dir=Ni({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(o,a){o&1&&kt("change",function(_){return a.onChange(_.target.value)})("blur",function(){return a.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Kn([KL]),ms]})}return i})(),Qh=(()=>{class i{_element;_renderer;_select;id;constructor(e,o,a){this._element=e,this._renderer=o,this._select=a,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(LP(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(o){return new(o||i)(si(hr),si(tc),si(pu,9))};static \u0275dir=Ni({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})(),JL={provide:md,useExisting:$a(()=>NP),multi:!0};function hP(i,t){return i==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function eN(i){return i.split(":")[0]}var NP=(()=>{class i extends Ox{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let o;if(Array.isArray(e)){let a=e.map(s=>this._getOptionId(s));o=(s,_)=>{s._setSelected(a.indexOf(_.toString())>-1)}}else o=(a,s)=>{a._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(e){this.onChange=o=>{let a=[],s=o.selectedOptions;if(s!==void 0){let _=s;for(let w=0;w<_.length;w++){let C=_[w],T=this._getOptionValue(C.value);a.push(T)}}else{let _=o.options;for(let w=0;w<_.length;w++){let C=_[w];if(C.selected){let T=this._getOptionValue(C.value);a.push(T)}}}this.value=a,e(a)}}_registerOption(e){let o=(this._idCounter++).toString();return this._optionMap.set(o,e),o}_getOptionId(e){for(let o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o)._value,e))return o;return null}_getOptionValue(e){let o=eN(e);return this._optionMap.has(o)?this._optionMap.get(o)._value:e}static \u0275fac=(()=>{let e;return function(a){return(e||(e=Za(i)))(a||i)}})();static \u0275dir=Ni({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(o,a){o&1&&kt("change",function(_){return a.onChange(_.target)})("blur",function(){return a.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Kn([JL]),ms]})}return i})(),Jh=(()=>{class i{_element;_renderer;_select;id;_value;constructor(e,o,a){this._element=e,this._renderer=o,this._select=a,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(hP(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(hP(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(o){return new(o||i)(si(hr),si(tc),si(NP,9))};static \u0275dir=Ni({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})();var FP=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({})}return i})(),Rx=class extends Yh{constructor(t,e,o){super(Fx(e),zx(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,o={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(t,e={}){let o=this._adjustIndex(t);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,o={}){let a=this._adjustIndex(t);a<0&&(a=0),this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),this.controls.splice(a,1),e&&(this.controls.splice(a,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){MP(this,!1,t),t.forEach((o,a)=>{TP(this,!1,a),this.at(a).setValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((o,a)=>{this.at(a)&&this.at(a).patchValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((o,a)=>{o.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,o)=>o._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,o)=>{t(e,o)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function pP(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var y_=(()=>{class i{useNonNullable=!1;get nonNullable(){let e=new i;return e.useNonNullable=!0,e}group(e,o=null){let a=this._reduceControls(e),s={};return pP(o)?s=o:o!==null&&(s.validators=o.validator,s.asyncValidators=o.asyncValidator),new Kh(a,s)}record(e,o=null){let a=this._reduceControls(e);return new Dx(a,o)}control(e,o,a){let s={};return this.useNonNullable?(pP(o)?s=o:(s.validators=o,s.asyncValidators=a),new Cm(e,ui(gt({},s),{nonNullable:!0}))):new Cm(e,o,a)}array(e,o,a){let s=e.map(_=>this._createControl(_));return new Rx(s,o,a)}_reduceControls(e){let o={};return Object.keys(e).forEach(a=>{o[a]=this._createControl(e[a])}),o}_createControl(e){if(e instanceof Cm)return e;if(e instanceof Yh)return e;if(Array.isArray(e)){let o=e[0],a=e.length>1?e[1]:null,s=e.length>2?e[2]:null;return this.control(o,a,s)}else return this.control(e)}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var fu=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:Em,useValue:e.callSetDisabledState??b_}]}}static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({imports:[FP]})}return i})(),x_=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:OP,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Em,useValue:e.callSetDisabledState??b_}]}}static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({imports:[FP]})}return i})();function XP(i,t,e){if(typeof i=="function"?i===t:i.has(t))return arguments.length<3?t:e;throw new TypeError("Private element is not present on this object")}function tN(i,t){if(t.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zP(i,t){return i.get(XP(i,t))}function iN(i,t,e){tN(i,t),t.set(i,e)}function rN(i,t,e){return i.set(XP(i,t),e),e}var nN=100,gi={},oN=()=>{gi.previousActiveElement instanceof HTMLElement?(gi.previousActiveElement.focus(),gi.previousActiveElement=null):document.body&&document.body.focus()},sN=i=>new Promise(t=>{if(!i)return t();let e=window.scrollX,o=window.scrollY;gi.restoreFocusTimeout=setTimeout(()=>{oN(),t()},nN),window.scrollTo(e,o)}),YP="swal2-",aN=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],mt=aN.reduce((i,t)=>(i[t]=YP+t,i),{}),lN=["success","warning","info","question","error"],C_=lN.reduce((i,t)=>(i[t]=YP+t,i),{}),KP="SweetAlert2:",Xx=i=>i.charAt(0).toUpperCase()+i.slice(1),Jo=i=>{console.warn(`${KP} ${typeof i=="object"?i.join(" "):i}`)},yd=i=>{console.error(`${KP} ${i}`)},BP=[],cN=i=>{BP.includes(i)||(BP.push(i),Jo(i))},QP=(i,t=null)=>{cN(`"${i}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},D_=i=>typeof i=="function"?i():i,Yx=i=>i&&typeof i.toPromise=="function",Mm=i=>Yx(i)?i.toPromise():Promise.resolve(i),Kx=i=>i&&Promise.resolve(i)===i,es=()=>document.body.querySelector(`.${mt.container}`),Im=i=>{let t=es();return t?t.querySelector(i):null},qs=i=>Im(`.${i}`),pr=()=>qs(mt.popup),np=()=>qs(mt.icon),uN=()=>qs(mt["icon-content"]),JP=()=>qs(mt.title),Qx=()=>qs(mt["html-container"]),ek=()=>qs(mt.image),Jx=()=>qs(mt["progress-steps"]),R_=()=>qs(mt["validation-message"]),Dl=()=>Im(`.${mt.actions} .${mt.confirm}`),op=()=>Im(`.${mt.actions} .${mt.cancel}`),xd=()=>Im(`.${mt.actions} .${mt.deny}`),dN=()=>qs(mt["input-label"]),sp=()=>Im(`.${mt.loader}`),Pm=()=>qs(mt.actions),tk=()=>qs(mt.footer),O_=()=>qs(mt["timer-progress-bar"]),ew=()=>qs(mt.close),hN=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,tw=()=>{let i=pr();if(!i)return[];let t=i.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),e=Array.from(t).sort((s,_)=>{let w=parseInt(s.getAttribute("tabindex")||"0"),C=parseInt(_.getAttribute("tabindex")||"0");return w>C?1:w<C?-1:0}),o=i.querySelectorAll(hN),a=Array.from(o).filter(s=>s.getAttribute("tabindex")!=="-1");return[...new Set(e.concat(a))].filter(s=>vs(s))},iw=()=>dc(document.body,mt.shown)&&!dc(document.body,mt["toast-shown"])&&!dc(document.body,mt["no-backdrop"]),L_=()=>{let i=pr();return i?dc(i,mt.toast):!1},pN=()=>{let i=pr();return i?i.hasAttribute("data-loading"):!1},Hs=(i,t)=>{if(i.textContent="",t){let o=new DOMParser().parseFromString(t,"text/html"),a=o.querySelector("head");a&&Array.from(a.childNodes).forEach(_=>{i.appendChild(_)});let s=o.querySelector("body");s&&Array.from(s.childNodes).forEach(_=>{_ instanceof HTMLVideoElement||_ instanceof HTMLAudioElement?i.appendChild(_.cloneNode(!0)):i.appendChild(_)})}},dc=(i,t)=>{if(!t)return!1;let e=t.split(/\s+/);for(let o=0;o<e.length;o++)if(!i.classList.contains(e[o]))return!1;return!0},fN=(i,t)=>{Array.from(i.classList).forEach(e=>{!Object.values(mt).includes(e)&&!Object.values(C_).includes(e)&&!Object.values(t.showClass||{}).includes(e)&&i.classList.remove(e)})},js=(i,t,e)=>{if(fN(i,t),!t.customClass)return;let o=t.customClass[e];if(o){if(typeof o!="string"&&!o.forEach){Jo(`Invalid type of customClass.${e}! Expected string or iterable object, got "${typeof o}"`);return}mr(i,o)}},N_=(i,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return i.querySelector(`.${mt.popup} > .${mt[t]}`);case"checkbox":return i.querySelector(`.${mt.popup} > .${mt.checkbox} input`);case"radio":return i.querySelector(`.${mt.popup} > .${mt.radio} input:checked`)||i.querySelector(`.${mt.popup} > .${mt.radio} input:first-child`);case"range":return i.querySelector(`.${mt.popup} > .${mt.range} input`);default:return i.querySelector(`.${mt.popup} > .${mt.input}`)}},ik=i=>{if(i.focus(),i.type!=="file"){let t=i.value;i.value="",i.value=t}},rk=(i,t,e)=>{!i||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(o=>{Array.isArray(i)?i.forEach(a=>{e?a.classList.add(o):a.classList.remove(o)}):e?i.classList.add(o):i.classList.remove(o)}))},mr=(i,t)=>{rk(i,t,!0)},ya=(i,t)=>{rk(i,t,!1)},mu=(i,t)=>{let e=Array.from(i.children);for(let o=0;o<e.length;o++){let a=e[o];if(a instanceof HTMLElement&&dc(a,t))return a}},bd=(i,t,e)=>{e===`${parseInt(e)}`&&(e=parseInt(e)),e||parseInt(e)===0?i.style.setProperty(t,typeof e=="number"?`${e}px`:e):i.style.removeProperty(t)},so=(i,t="flex")=>{i&&(i.style.display=t)},Vo=i=>{i&&(i.style.display="none")},rw=(i,t="block")=>{i&&new MutationObserver(()=>{km(i,i.innerHTML,t)}).observe(i,{childList:!0,subtree:!0})},VP=(i,t,e,o)=>{let a=i.querySelector(t);a&&a.style.setProperty(e,o)},km=(i,t,e="flex")=>{t?so(i,e):Vo(i)},vs=i=>!!(i&&(i.offsetWidth||i.offsetHeight||i.getClientRects().length)),mN=()=>!vs(Dl())&&!vs(xd())&&!vs(op()),Hx=i=>i.scrollHeight>i.clientHeight,gN=(i,t)=>{let e=i;for(;e&&e!==t;){if(Hx(e))return!0;e=e.parentElement}return!1},nk=i=>{let t=window.getComputedStyle(i),e=parseFloat(t.getPropertyValue("animation-duration")||"0"),o=parseFloat(t.getPropertyValue("transition-duration")||"0");return e>0||o>0},nw=(i,t=!1)=>{let e=O_();e&&vs(e)&&(t&&(e.style.transition="none",e.style.width="100%"),setTimeout(()=>{e.style.transition=`width ${i/1e3}s linear`,e.style.width="0%"},10))},_N=()=>{let i=O_();if(!i)return;let t=parseInt(window.getComputedStyle(i).width);i.style.removeProperty("transition"),i.style.width="100%";let e=parseInt(window.getComputedStyle(i).width),o=t/e*100;i.style.width=`${o}%`},bN=()=>typeof window>"u"||typeof document>"u",vN=`
 <div aria-labelledby="${mt.title}" aria-describedby="${mt["html-container"]}" class="${mt.popup}" tabindex="-1">
   <button type="button" class="${mt.close}"></button>
   <ul class="${mt["progress-steps"]}"></ul>
   <div class="${mt.icon}"></div>
   <img class="${mt.image}" />
   <h2 class="${mt.title}" id="${mt.title}"></h2>
   <div class="${mt["html-container"]}" id="${mt["html-container"]}"></div>
   <input class="${mt.input}" id="${mt.input}" />
   <input type="file" class="${mt.file}" />
   <div class="${mt.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${mt.select}" id="${mt.select}"></select>
   <div class="${mt.radio}"></div>
   <label class="${mt.checkbox}">
     <input type="checkbox" id="${mt.checkbox}" />
     <span class="${mt.label}"></span>
   </label>
   <textarea class="${mt.textarea}" id="${mt.textarea}"></textarea>
   <div class="${mt["validation-message"]}" id="${mt["validation-message"]}"></div>
   <div class="${mt.actions}">
     <div class="${mt.loader}"></div>
     <button type="button" class="${mt.confirm}"></button>
     <button type="button" class="${mt.deny}"></button>
     <button type="button" class="${mt.cancel}"></button>
   </div>
   <div class="${mt.footer}"></div>
   <div class="${mt["timer-progress-bar-container"]}">
     <div class="${mt["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),yN=()=>{let i=es();return i?(i.remove(),ya([document.documentElement,document.body],[mt["no-backdrop"],mt["toast-shown"],mt["has-column"]]),!0):!1},_d=()=>{gi.currentInstance.resetValidationMessage()},xN=()=>{let i=pr(),t=mu(i,mt.input),e=mu(i,mt.file),o=i.querySelector(`.${mt.range} input`),a=i.querySelector(`.${mt.range} output`),s=mu(i,mt.select),_=i.querySelector(`.${mt.checkbox} input`),w=mu(i,mt.textarea);t.oninput=_d,e.onchange=_d,s.onchange=_d,_.onchange=_d,w.oninput=_d,o.oninput=()=>{_d(),a.value=o.value},o.onchange=()=>{_d(),a.value=o.value}},wN=i=>typeof i=="string"?document.querySelector(i):i,CN=i=>{let t=pr();t.setAttribute("role",i.toast?"alert":"dialog"),t.setAttribute("aria-live",i.toast?"polite":"assertive"),i.toast||t.setAttribute("aria-modal","true")},EN=i=>{window.getComputedStyle(i).direction==="rtl"&&mr(es(),mt.rtl)},SN=i=>{let t=yN();if(bN()){yd("SweetAlert2 requires document to initialize");return}let e=document.createElement("div");e.className=mt.container,t&&mr(e,mt["no-transition"]),Hs(e,vN),e.dataset.swal2Theme=i.theme;let o=wN(i.target);o.appendChild(e),i.topLayer&&(e.setAttribute("popover",""),e.showPopover()),CN(i),EN(o),xN()},ow=(i,t)=>{i instanceof HTMLElement?t.appendChild(i):typeof i=="object"?TN(i,t):i&&Hs(t,i)},TN=(i,t)=>{i.jquery?MN(t,i):Hs(t,i.toString())},MN=(i,t)=>{if(i.textContent="",0 in t)for(let e=0;e in t;e++)i.appendChild(t[e].cloneNode(!0));else i.appendChild(t.cloneNode(!0))},IN=(i,t)=>{let e=Pm(),o=sp();!e||!o||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?Vo(e):so(e),js(e,t,"actions"),PN(e,o,t),Hs(o,t.loaderHtml||""),js(o,t,"loader"))};function PN(i,t,e){let o=Dl(),a=xd(),s=op();!o||!a||!s||(jx(o,"confirm",e),jx(a,"deny",e),jx(s,"cancel",e),kN(o,a,s,e),e.reverseButtons&&(e.toast?(i.insertBefore(s,o),i.insertBefore(a,o)):(i.insertBefore(s,t),i.insertBefore(a,t),i.insertBefore(o,t))))}function kN(i,t,e,o){if(!o.buttonsStyling){ya([i,t,e],mt.styled);return}mr([i,t,e],mt.styled),o.confirmButtonColor&&i.style.setProperty("--swal2-confirm-button-background-color",o.confirmButtonColor),o.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",o.denyButtonColor),o.cancelButtonColor&&e.style.setProperty("--swal2-cancel-button-background-color",o.cancelButtonColor),Ux(i),Ux(t),Ux(e)}function Ux(i){let t=window.getComputedStyle(i);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;let e=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");i.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${e}`))}function jx(i,t,e){let o=Xx(t);km(i,e[`show${o}Button`],"inline-block"),Hs(i,e[`${t}ButtonText`]||""),i.setAttribute("aria-label",e[`${t}ButtonAriaLabel`]||""),i.className=mt[t],js(i,e,`${t}Button`)}var AN=(i,t)=>{let e=ew();e&&(Hs(e,t.closeButtonHtml||""),js(e,t,"closeButton"),km(e,t.showCloseButton),e.setAttribute("aria-label",t.closeButtonAriaLabel||""))},DN=(i,t)=>{let e=es();e&&(RN(e,t.backdrop),ON(e,t.position),LN(e,t.grow),js(e,t,"container"))};function RN(i,t){typeof t=="string"?i.style.background=t:t||mr([document.documentElement,document.body],mt["no-backdrop"])}function ON(i,t){t&&(t in mt?mr(i,mt[t]):(Jo('The "position" parameter is not valid, defaulting to "center"'),mr(i,mt.center)))}function LN(i,t){t&&mr(i,mt[`grow-${t}`])}var Fr={innerParams:new WeakMap,domCache:new WeakMap},NN=["input","file","range","select","radio","checkbox","textarea"],FN=(i,t)=>{let e=pr();if(!e)return;let o=Fr.innerParams.get(i),a=!o||t.input!==o.input;NN.forEach(s=>{let _=mu(e,mt[s]);_&&(VN(s,t.inputAttributes),_.className=mt[s],a&&Vo(_))}),t.input&&(a&&zN(t),UN(t))},zN=i=>{if(!i.input)return;if(!vn[i.input]){yd(`Unexpected type of input! Expected ${Object.keys(vn).join(" | ")}, got "${i.input}"`);return}let t=ok(i.input);if(!t)return;let e=vn[i.input](t,i);so(t),i.inputAutoFocus&&setTimeout(()=>{ik(e)})},BN=i=>{for(let t=0;t<i.attributes.length;t++){let e=i.attributes[t].name;["id","type","value","style"].includes(e)||i.removeAttribute(e)}},VN=(i,t)=>{let e=pr();if(!e)return;let o=N_(e,i);if(o){BN(o);for(let a in t)o.setAttribute(a,t[a])}},UN=i=>{if(!i.input)return;let t=ok(i.input);t&&js(t,i,"input")},sw=(i,t)=>{!i.placeholder&&t.inputPlaceholder&&(i.placeholder=t.inputPlaceholder)},Am=(i,t,e)=>{if(e.inputLabel){let o=document.createElement("label"),a=mt["input-label"];o.setAttribute("for",i.id),o.className=a,typeof e.customClass=="object"&&mr(o,e.customClass.inputLabel),o.innerText=e.inputLabel,t.insertAdjacentElement("beforebegin",o)}},ok=i=>{let t=pr();if(t)return mu(t,mt[i]||mt.input)},E_=(i,t)=>{["string","number"].includes(typeof t)?i.value=`${t}`:Kx(t)||Jo(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},vn={};vn.text=vn.email=vn.password=vn.number=vn.tel=vn.url=vn.search=vn.date=vn["datetime-local"]=vn.time=vn.week=vn.month=(i,t)=>(E_(i,t.inputValue),Am(i,i,t),sw(i,t),i.type=t.input,i);vn.file=(i,t)=>(Am(i,i,t),sw(i,t),i);vn.range=(i,t)=>{let e=i.querySelector("input"),o=i.querySelector("output");return E_(e,t.inputValue),e.type=t.input,E_(o,t.inputValue),Am(e,i,t),i};vn.select=(i,t)=>{if(i.textContent="",t.inputPlaceholder){let e=document.createElement("option");Hs(e,t.inputPlaceholder),e.value="",e.disabled=!0,e.selected=!0,i.appendChild(e)}return Am(i,i,t),i};vn.radio=i=>(i.textContent="",i);vn.checkbox=(i,t)=>{let e=N_(pr(),"checkbox");e.value="1",e.checked=!!t.inputValue;let o=i.querySelector("span");return Hs(o,t.inputPlaceholder||t.inputLabel),e};vn.textarea=(i,t)=>{E_(i,t.inputValue),sw(i,t),Am(i,i,t);let e=o=>parseInt(window.getComputedStyle(o).marginLeft)+parseInt(window.getComputedStyle(o).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let o=parseInt(window.getComputedStyle(pr()).width),a=()=>{if(!document.body.contains(i))return;let s=i.offsetWidth+e(i);s>o?pr().style.width=`${s}px`:bd(pr(),"width",t.width)};new MutationObserver(a).observe(i,{attributes:!0,attributeFilter:["style"]})}}),i};var jN=(i,t)=>{let e=Qx();e&&(rw(e),js(e,t,"htmlContainer"),t.html?(ow(t.html,e),so(e,"block")):t.text?(e.textContent=t.text,so(e,"block")):Vo(e),FN(i,t))},qN=(i,t)=>{let e=tk();e&&(rw(e),km(e,t.footer,"block"),t.footer&&ow(t.footer,e),js(e,t,"footer"))},HN=(i,t)=>{let e=Fr.innerParams.get(i),o=np();if(!o)return;if(e&&t.icon===e.icon){jP(o,t),UP(o,t);return}if(!t.icon&&!t.iconHtml){Vo(o);return}if(t.icon&&Object.keys(C_).indexOf(t.icon)===-1){yd(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),Vo(o);return}so(o),jP(o,t),UP(o,t),mr(o,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",sk)},UP=(i,t)=>{for(let[e,o]of Object.entries(C_))t.icon!==e&&ya(i,o);mr(i,t.icon&&C_[t.icon]),WN(i,t),sk(),js(i,t,"icon")},sk=()=>{let i=pr();if(!i)return;let t=window.getComputedStyle(i).getPropertyValue("background-color"),e=i.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let o=0;o<e.length;o++)e[o].style.backgroundColor=t},$N=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,GN=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,jP=(i,t)=>{if(!t.icon&&!t.iconHtml)return;let e=i.innerHTML,o="";t.iconHtml?o=qP(t.iconHtml):t.icon==="success"?(o=$N,e=e.replace(/ style=".*?"/g,"")):t.icon==="error"?o=GN:t.icon&&(o=qP({question:"?",warning:"!",info:"i"}[t.icon])),e.trim()!==o.trim()&&Hs(i,o)},WN=(i,t)=>{if(t.iconColor){i.style.color=t.iconColor,i.style.borderColor=t.iconColor;for(let e of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])VP(i,e,"background-color",t.iconColor);VP(i,".swal2-success-ring","border-color",t.iconColor)}},qP=i=>`<div class="${mt["icon-content"]}">${i}</div>`,ZN=(i,t)=>{let e=ek();if(e){if(!t.imageUrl){Vo(e);return}so(e,""),e.setAttribute("src",t.imageUrl),e.setAttribute("alt",t.imageAlt||""),bd(e,"width",t.imageWidth),bd(e,"height",t.imageHeight),e.className=mt.image,js(e,t,"image")}},aw=!1,ak=0,lk=0,ck=0,uk=0,XN=i=>{i.addEventListener("mousedown",S_),document.body.addEventListener("mousemove",T_),i.addEventListener("mouseup",M_),i.addEventListener("touchstart",S_),document.body.addEventListener("touchmove",T_),i.addEventListener("touchend",M_)},YN=i=>{i.removeEventListener("mousedown",S_),document.body.removeEventListener("mousemove",T_),i.removeEventListener("mouseup",M_),i.removeEventListener("touchstart",S_),document.body.removeEventListener("touchmove",T_),i.removeEventListener("touchend",M_)},S_=i=>{let t=pr();if(i.target===t||np().contains(i.target)){aw=!0;let e=dk(i);ak=e.clientX,lk=e.clientY,ck=parseInt(t.style.insetInlineStart)||0,uk=parseInt(t.style.insetBlockStart)||0,mr(t,"swal2-dragging")}},T_=i=>{let t=pr();if(aw){let{clientX:e,clientY:o}=dk(i);t.style.insetInlineStart=`${ck+(e-ak)}px`,t.style.insetBlockStart=`${uk+(o-lk)}px`}},M_=()=>{let i=pr();aw=!1,ya(i,"swal2-dragging")},dk=i=>{let t=0,e=0;return i.type.startsWith("mouse")?(t=i.clientX,e=i.clientY):i.type.startsWith("touch")&&(t=i.touches[0].clientX,e=i.touches[0].clientY),{clientX:t,clientY:e}},KN=(i,t)=>{let e=es(),o=pr();if(!(!e||!o)){if(t.toast){bd(e,"width",t.width),o.style.width="100%";let a=sp();a&&o.insertBefore(a,np())}else bd(o,"width",t.width);bd(o,"padding",t.padding),t.color&&(o.style.color=t.color),t.background&&(o.style.background=t.background),Vo(R_()),QN(o,t),t.draggable&&!t.toast?(mr(o,mt.draggable),XN(o)):(ya(o,mt.draggable),YN(o))}},QN=(i,t)=>{let e=t.showClass||{};i.className=`${mt.popup} ${vs(i)?e.popup:""}`,t.toast?(mr([document.documentElement,document.body],mt["toast-shown"]),mr(i,mt.toast)):mr(i,mt.modal),js(i,t,"popup"),typeof t.customClass=="string"&&mr(i,t.customClass),t.icon&&mr(i,mt[`icon-${t.icon}`])},JN=(i,t)=>{let e=Jx();if(!e)return;let{progressSteps:o,currentProgressStep:a}=t;if(!o||o.length===0||a===void 0){Vo(e);return}so(e),e.textContent="",a>=o.length&&Jo("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),o.forEach((s,_)=>{let w=eF(s);if(e.appendChild(w),_===a&&mr(w,mt["active-progress-step"]),_!==o.length-1){let C=tF(t);e.appendChild(C)}})},eF=i=>{let t=document.createElement("li");return mr(t,mt["progress-step"]),Hs(t,i),t},tF=i=>{let t=document.createElement("li");return mr(t,mt["progress-step-line"]),i.progressStepsDistance&&bd(t,"width",i.progressStepsDistance),t},iF=(i,t)=>{let e=JP();e&&(rw(e),km(e,t.title||t.titleText,"block"),t.title&&ow(t.title,e),t.titleText&&(e.innerText=t.titleText),js(e,t,"title"))},hk=(i,t)=>{KN(i,t),DN(i,t),JN(i,t),HN(i,t),ZN(i,t),iF(i,t),AN(i,t),jN(i,t),IN(i,t),qN(i,t);let e=pr();typeof t.didRender=="function"&&e&&t.didRender(e),gi.eventEmitter.emit("didRender",e)},rF=()=>vs(pr()),pk=()=>{var i;return(i=Dl())===null||i===void 0?void 0:i.click()},nF=()=>{var i;return(i=xd())===null||i===void 0?void 0:i.click()},oF=()=>{var i;return(i=op())===null||i===void 0?void 0:i.click()},ap=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),fk=i=>{i.keydownTarget&&i.keydownHandlerAdded&&(i.keydownTarget.removeEventListener("keydown",i.keydownHandler,{capture:i.keydownListenerCapture}),i.keydownHandlerAdded=!1)},sF=(i,t,e)=>{fk(i),t.toast||(i.keydownHandler=o=>lF(t,o,e),i.keydownTarget=t.keydownListenerCapture?window:pr(),i.keydownListenerCapture=t.keydownListenerCapture,i.keydownTarget.addEventListener("keydown",i.keydownHandler,{capture:i.keydownListenerCapture}),i.keydownHandlerAdded=!0)},$x=(i,t)=>{var e;let o=tw();if(o.length){i=i+t,i===-2&&(i=o.length-1),i===o.length?i=0:i===-1&&(i=o.length-1),o[i].focus();return}(e=pr())===null||e===void 0||e.focus()},mk=["ArrowRight","ArrowDown"],aF=["ArrowLeft","ArrowUp"],lF=(i,t,e)=>{i&&(t.isComposing||t.keyCode===229||(i.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?cF(t,i):t.key==="Tab"?uF(t):[...mk,...aF].includes(t.key)?dF(t.key):t.key==="Escape"&&hF(t,i,e)))},cF=(i,t)=>{if(!D_(t.allowEnterKey))return;let e=N_(pr(),t.input);if(i.target&&e&&i.target instanceof HTMLElement&&i.target.outerHTML===e.outerHTML){if(["textarea","file"].includes(t.input))return;pk(),i.preventDefault()}},uF=i=>{let t=i.target,e=tw(),o=-1;for(let a=0;a<e.length;a++)if(t===e[a]){o=a;break}i.shiftKey?$x(o,-1):$x(o,1),i.stopPropagation(),i.preventDefault()},dF=i=>{let t=Pm(),e=Dl(),o=xd(),a=op();if(!t||!e||!o||!a)return;let s=[e,o,a];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;let _=mk.includes(i)?"nextElementSibling":"previousElementSibling",w=document.activeElement;if(w){for(let C=0;C<t.children.length;C++){if(w=w[_],!w)return;if(w instanceof HTMLButtonElement&&vs(w))break}w instanceof HTMLButtonElement&&w.focus()}},hF=(i,t,e)=>{D_(t.allowEscapeKey)&&(i.preventDefault(),e(ap.esc))},ip={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},pF=()=>{let i=es();Array.from(document.body.children).forEach(e=>{e.contains(i)||(e.hasAttribute("aria-hidden")&&e.setAttribute("data-previous-aria-hidden",e.getAttribute("aria-hidden")||""),e.setAttribute("aria-hidden","true"))})},gk=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},_k=typeof window<"u"&&!!window.GestureEvent,fF=()=>{if(_k&&!dc(document.body,mt.iosfix)){let i=document.body.scrollTop;document.body.style.top=`${i*-1}px`,mr(document.body,mt.iosfix),mF()}},mF=()=>{let i=es();if(!i)return;let t;i.ontouchstart=e=>{t=gF(e)},i.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},gF=i=>{let t=i.target,e=es(),o=Qx();return!e||!o||_F(i)||bF(i)?!1:t===e||!Hx(e)&&t instanceof HTMLElement&&!gN(t,o)&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(Hx(o)&&o.contains(t))},_F=i=>i.touches&&i.touches.length&&i.touches[0].touchType==="stylus",bF=i=>i.touches&&i.touches.length>1,vF=()=>{if(dc(document.body,mt.iosfix)){let i=parseInt(document.body.style.top,10);ya(document.body,mt.iosfix),document.body.style.top="",document.body.scrollTop=i*-1}},yF=()=>{let i=document.createElement("div");i.className=mt["scrollbar-measure"],document.body.appendChild(i);let t=i.getBoundingClientRect().width-i.clientWidth;return document.body.removeChild(i),t},ep=null,xF=i=>{ep===null&&(document.body.scrollHeight>window.innerHeight||i==="scroll")&&(ep=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${ep+yF()}px`)},wF=()=>{ep!==null&&(document.body.style.paddingRight=`${ep}px`,ep=null)};function bk(i,t,e,o){L_()?HP(i,o):(sN(e).then(()=>HP(i,o)),fk(gi)),_k?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),iw()&&(wF(),vF(),gk()),CF()}function CF(){ya([document.documentElement,document.body],[mt.shown,mt["height-auto"],mt["no-backdrop"],mt["toast-shown"]])}function gu(i){i=SF(i);let t=ip.swalPromiseResolve.get(this),e=EF(this);this.isAwaitingPromise?i.isDismissed||(Dm(this),t(i)):e&&t(i)}var EF=i=>{let t=pr();if(!t)return!1;let e=Fr.innerParams.get(i);if(!e||dc(t,e.hideClass.popup))return!1;ya(t,e.showClass.popup),mr(t,e.hideClass.popup);let o=es();return ya(o,e.showClass.backdrop),mr(o,e.hideClass.backdrop),TF(i,t,e),!0};function vk(i){let t=ip.swalPromiseReject.get(this);Dm(this),t&&t(i)}var Dm=i=>{i.isAwaitingPromise&&(delete i.isAwaitingPromise,Fr.innerParams.get(i)||i._destroy())},SF=i=>typeof i>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},i),TF=(i,t,e)=>{var o;let a=es(),s=nk(t);typeof e.willClose=="function"&&e.willClose(t),(o=gi.eventEmitter)===null||o===void 0||o.emit("willClose",t),s?MF(i,t,a,e.returnFocus,e.didClose):bk(i,a,e.returnFocus,e.didClose)},MF=(i,t,e,o,a)=>{gi.swalCloseEventFinishedCallback=bk.bind(null,i,e,o,a);let s=function(_){if(_.target===t){var w;(w=gi.swalCloseEventFinishedCallback)===null||w===void 0||w.call(gi),delete gi.swalCloseEventFinishedCallback,t.removeEventListener("animationend",s),t.removeEventListener("transitionend",s)}};t.addEventListener("animationend",s),t.addEventListener("transitionend",s)},HP=(i,t)=>{setTimeout(()=>{var e;typeof t=="function"&&t.bind(i.params)(),(e=gi.eventEmitter)===null||e===void 0||e.emit("didClose"),i._destroy&&i._destroy()})},rp=i=>{let t=pr();if(t||new qr,t=pr(),!t)return;let e=sp();L_()?Vo(np()):IF(t,i),so(e),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},IF=(i,t)=>{let e=Pm(),o=sp();!e||!o||(!t&&vs(Dl())&&(t=Dl()),so(e),t&&(Vo(t),o.setAttribute("data-button-to-replace",t.className),e.insertBefore(o,t)),mr([i,e],mt.loading))},PF=(i,t)=>{t.input==="select"||t.input==="radio"?OF(i,t):["text","email","number","tel","textarea"].some(e=>e===t.input)&&(Yx(t.inputValue)||Kx(t.inputValue))&&(rp(Dl()),LF(i,t))},kF=(i,t)=>{let e=i.getInput();if(!e)return null;switch(t.input){case"checkbox":return AF(e);case"radio":return DF(e);case"file":return RF(e);default:return t.inputAutoTrim?e.value.trim():e.value}},AF=i=>i.checked?1:0,DF=i=>i.checked?i.value:null,RF=i=>i.files&&i.files.length?i.getAttribute("multiple")!==null?i.files:i.files[0]:null,OF=(i,t)=>{let e=pr();if(!e)return;let o=a=>{t.input==="select"?NF(e,I_(a),t):t.input==="radio"&&FF(e,I_(a),t)};Yx(t.inputOptions)||Kx(t.inputOptions)?(rp(Dl()),Mm(t.inputOptions).then(a=>{i.hideLoading(),o(a)})):typeof t.inputOptions=="object"?o(t.inputOptions):yd(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},LF=(i,t)=>{let e=i.getInput();e&&(Vo(e),Mm(t.inputValue).then(o=>{e.value=t.input==="number"?`${parseFloat(o)||0}`:`${o}`,so(e),e.focus(),i.hideLoading()}).catch(o=>{yd(`Error in inputValue promise: ${o}`),e.value="",so(e),e.focus(),i.hideLoading()}))};function NF(i,t,e){let o=mu(i,mt.select);if(!o)return;let a=(s,_,w)=>{let C=document.createElement("option");C.value=w,Hs(C,_),C.selected=yk(w,e.inputValue),s.appendChild(C)};t.forEach(s=>{let _=s[0],w=s[1];if(Array.isArray(w)){let C=document.createElement("optgroup");C.label=_,C.disabled=!1,o.appendChild(C),w.forEach(T=>a(C,T[1],T[0]))}else a(o,w,_)}),o.focus()}function FF(i,t,e){let o=mu(i,mt.radio);if(!o)return;t.forEach(s=>{let _=s[0],w=s[1],C=document.createElement("input"),T=document.createElement("label");C.type="radio",C.name=mt.radio,C.value=_,yk(_,e.inputValue)&&(C.checked=!0);let I=document.createElement("span");Hs(I,w),I.className=mt.label,T.appendChild(C),T.appendChild(I),o.appendChild(T)});let a=o.querySelectorAll("input");a.length&&a[0].focus()}var I_=i=>{let t=[];return i instanceof Map?i.forEach((e,o)=>{let a=e;typeof a=="object"&&(a=I_(a)),t.push([o,a])}):Object.keys(i).forEach(e=>{let o=i[e];typeof o=="object"&&(o=I_(o)),t.push([e,o])}),t},yk=(i,t)=>!!t&&t.toString()===i.toString(),zF=i=>{let t=Fr.innerParams.get(i);i.disableButtons(),t.input?xk(i,"confirm"):cw(i,!0)},BF=i=>{let t=Fr.innerParams.get(i);i.disableButtons(),t.returnInputValueOnDeny?xk(i,"deny"):lw(i,!1)},VF=(i,t)=>{i.disableButtons(),t(ap.cancel)},xk=(i,t)=>{let e=Fr.innerParams.get(i);if(!e.input){yd(`The "input" parameter is needed to be set when using returnInputValueOn${Xx(t)}`);return}let o=i.getInput(),a=kF(i,e);e.inputValidator?UF(i,a,t):o&&!o.checkValidity()?(i.enableButtons(),i.showValidationMessage(e.validationMessage||o.validationMessage)):t==="deny"?lw(i,a):cw(i,a)},UF=(i,t,e)=>{let o=Fr.innerParams.get(i);i.disableInput(),Promise.resolve().then(()=>Mm(o.inputValidator(t,o.validationMessage))).then(s=>{i.enableButtons(),i.enableInput(),s?i.showValidationMessage(s):e==="deny"?lw(i,t):cw(i,t)})},lw=(i,t)=>{let e=Fr.innerParams.get(i||void 0);e.showLoaderOnDeny&&rp(xd()),e.preDeny?(i.isAwaitingPromise=!0,Promise.resolve().then(()=>Mm(e.preDeny(t,e.validationMessage))).then(a=>{a===!1?(i.hideLoading(),Dm(i)):i.close({isDenied:!0,value:typeof a>"u"?t:a})}).catch(a=>wk(i||void 0,a))):i.close({isDenied:!0,value:t})},$P=(i,t)=>{i.close({isConfirmed:!0,value:t})},wk=(i,t)=>{i.rejectPromise(t)},cw=(i,t)=>{let e=Fr.innerParams.get(i||void 0);e.showLoaderOnConfirm&&rp(),e.preConfirm?(i.resetValidationMessage(),i.isAwaitingPromise=!0,Promise.resolve().then(()=>Mm(e.preConfirm(t,e.validationMessage))).then(a=>{vs(R_())||a===!1?(i.hideLoading(),Dm(i)):$P(i,typeof a>"u"?t:a)}).catch(a=>wk(i||void 0,a))):$P(i,t)};function P_(){let i=Fr.innerParams.get(this);if(!i)return;let t=Fr.domCache.get(this);Vo(t.loader),L_()?i.icon&&so(np()):jF(t),ya([t.popup,t.actions],mt.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}var jF=i=>{let t=i.popup.getElementsByClassName(i.loader.getAttribute("data-button-to-replace"));t.length?so(t[0],"inline-block"):mN()&&Vo(i.actions)};function Ck(){let i=Fr.innerParams.get(this),t=Fr.domCache.get(this);return t?N_(t.popup,i.input):null}function Ek(i,t,e){let o=Fr.domCache.get(i);t.forEach(a=>{o[a].disabled=e})}function Sk(i,t){let e=pr();if(!(!e||!i))if(i.type==="radio"){let o=e.querySelectorAll(`[name="${mt.radio}"]`);for(let a=0;a<o.length;a++)o[a].disabled=t}else i.disabled=t}function Tk(){Ek(this,["confirmButton","denyButton","cancelButton"],!1)}function Mk(){Ek(this,["confirmButton","denyButton","cancelButton"],!0)}function Ik(){Sk(this.getInput(),!1)}function Pk(){Sk(this.getInput(),!0)}function kk(i){let t=Fr.domCache.get(this),e=Fr.innerParams.get(this);Hs(t.validationMessage,i),t.validationMessage.className=mt["validation-message"],e.customClass&&e.customClass.validationMessage&&mr(t.validationMessage,e.customClass.validationMessage),so(t.validationMessage);let o=this.getInput();o&&(o.setAttribute("aria-invalid","true"),o.setAttribute("aria-describedby",mt["validation-message"]),ik(o),mr(o,mt.inputerror))}function Ak(){let i=Fr.domCache.get(this);i.validationMessage&&Vo(i.validationMessage);let t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),ya(t,mt.inputerror))}var tp={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},qF=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],HF={allowEnterKey:void 0},$F=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Dk=i=>Object.prototype.hasOwnProperty.call(tp,i),Rk=i=>qF.indexOf(i)!==-1,Ok=i=>HF[i],GF=i=>{Dk(i)||Jo(`Unknown parameter "${i}"`)},WF=i=>{$F.includes(i)&&Jo(`The parameter "${i}" is incompatible with toasts`)},ZF=i=>{let t=Ok(i);t&&QP(i,t)},Lk=i=>{i.backdrop===!1&&i.allowOutsideClick&&Jo('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),i.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(i.theme)&&Jo(`Invalid theme "${i.theme}"`);for(let t in i)GF(t),i.toast&&WF(t),ZF(t)};function Nk(i){let t=es(),e=pr(),o=Fr.innerParams.get(this);if(!e||dc(e,o.hideClass.popup)){Jo("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let a=XF(i),s=Object.assign({},o,a);Lk(s),t.dataset.swal2Theme=s.theme,hk(this,s),Fr.innerParams.set(this,s),Object.defineProperties(this,{params:{value:Object.assign({},this.params,i),writable:!1,enumerable:!0}})}var XF=i=>{let t={};return Object.keys(i).forEach(e=>{Rk(e)?t[e]=i[e]:Jo(`Invalid parameter to update: ${e}`)}),t};function Fk(){let i=Fr.domCache.get(this),t=Fr.innerParams.get(this);if(!t){zk(this);return}i.popup&&gi.swalCloseEventFinishedCallback&&(gi.swalCloseEventFinishedCallback(),delete gi.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),gi.eventEmitter.emit("didDestroy"),YF(this)}var YF=i=>{zk(i),delete i.params,delete gi.keydownHandler,delete gi.keydownTarget,delete gi.currentInstance},zk=i=>{i.isAwaitingPromise?(qx(Fr,i),i.isAwaitingPromise=!0):(qx(ip,i),qx(Fr,i),delete i.isAwaitingPromise,delete i.disableButtons,delete i.enableButtons,delete i.getInput,delete i.disableInput,delete i.enableInput,delete i.hideLoading,delete i.disableLoading,delete i.showValidationMessage,delete i.resetValidationMessage,delete i.close,delete i.closePopup,delete i.closeModal,delete i.closeToast,delete i.rejectPromise,delete i.update,delete i._destroy)},qx=(i,t)=>{for(let e in i)i[e].delete(t)},KF=Object.freeze({__proto__:null,_destroy:Fk,close:gu,closeModal:gu,closePopup:gu,closeToast:gu,disableButtons:Mk,disableInput:Pk,disableLoading:P_,enableButtons:Tk,enableInput:Ik,getInput:Ck,handleAwaitingPromise:Dm,hideLoading:P_,rejectPromise:vk,resetValidationMessage:Ak,showValidationMessage:kk,update:Nk}),QF=(i,t,e)=>{i.toast?JF(i,t,e):(t9(t),i9(t),r9(i,t,e))},JF=(i,t,e)=>{t.popup.onclick=()=>{i&&(e9(i)||i.timer||i.input)||e(ap.close)}},e9=i=>!!(i.showConfirmButton||i.showDenyButton||i.showCancelButton||i.showCloseButton),k_=!1,t9=i=>{i.popup.onmousedown=()=>{i.container.onmouseup=function(t){i.container.onmouseup=()=>{},t.target===i.container&&(k_=!0)}}},i9=i=>{i.container.onmousedown=t=>{t.target===i.container&&t.preventDefault(),i.popup.onmouseup=function(e){i.popup.onmouseup=()=>{},(e.target===i.popup||e.target instanceof HTMLElement&&i.popup.contains(e.target))&&(k_=!0)}}},r9=(i,t,e)=>{t.container.onclick=o=>{if(k_){k_=!1;return}o.target===t.container&&D_(i.allowOutsideClick)&&e(ap.backdrop)}},n9=i=>typeof i=="object"&&i.jquery,GP=i=>i instanceof Element||n9(i),o9=i=>{let t={};return typeof i[0]=="object"&&!GP(i[0])?Object.assign(t,i[0]):["title","html","icon"].forEach((e,o)=>{let a=i[o];typeof a=="string"||GP(a)?t[e]=a:a!==void 0&&yd(`Unexpected type of ${e}! Expected "string" or "Element", got ${typeof a}`)}),t};function s9(...i){return new this(...i)}function a9(i){class t extends this{_main(o,a){return super._main(o,Object.assign({},i,a))}}return t}var l9=()=>gi.timeout&&gi.timeout.getTimerLeft(),Bk=()=>{if(gi.timeout)return _N(),gi.timeout.stop()},Vk=()=>{if(gi.timeout){let i=gi.timeout.start();return nw(i),i}},c9=()=>{let i=gi.timeout;return i&&(i.running?Bk():Vk())},u9=i=>{if(gi.timeout){let t=gi.timeout.increase(i);return nw(t,!0),t}},d9=()=>!!(gi.timeout&&gi.timeout.isRunning()),WP=!1,Gx={};function h9(i="data-swal-template"){Gx[i]=this,WP||(document.body.addEventListener("click",p9),WP=!0)}var p9=i=>{for(let t=i.target;t&&t!==document;t=t.parentNode)for(let e in Gx){let o=t.getAttribute(e);if(o){Gx[e].fire({template:o});return}}},Wx=class{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,e){let o=this._getHandlersByEventName(t);o.includes(e)||o.push(e)}once(t,e){let o=(...a)=>{this.removeListener(t,o),e.apply(this,a)};this.on(t,o)}emit(t,...e){this._getHandlersByEventName(t).forEach(o=>{try{o.apply(this,e)}catch(a){console.error(a)}})}removeListener(t,e){let o=this._getHandlersByEventName(t),a=o.indexOf(e);a>-1&&o.splice(a,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}};gi.eventEmitter=new Wx;var f9=(i,t)=>{gi.eventEmitter.on(i,t)},m9=(i,t)=>{gi.eventEmitter.once(i,t)},g9=(i,t)=>{if(!i){gi.eventEmitter.reset();return}t?gi.eventEmitter.removeListener(i,t):gi.eventEmitter.removeAllListeners(i)},_9=Object.freeze({__proto__:null,argsToParams:o9,bindClickHandler:h9,clickCancel:oF,clickConfirm:pk,clickDeny:nF,enableLoading:rp,fire:s9,getActions:Pm,getCancelButton:op,getCloseButton:ew,getConfirmButton:Dl,getContainer:es,getDenyButton:xd,getFocusableElements:tw,getFooter:tk,getHtmlContainer:Qx,getIcon:np,getIconContent:uN,getImage:ek,getInputLabel:dN,getLoader:sp,getPopup:pr,getProgressSteps:Jx,getTimerLeft:l9,getTimerProgressBar:O_,getTitle:JP,getValidationMessage:R_,increaseTimer:u9,isDeprecatedParameter:Ok,isLoading:pN,isTimerRunning:d9,isUpdatableParameter:Rk,isValidParameter:Dk,isVisible:rF,mixin:a9,off:g9,on:f9,once:m9,resumeTimer:Vk,showLoading:rp,stopTimer:Bk,toggleTimer:c9}),Zx=class{constructor(t,e){this.callback=t,this.remaining=e,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){let e=this.running;return e&&this.stop(),this.remaining+=t,e&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}},Uk=["swal-title","swal-html","swal-footer"],b9=i=>{let t=typeof i.template=="string"?document.querySelector(i.template):i.template;if(!t)return{};let e=t.content;return T9(e),Object.assign(v9(e),y9(e),x9(e),w9(e),C9(e),E9(e),S9(e,Uk))},v9=i=>{let t={};return Array.from(i.querySelectorAll("swal-param")).forEach(o=>{vd(o,["name","value"]);let a=o.getAttribute("name"),s=o.getAttribute("value");!a||!s||(typeof tp[a]=="boolean"?t[a]=s!=="false":typeof tp[a]=="object"?t[a]=JSON.parse(s):t[a]=s)}),t},y9=i=>{let t={};return Array.from(i.querySelectorAll("swal-function-param")).forEach(o=>{let a=o.getAttribute("name"),s=o.getAttribute("value");!a||!s||(t[a]=new Function(`return ${s}`)())}),t},x9=i=>{let t={};return Array.from(i.querySelectorAll("swal-button")).forEach(o=>{vd(o,["type","color","aria-label"]);let a=o.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(t[`${a}ButtonText`]=o.innerHTML,t[`show${Xx(a)}Button`]=!0,o.hasAttribute("color")&&(t[`${a}ButtonColor`]=o.getAttribute("color")),o.hasAttribute("aria-label")&&(t[`${a}ButtonAriaLabel`]=o.getAttribute("aria-label")))}),t},w9=i=>{let t={},e=i.querySelector("swal-image");return e&&(vd(e,["src","width","height","alt"]),e.hasAttribute("src")&&(t.imageUrl=e.getAttribute("src")||void 0),e.hasAttribute("width")&&(t.imageWidth=e.getAttribute("width")||void 0),e.hasAttribute("height")&&(t.imageHeight=e.getAttribute("height")||void 0),e.hasAttribute("alt")&&(t.imageAlt=e.getAttribute("alt")||void 0)),t},C9=i=>{let t={},e=i.querySelector("swal-icon");return e&&(vd(e,["type","color"]),e.hasAttribute("type")&&(t.icon=e.getAttribute("type")),e.hasAttribute("color")&&(t.iconColor=e.getAttribute("color")),t.iconHtml=e.innerHTML),t},E9=i=>{let t={},e=i.querySelector("swal-input");e&&(vd(e,["type","label","placeholder","value"]),t.input=e.getAttribute("type")||"text",e.hasAttribute("label")&&(t.inputLabel=e.getAttribute("label")),e.hasAttribute("placeholder")&&(t.inputPlaceholder=e.getAttribute("placeholder")),e.hasAttribute("value")&&(t.inputValue=e.getAttribute("value")));let o=Array.from(i.querySelectorAll("swal-input-option"));return o.length&&(t.inputOptions={},o.forEach(a=>{vd(a,["value"]);let s=a.getAttribute("value");if(!s)return;let _=a.innerHTML;t.inputOptions[s]=_})),t},S9=(i,t)=>{let e={};for(let o in t){let a=t[o],s=i.querySelector(a);s&&(vd(s,[]),e[a.replace(/^swal-/,"")]=s.innerHTML.trim())}return e},T9=i=>{let t=Uk.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(i.children).forEach(e=>{let o=e.tagName.toLowerCase();t.includes(o)||Jo(`Unrecognized element <${o}>`)})},vd=(i,t)=>{Array.from(i.attributes).forEach(e=>{t.indexOf(e.name)===-1&&Jo([`Unrecognized attribute "${e.name}" on <${i.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},jk=10,M9=i=>{let t=es(),e=pr();typeof i.willOpen=="function"&&i.willOpen(e),gi.eventEmitter.emit("willOpen",e);let a=window.getComputedStyle(document.body).overflowY;k9(t,e,i),setTimeout(()=>{I9(t,e)},jk),iw()&&(P9(t,i.scrollbarPadding,a),pF()),!L_()&&!gi.previousActiveElement&&(gi.previousActiveElement=document.activeElement),typeof i.didOpen=="function"&&setTimeout(()=>i.didOpen(e)),gi.eventEmitter.emit("didOpen",e),ya(t,mt["no-transition"])},A_=i=>{let t=pr();if(i.target!==t)return;let e=es();t.removeEventListener("animationend",A_),t.removeEventListener("transitionend",A_),e.style.overflowY="auto"},I9=(i,t)=>{nk(t)?(i.style.overflowY="hidden",t.addEventListener("animationend",A_),t.addEventListener("transitionend",A_)):i.style.overflowY="auto"},P9=(i,t,e)=>{fF(),t&&e!=="hidden"&&xF(e),setTimeout(()=>{i.scrollTop=0})},k9=(i,t,e)=>{mr(i,e.showClass.backdrop),e.animation?(t.style.setProperty("opacity","0","important"),so(t,"grid"),setTimeout(()=>{mr(t,e.showClass.popup),t.style.removeProperty("opacity")},jk)):so(t,"grid"),mr([document.documentElement,document.body],mt.shown),e.heightAuto&&e.backdrop&&!e.toast&&mr([document.documentElement,document.body],mt["height-auto"])},ZP={email:(i,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(i)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(i,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(i)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function A9(i){i.inputValidator||(i.input==="email"&&(i.inputValidator=ZP.email),i.input==="url"&&(i.inputValidator=ZP.url))}function D9(i){(!i.target||typeof i.target=="string"&&!document.querySelector(i.target)||typeof i.target!="string"&&!i.target.appendChild)&&(Jo('Target parameter is not valid, defaulting to "body"'),i.target="body")}function R9(i){A9(i),i.showLoaderOnConfirm&&!i.preConfirm&&Jo(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),D9(i),typeof i.title=="string"&&(i.title=i.title.split(`
`).join("<br />")),SN(i)}var Al,w_=new WeakMap,Jr=class{constructor(...t){if(iN(this,w_,void 0),typeof window>"u")return;Al=this;let e=Object.freeze(this.constructor.argsToParams(t));this.params=e,this.isAwaitingPromise=!1,rN(w_,this,this._main(Al.params))}_main(t,e={}){if(Lk(Object.assign({},e,t)),gi.currentInstance){let s=ip.swalPromiseResolve.get(gi.currentInstance),{isAwaitingPromise:_}=gi.currentInstance;gi.currentInstance._destroy(),_||s({isDismissed:!0}),iw()&&gk()}gi.currentInstance=Al;let o=L9(t,e);R9(o),Object.freeze(o),gi.timeout&&(gi.timeout.stop(),delete gi.timeout),clearTimeout(gi.restoreFocusTimeout);let a=N9(Al);return hk(Al,o),Fr.innerParams.set(Al,o),O9(Al,a,o)}then(t){return zP(w_,this).then(t)}finally(t){return zP(w_,this).finally(t)}},O9=(i,t,e)=>new Promise((o,a)=>{let s=_=>{i.close({isDismissed:!0,dismiss:_})};ip.swalPromiseResolve.set(i,o),ip.swalPromiseReject.set(i,a),t.confirmButton.onclick=()=>{zF(i)},t.denyButton.onclick=()=>{BF(i)},t.cancelButton.onclick=()=>{VF(i,s)},t.closeButton.onclick=()=>{s(ap.close)},QF(e,t,s),sF(gi,e,s),PF(i,e),M9(e),F9(gi,e,s),z9(t,e),setTimeout(()=>{t.container.scrollTop=0})}),L9=(i,t)=>{let e=b9(i),o=Object.assign({},tp,t,e,i);return o.showClass=Object.assign({},tp.showClass,o.showClass),o.hideClass=Object.assign({},tp.hideClass,o.hideClass),o.animation===!1&&(o.showClass={backdrop:"swal2-noanimation"},o.hideClass={}),o},N9=i=>{let t={popup:pr(),container:es(),actions:Pm(),confirmButton:Dl(),denyButton:xd(),cancelButton:op(),loader:sp(),closeButton:ew(),validationMessage:R_(),progressSteps:Jx()};return Fr.domCache.set(i,t),t},F9=(i,t,e)=>{let o=O_();Vo(o),t.timer&&(i.timeout=new Zx(()=>{e("timer"),delete i.timeout},t.timer),t.timerProgressBar&&(so(o),js(o,t,"timerProgressBar"),setTimeout(()=>{i.timeout&&i.timeout.running&&nw(t.timer)})))},z9=(i,t)=>{if(!t.toast){if(!D_(t.allowEnterKey)){QP("allowEnterKey"),U9();return}B9(i)||V9(i,t)||$x(-1,1)}},B9=i=>{let t=Array.from(i.popup.querySelectorAll("[autofocus]"));for(let e of t)if(e instanceof HTMLElement&&vs(e))return e.focus(),!0;return!1},V9=(i,t)=>t.focusDeny&&vs(i.denyButton)?(i.denyButton.focus(),!0):t.focusCancel&&vs(i.cancelButton)?(i.cancelButton.focus(),!0):t.focusConfirm&&vs(i.confirmButton)?(i.confirmButton.focus(),!0):!1,U9=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let i=new Date,t=localStorage.getItem("swal-initiation");t?(i.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let e=document.createElement("audio");e.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",e.loop=!0,document.body.appendChild(e),setTimeout(()=>{e.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${i}`)}Jr.prototype.disableButtons=Mk;Jr.prototype.enableButtons=Tk;Jr.prototype.getInput=Ck;Jr.prototype.disableInput=Pk;Jr.prototype.enableInput=Ik;Jr.prototype.hideLoading=P_;Jr.prototype.disableLoading=P_;Jr.prototype.showValidationMessage=kk;Jr.prototype.resetValidationMessage=Ak;Jr.prototype.close=gu;Jr.prototype.closePopup=gu;Jr.prototype.closeModal=gu;Jr.prototype.closeToast=gu;Jr.prototype.rejectPromise=vk;Jr.prototype.update=Nk;Jr.prototype._destroy=Fk;Object.assign(Jr,_9);Object.keys(KF).forEach(i=>{Jr[i]=function(...t){return Al&&Al[i]?Al[i](...t):null}});Jr.DismissReason=ap;Jr.version="11.22.0";var qr=Jr;qr.default=qr;typeof document<"u"&&function(i,t){var e=i.createElement("style");if(i.getElementsByTagName("head")[0].appendChild(e),e.styleSheet)e.styleSheet.disabled||(e.styleSheet.cssText=t);else try{e.innerHTML=t}catch{e.innerText=t}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');var F_=class i{constructor(t,e){this.http=t;this.router=e}apiUrl="http://nepqas.medellin.gov.co/flask-fiware/api/keycloak/login";login(t){return this.http.post(this.apiUrl,t).pipe(Ur(e=>{localStorage.setItem("access_tokenadmin",e.access_token),this.router.navigate(["/inicio"])}))}logout(){localStorage.removeItem("access_tokenadmin"),this.router.navigate(["/login"])}isLoggedIn(){return!!localStorage.getItem("access_tokenadmin")}static \u0275fac=function(e){return new(e||i)(hi(Fs),hi(Co))};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})};function q9(i,t){if(i&1&&(z(0,"p",9),ce(1),U()),i&2){let e=at();ye(),ai(e.errorMsg)}}var Rm=class i{constructor(t,e){this.fb=t;this.auth=e;this.loginForm=this.fb.group({username:["",Us.required],password:["",Us.required]})}loginForm;errorMsg="";logout(){localStorage.getItem("access_token")?qr.fire({icon:"error",title:"Error",text:"No se pudo eliminar el token",confirmButtonText:"OK"}):qr.fire({icon:"success",title:"Token eliminado",text:"El token de acceso ha sido removido del almacenamiento local.",confirmButtonText:"OK"})}onSubmit(){if(this.loginForm.invalid){qr.fire({icon:"warning",title:"Formulario incompleto",text:"Por favor diligencie el formulario de inicio de sesi\xF3n",confirmButtonColor:"#334155"});return}this.auth.login(this.loginForm.value).subscribe({next:()=>{},error:t=>{console.error(t),this.errorMsg="Usuario o contrase\xF1a incorrectos",qr.fire({icon:"error",title:"Error de autenticaci\xF3n",text:this.errorMsg,confirmButtonColor:"#334155"})}})}static \u0275fac=function(e){return new(e||i)(si(y_),si(F_))};static \u0275cmp=Ot({type:i,selectors:[["app-login"]],decls:14,vars:2,consts:[[1,"login-wrapper"],[1,"login-card"],[1,"logo"],["src","https://www.fiware.org/custom/brand-guide/img/logo/fiware/primary/jpg/logo-fiware.jpg?","alt","Logo Alcald\xEDa de Medell\xEDn",1,"login-logo"],[3,"ngSubmit","formGroup"],["type","text","formControlName","username","placeholder","Usuario"],["type","password","formControlName","password","placeholder","Contrase\xF1a"],["type","submit"],["class","error",4,"ngIf"],[1,"error"]],template:function(e,o){e&1&&(z(0,"div",0)(1,"div",1)(2,"h1",2),ce(3,"Medell\xEDn "),z(4,"span"),ce(5,"Inteligente"),U()(),z(6,"div",2),Ye(7,"img",3),U(),z(8,"form",4),kt("ngSubmit",function(){return o.onSubmit()}),Ye(9,"input",5)(10,"input",6),z(11,"button",7),ce(12,"Iniciar Sesi\xF3n"),U()(),Et(13,q9,2,1,"p",8),U()()),e&2&&(ye(8),st("formGroup",o.loginForm),ye(5),st("ngIf",o.errorMsg))},dependencies:[_n,_s,x_,v_,Pl,kl,g_,gd,Sm,Tl,au],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;height:100vh;width:100%;background:linear-gradient(135deg,#ffffffe6,#f5f5f5e6);display:flex;justify-content:center;align-items:center;perspective:1000px}.login-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:90%;max-width:400px;padding:2rem}.login-card[_ngcontent-%COMP%]{background:#ffffffbf;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border-radius:20px;padding:2rem;width:100%;box-shadow:0 15px 30px #0000001a,inset 0 0 60px #ffffff4d;transform-style:preserve-3d;transition:transform .6s cubic-bezier(.4,0,.2,1);border:1.5px solid rgba(200,200,200,.4);animation:_ngcontent-%COMP%_fadeInGlass 1.2s ease forwards}.login-card[_ngcontent-%COMP%]:hover{transform:rotateY(8deg) rotateX(8deg) translateZ(10px);box-shadow:0 25px 40px #00000026,inset 0 0 70px #fff6}.logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.login-logo[_ngcontent-%COMP%]{max-width:150px;height:auto;filter:drop-shadow(0 0 6px rgba(0,0,0,.12))}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.8rem;border:none;border-radius:12px;background:#ffffffd9;color:#334155;outline:none;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:inset 0 0 8px #fffc,0 4px 10px #0000000d;transition:background .3s ease,box-shadow .3s ease,color .3s ease}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#64748b}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#fff;color:#1e293b;box-shadow:0 0 12px 3px #38bdf880,inset 0 0 15px #ffffffe6;transform:translateZ(5px)}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.8rem;border-radius:12px;background:#fff3;border:2px solid rgba(128,128,128,.6);color:#334155;font-weight:700;cursor:pointer;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);box-shadow:0 6px 10px #0000001f,inset 0 0 15px #ffffff80;transition:transform .3s ease,box-shadow .3s ease,background .3s ease;transform-style:preserve-3d}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#fff6;border-color:#646464e6;box-shadow:0 10px 18px #00000040,inset 0 0 20px #ffffffb3;transform:scale(1.08) translateZ(8px)}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.97) translateZ(0);box-shadow:0 4px 6px #00000026,inset 0 0 12px #fff6}.error[_ngcontent-%COMP%]{color:#ef4444;text-align:center;margin-top:1rem;animation:_ngcontent-%COMP%_pulseRed 2s infinite}@keyframes _ngcontent-%COMP%_fadeInGlass{0%{opacity:0;transform:translateY(40px) scale(.85) rotateX(10deg)}to{opacity:1;transform:translateY(0) scale(1) rotateX(0)}}@keyframes _ngcontent-%COMP%_glow{0%{text-shadow:0 0 6px #38bdf8,0 0 12px #38bdf8}to{text-shadow:0 0 14px #a78bfa,0 0 28px #a78bfa}}@keyframes _ngcontent-%COMP%_pulseRed{0%,to{opacity:1}50%{opacity:.6}}@media (max-width: 600px){.login-card[_ngcontent-%COMP%]{padding:1.5rem;border-radius:16px}.logo[_ngcontent-%COMP%]{font-size:1.5rem}form[_ngcontent-%COMP%]{gap:.8rem}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.9rem}}']})};var dw;try{dw=typeof Intl<"u"&&Intl.v8BreakIterator}catch{dw=!1}var Mo=(()=>{class i{_platformId=Le(Ls);isBrowser=this._platformId?Ef(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||dw)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Om;function H9(){if(Om==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Om=!0}))}finally{Om=Om||!1}return Om}function lp(i){return H9()?i:!!i.capture}var wd;function hw(){if(wd==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return wd=!1,wd;if("scrollBehavior"in document.documentElement.style)wd=!0;else{let i=Element.prototype.scrollTo;i?wd=!/\{\s*\[native code\]\s*\}/.test(i.toString()):wd=!1}}return wd}var uw;function $9(){if(uw==null){let i=typeof document<"u"?document.head:null;uw=!!(i&&(i.createShadowRoot||i.attachShadow))}return uw}function qk(i){if($9()){let t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function xa(i){return i.composedPath?i.composedPath()[0]:i.target}function pw(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var z_=new WeakMap,hc=(()=>{class i{_appRef;_injector=Le(Dn);_environmentInjector=Le(Wa);load(e){let o=this._appRef=this._appRef||this._injector.get(ga),a=z_.get(o);a||(a={loaders:new Set,refs:[]},z_.set(o,a),o.onDestroy(()=>{z_.get(o)?.refs.forEach(s=>s.destroy()),z_.delete(o)})),a.loaders.has(e)||(a.loaders.add(e),a.refs.push($g(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Hk=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(o,a){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return i})();function pc(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function $k(i){return i!=null&&`${i}`!="false"}function cp(i){return Array.isArray(i)?i:[i]}function yn(i){return i==null?"":typeof i=="string"?i:`${i}px`}function fc(i){return i instanceof hr?i.nativeElement:i}var G9=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Gk=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({providers:[G9]})}return i})();var Wk=new Set,Cd,W9=(()=>{class i{_platform=Le(Mo);_nonce=Le(ed,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):X9}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&Z9(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Z9(i,t){if(!Wk.has(i))try{Cd||(Cd=document.createElement("style"),t&&Cd.setAttribute("nonce",t),Cd.setAttribute("type","text/css"),document.head.appendChild(Cd)),Cd.sheet&&(Cd.sheet.insertRule(`@media ${i} {body{ }}`,0),Wk.add(i))}catch(e){console.error(e)}}function X9(i){return{matches:i==="all"||i==="",media:i,addListener:()=>{},removeListener:()=>{}}}var Xk=(()=>{class i{_mediaMatcher=Le(W9);_zone=Le(tr);_queries=new Map;_destroySubject=new Mi;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return Zk(cp(e)).some(a=>this._registerQuery(a).mql.matches)}observe(e){let a=Zk(cp(e)).map(_=>this._registerQuery(_).observable),s=mh(a);return s=Ag(s.pipe(Os(1)),s.pipe(Og(1),Rg(0))),s.pipe(wi(_=>{let w={matches:!1,breakpoints:{}};return _.forEach(({matches:C,query:T})=>{w.matches=w.matches||C,w.breakpoints[T]=C}),w}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let o=this._mediaMatcher.matchMedia(e),s={observable:new Jl(_=>{let w=C=>this._zone.run(()=>_.next(C));return o.addListener(w),()=>{o.removeListener(w)}}).pipe(xl(o),wi(({matches:_})=>({query:e,matches:_})),gn(this._destroySubject)),mql:o};return this._queries.set(e,s),s}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Zk(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var Qk=" ";function Jk(i,t,e){let o=eA(i,t);e=e.trim(),!o.some(a=>a.trim()===e)&&(o.push(e),i.setAttribute(t,o.join(Qk)))}function vw(i,t,e){let o=eA(i,t);e=e.trim();let a=o.filter(s=>s!==e);a.length?i.setAttribute(t,a.join(Qk)):i.removeAttribute(t)}function eA(i,t){return i.getAttribute(t)?.match(/\S+/g)??[]}var c7=200,gw=class{_letterKeyStream=new Mi;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new Mi;selectedItem=this._selectedItem;constructor(t,e){let o=typeof e?.debounceInterval=="number"?e.debounceInterval:c7;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(t),this._setupKeyHandler(o)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(t){this._selectedItemIndex=t}setItems(t){this._items=t}handleKey(t){let e=t.keyCode;t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(t){this._letterKeyStream.pipe(Ur(e=>this._pressedLetters.push(e)),Rg(t),ln(()=>this._pressedLetters.length>0),wi(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let o=1;o<this._items.length+1;o++){let a=(this._selectedItemIndex+o)%this._items.length,s=this._items[a];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}},_w=class{_items;_activeItemIndex=-1;_activeItem=Jc(null);_wrap=!1;_typeaheadSubscription=No.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=t=>t.disabled;constructor(t,e){this._items=t,t instanceof Fv?this._itemChangesSubscription=t.changes.subscribe(o=>this._itemsChanged(o.toArray())):bf(t)&&(this._effectRef=IE(()=>this._itemsChanged(t()),{injector:e}))}tabOut=new Mi;change=new Mi;skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new gw(e,{debounceInterval:typeof t=="number"?t:void 0,skipPredicate:o=>this._skipPredicateFn(o)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(o=>{this.setActiveItem(o)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem();this.updateActiveItem(t),this._activeItem()!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,a=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&a){this.setNextItemActive();break}else return;case 38:if(this._vertical&&a){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&a){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&a){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&a){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&a){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&a){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&a){let s=this._activeItemIndex+this._pageUpAndDown.delta,_=this._getItemsArray().length;this._setActiveItemByIndex(s<_?s:_-1,-1);break}else return;default:(a||pc(t,"shiftKey"))&&this._typeahead?.handleKey(t);return}this._typeahead?.reset(),t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),o=typeof t=="number"?t:e.indexOf(t),a=e[o];this._activeItem.set(a??null),this._activeItemIndex=o,this._typeahead?.setCurrentSelectedItemIndex(o)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let o=1;o<=e.length;o++){let a=(this._activeItemIndex+t*o+e.length)%e.length,s=e[a];if(!this._skipPredicateFn(s)){this.setActiveItem(a);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let o=this._getItemsArray();if(o[t]){for(;this._skipPredicateFn(o[t]);)if(t+=e,!o[t])return;this.setActiveItem(t)}}_getItemsArray(){return bf(this._items)?this._items():this._items instanceof Fv?this._items.toArray():this._items}_itemsChanged(t){this._typeahead?.setItems(t);let e=this._activeItem();if(e){let o=t.indexOf(e);o>-1&&o!==this._activeItemIndex&&(this._activeItemIndex=o,this._typeahead?.setCurrentSelectedItemIndex(o))}}},U_=class extends _w{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}};function yw(i){return i.buttons===0||i.detail===0}function xw(i){let t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var u7=new Bt("cdk-input-modality-detector-options"),d7={ignoreKeys:[18,17,224,91,16]},tA=650,up=lp({passive:!0,capture:!0}),h7=(()=>{class i{_platform=Le(Mo);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new ps(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(o=>o===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=xa(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<tA||(this._modality.next(yw(e)?"keyboard":"mouse"),this._mostRecentTarget=xa(e))};_onTouchstart=e=>{if(xw(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=xa(e)};constructor(){let e=Le(tr),o=Le(Oi),a=Le(u7,{optional:!0});this._options=gt(gt({},d7),a),this.modalityDetected=this._modality.pipe(Og(1)),this.modalityChanged=this.modalityDetected.pipe(pf()),this._platform.isBrowser&&e.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,up),o.addEventListener("mousedown",this._onMousedown,up),o.addEventListener("touchstart",this._onTouchstart,up)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,up),document.removeEventListener("mousedown",this._onMousedown,up),document.removeEventListener("touchstart",this._onTouchstart,up))}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),p7=new Bt("liveAnnouncerElement",{providedIn:"root",factory:f7});function f7(){return null}var m7=new Bt("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),g7=0,iA=(()=>{class i{_ngZone=Le(tr);_defaultOptions=Le(m7,{optional:!0});_liveElement;_document=Le(Oi);_previousTimeout;_currentPromise;_currentResolve;constructor(){let e=Le(p7,{optional:!0});this._liveElement=e||this._createLiveElement()}announce(e,...o){let a=this._defaultOptions,s,_;return o.length===1&&typeof o[0]=="number"?_=o[0]:[s,_]=o,this.clear(),clearTimeout(this._previousTimeout),s||(s=a&&a.politeness?a.politeness:"polite"),_==null&&a&&(_=a.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(w=>this._currentResolve=w)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof _=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),_)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",o=this._document.getElementsByClassName(e),a=this._document.createElement("div");for(let s=0;s<o.length;s++)o[s].remove();return a.classList.add(e),a.classList.add("cdk-visually-hidden"),a.setAttribute("aria-atomic","true"),a.setAttribute("aria-live","polite"),a.id=`cdk-live-announcer-${g7++}`,this._document.body.appendChild(a),a}_exposeAnnouncerToModals(e){let o=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let a=0;a<o.length;a++){let s=o[a],_=s.getAttribute("aria-owns");_?_.indexOf(e)===-1&&s.setAttribute("aria-owns",_+" "+e):s.setAttribute("aria-owns",e)}}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var V_=function(i){return i[i.IMMEDIATE=0]="IMMEDIATE",i[i.EVENTUAL=1]="EVENTUAL",i}(V_||{}),_7=new Bt("cdk-focus-monitor-default-options"),B_=lp({passive:!0,capture:!0}),rA=(()=>{class i{_ngZone=Le(tr);_platform=Le(Mo);_inputModalityDetector=Le(h7);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=Le(Oi,{optional:!0});_stopInputModalityDetector=new Mi;constructor(){let e=Le(_7,{optional:!0});this._detectionMode=e?.detectionMode||V_.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let o=xa(e);for(let a=o;a;a=a.parentElement)e.type==="focus"?this._onFocus(e,a):this._onBlur(e,a)};monitor(e,o=!1){let a=fc(e);if(!this._platform.isBrowser||a.nodeType!==1)return ti();let s=qk(a)||this._getDocument(),_=this._elementInfo.get(a);if(_)return o&&(_.checkChildren=!0),_.subject;let w={checkChildren:o,subject:new Mi,rootNode:s};return this._elementInfo.set(a,w),this._registerGlobalListeners(w),w.subject}stopMonitoring(e){let o=fc(e),a=this._elementInfo.get(o);a&&(a.subject.complete(),this._setClasses(o),this._elementInfo.delete(o),this._removeGlobalListeners(a))}focusVia(e,o,a){let s=fc(e),_=this._getDocument().activeElement;s===_?this._getClosestElementsInfo(s).forEach(([w,C])=>this._originChanged(w,o,C)):(this._setOrigin(o),typeof s.focus=="function"&&s.focus(a))}ngOnDestroy(){this._elementInfo.forEach((e,o)=>this.stopMonitoring(o))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===V_.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,o){e.classList.toggle("cdk-focused",!!o),e.classList.toggle("cdk-touch-focused",o==="touch"),e.classList.toggle("cdk-keyboard-focused",o==="keyboard"),e.classList.toggle("cdk-mouse-focused",o==="mouse"),e.classList.toggle("cdk-program-focused",o==="program")}_setOrigin(e,o=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&o,this._detectionMode===V_.IMMEDIATE){clearTimeout(this._originTimeoutId);let a=this._originFromTouchInteraction?tA:1;this._originTimeoutId=setTimeout(()=>this._origin=null,a)}})}_onFocus(e,o){let a=this._elementInfo.get(o),s=xa(e);!a||!a.checkChildren&&o!==s||this._originChanged(o,this._getFocusOrigin(s),a)}_onBlur(e,o){let a=this._elementInfo.get(o);!a||a.checkChildren&&e.relatedTarget instanceof Node&&o.contains(e.relatedTarget)||(this._setClasses(o),this._emitOrigin(a,null))}_emitOrigin(e,o){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(o))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let o=e.rootNode,a=this._rootNodeFocusListenerCount.get(o)||0;a||this._ngZone.runOutsideAngular(()=>{o.addEventListener("focus",this._rootNodeFocusAndBlurListener,B_),o.addEventListener("blur",this._rootNodeFocusAndBlurListener,B_)}),this._rootNodeFocusListenerCount.set(o,a+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(gn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){let o=e.rootNode;if(this._rootNodeFocusListenerCount.has(o)){let a=this._rootNodeFocusListenerCount.get(o);a>1?this._rootNodeFocusListenerCount.set(o,a-1):(o.removeEventListener("focus",this._rootNodeFocusAndBlurListener,B_),o.removeEventListener("blur",this._rootNodeFocusAndBlurListener,B_),this._rootNodeFocusListenerCount.delete(o))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,o,a){this._setClasses(e,o),this._emitOrigin(a,o),this._lastFocusOrigin=o}_getClosestElementsInfo(e){let o=[];return this._elementInfo.forEach((a,s)=>{(s===e||a.checkChildren&&s.contains(e))&&o.push([s,a])}),o}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:o,mostRecentModality:a}=this._inputModalityDetector;if(a!=="mouse"||!o||o===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let s=e.labels;if(s){for(let _=0;_<s.length;_++)if(s[_].contains(o))return!0}return!1}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Ed=function(i){return i[i.NONE=0]="NONE",i[i.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",i[i.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",i}(Ed||{}),Yk="cdk-high-contrast-black-on-white",Kk="cdk-high-contrast-white-on-black",fw="cdk-high-contrast-active",nA=(()=>{class i{_platform=Le(Mo);_hasCheckedHighContrastMode;_document=Le(Oi);_breakpointSubscription;constructor(){this._breakpointSubscription=Le(Xk).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ed.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let o=this._document.defaultView||window,a=o&&o.getComputedStyle?o.getComputedStyle(e):null,s=(a&&a.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ed.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ed.BLACK_ON_WHITE}return Ed.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(fw,Yk,Kk),this._hasCheckedHighContrastMode=!0;let o=this.getHighContrastMode();o===Ed.BLACK_ON_WHITE?e.add(fw,Yk):o===Ed.WHITE_ON_BLACK&&e.add(fw,Kk)}}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var mw={},wa=(()=>{class i{_appId=Le(Qc);getId(e){return this._appId!=="ng"&&(e+=this._appId),mw.hasOwnProperty(e)||(mw[e]=0),`${e}${mw[e]++}`}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var b7=new Bt("cdk-dir-doc",{providedIn:"root",factory:v7});function v7(){return Le(Oi)}var y7=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function x7(i){let t=i?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?y7.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Rl=(()=>{class i{value="ltr";change=new Yi;constructor(){let e=Le(b7,{optional:!0});if(e){let o=e.body?e.body.dir:null,a=e.documentElement?e.documentElement.dir:null;this.value=x7(o||a||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var _u=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({})}return i})();var w7=["text"],C7=[[["mat-icon"]],"*"],E7=["mat-icon","*"];function S7(i,t){if(i&1&&Ye(0,"mat-pseudo-checkbox",1),i&2){let e=at();st("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function T7(i,t){if(i&1&&Ye(0,"mat-pseudo-checkbox",3),i&2){let e=at();st("disabled",e.disabled)}}function M7(i,t){if(i&1&&(z(0,"span",4),ce(1),U()),i&2){let e=at();ye(),yi("(",e.group.label,")")}}var en=(()=>{class i{constructor(){Le(nA)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({imports:[_u,_u]})}return i})(),H_=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(t,e,o,a,s){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=o,this._parentForm=a,this._stateChanges=s}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,o=this.matcher||this._defaultMatcher,a=this.ngControl?this.ngControl.control:null,s=o?.isErrorState(a,e)??!1;s!==t&&(this.errorState=s,this._stateChanges.next())}};var uA=(()=>{class i{isErrorState(e,o){return!!(e&&e.invalid&&(e.touched||o&&o.submitted))}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$_=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["structural-styles"]],decls:0,vars:0,template:function(o,a){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return i})();var $s=function(i){return i[i.FADING_IN=0]="FADING_IN",i[i.VISIBLE=1]="VISIBLE",i[i.FADING_OUT=2]="FADING_OUT",i[i.HIDDEN=3]="HIDDEN",i}($s||{}),ww=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=$s.HIDDEN;constructor(t,e,o,a=!1){this._renderer=t,this.element=e,this.config=o,this._animationForciblyDisabledThroughCss=a}fadeOut(){this._renderer.fadeOutRipple(this)}},oA=lp({passive:!0,capture:!0}),Cw=class{_events=new Map;addHandler(t,e,o,a){let s=this._events.get(e);if(s){let _=s.get(o);_?_.add(a):s.set(o,new Set([a]))}else this._events.set(e,new Map([[o,new Set([a])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,oA)})}removeHandler(t,e,o){let a=this._events.get(t);if(!a)return;let s=a.get(e);s&&(s.delete(o),s.size===0&&a.delete(e),a.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,oA)))}_delegateEventHandler=t=>{let e=xa(t);e&&this._events.get(t.type)?.forEach((o,a)=>{(a===e||a.contains(e))&&o.forEach(s=>s.handleEvent(t))})}},sA={enterDuration:225,exitDuration:150},I7=800,aA=lp({passive:!0,capture:!0}),lA=["mousedown","touchstart"],cA=["mouseup","mouseleave","touchend","touchcancel"],P7=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(o,a){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return i})(),Ew=class i{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new Cw;constructor(t,e,o,a,s){this._target=t,this._ngZone=e,this._platform=a,a.isBrowser&&(this._containerElement=fc(o)),s&&s.get(hc).load(P7)}fadeInRipple(t,e,o={}){let a=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=gt(gt({},sA),o.animation);o.centered&&(t=a.left+a.width/2,e=a.top+a.height/2);let _=o.radius||k7(t,e,a),w=t-a.left,C=e-a.top,T=s.enterDuration,I=document.createElement("div");I.classList.add("mat-ripple-element"),I.style.left=`${w-_}px`,I.style.top=`${C-_}px`,I.style.height=`${_*2}px`,I.style.width=`${_*2}px`,o.color!=null&&(I.style.backgroundColor=o.color),I.style.transitionDuration=`${T}ms`,this._containerElement.appendChild(I);let P=window.getComputedStyle(I),R=P.transitionProperty,H=P.transitionDuration,Z=R==="none"||H==="0s"||H==="0s, 0s"||a.width===0&&a.height===0,X=new ww(this,I,o,Z);I.style.transform="scale3d(1, 1, 1)",X.state=$s.FADING_IN,o.persistent||(this._mostRecentTransientRipple=X);let fe=null;return!Z&&(T||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let ae=()=>{fe&&(fe.fallbackTimer=null),clearTimeout(re),this._finishRippleTransition(X)},ne=()=>this._destroyRipple(X),re=setTimeout(ne,T+100);I.addEventListener("transitionend",ae),I.addEventListener("transitioncancel",ne),fe={onTransitionEnd:ae,onTransitionCancel:ne,fallbackTimer:re}}),this._activeRipples.set(X,fe),(Z||!T)&&this._finishRippleTransition(X),X}fadeOutRipple(t){if(t.state===$s.FADING_OUT||t.state===$s.HIDDEN)return;let e=t.element,o=gt(gt({},sA),t.config.animation);e.style.transitionDuration=`${o.exitDuration}ms`,e.style.opacity="0",t.state=$s.FADING_OUT,(t._animationForciblyDisabledThroughCss||!o.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=fc(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,lA.forEach(o=>{i._eventManager.addHandler(this._ngZone,o,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{cA.forEach(e=>{this._triggerElement.addEventListener(e,this,aA)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===$s.FADING_IN?this._startFadeOutTransition(t):t.state===$s.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:o}=t.config;t.state=$s.VISIBLE,!o&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=$s.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=yw(t),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+I7;!this._target.rippleDisabled&&!e&&!o&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!xw(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let o=0;o<e.length;o++)this.fadeInRipple(e[o].clientX,e[o].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===$s.VISIBLE||t.config.terminateOnPointerUp&&t.state===$s.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(lA.forEach(e=>i._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(cA.forEach(e=>t.removeEventListener(e,this,aA)),this._pointerUpEventsRegistered=!1))}};function k7(i,t,e){let o=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),a=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(o*o+a*a)}var dA=new Bt("mat-ripple-global-options"),G_=(()=>{class i{_elementRef=Le(hr);_animationMode=Le(Fo,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let e=Le(tr),o=Le(Mo),a=Le(dA,{optional:!0}),s=Le(Dn);this._globalOptions=a||{},this._rippleRenderer=new Ew(this,e,this._elementRef,o,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:gt(gt(gt({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,o=0,a){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,o,gt(gt({},this.rippleConfig),a)):this._rippleRenderer.fadeInRipple(0,0,gt(gt({},this.rippleConfig),e))}static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(o,a){o&2&&Ki("mat-ripple-unbounded",a.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return i})(),Bm=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({imports:[en,en]})}return i})(),Tw=(()=>{class i{_animationMode=Le(Fo,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(o,a){o&2&&Ki("mat-pseudo-checkbox-indeterminate",a.state==="indeterminate")("mat-pseudo-checkbox-checked",a.state==="checked")("mat-pseudo-checkbox-disabled",a.disabled)("mat-pseudo-checkbox-minimal",a.appearance==="minimal")("mat-pseudo-checkbox-full",a.appearance==="full")("_mat-animation-noopable",a._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(o,a){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return i})(),A7=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({imports:[en]})}return i})(),Mw=new Bt("MAT_OPTION_PARENT_COMPONENT"),Iw=new Bt("MatOptgroup");var Sw=class{source;isUserInput;constructor(t,e=!1){this.source=t,this.isUserInput=e}},W_=(()=>{class i{_element=Le(hr);_changeDetectorRef=Le(wo);_parent=Le(Mw,{optional:!0});group=Le(Iw,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=Le(wa).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new Yi;_text;_stateChanges=new Mi;constructor(){Le(hc).load($_),Le(hc).load(Hk),this._signalDisableRipple=!!this._parent&&bf(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,o){let a=this._getHostElement();typeof a.focus=="function"&&a.focus(o)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!pc(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new Sw(this,e))}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["mat-option"]],viewQuery:function(o,a){if(o&1&&Wr(w7,7),o&2){let s;cr(s=ur())&&(a._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(o,a){o&1&&kt("click",function(){return a._selectViaInteraction()})("keydown",function(_){return a._handleKeydown(_)}),o&2&&(Hg("id",a.id),yr("aria-selected",a.selected)("aria-disabled",a.disabled.toString()),Ki("mdc-list-item--selected",a.selected)("mat-mdc-option-multiple",a.multiple)("mat-mdc-option-active",a.active)("mdc-list-item--disabled",a.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",Qi]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],features:[Wn],ngContentSelectors:E7,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(o,a){o&1&&(zo(C7),Et(0,S7,1,2,"mat-pseudo-checkbox",1),Pr(1),z(2,"span",2,0),Pr(4,1),U(),Et(5,T7,1,1,"mat-pseudo-checkbox",3)(6,M7,2,1,"span",4),Ye(7,"div",5)),o&2&&(Gr(a.multiple?0:-1),ye(5),Gr(!a.multiple&&a.selected&&!a.hideSingleSelectionIndicator?5:-1),ye(),Gr(a.group&&a.group._inert?6:-1),ye(),st("matRippleTrigger",a._getHostElement())("matRippleDisabled",a.disabled||a.disableRipple))},dependencies:[Tw,G_],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return i})();function hA(i,t,e){if(e.length){let o=t.toArray(),a=e.toArray(),s=0;for(let _=0;_<i+1;_++)o[_].group&&o[_].group===a[s]&&s++;return s}return 0}function pA(i,t,e,o){return i<e?i:i+t>e+o?Math.max(0,i-o+t):e}var Pw=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({imports:[Bm,en,A7]})}return i})();var R7=["*"],Z_;function O7(){if(Z_===void 0&&(Z_=null,typeof window<"u")){let i=window;i.trustedTypes!==void 0&&(Z_=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Z_}function Vm(i){return O7()?.createHTML(i)||i}function fA(i){return Error(`Unable to find icon with the name "${i}"`)}function L7(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function mA(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function gA(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}var mc=class{url;svgText;options;svgElement;constructor(t,e,o){this.url=t,this.svgText=e,this.options=o}},N7=(()=>{class i{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,o,a,s){this._httpClient=e,this._sanitizer=o,this._errorHandler=s,this._document=a}addSvgIcon(e,o,a){return this.addSvgIconInNamespace("",e,o,a)}addSvgIconLiteral(e,o,a){return this.addSvgIconLiteralInNamespace("",e,o,a)}addSvgIconInNamespace(e,o,a,s){return this._addSvgIconConfig(e,o,new mc(a,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,o,a,s){let _=this._sanitizer.sanitize(Ns.HTML,a);if(!_)throw gA(a);let w=Vm(_);return this._addSvgIconConfig(e,o,new mc("",w,s))}addSvgIconSet(e,o){return this.addSvgIconSetInNamespace("",e,o)}addSvgIconSetLiteral(e,o){return this.addSvgIconSetLiteralInNamespace("",e,o)}addSvgIconSetInNamespace(e,o,a){return this._addSvgIconSetConfig(e,new mc(o,null,a))}addSvgIconSetLiteralInNamespace(e,o,a){let s=this._sanitizer.sanitize(Ns.HTML,o);if(!s)throw gA(o);let _=Vm(s);return this._addSvgIconSetConfig(e,new mc("",_,a))}registerFontClassAlias(e,o=e){return this._fontCssClassesByAlias.set(e,o),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let o=this._sanitizer.sanitize(Ns.RESOURCE_URL,e);if(!o)throw mA(e);let a=this._cachedIconsByUrl.get(o);return a?ti(X_(a)):this._loadSvgIconFromConfig(new mc(e,null)).pipe(Ur(s=>this._cachedIconsByUrl.set(o,s)),wi(s=>X_(s)))}getNamedSvgIcon(e,o=""){let a=_A(o,e),s=this._svgIconConfigs.get(a);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(o,e),s)return this._svgIconConfigs.set(a,s),this._getSvgFromConfig(s);let _=this._iconSetConfigs.get(o);return _?this._getSvgFromIconSetConfigs(e,_):Yu(fA(a))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ti(X_(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(wi(o=>X_(o)))}_getSvgFromIconSetConfigs(e,o){let a=this._extractIconWithNameFromAnySet(e,o);if(a)return ti(a);let s=o.filter(_=>!_.svgText).map(_=>this._loadSvgIconSetFromConfig(_).pipe(yl(w=>{let T=`Loading icon set URL: ${this._sanitizer.sanitize(Ns.RESOURCE_URL,_.url)} failed: ${w.message}`;return this._errorHandler.handleError(new Error(T)),ti(null)})));return Dg(s).pipe(wi(()=>{let _=this._extractIconWithNameFromAnySet(e,o);if(!_)throw fA(e);return _}))}_extractIconWithNameFromAnySet(e,o){for(let a=o.length-1;a>=0;a--){let s=o[a];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){let _=this._svgElementFromConfig(s),w=this._extractSvgIconFromSet(_,e,s.options);if(w)return w}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ur(o=>e.svgText=o),wi(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ti(null):this._fetchIcon(e).pipe(Ur(o=>e.svgText=o))}_extractSvgIconFromSet(e,o,a){let s=e.querySelector(`[id="${o}"]`);if(!s)return null;let _=s.cloneNode(!0);if(_.removeAttribute("id"),_.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(_,a);if(_.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(_),a);let w=this._svgElementFromString(Vm("<svg></svg>"));return w.appendChild(_),this._setSvgAttributes(w,a)}_svgElementFromString(e){let o=this._document.createElement("DIV");o.innerHTML=e;let a=o.querySelector("svg");if(!a)throw Error("<svg> tag not found");return a}_toSvgElement(e){let o=this._svgElementFromString(Vm("<svg></svg>")),a=e.attributes;for(let s=0;s<a.length;s++){let{name:_,value:w}=a[s];_!=="id"&&o.setAttribute(_,w)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&o.appendChild(e.childNodes[s].cloneNode(!0));return o}_setSvgAttributes(e,o){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),o&&o.viewBox&&e.setAttribute("viewBox",o.viewBox),e}_fetchIcon(e){let{url:o,options:a}=e,s=a?.withCredentials??!1;if(!this._httpClient)throw L7();if(o==null)throw Error(`Cannot fetch icon from URL "${o}".`);let _=this._sanitizer.sanitize(Ns.RESOURCE_URL,o);if(!_)throw mA(o);let w=this._inProgressUrlFetches.get(_);if(w)return w;let C=this._httpClient.get(_,{responseType:"text",withCredentials:s}).pipe(wi(T=>Vm(T)),ec(()=>this._inProgressUrlFetches.delete(_)),QC());return this._inProgressUrlFetches.set(_,C),C}_addSvgIconConfig(e,o,a){return this._svgIconConfigs.set(_A(e,o),a),this}_addSvgIconSetConfig(e,o){let a=this._iconSetConfigs.get(e);return a?a.push(o):this._iconSetConfigs.set(e,[o]),this}_svgElementFromConfig(e){if(!e.svgElement){let o=this._svgElementFromString(e.svgText);this._setSvgAttributes(o,e.options),e.svgElement=o}return e.svgElement}_getIconConfigFromResolvers(e,o){for(let a=0;a<this._resolvers.length;a++){let s=this._resolvers[a](o,e);if(s)return F7(s)?new mc(s.url,null,s.options):new mc(s,null)}}static \u0275fac=function(o){return new(o||i)(hi(Fs,8),hi(Nf),hi(Oi,8),hi(Ju))};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function X_(i){return i.cloneNode(!0)}function _A(i,t){return i+":"+t}function F7(i){return!!(i.url&&i.options)}var z7=new Bt("MAT_ICON_DEFAULT_OPTIONS"),B7=new Bt("mat-icon-location",{providedIn:"root",factory:V7});function V7(){let i=Le(Oi),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var bA=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],U7=bA.map(i=>`[${i}]`).join(", "),j7=/^url\(['"]?#(.*?)['"]?\)$/,dp=(()=>{class i{_elementRef=Le(hr);_iconRegistry=Le(N7);_location=Le(B7);_errorHandler=Le(Ju);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let o=this._cleanupFontValue(e);o!==this._fontSet&&(this._fontSet=o,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let o=this._cleanupFontValue(e);o!==this._fontIcon&&(this._fontIcon=o,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=No.EMPTY;constructor(){let e=Le(new Qu("aria-hidden"),{optional:!0}),o=Le(z7,{optional:!0});o&&(o.color&&(this.color=this._defaultColor=o.color),o.fontSet&&(this.fontSet=o.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let o=e.split(":");switch(o.length){case 1:return["",o[0]];case 2:return o;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let o=this._location.getPathname();o!==this._previousPath&&(this._previousPath=o,this._prependPathToReferences(o))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let o=this._location.getPathname();this._previousPath=o,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(o),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,o=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();o--;){let a=e.childNodes[o];(a.nodeType!==1||a.nodeName.toLowerCase()==="svg")&&a.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,o=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(a=>a.length>0);this._previousFontSetClass.forEach(a=>e.classList.remove(a)),o.forEach(a=>e.classList.add(a)),this._previousFontSetClass=o,this.fontIcon!==this._previousFontIconClass&&!o.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let o=this._elementsWithExternalReferences;o&&o.forEach((a,s)=>{a.forEach(_=>{s.setAttribute(_.name,`url('${e}#${_.value}')`)})})}_cacheChildrenWithExternalReferences(e){let o=e.querySelectorAll(U7),a=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<o.length;s++)bA.forEach(_=>{let w=o[s],C=w.getAttribute(_),T=C?C.match(j7):null;if(T){let I=a.get(w);I||(I=[],a.set(w,I)),I.push({name:_,value:T[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[o,a]=this._splitIconName(e);o&&(this._svgNamespace=o),a&&(this._svgName=a),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(a,o).pipe(Os(1)).subscribe(s=>this._setSvgElement(s),s=>{let _=`Error retrieving icon ${o}:${a}! ${s.message}`;this._errorHandler.handleError(new Error(_))})}}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(o,a){o&2&&(yr("data-mat-icon-type",a._usingFontIcon()?"font":"svg")("data-mat-icon-name",a._svgName||a.fontIcon)("data-mat-icon-namespace",a._svgNamespace||a.fontSet)("fontIcon",a._usingFontIcon()?a.fontIcon:null),vf(a.color?"mat-"+a.color:""),Ki("mat-icon-inline",a.inline)("mat-icon-no-color",a.color!=="primary"&&a.color!=="accent"&&a.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Qi],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Wn],ngContentSelectors:R7,decls:1,vars:0,template:function(o,a){o&1&&(zo(),Pr(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return i})(),bu=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({imports:[en,en]})}return i})();function q7(i,t){i&1&&(z(0,"div",5),ce(1," Cargando men\xFA... "),U())}function H7(i,t){if(i&1&&(z(0,"mat-icon"),ce(1),U()),i&2){let e=at(2).$implicit,o=at(2);ye(),ai(o.isAbierto(e)?"expand_less":"expand_more")}}function $7(i,t){if(i&1&&(z(0,"mat-icon"),ce(1),U()),i&2){let e=at(2).$implicit,o=at(5);ye(),ai(o.isAbierto(e)?"expand_less":"expand_more")}}function G7(i,t){if(i&1){let e=Ri();z(0,"a",13),kt("click",function(){jt(e);let a=at().$implicit,s=at(8);return qt(s.navegar(a.ruta))}),z(1,"mat-icon"),ce(2),U(),z(3,"span"),ce(4),U()()}if(i&2){let e=at().$implicit;ye(2),ai(e.icono),ye(2),ai(e.texto)}}function W7(i,t){if(i&1&&(z(0,"li"),Et(1,G7,5,2,"a",12),U()),i&2){let e=t.$implicit,o=at(8);ye(),st("ngIf",o.isVisible(e))}}function Z7(i,t){if(i&1&&(z(0,"ul",11),Et(1,W7,2,1,"li",7),U()),i&2){let e=at(2).$implicit;ye(),st("ngForOf",e.hijos)}}function X7(i,t){if(i&1){let e=Ri();z(0,"li")(1,"a",9),kt("click",function(){jt(e);let a=at().$implicit,s=at(5);return qt(a.hijos?s.toggle(a):s.navegar(a.ruta))}),z(2,"mat-icon"),ce(3),U(),z(4,"span"),ce(5),U(),Et(6,$7,2,1,"mat-icon",8),U(),Et(7,Z7,2,1,"ul",10),U()}if(i&2){let e=at().$implicit,o=at(5);ye(3),ai(e.icono),ye(2),ai(e.texto),ye(),st("ngIf",e.hijos),ye(),st("ngIf",e.hijos&&o.isAbierto(e))}}function Y7(i,t){if(i&1&&(yf(0),Et(1,X7,8,4,"li",8),xf()),i&2){let e=t.$implicit,o=at(5);ye(),st("ngIf",o.isVisible(e))}}function K7(i,t){if(i&1&&(z(0,"ul",11),Et(1,Y7,2,1,"ng-container",7),U()),i&2){let e=at(2).$implicit;ye(),st("ngForOf",e.hijos)}}function Q7(i,t){if(i&1){let e=Ri();z(0,"li")(1,"a",9),kt("click",function(){jt(e);let a=at().$implicit,s=at(2);return qt(a.hijos?s.toggle(a):s.navegar(a.ruta))}),z(2,"mat-icon"),ce(3),U(),z(4,"span"),ce(5),U(),Et(6,H7,2,1,"mat-icon",8),U(),Et(7,K7,2,1,"ul",10),U()}if(i&2){let e=at().$implicit,o=at(2);ye(3),ai(e.icono),ye(2),ai(e.texto),ye(),st("ngIf",e.hijos),ye(),st("ngIf",e.hijos&&o.isAbierto(e))}}function J7(i,t){if(i&1&&(yf(0),Et(1,Q7,8,4,"li",8),xf()),i&2){let e=t.$implicit,o=at(2);ye(),st("ngIf",o.isVisible(e))}}function ez(i,t){if(i&1&&(z(0,"ul",6),Et(1,J7,2,1,"ng-container",7),U()),i&2){let e=at();ye(),st("ngForOf",e.menu)}}var hp=class i{constructor(t,e){this.router=t;this.http=e}menu=[{icono:"eco",texto:"Ambiente",dimension:"ambiente",hijos:[{icono:"recycling",texto:"Gesti\xF3n de Recursos",ruta:"/ambiente/recursos",subdimension:"gestion_recursos"},{icono:"cloud",texto:"Calidad Ambiental",subdimension:"calidad_ambiental",hijos:[{icono:"dashboard",texto:"Tablero de Control Sensores Ruido",ruta:"/ambiente/calidad/ruido/dashboard"},{icono:"map",texto:"Mapa Sensores Ruido",ruta:"/ambiente/calidad/ruido/mapa"},{icono:"dashboard_customize",texto:"Tablero de Control SIATA",ruta:"/ambiente/calidad/siata/dashboard"},{icono:"map",texto:"Mapa SIATA",ruta:"/ambiente/calidad/siata/mapa"}]},{icono:"warning",texto:"Gesti\xF3n del Riesgo",ruta:"/ambiente/riesgo",subdimension:"gestion_riesgo"},{icono:"delete",texto:"Gesti\xF3n de Residuos",subdimension:"gestion_residuos",hijos:[{icono:"dashboard",texto:"Tablero de Control Camiones EMVARIAS",ruta:"/ambiente/residuos/camiones/dashboard"},{icono:"map",texto:"Mapa Camiones EMVARIAS",ruta:"/ambiente/residuos/camiones/mapa"}]},{icono:"public",texto:"Cambio Clim\xE1tico",ruta:"/ambiente/cambioclimatico",subdimension:"cambio_climatico"}]},{icono:"home_work",texto:"H\xE1bitat",dimension:"habitat",hijos:[{icono:"domain",texto:"Infraestructura",ruta:"/habitat/infraestructura",subdimension:"infraestructura"},{icono:"commute",texto:"Movilidad Inteligente",subdimension:"movilidad_inteligente",hijos:[{icono:"dashboard",texto:"Tablero de Control Movilidad",ruta:"/habitat/movilidad/dashboard"},{icono:"map",texto:"Mapa Movilidad",ruta:"/habitat/movilidad/mapa"},{icono:"dashboard_customize",texto:"Tablero de Control VamosMED",ruta:"/habitat/movilidad/vamosmed/dashboard"},{icono:"map",texto:"Mapa VamosMED",ruta:"/habitat/movilidad/vamosmed/mapa"}]},{icono:"build",texto:"Servicios P\xFAblicos",ruta:"/habitat/servicios-publicos",subdimension:"servicios_publicos"}]},{icono:"trending_up",texto:"Desarrollo Econ\xF3mico",dimension:"desarrollo_economico",hijos:[{icono:"lightbulb",texto:"Emprendimiento e Innovaci\xF3n",ruta:"/economico/emprendimiento",subdimension:"emprendimiento_innovacion"},{icono:"school",texto:"Econom\xEDa del conocimiento",ruta:"/economico/conocimiento",subdimension:"economia_conocimiento"},{icono:"business",texto:"Entorno Productivo y Competitivo",ruta:"/economico/entorno",subdimension:"entorno_productivo"},{icono:"engineering",texto:"Empleo",ruta:"/economico/empleo",subdimension:"empleo"},{icono:"wifi",texto:"Transformaci\xF3n Digital",subdimension:"transformacion_digital",hijos:[{icono:"dashboard",texto:"Tablero de Control Puntos WiFi",ruta:"/economico/digital/wifi/dashboard"},{icono:"map",texto:"Mapa Puntos WiFi",ruta:"/economico/digital/wifi/mapa"}]},{icono:"recycle",texto:"Econom\xEDa Circular",ruta:"/economico/circular",subdimension:"economia_circular"},{icono:"agriculture",texto:"Agricultura",ruta:"/economico/agricultura",subdimension:"agricultura"}]},{icono:"groups",texto:"Ciudadan\xEDa",dimension:"ciudadania",hijos:[{icono:"school",texto:"Educaci\xF3n",ruta:"/ciudadania/educacion",subdimension:"educacion"},{icono:"diversity_1",texto:"Equidad",ruta:"/ciudadania/equidad",subdimension:"equidad"},{icono:"accessible",texto:"Sociedad Incluyente",ruta:"/ciudadania/incluyente",subdimension:"sociedad_incluyente"},{icono:"emoji_people",texto:"Cultura Ciudadana",ruta:"/ciudadania/cultura",subdimension:"cultura_ciudadana"},{icono:"diversity_3",texto:"Cohesi\xF3n social",ruta:"/ciudadania/cohesion",subdimension:"cohesion_social"}]},{icono:"health_and_safety",texto:"Calidad de Vida",dimension:"calidad_vida",hijos:[{icono:"sentiment_satisfied",texto:"Bienestar",ruta:"/calidad/bienestar",subdimension:"bienestar"},{icono:"security",texto:"Seguridad",ruta:"/calidad/seguridad",subdimension:"seguridad"},{icono:"healing",texto:"Salud",ruta:"/calidad/salud",subdimension:"salud"},{icono:"map",texto:"Ocio y Turismo",subdimension:"ocio_turismo",hijos:[{icono:"dashboard",texto:"Tablero de Control Turismo",ruta:"/calidad/turismo/dashboard"},{icono:"map",texto:"Mapa Turismo",ruta:"/calidad/turismo/mapa"}]}]},{icono:"gavel",texto:"Gobernanza",dimension:"gobernanza",hijos:[{icono:"how_to_vote",texto:"Participaci\xF3n Ciudadana",subdimension:"participacion_ciudadana",hijos:[{icono:"dashboard",texto:"Tablero de Control ReportesMED",ruta:"/gobernanza/participacion/reportesmed/dashboard"},{icono:"map",texto:"Mapa Reportes MED",ruta:"/gobernanza/participacion/reportesmed/mapa"},{icono:"dashboard_customize",texto:"Tablero de Control PQRS",ruta:"/gobernanza/participacion/pqrs/dashboard"},{icono:"map",texto:"Mapa PQRS",ruta:"/gobernanza/participacion/pqrs/mapa"}]},{icono:"account_balance",texto:"Gobernanza",ruta:"/gobernanza/gobernanza",subdimension:"gobernanza"},{icono:"public",texto:"Colaboraci\xF3n entre Ciudades y Territorios",ruta:"/gobernanza/colaboracion",subdimension:"colaboracion_ciudades"},{icono:"computer",texto:"Gobierno Digital",ruta:"/gobernanza/digital",subdimension:"gobierno_digital"}]}];nivelesAbiertos={};permisosUsuario=[];cargando=!0;ngOnInit(){return qi(this,null,function*(){yield this.obtenerPermisosUsuario(),this.aplicarPermisos(),this.cargando=!1})}obtenerPermisosUsuario(){return qi(this,null,function*(){let t=localStorage.getItem("access_tokenadmin");if(!t){console.warn("No se encontr\xF3 el token de acceso - Mostrando men\xFA completo"),this.permisosUsuario=[];return}try{let o=yield GC(this.http.get("http://nepqas.medellin.gov.co/territoriointeligente/api/keycloak/userinfo",{headers:{Authorization:`Bearer ${t}`}}));this.permisosUsuario=Array.isArray(o)?o:[]}catch(e){console.error("Error al obtener permisos del usuario:",e),this.permisosUsuario=[]}})}aplicarPermisos(){if(Array.isArray(this.permisosUsuario)||(this.permisosUsuario=[]),this.permisosUsuario.length===0){this.menu.forEach(t=>{t.visible=!0,t.hijos&&t.hijos.forEach(e=>{e.visible=!0,e.hijos&&e.hijos.forEach(o=>{o.visible=!0})})});return}this.menu.forEach(t=>{let e=this.permisosUsuario.filter(o=>o.dimension===t.dimension);if(e.length===0){t.visible=!1;return}t.visible=e.some(o=>o.activa),t.hijos&&t.hijos.forEach(o=>{let a=this.permisosUsuario.find(s=>s.dimension===t.dimension&&s.subdimension===o.subdimension);o.visible=a?a.activa:!1,o.hijos&&o.hijos.forEach(s=>{s.visible=o.visible})})})}navegar(t){t&&this.router.navigateByUrl(t)}toggle(t){let e=t.texto;this.nivelesAbiertos[e]=!this.nivelesAbiertos[e]}isAbierto(t){return this.nivelesAbiertos[t.texto]}isVisible(t){return t.visible!==!1}static \u0275fac=function(e){return new(e||i)(si(Co),si(Fs))};static \u0275cmp=Ot({type:i,selectors:[["app-menu-opciones"]],decls:5,vars:2,consts:[[1,"menu-container"],["src","https://i.ibb.co/Ksh0J2w/alcaldia-Medellin.png","alt","Logo Alcald\xEDa de Medell\xEDn",1,"menu-logo"],["src","https://www.fiware.org/custom/brand-guide/img/logo/fiware/primary/png/logo-fiware-blue.png?","alt","Logo FIWARE",1,"menu-logon"],["class","cargando",4,"ngIf"],["class","menu-list",4,"ngIf"],[1,"cargando"],[1,"menu-list"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"menu-item","submenu-toggle",3,"click"],["class","submenu",4,"ngIf"],[1,"submenu"],["class","menu-item",3,"click",4,"ngIf"],[1,"menu-item",3,"click"]],template:function(e,o){e&1&&(z(0,"div",0),Ye(1,"img",1)(2,"img",2),Et(3,q7,2,0,"div",3)(4,ez,2,1,"ul",4),U()),e&2&&(ye(3),st("ngIf",o.cargando),ye(),st("ngIf",!o.cargando))},dependencies:[_n,ba,_s,bu,dp,Tl],styles:['@charset "UTF-8";.menu-container[_ngcontent-%COMP%]{position:fixed;top:0;left:-20px;width:260px;height:100vh;background:linear-gradient(145deg,#fffc,#f0f0f099);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);padding:20px;box-shadow:4px 0 20px #0006,inset -4px 0 15px #ffffff4d;border-right:1px solid rgba(255,255,255,.25);overflow-y:auto;z-index:1000;transition:transform .3s ease-in-out}.menu-logon[_ngcontent-%COMP%]{display:block;max-width:120px;height:auto;margin:0 auto 10px;border-radius:15px;box-shadow:0 4px 10px #0003,inset 0 2px 6px #fff6;transition:transform .3s ease,box-shadow .4s ease,filter .4s ease}.menu-logo[_ngcontent-%COMP%]{display:block;max-width:103%;margin:0 auto 20px;background-color:#fff;transition:transform .3s ease,box-shadow .4s ease,filter .4s ease}.menu-list[_ngcontent-%COMP%], .submenu[_ngcontent-%COMP%]{list-style-type:none}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none;color:#000;background:linear-gradient(145deg,#fffc,#e6e6e699);border:1px solid rgba(200,200,200,.4);border-radius:16px;padding:10px 18px;margin-bottom:10px;margin-left:-8px;box-shadow:0 8px 15px #0000004d,inset 0 3px 6px #fff6;transition:all .3s ease-in-out;transform:perspective(500px) rotateY(0)}.menu-item[_ngcontent-%COMP%]:hover{background:linear-gradient(145deg,#ffffffe6,#e6e6e6cc);transform:translateY(-5px) scale(1.08) rotateY(10deg);box-shadow:0 10px 20px #0006,inset 0 4px 10px #ffffff80;filter:brightness(1.1)}mat-icon[_ngcontent-%COMP%]{margin-right:15px;font-size:24px;color:#333;text-shadow:1px 1px 5px rgba(0,0,0,.3),0 0 10px rgba(0,255,255,.8);transition:color .3s ease,transform .3s ease,text-shadow .4s ease}.menu-item[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#000;transform:scale(1.3);text-shadow:0 0 15px rgba(0,255,255,.8),0 0 25px rgba(0,255,255,.6),0 0 30px rgba(0,255,255,.5)}']})};var Y_=class i{constructor(t){this.router=t}irAPerfil(){this.router.navigate(["perfil/usuarios"])}logout(){localStorage.removeItem("access_token"),localStorage.getItem("access_token")?qr.fire({icon:"error",title:"Error",text:"No se pudo eliminar el token",confirmButtonText:"OK"}):qr.fire({icon:"success",title:"Token eliminado",text:"El token de acceso ha sido removido del almacenamiento local.",confirmButtonText:"OK"})}static \u0275fac=function(e){return new(e||i)(si(Co))};static \u0275cmp=Ot({type:i,selectors:[["app-header"]],decls:14,vars:0,consts:[[1,"header"],[1,"header-container"],[1,"logo"],["src","https://www.fiware.org/custom/brand-guide/img/logo/fiware/primary/jpg/logo-fiware.jpg?","alt","Logo Alcald\xEDa de Medell\xEDn",1,"menu-logo",2,"background-color","rgb(250, 250, 250)"],[1,"user-info"],[1,"profile-dropdown"],[1,"profile-button"],[2,"font-size","50px"],[1,"dropdown-menu"],[3,"click"],["href","#",3,"click"]],template:function(e,o){e&1&&(z(0,"header",0)(1,"div",1)(2,"div",2),Ye(3,"img",3),U(),z(4,"div",4)(5,"div",5)(6,"button",6)(7,"div",7),ce(8,"\u{1F464}"),U()(),z(9,"div",8)(10,"a",9),kt("click",function(){return o.irAPerfil()}),ce(11,"Perfil"),U(),z(12,"a",10),kt("click",function(){return o.logout()}),ce(13,"Cerrar sesi\xF3n"),U()()()()()())},dependencies:[au,bu],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{margin:0;font-family:Arial,sans-serif;background-color:#f8f9fa}.menu-logo[_ngcontent-%COMP%]{display:block;max-width:120px;height:auto;margin:0 auto 10px;transition:transform .3s ease,box-shadow .4s ease,filter .4s ease}.header[_ngcontent-%COMP%]{background:#fff;width:calc(100% - 390px);max-width:none;height:75px;padding:12px 25px;display:flex;justify-content:space-between;align-items:center;color:#333;border-radius:18px;box-shadow:0 4px 12px #0003;margin-left:330px;margin-top:20px;position:relative;z-index:1000;opacity:0;transform:translateY(-15px);animation:_ngcontent-%COMP%_fadeIn .4s ease-out forwards}.main[_ngcontent-%COMP%]{margin-top:120px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.header[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 20px #0000004d}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;align-items:center}.logo[_ngcontent-%COMP%]{font-size:26px;font-weight:700;color:#5d4037}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.profile-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.profile-button[_ngcontent-%COMP%]{background:none;border:none;color:#5d4037;font-size:16px;display:flex;align-items:center;cursor:pointer;transition:transform .2s ease-in-out}.profile-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.profile-icon[_ngcontent-%COMP%]{font-size:40px;transition:color .3s ease}.profile-button[_ngcontent-%COMP%]:hover   .profile-icon[_ngcontent-%COMP%]{color:#4a90e2}.dropdown-menu[_ngcontent-%COMP%]{display:none;position:absolute;right:0;background:#fff;box-shadow:0 5px 15px #00000026;border-radius:10px;overflow:hidden;min-width:160px;opacity:0;transform:translateY(10px);transition:all .3s ease-in-out}.profile-dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block;opacity:1;transform:translateY(0)}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:12px;color:#333;text-decoration:none;font-weight:500;transition:background .3s ease}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#f0f0f0}']})};var K_=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-layout"]],decls:3,vars:0,template:function(e,o){e&1&&Ye(0,"app-header")(1,"app-menu-opciones")(2,"router-outlet")},dependencies:[_n,hp,Y_,au,rm],encapsulation:2})};var Q_=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-inicio"]],decls:12,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/inicio/home?orgId=1&from=1733868035919&to=1734472835919&viewPanel=73&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/inicio/home?orgId=1&from=1733890467754&to=1734495267754&viewPanel=74&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/inicio/home?orgId=1&from=1733891497815&to=1734496297815&viewPanel=75&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/inicio/home?orgId=1&from=1733891690672&to=1734496490672&viewPanel=76&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/inicio/home?orgId=1&from=1733891734324&to=1734496534324&viewPanel=79&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/inicio/home?orgId=1&from=1733892371283&to=1734497171283&viewPanel=80&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Inicio"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4),U(),z(6,"div",2),Ye(7,"iframe",5)(8,"iframe",6),U(),z(9,"div",2),Ye(10,"iframe",7)(11,"iframe",8),U()())},styles:[".iframe-container[_ngcontent-%COMP%]{width:75%;height:50%;display:flex;margin-left:25%;justify-content:right}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border:none;width:60%;height:800px}","body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column;font-family:Arial,sans-serif;background-color:#f4f4f4}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}iframe[_ngcontent-%COMP%]{flex:1;height:300px;border:none;border-radius:8px;box-shadow:0 4px 12px #0000001a}iframe[_ngcontent-%COMP%]:hover{transform:scale(1.02)}"]})};var J_=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-camiones"]],decls:11,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/em_ta/emvarias?orgId=1&from=1734455124927&to=1734498324927&viewPanel=16&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/em_ta/emvarias?orgId=1&from=1740352844880&to=1740396044880&viewPanel=10&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/em_ta/emvarias?orgId=1&from=1740352870706&to=1740396070706&viewPanel=13&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/em_ta/emvarias?orgId=1&from=1740352901739&to=1740396101739&viewPanel=9&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Camiones"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3),U(),z(5,"div",2),Ye(6,"iframe",4),U(),z(7,"div",2),Ye(8,"iframe",5),U(),z(9,"div",2),Ye(10,"iframe",6),U()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}iframe[_ngcontent-%COMP%]{flex:1;height:400px;border:none}"]})};var eb=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-sensores-ruido"]],decls:5,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/ce9a9bd3-6b1e-48bc-8fab-cc6a042f6f5b/ambience-dashboard?orgId=1&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Sensores de Ruido"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3),U()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin-left:300px;margin-bottom:20px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px}.iframe-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:920px;border:none}"]})};var tb=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-medicos"]],decls:10,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row","small-iframes"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/rm_ta/reportesmed?orgId=1&from=1734607826803&to=1735212626803&viewPanel=2&kiosk`],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/rm_ta/reportesmed?orgId=1&from=1734613212216&to=1735218012216&viewPanel=3&kiosk`],[1,"iframe-row","large-iframe"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/rm_ta/reportesmed?orgId=1&from=1734613644066&to=1735218444067&viewPanel=56&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/rm_ta/reportesmed?orgId=1&from=1734613814858&to=1735218614858&viewPanel=57&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Reportes M\xE9dicos"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4),U(),z(6,"div",5),Ye(7,"iframe",6),U(),z(8,"div",5),Ye(9,"iframe",7),U()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-row[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.small-iframes[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;max-width:48%}.large-iframe[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:500px;max-width:80%}@media (max-width: 1200px){.small-iframes[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], .large-iframe[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{max-width:100%}}"]})};var ib=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-medicos"]],decls:12,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732686476511&to=1735278476511&viewPanel=3&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732687115885&to=1735279115885&viewPanel=4&kiosk`,"allowfullscreen",""],[1,"iframe-column"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732711995953&to=1735303995953&viewPanel=33&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732712398666&to=1735304398666&viewPanel=34&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732712155294&to=1735304155295&viewPanel=6&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732712771842&to=1735304771842&viewPanel=8&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732712873380&to=1735304873380&viewPanel=20&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Puntos Wi-Fi"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4),U(),z(6,"div",5),Ye(7,"iframe",6)(8,"iframe",7)(9,"iframe",8)(10,"iframe",9)(11,"iframe",10),U()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:space-between}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.iframe-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.iframe-column[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:600px;border:none}"]})};var rb=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-medicos"]],decls:9,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/be4206a5-5095-46c2-8ad6-459879f8b397/evolucion-temporal?orgId=1&var-time_interval=week&var-modo_transporte=%27EnBici%27&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/c4aa4e46-0aeb-4e56-b272-bd96329b9f92/impacto-ambiental?orgId=1&kiosk`,"allowfullscreen",""],[1,"iframe-column"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/d57d13d8-5b6d-48e4-88fc-12d9d874e8dc/travels-kilometers?orgId=1&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/ba00627d-90a1-485c-a088-16a037d56c33/calories?orgId=1&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Vamos Medell\xEDn"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4),U(),z(6,"div",5),Ye(7,"iframe",6)(8,"iframe",7),U()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:space-between}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:500px;border:none}.iframe-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.iframe-column[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:500px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var nb=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-pqrsd"]],decls:25,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739793439047&to=1740398239047&viewPanel=55&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739793492783&to=1740398292783&viewPanel=56&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739793532582&to=1740398332582&viewPanel=57&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739793599303&to=1740398399303&viewPanel=75&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739793702223&to=1740398502223&viewPanel=76&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739793898080&to=1740398698081&viewPanel=67&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739794045244&to=1740398845245&viewPanel=69&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739794083995&to=1740398883995&viewPanel=64&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739794190362&to=1740398990362&viewPanel=72&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739794256564&to=1740399056565&viewPanel=65&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739794325102&to=1740399125102&viewPanel=68&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Ciudad Inteligente - PQRSD"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),U(),z(7,"div",2),Ye(8,"iframe",6),U(),z(9,"div",2),Ye(10,"iframe",7),U(),z(11,"div",2),Ye(12,"iframe",7),U(),z(13,"div",2),Ye(14,"iframe",8),U(),z(15,"div",2),Ye(16,"iframe",9),U(),z(17,"div",2),Ye(18,"iframe",10),U(),z(19,"div",2),Ye(20,"iframe",11),U(),z(21,"div",2),Ye(22,"iframe",12),U(),z(23,"div",2),Ye(24,"iframe",13),U()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:space-between}.iframe-row[_ngcontent-%COMP%]:first-child   iframe[_ngcontent-%COMP%]{flex:1}iframe[_ngcontent-%COMP%]{width:100%;height:400px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var ob=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-camiones"]],decls:7,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/wa_ta/whatsapp?orgId=1&from=1739548898783&to=1740153698783&viewPanel=5&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/wa_ta/whatsapp?orgId=1&from=1739548919606&to=1740153719607&viewPanel=8&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/wa_ta/whatsapp?orgId=1&from=1739542345631&to=1740147145631&viewPanel=6&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"WhatsApp"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),U()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}iframe[_ngcontent-%COMP%]{flex:1;height:400px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var sb=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-camiones"]],decls:17,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708535530544&to=1740157930544&theme=light&viewPanel=17&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708535597310&to=1740157997310&theme=light&viewPanel=18&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708535622443&to=1740158022443&viewPanel=19&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708536018076&to=1740158418076&viewPanel=22&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708536115554&to=1740158515554&viewPanel=5&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708536157330&to=1740158557330&viewPanel=13&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708536248147&to=1740158648147&viewPanel=14&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Turismo"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),U()(),z(7,"div",1),Ye(8,"iframe",6),U(),z(9,"div",1),Ye(10,"iframe",7),U(),z(11,"div",1),Ye(12,"iframe",6),U(),z(13,"div",1),Ye(14,"iframe",8),U(),z(15,"div",1),Ye(16,"iframe",9),U())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:500px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var ab=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-camiones"]],decls:22,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739554343770&to=1740159143771&viewPanel=3&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739554430452&to=1740159230452&viewPanel=4&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739554718561&to=1740159518561&viewPanel=48&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739567093188&to=1740171893188&theme=light&viewPanel=49&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739567465205&to=1740172265205&viewPanel=45&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739567516412&to=1740172316412&viewPanel=34&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739568570628&to=1740173370628&viewPanel=35&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739568941480&to=1740173741480&viewPanel=36&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739653662249&to=1740258462249&viewPanel=37&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739655373761&to=1740260173761&viewPanel=38&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Siata"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4),U()(),z(6,"div",1),Ye(7,"iframe",5),U(),z(8,"div",1),Ye(9,"iframe",6),U(),z(10,"div",1),Ye(11,"iframe",7),U(),z(12,"div",1),Ye(13,"iframe",8),U(),z(14,"div",1),Ye(15,"iframe",9),U(),z(16,"div",1),Ye(17,"iframe",10),U(),z(18,"div",1),Ye(19,"iframe",11),U(),z(20,"div",1),Ye(21,"iframe",12),U())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:500px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var lb=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-camiones"]],decls:10,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/em_ma/emvarias-map?orgId=1&refresh=1m&var-barrios=--Seleccionar--&from=1740169770252&to=1740256170252&viewPanel=10&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/em_ma/emvarias-map?orgId=1&refresh=1m&var-barrios=--Seleccionar--&from=1740169943092&to=1740256343092&viewPanel=11&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/em_ma/emvarias-map?orgId=1&refresh=1m&var-barrios=--Seleccionar--&from=1740174676193&to=1740261076193&viewPanel=1&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/em_ma/emvarias-map?orgId=1&refresh=1m&var-barrios=--Seleccionar--&from=1740170890221&to=1740257290221&viewPanel=16&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Ciudad Inteligente - Camiones EMVARIAS"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4),U()(),z(6,"div",1),Ye(7,"iframe",5),U(),z(8,"div",1),Ye(9,"iframe",6),U())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}iframe[_ngcontent-%COMP%]{flex:1;height:400px;border:none}"]})};var cb=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-camiones"]],decls:11,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/rm_ma/reportesmed-map?orgId=1&var-comunas=--Seleccionar--&from=1739674305894&to=1740279105894&viewPanel=3&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/rm_ma/reportesmed-map?orgId=1&var-comunas=--Seleccionar--&from=1739674463402&to=1740279263402&viewPanel=4&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/rm_ma/reportesmed-map?orgId=1&var-comunas=--Seleccionar--&from=1739674645460&to=1740279445460&viewPanel=9&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/rm_ma/reportesmed-map?orgId=1&var-comunas=--Seleccionar--&from=1739674694900&to=1740279494900&viewPanel=1&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/rm_ma/reportesmed-map?orgId=1&var-comunas=--Seleccionar--&from=1739674790949&to=1740279590950&viewPanel=6&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Ciudad Inteligente - Camiones EMVARIAS"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),U()(),z(7,"div",1),Ye(8,"iframe",6),U(),z(9,"div",1),Ye(10,"iframe",7),U())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}iframe[_ngcontent-%COMP%]{flex:1;height:400px;border:none}"]})};var tz=["*"];var iz=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],rz=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],nz=new Bt("MAT_CARD_CONFIG"),vA=(()=>{class i{appearance;constructor(){let e=Le(nz,{optional:!0});this.appearance=e?.appearance||"raised"}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(o,a){o&2&&Ki("mat-mdc-card-outlined",a.appearance==="outlined")("mdc-card--outlined",a.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:tz,decls:1,vars:0,template:function(o,a){o&1&&(zo(),Pr(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return i})(),yA=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return i})();var xA=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return i})(),wA=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return i})();var CA=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:rz,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(o,a){o&1&&(zo(iz),Pr(0),z(1,"div",0),Pr(2,1),U(),Pr(3,2))},encapsulation:2,changeDetection:0})}return i})();var EA=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({imports:[en,en]})}return i})();var pp=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new Mi;constructor(t=!1,e,o=!0,a){this._multiple=t,this._emitChanges=o,this.compareWith=a,e&&e.length&&(t?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(o=>this._markSelected(o));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(o=>this._unmarkSelected(o));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);let e=this.selected,o=new Set(t);t.forEach(s=>this._markSelected(s)),e.filter(s=>!o.has(this._getConcreteValue(s,o))).forEach(s=>this._unmarkSelected(s));let a=this._hasQueuedChanges();return this._emitChangeEvent(),a}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,e){if(this.compareWith){e=e??this._selection;for(let o of e)if(this.compareWith(t,o))return o;return t}else return t}};var sz=20,SA=(()=>{class i{_ngZone=Le(tr);_platform=Le(Mo);_document=Le(Oi,{optional:!0});constructor(){}_scrolled=new Mi;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let o=this.scrollContainers.get(e);o&&(o.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=sz){return this._platform.isBrowser?new Jl(o=>{this._globalSubscription||this._addGlobalListener();let a=e>0?this._scrolled.pipe(kv(e)).subscribe(o):this._scrolled.subscribe(o);return this._scrolledCount++,()=>{a.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ti()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,o)=>this.deregister(o)),this._scrolled.complete()}ancestorScrolled(e,o){let a=this.getAncestorScrollContainers(e);return this.scrolled(o).pipe(ln(s=>!s||a.indexOf(s)>-1))}getAncestorScrollContainers(e){let o=[];return this.scrollContainers.forEach((a,s)=>{this._scrollableContainsElement(s,e)&&o.push(s)}),o}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,o){let a=fc(o),s=e.getElementRef().nativeElement;do if(a==s)return!0;while(a=a.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return ZC(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var az=20,Um=(()=>{class i{_platform=Le(Mo);_viewportSize;_change=new Mi;_changeListener=e=>{this._change.next(e)};_document=Le(Oi,{optional:!0});constructor(){Le(tr).runOutsideAngular(()=>{if(this._platform.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:o,height:a}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+a,right:e.left+o,height:a,width:o}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,o=this._getWindow(),a=e.documentElement,s=a.getBoundingClientRect(),_=-s.top||e.body.scrollTop||o.scrollY||a.scrollTop||0,w=-s.left||e.body.scrollLeft||o.scrollX||a.scrollLeft||0;return{top:_,left:w}}change(e=az){return e>0?this._change.pipe(kv(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ub=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({})}return i})(),Aw=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({imports:[_u,ub,_u,ub]})}return i})();var jm=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Dw=class extends jm{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(t,e,o,a,s){super(),this.component=t,this.viewContainerRef=e,this.injector=o,this.projectableNodes=s}},qm=class extends jm{templateRef;viewContainerRef;context;injector;constructor(t,e,o,a){super(),this.templateRef=t,this.viewContainerRef=e,this.context=o,this.injector=a}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},Rw=class extends jm{element;constructor(t){super(),this.element=t instanceof hr?t.nativeElement:t}},Ow=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Dw)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof qm)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof Rw)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var db=class extends Ow{outletElement;_appRef;_defaultInjector;_document;constructor(t,e,o,a,s){super(),this.outletElement=t,this._appRef=o,this._defaultInjector=a,this._document=s}attachComponentPortal(t){let e;if(t.viewContainerRef){let o=t.injector||t.viewContainerRef.injector,a=o.get(bE,null,{optional:!0})||void 0;e=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:o,ngModuleRef:a,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else e=$g(t.component,{elementInjector:t.injector||this._defaultInjector||Dn.NULL,environmentInjector:this._appRef.injector,projectableNodes:t.projectableNodes||void 0}),this._appRef.attachView(e.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(e.hostView),e.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=t,e}attachTemplatePortal(t){let e=t.viewContainerRef,o=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return o.rootNodes.forEach(a=>this.outletElement.appendChild(a)),o.detectChanges(),this.setDisposeFn(()=>{let a=e.indexOf(o);a!==-1&&e.remove(a)}),this._attachedPortal=t,o}attachDomPortal=t=>{let e=t.element;e.parentNode;let o=this._document.createComment("dom-portal");e.parentNode.insertBefore(o,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(e,o)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var TA=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({})}return i})();var MA=hw(),Lw=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,e){this._viewportRuler=t,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=yn(-this._previousScrollPosition.left),t.style.top=yn(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,o=t.style,a=e.style,s=o.scrollBehavior||"",_=a.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),MA&&(o.scrollBehavior=a.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),MA&&(o.scrollBehavior=s,a.scrollBehavior=_)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,o=this._viewportRuler.getViewportSize();return e.scrollHeight>o.height||e.scrollWidth>o.width}};var Nw=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,e,o,a){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=o,this._config=a}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(ln(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},hb=class{enable(){}disable(){}attach(){}};function Fw(i,t){return t.some(e=>{let o=i.bottom<e.top,a=i.top>e.bottom,s=i.right<e.left,_=i.left>e.right;return o||a||s||_})}function IA(i,t){return t.some(e=>{let o=i.top<e.top,a=i.bottom>e.bottom,s=i.left<e.left,_=i.right>e.right;return o||a||s||_})}var zw=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,e,o,a){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=o,this._config=a}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:a}=this._viewportRuler.getViewportSize();Fw(e,[{width:o,height:a,bottom:a,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},cz=(()=>{class i{_scrollDispatcher=Le(SA);_viewportRuler=Le(Um);_ngZone=Le(tr);_document=Le(Oi);constructor(){}noop=()=>new hb;close=e=>new Nw(this._scrollDispatcher,this._ngZone,this._viewportRuler,e);block=()=>new Lw(this._viewportRuler,this._document);reposition=e=>new zw(this._scrollDispatcher,this._viewportRuler,this._ngZone,e);static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),pb=class{positionStrategy;scrollStrategy=new hb;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let e=Object.keys(t);for(let o of e)t[o]!==void 0&&(this[o]=t[o])}}};var Bw=class{connectionPair;scrollableViewProperties;constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var OA=(()=>{class i{_attachedOverlays=[];_document=Le(Oi);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let o=this._attachedOverlays.indexOf(e);o>-1&&this._attachedOverlays.splice(o,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),uz=(()=>{class i extends OA{_ngZone=Le(tr,{optional:!0});add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}_keydownListener=e=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let s=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>s.next(e)):s.next(e);break}};static \u0275fac=(()=>{let e;return function(a){return(e||(e=Za(i)))(a||i)}})();static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),dz=(()=>{class i extends OA{_platform=Le(Mo);_ngZone=Le(tr,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(e){if(super.add(e),!this._isAttached){let o=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(o)):this._addEventListeners(o),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=o.style.cursor,o.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=e=>{this._pointerDownEventTarget=xa(e)};_clickListener=e=>{let o=xa(e),a=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let s=this._attachedOverlays.slice();for(let _=s.length-1;_>-1;_--){let w=s[_];if(w._outsidePointerEvents.observers.length<1||!w.hasAttached())continue;if(PA(w.overlayElement,o)||PA(w.overlayElement,a))break;let C=w._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>C.next(e)):C.next(e)}};static \u0275fac=(()=>{let e;return function(a){return(e||(e=Za(i)))(a||i)}})();static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function PA(i,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,o=t;for(;o;){if(o===i)return!0;o=e&&o instanceof ShadowRoot?o.host:o.parentNode}return!1}var LA=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(o,a){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return i})(),NA=(()=>{class i{_platform=Le(Mo);_containerElement;_document=Le(Oi);_styleLoader=Le(hc);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||pw()){let a=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<a.length;s++)a[s].remove()}let o=this._document.createElement("div");o.classList.add(e),pw()?o.setAttribute("platform","test"):this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._containerElement=o}_loadStyles(){this._styleLoader.load(LA)}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Vw=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_backdropElement=null;_backdropTimeout;_backdropClick=new Mi;_attachments=new Mi;_detachments=new Mi;_positionStrategy;_scrollStrategy;_locationChanges=No.EMPTY;_backdropClickHandler=t=>this._backdropClick.next(t);_backdropTransitionendHandler=t=>{this._disposeBackdrop(t.target)};_previousHostParent;_keydownEvents=new Mi;_outsidePointerEvents=new Mi;_renders=new Mi;_afterRenderRef;_afterNextRenderRef;constructor(t,e,o,a,s,_,w,C,T,I=!1,P){this._portalOutlet=t,this._host=e,this._pane=o,this._config=a,this._ngZone=s,this._keyboardDispatcher=_,this._document=w,this._location=C,this._outsideClickDispatcher=T,this._animationsDisabled=I,this._injector=P,a.scrollStrategy&&(this._scrollStrategy=a.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=a.positionStrategy,this._afterRenderRef=Xa(()=>zg(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=gh(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=gt(gt({},this._config),t),this._updateElementSize()}setDirection(t){this._config=ui(gt({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=yn(this._config.width),t.height=yn(this._config.height),t.minWidth=yn(this._config.minWidth),t.minHeight=yn(this._config.minHeight),t.maxWidth=yn(this._config.maxWidth),t.maxHeight=yn(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,o){let a=cp(e||[]).filter(s=>!!s);a.length&&(o?t.classList.add(...a):t.classList.remove(...a))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(gn(Xc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},kA="cdk-overlay-connected-position-bounding-box",hz=/([A-Za-z%]+)$/,Uw=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Mi;_resizeSubscription=No.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,e,o,a,s){this._viewportRuler=e,this._document=o,this._platform=a,this._overlayContainer=s,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(kA),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,o=this._viewportRect,a=this._containerRect,s=[],_;for(let w of this._preferredPositions){let C=this._getOriginPoint(t,a,w),T=this._getOverlayPoint(C,e,w),I=this._getOverlayFit(T,e,o,w);if(I.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(w,C);return}if(this._canFitWithFlexibleDimensions(I,T,o)){s.push({position:w,origin:C,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(C,w)});continue}(!_||_.overlayFit.visibleArea<I.visibleArea)&&(_={overlayFit:I,overlayPoint:T,originPoint:C,position:w,overlayRect:e})}if(s.length){let w=null,C=-1;for(let T of s){let I=T.boundingBoxRect.width*T.boundingBoxRect.height*(T.position.weight||1);I>C&&(C=I,w=T)}this._isPushed=!1,this._applyPosition(w.position,w.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(_.position,_.originPoint);return}this._applyPosition(_.position,_.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Sd(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(kA),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,o){let a;if(o.originX=="center")a=t.left+t.width/2;else{let _=this._isRtl()?t.right:t.left,w=this._isRtl()?t.left:t.right;a=o.originX=="start"?_:w}e.left<0&&(a-=e.left);let s;return o.originY=="center"?s=t.top+t.height/2:s=o.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:a,y:s}}_getOverlayPoint(t,e,o){let a;o.overlayX=="center"?a=-e.width/2:o.overlayX==="start"?a=this._isRtl()?-e.width:0:a=this._isRtl()?0:-e.width;let s;return o.overlayY=="center"?s=-e.height/2:s=o.overlayY=="top"?0:-e.height,{x:t.x+a,y:t.y+s}}_getOverlayFit(t,e,o,a){let s=DA(e),{x:_,y:w}=t,C=this._getOffset(a,"x"),T=this._getOffset(a,"y");C&&(_+=C),T&&(w+=T);let I=0-_,P=_+s.width-o.width,R=0-w,H=w+s.height-o.height,Z=this._subtractOverflows(s.width,I,P),X=this._subtractOverflows(s.height,R,H),fe=Z*X;return{visibleArea:fe,isCompletelyWithinViewport:s.width*s.height===fe,fitsInViewportVertically:X===s.height,fitsInViewportHorizontally:Z==s.width}}_canFitWithFlexibleDimensions(t,e,o){if(this._hasFlexibleDimensions){let a=o.bottom-e.y,s=o.right-e.x,_=AA(this._overlayRef.getConfig().minHeight),w=AA(this._overlayRef.getConfig().minWidth),C=t.fitsInViewportVertically||_!=null&&_<=a,T=t.fitsInViewportHorizontally||w!=null&&w<=s;return C&&T}return!1}_pushOverlayOnScreen(t,e,o){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let a=DA(e),s=this._viewportRect,_=Math.max(t.x+a.width-s.width,0),w=Math.max(t.y+a.height-s.height,0),C=Math.max(s.top-o.top-t.y,0),T=Math.max(s.left-o.left-t.x,0),I=0,P=0;return a.width<=s.width?I=T||-_:I=t.x<this._viewportMargin?s.left-o.left-t.x:0,a.height<=s.height?P=C||-w:P=t.y<this._viewportMargin?s.top-o.top-t.y:0,this._previousPushAmount={x:I,y:P},{x:t.x+I,y:t.y+P}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let o=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!pz(this._lastScrollVisibility,o)){let a=new Bw(t,o);this._positionChanges.next(a)}this._lastScrollVisibility=o}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),o,a=t.overlayY;t.overlayX==="center"?o="center":this._isRtl()?o=t.overlayX==="start"?"right":"left":o=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${o} ${a}`}_calculateBoundingBoxRect(t,e){let o=this._viewportRect,a=this._isRtl(),s,_,w;if(e.overlayY==="top")_=t.y,s=o.height-_+this._viewportMargin;else if(e.overlayY==="bottom")w=o.height-t.y+this._viewportMargin*2,s=o.height-w+this._viewportMargin;else{let H=Math.min(o.bottom-t.y+o.top,t.y),Z=this._lastBoundingBoxSize.height;s=H*2,_=t.y-H,s>Z&&!this._isInitialRender&&!this._growAfterOpen&&(_=t.y-Z/2)}let C=e.overlayX==="start"&&!a||e.overlayX==="end"&&a,T=e.overlayX==="end"&&!a||e.overlayX==="start"&&a,I,P,R;if(T)R=o.width-t.x+this._viewportMargin*2,I=t.x-this._viewportMargin;else if(C)P=t.x,I=o.right-t.x;else{let H=Math.min(o.right-t.x+o.left,t.x),Z=this._lastBoundingBoxSize.width;I=H*2,P=t.x-H,I>Z&&!this._isInitialRender&&!this._growAfterOpen&&(P=t.x-Z/2)}return{top:_,left:P,bottom:w,right:R,width:I,height:s}}_setBoundingBoxStyles(t,e){let o=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));let a={};if(this._hasExactPosition())a.top=a.left="0",a.bottom=a.right=a.maxHeight=a.maxWidth="",a.width=a.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,_=this._overlayRef.getConfig().maxWidth;a.height=yn(o.height),a.top=yn(o.top),a.bottom=yn(o.bottom),a.width=yn(o.width),a.left=yn(o.left),a.right=yn(o.right),e.overlayX==="center"?a.alignItems="center":a.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?a.justifyContent="center":a.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(a.maxHeight=yn(s)),_&&(a.maxWidth=yn(_))}this._lastBoundingBoxSize=o,Sd(this._boundingBox.style,a)}_resetBoundingBoxStyles(){Sd(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Sd(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let o={},a=this._hasExactPosition(),s=this._hasFlexibleDimensions,_=this._overlayRef.getConfig();if(a){let I=this._viewportRuler.getViewportScrollPosition();Sd(o,this._getExactOverlayY(e,t,I)),Sd(o,this._getExactOverlayX(e,t,I))}else o.position="static";let w="",C=this._getOffset(e,"x"),T=this._getOffset(e,"y");C&&(w+=`translateX(${C}px) `),T&&(w+=`translateY(${T}px)`),o.transform=w.trim(),_.maxHeight&&(a?o.maxHeight=yn(_.maxHeight):s&&(o.maxHeight="")),_.maxWidth&&(a?o.maxWidth=yn(_.maxWidth):s&&(o.maxWidth="")),Sd(this._pane.style,o)}_getExactOverlayY(t,e,o){let a={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o)),t.overlayY==="bottom"){let _=this._document.documentElement.clientHeight;a.bottom=`${_-(s.y+this._overlayRect.height)}px`}else a.top=yn(s.y);return a}_getExactOverlayX(t,e,o){let a={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o));let _;if(this._isRtl()?_=t.overlayX==="end"?"left":"right":_=t.overlayX==="end"?"right":"left",_==="right"){let w=this._document.documentElement.clientWidth;a.right=`${w-(s.x+this._overlayRect.width)}px`}else a.left=yn(s.x);return a}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),o=this._scrollables.map(a=>a.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:IA(t,o),isOriginOutsideView:Fw(t,o),isOverlayClipped:IA(e,o),isOverlayOutsideView:Fw(e,o)}}_subtractOverflows(t,...e){return e.reduce((o,a)=>o-Math.max(a,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+t-this._viewportMargin,bottom:o.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&cp(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof hr)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,o=t.height||0;return{top:t.y,bottom:t.y+o,left:t.x,right:t.x+e,height:o,width:e}}};function Sd(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function AA(i){if(typeof i!="number"&&i!=null){let[t,e]=i.split(hz);return!e||e==="px"?parseFloat(t):null}return i||null}function DA(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}function pz(i,t){return i===t?!0:i.isOriginClipped===t.isOriginClipped&&i.isOriginOutsideView===t.isOriginOutsideView&&i.isOverlayClipped===t.isOverlayClipped&&i.isOverlayOutsideView===t.isOverlayOutsideView}var RA="cdk-global-overlay-wrapper",jw=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(RA),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:a,height:s,maxWidth:_,maxHeight:w}=o,C=(a==="100%"||a==="100vw")&&(!_||_==="100%"||_==="100vw"),T=(s==="100%"||s==="100vh")&&(!w||w==="100%"||w==="100vh"),I=this._xPosition,P=this._xOffset,R=this._overlayRef.getConfig().direction==="rtl",H="",Z="",X="";C?X="flex-start":I==="center"?(X="center",R?Z=P:H=P):R?I==="left"||I==="end"?(X="flex-end",H=P):(I==="right"||I==="start")&&(X="flex-start",Z=P):I==="left"||I==="start"?(X="flex-start",H=P):(I==="right"||I==="end")&&(X="flex-end",Z=P),t.position=this._cssPosition,t.marginLeft=C?"0":H,t.marginTop=T?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=C?"0":Z,e.justifyContent=X,e.alignItems=T?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,o=e.style;e.classList.remove(RA),o.justifyContent=o.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},fz=(()=>{class i{_viewportRuler=Le(Um);_document=Le(Oi);_platform=Le(Mo);_overlayContainer=Le(NA);constructor(){}global(){return new jw}flexibleConnectedTo(e){return new Uw(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Td=(()=>{class i{scrollStrategies=Le(cz);_overlayContainer=Le(NA);_positionBuilder=Le(fz);_keyboardDispatcher=Le(uz);_injector=Le(Dn);_ngZone=Le(tr);_document=Le(Oi);_directionality=Le(Rl);_location=Le(rd);_outsideClickDispatcher=Le(dz);_animationsModuleType=Le(Fo,{optional:!0});_idGenerator=Le(wa);_appRef;_styleLoader=Le(hc);constructor(){}create(e){this._styleLoader.load(LA);let o=this._createHostElement(),a=this._createPaneElement(o),s=this._createPortalOutlet(a),_=new pb(e);return _.direction=_.direction||this._directionality.value,new Vw(s,o,a,_,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Wa))}position(){return this._positionBuilder}_createPaneElement(e){let o=this._document.createElement("div");return o.id=this._idGenerator.getId("cdk-overlay-"),o.classList.add("cdk-overlay-pane"),e.appendChild(o),o}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ga)),new db(e,null,this._appRef,this._injector,this._document)}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),mz=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],FA=new Bt("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let i=Le(Td);return()=>i.scrollStrategies.reposition()}}),Hm=(()=>{class i{elementRef=Le(hr);constructor(){}static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return i})(),qw=(()=>{class i{_overlay=Le(Td);_dir=Le(Rl,{optional:!0});_overlayRef;_templatePortal;_backdropSubscription=No.EMPTY;_attachSubscription=No.EMPTY;_detachSubscription=No.EMPTY;_positionSubscription=No.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=Le(FA);_disposeOnNavigation=!1;_ngZone=Le(tr);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}backdropClick=new Yi;positionChange=new Yi;attach=new Yi;detach=new Yi;overlayKeydown=new Yi;overlayOutsideClick=new Yi;constructor(){let e=Le(Vg),o=Le(yh);this._templatePortal=new qm(e,o),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=mz);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(o=>{this.overlayKeydown.next(o),o.keyCode===27&&!this.disableClose&&!pc(o)&&(o.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(o=>{let a=this._getOriginElement(),s=xa(o);(!a||a!==s&&!a.contains(s))&&this.overlayOutsideClick.next(o)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),o=new pb({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(o.width=this.width),(this.height||this.height===0)&&(o.height=this.height),(this.minWidth||this.minWidth===0)&&(o.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(o.minHeight=this.minHeight),this.backdropClass&&(o.backdropClass=this.backdropClass),this.panelClass&&(o.panelClass=this.panelClass),o}_updatePositionStrategy(e){let o=this.positions.map(a=>({originX:a.originX,originY:a.originY,overlayX:a.overlayX,overlayY:a.overlayY,offsetX:a.offsetX||this.offsetX,offsetY:a.offsetY||this.offsetY,panelClass:a.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(o).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof Hm?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof Hm?this.origin.elementRef.nativeElement:this.origin instanceof hr?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(JC(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Qi],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",Qi],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Qi],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Qi],push:[2,"cdkConnectedOverlayPush","push",Qi],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Qi]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Wn,Ko]})}return i})();function gz(i){return()=>i.scrollStrategies.reposition()}var _z={provide:FA,deps:[Td],useFactory:gz},zA=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({providers:[Td,_z],imports:[_u,TA,Aw,Aw]})}return i})();var Hw=class{_box;_destroyed=new Mi;_resizeSubject=new Mi;_resizeObserver;_elementObservables=new Map;constructor(t){this._box=t,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new Jl(e=>{let o=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),o.unsubscribe(),this._elementObservables.delete(t)}}).pipe(ln(e=>e.some(o=>o.target===t)),Ov({bufferSize:1,refCount:!0}),gn(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},BA=(()=>{class i{_observers=new Map;_ngZone=Le(tr);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(e,o){let a=o?.box||"content-box";return this._observers.has(a)||this._observers.set(a,new Hw(a)),this._observers.get(a).observe(e)}static \u0275fac=function(o){return new(o||i)};static \u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var bz=["notch"],vz=["matFormFieldNotchedOutline",""],yz=["*"],xz=["textField"],wz=["iconPrefixContainer"],Cz=["textPrefixContainer"],Ez=["iconSuffixContainer"],Sz=["textSuffixContainer"],Tz=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Mz=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function Iz(i,t){i&1&&Ye(0,"span",21)}function Pz(i,t){if(i&1&&(z(0,"label",20),Pr(1,1),Et(2,Iz,1,0,"span",21),U()),i&2){let e=at(2);st("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),yr("for",e._control.disableAutomaticLabeling?null:e._control.id),ye(2),Gr(!e.hideRequiredMarker&&e._control.required?2:-1)}}function kz(i,t){if(i&1&&Et(0,Pz,3,5,"label",20),i&2){let e=at();Gr(e._hasFloatingLabel()?0:-1)}}function Az(i,t){i&1&&Ye(0,"div",7)}function Dz(i,t){}function Rz(i,t){if(i&1&&Et(0,Dz,0,0,"ng-template",13),i&2){at(2);let e=Zr(1);st("ngTemplateOutlet",e)}}function Oz(i,t){if(i&1&&(z(0,"div",9),Et(1,Rz,1,1,null,13),U()),i&2){let e=at();st("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),ye(),Gr(e._forceDisplayInfixLabel()?-1:1)}}function Lz(i,t){i&1&&(z(0,"div",10,2),Pr(2,2),U())}function Nz(i,t){i&1&&(z(0,"div",11,3),Pr(2,3),U())}function Fz(i,t){}function zz(i,t){if(i&1&&Et(0,Fz,0,0,"ng-template",13),i&2){at();let e=Zr(1);st("ngTemplateOutlet",e)}}function Bz(i,t){i&1&&(z(0,"div",14,4),Pr(2,4),U())}function Vz(i,t){i&1&&(z(0,"div",15,5),Pr(2,5),U())}function Uz(i,t){i&1&&Ye(0,"div",16)}function jz(i,t){if(i&1&&(z(0,"div",18),Pr(1,6),U()),i&2){let e=at();st("@transitionMessages",e._subscriptAnimationState)}}function qz(i,t){if(i&1&&(z(0,"mat-hint",22),ce(1),U()),i&2){let e=at(2);st("id",e._hintLabelId),ye(),ai(e.hintLabel)}}function Hz(i,t){if(i&1&&(z(0,"div",19),Et(1,qz,2,2,"mat-hint",22),Pr(2,7),Ye(3,"div",23),Pr(4,8),U()),i&2){let e=at();st("@transitionMessages",e._subscriptAnimationState),ye(),Gr(e.hintLabel?1:-1)}}var mb=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i,selectors:[["mat-label"]]})}return i})(),$z=new Bt("MatError");var VA=(()=>{class i{align="start";id=Le(wa).getId("mat-mdc-hint-");static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(o,a){o&2&&(Hg("id",a.id),yr("align",null),Ki("mat-mdc-form-field-hint-end",a.align==="end"))},inputs:{align:"align",id:"id"}})}return i})(),Gz=new Bt("MatPrefix");var Wz=new Bt("MatSuffix");var WA=new Bt("FloatingLabelParent"),UA=(()=>{class i{_elementRef=Le(hr);get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=Le(BA);_ngZone=Le(tr);_parent=Le(WA);_resizeSubscription=new No;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return Zz(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(o,a){o&2&&Ki("mdc-floating-label--float-above",a.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return i})();function Zz(i){let t=i;if(t.offsetParent!==null)return t.scrollWidth;let e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let o=e.scrollWidth;return e.remove(),o}var jA="mdc-line-ripple--active",fb="mdc-line-ripple--deactivating",qA=(()=>{class i{_elementRef=Le(hr);constructor(){Le(tr).runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(fb),e.add(jA)}deactivate(){this._elementRef.nativeElement.classList.add(fb)}_handleTransitionEnd=e=>{let o=this._elementRef.nativeElement.classList,a=o.contains(fb);e.propertyName==="opacity"&&a&&o.remove(jA,fb)};ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return i})(),HA=(()=>{class i{_elementRef=Le(hr);_ngZone=Le(tr);open=!1;_notch;constructor(){}ngAfterViewInit(){let e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){!this.open||!e?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(o,a){if(o&1&&Wr(bz,5),o&2){let s;cr(s=ur())&&(a._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(o,a){o&2&&Ki("mdc-notched-outline--notched",a.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:vz,ngContentSelectors:yz,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(o,a){o&1&&(zo(),Ye(0,"div",1),z(1,"div",2,0),Pr(3),U(),Ye(4,"div",3))},encapsulation:2,changeDetection:0})}return i})(),Xz={transitionMessages:Sf("transitionMessages",[Jg("enter",nd({opacity:1,transform:"translateY(0%)"})),Eh("void => enter",[nd({opacity:0,transform:"translateY(-5px)"}),Tf("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},$w=(()=>{class i{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i})}return i})();var Gw=new Bt("MatFormField"),Yz=new Bt("MAT_FORM_FIELD_DEFAULT_OPTIONS"),$A="fill",Kz="auto",GA="fixed",Qz="translateY(-50%)",ZA=(()=>{class i{_elementRef=Le(hr);_changeDetectorRef=Le(wo);_dir=Le(Rl);_platform=Le(Mo);_idGenerator=Le(wa);_defaults=Le(Yz,{optional:!0});_animationMode=Le(Fo,{optional:!0});_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=_E(mb);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=$k(e)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||Kz}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearance}set appearance(e){let o=this._appearance,a=e||this._defaults?.appearance||$A;this._appearance=a,this._appearance==="outline"&&this._appearance!==o&&(this._needsOutlineLabelOffsetUpdate=!0)}_appearance=$A;get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||GA}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||GA}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_subscriptAnimationState="";get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}_destroyed=new Mi;_isFocused=null;_explicitFormFieldControl;_needsOutlineLabelOffsetUpdate=!1;_previousControl=null;_stateChanges;_valueChanges;_describedByChanges;_injector=Le(Dn);constructor(){let e=this._defaults;e&&(e.appearance&&(this.appearance=e.appearance),this._hideRequiredMarker=!!e?.hideRequiredMarker,e.color&&(this.color=e.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=ic(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(e){let o=this._control,a="mat-mdc-form-field-type-";e&&this._elementRef.nativeElement.classList.remove(a+e.controlType),o.controlType&&this._elementRef.nativeElement.classList.add(a+o.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=o.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=o.stateChanges.pipe(xl([void 0,void 0]),wi(()=>[o.errorState,o.userAriaDescribedBy]),Rv(),ln(([[s,_],[w,C]])=>s!==w||_!==C)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),o.ngControl&&o.ngControl.valueChanges&&(this._valueChanges=o.ngControl.valueChanges.pipe(gn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Xc(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),zg(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(gn(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=ic(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(e){let o=this._control?this._control.ngControl:null;return o&&o[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let o=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,a=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;o?e.push(o.id):this._hintLabel&&e.push(this._hintLabelId),a&&e.push(a.id)}else this._errorChildren&&e.push(...this._errorChildren.map(o=>o.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let e=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){e.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let o=this._iconPrefixContainer?.nativeElement,a=this._textPrefixContainer?.nativeElement,s=this._iconSuffixContainer?.nativeElement,_=this._textSuffixContainer?.nativeElement,w=o?.getBoundingClientRect().width??0,C=a?.getBoundingClientRect().width??0,T=s?.getBoundingClientRect().width??0,I=_?.getBoundingClientRect().width??0,P=this._dir.value==="rtl"?"-1":"1",R=`${w+C}px`,Z=`calc(${P} * (${R} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;e.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${Qz} translateX(${Z})
    )`;let X=w+C+T+I;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${X}px)`)}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let o=e.getRootNode();return o&&o!==e}return document.documentElement.contains(e)}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["mat-form-field"]],contentQueries:function(o,a,s){if(o&1&&(wE(s,a._labelChild,mb,5),gs(s,$w,5),gs(s,Gz,5),gs(s,Wz,5),gs(s,$z,5),gs(s,VA,5)),o&2){CE();let _;cr(_=ur())&&(a._formFieldControl=_.first),cr(_=ur())&&(a._prefixChildren=_),cr(_=ur())&&(a._suffixChildren=_),cr(_=ur())&&(a._errorChildren=_),cr(_=ur())&&(a._hintChildren=_)}},viewQuery:function(o,a){if(o&1&&(Wr(xz,5),Wr(wz,5),Wr(Cz,5),Wr(Ez,5),Wr(Sz,5),Wr(UA,5),Wr(HA,5),Wr(qA,5)),o&2){let s;cr(s=ur())&&(a._textField=s.first),cr(s=ur())&&(a._iconPrefixContainer=s.first),cr(s=ur())&&(a._textPrefixContainer=s.first),cr(s=ur())&&(a._iconSuffixContainer=s.first),cr(s=ur())&&(a._textSuffixContainer=s.first),cr(s=ur())&&(a._floatingLabel=s.first),cr(s=ur())&&(a._notchedOutline=s.first),cr(s=ur())&&(a._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(o,a){o&2&&Ki("mat-mdc-form-field-label-always-float",a._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",a._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",a._hasIconSuffix)("mat-form-field-invalid",a._control.errorState)("mat-form-field-disabled",a._control.disabled)("mat-form-field-autofilled",a._control.autofilled)("mat-form-field-no-animations",a._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",a.appearance=="fill")("mat-form-field-appearance-outline",a.appearance=="outline")("mat-form-field-hide-placeholder",a._hasFloatingLabel()&&!a._shouldLabelFloat())("mat-focused",a._control.focused)("mat-primary",a.color!=="accent"&&a.color!=="warn")("mat-accent",a.color==="accent")("mat-warn",a.color==="warn")("ng-untouched",a._shouldForward("untouched"))("ng-touched",a._shouldForward("touched"))("ng-pristine",a._shouldForward("pristine"))("ng-dirty",a._shouldForward("dirty"))("ng-valid",a._shouldForward("valid"))("ng-invalid",a._shouldForward("invalid"))("ng-pending",a._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Kn([{provide:Gw,useExisting:i},{provide:WA,useExisting:i}])],ngContentSelectors:Mz,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(o,a){if(o&1){let s=Ri();zo(Tz),Et(0,kz,1,1,"ng-template",null,0,td),z(2,"div",6,1),kt("click",function(w){return jt(s),qt(a._control.onContainerClick(w))}),Et(4,Az,1,0,"div",7),z(5,"div",8),Et(6,Oz,2,2,"div",9)(7,Lz,3,0,"div",10)(8,Nz,3,0,"div",11),z(9,"div",12),Et(10,zz,1,1,null,13),Pr(11),U(),Et(12,Bz,3,0,"div",14)(13,Vz,3,0,"div",15),U(),Et(14,Uz,1,0,"div",16),U(),z(15,"div",17),Et(16,jz,2,1,"div",18)(17,Hz,5,2,"div",19),U()}if(o&2){let s;ye(2),Ki("mdc-text-field--filled",!a._hasOutline())("mdc-text-field--outlined",a._hasOutline())("mdc-text-field--no-label",!a._hasFloatingLabel())("mdc-text-field--disabled",a._control.disabled)("mdc-text-field--invalid",a._control.errorState),ye(2),Gr(!a._hasOutline()&&!a._control.disabled?4:-1),ye(2),Gr(a._hasOutline()?6:-1),ye(),Gr(a._hasIconPrefix?7:-1),ye(),Gr(a._hasTextPrefix?8:-1),ye(2),Gr(!a._hasOutline()||a._forceDisplayInfixLabel()?10:-1),ye(2),Gr(a._hasTextSuffix?12:-1),ye(),Gr(a._hasIconSuffix?13:-1),ye(),Gr(a._hasOutline()?-1:14),ye(),Ki("mat-mdc-form-field-subscript-dynamic-size",a.subscriptSizing==="dynamic"),ye(),Gr((s=a._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[UA,HA,Xg,qA,VA],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-sys-outline));border-width:var(--mdc-outlined-text-field-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Xz.transitionMessages]},changeDetection:0})}return i})(),XA=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({imports:[en,Gk,en]})}return i})();var eB=["trigger"],tB=["panel"],iB=[[["mat-select-trigger"]],"*"],rB=["mat-select-trigger","*"];function nB(i,t){if(i&1&&(z(0,"span",4),ce(1),U()),i&2){let e=at();ye(),ai(e.placeholder)}}function oB(i,t){i&1&&Pr(0)}function sB(i,t){if(i&1&&(z(0,"span",11),ce(1),U()),i&2){let e=at(2);ye(),ai(e.triggerValue)}}function aB(i,t){if(i&1&&(z(0,"span",5),Et(1,oB,1,0)(2,sB,2,1,"span",11),U()),i&2){let e=at();ye(),Gr(e.customTrigger?1:2)}}function lB(i,t){if(i&1){let e=Ri();z(0,"div",12,1),kt("@transformPanel.done",function(a){jt(e);let s=at();return qt(s._panelDoneAnimatingStream.next(a.toState))})("keydown",function(a){jt(e);let s=at();return qt(s._handleKeydown(a))}),Pr(2,1),U()}if(i&2){let e=at();xE("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),st("ngClass",e.panelClass)("@transformPanel","showing"),yr("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var cB={transformPanelWrap:Sf("transformPanelWrap",[Eh("* => void",qE("@transformPanel",[jE()],{optional:!0}))]),transformPanel:Sf("transformPanel",[Jg("void",nd({opacity:0,transform:"scale(1, 0.8)"})),Eh("void => showing",Tf("120ms cubic-bezier(0, 0, 0.2, 1)",nd({opacity:1,transform:"scale(1, 1)"}))),Eh("* => void",Tf("100ms linear",nd({opacity:0})))])};var YA=new Bt("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let i=Le(Td);return()=>i.scrollStrategies.reposition()}});function uB(i){return()=>i.scrollStrategies.reposition()}var dB=new Bt("MAT_SELECT_CONFIG"),hB={provide:YA,deps:[Td],useFactory:uB},pB=new Bt("MatSelectTrigger"),Ww=class{source;value;constructor(t,e){this.source=t,this.value=e}},KA=(()=>{class i{_viewportRuler=Le(Um);_changeDetectorRef=Le(wo);_elementRef=Le(hr);_dir=Le(Rl,{optional:!0});_idGenerator=Le(wa);_parentFormField=Le(Gw,{optional:!0});ngControl=Le(cc,{self:!0,optional:!0});_liveAnnouncer=Le(iA);_defaultOptions=Le(dB,{optional:!0});_initialized=new Mi;options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(e){let o=this.options.toArray()[e];if(o){let a=this.panel.nativeElement,s=hA(e,this.options,this.optionGroups),_=o._getHostElement();e===0&&s===1?a.scrollTop=0:a.scrollTop=pA(_.offsetTop,_.offsetHeight,a.scrollTop,a.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new Ww(this,e)}_scrollStrategyFactory=Le(YA);_panelOpen=!1;_compareWith=(e,o)=>e===o;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new Mi;_errorStateTracker;stateChanges=new Mi;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_panelDoneAnimatingStream=new Mi;_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;disableRipple=!1;tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator(Us.required)??!1}set required(e){this._required=e,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";canSelectNullableOptions=this._defaultOptions?.canSelectNullableOptions??!1;optionSelectionChanges=hf(()=>{let e=this.options;return e?e.changes.pipe(xl(e),xo(()=>Xc(...e.map(o=>o.onSelectionChange)))):this._initialized.pipe(xo(()=>this.optionSelectionChanges))});openedChange=new Yi;_openedStream=this.openedChange.pipe(ln(e=>e),wi(()=>{}));_closedStream=this.openedChange.pipe(ln(e=>!e),wi(()=>{}));selectionChange=new Yi;valueChange=new Yi;constructor(){let e=Le(uA),o=Le(Vx,{optional:!0}),a=Le(gd,{optional:!0}),s=Le(new Qu("tabindex"),{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),this._defaultOptions?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new H_(e,this.ngControl,a,o,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=s==null?0:parseInt(s)||0,this.id=this.id}ngOnInit(){this._selectionModel=new pp(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(pf(),gn(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(gn(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(gn(this._destroy)).subscribe(e=>{e.added.forEach(o=>o.select()),e.removed.forEach(o=>o.deselect())}),this.options.changes.pipe(xl(null),gn(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),o=this.ngControl;if(e!==this._triggerAriaLabelledBy){let a=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?a.setAttribute("aria-labelledby",e):a.removeAttribute("aria-labelledby")}o&&(this._previousControl!==o.control&&(this._previousControl!==void 0&&o.disabled!==null&&o.disabled!==this.disabled&&(this.disabled=o.disabled),this._previousControl=o.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_trackedModal=null;_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let o=`${this.id}-panel`;this._trackedModal&&vw(this._trackedModal,"aria-owns",o),Jk(e,"aria-owns",o),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;vw(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(o=>o.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let o=e.keyCode,a=o===40||o===38||o===37||o===39,s=o===13||o===32,_=this._keyManager;if(!_.isTyping()&&s&&!pc(e)||(this.multiple||e.altKey)&&a)e.preventDefault(),this.open();else if(!this.multiple){let w=this.selected;_.onKeydown(e);let C=this.selected;C&&w!==C&&this._liveAnnouncer.announce(C.viewValue,1e4)}}_handleOpenKeydown(e){let o=this._keyManager,a=e.keyCode,s=a===40||a===38,_=o.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(!_&&(a===13||a===32)&&o.activeItem&&!pc(e))e.preventDefault(),o.activeItem._selectViaInteraction();else if(!_&&this._multiple&&a===65&&e.ctrlKey){e.preventDefault();let w=this.options.some(C=>!C.disabled&&!C.selected);this.options.forEach(C=>{C.disabled||(w?C.select():C.deselect())})}else{let w=o.activeItemIndex;o.onKeydown(e),this._multiple&&s&&e.shiftKey&&o.activeItem&&o.activeItemIndex!==w&&o.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Os(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(o=>o.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(o=>this._selectOptionByValue(o)),this._sortValues();else{let o=this._selectOptionByValue(e);o?this._keyManager.updateActiveItem(o):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let o=this.options.find(a=>{if(this._selectionModel.isSelected(a))return!1;try{return(a.value!=null||this.canSelectNullableOptions)&&this._compareWith(a.value,e)}catch{return!1}});return o&&this._selectionModel.select(o),o}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_skipPredicate=e=>this.panelOpen?!1:e.disabled;_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof Hm?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new U_(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=Xc(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(gn(e)).subscribe(o=>{this._onSelect(o.source,o.isUserInput),o.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Xc(...this.options.map(o=>o._stateChanges)).pipe(gn(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,o){let a=this._selectionModel.isSelected(e);!this.canSelectNullableOptions&&e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(a!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),o&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),o&&this.focus())),a!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((o,a)=>this.sortComparator?this.sortComparator(o,a,e):e.indexOf(o)-e.indexOf(a)),this.stateChanges.next()}}_propagateChanges(e){let o;this.multiple?o=this.selected.map(a=>a.value):o=this.selected?this.selected.value:e,this._value=o,this.valueChange.emit(o),this._onChange(o),this.selectionChange.emit(this._getChangeEvent(o)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let o=0;o<this.options.length;o++)if(!this.options.get(o).disabled){e=o;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||null,o=e?e+" ":"";return this.ariaLabelledby?o+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),o=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(o+=" "+this.ariaLabelledby),o}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["mat-select"]],contentQueries:function(o,a,s){if(o&1&&(gs(s,pB,5),gs(s,W_,5),gs(s,Iw,5)),o&2){let _;cr(_=ur())&&(a.customTrigger=_.first),cr(_=ur())&&(a.options=_),cr(_=ur())&&(a.optionGroups=_)}},viewQuery:function(o,a){if(o&1&&(Wr(eB,5),Wr(tB,5),Wr(qw,5)),o&2){let s;cr(s=ur())&&(a.trigger=s.first),cr(s=ur())&&(a.panel=s.first),cr(s=ur())&&(a._overlayDir=s.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(o,a){o&1&&kt("keydown",function(_){return a._handleKeydown(_)})("focus",function(){return a._onFocus()})("blur",function(){return a._onBlur()}),o&2&&(yr("id",a.id)("tabindex",a.disabled?-1:a.tabIndex)("aria-controls",a.panelOpen?a.id+"-panel":null)("aria-expanded",a.panelOpen)("aria-label",a.ariaLabel||null)("aria-required",a.required.toString())("aria-disabled",a.disabled.toString())("aria-invalid",a.errorState)("aria-activedescendant",a._getAriaActiveDescendant()),Ki("mat-mdc-select-disabled",a.disabled)("mat-mdc-select-invalid",a.errorState)("mat-mdc-select-required",a.required)("mat-mdc-select-empty",a.empty)("mat-mdc-select-multiple",a.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",Qi],disableRipple:[2,"disableRipple","disableRipple",Qi],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:id(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Qi],placeholder:"placeholder",required:[2,"required","required",Qi],multiple:[2,"multiple","multiple",Qi],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",Qi],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",id],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth",canSelectNullableOptions:[2,"canSelectNullableOptions","canSelectNullableOptions",Qi]},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[Kn([{provide:$w,useExisting:i},{provide:Mw,useExisting:i}]),Wn,Ko],ngContentSelectors:rB,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(o,a){if(o&1){let s=Ri();zo(iB),z(0,"div",2,0),kt("click",function(){return jt(s),qt(a.open())}),z(3,"div",3),Et(4,nB,2,1,"span",4)(5,aB,3,1,"span",5),U(),z(6,"div",6)(7,"div",7),ff(),z(8,"svg",8),Ye(9,"path",9),U()()()(),Et(10,lB,3,9,"ng-template",10),kt("backdropClick",function(){return jt(s),qt(a.close())})("attach",function(){return jt(s),qt(a._onAttached())})("detach",function(){return jt(s),qt(a.close())})}if(o&2){let s=Zr(1);ye(3),yr("id",a._valueId),ye(),Gr(a.empty?4:5),ye(6),st("cdkConnectedOverlayPanelClass",a._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",a._scrollStrategy)("cdkConnectedOverlayOrigin",a._preferredOverlayOrigin||s)("cdkConnectedOverlayOpen",a.panelOpen)("cdkConnectedOverlayPositions",a._positions)("cdkConnectedOverlayWidth",a._overlayWidth)}},dependencies:[Hm,qw,Zg],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}'],encapsulation:2,data:{animation:[cB.transformPanel]},changeDetection:0})}return i})();var QA=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({providers:[hB],imports:[zA,Pw,en,ub,XA,Pw,en]})}return i})();var JA=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({imports:[en,Bm]})}return i})();var mB=["button"],gB=["*"];function _B(i,t){if(i&1&&(z(0,"div",2),Ye(1,"mat-pseudo-checkbox",6),U()),i&2){let e=at();ye(),st("disabled",e.disabled)}}var e3=new Bt("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:bB});function bB(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1}}var t3=new Bt("MatButtonToggleGroup"),vB={provide:md,useExisting:$a(()=>Zw),multi:!0},gb=class{source;value;constructor(t,e){this.source=t,this.value=e}},Zw=(()=>{class i{_changeDetector=Le(wo);_dir=Le(Rl,{optional:!0});_multiple=!1;_disabled=!1;_disabledInteractive=!1;_selectionModel;_rawValue;_controlValueAccessorChangeFn=()=>{};_onTouched=()=>{};_buttonToggles;appearance;get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}_name=Le(wa).getId("mat-button-toggle-group-");vertical;get value(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(o=>o.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}valueChange=new Yi;get selected(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=e,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markButtonsForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markButtonsForCheck()}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}change=new Yi;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._markButtonsForCheck()}_hideSingleSelectionIndicator;get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(e){this._hideMultipleSelectionIndicator=e,this._markButtonsForCheck()}_hideMultipleSelectionIndicator;constructor(){let e=Le(e3,{optional:!0});this.appearance=e&&e.appearance?e.appearance:"standard",this.hideSingleSelectionIndicator=e?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=e?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new pp(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked)),this.multiple||this._initializeTabIndex()}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_keydown(e){if(this.multiple||this.disabled)return;let a=e.target.id,s=this._buttonToggles.toArray().findIndex(w=>w.buttonId===a),_=null;switch(e.keyCode){case 32:case 13:_=this._buttonToggles.get(s)||null;break;case 38:_=this._getNextButton(s,-1);break;case 37:_=this._getNextButton(s,this.dir==="ltr"?-1:1);break;case 40:_=this._getNextButton(s,1);break;case 39:_=this._getNextButton(s,this.dir==="ltr"?1:-1);break;default:return}_&&(e.preventDefault(),_._onButtonClick(),_.focus())}_emitChangeEvent(e){let o=new gb(e,this.value);this._rawValue=o.value,this._controlValueAccessorChangeFn(o.value),this.change.emit(o)}_syncButtonToggle(e,o,a=!1,s=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?o?this._selectionModel.select(e):this._selectionModel.deselect(e):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(e,a)):this._updateModelValue(e,a)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return typeof this._rawValue>"u"?!1:this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(o=>e.value!=null&&o===e.value):e.value===this._rawValue}_initializeTabIndex(){if(this._buttonToggles.forEach(e=>{e.tabIndex=-1}),this.selected)this.selected.tabIndex=0;else for(let e=0;e<this._buttonToggles.length;e++){let o=this._buttonToggles.get(e);if(!o.disabled){o.tabIndex=0;break}}this._markButtonsForCheck()}_getNextButton(e,o){let a=this._buttonToggles;for(let s=1;s<=a.length;s++){let _=(e+o*s+a.length)%a.length,w=a.get(_);if(w&&!w.disabled)return w}return null}_setSelectionByValue(e){if(this._rawValue=e,!this._buttonToggles)return;let o=this._buttonToggles.toArray();if(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(a=>this._selectValue(a,o))):(this._clearSelection(),this._selectValue(e,o)),!this.multiple&&o.every(a=>a.tabIndex===-1)){for(let a of o)if(!a.disabled){a.tabIndex=0;break}}}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>{e.checked=!1,this.multiple||(e.tabIndex=-1)})}_selectValue(e,o){for(let a of o)if(a.value!=null&&a.value===e){a.checked=!0,this._selectionModel.select(a),this.multiple||(a.tabIndex=0);break}}_updateModelValue(e,o){o&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}static \u0275fac=function(o){return new(o||i)};static \u0275dir=Ni({type:i,selectors:[["mat-button-toggle-group"]],contentQueries:function(o,a,s){if(o&1&&gs(s,_b,5),o&2){let _;cr(_=ur())&&(a._buttonToggles=_)}},hostAttrs:[1,"mat-button-toggle-group"],hostVars:6,hostBindings:function(o,a){o&1&&kt("keydown",function(_){return a._keydown(_)}),o&2&&(yr("role",a.multiple?"group":"radiogroup")("aria-disabled",a.disabled),Ki("mat-button-toggle-vertical",a.vertical)("mat-button-toggle-group-appearance-standard",a.appearance==="standard"))},inputs:{appearance:"appearance",name:"name",vertical:[2,"vertical","vertical",Qi],value:"value",multiple:[2,"multiple","multiple",Qi],disabled:[2,"disabled","disabled",Qi],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Qi],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Qi],hideMultipleSelectionIndicator:[2,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",Qi]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[Kn([vB,{provide:t3,useExisting:i}]),Wn]})}return i})(),_b=(()=>{class i{_changeDetectorRef=Le(wo);_elementRef=Le(hr);_focusMonitor=Le(rA);_idGenerator=Le(wa);_animationMode=Le(Fo,{optional:!0});_checked=!1;ariaLabel;ariaLabelledby=null;_buttonElement;buttonToggleGroup;get buttonId(){return`${this.id}-button`}id;name;value;get tabIndex(){return this._tabIndex}set tabIndex(e){e!==this._tabIndex&&(this._tabIndex=e,this._markForCheck())}_tabIndex;disableRipple;get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}_appearance;get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}_disabled=!1;get disabledInteractive(){return this._disabledInteractive||this.buttonToggleGroup!==null&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new Yi;constructor(){Le(hc).load($_);let e=Le(t3,{optional:!0}),o=Le(new Qu("tabindex"),{optional:!0})||"",a=Le(e3,{optional:!0});this._tabIndex=parseInt(o)||0,this.buttonToggleGroup=e,this.appearance=a&&a.appearance?a.appearance:"standard",this.disabledInteractive=a?.disabledInteractive??!1}ngOnInit(){let e=this.buttonToggleGroup;this.id=this.id||this._idGenerator.getId("mat-button-toggle-"),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._animationMode!=="NoopAnimations"&&this._elementRef.nativeElement.classList.add("mat-button-toggle-animations-enabled"),this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){if(this.disabled)return;let e=this.isSingleSelector()?!0:!this._checked;if(e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){let o=this.buttonToggleGroup._buttonToggles.find(a=>a.tabIndex===0);o&&(o.tabIndex=-1),this.tabIndex=0}this.change.emit(new gb(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["mat-button-toggle"]],viewQuery:function(o,a){if(o&1&&Wr(mB,5),o&2){let s;cr(s=ur())&&(a._buttonElement=s.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(o,a){o&1&&kt("focus",function(){return a.focus()}),o&2&&(yr("aria-label",null)("aria-labelledby",null)("id",a.id)("name",null),Ki("mat-button-toggle-standalone",!a.buttonToggleGroup)("mat-button-toggle-checked",a.checked)("mat-button-toggle-disabled",a.disabled)("mat-button-toggle-disabled-interactive",a.disabledInteractive)("mat-button-toggle-appearance-standard",a.appearance==="standard"))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",Qi],appearance:"appearance",checked:[2,"checked","checked",Qi],disabled:[2,"disabled","disabled",Qi],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Qi]},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[Wn],ngContentSelectors:gB,decls:7,vars:13,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-checkbox-wrapper"],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"],["state","checked","aria-hidden","true","appearance","minimal",3,"disabled"]],template:function(o,a){if(o&1){let s=Ri();zo(),z(0,"button",1,0),kt("click",function(){return jt(s),qt(a._onButtonClick())}),Et(2,_B,2,1,"div",2),z(3,"span",3),Pr(4),U()(),Ye(5,"span",4)(6,"span",5)}if(o&2){let s=Zr(1);st("id",a.buttonId)("disabled",a.disabled&&!a.disabledInteractive||null),yr("role",a.isSingleSelector()?"radio":"button")("tabindex",a.disabled&&!a.disabledInteractive?-1:a.tabIndex)("aria-pressed",a.isSingleSelector()?null:a.checked)("aria-checked",a.isSingleSelector()?a.checked:null)("name",a._getButtonName())("aria-label",a.ariaLabel)("aria-labelledby",a.ariaLabelledby)("aria-disabled",a.disabled&&a.disabledInteractive?"true":null),ye(2),Gr(a.buttonToggleGroup&&(!a.buttonToggleGroup.multiple&&!a.buttonToggleGroup.hideSingleSelectionIndicator||a.buttonToggleGroup.multiple&&!a.buttonToggleGroup.hideMultipleSelectionIndicator)?2:-1),ye(4),st("matRippleTrigger",s)("matRippleDisabled",a.disableRipple||a.disabled)}},dependencies:[G_,Tw],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}@media(forced-colors: active){.mat-button-toggle-standalone,.mat-button-toggle-group{outline:solid 1px}}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}@media(forced-colors: active){.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{outline:0}}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-legacy-button-toggle-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle-checkbox-wrapper{display:inline-block;justify-content:flex-start;align-items:center;width:0;height:18px;line-height:18px;overflow:hidden;box-sizing:border-box;position:absolute;top:50%;left:16px;transform:translate3d(0, -50%, 0)}[dir=rtl] .mat-button-toggle-checkbox-wrapper{left:auto;right:16px}.mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:12px}[dir=rtl] .mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:auto;right:12px}.mat-button-toggle-checked .mat-button-toggle-checkbox-wrapper{width:18px}.mat-button-toggle-animations-enabled .mat-button-toggle-checkbox-wrapper{transition:width 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-checkbox-wrapper{transition:none}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-legacy-button-toggle-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color, var(--mat-sys-on-surface));background-color:var(--mat-standard-button-toggle-background-color, transparent);font-family:var(--mat-standard-button-toggle-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-standard-button-toggle-label-text-size, var(--mat-sys-label-large-size));line-height:var(--mat-standard-button-toggle-label-text-line-height, var(--mat-sys-label-large-line-height));font-weight:var(--mat-standard-button-toggle-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mat-standard-button-toggle-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-standard-button-toggle-selected-state-background-color, var(--mat-sys-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-state-background-color, transparent)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color, var(--mat-sys-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height, 40px)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}@media(forced-colors: active){.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-animations-enabled .mat-button-toggle-button{transition:padding 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-button{transition:none}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:30px}[dir=rtl] .mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:0;padding-right:30px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}"],encapsulation:2,changeDetection:0})}return i})(),i3=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({imports:[en,Bm,_b,en]})}return i})();var xB=["determinateSpinner"];function wB(i,t){if(i&1&&(ff(),z(0,"svg",11),Ye(1,"circle",12),U()),i&2){let e=at();yr("viewBox",e._viewBox()),ye(),Qo("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),yr("r",e._circleRadius())}}var CB=new Bt("mat-progress-spinner-default-options",{providedIn:"root",factory:EB});function EB(){return{diameter:r3}}var r3=100,SB=10,bb=(()=>{class i{_elementRef=Le(hr);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=Le(Fo,{optional:!0}),o=Le(CB);this._noopAnimations=e==="NoopAnimations"&&!!o&&!o._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",o&&(o.color&&(this.color=this._defaultColor=o.color),o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=r3;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-SB)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Ot({type:i,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(o,a){if(o&1&&Wr(xB,5),o&2){let s;cr(s=ur())&&(a._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(o,a){o&2&&(yr("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",a.mode==="determinate"?a.value:null)("mode",a.mode),vf("mat-"+a.color),Qo("width",a.diameter,"px")("height",a.diameter,"px")("--mdc-circular-progress-size",a.diameter+"px")("--mdc-circular-progress-active-indicator-width",a.diameter+"px"),Ki("_mat-animation-noopable",a._noopAnimations)("mdc-circular-progress--indeterminate",a.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",id],diameter:[2,"diameter","diameter",id],strokeWidth:[2,"strokeWidth","strokeWidth",id]},exportAs:["matProgressSpinner"],features:[Wn],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(o,a){if(o&1&&(Et(0,wB,2,8,"ng-template",null,0,td),z(2,"div",2,1),ff(),z(4,"svg",3),Ye(5,"circle",4),U()(),iE(),z(6,"div",5)(7,"div",6)(8,"div",7),qg(9,8),U(),z(10,"div",9),qg(11,8),U(),z(12,"div",10),qg(13,8),U()()()),o&2){let s=Zr(1);ye(4),yr("viewBox",a._viewBox()),ye(),Qo("stroke-dasharray",a._strokeCircumference(),"px")("stroke-dashoffset",a._strokeDashOffset(),"px")("stroke-width",a._circleStrokeWidth(),"%"),yr("r",a._circleRadius()),ye(4),st("ngTemplateOutlet",s),ye(2),st("ngTemplateOutlet",s),ye(2),st("ngTemplateOutlet",s)}},dependencies:[Xg],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return i})();var vb=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=Pi({type:i});static \u0275inj=Ii({imports:[en]})}return i})();var s3=UC(Kw());function TB(i,t){i&1&&(z(0,"div",46),Ye(1,"mat-spinner"),z(2,"p"),ce(3,"Cargando datos..."),U()())}function MB(i,t){if(i&1){let e=Ri();z(0,"div",47)(1,"mat-icon"),ce(2,"error_outline"),U(),z(3,"p"),ce(4,"Error al cargar los datos. Intente nuevamente."),U(),z(5,"button",48),kt("click",function(){jt(e);let a=at();return qt(a.fetchData())}),ce(6,"Reintentar"),U()()}}function IB(i,t){i&1&&(z(0,"div")(1,"div",49),Ye(2,"span",50),z(3,"span"),ce(4,"0-29% acceso a internet"),U()(),z(5,"div",49),Ye(6,"span",51),z(7,"span"),ce(8,"30-69% acceso a internet"),U()(),z(9,"div",49),Ye(10,"span",52),z(11,"span"),ce(12,"70-100% acceso a internet"),U()()())}function PB(i,t){i&1&&(z(0,"div")(1,"div",49),Ye(2,"span",53),z(3,"span"),ce(4,"0-14 a\xF1os (bajo)"),U()(),z(5,"div",49),Ye(6,"span",54),z(7,"span"),ce(8,"0-14 a\xF1os (medio)"),U()(),z(9,"div",49),Ye(10,"span",55),z(11,"span"),ce(12,"0-14 a\xF1os (alto)"),U()()())}function kB(i,t){i&1&&(z(0,"div")(1,"div",49),Ye(2,"span",56),z(3,"span"),ce(4,"15-59 a\xF1os (bajo)"),U()(),z(5,"div",49),Ye(6,"span",57),z(7,"span"),ce(8,"15-59 a\xF1os (medio)"),U()(),z(9,"div",49),Ye(10,"span",58),z(11,"span"),ce(12,"15-59 a\xF1os (alto)"),U()()())}function AB(i,t){i&1&&(z(0,"div")(1,"div",49),Ye(2,"span",59),z(3,"span"),ce(4,"60+ a\xF1os (bajo)"),U()(),z(5,"div",49),Ye(6,"span",60),z(7,"span"),ce(8,"60+ a\xF1os (medio)"),U()(),z(9,"div",49),Ye(10,"span",61),z(11,"span"),ce(12,"60+ a\xF1os (alto)"),U()()())}function DB(i,t){i&1&&(z(0,"div")(1,"div",49),Ye(2,"span",62),z(3,"span"),ce(4,"Educaci\xF3n Primaria (bajo)"),U()(),z(5,"div",49),Ye(6,"span",63),z(7,"span"),ce(8,"Educaci\xF3n Primaria (medio)"),U()(),z(9,"div",49),Ye(10,"span",64),z(11,"span"),ce(12,"Educaci\xF3n Primaria (alto)"),U()()())}function RB(i,t){i&1&&(z(0,"div")(1,"div",49),Ye(2,"span",65),z(3,"span"),ce(4,"Educaci\xF3n Secundaria (bajo)"),U()(),z(5,"div",49),Ye(6,"span",66),z(7,"span"),ce(8,"Educaci\xF3n Secundaria (medio)"),U()(),z(9,"div",49),Ye(10,"span",67),z(11,"span"),ce(12,"Educaci\xF3n Secundaria (alto)"),U()()())}function OB(i,t){i&1&&(z(0,"div")(1,"div",49),Ye(2,"span",68),z(3,"span"),ce(4,"Educaci\xF3n Superior (bajo)"),U()(),z(5,"div",49),Ye(6,"span",69),z(7,"span"),ce(8,"Educaci\xF3n Superior (medio)"),U()(),z(9,"div",49),Ye(10,"span",70),z(11,"span"),ce(12,"Educaci\xF3n Superior (alto)"),U()()())}function LB(i,t){if(i&1&&(z(0,"mat-option",71),ce(1),U()),i&2){let e=t.$implicit;st("value",e),ye(),ai(e)}}function NB(i,t){if(i&1&&(z(0,"mat-button-toggle",71),ce(1),U()),i&2){let e=t.$implicit;st("value",e.value),ye(),ai(e.label)}}function FB(i,t){if(i&1&&(z(0,"mat-button-toggle",71),ce(1),U()),i&2){let e=t.$implicit;st("value",e.value),ye(),ai(e.label)}}function zB(i,t){if(i&1&&(z(0,"mat-card-subtitle"),ce(1),U()),i&2){let e=at();ye(),yi("Comuna: ",e.selectedComuna,"")}}function BB(i,t){i&1&&(z(0,"mat-card-subtitle"),ce(1,"Todas las comunas"),U())}function VB(i,t){if(i&1&&(z(0,"div",30),Ye(1,"span",72),z(2,"span"),ce(3),cn(4,"number"),U()()),i&2){let e=t.$implicit,o=at();ye(),Qo("background-color",o.getAgeColor(e.value)),ye(2),_a("",e.label,": ",Rn(4,4,o.ageDistribution[e.value],"1.1-1"),"%")}}function UB(i,t){if(i&1){let e=Ri();z(0,"div",73)(1,"div",74)(2,"button",75),kt("click",function(){jt(e);let a=at();return qt(a.closeModal())}),ce(3,"\xD7"),U(),z(4,"h4"),ce(5),U(),z(6,"p")(7,"strong"),ce(8,"Comuna:"),U(),ce(9),U(),z(10,"p")(11,"strong"),ce(12,"Poblaci\xF3n:"),U(),ce(13),U(),z(14,"p")(15,"strong"),ce(16,"Densidad:"),U(),ce(17),U(),z(18,"p")(19,"strong"),ce(20,"Acceso a internet:"),U(),ce(21),U(),z(22,"p")(23,"strong"),ce(24,"Acceso a agua:"),U(),ce(25),U(),z(26,"p")(27,"strong"),ce(28,"Acceso a gas:"),U(),ce(29),U(),z(30,"p")(31,"strong"),ce(32,"Adultos mayores (60+):"),U(),ce(33),U(),z(34,"strong"),ce(35,"Educaci\xF3n:"),U(),Ye(36,"br"),ce(37),Ye(38,"br"),ce(39),Ye(40,"br"),ce(41),U()()}if(i&2){let e=at();ye(5),yi("Manzana ",(e.selectedFeature.properties==null?null:e.selectedFeature.properties.cod_dane_a)||"N/A",""),ye(4),yi(" ",(e.selectedFeature.properties==null?null:e.selectedFeature.properties.nmb_lc_cm)||"N/A",""),ye(4),yi(" ",(e.selectedFeature.properties==null?null:e.selectedFeature.properties.tp27_perso)||"0",""),ye(4),yi(" ",((e.selectedFeature.properties==null?null:e.selectedFeature.properties.populationDensity)||0).toFixed(2)," pers/m\xB2"),ye(4),yi(" ",((e.selectedFeature.properties==null?null:e.selectedFeature.properties.internetAccess)||0).toFixed(1),"%"),ye(4),yi(" ",((e.selectedFeature.properties==null?null:e.selectedFeature.properties.waterAccess)||0).toFixed(1),"%"),ye(4),yi(" ",((e.selectedFeature.properties==null?null:e.selectedFeature.properties.gasAccess)||0).toFixed(1),"%"),ye(4),yi(" ",((e.selectedFeature.properties==null?null:e.selectedFeature.properties.elderlyPercentage)||0).toFixed(1),"% "),ye(4),yi(" - Primaria: ",((e.selectedFeature.properties==null?null:e.selectedFeature.properties.educationPrimary)||0).toFixed(1),"%"),ye(2),yi(" - Secundaria: ",((e.selectedFeature.properties==null?null:e.selectedFeature.properties.educationSecondary)||0).toFixed(1),"%"),ye(2),yi(" - Superior: ",((e.selectedFeature.properties==null?null:e.selectedFeature.properties.educationHigher)||0).toFixed(1),"% ")}}var yb=class i{constructor(t,e){this.platformId=t;this.http=e}map;data=[];popup=null;selectedFeature=null;isLoading=!0;error=!1;selectedComuna="";selectedAgeGroup="";selectedEducationLevel="";internetAccessFilter="all";zoomLevel=12;comunas=[];ageGroups=[{value:"0-14",label:"0-14 a\xF1os"},{value:"15-59",label:"15-59 a\xF1os"},{value:"60+",label:"60+ a\xF1os"}];educationLevels=[{value:"primary",label:"Primaria"},{value:"secondary",label:"Secundaria"},{value:"higher",label:"Superior"}];ngOnInit(){this.fetchData()}ngOnDestroy(){this.map&&this.map.remove(),this.popup&&this.popup.remove(),this.selectedFeature=null}get filteredData(){let t=this.data;return this.selectedComuna&&(t=t.filter(e=>e.nmb_lc_cm===this.selectedComuna)),this.internetAccessFilter==="high"?t=t.filter(e=>e.tp19_inte1/(e.tvivienda||1)>.7):this.internetAccessFilter==="low"&&(t=t.filter(e=>e.tp19_inte1/(e.tvivienda||1)<=.3)),t}get totalPopulation(){return this.filteredData.reduce((t,e)=>t+(e.tp27_perso||0),0)}get totalHomes(){return this.filteredData.reduce((t,e)=>t+(e.tvivienda||0),0)}get internetAccessPercentage(){let t=this.filteredData.reduce((o,a)=>o+(a.tp19_inte1||0),0),e=this.totalHomes||1;return t/e*100}get waterAccessPercentage(){let t=this.filteredData.reduce((o,a)=>o+(a.tp19_acu_1||0),0),e=this.totalHomes||1;return t/e*100}get gasAccessPercentage(){let t=this.filteredData.reduce((o,a)=>o+(a.tp19_gas_1||0),0),e=this.totalHomes||1;return t/e*100}get ageDistribution(){let t={"0-14":0,"15-59":0,"60+":0};this.filteredData.forEach(o=>{t["0-14"]+=(o.tp34_1_eda||0)+(o.tp34_2_eda||0)+(o.tp34_3_eda||0),t["15-59"]+=(o.tp34_4_eda||0)+(o.tp34_5_eda||0)+(o.tp34_6_eda||0),t["60+"]+=(o.tp34_7_eda||0)+(o.tp34_8_eda||0)+(o.tp34_9_eda||0)});let e=t["0-14"]+t["15-59"]+t["60+"]||1;return{"0-14":t["0-14"]/e*100,"15-59":t["15-59"]/e*100,"60+":t["60+"]/e*100}}get educationDistribution(){let t={primary:0,secondary:0,higher:0,other:0};this.filteredData.forEach(o=>{t.primary+=o.tp51primar||0,t.secondary+=o.tp51secund||0,t.higher+=o.tp51superi||0,t.other+=o.tp51_99_ed||0});let e=t.primary+t.secondary+t.higher+t.other||1;return{primary:t.primary/e*100,secondary:t.secondary/e*100,higher:t.higher/e*100,other:t.other/e*100}}fetchData(){Ef(this.platformId)&&(this.isLoading=!0,this.error=!1,this.http.get("http://nepqas.medellin.gov.co/flask-fiware/api/wifi-dane/all").pipe(WC(6e4),yl(t=>(console.error("Error fetching data (timeout o fallo de red):",t),this.error=!0,this.isLoading=!1,ti([])))).subscribe({next:t=>{this.data=t,Ef(this.platformId)&&(this.processData(),this.initMap()),this.isLoading=!1},error:t=>{console.error("Error en la suscripci\xF3n del observable:",t),this.error=!0,this.isLoading=!1}}))}processData(){let t=new Set;this.data.forEach(e=>t.add(e.nmb_lc_cm)),this.comunas=Array.from(t).sort()}initMap(){this.map=new s3.Map({container:"map",style:"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",center:[-75.5454,6.2512],zoom:this.zoomLevel}),this.map.on("load",()=>{this.addDataToMap()}),this.map.on("zoomend",()=>{this.zoomLevel=this.map.getZoom(),this.updateMapLayers()})}addDataToMap(){let t={type:"FeatureCollection",features:this.data.map((e,o)=>({type:"Feature",id:o,geometry:{type:"Point",coordinates:[e.longitud,e.latitud]},properties:ui(gt({},e),{populationDensity:(e.tp27_perso||0)/(e.area||1),internetAccess:(e.tp19_inte1||0)/(e.tvivienda||1)*100,waterAccess:(e.tp19_acu_1||0)/(e.tvivienda||1)*100,gasAccess:(e.tp19_gas_1||0)/(e.tvivienda||1)*100,educationPrimary:(e.tp51primar||0)/(e.tp27_perso||1)*100,educationSecondary:(e.tp51secund||0)/(e.tp27_perso||1)*100,educationHigher:(e.tp51superi||0)/(e.tp27_perso||1)*100,elderlyPercentage:(e.tp34_7_eda+e.tp34_8_eda+e.tp34_9_eda||0)/(e.tp27_perso||1)*100})}))};this.map.addSource("wifi-data",{type:"geojson",data:t,generateId:!0}),this.map.addLayer({id:"wifi-points",type:"circle",source:"wifi-data",paint:{"circle-radius":["interpolate",["linear"],["zoom"],10,6,15,12],"circle-color":["case",["boolean",["feature-state","selected"],!1],"#ff00ff",["interpolate",["linear"],["get","internetAccess"],0,"#ff0000",50,"#ffff00",100,"#00ff00"]],"circle-opacity":.9,"circle-stroke-width":["case",["boolean",["feature-state","selected"],!1],3,1],"circle-stroke-color":"#ffffff"}}),this.map.on("click","wifi-points",e=>{e.features&&e.features.length>0&&this.showPopup(e.features[0])}),this.map.on("click",e=>{this.map.queryRenderedFeatures(e.point,{layers:["wifi-points"]}).length===0&&this.popup&&(this.clearSelectedFeature(),this.popup.remove(),this.popup=null)}),this.map.on("mouseenter","wifi-points",()=>{this.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave","wifi-points",()=>{this.map.getCanvas().style.cursor=""})}clearSelectedFeature(){this.selectedFeature&&(this.map.getLayer("wifi-points")&&this.map.setFeatureState({source:"wifi-data",id:this.selectedFeature.id},{selected:!1}),this.selectedFeature=null)}showPopup(t){if(this.clearSelectedFeature(),!t.geometry||!t.geometry.coordinates){console.error("Feature geometry is invalid:",t);return}this.selectedFeature=t,this.map.setFeatureState({source:"wifi-data",id:t.id},{selected:!0})}closeModal(){this.clearSelectedFeature(),this.selectedFeature=null}updateMapLayers(){if(!this.map.getLayer("wifi-points"))return;let t=["interpolate",["linear"],["get","internetAccess"],0,"#ff0000",50,"#ffff00",100,"#00ff00"];this.selectedAgeGroup==="0-14"?t=["interpolate",["linear"],["/",["+",["get","tp34_1_eda"],["get","tp34_2_eda"],["get","tp34_3_eda"]],["get","tp27_perso"]],0,"#ffebee",.5,"#ffcdd2",1,"#ef9a9a"]:this.selectedAgeGroup==="15-59"?t=["interpolate",["linear"],["/",["+",["get","tp34_4_eda"],["get","tp34_5_eda"],["get","tp34_6_eda"]],["get","tp27_perso"]],0,"#e8f5e9",.5,"#c8e6c9",1,"#a5d6a7"]:this.selectedAgeGroup==="60+"?t=["interpolate",["linear"],["/",["+",["get","tp34_7_eda"],["get","tp34_8_eda"],["get","tp34_9_eda"]],["get","tp27_perso"]],0,"#e3f2fd",.5,"#bbdefb",1,"#90caf9"]:this.selectedEducationLevel==="primary"?t=["interpolate",["linear"],["get","educationPrimary"],0,"#fff3e0",50,"#ffe0b2",100,"#ffcc80"]:this.selectedEducationLevel==="secondary"?t=["interpolate",["linear"],["get","educationSecondary"],0,"#f3e5f5",50,"#e1bee7",100,"#ce93d8"]:this.selectedEducationLevel==="higher"&&(t=["interpolate",["linear"],["get","educationHigher"],0,"#e0f7fa",50,"#b2ebf2",100,"#80deea"]),this.map.setPaintProperty("wifi-points","circle-color",t),this.selectedComuna?this.map.setFilter("wifi-points",["==",["get","nmb_lc_cm"],this.selectedComuna]):this.map.setFilter("wifi-points",null),this.map.setPaintProperty("wifi-points","circle-radius",["interpolate",["linear"],["zoom"],10,3,15,8])}applyFilters(){this.updateMapLayers()}resetFilters(){this.selectedComuna="",this.selectedAgeGroup="",this.selectedEducationLevel="",this.internetAccessFilter="all",this.applyFilters()}getAgeColor(t){switch(t){case"0-14":return"#ef9a9a";case"15-59":return"#a5d6a7";case"60+":return"#90caf9";default:return"#bdbdbd"}}static \u0275fac=function(e){return new(e||i)(si(Ls),si(Fs))};static \u0275cmp=Ot({type:i,selectors:[["app-wifi-maps"]],decls:147,vars:68,consts:[[1,"page-title"],[1,"dashboard-container"],[1,"map-container"],["class","loading-overlay",4,"ngIf"],["class","error-overlay",4,"ngIf"],["id","map",1,"map"],[1,"map-legend"],[4,"ngIf"],[1,"controls-container"],[1,"filters-card"],[1,"filter-group"],["appearance","outline"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngModelChange","change","ngModel"],["value","all"],["value","high"],["value","low"],["mat-raised-button","","color","warn",3,"click"],[1,"stats-card"],[1,"stat-item"],[1,"charts-card"],[1,"chart-container"],[1,"chart-legend"],["class","chart-legend-item",4,"ngFor","ngForOf"],[1,"chart-bar"],[1,"chart-bar-segment",2,"background-color","#ef9a9a"],[1,"chart-bar-segment",2,"background-color","#a5d6a7"],[1,"chart-bar-segment",2,"background-color","#90caf9"],[1,"chart-legend-item"],[1,"chart-legend-color",2,"background-color","#ffcc80"],[1,"chart-legend-color",2,"background-color","#ce93d8"],[1,"chart-legend-color",2,"background-color","#80deea"],[1,"chart-legend-color",2,"background-color","#bdbdbd"],[1,"chart-bar-segment",2,"background-color","#ffcc80"],[1,"chart-bar-segment",2,"background-color","#ce93d8"],[1,"chart-bar-segment",2,"background-color","#80deea"],[1,"chart-bar-segment",2,"background-color","#bdbdbd"],["class","modal-overlay",4,"ngIf"],[1,"iframe-container"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/cd625ad1-09dd-4109-be18-34cffbf9ab79/medellin-dane-geomanzanas?orgId=1&kiosk`,"allowfullscreen","",1,"large-iframe"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pw-ma/puntoswifi-map?orgId=1&from=1737930820574&to=1740522820574&viewPanel=2&kiosk`,"allowfullscreen","",1,"small-iframe"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pw-ma/puntoswifi-map?orgId=1&from=1737930915371&to=1740522915371&viewPanel=3&kiosk`,"allowfullscreen","",1,"small-iframe"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/pw-ma/puntoswifi-map?orgId=1&from=1737931227194&to=1740523227194&viewPanel=1&kiosk`,"allowfullscreen","",1,"large-iframe"],[1,"loading-overlay"],[1,"error-overlay"],["mat-raised-button","","color","primary",3,"click"],[1,"legend-item"],[1,"legend-color",2,"background-color","#ff0000"],[1,"legend-color",2,"background-color","#ffff00"],[1,"legend-color",2,"background-color","#00ff00"],[1,"legend-color",2,"background-color","#ffebee"],[1,"legend-color",2,"background-color","#ffcdd2"],[1,"legend-color",2,"background-color","#ef9a9a"],[1,"legend-color",2,"background-color","#e8f5e9"],[1,"legend-color",2,"background-color","#c8e6c9"],[1,"legend-color",2,"background-color","#a5d6a7"],[1,"legend-color",2,"background-color","#e3f2fd"],[1,"legend-color",2,"background-color","#bbdefb"],[1,"legend-color",2,"background-color","#90caf9"],[1,"legend-color",2,"background-color","#fff3e0"],[1,"legend-color",2,"background-color","#ffe0b2"],[1,"legend-color",2,"background-color","#ffcc80"],[1,"legend-color",2,"background-color","#f3e5f5"],[1,"legend-color",2,"background-color","#e1bee7"],[1,"legend-color",2,"background-color","#ce93d8"],[1,"legend-color",2,"background-color","#e0f7fa"],[1,"legend-color",2,"background-color","#b2ebf2"],[1,"legend-color",2,"background-color","#80deea"],[3,"value"],[1,"chart-legend-color"],[1,"modal-overlay"],[1,"modal-content"],[1,"close-btn",3,"click"]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Ciudad Inteligente - Puntos Wifi"),U(),z(2,"div",1)(3,"div",2),Et(4,TB,4,0,"div",3)(5,MB,7,0,"div",4),Ye(6,"div",5),z(7,"div",6)(8,"h4"),ce(9,"Leyenda"),U(),Et(10,IB,13,0,"div",7)(11,PB,13,0,"div",7)(12,kB,13,0,"div",7)(13,AB,13,0,"div",7)(14,DB,13,0,"div",7)(15,RB,13,0,"div",7)(16,OB,13,0,"div",7),U()(),z(17,"div",8)(18,"mat-card",9)(19,"mat-card-header")(20,"mat-card-title"),ce(21,"Filtros"),U()(),z(22,"mat-card-content")(23,"div",10)(24,"mat-form-field",11)(25,"mat-label"),ce(26,"Comuna"),U(),z(27,"mat-select",12),Yn("ngModelChange",function(s){return Xn(o.selectedComuna,s)||(o.selectedComuna=s),s}),kt("selectionChange",function(){return o.applyFilters()}),z(28,"mat-option",13),ce(29,"Todas las comunas"),U(),Et(30,LB,2,2,"mat-option",14),U()()(),z(31,"div",10)(32,"h4"),ce(33,"Grupo etario"),U(),z(34,"mat-button-toggle-group",15),Yn("ngModelChange",function(s){return Xn(o.selectedAgeGroup,s)||(o.selectedAgeGroup=s),s}),kt("change",function(){return o.applyFilters()}),z(35,"mat-button-toggle",13),ce(36,"Todos"),U(),Et(37,NB,2,2,"mat-button-toggle",14),U()(),z(38,"div",10)(39,"h4"),ce(40,"Nivel educativo"),U(),z(41,"mat-button-toggle-group",15),Yn("ngModelChange",function(s){return Xn(o.selectedEducationLevel,s)||(o.selectedEducationLevel=s),s}),kt("change",function(){return o.applyFilters()}),z(42,"mat-button-toggle",13),ce(43,"Todos"),U(),Et(44,FB,2,2,"mat-button-toggle",14),U()(),z(45,"div",10)(46,"h4"),ce(47,"Acceso a internet"),U(),z(48,"mat-button-toggle-group",15),Yn("ngModelChange",function(s){return Xn(o.internetAccessFilter,s)||(o.internetAccessFilter=s),s}),kt("change",function(){return o.applyFilters()}),z(49,"mat-button-toggle",16),ce(50,"Todos"),U(),z(51,"mat-button-toggle",17),ce(52,"Alto (>70%)"),U(),z(53,"mat-button-toggle",18),ce(54,"Bajo (\u226430%)"),U()()(),z(55,"div",10)(56,"button",19),kt("click",function(){return o.resetFilters()}),ce(57,"Reiniciar filtros"),U()()()(),z(58,"mat-card",20)(59,"mat-card-header")(60,"mat-card-title"),ce(61,"Estad\xEDsticas"),U(),Et(62,zB,2,1,"mat-card-subtitle",7)(63,BB,2,0,"mat-card-subtitle",7),U(),z(64,"mat-card-content")(65,"div",21)(66,"h4"),ce(67,"Poblaci\xF3n total"),U(),z(68,"p"),ce(69),cn(70,"number"),U()(),z(71,"div",21)(72,"h4"),ce(73,"Viviendas totales"),U(),z(74,"p"),ce(75),cn(76,"number"),U()(),z(77,"div",21)(78,"h4"),ce(79,"Acceso a internet"),U(),z(80,"p"),ce(81),cn(82,"number"),U()(),z(83,"div",21)(84,"h4"),ce(85,"Acceso a agua potable"),U(),z(86,"p"),ce(87),cn(88,"number"),U()(),z(89,"div",21)(90,"h4"),ce(91,"Acceso a gas natural"),U(),z(92,"p"),ce(93),cn(94,"number"),U()()()(),z(95,"mat-card",22)(96,"mat-card-header")(97,"mat-card-title"),ce(98,"Distribuci\xF3n"),U()(),z(99,"mat-card-content")(100,"div",23)(101,"h4"),ce(102,"Distribuci\xF3n por edad"),U(),z(103,"div",24),Et(104,VB,5,7,"div",25),U(),z(105,"div",26),Ye(106,"div",27)(107,"div",28)(108,"div",29),U()(),z(109,"div",23)(110,"h4"),ce(111,"Nivel educativo"),U(),z(112,"div",24)(113,"div",30),Ye(114,"span",31),z(115,"span"),ce(116),cn(117,"number"),U()(),z(118,"div",30),Ye(119,"span",32),z(120,"span"),ce(121),cn(122,"number"),U()(),z(123,"div",30),Ye(124,"span",33),z(125,"span"),ce(126),cn(127,"number"),U()(),z(128,"div",30),Ye(129,"span",34),z(130,"span"),ce(131),cn(132,"number"),U()()(),z(133,"div",26),Ye(134,"div",35)(135,"div",36)(136,"div",37)(137,"div",38),U()()()()(),Et(138,UB,42,11,"div",39),U(),z(139,"div",40),Ye(140,"iframe",41),U(),z(141,"div",40)(142,"div",42),Ye(143,"iframe",43)(144,"iframe",44),U()(),z(145,"div",40),Ye(146,"iframe",45),U()),e&2&&(ye(4),st("ngIf",o.isLoading),ye(),st("ngIf",o.error),ye(5),st("ngIf",!o.selectedAgeGroup&&!o.selectedEducationLevel),ye(),st("ngIf",o.selectedAgeGroup==="0-14"),ye(),st("ngIf",o.selectedAgeGroup==="15-59"),ye(),st("ngIf",o.selectedAgeGroup==="60+"),ye(),st("ngIf",o.selectedEducationLevel==="primary"),ye(),st("ngIf",o.selectedEducationLevel==="secondary"),ye(),st("ngIf",o.selectedEducationLevel==="higher"),ye(11),Zn("ngModel",o.selectedComuna),ye(3),st("ngForOf",o.comunas),ye(4),Zn("ngModel",o.selectedAgeGroup),ye(3),st("ngForOf",o.ageGroups),ye(4),Zn("ngModel",o.selectedEducationLevel),ye(3),st("ngForOf",o.educationLevels),ye(4),Zn("ngModel",o.internetAccessFilter),ye(14),st("ngIf",o.selectedComuna),ye(),st("ngIf",!o.selectedComuna),ye(6),ai(qv(70,43,o.totalPopulation)),ye(6),ai(qv(76,45,o.totalHomes)),ye(6),yi("",Rn(82,47,o.internetAccessPercentage,"1.1-1"),"%"),ye(6),yi("",Rn(88,50,o.waterAccessPercentage,"1.1-1"),"%"),ye(6),yi("",Rn(94,53,o.gasAccessPercentage,"1.1-1"),"%"),ye(11),st("ngForOf",o.ageGroups),ye(2),Qo("width",o.ageDistribution["0-14"],"%"),ye(),Qo("width",o.ageDistribution["15-59"],"%"),ye(),Qo("width",o.ageDistribution["60+"],"%"),ye(8),yi("Primaria: ",Rn(117,56,o.educationDistribution.primary,"1.1-1"),"%"),ye(5),yi("Secundaria: ",Rn(122,59,o.educationDistribution.secondary,"1.1-1"),"%"),ye(5),yi("Superior: ",Rn(127,62,o.educationDistribution.higher,"1.1-1"),"%"),ye(5),yi("Otros: ",Rn(132,65,o.educationDistribution.other,"1.1-1"),"%"),ye(3),Qo("width",o.educationDistribution.primary,"%"),ye(),Qo("width",o.educationDistribution.secondary,"%"),ye(),Qo("width",o.educationDistribution.higher,"%"),ye(),Qo("width",o.educationDistribution.other,"%"),ye(),st("ngIf",o.selectedFeature))},dependencies:[_n,ba,_s,wh,fu,kl,uc,EA,vA,xA,CA,wA,yA,Tl,QA,ZA,mb,KA,W_,JA,bu,dp,i3,Zw,_b,vb,bb],styles:[".dashboard-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:70vw;height:70vh;margin-left:25%;overflow:hidden}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]{width:444px;background:#f5f5f5;padding:16px;overflow-y:auto;max-height:100vh;z-index:10;box-shadow:2px 0 6px #0000001a;flex-shrink:0}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-bottom:16px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{margin-bottom:16px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:500}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{flex:1}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{margin-bottom:16px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-weight:500;color:#0009;font-size:14px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{margin-bottom:24px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:500}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]{margin-bottom:8px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .chart-legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:4px;font-size:12px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .chart-legend-item[_ngcontent-%COMP%]   .chart-legend-color[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;margin-right:8px;border-radius:2px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-bar[_ngcontent-%COMP%]{height:20px;background:#e0e0e0;border-radius:4px;overflow:hidden;display:flex}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-bar[_ngcontent-%COMP%]   .chart-bar-segment[_ngcontent-%COMP%]{height:100%}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]{flex:1;position:relative;display:flex;align-items:stretch;justify-content:center}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:0}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{width:100%;height:100%;min-height:500px}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%], .dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .error-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffffff2;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .error-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:red;margin-bottom:16px}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:20px;background:#fff;padding:10px;border-radius:4px;box-shadow:0 2px 4px #0003;z-index:10;max-width:250px}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:4px}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-color[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;margin-right:8px;border-radius:50%;border:1px solid #ccc}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fff;max-width:400px;width:90%;padding:20px;border-radius:8px;box-shadow:0 5px 15px #0000004d;position:relative;animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1976d2;margin-top:0;margin-bottom:15px;font-size:1.2rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:transparent;border:none;font-size:1.5rem;cursor:pointer;color:#666;line-height:1;padding:0 5px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}","body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}.small-iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.large-iframe[_ngcontent-%COMP%]{height:700px;border:none}"]})};var xb=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-vamosmedmap"]],decls:9,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/vm_ma/vamosmed-map?orgId=1&from=1740220806985&to=1740393606985&viewPanel=3&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/vm_ma/vamosmed-map?orgId=1&from=1740220846838&to=1740393646839&viewPanel=4&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/vm_ma/vamosmed-map?orgId=1&from=1740220882021&to=1740393682021&viewPanel=26&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/vm_ma/vamosmed-map?orgId=1&from=1740221071260&to=1740393871260&viewPanel=27&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Ciudad Inteligente - VamosMed"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),U()(),z(7,"div",1),Ye(8,"iframe",6),U())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:500px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var Qw=UC(Kw());var jB=["map"];function qB(i,t){i&1&&(z(0,"div",28),ce(1," Cargando sensores... "),U())}function HB(i,t){if(i&1){let e=Ri();z(0,"div",29),ce(1),z(2,"button",30),kt("click",function(){jt(e);let a=at();return qt(a.loadSensors())}),ce(3,"Reintentar"),U()()}if(i&2){let e=at();ye(),yi(" ",e.errorMessage," ")}}function $B(i,t){if(i&1&&(z(0,"option",35),ce(1),U()),i&2){let e=t.$implicit,o=at(2);st("value",e.entity_id),ye(),_a(" ",o.getShortId(e.entity_id)," - ",e.laeq_slow," dB ")}}function GB(i,t){if(i&1&&(z(0,"div",36),ce(1),U()),i&2){let e=at(2);ye(),yi(" Sensor seleccionado: ",e.getShortId(e.selectedSensor)," ")}}function WB(i,t){if(i&1){let e=Ri();z(0,"div")(1,"select",31),Yn("ngModelChange",function(a){jt(e);let s=at();return Xn(s.selectedSensor,a)||(s.selectedSensor=a),qt(a)}),kt("change",function(){jt(e);let a=at();return qt(a.onSensorSelect())}),z(2,"option",32),ce(3,"Selecciona un sensor"),U(),Et(4,$B,2,3,"option",33),U(),Et(5,GB,2,1,"div",34),U()}if(i&2){let e=at();ye(),Zn("ngModel",e.selectedSensor),ye(3),st("ngForOf",e.sensors),ye(),st("ngIf",e.selectedSensor)}}function ZB(i,t){if(i&1&&(z(0,"div",29),ce(1),U()),i&2){let e=at();ye(),yi(" ",e.errorHistoric," ")}}function XB(i,t){if(i&1&&(z(0,"div",37)(1,"h3"),ce(2),cn(3,"number"),U(),Ye(4,"div",38),U()),i&2){let e=at();ye(2),yi("Resultados hist\xF3ricos (promedio: ",Rn(3,1,e.historicAvg,"1.1-1")," dB)")}}function YB(i,t){i&1&&(z(0,"div",39),Ye(1,"mat-spinner"),z(2,"p"),ce(3,"Cargando datos de sensores..."),U()())}function KB(i,t){if(i&1){let e=Ri();z(0,"div",40)(1,"mat-icon"),ce(2,"error_outline"),U(),z(3,"p"),ce(4,"Error al cargar los datos de los sensores"),U(),z(5,"button",41),kt("click",function(){jt(e);let a=at();return qt(a.loadSensorData())}),ce(6,"Reintentar"),U()()}}function QB(i,t){if(i&1&&(z(0,"div",46)(1,"span",47),ce(2,"Promedio hist\xF3rico:"),U(),z(3,"span",48),ce(4),cn(5,"number"),U()()),i&2){let e=at(2);ye(4),yi("",Rn(5,1,e.historicAvg,"1.1-1")," dB")}}function JB(i,t){if(i&1){let e=Ri();z(0,"div",42)(1,"div",43)(2,"h3"),ce(3,"Detalles del Sensor"),U(),z(4,"button",44),kt("click",function(){jt(e);let a=at();return qt(a.closeDetails())}),z(5,"mat-icon"),ce(6,"close"),U()()(),z(7,"div",45)(8,"div",46)(9,"span",47),ce(10,"ID:"),U(),z(11,"span",48),ce(12),U()(),z(13,"div",46)(14,"span",47),ce(15,"Nivel de Ruido:"),U(),z(16,"span",48),ce(17),U()(),z(18,"div",46)(19,"span",47),ce(20,"\xDAltima actualizaci\xF3n:"),U(),z(21,"span",48),ce(22),cn(23,"date"),U()(),Et(24,QB,6,4,"div",49),U()()}if(i&2){let e=at();ye(12),ai(e.getShortId(e.selectedSensorDetails.id)),ye(5),_a("",e.selectedSensorDetails.laeq," dB (",e.selectedSensorDetails.levelName,")"),ye(5),ai(Rn(23,5,e.selectedSensorDetails.lastUpdate,"medium")),ye(2),st("ngIf",e.historicAvg)}}var wb=class i{constructor(t,e){this.http=t;this.sanitizer=e;this.urlGrafanaSegura=this.inicializarUrlGrafana()}mapContainer;map=null;apiUrl="http://nepqas.medellin.gov.co/flask-fiware/api/sensores-ruido";urlGrafanaBase="http://nepqas.medellin.gov.co/territoriointeligente/d/f36b2714-61d2-45cd-91ac-58b622840b4e/sensores-ruido-2025?orgId=1&kiosk";urlGrafanaSegura;sensors=[];selectedSensor="";selectedSensorDetails=null;historicData=[];historicAvg=0;desdeFecha="";hastaFecha="";loading=!0;isLoading=!0;loadingHistoric=!1;error=!1;errorMessage="";errorHistoric=null;inicializarUrlGrafana(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.urlGrafanaBase)}ngOnInit(){this.loadSensors(),this.setDefaultDates(),this.actualizarUrlGrafana()}ngAfterViewInit(){this.initMap()}initMap(){this.map=new Qw.default.Map({container:this.mapContainer.nativeElement,style:"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",center:[-75.573,6.244],zoom:14}),this.map.addControl(new Qw.default.NavigationControl),this.map.on("load",()=>this.addSensorsToMap())}loadSensors(){this.isLoading=!0,this.errorMessage="",this.http.get(this.apiUrl).subscribe({next:t=>{this.sensors=t.map(e=>ui(gt({},e),{noiseLevel:this.getNoiseLevel(e.laeq_slow),levelName:this.translateLevel(this.getNoiseLevel(e.laeq_slow))})),this.isLoading=!1,this.loadSensorData()},error:t=>{this.errorMessage="Error al cargar los sensores. Por favor intenta nuevamente.",this.isLoading=!1,console.error("Error fetching sensors:",t)}})}actualizarUrlGrafana(){let t=this.urlGrafanaBase;if(this.desdeFecha&&this.hastaFecha){let e=new Date(this.desdeFecha).getTime(),o=new Date(this.hastaFecha).getTime()+86399999;t+=`&from=${e}&to=${o}`}this.urlGrafanaSegura=this.sanitizer.bypassSecurityTrustResourceUrl(t)}loadSensorData(){this.loading=!0,this.error=!1,this.http.get(this.apiUrl).subscribe({next:t=>{this.sensors=t.map(e=>ui(gt({},e),{noiseLevel:this.getNoiseLevel(e.laeq_slow),levelName:this.translateLevel(this.getNoiseLevel(e.laeq_slow))})),this.addSensorsToMap(),this.loading=!1},error:t=>{console.error("Error loading sensor data:",t),this.error=!0,this.loading=!1}})}setDefaultDates(){let t=new Date,e=new Date;e.setDate(t.getDate()-7),this.desdeFecha=this.formatDate(e),this.hastaFecha=this.formatDate(t)}formatDate(t){return t.toISOString().split("T")[0]}onSensorSelect(){if(!this.selectedSensor)return;let t=this.sensors.find(e=>e.entity_id===this.selectedSensor);t&&(this.selectedSensorDetails={id:t.entity_id,laeq:t.laeq_slow,levelName:t.levelName,lastUpdate:t.fecha_ultimo_registro},this.map&&this.map.flyTo({center:[parseFloat(t.longitud),parseFloat(t.latitud)],zoom:16}),this.historicData=[],this.historicAvg=0)}getHistoricData(){if(!this.selectedSensor||!this.desdeFecha||!this.hastaFecha){this.errorHistoric="Por favor selecciona un sensor y ambas fechas";return}this.loadingHistoric=!0,this.errorHistoric=null;let t=`${this.desdeFecha} 00:00:00`,e=`${this.hastaFecha} 23:59:59`;this.getHistoricoNoise(this.selectedSensor,t,e).subscribe({next:o=>{this.historicData=o,this.calculateHistoricAvg(),this.updateMapWithHistoricalData(),this.loadingHistoric=!1},error:o=>{this.errorHistoric="Error al cargar datos hist\xF3ricos",this.loadingHistoric=!1,console.error("Error fetching historic data:",o)}})}calculateHistoricAvg(){if(this.historicData.length===0){this.historicAvg=0;return}let t=this.historicData.reduce((e,o)=>e+o.laeq_slow,0);this.historicAvg=parseFloat((t/this.historicData.length).toFixed(1))}updateMapWithHistoricalData(){if(!this.map||!this.map.isStyleLoaded())return;let t=this.sensors.findIndex(e=>e.entity_id===this.selectedSensor);t!==-1&&(this.sensors[t]=ui(gt({},this.sensors[t]),{laeq_slow:this.historicAvg,noiseLevel:this.getNoiseLevel(this.historicAvg),levelName:this.translateLevel(this.getNoiseLevel(this.historicAvg))}),this.addSensorsToMap(),this.selectedSensorDetails&&(this.selectedSensorDetails=ui(gt({},this.selectedSensorDetails),{laeq:this.historicAvg,levelName:this.translateLevel(this.getNoiseLevel(this.historicAvg))})))}getHistoricoNoise(t,e,o){let a=new Sl().set("desde",e).set("hasta",o),s=`${this.apiUrl}/${encodeURIComponent(t)}/historico`;return this.http.get(s,{params:a})}addSensorsToMap(){!this.map||!this.map.isStyleLoaded()||(this.map.getSource("sensors")&&(this.map.removeLayer("sensors-circle"),this.map.removeLayer("sensors-labels"),this.map.removeSource("sensors")),this.map.addSource("sensors",{type:"geojson",data:{type:"FeatureCollection",features:this.sensors.map(t=>({type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(t.longitud),parseFloat(t.latitud)]},properties:{id:t.entity_id,laeq:t.laeq_slow,level:t.noiseLevel,levelName:t.levelName,lastUpdate:t.fecha_ultimo_registro}}))}}),this.map.addLayer({id:"sensors-circle",type:"circle",source:"sensors",paint:{"circle-radius":["case",["==",["get","id"],this.selectedSensor],12,8],"circle-color":["match",["get","level"],"low","#4CAF50","moderate","#FFC107","high","#F44336","#9E9E9E"],"circle-stroke-width":2,"circle-stroke-color":"#ffffff"}}),this.map.addLayer({id:"sensors-labels",type:"symbol",source:"sensors",layout:{"text-field":["get","laeq"],"text-size":12,"text-offset":[0,1.5]},paint:{"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":1}}),this.map.on("click","sensors-circle",t=>{let e=t.features[0].properties;this.selectedSensor=e.id,this.selectedSensorDetails={id:e.id,laeq:e.laeq,levelName:e.levelName,lastUpdate:e.lastUpdate},this.scrollToDetails()}),this.map.on("mouseenter","sensors-circle",()=>{this.map&&(this.map.getCanvas().style.cursor="pointer")}),this.map.on("mouseleave","sensors-circle",()=>{this.map&&(this.map.getCanvas().style.cursor="")}))}getNoiseLevel(t){return t<55?"low":t<=70?"moderate":"high"}translateLevel(t){return{low:"Bajo",moderate:"Moderado",high:"Alto"}[t]||t}getShortId(t){return t.split(":").pop()||t}scrollToDetails(){let t=document.getElementById("sensor-details");t&&t.scrollIntoView({behavior:"smooth"})}closeDetails(){this.selectedSensorDetails=null}static \u0275fac=function(e){return new(e||i)(si(Fs),si(Nf))};static \u0275cmp=Ot({type:i,selectors:[["app-noise-sensor-map"]],viewQuery:function(e,o){if(e&1&&Wr(jB,5),e&2){let a;cr(a=ur())&&(o.mapContainer=a.first)}},decls:57,vars:14,consts:[["map",""],[1,"container"],[1,"page-title"],[1,"iframe-container"],[1,"date-controls"],[1,"sensor-container"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[4,"ngIf"],["for","desde"],["type","date","id","desde",3,"ngModelChange","change","ngModel"],["for","hasta"],["type","date","id","hasta",3,"ngModelChange","change","ngModel"],[3,"click","disabled"],["class","historic-results",4,"ngIf"],[1,"map-container"],["class","loading-overlay",4,"ngIf"],["class","error-overlay",4,"ngIf"],[1,"map-layout"],[1,"half-layout"],["id","noise-sensor-map"],["allowfullscreen","",2,"width","90%","height","100%","border","none","border-radius","12px",3,"src"],["class","details-panel",4,"ngIf"],[1,"map-legend"],[1,"legend-item"],[1,"legend-color","low"],[1,"legend-color","moderate"],[1,"legend-color","high"],[1,"loading"],[1,"error"],[3,"click"],[1,"sensor-select",3,"ngModelChange","change","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","selected-info",4,"ngIf"],[3,"value"],[1,"selected-info"],[1,"historic-results"],[1,"chart-container"],[1,"loading-overlay"],[1,"error-overlay"],["mat-raised-button","","color","primary",3,"click"],[1,"details-panel"],[1,"panel-header"],["mat-icon-button","",3,"click"],["id","sensor-details",1,"sensor-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],["class","detail-row",4,"ngIf"]],template:function(e,o){if(e&1){let a=Ri();z(0,"div",1)(1,"h2",2),ce(2,"Ciudad Inteligente - Sensores de ruido"),U(),z(3,"div",3)(4,"h3"),ce(5),U(),z(6,"div",4)(7,"div",5)(8,"h2"),ce(9,"Selecciona un sensor de ruido"),U(),Et(10,qB,2,0,"div",6)(11,HB,4,1,"div",7)(12,WB,6,3,"div",8),U(),z(13,"div")(14,"label",9),ce(15,"Desde:"),U(),z(16,"input",10),Yn("ngModelChange",function(_){return jt(a),Xn(o.desdeFecha,_)||(o.desdeFecha=_),qt(_)}),kt("change",function(){return jt(a),qt(o.actualizarUrlGrafana())}),U()(),z(17,"div")(18,"label",11),ce(19,"Hasta:"),U(),z(20,"input",12),Yn("ngModelChange",function(_){return jt(a),Xn(o.hastaFecha,_)||(o.hastaFecha=_),qt(_)}),kt("change",function(){return jt(a),qt(o.actualizarUrlGrafana())}),U()(),z(21,"div")(22,"button",13),kt("click",function(){return jt(a),qt(o.getHistoricData())}),ce(23),U()()(),Et(24,ZB,2,1,"div",7)(25,XB,5,4,"div",14),z(26,"h2"),ce(27,"\u{1F50A} Sensores de Ruido"),U(),z(28,"div",15)(29,"h3"),ce(30,"Tablero Ejecutivo"),U(),z(31,"h4"),ce(32,"Mapa de sensores"),U(),Et(33,YB,4,0,"div",16)(34,KB,7,0,"div",17),z(35,"div",18)(36,"div",19),Ye(37,"div",20,0),U(),z(39,"div",19),Ye(40,"iframe",21),U(),Et(41,JB,25,8,"div",22),U(),z(42,"div",23)(43,"h4"),ce(44,"Leyenda"),U(),z(45,"div",24),Ye(46,"span",25),z(47,"span"),ce(48,"Bajo (<55 dB)"),U()(),z(49,"div",24),Ye(50,"span",26),z(51,"span"),ce(52,"Moderado (55-70 dB)"),U()(),z(53,"div",24),Ye(54,"span",27),z(55,"span"),ce(56,"Alto (>70 dB)"),U()()()()()()}e&2&&(ye(5),yi("Consultar hist\xF3rico para: ",o.getShortId(o.selectedSensor),""),ye(5),st("ngIf",o.isLoading),ye(),st("ngIf",o.errorMessage),ye(),st("ngIf",!o.isLoading&&!o.errorMessage),ye(4),Zn("ngModel",o.desdeFecha),ye(4),Zn("ngModel",o.hastaFecha),ye(2),st("disabled",!o.selectedSensor||o.loadingHistoric),ye(),yi(" ",o.loadingHistoric?"Cargando...":"Consultar"," "),ye(),st("ngIf",o.errorHistoric),ye(),st("ngIf",o.historicData.length>0),ye(8),st("ngIf",o.loading),ye(),st("ngIf",o.error),ye(6),st("src",o.urlGrafanaSegura,mE),ye(),st("ngIf",o.selectedSensorDetails))},dependencies:[_n,ba,_s,wh,Yg,fu,Qh,Jh,Pl,pu,kl,uc,bu,dp,Tl,vb,bb],styles:[`@charset "UTF-8";body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:#f4f7fa;overflow-x:hidden}.page-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#333;text-align:left;padding:25px 30px;background-color:#fff;box-shadow:0 6px 15px #0000001a;margin:0 0 25px 300px;border-radius:0 0 12px 12px;text-shadow:1px 1px 2px rgba(0,0,0,.1);position:relative;z-index:10;border-bottom:4px solid #4CAF50;transform:perspective(500px) rotateX(1deg);transition:all .3s ease}.page-title[_ngcontent-%COMP%]:hover{transform:perspective(500px) rotateX(2deg);box-shadow:0 8px 20px #00000026}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:20px;gap:25px;background:linear-gradient(145deg,#fff,#f8f9fa);border-radius:12px;box-shadow:0 8px 25px #00000014;margin-bottom:30px;transition:all .3s ease}.iframe-container[_ngcontent-%COMP%]:hover{box-shadow:0 12px 30px #0000001f}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:25px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:280px;border:none;border-radius:10px;box-shadow:0 4px 15px #0000001a;transition:all .3s ease;transform:translateZ(0)}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:hover{transform:translateY(-5px) translateZ(10px);box-shadow:0 8px 25px #00000026}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:550px;border:none;border-radius:12px;box-shadow:0 6px 20px #0000001f;transition:all .3s ease}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe):hover{transform:translateY(-5px);box-shadow:0 10px 30px #0000002e}.map-container[_ngcontent-%COMP%]{position:relative;border-radius:15px;overflow:hidden;box-shadow:0 15px 35px #00000026;background:#fff;transform-style:preserve-3d;perspective:1000px;transition:all .4s ease}.map-container[_ngcontent-%COMP%]:hover{box-shadow:0 20px 40px #0003}.loading-overlay[_ngcontent-%COMP%], .error-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000;border-radius:15px;animation:_ngcontent-%COMP%_fadeIn .5s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.loading-overlay[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{transform:scale(1.5);margin-bottom:20px}.error-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3.5rem;width:3.5rem;height:3.5rem;color:#f44336;margin-bottom:20px;animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.map-layout[_ngcontent-%COMP%]{display:flex;width:100%;height:650px;gap:25px;padding:25px;perspective:1500px}.half-layout[_ngcontent-%COMP%]{width:50%;height:100%;border-radius:15px;overflow:hidden;box-shadow:0 10px 30px #00000026;background:#fff;transition:all .4s ease;transform-style:preserve-3d;position:relative}.half-layout[_ngcontent-%COMP%]:hover{transform:translateY(-10px) rotateX(1deg);box-shadow:0 15px 40px #0003}.half-layout[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#ffffff1a,#fff0);pointer-events:none;border-radius:15px}#noise-sensor-map[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:15px;transform:translateZ(0)}.details-panel[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) perspective(1000px) rotateY(0);width:350px;background:#fff;border-radius:12px;box-shadow:0 15px 35px #0003;z-index:1000;padding:20px;animation:_ngcontent-%COMP%_slideUp .4s cubic-bezier(.18,.89,.32,1.28);border:1px solid rgba(255,255,255,.3);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff2;transform-style:preserve-3d}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translate(-50%,-30%) perspective(1000px) rotateY(10deg);opacity:0}to{transform:translate(-50%,-50%) perspective(1000px) rotateY(0);opacity:1}}.panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid #eee}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.3rem;color:#333;text-shadow:1px 1px 2px rgba(0,0,0,.05)}.panel-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:#666;transition:all .2s ease}.panel-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#f44336;transform:rotate(90deg)}.sensor-details[_ngcontent-%COMP%]{font-size:.95rem}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:12px;padding:8px 10px;background:#f5f5f580;border-radius:8px;transition:all .2s ease}.detail-row[_ngcontent-%COMP%]:hover{background:#f5f5f5e6;transform:translate(5px)}.detail-label[_ngcontent-%COMP%]{font-weight:600;margin-right:10px;color:#555}.detail-value[_ngcontent-%COMP%]{font-weight:500;color:#333}.map-legend[_ngcontent-%COMP%]{position:absolute;bottom:30px;left:30px;background:#ffffffd9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);padding:15px;border-radius:10px;box-shadow:0 8px 25px #00000026;z-index:100;transform:translateZ(20px);border:1px solid rgba(255,255,255,.3);animation:_ngcontent-%COMP%_float 6s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%{transform:translateY(0) translateZ(20px)}50%{transform:translateY(-10px) translateZ(20px)}to{transform:translateY(0) translateZ(20px)}}.map-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1.1rem;color:#333;text-align:center}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px;padding:5px 10px;border-radius:6px;transition:all .2s ease}.legend-item[_ngcontent-%COMP%]:hover{background:#0000000d;transform:translate(3px)}.legend-color[_ngcontent-%COMP%]{display:inline-block;width:18px;height:18px;border-radius:50%;margin-right:12px;border:2px solid white;box-shadow:0 2px 5px #0000001a;transition:all .3s ease}.legend-item[_ngcontent-%COMP%]:hover   .legend-color[_ngcontent-%COMP%]{transform:scale(1.2)}.legend-color.low[_ngcontent-%COMP%]{background-color:#4caf50}.legend-color.moderate[_ngcontent-%COMP%]{background-color:#ffc107}.legend-color.high[_ngcontent-%COMP%]{background-color:#f44336}.sensor-container[_ngcontent-%COMP%]{max-width:600px;margin:2rem 0 2rem 2rem;padding:1.5rem;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:15px;box-shadow:0 10px 30px #0000001a;display:flex;flex-direction:column;gap:1.2rem;border:1px solid rgba(255,255,255,.3);transform:perspective(500px) rotateY(-1deg);transition:all .3s ease}.sensor-container[_ngcontent-%COMP%]:hover{transform:perspective(500px) rotateY(0);box-shadow:0 15px 40px #00000026}.sensor-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;color:#333;text-shadow:1px 1px 2px rgba(0,0,0,.05)}.sensor-select[_ngcontent-%COMP%]{width:100%;padding:.8rem;font-size:1rem;border:1px solid #ddd;border-radius:8px;background:#fffc;box-shadow:inset 0 2px 5px #0000000d;transition:all .3s ease;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right .7rem center;background-size:1rem}.sensor-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50;box-shadow:0 0 0 3px #4caf5033}.selected-info[_ngcontent-%COMP%]{margin-top:1rem;padding:.8rem;background-color:#f8f9fa;border-radius:8px;border-left:4px solid #4CAF50;animation:_ngcontent-%COMP%_fadeIn .5s ease}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{padding:1.2rem;text-align:center;margin:1rem 0;border-radius:8px;animation:_ngcontent-%COMP%_fadeIn .5s ease}.loading[_ngcontent-%COMP%]{color:#666;background:#f5f5f5cc}.error[_ngcontent-%COMP%]{color:#d32f2f;background-color:#fde0e0e6;border-radius:8px;border-left:4px solid #d32f2f}.error[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.8rem;padding:.6rem 1.2rem;background-color:#d32f2f;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 5px #0000001a}.error[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#b71c1c;transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.date-controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:15px;align-items:center;padding:1rem;background:#fffffff2;border-radius:12px;box-shadow:0 5px 15px #00000014;margin-bottom:1.5rem}.date-controls[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:10px}.date-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-right:8px;color:#555;font-size:.95rem}.date-controls[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #ddd;border-radius:8px;background:#fffc;box-shadow:inset 0 2px 5px #0000000d;transition:all .3s ease}.date-controls[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50;box-shadow:0 0 0 3px #4caf5033}.date-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.8rem 1.5rem;background:linear-gradient(135deg,#4caf50,#66bb6a);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;font-weight:600;box-shadow:0 4px 8px #4caf504d;text-transform:uppercase;letter-spacing:.5px}.date-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#43a047,#4caf50);transform:translateY(-3px);box-shadow:0 6px 12px #4caf5066}.date-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed;transform:none;box-shadow:none}.historic-results[_ngcontent-%COMP%]{margin-top:1.5rem;max-height:400px;overflow-y:auto;background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 5px 15px #00000014;animation:_ngcontent-%COMP%_slideUp .5s ease}.historic-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;font-size:1.3rem;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid #eee}.historic-results[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.historic-results[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .historic-results[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;border-bottom:1px solid #eee}.historic-results[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#f8f9fa,#e9ecef);color:#333;font-weight:600;position:sticky;top:0}.historic-results[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#4caf500d}.container[_ngcontent-%COMP%]{margin-left:0;padding:2rem;width:100%;box-sizing:border-box;animation:_ngcontent-%COMP%_fadeIn .8s ease}@media (max-width: 1200px){.map-layout[_ngcontent-%COMP%]{flex-direction:column;height:auto}.half-layout[_ngcontent-%COMP%]{width:100%;height:500px;margin-bottom:20px}.map-container[_ngcontent-%COMP%], .iframe-container[_ngcontent-%COMP%], .page-title[_ngcontent-%COMP%]{margin-left:0}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000000d;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#0003;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0000004d}@media (max-width: 1200px){.page-title[_ngcontent-%COMP%], .iframe-container[_ngcontent-%COMP%]{margin-left:0}.map-layout[_ngcontent-%COMP%]{flex-direction:column;height:auto}.half-layout[_ngcontent-%COMP%]{width:100%;height:400px}.iframe-row[_ngcontent-%COMP%]{flex-direction:column}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:250px}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:400px}}@media (max-width: 768px){.page-title[_ngcontent-%COMP%]{font-size:2rem;padding:20px;margin-bottom:20px}.sensor-container[_ngcontent-%COMP%]{margin:1rem;padding:1rem}.sensor-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.sensor-select[_ngcontent-%COMP%]{font-size:.95rem;padding:.7rem}.details-panel[_ngcontent-%COMP%]{width:90%;padding:15px}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.map-legend[_ngcontent-%COMP%]{bottom:20px;left:20px;padding:10px}.map-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem}.legend-color[_ngcontent-%COMP%]{width:14px;height:14px}.detail-row[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 480px){.page-title[_ngcontent-%COMP%]{font-size:1.6rem;padding:15px}.iframe-container[_ngcontent-%COMP%]{padding:15px;gap:15px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], .iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:200px}.map-layout[_ngcontent-%COMP%]{padding:15px;gap:15px}.sensor-container[_ngcontent-%COMP%]{margin:1rem .5rem;padding:1rem}.details-panel[_ngcontent-%COMP%]{padding:10px}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}.sensor-select[_ngcontent-%COMP%]{font-size:.9rem;padding:.6rem}.detail-row[_ngcontent-%COMP%]{padding:6px 8px}.map-legend[_ngcontent-%COMP%]{left:10px;bottom:15px;padding:8px}.legend-item[_ngcontent-%COMP%]{font-size:.85rem}.legend-color[_ngcontent-%COMP%]{width:12px;height:12px}}`]})};var Cb=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-turismomaps"]],decls:9,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/tu_ma/turismo-map?orgId=1&var-menu=--Seleccionar--&from=1739789874607&to=1740394674607&viewPanel=7&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/tu_ma/turismo-map?orgId=1&var-menu=--Seleccionar--&from=1739790035176&to=1740394835176&viewPanel=5&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/tu_ma/turismo-map?orgId=1&var-menu=--Seleccionar--&from=1739790124478&to=1740394924478&viewPanel=6&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/tu_ma/turismo-map?orgId=1&var-menu=--Seleccionar--&from=1739790178621&to=1740394978621&viewPanel=4&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Ciudad Inteligente - Turismo"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),U()(),z(7,"div",1),Ye(8,"iframe",6),U())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:500px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var Eb=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-siatamaps"]],decls:10,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ma/siata-map?orgId=1&var-city=--Seleccionar--&from=1739790813208&to=1740395613208&viewPanel=3&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ma/siata-map?orgId=1&var-city=--Seleccionar--&from=1739790813208&to=1740395613208&viewPanel=4&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ma/siata-map?orgId=1&var-city=--Seleccionar--&var-city=--Seleccionar--&from=1739790813208&from=1739790813208&to=1740395613208&to=1740395613208&viewPanel=1http:%2F%2Fgrafana-fiware.apps.preprodalcaldia.medellin.gov.co%2Fterritoriointeligente%2Fd%2Fsi_ma%2Fsiata-map%3ForgId%3D1&viewPanel=1&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/si_ma/siata-map?orgId=1&var-city=--Seleccionar--&from=1739790813208&to=1740395613208&viewPanel=6&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Ciudad Inteligente - SIATA"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4),U()(),z(6,"div",1),Ye(7,"iframe",5),U(),z(8,"div",1),Ye(9,"iframe",6),U())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:500px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var Sb=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-medicos"]],decls:7,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-column"],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/movilidad-volumen-carri/movilidad-inteligente-volumen-de-trafico-por-carriles?orgId=1&var-carril=All&var-dia_semana=All&from=1734757199500&to=1738558797500&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/movilidad-vel-graph4/grafica-velocidad-promedio4?orgId=1&kiosk`,"allowfullscreen",""],["src",Ct`http://nepqas.medellin.gov.co/territoriointeligente/d/c18a5148-09d5-4585-8b7d-ea4aaba9e130/mapa-de-trafico-medellin?orgId=1&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(z(0,"h2",0),ce(1,"Movilidad Inteligente"),U(),z(2,"div",1)(3,"div",2),Ye(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),U()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column;height:100vh;overflow-y:auto}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.iframe-column[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:500px;width:100%;border:none;overflow:visible;pointer-events:auto!important;z-index:10}"]})};function eV(i,t){if(i&1){let e=Ri();z(0,"a",12),kt("keyup.enter",function(){jt(e),at(3);let a=Zr(1);return qt(a.previous())})("click",function(){jt(e),at(3);let a=Zr(1);return qt(a.previous())}),ce(1),z(2,"span",13),ce(3),U()()}if(i&2){let e=at(3);ye(),yi(" ",e.previousLabel," "),ye(2),ai(e.screenReaderPageLabel)}}function tV(i,t){if(i&1&&(z(0,"span",14),ce(1),z(2,"span",13),ce(3),U()()),i&2){let e=at(3);ye(),yi(" ",e.previousLabel," "),ye(2),ai(e.screenReaderPageLabel)}}function iV(i,t){if(i&1&&(z(0,"li",9),Et(1,eV,4,2,"a",10)(2,tV,4,2,"span",11),U()),i&2){at(2);let e=Zr(1);Ki("disabled",e.isFirstPage()),ye(),st("ngIf",1<e.getCurrent()),ye(),st("ngIf",e.isFirstPage())}}function rV(i,t){if(i&1){let e=Ri();z(0,"a",12),kt("keyup.enter",function(){jt(e);let a=at().$implicit;at(2);let s=Zr(1);return qt(s.setCurrent(a.value))})("click",function(){jt(e);let a=at().$implicit;at(2);let s=Zr(1);return qt(s.setCurrent(a.value))}),z(1,"span",13),ce(2),U(),z(3,"span"),ce(4),cn(5,"number"),U()()}if(i&2){let e=at().$implicit,o=at(2);ye(2),yi("",o.screenReaderPageLabel," "),ye(2),ai(e.label==="..."?e.label:Rn(5,2,e.label,""))}}function nV(i,t){if(i&1&&(yf(0),z(1,"span",16)(2,"span",13),ce(3),U(),z(4,"span"),ce(5),cn(6,"number"),U()(),xf()),i&2){let e=at().$implicit,o=at(2);ye(3),yi("",o.screenReaderCurrentLabel," "),ye(2),ai(e.label==="..."?e.label:Rn(6,2,e.label,""))}}function oV(i,t){if(i&1&&(z(0,"li"),Et(1,rV,6,5,"a",10)(2,nV,7,5,"ng-container",15),U()),i&2){let e=t.$implicit;at(2);let o=Zr(1);Ki("current",o.getCurrent()===e.value)("ellipsis",e.label==="..."),ye(),st("ngIf",o.getCurrent()!==e.value),ye(),st("ngIf",o.getCurrent()===e.value)}}function sV(i,t){if(i&1){let e=Ri();z(0,"a",12),kt("keyup.enter",function(){jt(e),at(3);let a=Zr(1);return qt(a.next())})("click",function(){jt(e),at(3);let a=Zr(1);return qt(a.next())}),ce(1),z(2,"span",13),ce(3),U()()}if(i&2){let e=at(3);ye(),yi(" ",e.nextLabel," "),ye(2),ai(e.screenReaderPageLabel)}}function aV(i,t){if(i&1&&(z(0,"span",14),ce(1),z(2,"span",13),ce(3),U()()),i&2){let e=at(3);ye(),yi(" ",e.nextLabel," "),ye(2),ai(e.screenReaderPageLabel)}}function lV(i,t){if(i&1&&(z(0,"li",17),Et(1,sV,4,2,"a",10)(2,aV,4,2,"span",11),U()),i&2){at(2);let e=Zr(1);Ki("disabled",e.isLastPage()),ye(),st("ngIf",!e.isLastPage()),ye(),st("ngIf",e.isLastPage())}}function cV(i,t){if(i&1&&(z(0,"ul",4),Et(1,iV,3,4,"li",5),z(2,"li",6),ce(3),U(),Et(4,oV,3,6,"li",7)(5,lV,3,4,"li",8),U()),i&2){let e=at(),o=Zr(1);Ki("responsive",e.responsive),ye(),st("ngIf",e.directionLinks),ye(2),_a(" ",o.getCurrent()," / ",o.getLastPage()," "),ye(),st("ngForOf",o.pages)("ngForTrackBy",e.trackByIndex),ye(),st("ngIf",e.directionLinks)}}var $m=class{constructor(){this.change=new Yi,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(t){return t.id==null&&(t.id=this.DEFAULT_ID),this.instances[t.id]?this.updateInstance(t):(this.instances[t.id]=t,!0)}updateInstance(t){let e=!1;for(let o in this.instances[t.id])t[o]!==this.instances[t.id][o]&&(this.instances[t.id][o]=t[o],e=!0);return e}getCurrentPage(t){return this.instances[t]?this.instances[t].currentPage:1}setCurrentPage(t,e){if(this.instances[t]){let o=this.instances[t],a=Math.ceil(o.totalItems/o.itemsPerPage);e<=a&&1<=e&&(this.instances[t].currentPage=e,this.change.emit(t))}}setTotalItems(t,e){this.instances[t]&&0<=e&&(this.instances[t].totalItems=e,this.change.emit(t))}setItemsPerPage(t,e){this.instances[t]&&(this.instances[t].itemsPerPage=e,this.change.emit(t))}getInstance(t=this.DEFAULT_ID){return this.instances[t]?this.clone(this.instances[t]):{}}clone(t){var e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}},uV=Number.MAX_SAFE_INTEGER,a3=(()=>{class i{constructor(e){this.service=e,this.state={}}transform(e,o){if(!(e instanceof Array)){let P=o.id||this.service.defaultId();return this.state[P]?this.state[P].slice:e}let a=o.totalItems&&o.totalItems!==e.length,s=this.createInstance(e,o),_=s.id,w,C,T=s.itemsPerPage,I=this.service.register(s);if(!a&&e instanceof Array){if(T=+T||uV,w=(s.currentPage-1)*T,C=w+T,this.stateIsIdentical(_,e,w,C))return this.state[_].slice;{let R=e.slice(w,C);return this.saveState(_,e,R,w,C),this.service.change.emit(_),R}}else return I&&this.service.change.emit(_),this.saveState(_,e,e,w,C),e}createInstance(e,o){return this.checkConfig(o),{id:o.id!=null?o.id:this.service.defaultId(),itemsPerPage:+o.itemsPerPage||0,currentPage:+o.currentPage||1,totalItems:+o.totalItems||e.length}}checkConfig(e){let a=["itemsPerPage","currentPage"].filter(s=>!(s in e));if(0<a.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${a.join(", ")}`)}saveState(e,o,a,s,_){this.state[e]={collection:o,size:o.length,slice:a,start:s,end:_}}stateIsIdentical(e,o,a,s){let _=this.state[e];return!_||!(_.size===o.length&&_.start===a&&_.end===s)?!1:_.slice.every((C,T)=>C===o[a+T])}}return i.\u0275fac=function(e){return new(e||i)(si($m,16))},i.\u0275pipe=yE({name:"paginate",type:i,pure:!1,standalone:!1}),i})();var dV=(()=>{class i{constructor(e,o){this.service=e,this.changeDetectorRef=o,this.maxSize=7,this.pageChange=new Yi,this.pageBoundsCorrection=new Yi,this.pages=[],this.changeSub=this.service.change.subscribe(a=>{this.id===a&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){this.id===void 0&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(e){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return this.getCurrent()===1}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(e){this.pageChange.emit(e)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let e=this.service.getInstance(this.id);return e.totalItems<1?1:Math.ceil(e.totalItems/e.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){this.service.getInstance(this.id).id==null&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let e=this.service.getInstance(this.id),o=this.outOfBoundCorrection(e);o!==e.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(o),this.pages=this.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,this.maxSize)}):this.pages=this.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,this.maxSize)}outOfBoundCorrection(e){let o=Math.ceil(e.totalItems/e.itemsPerPage);return o<e.currentPage&&0<o?o:e.currentPage<1?1:e.currentPage}createPageArray(e,o,a,s){s=+s;let _=[],w=Math.max(Math.ceil(a/o),1),C=Math.ceil(s/2),T=e<=C,I=w-C<e,P=!T&&!I,R=s<w,H=1;for(;H<=w&&H<=s;){let Z,X=this.calculatePageNumber(H,e,s,w),fe=H===2&&(P||I),ae=H===s-1&&(P||T);R&&(fe||ae)?Z="...":Z=X,_.push({label:Z,value:X}),H++}return _}calculatePageNumber(e,o,a,s){let _=Math.ceil(a/2);return e===a?s:e===1?e:a<s?s-_<o?s-a+e:_<o?o-_+e:e:e}}return i.\u0275fac=function(e){return new(e||i)(si($m),si(wo))},i.\u0275dir=Ni({type:i,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],standalone:!1,features:[Ko]}),i})();function Jw(i){return!!i&&i!=="false"}var l3=(()=>{class i{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new Yi,this.pageBoundsCorrection=new Yi,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(e){this._directionLinks=Jw(e)}get autoHide(){return this._autoHide}set autoHide(e){this._autoHide=Jw(e)}get responsive(){return this._responsive}set responsive(e){this._responsive=Jw(e)}trackByIndex(e){return e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ot({type:i,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},standalone:!1,decls:4,vars:4,consts:[["p","paginationApi"],[3,"pageChange","pageBoundsCorrection","id","maxSize"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(e,o){if(e&1){let a=Ri();z(0,"pagination-template",1,0),kt("pageChange",function(_){return jt(a),qt(o.pageChange.emit(_))})("pageBoundsCorrection",function(_){return jt(a),qt(o.pageBoundsCorrection.emit(_))}),z(2,"nav",2),Et(3,cV,6,8,"ul",3),U()()}if(e&2){let a=Zr(1);st("id",o.id)("maxSize",o.maxSize),ye(2),yr("aria-label",o.screenReaderPaginationLabel),ye(),st("ngIf",!(o.autoHide&&a.pages.length<=1))}},dependencies:[dV,_s,ba,wh],styles:[`.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}
`],encapsulation:2,changeDetection:0}),i})(),c3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pi({type:i}),i.\u0275inj=Ii({providers:[$m],imports:[[_n]]}),i})();var pV=(i,t)=>({itemsPerPage:i,currentPage:t});function fV(i,t){if(i&1&&(z(0,"option",33),ce(1),U()),i&2){let e=t.$implicit;st("value",e),ye(),ai(e)}}function mV(i,t){if(i&1){let e=Ri();z(0,"tr")(1,"td"),ce(2),U(),z(3,"td"),ce(4),U(),z(5,"td")(6,"span",34),ce(7),U()(),z(8,"td")(9,"div",35)(10,"input",36),kt("change",function(){let a=jt(e).$implicit,s=at();return qt(s.toggleActivation(a))}),U(),z(11,"label",37),ce(12),U()()()()}if(i&2){let e=t.$implicit,o=at();ye(2),ai(e.dimension),ye(2),ai(e.subdimension),ye(2),st("ngClass",e.activa?"bg-success":"bg-secondary"),ye(),yi(" ",e.activa?"Activo":"Inactivo"," "),ye(3),st("id","toggle_"+e.dimension+"_"+e.subdimension)("checked",e.activa)("disabled",!o.selectedTipoAcceso),ye(),st("for","toggle_"+e.dimension+"_"+e.subdimension),ye(),yi(" ",e.activa?"Desactivar":"Activar"," ")}}function gV(i,t){i&1&&(z(0,"tr")(1,"td",38),ce(2,"No se encontraron configuraciones"),U()())}var Tb=class i{baseUrl="http://nepqas.medellin.gov.co/flask-fiware/api/keycloak";isLoading=!1;configuraciones=[];configuracionesFiltradas=[];p=1;itemsPerPage=10;selectedDimension="";searchTerm="";dimensions=[];subdimensions=[];selectedTipoAcceso="";constructor(){}ngOnInit(){this.loadConfigurations()}get currentPageRange(){let t=(this.p-1)*this.itemsPerPage+1,e=Math.min(this.p*this.itemsPerPage,this.configuracionesFiltradas.length);return`${t} a ${e}`}get totalItems(){return this.configuracionesFiltradas.length}loadConfigurations(){return qi(this,null,function*(){let t=localStorage.getItem("access_tokenadmin");if(!t){this.showError("Error","No se encontr\xF3 token de acceso admin");return}this.isLoading=!0;try{let e=yield fetch(`${this.baseUrl}/userinfo`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let o=yield e.json();Array.isArray(o)?(this.configuraciones=o,this.configuracionesFiltradas=[...o],this.updateFilterLists(),this.applyFilters()):this.showError("Error","Formato de datos incorrecto")}catch(e){this.handleApiError("Error al cargar configuraciones",e)}finally{this.isLoading=!1}})}updateFilterLists(){this.dimensions=[...new Set(this.configuraciones.map(t=>t.dimension))],this.subdimensions=[...new Set(this.configuraciones.map(t=>t.subdimension))]}applyFilters(){this.configuracionesFiltradas=this.configuraciones.filter(t=>{let e=!this.selectedDimension||t.dimension===this.selectedDimension,o=!this.searchTerm||t.dimension.toLowerCase().includes(this.searchTerm.toLowerCase())||t.subdimension.toLowerCase().includes(this.searchTerm.toLowerCase()),a=!this.selectedTipoAcceso||t.rol===this.selectedTipoAcceso;return e&&o&&a}),this.p=1}toggleActivation(t){return qi(this,null,function*(){if(!this.selectedTipoAcceso){this.showError("Error","Seleccione un tipo de acceso primero");return}let e=!t.activa;try{yield this.updateConfiguration(t,e)}catch(o){console.error("Error:",o)}})}updateConfiguration(t,e){return qi(this,null,function*(){let o=localStorage.getItem("access_tokenadmin");if(!o){this.showError("Error","No se encontr\xF3 token de acceso admin");return}this.isLoading=!0;try{let a={rol:this.selectedTipoAcceso,config:[{dimension:t.dimension,subdimension:t.subdimension,activa:e}]},s=yield fetch(`${this.baseUrl}/userinfo`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);yield qr.fire({icon:"success",title:"Configuraci\xF3n actualizada",text:`El estado de ${t.dimension} - ${t.subdimension} ha sido modificado a ${e?"activo":"inactivo"} como ${this.selectedTipoAcceso}.`,confirmButtonText:"Entendido"}),yield this.loadConfigurations()}catch(a){this.handleApiError("Error al actualizar configuraci\xF3n. Usuario no cuenta con los permisos para hacer esta acci\xF3n",a)}finally{this.isLoading=!1}})}handleApiError(t,e){let o="Ocurri\xF3 un error inesperado";if(typeof e=="string")o=e;else if(e instanceof Error)o=e.message;else if(typeof e=="object"&&e!==null){let a=e;a.error?o=typeof a.error=="string"?a.error:JSON.stringify(a.error,null,2):a.message&&(o=a.message)}this.showError(t,o)}showError(t,e){qr.fire({icon:"error",title:t,html:`<div class="error-message">
               <p>${e}</p>
             </div>`,confirmButtonColor:"#3085d6",width:"700px"})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-mde-crud"]],decls:61,vars:17,consts:[[1,"container-fluid"],[1,"card","shadow","mb-4"],[1,"card-header","py-3","d-flex","justify-content-between","align-items-center"],[1,"m-0","font-weight-bold","text-primary"],[1,"card-body"],[1,"row","mb-4"],[1,"col-md-3"],["for","dimensionFilter",1,"form-label"],["id","dimensionFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","tipoAcceso",1,"form-label"],["id","tipoAcceso",1,"form-select",3,"ngModelChange","change","ngModel"],["value","editor"],["value","visualizador"],[1,"col-md-6"],["for","searchInput",1,"form-label"],[1,"input-group"],["type","text","id","searchInput","placeholder","Buscar por dimensi\xF3n o subdimensi\xF3n...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"row","mt-3"],[1,"d-flex","align-items-center"],[1,"me-2"],[1,"form-select","form-select-sm","w-auto",3,"ngModelChange","ngModel"],["value","5"],["value","10"],["value","20"],["value","50"],["previousLabel","Anterior","nextLabel","Siguiente",1,"pagination","justify-content-end",3,"pageChange","maxSize","responsive"],[3,"value"],[1,"badge",3,"ngClass"],[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input",3,"change","id","checked","disabled"],[1,"form-check-label",3,"for"],["colspan","4",1,"text-center"]],template:function(e,o){e&1&&(z(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),ce(4,"Configuraci\xF3n de Dimensiones"),U()(),z(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),ce(9,"Filtrar por Dimensi\xF3n:"),U(),z(10,"select",8),Yn("ngModelChange",function(s){return Xn(o.selectedDimension,s)||(o.selectedDimension=s),s}),kt("change",function(){return o.applyFilters()}),z(11,"option",9),ce(12,"Todas las dimensiones"),U(),Et(13,fV,2,2,"option",10),U()(),z(14,"div",6)(15,"label",11),ce(16,"Tipo de Acceso:"),U(),z(17,"select",12),Yn("ngModelChange",function(s){return Xn(o.selectedTipoAcceso,s)||(o.selectedTipoAcceso=s),s}),kt("change",function(){return o.applyFilters()}),z(18,"option",9),ce(19,"Todos los tipos"),U(),z(20,"option",13),ce(21,"Editor"),U(),z(22,"option",14),ce(23,"Visualizador"),U()()(),z(24,"div",15)(25,"label",16),ce(26,"Buscar:"),U(),z(27,"div",17)(28,"input",18),Yn("ngModelChange",function(s){return Xn(o.searchTerm,s)||(o.searchTerm=s),s}),kt("input",function(){return o.applyFilters()}),U()()()(),z(29,"div",19)(30,"table",20)(31,"thead",21)(32,"tr")(33,"th"),ce(34,"Dimensi\xF3n"),U(),z(35,"th"),ce(36,"Subdimensi\xF3n"),U(),z(37,"th"),ce(38,"Estado"),U(),z(39,"th"),ce(40,"Acciones"),U()()(),z(41,"tbody"),Et(42,mV,13,9,"tr",22),cn(43,"paginate"),Et(44,gV,3,0,"tr",23),U()()(),z(45,"div",24)(46,"div",15)(47,"div",25)(48,"span",26),ce(49),U(),z(50,"select",27),Yn("ngModelChange",function(s){return Xn(o.itemsPerPage,s)||(o.itemsPerPage=s),s}),z(51,"option",28),ce(52,"5 por p\xE1gina"),U(),z(53,"option",29),ce(54,"10 por p\xE1gina"),U(),z(55,"option",30),ce(56,"20 por p\xE1gina"),U(),z(57,"option",31),ce(58,"50 por p\xE1gina"),U()()()(),z(59,"div",15)(60,"pagination-controls",32),kt("pageChange",function(s){return o.p=s}),U()()()()()()),e&2&&(ye(10),Zn("ngModel",o.selectedDimension),ye(3),st("ngForOf",o.dimensions),ye(4),Zn("ngModel",o.selectedTipoAcceso),ye(11),Zn("ngModel",o.searchTerm),ye(14),st("ngForOf",Rn(43,11,o.configuracionesFiltradas,EE(14,pV,o.itemsPerPage,o.p))),ye(2),st("ngIf",o.configuracionesFiltradas.length===0),ye(5),_a("Mostrando ",o.currentPageRange," de ",o.totalItems," registros"),ye(),Zn("ngModel",o.itemsPerPage),ye(10),st("maxSize",5)("responsive",!0))},dependencies:[_n,Zg,ba,_s,fu,Qh,Jh,Pl,pu,kl,uc,c3,a3,l3],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.card[_ngcontent-%COMP%]{border:none;border-radius:12px;box-shadow:0 10px 30px #0000001a;overflow:hidden;transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 35px #00000026}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6a11cb,#2575fc);color:#fff;padding:1.5rem;border-bottom:none}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:600;letter-spacing:.5px}.card-body[_ngcontent-%COMP%]{padding:2rem}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:.5rem;display:block}.form-select[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{border:2px solid #e0e0e0;border-radius:8px;padding:.75rem 1rem;transition:all .3s ease;box-shadow:none}.form-select[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{border-color:#2575fc;box-shadow:0 0 0 .25rem #2575fc40;outline:none}.table-responsive[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden;margin:1.5rem 0;box-shadow:0 5px 15px #0000000d}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#495057;font-weight:600;border-bottom:2px solid #dee2e6;padding:1rem;text-transform:uppercase;font-size:.8rem;letter-spacing:.5px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#2575fc0d;transform:scale(1.01)}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1.2rem 1rem;vertical-align:middle;border-top:1px solid #f1f1f1}.badge[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.8rem;font-weight:500;border-radius:50px;text-transform:uppercase;letter-spacing:.5px;transition:all .3s ease}.bg-success[_ngcontent-%COMP%]{background-color:#28a745!important}.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.btn[_ngcontent-%COMP%]{border:none;border-radius:50px;padding:.5rem 1.25rem;font-weight:500;letter-spacing:.5px;transition:all .3s ease;box-shadow:0 4px 6px #32325d1c,0 1px 3px #00000014}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 7px 14px #32325d1a,0 3px 6px #00000014}.btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-sm[_ngcontent-%COMP%]{padding:.4rem 1rem;font-size:.8rem}.btn-success[_ngcontent-%COMP%]{background-color:#28a745}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545}.my-pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination{display:flex;gap:.5rem;align-items:center}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination li{border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination li a{color:#495057;text-decoration:none;font-weight:500;display:flex;align-items:center;justify-content:center;width:100%;height:100%;border-radius:50%}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination li:hover:not(.current){background-color:#2575fc1a}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination .current{background:linear-gradient(135deg,#6a11cb,#2575fc);color:#fff;box-shadow:0 4px 6px #32325d1c}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination .pagination-previous a:before, .my-pagination[_ngcontent-%COMP%]     .ngx-pagination .pagination-next a:after{display:none}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination .pagination-previous, .my-pagination[_ngcontent-%COMP%]     .ngx-pagination .pagination-next{font-weight:600}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#fffc;display:flex;justify-content:center;align-items:center;z-index:9999;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;border-width:.25rem;animation:_ngcontent-%COMP%_spin 1s linear infinite,_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_rowHover{0%{transform:scale(1);box-shadow:none}to{transform:scale(1.01);box-shadow:0 5px 15px #0000001a}}@media (max-width: 768px){.card-header[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.75rem;font-size:.7rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem}.btn-sm[_ngcontent-%COMP%]{padding:.3rem .75rem;font-size:.7rem}}']})};function _V(i,t){i&1&&(z(0,"div",8),Ye(1,"div",9),z(2,"p"),ce(3,"Cargando..."),U()())}function bV(i,t){i&1&&(z(0,"div",10),Ye(1,"app-mde-crud"),U())}function vV(i,t){i&1&&(z(0,"span"),ce(1,"Este campo es requerido"),U())}function yV(i,t){if(i&1&&(z(0,"div",31),Et(1,vV,2,0,"span",32),U()),i&2){let e,o=at(2);ye(),st("ngIf",(e=o.userForm.get("username"))==null||e.errors==null?null:e.errors.required)}}function xV(i,t){i&1&&(z(0,"div",31),ce(1," Ingrese un correo electr\xF3nico v\xE1lido "),U())}function wV(i,t){i&1&&(z(0,"div",31),ce(1," Este campo es requerido "),U())}function CV(i,t){i&1&&(z(0,"div",31),ce(1," Este campo es requerido "),U())}function EV(i,t){if(i&1){let e=Ri();z(0,"button",33),kt("click",function(){jt(e);let a=at(2);return qt(a.cancelEdit())}),ce(1,"Cancelar"),U()}}function SV(i,t){if(i&1){let e=Ri();z(0,"button",34),kt("click",function(){jt(e);let a=at(2);return qt(a.openPasswordModal())}),ce(1," Asignar Contrase\xF1a "),U()}}function TV(i,t){if(i&1){let e=Ri();z(0,"button",35),kt("click",function(){jt(e);let a=at(2);return qt(a.openRolesModal())}),ce(1," Asignar Roles "),U()}}function MV(i,t){if(i&1){let e=Ri();z(0,"button",36),kt("click",function(){jt(e);let a=at(2);return qt(a.openGrafanaRolesModal())}),ce(1," Asignar Roles Grafana "),U()}}function IV(i,t){if(i&1){let e=Ri();z(0,"tr")(1,"td"),ce(2),U(),z(3,"td"),ce(4),U(),z(5,"td"),ce(6),U(),z(7,"td")(8,"span"),ce(9),U()(),z(10,"td",37)(11,"button",38),kt("click",function(){let a=jt(e).$implicit,s=at(2);return qt(s.editUser(a))}),ce(12,"Editar"),U(),z(13,"button",39),kt("click",function(){let a=jt(e).$implicit,s=at(2);return qt(s.confirmDelete(a.id))}),ce(14,"Eliminar"),U(),z(15,"button",40),kt("click",function(){let a=jt(e).$implicit,s=at(2);return qt(s.openRolesViewModal(a.id))}),ce(16,"Ver Roles"),U()()()}if(i&2){let e=t.$implicit;ye(2),_a("",e.firstName," ",e.lastName,""),ye(2),ai(e.email),ye(2),ai(e.username),ye(2),Ki("active",e.enabled)("inactive",!e.enabled),ye(),yi(" ",e.enabled?"Activo":"Inactivo"," ")}}function PV(i,t){i&1&&(z(0,"div",41),ce(1," No se encontraron usuarios "),U())}function kV(i,t){if(i&1){let e=Ri();z(0,"div",10)(1,"div",11)(2,"h2"),ce(3),U(),z(4,"form",12),kt("ngSubmit",function(){jt(e);let a=at();return qt(a.selectedUser?a.updateUser():a.createUser())}),z(5,"div",13)(6,"label"),ce(7,"Nombre de usuario *"),U(),Ye(8,"input",14),Et(9,yV,2,1,"div",15),U(),z(10,"div",13)(11,"label"),ce(12,"Correo electr\xF3nico *"),U(),Ye(13,"input",16),Et(14,xV,2,0,"div",15),U(),z(15,"div",13)(16,"label"),ce(17,"Nombre *"),U(),Ye(18,"input",17),Et(19,wV,2,0,"div",15),U(),z(20,"div",13)(21,"label"),ce(22,"Apellido *"),U(),Ye(23,"input",18),Et(24,CV,2,0,"div",15),U(),z(25,"div",13)(26,"label"),ce(27,"Habilitado"),U(),Ye(28,"input",19),U(),z(29,"div",20)(30,"button",21),ce(31),U(),Et(32,EV,2,0,"button",22)(33,SV,2,0,"button",23)(34,TV,2,0,"button",24)(35,MV,2,0,"button",25),U()()(),z(36,"div",26)(37,"h2"),ce(38,"Lista de Usuarios"),U(),z(39,"div",27)(40,"input",28),Yn("ngModelChange",function(a){jt(e);let s=at();return Xn(s.searchTerm,a)||(s.searchTerm=a),qt(a)}),kt("input",function(){jt(e);let a=at();return qt(a.filterUsers())}),U()(),z(41,"table")(42,"thead")(43,"tr")(44,"th"),ce(45,"Nombre"),U(),z(46,"th"),ce(47,"Correo"),U(),z(48,"th"),ce(49,"Usuario"),U(),z(50,"th"),ce(51,"Estado"),U(),z(52,"th"),ce(53,"Acciones"),U()()(),z(54,"tbody"),Et(55,IV,17,9,"tr",29),U()(),Et(56,PV,2,0,"div",30),U()()}if(i&2){let e,o,a,s,_=at();ye(3),ai(_.selectedUser?"Editar Usuario":"Crear Usuario"),ye(),st("formGroup",_.userForm),ye(4),yr("disabled",_.selectedUser?"disabled":null),ye(),st("ngIf",((e=_.userForm.get("username"))==null?null:e.invalid)&&((e=_.userForm.get("username"))==null?null:e.touched)),ye(5),st("ngIf",((o=_.userForm.get("email"))==null?null:o.invalid)&&((o=_.userForm.get("email"))==null?null:o.touched)),ye(5),st("ngIf",((a=_.userForm.get("firstName"))==null?null:a.invalid)&&((a=_.userForm.get("firstName"))==null?null:a.touched)),ye(5),st("ngIf",((s=_.userForm.get("lastName"))==null?null:s.invalid)&&((s=_.userForm.get("lastName"))==null?null:s.touched)),ye(4),st("checked",!0)("disabled",!0),ye(2),st("disabled",!_.userForm.valid),ye(),yi(" ",_.selectedUser?"Actualizar":"Crear"," "),ye(),st("ngIf",_.selectedUser),ye(),st("ngIf",_.selectedUser),ye(),st("ngIf",_.selectedUser),ye(),st("ngIf",_.selectedUser),ye(5),Zn("ngModel",_.searchTerm),ye(15),st("ngForOf",_.filteredUsers),ye(),st("ngIf",_.filteredUsers.length===0)}}function AV(i,t){if(i&1&&(z(0,"span",43),ce(1),U()),i&2){let e=t.$implicit;ye(),yi(" ",e.username," ")}}function DV(i,t){i&1&&(z(0,"span"),ce(1,"Ning\xFAn usuario"),U())}function RV(i,t){if(i&1){let e=Ri();z(0,"tr")(1,"td"),ce(2),U(),z(3,"td"),ce(4),U(),z(5,"td"),Et(6,AV,2,1,"span",42)(7,DV,2,0,"span",32),U(),z(8,"td")(9,"button",5),kt("click",function(){let a=jt(e).$implicit,s=at(2);return qt(s.viewRoleDetails(a))}),ce(10,"Detalles"),U()()()}if(i&2){let e=t.$implicit,o=at(2);ye(2),ai(e.name),ye(2),ai(e.description||"Sin descripci\xF3n"),ye(2),st("ngForOf",o.getUsersWithRole(e.id)),ye(),st("ngIf",o.getUsersWithRole(e.id).length===0)}}function OV(i,t){i&1&&(z(0,"div",41),ce(1," No se encontraron roles del sistema "),U())}function LV(i,t){if(i&1&&(z(0,"div",10)(1,"div",26)(2,"h2"),ce(3,"Roles del Sistema"),U(),z(4,"table")(5,"thead")(6,"tr")(7,"th"),ce(8,"Nombre"),U(),z(9,"th"),ce(10,"Descripci\xF3n"),U(),z(11,"th"),ce(12,"Usuarios Asignados"),U(),z(13,"th"),ce(14,"Acciones"),U()()(),z(15,"tbody"),Et(16,RV,11,4,"tr",29),U()(),Et(17,OV,2,0,"div",30),U()()),i&2){let e=at();ye(16),st("ngForOf",e.roles),ye(),st("ngIf",e.roles.length===0)}}function NV(i,t){if(i&1&&(z(0,"span",43),ce(1),U()),i&2){let e=t.$implicit;ye(),yi(" ",e.username," ")}}function FV(i,t){i&1&&(z(0,"span"),ce(1,"Ning\xFAn usuario"),U())}function zV(i,t){if(i&1){let e=Ri();z(0,"tr")(1,"td"),ce(2),U(),z(3,"td"),ce(4),U(),z(5,"td"),Et(6,NV,2,1,"span",42)(7,FV,2,0,"span",32),U(),z(8,"td")(9,"button",5),kt("click",function(){let a=jt(e).$implicit,s=at(2);return qt(s.viewRoleDetails(a,!0))}),ce(10,"Detalles"),U()()()}if(i&2){let e=t.$implicit,o=at(2);ye(2),ai(e.name),ye(2),ai(e.description||"Sin descripci\xF3n"),ye(2),st("ngForOf",o.getUsersWithGrafanaRole(e.id)),ye(),st("ngIf",o.getUsersWithGrafanaRole(e.id).length===0)}}function BV(i,t){i&1&&(z(0,"div",41),ce(1," No se encontraron roles de Grafana "),U())}function VV(i,t){if(i&1&&(z(0,"div",10)(1,"div",26)(2,"h2"),ce(3,"Roles de Grafana"),U(),z(4,"table")(5,"thead")(6,"tr")(7,"th"),ce(8,"Nombre"),U(),z(9,"th"),ce(10,"Descripci\xF3n"),U(),z(11,"th"),ce(12,"Usuarios Asignados"),U(),z(13,"th"),ce(14,"Acciones"),U()()(),z(15,"tbody"),Et(16,zV,11,4,"tr",29),U()(),Et(17,BV,2,0,"div",30),U()()),i&2){let e=at();ye(16),st("ngForOf",e.grafanaRoles),ye(),st("ngIf",e.grafanaRoles.length===0)}}function UV(i,t){if(i&1&&(z(0,"tr")(1,"td"),ce(2),U(),z(3,"td"),ce(4),U(),z(5,"td"),ce(6),U(),z(7,"td"),ce(8),U(),z(9,"td"),ce(10),cn(11,"date"),U()()),i&2){let e=t.$implicit,o=at(2);ye(2),ai(e.userId||"Sistema"),ye(2),ai(o.getActionName(e.operationType)),ye(2),ai(o.getResourceType(e.resourceType)),ye(2),ai(e.details||"N/A"),ye(2),ai(Rn(11,5,e.time,"dd/MM/yyyy HH:mm"))}}function jV(i,t){i&1&&(z(0,"div",41),ce(1," No se encontraron registros de auditor\xEDa "),U())}function qV(i,t){if(i&1){let e=Ri();z(0,"div",10)(1,"h2"),ce(2,"Registros de Auditor\xEDa"),U(),z(3,"div",44)(4,"div",45)(5,"label"),ce(6,"Filtrar por tipo:"),U(),z(7,"select",46),Yn("ngModelChange",function(a){jt(e);let s=at();return Xn(s.auditFilter.type,a)||(s.auditFilter.type=a),qt(a)}),kt("change",function(){jt(e);let a=at();return qt(a.filterAuditLogs())}),z(8,"option",47),ce(9,"Todos"),U(),z(10,"option",48),ce(11,"Usuarios"),U(),z(12,"option",49),ce(13,"Roles"),U(),z(14,"option",50),ce(15,"Roles Grafana"),U()()(),z(16,"div",45)(17,"label"),ce(18,"Filtrar por acci\xF3n:"),U(),z(19,"select",46),Yn("ngModelChange",function(a){jt(e);let s=at();return Xn(s.auditFilter.action,a)||(s.auditFilter.action=a),qt(a)}),kt("change",function(){jt(e);let a=at();return qt(a.filterAuditLogs())}),z(20,"option",47),ce(21,"Todas"),U(),z(22,"option",51),ce(23,"Creaci\xF3n"),U(),z(24,"option",52),ce(25,"Actualizaci\xF3n"),U(),z(26,"option",53),ce(27,"Eliminaci\xF3n"),U()()(),z(28,"button",5),kt("click",function(){jt(e);let a=at();return qt(a.clearAuditFilters())}),ce(29,"Limpiar Filtros"),U()(),z(30,"div",54)(31,"table")(32,"thead")(33,"tr")(34,"th"),ce(35,"Usuario"),U(),z(36,"th"),ce(37,"Acci\xF3n"),U(),z(38,"th"),ce(39,"Recurso"),U(),z(40,"th"),ce(41,"Detalles"),U(),z(42,"th"),ce(43,"Fecha"),U()()(),z(44,"tbody"),Et(45,UV,12,8,"tr",29),U()(),Et(46,jV,2,0,"div",30),U()()}if(i&2){let e=at();ye(7),Zn("ngModel",e.auditFilter.type),ye(12),Zn("ngModel",e.auditFilter.action),ye(26),st("ngForOf",e.filteredAuditLogs),ye(),st("ngIf",e.filteredAuditLogs.length===0)}}function HV(i,t){if(i&1){let e=Ri();z(0,"div",55)(1,"div",56)(2,"div",57)(3,"h3"),ce(4,"Cambiar Contrase\xF1a"),U(),z(5,"button",58),kt("click",function(){jt(e);let a=at();return qt(a.closePasswordModal())}),ce(6,"\xD7"),U()(),z(7,"div",59)(8,"div",13)(9,"label"),ce(10,"Nueva Contrase\xF1a"),U(),z(11,"input",60),Yn("ngModelChange",function(a){jt(e);let s=at();return Xn(s.tempPassword,a)||(s.tempPassword=a),qt(a)}),U()()(),z(12,"div",61)(13,"button",62),kt("click",function(){jt(e);let a=at();return qt(a.closePasswordModal())}),ce(14,"Cancelar"),U(),z(15,"button",63),kt("click",function(){jt(e);let a=at();return qt(a.savePassword())}),ce(16),U()()()()}if(i&2){let e=at();ye(11),Zn("ngModel",e.tempPassword),ye(4),st("disabled",!e.tempPassword||e.loading),ye(),yi(" ",e.loading?"Guardando...":"Guardar"," ")}}function $V(i,t){if(i&1&&(z(0,"small",70),ce(1),U()),i&2){let e=at().$implicit;ye(),ai(e.description)}}function GV(i,t){if(i&1){let e=Ri();z(0,"div",66)(1,"input",67),kt("change",function(a){let s=jt(e).$implicit,_=at(2);return qt(_.onRoleChange(a,s.id))}),U(),z(2,"label",68),ce(3),U(),Et(4,$V,2,1,"small",69),U()}if(i&2){let e=t.$implicit,o=at(2);ye(),st("id","modal-role-"+e.id)("value",e.id)("checked",o.isRoleSelected(e.id))("disabled",o.roleAssignmentInProgress),ye(),st("for","modal-role-"+e.id),ye(),ai(e.name),ye(),st("ngIf",e.description)}}function WV(i,t){if(i&1&&(z(0,"div",31),ce(1),U()),i&2){let e=at(2);ye(),ai(e.roleError)}}function ZV(i,t){if(i&1){let e=Ri();z(0,"div",55)(1,"div",56)(2,"div",57)(3,"h3"),ce(4,"Asignar Roles del Sistema"),U(),z(5,"button",58),kt("click",function(){jt(e);let a=at();return qt(a.closeRolesModal())}),ce(6,"\xD7"),U()(),z(7,"div",59)(8,"div",64),Et(9,GV,5,7,"div",65),U(),Et(10,WV,2,1,"div",15),U(),z(11,"div",61)(12,"button",62),kt("click",function(){jt(e);let a=at();return qt(a.closeRolesModal())}),ce(13,"Cancelar"),U(),z(14,"button",63),kt("click",function(){jt(e);let a=at();return qt(a.saveRoles())}),ce(15),U()()()()}if(i&2){let e=at();ye(9),st("ngForOf",e.roles),ye(),st("ngIf",e.roleError),ye(4),st("disabled",e.roleAssignmentInProgress),ye(),yi(" ",e.roleAssignmentInProgress?"Guardando...":"Guardar"," ")}}function XV(i,t){if(i&1){let e=Ri();z(0,"li")(1,"span",75),ce(2),U(),z(3,"button",76),kt("click",function(){let a=jt(e).$implicit,s=at(4);return qt(s.removeSystemRoles(s.userRolesDetails.id,[a]))}),ce(4,"Eliminar"),U()()}if(i&2){let e=t.$implicit;ye(2),ai(e)}}function YV(i,t){if(i&1&&(z(0,"div")(1,"ul",74),Et(2,XV,5,1,"li",29),U()()),i&2){let e=at(3);ye(2),st("ngForOf",e.userRolesDetails.user_roles)}}function KV(i,t){i&1&&(z(0,"p"),ce(1,"No tiene roles del sistema asignados"),U())}function QV(i,t){if(i&1){let e=Ri();z(0,"li")(1,"span",75),ce(2),U(),z(3,"button",76),kt("click",function(){let a=jt(e).$implicit,s=at(4);return qt(s.removeRoleFromUser(a,!0))}),ce(4,"Eliminar"),U()()}if(i&2){let e=t.$implicit;ye(2),ai(e)}}function JV(i,t){if(i&1&&(z(0,"div")(1,"ul",74),Et(2,QV,5,1,"li",29),U()()),i&2){let e=at(3);ye(2),st("ngForOf",e.userRolesDetails.grafana_roles)}}function eU(i,t){i&1&&(z(0,"p"),ce(1,"No tiene roles de Grafana asignados"),U())}function tU(i,t){if(i&1&&(z(0,"div")(1,"div",72)(2,"strong"),ce(3,"Nombre:"),U(),ce(4),U(),z(5,"div",72)(6,"strong"),ce(7,"Email:"),U(),ce(8),U(),z(9,"h4"),ce(10,"Roles del Sistema"),U(),Et(11,YV,3,1,"div",73)(12,KV,2,0,"ng-template",null,0,td),z(14,"h4"),ce(15,"Roles de Grafana"),U(),Et(16,JV,3,1,"div",73)(17,eU,2,0,"ng-template",null,1,td),U()),i&2){let e=Zr(13),o=Zr(18),a=at(2);ye(4),_a(" ",a.userRolesDetails.firstName," ",a.userRolesDetails.lastName," "),ye(4),yi(" ",a.userRolesDetails.email," "),ye(3),st("ngIf",(a.userRolesDetails.user_roles==null?null:a.userRolesDetails.user_roles.length)>0)("ngIfElse",e),ye(5),st("ngIf",(a.userRolesDetails.grafana_roles==null?null:a.userRolesDetails.grafana_roles.length)>0)("ngIfElse",o)}}function iU(i,t){if(i&1){let e=Ri();z(0,"div",55)(1,"div",56)(2,"div",57)(3,"h3"),ce(4),U(),z(5,"button",58),kt("click",function(){jt(e);let a=at();return qt(a.closeRolesViewModal())}),ce(6,"\xD7"),U()(),z(7,"div",59),Et(8,tU,19,7,"div",32),U(),z(9,"div",61)(10,"button",71),kt("click",function(){jt(e);let a=at();return qt(a.closeRolesViewModal())}),ce(11,"Cerrar"),U()()()()}if(i&2){let e=at();ye(4),yi("Roles del Usuario: ",e.userRolesDetails==null?null:e.userRolesDetails.username,""),ye(4),st("ngIf",e.userRolesDetails)}}function rU(i,t){if(i&1&&(z(0,"small",70),ce(1),U()),i&2){let e=at().$implicit;ye(),ai(e.description)}}function nU(i,t){if(i&1){let e=Ri();z(0,"div",66)(1,"input",67),kt("change",function(a){let s=jt(e).$implicit,_=at(2);return qt(_.onRoleChange(a,s.id,!0))}),U(),z(2,"label",68),ce(3),U(),Et(4,rU,2,1,"small",69),U()}if(i&2){let e=t.$implicit,o=at(2);ye(),st("id","modal-grafana-role-"+e.id)("value",e.id)("checked",o.isRoleSelected(e.id,!0))("disabled",o.roleAssignmentInProgress),ye(),st("for","modal-grafana-role-"+e.id),ye(),ai(e.name),ye(),st("ngIf",e.description)}}function oU(i,t){if(i&1&&(z(0,"div",31),ce(1),U()),i&2){let e=at(2);ye(),ai(e.roleError)}}function sU(i,t){if(i&1){let e=Ri();z(0,"div",55)(1,"div",56)(2,"div",57)(3,"h3"),ce(4,"Asignar Roles de Grafana"),U(),z(5,"button",58),kt("click",function(){jt(e);let a=at();return qt(a.closeGrafanaRolesModal())}),ce(6,"\xD7"),U()(),z(7,"div",59)(8,"div",64),Et(9,nU,5,7,"div",65),U(),Et(10,oU,2,1,"div",15),U(),z(11,"div",61)(12,"button",62),kt("click",function(){jt(e);let a=at();return qt(a.closeGrafanaRolesModal())}),ce(13,"Cancelar"),U(),z(14,"button",63),kt("click",function(){jt(e);let a=at();return qt(a.saveGrafanaRoles())}),ce(15),U()()()()}if(i&2){let e=at();ye(9),st("ngForOf",e.grafanaRoles),ye(),st("ngIf",e.roleError),ye(4),st("disabled",e.roleAssignmentInProgress),ye(),yi(" ",e.roleAssignmentInProgress?"Guardando...":"Guardar"," ")}}var Mb=class i{constructor(t,e){this.http=t;this.fb=e;this.initUserForm()}activeTab="usuarios";users=[];filteredUsers=[];roles=[];grafanaRoles=[];auditLogs=[];filteredAuditLogs=[];userForm;selectedUser=null;token="";searchTerm="";selectedRoles=[];selectedGrafanaRoles=[];roleAssignmentInProgress=!1;roleError="";loading=!1;showPasswordModal=!1;showRolesModal=!1;showGrafanaRolesModal=!1;tempPassword="";auditFilter={type:"",action:""};apiUrl="http://nepqas.medellin.gov.co/flask-fiware/api/keycloak";ngOnInit(){this.getToken()}removeSystemRoles(t,e){return qi(this,null,function*(){let o=`${this.apiUrl}/user_roles/user_id/${localStorage.getItem("userid")}`,a={roles:e};try{yield this.http.request("DELETE",o,{body:a,headers:this.getHeaders()}).toPromise(),yield qr.fire({icon:"success",title:"Roles eliminados",text:"Los roles se han eliminado correctamente",timer:2e3,showConfirmButton:!0});let s=localStorage.getItem("userid");s!==null&&this.viewUserRoles(s)}catch(s){throw console.error("Error removing system roles:",s),yield qr.fire({icon:"error",title:"Error",text:"Ocurri\xF3 un error al eliminar los roles",timer:2e3,showConfirmButton:!0}),s}})}removeGrafanaRole(t,e){return qi(this,null,function*(){let o=this.grafanaRoles.find(s=>s.name===e);if(!o)throw new Error(`No se encontr\xF3 el rol de Grafana: ${e}`);let a=`${this.apiUrl}/roles/user_id/${localStorage.getItem("userid")}/role_id/${o.id}`;return this.http.delete(a,{headers:this.getHeaders()}).toPromise().then(()=>{}).catch(s=>{throw console.error("Error removing Grafana role:",s),s})})}removeRoleFromUser(t,e){return qi(this,null,function*(){if(this.userRolesDetails){this.loading=!0;try{let o=this.userRolesDetails.id;e?(yield this.removeGrafanaRole(o,t),this.userRolesDetails.grafana_roles=this.userRolesDetails.grafana_roles.filter(a=>a!==t)):(yield this.removeSystemRoles(o,[t]),this.userRolesDetails.user_roles=this.userRolesDetails.user_roles.filter(a=>a!==t)),qr.fire({title:"Rol eliminado",text:`El rol ${t} ha sido eliminado correctamente`,icon:"success",confirmButtonColor:"#334155"})}catch(o){console.error("Error al eliminar rol:",o),qr.fire({title:"Error",text:"No se pudo eliminar el rol",icon:"error",confirmButtonColor:"#334155"})}finally{this.loading=!1}}})}getRoleIdByName(t,e){return qi(this,null,function*(){try{let o=e?this.grafanaRoles:this.roles;if(o&&o.length>0){let w=o.find(C=>C.name===t);if(w)return w.id}let a=e?"roles":"user_roles",_=(yield this.http.get(`${this.apiUrl}/${a}`,{headers:this.getHeaders()}).toPromise()).find(w=>w.name===t);if(!_)throw new Error(`Rol ${t} no encontrado`);return _.id}catch(o){throw console.error("Error obteniendo ID del rol:",o),o}})}initUserForm(){this.userForm=this.fb.group({username:["",[Us.required],[this.asyncUsernameValidator.bind(this)]],email:["",[Us.required,Us.email]],firstName:["",Us.required],lastName:["",Us.required],enabled:[!0],password:[""]})}asyncUsernameValidator(t){return this.validateUsername(t.value).then(e=>e?null:{})}validateUsername(t){return qi(this,null,function*(){if(!t||this.selectedUser)return!0;try{return(yield this.http.get(`${this.apiUrl}/users?username=${t}`,{headers:this.getHeaders()}).toPromise()).length===0}catch{return!1}})}getToken(){this.loading=!0;let t={username:"admin-user@hopu.eu",password:"5uLFJdgF65DqcMbGUzArLd29L4TAAdFHAMq8"};this.http.post(`${this.apiUrl}/login`,t).subscribe({next:e=>{this.token=e.access_token,this.loadInitialData(),this.loading=!1},error:e=>{console.error("Error al obtener token:",e),this.showError("Error al iniciar sesi\xF3n","No se pudo obtener el token de autenticaci\xF3n"),this.loading=!1}})}loadInitialData(){this.loadUsers(),this.loadRoles(),this.loadGrafanaRoles(),this.loadAuditLogs()}getHeaders(){return new Ya({Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"})}loadUsers(){this.loading=!0,this.http.get(`${this.apiUrl}/users`,{headers:this.getHeaders()}).subscribe({next:t=>{this.users=t,this.filteredUsers=[...this.users],this.users.forEach(e=>{this.loadUserRoles(e.id),this.loadUserGrafanaRoles(e.id)}),this.loading=!1},error:t=>{console.error("Error al cargar usuarios:",t),this.showError("Error","No se pudieron cargar los usuarios"),this.loading=!1}})}loadUserRoles(t){this.http.get(`${this.apiUrl}/user_roles/user_id/${t}`,{headers:this.getHeaders()}).subscribe({next:e=>{let o=this.users.find(a=>a.id===t);o&&(o.roles=e,this.filterUsers())},error:e=>{console.error(`Error al cargar roles para usuario ${t}:`,e)}})}loadUserGrafanaRoles(t){this.http.get(`${this.apiUrl}/roles/user_id/${t}`,{headers:this.getHeaders()}).subscribe({next:e=>{let o=this.users.find(a=>a.id===t);o&&(o.grafanaRoles=e,this.filterUsers())},error:e=>{console.error(`Error al cargar roles de Grafana para usuario ${t}:`,e)}})}loadRoles(){this.loading=!0,this.http.get(`${this.apiUrl}/user_roles`,{headers:this.getHeaders()}).subscribe({next:t=>{this.roles=t,this.loading=!1},error:t=>{console.error("Error al cargar roles:",t),this.showError("Error","No se pudieron cargar los roles"),this.loading=!1}})}loadGrafanaRoles(){this.loading=!0,this.http.get(`${this.apiUrl}/roles`,{headers:this.getHeaders()}).subscribe({next:t=>{this.grafanaRoles=t,this.loading=!1},error:t=>{console.error("Error al cargar roles de Grafana:",t),this.showError("Error","No se pudieron cargar los roles de Grafana"),this.loading=!1}})}loadAuditLogs(){this.loading=!0,this.http.get(`${this.apiUrl}/user_logs`,{headers:this.getHeaders()}).subscribe({next:t=>{this.auditLogs=t,this.http.get(`${this.apiUrl}/role_logs`,{headers:this.getHeaders()}).subscribe({next:e=>{this.auditLogs=[...this.auditLogs,...e],this.filteredAuditLogs=[...this.auditLogs],this.filterAuditLogs(),this.loading=!1},error:e=>{console.error("Error al cargar logs de roles:",e),this.loading=!1}})},error:t=>{console.error("Error al cargar logs de usuarios:",t),this.loading=!1}})}assignSingleRole(t,e){return this.http.post(`${this.apiUrl}/user_roles/user_id/${t}`,{roles:["manage-users","view-users","view-events"]},{headers:this.getHeaders()}).toPromise()}removeSingleRole(t,e){return this.http.delete(`${this.apiUrl}/user_roles/user_id/${t}/role_id/${e}`,{headers:this.getHeaders()}).toPromise()}assignSingleGrafanaRole(t,e){return this.http.put(`${this.apiUrl}/roles/user_id/${t}/role_id/${e}`,{},{headers:this.getHeaders()}).toPromise()}removeSingleGrafanaRole(t,e){return this.http.delete(`${this.apiUrl}/roles/user_id/${t}/role_id/${e}`,{headers:this.getHeaders()}).toPromise()}onRoleChange(t,e,o=!1){return qi(this,null,function*(){if(!this.selectedUser){let a=o?this.selectedGrafanaRoles:this.selectedRoles;if(t.target.checked)a.includes(e)||a.push(e);else{let s=a.indexOf(e);s>-1&&a.splice(s,1)}return}this.roleAssignmentInProgress=!0,this.roleError="";try{t.target.checked?o?yield this.assignSingleGrafanaRole(this.selectedUser.id,e):yield this.assignSingleRole(this.selectedUser.id,e):o?yield this.removeSingleGrafanaRole(this.selectedUser.id,e):yield this.removeSingleRole(this.selectedUser.id,e),o?this.loadUserGrafanaRoles(this.selectedUser.id):this.loadUserRoles(this.selectedUser.id)}catch(a){console.error("Error al actualizar rol:",a),this.roleError="Error al actualizar el rol. Intente nuevamente.",t.target.checked=!t.target.checked}finally{this.roleAssignmentInProgress=!1}})}filterUsers(){if(!this.searchTerm){this.filteredUsers=[...this.users];return}let t=this.searchTerm.toLowerCase();this.filteredUsers=this.users.filter(e=>e.firstName&&e.firstName.toLowerCase().includes(t)||e.lastName&&e.lastName.toLowerCase().includes(t)||e.email&&e.email.toLowerCase().includes(t)||e.username&&e.username.toLowerCase().includes(t))}filterAuditLogs(){this.filteredAuditLogs=this.auditLogs.filter(t=>{let e=!0;return this.auditFilter.type&&(e=e&&t.resourceType===this.auditFilter.type),this.auditFilter.action&&(e=e&&t.operationType===this.auditFilter.action),e}).sort((t,e)=>new Date(e.time).getTime()-new Date(t.time).getTime())}clearAuditFilters(){this.auditFilter={type:"",action:""},this.filterAuditLogs()}getActionName(t){switch(t){case"CREATE":return"Creaci\xF3n";case"UPDATE":return"Actualizaci\xF3n";case"DELETE":return"Eliminaci\xF3n";default:return t}}getResourceType(t){switch(t){case"USER":return"Usuario";case"ROLE":return"Rol";default:return t}}getUsersWithRole(t){return this.users.filter(e=>e.roles&&e.roles.some(o=>o.id===t))}getUsersWithGrafanaRole(t){return this.users.filter(e=>e.grafanaRoles&&e.grafanaRoles.some(o=>o.id===t))}isRoleSelected(t,e=!1){return this.selectedUser?e?this.selectedUser.grafanaRoles&&this.selectedUser.grafanaRoles.some(o=>o.id===t):this.selectedUser.roles&&this.selectedUser.roles.some(o=>o.id===t):e?this.selectedGrafanaRoles.includes(t):this.selectedRoles.includes(t)}createUser(){if(this.userForm.valid){let t={username:this.userForm.value.username,email:this.userForm.value.email,firstName:this.userForm.value.firstName,lastName:this.userForm.value.lastName,enabled:this.userForm.value.enabled};qr.fire({title:"Crear usuario",text:"\xBFEst\xE1 seguro de que desea crear este usuario?",icon:"question",showCancelButton:!0,confirmButtonColor:"#334155",cancelButtonColor:"#d33",confirmButtonText:"S\xED, crear",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.createUserWithRoles(t)})}}createUserWithRoles(t){this.loading=!0,this.http.post(`${this.apiUrl}/users`,t,{headers:this.getHeaders()}).subscribe({next:e=>{let o=e.id,a=this.userForm.value.password,s=[];a&&s.push(this.setUserPassword(o,a)),Promise.all(s).then(()=>{this.showSuccess("Usuario creado","El usuario ha sido creado correctamente"),this.resetFormAndReload(),this.loading=!1}).catch(_=>{this.showError("Error","Ocurri\xF3 un error al completar la creaci\xF3n del usuario"),console.error("Error en el proceso de creaci\xF3n:",_),this.loading=!1})},error:e=>{let o="Ocurri\xF3 un error al crear el usuario";try{let a=JSON.parse(e.error);a.errorMessage&&a.errorMessage.includes("User exists with same email")?o="Ya existe un usuario con el mismo correo electr\xF3nico":a.errorMessage&&a.errorMessage.includes("User exists with same username")&&(o="Ya existe un usuario con el mismo nombre de usuario")}catch{}this.showError("Error",o),this.loading=!1}})}setUserPassword(t,e){return new Promise((o,a)=>{let s={type:"password",value:e,temporary:!1};this.http.put(`${this.apiUrl}/password/${t}`,s,{headers:this.getHeaders()}).subscribe({next:()=>o(),error:_=>a(_)})})}showRolesViewModal=!1;userRolesDetails=null;viewUserRoles(t){return qi(this,null,function*(){this.loading=!0;try{let e=yield this.http.get(`http://nepqas.medellin.gov.co/territoriointeligente/api/keycloak/userall/${t}`,{headers:this.getHeaders()}).toPromise();this.userRolesDetails=e,console.log(e),this.showRolesViewModal=!0}catch(e){console.error("Error al obtener roles del usuario:",e),this.showError("Error","No se pudieron cargar los roles del usuario")}finally{this.loading=!1}})}openRolesViewModal(t){this.viewUserRoles(t),localStorage.setItem("userid",t)}closeRolesViewModal(){this.showRolesViewModal=!1,this.userRolesDetails=null}assignRolesToUser(t,e){return new Promise((o,a)=>{let s={roles:e};this.http.post(`${this.apiUrl}/user_roles/user_id/${t}`,s,{headers:this.getHeaders()}).subscribe({next:()=>o(),error:_=>a(_)})})}assignGrafanaRolesToUser(t,e){return new Promise((o,a)=>{let s={roles:e};this.http.post(`${this.apiUrl}/roles/user_id/${t}`,s,{headers:this.getHeaders()}).subscribe({next:()=>o(),error:_=>a(_)})})}editUser(t){this.selectedUser=t,this.selectedRoles=t.roles?t.roles.map(e=>e.id):[],this.selectedGrafanaRoles=t.grafanaRoles?t.grafanaRoles.map(e=>e.id):[],this.selectedUser&&this.userForm.get("username")?.disable(),this.userForm.patchValue({username:t.username,email:t.email,firstName:t.firstName,lastName:t.lastName,enabled:t.enabled,password:""})}assignRoles(t){this.selectedUser=t,this.selectedRoles=t.roles?t.roles.map(e=>e.id):[],this.selectedGrafanaRoles=t.grafanaRoles?t.grafanaRoles.map(e=>e.id):[],this.openRolesModal()}openPasswordModal(){this.tempPassword="",this.showPasswordModal=!0}closePasswordModal(){this.showPasswordModal=!1}savePassword(){this.tempPassword&&this.selectedUser&&(this.loading=!0,this.setUserPassword(this.selectedUser.id,this.tempPassword).then(()=>{this.showSuccess("Contrase\xF1a actualizada","La contrase\xF1a se ha actualizado correctamente"),this.closePasswordModal(),this.loading=!1}).catch(t=>{this.showError("Error","No se pudo actualizar la contrase\xF1a"),console.error("Error al actualizar contrase\xF1a:",t),this.loading=!1}))}openRolesModal(){this.showRolesModal=!0}closeRolesModal(){this.showRolesModal=!1}openGrafanaRolesModal(){this.showGrafanaRolesModal=!0}closeGrafanaRolesModal(){this.showGrafanaRolesModal=!1}saveRoles(){if(this.selectedUser){this.loading=!0;try{this.showSuccess("Roles actualizados","Los roles del sistema se han actualizado correctamente"),this.closeRolesModal(),this.loading=!1}catch(t){this.showError("Error","No se pudieron actualizar los roles"),console.error("Error al actualizar roles:",t),this.loading=!1}}}saveGrafanaRoles(){if(this.selectedUser){this.loading=!0;try{this.showSuccess("Roles actualizados","Los roles de Grafana se han actualizado correctamente"),this.loadUserGrafanaRoles(this.selectedUser.id),this.closeGrafanaRolesModal(),this.loading=!1}catch(t){this.showError("Error","No se pudieron actualizar los roles de Grafana"),console.error("Error al actualizar roles de Grafana:",t),this.loading=!1}}}cancelEdit(){this.selectedUser=null,this.selectedRoles=[],this.selectedGrafanaRoles=[],this.userForm.reset(),this.userForm.patchValue({enabled:!0})}updateUser(){if(this.userForm.valid&&this.selectedUser){let t={email:this.userForm.value.email,firstName:this.userForm.value.firstName,lastName:this.userForm.value.lastName,enabled:this.userForm.value.enabled},e=this.selectedUser.id,o=this.userForm.value.password;qr.fire({title:"Actualizar usuario",text:"\xBFEst\xE1 seguro de que desea actualizar este usuario?",icon:"question",showCancelButton:!0,confirmButtonColor:"#334155",cancelButtonColor:"#d33",confirmButtonText:"S\xED, actualizar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&this.updateUserWithRoles(e,t,o)})}}updateUserWithRoles(t,e,o){this.loading=!0,this.http.put(`${this.apiUrl}/users/${t}`,e,{headers:this.getHeaders()}).subscribe({next:()=>{let a=[];o&&a.push(this.setUserPassword(t,o)),Promise.all(a).then(()=>{this.showSuccess("Usuario actualizado","El usuario ha sido actualizado correctamente"),this.resetFormAndReload(),this.loading=!1}).catch(s=>{this.showError("Error","Ocurri\xF3 un error al actualizar el usuario"),console.error("Error en el proceso de actualizaci\xF3n:",s),this.loading=!1})},error:a=>{this.showError("Error","Ocurri\xF3 un error al actualizar el usuario"),console.error("Error al actualizar usuario:",a),this.loading=!1}})}updateUserRoles(t,e){return new Promise((o,a)=>{this.http.get(`${this.apiUrl}/user_roles/user_id/${t}`,{headers:this.getHeaders()}).subscribe({next:s=>{let _=s.map(P=>P.id),w=e.filter(P=>!_.includes(P)),C=_.filter(P=>!e.includes(P)),T=w.length>0?this.assignRolesToUser(t,w):Promise.resolve(),I=C.length>0?this.removeRolesFromUser(t,C):Promise.resolve();Promise.all([T,I]).then(()=>o()).catch(P=>a(P))},error:s=>a(s)})})}updateUserGrafanaRoles(t,e){return new Promise((o,a)=>{this.http.get(`${this.apiUrl}/roles/user_id/${t}`,{headers:this.getHeaders()}).subscribe({next:s=>{let _=s.map(P=>P.id),w=e.filter(P=>!_.includes(P)),C=_.filter(P=>!e.includes(P)),T=w.length>0?this.assignGrafanaRolesToUser(t,w):Promise.resolve(),I=C.length>0?this.removeGrafanaRolesFromUser(t,C):Promise.resolve();Promise.all([T,I]).then(()=>o()).catch(P=>a(P))},error:s=>a(s)})})}removeRolesFromUser(t,e){return new Promise((o,a)=>{let s={roles:e};this.http.request("DELETE",`${this.apiUrl}/user_roles/user_id/${localStorage.getItem("userid")}`,{headers:this.getHeaders(),body:s}).subscribe({next:()=>o(),error:_=>a(_)})})}removeGrafanaRolesFromUser(t,e){return new Promise((o,a)=>{let s={roles:e};this.http.request("DELETE",`${this.apiUrl}/roles/user_id/${localStorage.getItem("userid")}`,{headers:this.getHeaders(),body:s}).subscribe({next:()=>o(),error:_=>a(_)})})}confirmDelete(t){qr.fire({title:"Eliminar usuario",text:"\xBFEst\xE1 seguro de que desea eliminar este usuario? Esta acci\xF3n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#334155",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.deleteUser(t)})}deleteUser(t){this.loading=!0,this.http.delete(`${this.apiUrl}/users/${t}`,{headers:this.getHeaders()}).subscribe({next:()=>{this.showSuccess("Usuario eliminado","El usuario ha sido eliminado correctamente"),this.loadUsers(),this.loading=!1},error:e=>{this.showError("Error","Ocurri\xF3 un error al eliminar el usuario"),console.error("Error al eliminar usuario:",e),this.loading=!1}})}resetFormAndReload(){this.selectedUser=null,this.selectedRoles=[],this.selectedGrafanaRoles=[],this.userForm.reset(),this.userForm.patchValue({enabled:!0}),this.loadUsers()}showSuccess(t,e){qr.fire({icon:"success",title:t,text:e,confirmButtonColor:"#334155"})}showError(t,e){qr.fire({icon:"error",title:t,text:e,confirmButtonColor:"#334155"})}changeTab(t){this.activeTab=t,t==="usuarios"?this.loadUsers():t==="roles"?(this.loadRoles(),this.loadGrafanaRoles()):t==="auditoria"&&this.loadAuditLogs()}viewRoleDetails(t,e=!1){let o=e?this.getUsersWithGrafanaRole(t.id):this.getUsersWithRole(t.id);qr.fire({title:`Detalles del Rol: ${t.name}`,html:`
        <p><strong>Tipo:</strong> ${e?"Grafana":"Sistema"}</p>
        <p><strong>Descripci\xF3n:</strong> ${t.description||"No disponible"}</p>
        <p><strong>Usuarios con este rol (${o.length}):</strong></p>
        <ul>
          ${o.map(a=>`<li>${a.username} (${a.firstName} ${a.lastName})</li>`).join("")}
        </ul>
      `,confirmButtonColor:"#334155"})}static \u0275fac=function(e){return new(e||i)(si(Fs),si(y_))};static \u0275cmp=Ot({type:i,selectors:[["app-user-management"]],decls:24,vars:20,consts:[["noSystemRoles",""],["noGrafanaRoles",""],[1,"container"],["class","loading-overlay",4,"ngIf"],[1,"tabs"],[3,"click"],["class","tab-content",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"loading-overlay"],[1,"spinner"],[1,"tab-content"],[1,"user-form"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","username","placeholder","Ingrese nombre de usuario"],["class","error-message",4,"ngIf"],["type","email","formControlName","email","placeholder","Ingrese correo electr\xF3nico"],["type","text","formControlName","firstName","placeholder","Ingrese nombre"],["type","text","formControlName","lastName","placeholder","Ingrese apellido"],["type","checkbox",3,"checked","disabled"],[1,"form-actions"],["type","submit",3,"disabled"],["type","button",3,"click",4,"ngIf"],["type","button","class","password-btn",3,"click",4,"ngIf"],["type","button","class","roles-btn",3,"click",4,"ngIf"],["type","button","class","grafana-roles-btn",3,"click",4,"ngIf"],[1,"user-list"],[1,"search-bar"],["type","text","placeholder","Buscar usuarios...",3,"ngModelChange","input","ngModel"],[4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"error-message"],[4,"ngIf"],["type","button",3,"click"],["type","button",1,"password-btn",3,"click"],["type","button",1,"roles-btn",3,"click"],["type","button",1,"grafana-roles-btn",3,"click"],[1,"actions"],[1,"edit-btn",3,"click"],[1,"delete-btn",3,"click"],[1,"view-roles-btn",3,"click"],[1,"no-results"],["class","user-badge",4,"ngFor","ngForOf"],[1,"user-badge"],[1,"filters"],[1,"filter-group"],[3,"ngModelChange","change","ngModel"],["value",""],["value","USER"],["value","ROLE"],["value","GRAFANA_ROLE"],["value","CREATE"],["value","UPDATE"],["value","DELETE"],[1,"audit-logs"],[1,"modal-overlay"],[1,"modal"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["type","password","placeholder","Ingrese la nueva contrase\xF1a",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"cancel-btn",3,"click"],[1,"save-btn",3,"click","disabled"],[1,"roles-container"],["class","role-checkbox",4,"ngFor","ngForOf"],[1,"role-checkbox"],["type","checkbox",3,"change","id","value","checked","disabled"],[3,"for"],["class","role-description",4,"ngIf"],[1,"role-description"],[1,"save-btn",3,"click"],[1,"user-detail"],[4,"ngIf","ngIfElse"],[1,"roles-list"],[1,"role-name"],[1,"remove-btn",3,"click"]],template:function(e,o){e&1&&(z(0,"div",2)(1,"h1"),ce(2,"Gesti\xF3n de Usuarios"),U(),Et(3,_V,4,0,"div",3),z(4,"div",4)(5,"button",5),kt("click",function(){return o.changeTab("usuarios")}),ce(6,"Usuarios"),U(),z(7,"button",5),kt("click",function(){return o.changeTab("roles")}),ce(8,"Roles"),U(),z(9,"button",5),kt("click",function(){return o.changeTab("grafana-roles")}),ce(10,"Roles Grafana"),U(),z(11,"button",5),kt("click",function(){return o.changeTab("auditoria")}),ce(12,"Auditor\xEDa"),U(),z(13,"button",5),kt("click",function(){return o.changeTab("subdimensiones")}),ce(14,"Subdimensiones"),U()(),Et(15,bV,2,0,"div",6)(16,kV,57,18,"div",6)(17,LV,18,2,"div",6)(18,VV,18,2,"div",6)(19,qV,47,4,"div",6),U(),Et(20,HV,17,3,"div",7)(21,ZV,16,4,"div",7)(22,iU,12,2,"div",7)(23,sU,16,4,"div",7)),e&2&&(ye(3),st("ngIf",o.loading),ye(2),Ki("active",o.activeTab==="usuarios"),ye(2),Ki("active",o.activeTab==="roles"),ye(2),Ki("active",o.activeTab==="grafana-roles"),ye(2),Ki("active",o.activeTab==="auditoria"),ye(2),Ki("active",o.activeTab==="subdimensiones"),ye(2),st("ngIf",o.activeTab==="subdimensiones"),ye(),st("ngIf",o.activeTab==="usuarios"),ye(),st("ngIf",o.activeTab==="roles"),ye(),st("ngIf",o.activeTab==="grafana-roles"),ye(),st("ngIf",o.activeTab==="auditoria"),ye(),st("ngIf",o.showPasswordModal),ye(),st("ngIf",o.showRolesModal),ye(),st("ngIf",o.showRolesViewModal),ye(),st("ngIf",o.showGrafanaRolesModal))},dependencies:[_n,ba,_s,Yg,x_,v_,Qh,Jh,Pl,pu,kl,g_,gd,Sm,Tl,fu,uc,Tb],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{max-width:1200px;margin-left:20%;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}h1[_ngcontent-%COMP%]{color:#334155;margin-bottom:30px;text-align:center}.tabs[_ngcontent-%COMP%]{display:flex;margin-bottom:20px;border-bottom:1px solid #e2e8f0}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background:none;border:none;cursor:pointer;font-size:16px;color:#64748b;position:relative;transition:all .3s ease}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#334155}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#334155;font-weight:700}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-1px;left:0;width:100%;height:2px;background-color:#334155}.tab-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 10px #0000001a}.user-form[_ngcontent-%COMP%]{margin-bottom:30px;padding:20px;background:#f8fafc;border-radius:8px}.user-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#334155;font-size:20px}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#334155}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:4px;font-size:14px}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus, .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#94a3b8}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-left:10px}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;font-size:12px;color:#64748b;margin-top:5px}.user-form[_ngcontent-%COMP%]   .roles-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}.user-form[_ngcontent-%COMP%]   .role-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;background:#e2e8f0;padding:5px 10px;border-radius:20px}.user-form[_ngcontent-%COMP%]   .role-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:5px}.user-form[_ngcontent-%COMP%]   .role-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;font-weight:400}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:20px}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .3s ease}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#334155;color:#fff}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#1e293b}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#cbd5e1;cursor:not-allowed}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background-color:#e2e8f0;color:#334155}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover{background-color:#cbd5e1}.user-list[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{margin-bottom:20px}.user-list[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:4px;font-size:14px}.user-list[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#94a3b8}.user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;border-bottom:1px solid #e2e8f0}.user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f1f5f9;color:#334155;font-weight:600}.user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.user-list[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{display:inline-block;background-color:#e2e8f0;color:#334155;padding:3px 8px;border-radius:12px;font-size:12px;margin-right:5px;margin-bottom:5px}.user-list[_ngcontent-%COMP%]   .no-roles[_ngcontent-%COMP%]{color:#94a3b8;font-style:italic;font-size:12px}.user-list[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#16a34a;font-weight:500}.user-list[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{color:#dc2626;font-weight:500}.user-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:5px}.user-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;font-size:13px;transition:background-color .3s ease}.user-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.edit-btn[_ngcontent-%COMP%]{background-color:#e0f2fe;color:#0369a1}.user-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.edit-btn[_ngcontent-%COMP%]:hover{background-color:#bae6fd}.user-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.delete-btn[_ngcontent-%COMP%]{background-color:#fee2e2;color:#b91c1c}.user-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.delete-btn[_ngcontent-%COMP%]:hover{background-color:#fecaca}.roles-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.roles-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .roles-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;border-bottom:1px solid #e2e8f0}.roles-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f1f5f9;color:#334155;font-weight:600}.roles-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.roles-list[_ngcontent-%COMP%]   .user-badge[_ngcontent-%COMP%]{display:inline-block;background-color:#e2e8f0;color:#334155;padding:3px 8px;border-radius:12px;font-size:12px;margin-right:5px;margin-bottom:5px}.audit-logs[_ngcontent-%COMP%]{margin-top:20px}.audit-logs[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.audit-logs[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.audit-logs[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#334155}.audit-logs[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #e2e8f0;border-radius:4px;font-size:14px}.audit-logs[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#94a3b8}.audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;border-bottom:1px solid #e2e8f0}.audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f1f5f9;color:#334155;font-weight:600}.audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.no-results[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#64748b;font-style:italic}.filter-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;background-color:#334155;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.filter-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1e293b}.password-btn[_ngcontent-%COMP%]{background-color:#dbeafe!important;color:#1d4ed8!important}.password-btn[_ngcontent-%COMP%]:hover{background-color:#bfdbfe!important}.roles-btn[_ngcontent-%COMP%]{background-color:#e0f2fe!important;color:#0369a1!important}.roles-btn[_ngcontent-%COMP%]:hover{background-color:#bae6fd!important}.grafana-roles-btn[_ngcontent-%COMP%]{background-color:#ecfccb!important;color:#4d7c0f!important}.grafana-roles-btn[_ngcontent-%COMP%]:hover{background-color:#d9f99d!important}.error-message[_ngcontent-%COMP%]{color:#dc2626;font-size:12px;margin-top:5px}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#fffc;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;color:#334155;font-weight:500}.spinner[_ngcontent-%COMP%]{border:4px solid #e2e8f0;border-top:4px solid #334155;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #e2e8f0;border-radius:4px;background-color:#fff;color:#334155;font-size:14px;transition:border-color .3s ease}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#94a3b8}.user-info[_ngcontent-%COMP%]{background-color:#f8fafc;padding:10px;border-radius:4px;margin-bottom:15px;border-left:3px solid #334155}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#334155}.roles-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .user-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.edit-btn):not(.delete-btn){padding:5px 10px;background-color:#e2e8f0;color:#334155;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.roles-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .user-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.edit-btn):not(.delete-btn):hover{background-color:#cbd5e1}.role-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:8px;accent-color:#334155}.user-badge[_ngcontent-%COMP%]{display:inline-block;background-color:#e2e8f0;color:#334155;padding:3px 8px;border-radius:12px;font-size:12px;margin-right:5px;margin-bottom:5px}.audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.audit-logs[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .audit-logs[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;border-bottom:1px solid #e2e8f0}.audit-logs[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f1f5f9;color:#334155;font-weight:600}.audit-logs[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8fafc}@media (max-width: 768px){.container[_ngcontent-%COMP%]{margin-left:0;padding:10px}.tabs[_ngcontent-%COMP%]{flex-wrap:wrap}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1 0 auto;padding:8px 10px;font-size:14px}.filters[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.modal[_ngcontent-%COMP%]{width:95%}.roles-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 30px #0003;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out;color:#1e293b}.modal-header[_ngcontent-%COMP%]{background-color:#334155;color:#fff;padding:1rem;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#fff;cursor:pointer;transition:color .2s ease}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#f87171}.modal-body[_ngcontent-%COMP%]{padding:1rem;max-height:400px;overflow-y:auto}.modal-body[_ngcontent-%COMP%]   .roles-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.modal-body[_ngcontent-%COMP%]   .role-checkbox[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.modal-body[_ngcontent-%COMP%]   .role-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:.5rem}.modal-body[_ngcontent-%COMP%]   .role-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;display:flex;align-items:center;gap:.5rem;cursor:pointer}.modal-body[_ngcontent-%COMP%]   .role-checkbox[_ngcontent-%COMP%]   .role-description[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;padding-left:1.5rem}.modal-body[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{background-color:#f1f5f9;border-radius:8px;padding:.5rem 1rem;margin-bottom:1rem;font-size:.95rem}.modal-body[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0f172a}.modal-body[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc2626;margin-top:1rem;font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:1rem;display:flex;justify-content:flex-end;gap:.75rem;background-color:#f8fafc;border-top:1px solid #e2e8f0}.modal-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:8px;border:none;cursor:pointer;font-weight:600;transition:background-color .2s ease}.modal-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background-color:#e2e8f0;color:#1e293b}.modal-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background-color:#cbd5e1}.modal-footer[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background-color:#334155;color:#fff}.modal-footer[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover{background-color:#1e293b}.modal-footer[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:disabled{background-color:#94a3b8;cursor:not-allowed}@keyframes _ngcontent-%COMP%_fadeIn{0%{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}.audit-tab-wrapper[_ngcontent-%COMP%]{padding:1.5rem;background-color:#f8fafc;border-radius:12px;box-shadow:0 2px 8px #0000000d;color:#1e293b}.audit-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;color:#334155}.audit-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1.5rem;align-items:flex-end}.audit-filters[_ngcontent-%COMP%]   .audit-filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.audit-filters[_ngcontent-%COMP%]   .audit-filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;margin-bottom:.25rem;color:#475569}.audit-filters[_ngcontent-%COMP%]   .audit-filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #cbd5e1;border-radius:6px;background-color:#fff;font-size:.95rem;color:#0f172a}.audit-filters[_ngcontent-%COMP%]   .audit-clear-btn[_ngcontent-%COMP%]{background-color:#e11d48;color:#fff;padding:.55rem 1rem;border:none;border-radius:6px;cursor:pointer;font-weight:600;transition:background-color .2s}.audit-filters[_ngcontent-%COMP%]   .audit-clear-btn[_ngcontent-%COMP%]:hover{background-color:#be123c}.audit-table-container[_ngcontent-%COMP%]{overflow-x:auto}.audit-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;border-radius:10px;overflow:hidden}.audit-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .audit-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;text-align:left;border-bottom:1px solid #e2e8f0}.audit-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#334155;color:#f1f5f9;font-weight:600}.audit-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#1e293b;font-size:.95rem}.audit-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.audit-no-results[_ngcontent-%COMP%]{text-align:center;padding:1rem;font-style:italic;color:#64748b}.tab-content[_ngcontent-%COMP%]{padding:1.5rem;background-color:#f8fafc;border-radius:12px;box-shadow:0 4px 12px #0000000d;color:#1e293b;font-family:Segoe UI,sans-serif}.tab-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#334155;margin-bottom:1rem}.tab-content[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1.5rem}.tab-content[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.tab-content[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.25rem;color:#475569}.tab-content[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;border-radius:8px;border:1px solid #cbd5e1;background-color:#fff;color:#1e293b;font-size:.9rem}.tab-content[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#334155;box-shadow:0 0 0 2px #33415533}.tab-content[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:end;padding:.5rem 1rem;background-color:#334155;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:background-color .3s ease}.tab-content[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1e293b}.tab-content[_ngcontent-%COMP%]   .audit-logs[_ngcontent-%COMP%]{overflow-x:auto}.tab-content[_ngcontent-%COMP%]   .audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 6px #0000000d}.tab-content[_ngcontent-%COMP%]   .audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#e2e8f0}.tab-content[_ngcontent-%COMP%]   .audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.75rem 1rem;text-align:left;font-size:.9rem;color:#334155;font-weight:700}.tab-content[_ngcontent-%COMP%]   .audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f1f5f9}.tab-content[_ngcontent-%COMP%]   .audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f2fe}.tab-content[_ngcontent-%COMP%]   .audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.9rem;color:#475569}.tab-content[_ngcontent-%COMP%]   .audit-logs[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;font-style:italic;color:#94a3b8}']})};var Ib=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Ot({type:i,selectors:[["app-en-construccion"]],decls:10,vars:0,consts:[[1,"construction-container"],[1,"construction-content","animate__animated","animate__bounceIn"],[1,"construction-worker","animate__animated","animate__wobble","animate__infinite"],["routerLink","/inicio",1,"back-button"]],template:function(e,o){e&1&&(z(0,"div",0)(1,"div",1)(2,"h1"),ce(3,"\u{1F6A7} P\xE1gina en construcci\xF3n \u{1F6A7}"),U(),z(4,"p"),ce(5,"Estamos trabajando duro para traerte esta funcionalidad pronto."),U(),z(6,"div",2),ce(7," \u{1F477} "),U(),z(8,"button",3),ce(9," Volver al inicio "),U()()())},dependencies:[_n,qT],styles:['@charset "UTF-8";.construction-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);overflow:hidden}.construction-content[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:#fff;border-radius:10px;box-shadow:0 10px 30px #0000001a;max-width:500px;width:90%;animation:_ngcontent-%COMP%_bounceIn .8s ease-out}h1[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem;font-size:1.8rem}p[_ngcontent-%COMP%]{color:#666;margin-bottom:2rem;font-size:1.1rem}.construction-worker[_ngcontent-%COMP%]{font-size:4rem;margin:1rem 0;animation:_ngcontent-%COMP%_wobble 2s infinite;display:inline-block}.back-button[_ngcontent-%COMP%]{background-color:#4a6baf;color:#fff;border:none;padding:.8rem 1.5rem;border-radius:5px;cursor:pointer;font-size:1rem;transition:all .3s ease;margin-top:1rem}.back-button[_ngcontent-%COMP%]:hover{background-color:#3a5a9f;transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}@keyframes _ngcontent-%COMP%_bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_wobble{0%{transform:rotate(0)}15%{transform:rotate(-5deg)}30%{transform:rotate(3deg)}45%{transform:rotate(-3deg)}60%{transform:rotate(2deg)}75%{transform:rotate(-1deg)}to{transform:rotate(0)}}.construction-content[_ngcontent-%COMP%]:before{content:"\\1f528";position:absolute;font-size:2rem;top:10%;left:10%;animation:_ngcontent-%COMP%_float 6s ease-in-out infinite;opacity:.6}.construction-content[_ngcontent-%COMP%]:after{content:"\\2692\\fe0f";position:absolute;font-size:2rem;bottom:15%;right:10%;animation:_ngcontent-%COMP%_float 8s ease-in-out infinite reverse;opacity:.6}@keyframes _ngcontent-%COMP%_float{0%{transform:translateY(0) rotate(0)}50%{transform:translateY(-20px) rotate(10deg)}to{transform:translateY(0) rotate(0)}}']})};var u3=[{path:"",component:Rm},{path:"login",component:Rm},{path:"",component:K_,children:[{path:"inicio",component:Q_},{path:"menu",component:hp},{path:"ambiente/residuos/camiones/dashboard",component:J_},{path:"ambiente/calidad/ruido/dashboard",component:eb},{path:"reportes",component:tb},{path:"economico/digital/wifi/dashboard",component:ib},{path:"habitat/movilidad/vamosmed/dashboard",component:rb},{path:"habitat/movilidad/dashboard",component:Sb},{path:"perfil/usuarios",component:Mb},{path:"gobernanza/participacion/pqrs/dashboard",component:nb},{path:"whatsapp",component:ob},{path:"calidad/turismo/dashboard",component:sb},{path:"ambiente/calidad/siata/dashboard",component:ab},{path:"ambiente/residuos/camiones/mapa",component:lb},{path:"mapas/reportes",component:cb},{path:"economico/digital/wifi/mapa",component:yb,data:{ssr:!1}},{path:"habitat/movilidad/vamosmed/mapa",component:xb},{path:"ambiente/calidad/ruido/mapa",component:wb},{path:"calidad/turismo/map",component:Cb},{path:"ambiente/calidad/siata/mapa",component:Eb}]},{path:"en-construccion",component:Ib},{path:"**",redirectTo:"en-construccion"}];var aU="@",lU=(()=>{class i{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=Le(nE,{optional:!0});loadingSchedulerFn=Le(cU,{optional:!0});_engine;constructor(e,o,a,s,_){this.doc=e,this.delegate=o,this.zone=a,this.animationType=s,this.moduleImpl=_}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-AGQ3QSY3.mjs").then(a=>a),o;return this.loadingSchedulerFn?o=this.loadingSchedulerFn(e):o=e(),o.catch(a=>{throw new Er(5300,!1)}).then(({\u0275createEngine:a,\u0275AnimationRendererFactory:s})=>{this._engine=a(this.animationType,this.doc);let _=new s(this.delegate,this._engine,this.zone);return this.delegate=_,_})}createRenderer(e,o){let a=this.delegate.createRenderer(e,o);if(a.\u0275type===0)return a;typeof a.throwOnSyntheticProps=="boolean"&&(a.throwOnSyntheticProps=!1);let s=new e2(a);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(_=>{let w=_.createRenderer(e,o);s.use(w),this.scheduler?.notify(11)}).catch(_=>{s.use(a)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(o){Bg()};static \u0275prov=Nt({token:i,factory:i.\u0275fac})}return i})(),e2=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,o,a){this.delegate.insertBefore(t,e,o,a)}removeChild(t,e,o){this.delegate.removeChild(t,e,o)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,o,a){this.delegate.setAttribute(t,e,o,a)}removeAttribute(t,e,o){this.delegate.removeAttribute(t,e,o)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,o,a){this.delegate.setStyle(t,e,o,a)}removeStyle(t,e,o){this.delegate.removeStyle(t,e,o)}setProperty(t,e,o){this.shouldReplay(e)&&this.replay.push(a=>a.setProperty(t,e,o)),this.delegate.setProperty(t,e,o)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,o){return this.shouldReplay(e)&&this.replay.push(a=>a.listen(t,e,o)),this.delegate.listen(t,e,o)}shouldReplay(t){return this.replay!==null&&t.startsWith(aU)}},cU=new Bt("");function d3(i="animations"){return Fg("NgAsyncAnimations"),Ga([{provide:vh,useFactory:(t,e,o)=>new lU(t,e,o,i),deps:[Oi,Ih,tr]},{provide:Fo,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var h3={providers:[$T(u3),d3(),ey()]};var p3=[{path:"**",renderMode:On.Prerender}];var uU={providers:[WS(),tP(p3)]},f3=kE(h3,uU);var dU=()=>mS(o_,f3),hU=dU;export{hU as default,xL as \u0275destroyAngularServerApp,iP as \u0275extractRoutesAndCreateRouteTree,yL as \u0275getOrCreateAngularServerApp};
