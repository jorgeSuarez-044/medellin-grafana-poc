import './polyfills.server.mjs';
import{$ as Oe,$a as gh,$b as fo,$c as qg,A as wg,Aa as Io,Ab as K,Ac as wE,B as Sy,Ba as Yu,Bb as ie,Bc as Ii,C as Ms,Ca as Dy,Cb as Je,Cc as pf,D as jC,Da as QC,Db as Fy,Dc as CE,E as sf,Ea as Tg,Eb as zy,Ec as qy,F as Gl,Fa as Mg,Fb as Dg,Fc as EE,G as Hc,Ga as hh,Gb as Tr,Gc as SE,H as Ty,Ha as JC,Hb as Rg,Hc as TE,I as qC,Ia as cf,Ib as Qt,Ic as Ju,J as My,Ja as ph,Jb as At,Jc as Fg,K as HC,Ka as fh,Kb as Ao,Kc as ME,L as $C,La as eE,Lb as Mr,Lc as Xc,M as Iy,Ma as tE,Mb as us,Mc as vl,N as Cg,Na as iE,Nb as Hr,Nc as zg,O as gl,Oa as rE,Ob as nr,Oc as Bg,P as po,Pa as nE,Pb as or,Pc as Vg,Q as pn,Qa as oE,Qb as dE,Qc as Wo,R as GC,Ra as sE,Rb as hE,Rc as IE,S as Br,Sa as Is,Sb as Wl,Sc as AE,T as xr,Ta as wt,Tb as Se,Tc as kE,U as ua,Ua as uf,Ub as Ci,Uc as Ug,V as Rt,Va as Be,Vb as $r,Vc as jg,W as ki,Wa as wi,Wb as Ku,Wc as PE,X as WC,Xa as Ig,Xb as As,Xc as bh,Y as Ft,Ya as Ag,Yb as ks,Yc as ff,Z as Ay,Za as mh,Zb as Ps,Zc as mf,_ as li,_a as Gc,_b as An,_c as ed,a as Mo,aa as Wu,ab as df,ac as By,ad as yh,b as BC,ba as ky,bb as Wc,bc as $o,bd as DE,c as $l,ca as Va,cb as aE,cc as Og,cd as RE,d as wy,da as ZC,db as lE,dc as _h,e as yg,ea as Ua,eb as cE,ec as Vy,f as Mi,fa as cs,fb as Ry,fc as pE,g as ls,ga as da,gb as Vt,gc as Uy,h as Vc,ha as Ri,hb as Pi,hc as Go,i as ho,ia as Oi,ib as zi,ic as jy,id as OE,j as ti,ja as af,jb as qo,jc as fE,jd as gf,k as Gu,ka as XC,kb as Xn,kc as mE,kd as Hg,l as nf,la as ha,lb as Ot,lc as er,m as VC,ma as In,mb as Zc,mc as Qu,n as gi,na as Zu,nb as Oy,nc as _l,o as dh,oa as YC,ob as Ly,oc as bl,p as Ts,pa as lf,pb as kg,pc as Zl,pd as LE,q as Cy,qa as ar,qb as Ny,qc as qa,qd as $g,r as vg,ra as Xi,rb as Pg,rc as gE,s as of,sa as Xu,sb as pa,sc as Lg,sd as NE,t as xg,ta as KC,tb as Vr,tc as _E,u as UC,ua as cr,ub as yt,uc as bE,v as Uc,va as Py,vb as Ho,vc as yE,w as sn,wa as Eg,wb as lr,wc as vE,x as Ey,xa as $c,xb as hf,xc as xE,xd as FE,y as jc,ya as Sg,yb as uE,yc as yl,z as qc,za as ja,zb as qr,zc as Ng}from"./chunk-SQ3B7OIH.mjs";import{a as ft,b as si,d as Hl,e as BD,f as NC,g as FC,h as vr,i as vy,j as xy,k as rf,l as zC}from"./chunk-S6KH3LOX.mjs";var Ew=BD((ww,Cw)=>{"use strict";(function(r,t){typeof ww=="object"&&typeof Cw<"u"?Cw.exports=t():typeof define=="function"&&define.amd?define(t):(r=typeof globalThis<"u"?globalThis:r||self,r.maplibregl=t())})(ww,function(){"use strict";var r={},t={};function e(a,s,_){if(t[a]=_,a==="index"){var w="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",E={};return t.shared(E),t.index(r,E),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([w],{type:"text/javascript"}))),r}}e("shared",["exports"],function(a){"use strict";function s(u,n,c,d){return new(c||(c=Promise))(function(f,b){function y(k){try{S(d.next(k))}catch(D){b(D)}}function x(k){try{S(d.throw(k))}catch(D){b(D)}}function S(k){var D;k.done?f(k.value):(D=k.value,D instanceof c?D:new c(function(L){L(D)})).then(y,x)}S((d=d.apply(u,n||[])).next())})}function _(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var w,E;function M(){if(E)return w;function u(n,c){this.x=n,this.y=c}return E=1,w=u,u.prototype={clone:function(){return new u(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,c){return this.clone()._rotateAround(n,c)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var c=n.x-this.x,d=n.y-this.y;return c*c+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,c){return Math.atan2(this.x*c-this.y*n,this.x*n+this.y*c)},_matMult:function(n){var c=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=c,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var c=Math.cos(n),d=Math.sin(n),f=d*this.x+c*this.y;return this.x=c*this.x-d*this.y,this.y=f,this},_rotateAround:function(n,c){var d=Math.cos(n),f=Math.sin(n),b=c.y+f*(this.x-c.x)+d*(this.y-c.y);return this.x=c.x+d*(this.x-c.x)-f*(this.y-c.y),this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(n){return n instanceof u?n:Array.isArray(n)?new u(n[0],n[1]):n},w}typeof SuppressedError=="function"&&SuppressedError;var I,A,R=_(M()),$=function(){if(A)return I;function u(n,c,d,f){this.cx=3*n,this.bx=3*(d-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(f-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=c,this.p2x=d,this.p2y=f}return A=1,I=u,u.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,c){if(c===void 0&&(c=1e-6),n<0)return 0;if(n>1)return 1;for(var d=n,f=0;f<8;f++){var b=this.sampleCurveX(d)-n;if(Math.abs(b)<c)return d;var y=this.sampleCurveDerivativeX(d);if(Math.abs(y)<1e-6)break;d-=b/y}var x=0,S=1;for(d=n,f=0;f<20&&(b=this.sampleCurveX(d),!(Math.abs(b-n)<c));f++)n>b?x=d:S=d,d=.5*(S-x)+x;return d},solve:function(n,c){return this.sampleCurveY(this.solveCurveX(n,c))}},I}(),W=_($);let G,pe;function le(){return G==null&&(G=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),G}function ne(){if(pe==null&&(pe=!1,le())){let n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let d=0;d<5*5;d++){let f=4*d;n.fillStyle=`rgb(${f},${f+1},${f+2})`,n.fillRect(d%5,Math.floor(d/5),1,1)}let c=n.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&c[d]!==d){pe=!0;break}}}return pe||!1}var re=1e-6,ue=typeof Float32Array<"u"?Float32Array:Array;function oe(){var u=new ue(9);return ue!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function Ve(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function tt(){var u=new ue(3);return ue!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function ct(u){return Math.hypot(u[0],u[1],u[2])}function Qe(u,n,c){var d=new ue(3);return d[0]=u,d[1]=n,d[2]=c,d}Math.hypot||(Math.hypot=function(){for(var u=0,n=arguments.length;n--;)u+=arguments[n]*arguments[n];return Math.sqrt(u)});var ve,Ge=ct;function bt(u,n,c){var d=n[0],f=n[1],b=n[2],y=n[3];return u[0]=c[0]*d+c[4]*f+c[8]*b+c[12]*y,u[1]=c[1]*d+c[5]*f+c[9]*b+c[13]*y,u[2]=c[2]*d+c[6]*f+c[10]*b+c[14]*y,u[3]=c[3]*d+c[7]*f+c[11]*b+c[15]*y,u}function ae(){var u=new ue(4);return ue!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function ee(){var u=new ue(2);return ue!=Float32Array&&(u[0]=0,u[1]=0),u}function B(u,n){var c=new ue(2);return c[0]=u,c[1]=n,c}tt(),ve=new ue(4),ue!=Float32Array&&(ve[0]=0,ve[1]=0,ve[2]=0,ve[3]=0),tt(),Qe(1,0,0),Qe(0,1,0),ae(),ae(),oe(),ee();let fe=8192;function Ue(u,n,c){return n*(fe/(u.tileSize*Math.pow(2,c-u.tileID.overscaledZ)))}function ot(u,n){return(u%n+n)%n}function Pt(u,n,c){return u*(1-c)+n*c}function Bt(u){if(u<=0)return 0;if(u>=1)return 1;let n=u*u,c=n*u;return 4*(u<.5?c:3*(u-n)+c-.75)}function Di(u,n,c,d){let f=new W(u,n,c,d);return b=>f.solve(b)}let Ie=Di(.25,.1,.25,1);function Le(u,n,c){return Math.min(c,Math.max(n,u))}function kt(u,n,c){let d=c-n,f=((u-n)%d+d)%d+n;return f===n?c:f}function ai(u,...n){for(let c of n)for(let d in c)u[d]=c[d];return u}let Ur=1;function Ro(u,n,c){let d={};for(let f in u)d[f]=n.call(this,u[f],f,u);return d}function ba(u,n,c){let d={};for(let f in u)n.call(this,u[f],f,u)&&(d[f]=u[f]);return d}function Pn(u){return Array.isArray(u)?u.map(Pn):typeof u=="object"&&u?Ro(u,Pn):u}let Dn={};function Ar(u){Dn[u]||(typeof console<"u"&&console.warn(u),Dn[u]=!0)}function Ki(u,n,c){return(c.y-u.y)*(n.x-u.x)>(n.y-u.y)*(c.x-u.x)}function Jn(u){return typeof WorkerGlobalScope<"u"&&u!==void 0&&u instanceof WorkerGlobalScope}let Vs=null;function eo(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}let Tl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ya(u,n,c,d,f){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");let b=new VideoFrame(u,{timestamp:0});try{let y=b?.format;if(!y||!y.startsWith("BGR")&&!y.startsWith("RGB"))throw new Error(`Unrecognized format ${y}`);let x=y.startsWith("BGR"),S=new Uint8ClampedArray(d*f*4);if(yield b.copyTo(S,function(k,D,L,V,H){let Z=4*Math.max(1,0),te=(Math.max(0,L)-L)*V*4+Z,de=4*V,be=Math.max(0,D),Re=Math.max(0,L);return{rect:{x:be,y:Re,width:Math.min(k.width,D+V)-be,height:Math.min(k.height,L+H)-Re},layout:[{offset:te,stride:de}]}}(u,n,c,d,f)),x)for(let k=0;k<S.length;k+=4){let D=S[k];S[k]=S[k+2],S[k+2]=D}return S}finally{b.close()}})}let qn,to;function ps(u,n,c,d){return u.addEventListener(n,c,d),{unsubscribe:()=>{u.removeEventListener(n,c,d)}}}function ya(u){return u*Math.PI/180}function Rn(u){return u/Math.PI*180}let fs={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Nr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ka="AbortError";function Li(){return new Error(Ka)}let Yo={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ms(u){return Yo.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}let Qa="global-dispatcher";class io extends Error{constructor(n,c,d,f){super(`AJAXError: ${c} (${n}): ${d}`),this.status=n,this.statusText=c,this.url=d,this.body=f}}let On=()=>Jn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,yo=function(u,n){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){let d=ms(u.url);if(d)return d(u,n);if(Jn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:Qa},n)}if(!(/^file:/.test(c=u.url)||/^file:/.test(On())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,f){return s(this,void 0,void 0,function*(){let b=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:On(),signal:f.signal}),y,x;d.type!=="json"||b.headers.has("Accept")||b.headers.set("Accept","application/json");try{y=yield fetch(b)}catch(k){throw new io(0,k.message,d.url,new Blob)}if(!y.ok){let k=yield y.blob();throw new io(y.status,y.statusText,d.url,k)}x=d.type==="arrayBuffer"||d.type==="image"?y.arrayBuffer():d.type==="json"?y.json():y.text();let S=yield x;if(f.signal.aborted)throw Li();return{data:S,cacheControl:y.headers.get("Cache-Control"),expires:y.headers.get("Expires")}})}(u,n);if(Jn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:Qa},n)}var c;return function(d,f){return new Promise((b,y)=>{var x;let S=new XMLHttpRequest;S.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(S.responseType="arraybuffer");for(let k in d.headers)S.setRequestHeader(k,d.headers[k]);d.type==="json"&&(S.responseType="text",!((x=d.headers)===null||x===void 0)&&x.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=d.credentials==="include",S.onerror=()=>{y(new Error(S.statusText))},S.onload=()=>{if(!f.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let k=S.response;if(d.type==="json")try{k=JSON.parse(S.response)}catch(D){return void y(D)}b({data:k,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{let k=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});y(new io(S.status,S.statusText,d.url,k))}},f.signal.addEventListener("abort",()=>{S.abort(),y(Li())}),S.send(d.body)})}(u,n)};function qe(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;let n=new URL(u),c=window.location;return n.protocol===c.protocol&&n.host===c.host}function Q(u,n,c){c[u]&&c[u].indexOf(n)!==-1||(c[u]=c[u]||[],c[u].push(n))}function U(u,n,c){if(c&&c[u]){let d=c[u].indexOf(n);d!==-1&&c[u].splice(d,1)}}class Y{constructor(n,c={}){ai(this,c),this.type=n}}class he extends Y{constructor(n,c={}){super("error",ai({error:n},c))}}class ye{on(n,c){return this._listeners=this._listeners||{},Q(n,c,this._listeners),{unsubscribe:()=>{this.off(n,c)}}}off(n,c){return U(n,c,this._listeners),U(n,c,this._oneTimeListeners),this}once(n,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},Q(n,c,this._oneTimeListeners),this):new Promise(d=>this.once(n,d))}fire(n,c){typeof n=="string"&&(n=new Y(n,c||{}));let d=n.type;if(this.listens(d)){n.target=this;let f=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(let x of f)x.call(this,n);let b=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(let x of b)U(d,x,this._oneTimeListeners),x.call(this,n);let y=this._eventedParent;y&&(ai(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(n))}else n instanceof he&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,c){return this._eventedParent=n,this._eventedParentData=c,this}}var se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Pe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ze(u,n){let c={};for(let d in u)d!=="ref"&&(c[d]=u[d]);return Pe.forEach(d=>{d in n&&(c[d]=n[d])}),c}function He(u,n){if(Array.isArray(u)){if(!Array.isArray(n)||u.length!==n.length)return!1;for(let c=0;c<u.length;c++)if(!He(u[c],n[c]))return!1;return!0}if(typeof u=="object"&&u!==null&&n!==null){if(typeof n!="object"||Object.keys(u).length!==Object.keys(n).length)return!1;for(let c in u)if(!He(u[c],n[c]))return!1;return!0}return u===n}function Xe(u,n){u.push(n)}function je(u,n,c){Xe(c,{command:"addSource",args:[u,n[u]]})}function dt(u,n,c){Xe(n,{command:"removeSource",args:[u]}),c[u]=!0}function Ct(u,n,c,d){dt(u,c,d),je(u,n,c)}function Tt(u,n,c){let d;for(d in u[c])if(Object.prototype.hasOwnProperty.call(u[c],d)&&d!=="data"&&!He(u[c][d],n[c][d]))return!1;for(d in n[c])if(Object.prototype.hasOwnProperty.call(n[c],d)&&d!=="data"&&!He(u[c][d],n[c][d]))return!1;return!0}function Ae(u,n,c,d,f,b){u=u||{},n=n||{};for(let y in u)Object.prototype.hasOwnProperty.call(u,y)&&(He(u[y],n[y])||c.push({command:b,args:[d,y,n[y],f]}));for(let y in n)Object.prototype.hasOwnProperty.call(n,y)&&!Object.prototype.hasOwnProperty.call(u,y)&&(He(u[y],n[y])||c.push({command:b,args:[d,y,n[y],f]}))}function ni(u){return u.id}function Lt(u,n){return u[n.id]=n,u}class $e{constructor(n,c,d,f){this.message=(n?`${n}: `:"")+d,f&&(this.identifier=f),c!=null&&c.__line__&&(this.line=c.__line__)}}function $i(u,...n){for(let c of n)for(let d in c)u[d]=c[d];return u}class Ut extends Error{constructor(n,c){super(c),this.message=c,this.key=n}}class hi{constructor(n,c=[]){this.parent=n,this.bindings={};for(let[d,f]of c)this.bindings[d]=f}concat(n){return new hi(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}let jt={kind:"null"},nt={kind:"number"},Gt={kind:"string"},oi={kind:"boolean"},tr={kind:"color"},Wi={kind:"projectionDefinition"},an={kind:"object"},it={kind:"value"},Hn={kind:"collator"},ro={kind:"formatted"},Ne={kind:"padding"},yi={kind:"colorArray"},Ln={kind:"numberArray"},Ko={kind:"resolvedImage"},sr={kind:"variableAnchorOffsetCollection"};function _n(u,n){return{kind:"array",itemType:u,N:n}}function pi(u){if(u.kind==="array"){let n=pi(u.itemType);return typeof u.N=="number"?`array<${n}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${n}>`}return u.kind}let va=[jt,nt,Gt,oi,tr,Wi,ro,an,_n(it),Ne,Ln,yi,Ko,sr];function gs(u,n){if(n.kind==="error")return null;if(u.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!gs(u.itemType,n.itemType))&&(typeof u.N!="number"||u.N===n.N))return null}else{if(u.kind===n.kind)return null;if(u.kind==="value"){for(let c of va)if(!gs(c,n))return null}}return`Expected ${pi(u)} but found ${pi(n)} instead.`}function Ml(u,n){return n.some(c=>c.kind===u.kind)}function It(u,n){return n.some(c=>c==="null"?u===null:c==="array"?Array.isArray(u):c==="object"?u&&!Array.isArray(u)&&typeof u=="object":c===typeof u)}function bn(u,n){return u.kind==="array"&&n.kind==="array"?u.itemType.kind===n.itemType.kind&&typeof u.N=="number":u.kind===n.kind}let Us=.96422,Ja=.82521,Zi=4/29,xa=6/29,el=3*xa*xa,Cd=xa*xa*xa,js=Math.PI/180,ap=180/Math.PI;function Ed(u){return(u%=360)<0&&(u+=360),u}function wa([u,n,c,d]){let f,b,y=Il((.2225045*(u=Nn(u))+.7168786*(n=Nn(n))+.0606169*(c=Nn(c)))/1);u===n&&n===c?f=b=y:(f=Il((.4360747*u+.3850649*n+.1430804*c)/Us),b=Il((.0139322*u+.0971045*n+.7141733*c)/Ja));let x=116*y-16;return[x<0?0:x,500*(f-y),200*(y-b),d]}function Nn(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Il(u){return u>Cd?Math.pow(u,1/3):u/el+Zi}function lc([u,n,c,d]){let f=(u+16)/116,b=isNaN(n)?f:f+n/500,y=isNaN(c)?f:f-c/200;return f=1*Hs(f),b=Us*Hs(b),y=Ja*Hs(y),[qs(3.1338561*b-1.6168667*f-.4906146*y),qs(-.9787684*b+1.9161415*f+.033454*y),qs(.0719453*b-.2289914*f+1.4052427*y),d]}function qs(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function Hs(u){return u>xa?u*u*u:el*(u-Zi)}let cc=Object.hasOwn||function(u,n){return Object.prototype.hasOwnProperty.call(u,n)};function vo(u,n){return cc(u,n)?u[n]:void 0}function Gi(u){return parseInt(u.padEnd(2,u),16)/255}function mu(u,n){return pr(n?u/100:u,0,1)}function pr(u,n,c){return Math.min(Math.max(n,u),c)}function Ei(u){return!u.some(Number.isNaN)}let Qo={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Wr(u,n,c){return u+c*(n-u)}function Ca(u,n,c){return u.map((d,f)=>Wr(d,n[f],c))}class fi{constructor(n,c,d,f=1,b=!0){this.r=n,this.g=c,this.b=d,this.a=f,b||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[n,c,d,f]))}static parse(n){if(n instanceof fi)return n;if(typeof n!="string")return;let c=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];let f=vo(Qo,d);if(f){let[y,x,S]=f;return[y/255,x/255,S/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){let y=d.length<6?1:2,x=1;return[Gi(d.slice(x,x+=y)),Gi(d.slice(x,x+=y)),Gi(d.slice(x,x+=y)),Gi(d.slice(x,x+y)||"ff")]}if(d.startsWith("rgb")){let y=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){let[x,S,k,D,L,V,H,Z,te,de,be,Re]=y,we=[D||" ",H||" ",de].join("");if(we==="  "||we==="  /"||we===",,"||we===",,,"){let q=[k,V,te].join(""),ce=q==="%%%"?100:q===""?255:0;if(ce){let Ee=[pr(+S/ce,0,1),pr(+L/ce,0,1),pr(+Z/ce,0,1),be?mu(+be,Re):1];if(Ei(Ee))return Ee}}return}}let b=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){let[y,x,S,k,D,L,V,H,Z]=b,te=[S||" ",D||" ",V].join("");if(te==="  "||te==="  /"||te===",,"||te===",,,"){let de=[+x,pr(+k,0,100),pr(+L,0,100),H?mu(+H,Z):1];if(Ei(de))return function([be,Re,we,q]){function ce(Ee){let Ze=(Ee+be/30)%12,mt=Re*Math.min(we,1-we);return we-mt*Math.max(-1,Math.min(Ze-3,9-Ze,1))}return be=Ed(be),Re/=100,we/=100,[ce(0),ce(8),ce(4),q]}(de)}}}(n);return c?new fi(...c,!1):void 0}get rgb(){let{r:n,g:c,b:d,a:f}=this,b=f||1/0;return this.overwriteGetter("rgb",[n/b,c/b,d/b,f])}get hcl(){return this.overwriteGetter("hcl",function(n){let[c,d,f,b]=wa(n),y=Math.sqrt(d*d+f*f);return[Math.round(1e4*y)?Ed(Math.atan2(f,d)*ap):NaN,y,c,b]}(this.rgb))}get lab(){return this.overwriteGetter("lab",wa(this.rgb))}overwriteGetter(n,c){return Object.defineProperty(this,n,{value:c}),c}toString(){let[n,c,d,f]=this.rgb;return`rgba(${[n,c,d].map(b=>Math.round(255*b)).join(",")},${f})`}static interpolate(n,c,d,f="rgb"){switch(f){case"rgb":{let[b,y,x,S]=Ca(n.rgb,c.rgb,d);return new fi(b,y,x,S,!1)}case"hcl":{let[b,y,x,S]=n.hcl,[k,D,L,V]=c.hcl,H,Z;if(isNaN(b)||isNaN(k))isNaN(b)?isNaN(k)?H=NaN:(H=k,x!==1&&x!==0||(Z=D)):(H=b,L!==1&&L!==0||(Z=y));else{let we=k-b;k>b&&we>180?we-=360:k<b&&b-k>180&&(we+=360),H=b+d*we}let[te,de,be,Re]=function([we,q,ce,Ee]){return we=isNaN(we)?0:we*js,lc([ce,Math.cos(we)*q,Math.sin(we)*q,Ee])}([H,Z??Wr(y,D,d),Wr(x,L,d),Wr(S,V,d)]);return new fi(te,de,be,Re,!1)}case"lab":{let[b,y,x,S]=lc(Ca(n.lab,c.lab,d));return new fi(b,y,x,S,!1)}}}}fi.black=new fi(0,0,0,1),fi.white=new fi(1,1,1,1),fi.transparent=new fi(0,0,0,0),fi.red=new fi(1,0,0,1);class Al{constructor(n,c,d){this.sensitivity=n?c?"variant":"case":c?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,c){return this.collator.compare(n,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let kl=["bottom","center","top"];class ji{constructor(n,c,d,f,b,y){this.text=n,this.image=c,this.scale=d,this.fontStack=f,this.textColor=b,this.verticalAlign=y}}class ii{constructor(n){this.sections=n}static fromString(n){return new ii([new ji(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof ii?n:ii.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Bi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Bi)return n;if(typeof n=="number")return new Bi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(let c of n)if(typeof c!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Bi(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,c,d){return new Bi(Ca(n.values,c.values,d))}}class ir{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ir)return n;if(typeof n=="number")return new ir([n]);if(Array.isArray(n)){for(let c of n)if(typeof c!="number")return;return new ir(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,c,d){return new ir(Ca(n.values,c.values,d))}}class fr{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof fr)return n;if(typeof n=="string"){let d=fi.parse(n);return d?new fr([d]):void 0}if(!Array.isArray(n))return;let c=[];for(let d of n){if(typeof d!="string")return;let f=fi.parse(d);if(!f)return;c.push(f)}return new fr(c)}toString(){return JSON.stringify(this.values)}static interpolate(n,c,d,f="rgb"){let b=[];if(n.values.length!=c.values.length)throw new Error(`colorArray: Arrays have mismatched length (${n.values.length} vs. ${c.values.length}), cannot interpolate.`);for(let y=0;y<n.values.length;y++)b.push(fi.interpolate(n.values[y],c.values[y],d,f));return new fr(b)}}class rr extends Error{constructor(n){super(n),this.name="RuntimeError"}toJSON(){return this.message}}let no=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Zt{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Zt)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let c=0;c<n.length;c+=2){let d=n[c],f=n[c+1];if(typeof d!="string"||!no.has(d)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Zt(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,c,d){let f=n.values,b=c.values;if(f.length!==b.length)throw new rr(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${c.toString()}`);let y=[];for(let x=0;x<f.length;x+=2){if(f[x]!==b[x])throw new rr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${f[x]}, to[${x}]: ${b[x]}`);y.push(f[x]);let[S,k]=f[x+1],[D,L]=b[x+1];y.push([Wr(S,D,d),Wr(k,L,d)])}return new Zt(y)}}class yn{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new yn({name:n,available:!1}):null}}class vn{constructor(n,c,d){this.from=n,this.to=c,this.transition=d}static interpolate(n,c,d){return new vn(n,c,d)}static parse(n){return n instanceof vn?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new vn(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new vn(n.from,n.to,n.transition):typeof n=="string"?new vn(n,n,1):void 0}}function tl(u,n,c,d){return typeof u=="number"&&u>=0&&u<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof c=="number"&&c>=0&&c<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[u,n,c,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[u,n,c,d]:[u,n,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Yi(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof vn||u instanceof fi||u instanceof Al||u instanceof ii||u instanceof Bi||u instanceof ir||u instanceof fr||u instanceof Zt||u instanceof yn)return!0;if(Array.isArray(u)){for(let n of u)if(!Yi(n))return!1;return!0}if(typeof u=="object"){for(let n in u)if(!Yi(u[n]))return!1;return!0}return!1}function dr(u){if(u===null)return jt;if(typeof u=="string")return Gt;if(typeof u=="boolean")return oi;if(typeof u=="number")return nt;if(u instanceof fi)return tr;if(u instanceof vn)return Wi;if(u instanceof Al)return Hn;if(u instanceof ii)return ro;if(u instanceof Bi)return Ne;if(u instanceof ir)return Ln;if(u instanceof fr)return yi;if(u instanceof Zt)return sr;if(u instanceof yn)return Ko;if(Array.isArray(u)){let n=u.length,c;for(let d of u){let f=dr(d);if(c){if(c===f)continue;c=it;break}c=f}return _n(c||it,n)}return an}function Si(u){let n=typeof u;return u===null?"":n==="string"||n==="number"||n==="boolean"?String(u):u instanceof fi||u instanceof vn||u instanceof ii||u instanceof Bi||u instanceof ir||u instanceof fr||u instanceof Zt||u instanceof yn?u.toString():JSON.stringify(u)}class ui{constructor(n,c){this.type=n,this.value=c}static parse(n,c){if(n.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Yi(n[1]))return c.error("invalid value");let d=n[1],f=dr(d),b=c.expectedType;return f.kind!=="array"||f.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(f=b),new ui(f,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let $s={string:Gt,number:nt,boolean:oi,object:an};class Yt{constructor(n,c){this.type=n,this.args=c}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");let d,f=1,b=n[0];if(b==="array"){let x,S;if(n.length>2){let k=n[1];if(typeof k!="string"||!(k in $s)||k==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);x=$s[k],f++}else x=it;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return c.error('The length argument to "array" must be a positive integer literal',2);S=n[2],f++}d=_n(x,S)}else{if(!$s[b])throw new Error(`Types doesn't contain name = ${b}`);d=$s[b]}let y=[];for(;f<n.length;f++){let x=c.parse(n[f],f,it);if(!x)return null;y.push(x)}return new Yt(d,y)}evaluate(n){for(let c=0;c<this.args.length;c++){let d=this.args[c].evaluate(n);if(!gs(this.type,dr(d)))return d;if(c===this.args.length-1)throw new rr(`Expected value to be of type ${pi(this.type)}, but found ${pi(dr(d))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}let Ea={"to-boolean":oi,"to-color":tr,"to-number":nt,"to-string":Gt};class xn{constructor(n,c){this.type=n,this.args=c}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");let d=n[0];if(!Ea[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&n.length!==2)return c.error("Expected one argument.");let f=Ea[d],b=[];for(let y=1;y<n.length;y++){let x=c.parse(n[y],y,it);if(!x)return null;b.push(x)}return new xn(f,b)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let c,d;for(let f of this.args){if(c=f.evaluate(n),d=null,c instanceof fi)return c;if(typeof c=="string"){let b=n.parseColor(c);if(b)return b}else if(Array.isArray(c)&&(d=c.length<3||c.length>4?`Invalid rgba value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:tl(c[0],c[1],c[2],c[3]),!d))return new fi(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new rr(d||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(let d of this.args){c=d.evaluate(n);let f=Bi.parse(c);if(f)return f}throw new rr(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"numberArray":{let c;for(let d of this.args){c=d.evaluate(n);let f=ir.parse(c);if(f)return f}throw new rr(`Could not parse numberArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"colorArray":{let c;for(let d of this.args){c=d.evaluate(n);let f=fr.parse(c);if(f)return f}throw new rr(`Could not parse colorArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(let d of this.args){c=d.evaluate(n);let f=Zt.parse(c);if(f)return f}throw new rr(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(let d of this.args){if(c=d.evaluate(n),c===null)return 0;let f=Number(c);if(!isNaN(f))return f}throw new rr(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return ii.fromString(Si(this.args[0].evaluate(n)));case"resolvedImage":return yn.fromString(Si(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return Si(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}let gu=["Unknown","Point","LineString","Polygon"];class _s{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?gu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let c=this._parseColorCache.get(n);return c||(c=fi.parse(n),this._parseColorCache.set(n,c)),c}}class Wt{constructor(n,c,d=[],f,b=new hi,y=[]){this.registry=n,this.path=d,this.key=d.map(x=>`[${x}]`).join(""),this.scope=b,this.errors=y,this.expectedType=f,this._isConstant=c}parse(n,c,d,f,b={}){return c?this.concat(c,d,f)._parse(n,b):this._parse(n,b)}_parse(n,c){function d(f,b,y){return y==="assert"?new Yt(b,[f]):y==="coerce"?new xn(b,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let b=this.registry[f];if(b){let y=b.parse(n,this);if(!y)return null;if(this.expectedType){let x=this.expectedType,S=y.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value"){if(x.kind==="projectionDefinition"&&["string","array"].includes(S.kind)||["color","formatted","resolvedImage"].includes(x.kind)&&["value","string"].includes(S.kind)||["padding","numberArray"].includes(x.kind)&&["value","number","array"].includes(S.kind)||x.kind==="colorArray"&&["value","string","array"].includes(S.kind)||x.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(S.kind))y=d(y,x,c.typeAnnotation||"coerce");else if(this.checkSubtype(x,S))return null}else y=d(y,x,c.typeAnnotation||"assert")}if(!(y instanceof ui)&&y.type.kind!=="resolvedImage"&&this._isConstant(y)){let x=new _s;try{y=new ui(y.type,y.evaluate(x))}catch(S){return this.error(S.message),null}}return y}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,c,d){let f=typeof n=="number"?this.path.concat(n):this.path,b=d?this.scope.concat(d):this.scope;return new Wt(this.registry,this._isConstant,f,c||null,b,this.errors)}error(n,...c){let d=`${this.key}${c.map(f=>`[${f}]`).join("")}`;this.errors.push(new Ut(d,n))}checkSubtype(n,c){let d=gs(n,c);return d&&this.error(d),d}}class vi{constructor(n,c){this.type=c.type,this.bindings=[].concat(n),this.result=c}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(let c of this.bindings)n(c[1]);n(this.result)}static parse(n,c){if(n.length<4)return c.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);let d=[];for(let b=1;b<n.length-1;b+=2){let y=n[b];if(typeof y!="string")return c.error(`Expected string, but found ${typeof y} instead.`,b);if(/[^a-zA-Z0-9_]/.test(y))return c.error("Variable names must contain only alphanumeric characters or '_'.",b);let x=c.parse(n[b+1],b+1);if(!x)return null;d.push([y,x])}let f=c.parse(n[n.length-1],n.length-1,c.expectedType,d);return f?new vi(d,f):null}outputDefined(){return this.result.outputDefined()}}class xo{constructor(n,c){this.type=c.type,this.name=n,this.boundExpression=c}static parse(n,c){if(n.length!==2||typeof n[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");let d=n[1];return c.scope.has(d)?new xo(d,c.scope.get(d)):c.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Sa{constructor(n,c,d){this.type=n,this.index=c,this.input=d}static parse(n,c){if(n.length!==3)return c.error(`Expected 2 arguments, but found ${n.length-1} instead.`);let d=c.parse(n[1],1,nt),f=c.parse(n[2],2,_n(c.expectedType||it));return d&&f?new Sa(f.type.itemType,d,f):null}evaluate(n){let c=this.index.evaluate(n),d=this.input.evaluate(n);if(c<0)throw new rr(`Array index out of bounds: ${c} < 0.`);if(c>=d.length)throw new rr(`Array index out of bounds: ${c} > ${d.length-1}.`);if(c!==Math.floor(c))throw new rr(`Array index must be an integer, but found ${c} instead.`);return d[c]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Oo{constructor(n,c){this.type=oi,this.needle=n,this.haystack=c}static parse(n,c){if(n.length!==3)return c.error(`Expected 2 arguments, but found ${n.length-1} instead.`);let d=c.parse(n[1],1,it),f=c.parse(n[2],2,it);return d&&f?Ml(d.type,[oi,Gt,nt,jt,it])?new Oo(d,f):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${pi(d.type)} instead`):null}evaluate(n){let c=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!d)return!1;if(!It(c,["boolean","string","number","null"]))throw new rr(`Expected first argument to be of type boolean, string, number or null, but found ${pi(dr(c))} instead.`);if(!It(d,["string","array"]))throw new rr(`Expected second argument to be of type array or string, but found ${pi(dr(d))} instead.`);return d.indexOf(c)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Ta{constructor(n,c,d){this.type=nt,this.needle=n,this.haystack=c,this.fromIndex=d}static parse(n,c){if(n.length<=2||n.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);let d=c.parse(n[1],1,it),f=c.parse(n[2],2,it);if(!d||!f)return null;if(!Ml(d.type,[oi,Gt,nt,jt,it]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${pi(d.type)} instead`);if(n.length===4){let b=c.parse(n[3],3,nt);return b?new Ta(d,f,b):null}return new Ta(d,f)}evaluate(n){let c=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!It(c,["boolean","string","number","null"]))throw new rr(`Expected first argument to be of type boolean, string, number or null, but found ${pi(dr(c))} instead.`);let f;if(this.fromIndex&&(f=this.fromIndex.evaluate(n)),It(d,["string"])){let b=d.indexOf(c,f);return b===-1?-1:[...d.slice(0,b)].length}if(It(d,["array"]))return d.indexOf(c,f);throw new rr(`Expected second argument to be of type array or string, but found ${pi(dr(d))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Ma{constructor(n,c,d,f,b,y){this.inputType=n,this.type=c,this.input=d,this.cases=f,this.outputs=b,this.otherwise=y}static parse(n,c){if(n.length<5)return c.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return c.error("Expected an even number of arguments.");let d,f;c.expectedType&&c.expectedType.kind!=="value"&&(f=c.expectedType);let b={},y=[];for(let k=2;k<n.length-1;k+=2){let D=n[k],L=n[k+1];Array.isArray(D)||(D=[D]);let V=c.concat(k);if(D.length===0)return V.error("Expected at least one branch label.");for(let Z of D){if(typeof Z!="number"&&typeof Z!="string")return V.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return V.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Z=="number"&&Math.floor(Z)!==Z)return V.error("Numeric branch labels must be integer values.");if(d){if(V.checkSubtype(d,dr(Z)))return null}else d=dr(Z);if(b[String(Z)]!==void 0)return V.error("Branch labels must be unique.");b[String(Z)]=y.length}let H=c.parse(L,k,f);if(!H)return null;f=f||H.type,y.push(H)}let x=c.parse(n[1],1,it);if(!x)return null;let S=c.parse(n[n.length-1],n.length-1,f);return S?x.type.kind!=="value"&&c.concat(1).checkSubtype(d,x.type)?null:new Ma(d,f,x,b,y,S):null}evaluate(n){let c=this.input.evaluate(n);return(dr(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Jr{constructor(n,c,d){this.type=n,this.branches=c,this.otherwise=d}static parse(n,c){if(n.length<4)return c.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return c.error("Expected an odd number of arguments.");let d;c.expectedType&&c.expectedType.kind!=="value"&&(d=c.expectedType);let f=[];for(let y=1;y<n.length-1;y+=2){let x=c.parse(n[y],y,oi);if(!x)return null;let S=c.parse(n[y+1],y+1,d);if(!S)return null;f.push([x,S]),d=d||S.type}let b=c.parse(n[n.length-1],n.length-1,d);if(!b)return null;if(!d)throw new Error("Can't infer output type");return new Jr(d,f,b)}evaluate(n){for(let[c,d]of this.branches)if(c.evaluate(n))return d.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(let[c,d]of this.branches)n(c),n(d);n(this.otherwise)}outputDefined(){return this.branches.every(([n,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class Gs{constructor(n,c,d,f){this.type=n,this.input=c,this.beginIndex=d,this.endIndex=f}static parse(n,c){if(n.length<=2||n.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);let d=c.parse(n[1],1,it),f=c.parse(n[2],2,nt);if(!d||!f)return null;if(!Ml(d.type,[_n(it),Gt,it]))return c.error(`Expected first argument to be of type array or string, but found ${pi(d.type)} instead`);if(n.length===4){let b=c.parse(n[3],3,nt);return b?new Gs(d.type,d,f,b):null}return new Gs(d.type,d,f)}evaluate(n){let c=this.input.evaluate(n),d=this.beginIndex.evaluate(n),f;if(this.endIndex&&(f=this.endIndex.evaluate(n)),It(c,["string"]))return[...c].slice(d,f).join("");if(It(c,["array"]))return c.slice(d,f);throw new rr(`Expected first argument to be of type array or string, but found ${pi(dr(c))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Pl(u,n){let c=u.length-1,d,f,b=0,y=c,x=0;for(;b<=y;)if(x=Math.floor((b+y)/2),d=u[x],f=u[x+1],d<=n){if(x===c||n<f)return x;b=x+1}else{if(!(d>n))throw new rr("Input is not a number.");y=x-1}return 0}class Ws{constructor(n,c,d){this.type=n,this.input=c,this.labels=[],this.outputs=[];for(let[f,b]of d)this.labels.push(f),this.outputs.push(b)}static parse(n,c){if(n.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return c.error("Expected an even number of arguments.");let d=c.parse(n[1],1,nt);if(!d)return null;let f=[],b=null;c.expectedType&&c.expectedType.kind!=="value"&&(b=c.expectedType);for(let y=1;y<n.length;y+=2){let x=y===1?-1/0:n[y],S=n[y+1],k=y,D=y+1;if(typeof x!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(f.length&&f[f.length-1][0]>=x)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);let L=c.parse(S,D,b);if(!L)return null;b=b||L.type,f.push([x,L])}return new Ws(b,d,f)}evaluate(n){let c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(n);let f=this.input.evaluate(n);if(f<=c[0])return d[0].evaluate(n);let b=c.length;return f>=c[b-1]?d[b-1].evaluate(n):d[Pl(c,f)].evaluate(n)}eachChild(n){n(this.input);for(let c of this.outputs)n(c)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function en(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var uc,dc,Sd=function(){if(dc)return uc;function u(n,c,d,f){this.cx=3*n,this.bx=3*(d-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(f-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=c,this.p2x=d,this.p2y=f}return dc=1,uc=u,u.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,c){if(c===void 0&&(c=1e-6),n<0)return 0;if(n>1)return 1;for(var d=n,f=0;f<8;f++){var b=this.sampleCurveX(d)-n;if(Math.abs(b)<c)return d;var y=this.sampleCurveDerivativeX(d);if(Math.abs(y)<1e-6)break;d-=b/y}var x=0,S=1;for(d=n,f=0;f<20&&(b=this.sampleCurveX(d),!(Math.abs(b-n)<c));f++)n>b?x=d:S=d,d=.5*(S-x)+x;return d},solve:function(n,c){return this.sampleCurveY(this.solveCurveX(n,c))}},uc}(),lp=en(Sd);class wn{constructor(n,c,d,f,b){this.type=n,this.operator=c,this.interpolation=d,this.input=f,this.labels=[],this.outputs=[];for(let[y,x]of b)this.labels.push(y),this.outputs.push(x)}static interpolationFactor(n,c,d,f){let b=0;if(n.name==="exponential")b=Dl(c,n.base,d,f);else if(n.name==="linear")b=Dl(c,1,d,f);else if(n.name==="cubic-bezier"){let y=n.controlPoints;b=new lp(y[0],y[1],y[2],y[3]).solve(Dl(c,1,d,f))}return b}static parse(n,c){let[d,f,b,...y]=n;if(!Array.isArray(f)||f.length===0)return c.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){let k=f[1];if(typeof k!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:k}}else{if(f[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(f[0])}`,1,0);{let k=f.slice(1);if(k.length!==4||k.some(D=>typeof D!="number"||D<0||D>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:k}}}if(n.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(b=c.parse(b,2,nt),!b)return null;let x=[],S=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||c.expectedType==yi?c.expectedType&&c.expectedType.kind!=="value"&&(S=c.expectedType):S=tr;for(let k=0;k<y.length;k+=2){let D=y[k],L=y[k+1],V=k+3,H=k+4;if(typeof D!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(x.length&&x[x.length-1][0]>=D)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',V);let Z=c.parse(L,H,S);if(!Z)return null;S=S||Z.type,x.push([D,Z])}return bn(S,nt)||bn(S,Wi)||bn(S,tr)||bn(S,Ne)||bn(S,Ln)||bn(S,yi)||bn(S,sr)||bn(S,_n(nt))?new wn(S,d,f,b,x):c.error(`Type ${pi(S)} is not interpolatable.`)}evaluate(n){let c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(n);let f=this.input.evaluate(n);if(f<=c[0])return d[0].evaluate(n);let b=c.length;if(f>=c[b-1])return d[b-1].evaluate(n);let y=Pl(c,f),x=wn.interpolationFactor(this.interpolation,f,c[y],c[y+1]),S=d[y].evaluate(n),k=d[y+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Wr(S,k,x);case"color":return fi.interpolate(S,k,x);case"padding":return Bi.interpolate(S,k,x);case"colorArray":return fr.interpolate(S,k,x);case"numberArray":return ir.interpolate(S,k,x);case"variableAnchorOffsetCollection":return Zt.interpolate(S,k,x);case"array":return Ca(S,k,x);case"projectionDefinition":return vn.interpolate(S,k,x)}case"interpolate-hcl":switch(this.type.kind){case"color":return fi.interpolate(S,k,x,"hcl");case"colorArray":return fr.interpolate(S,k,x,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return fi.interpolate(S,k,x,"lab");case"colorArray":return fr.interpolate(S,k,x,"lab")}}}eachChild(n){n(this.input);for(let c of this.outputs)n(c)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Dl(u,n,c,d){let f=d-c,b=u-c;return f===0?0:n===1?b/f:(Math.pow(n,b)-1)/(Math.pow(n,f)-1)}let Jo={color:fi.interpolate,number:Wr,padding:Bi.interpolate,numberArray:ir.interpolate,colorArray:fr.interpolate,variableAnchorOffsetCollection:Zt.interpolate,array:Ca};class Ia{constructor(n,c){this.type=n,this.args=c}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");let d=null,f=c.expectedType;f&&f.kind!=="value"&&(d=f);let b=[];for(let x of n.slice(1)){let S=c.parse(x,1+b.length,d,void 0,{typeAnnotation:"omit"});if(!S)return null;d=d||S.type,b.push(S)}if(!d)throw new Error("No output type");let y=f&&b.some(x=>gs(f,x.type));return new Ia(y?it:d,b)}evaluate(n){let c,d=null,f=0;for(let b of this.args)if(f++,d=b.evaluate(n),d&&d instanceof yn&&!d.available&&(c||(c=d.name),d=null,f===this.args.length&&(d=c)),d!==null)break;return d}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function $n(u,n){return u==="=="||u==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function wo(u,n,c,d){return d.compare(n,c)===0}function Zs(u,n,c){let d=u!=="=="&&u!=="!=";return class Hk{constructor(b,y,x){this.type=oi,this.lhs=b,this.rhs=y,this.collator=x,this.hasUntypedArgument=b.type.kind==="value"||y.type.kind==="value"}static parse(b,y){if(b.length!==3&&b.length!==4)return y.error("Expected two or three arguments.");let x=b[0],S=y.parse(b[1],1,it);if(!S)return null;if(!$n(x,S.type))return y.concat(1).error(`"${x}" comparisons are not supported for type '${pi(S.type)}'.`);let k=y.parse(b[2],2,it);if(!k)return null;if(!$n(x,k.type))return y.concat(2).error(`"${x}" comparisons are not supported for type '${pi(k.type)}'.`);if(S.type.kind!==k.type.kind&&S.type.kind!=="value"&&k.type.kind!=="value")return y.error(`Cannot compare types '${pi(S.type)}' and '${pi(k.type)}'.`);d&&(S.type.kind==="value"&&k.type.kind!=="value"?S=new Yt(k.type,[S]):S.type.kind!=="value"&&k.type.kind==="value"&&(k=new Yt(S.type,[k])));let D=null;if(b.length===4){if(S.type.kind!=="string"&&k.type.kind!=="string"&&S.type.kind!=="value"&&k.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(D=y.parse(b[3],3,Hn),!D)return null}return new Hk(S,k,D)}evaluate(b){let y=this.lhs.evaluate(b),x=this.rhs.evaluate(b);if(d&&this.hasUntypedArgument){let S=dr(y),k=dr(x);if(S.kind!==k.kind||S.kind!=="string"&&S.kind!=="number")throw new rr(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${S.kind}, ${k.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){let S=dr(y),k=dr(x);if(S.kind!=="string"||k.kind!=="string")return n(b,y,x)}return this.collator?c(b,y,x,this.collator.evaluate(b)):n(b,y,x)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}}}let il=Zs("==",function(u,n,c){return n===c},wo),cp=Zs("!=",function(u,n,c){return n!==c},function(u,n,c,d){return!wo(0,n,c,d)}),_u=Zs("<",function(u,n,c){return n<c},function(u,n,c,d){return d.compare(n,c)<0}),up=Zs(">",function(u,n,c){return n>c},function(u,n,c,d){return d.compare(n,c)>0}),Xs=Zs("<=",function(u,n,c){return n<=c},function(u,n,c,d){return d.compare(n,c)<=0}),dp=Zs(">=",function(u,n,c){return n>=c},function(u,n,c,d){return d.compare(n,c)>=0});class hc{constructor(n,c,d){this.type=Hn,this.locale=d,this.caseSensitive=n,this.diacriticSensitive=c}static parse(n,c){if(n.length!==2)return c.error("Expected one argument.");let d=n[1];if(typeof d!="object"||Array.isArray(d))return c.error("Collator options argument must be an object.");let f=c.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,oi);if(!f)return null;let b=c.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,oi);if(!b)return null;let y=null;return d.locale&&(y=c.parse(d.locale,1,Gt),!y)?null:new hc(f,b,y)}evaluate(n){return new Al(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class Ys{constructor(n,c,d,f,b){this.type=Gt,this.number=n,this.locale=c,this.currency=d,this.minFractionDigits=f,this.maxFractionDigits=b}static parse(n,c){if(n.length!==3)return c.error("Expected two arguments.");let d=c.parse(n[1],1,nt);if(!d)return null;let f=n[2];if(typeof f!="object"||Array.isArray(f))return c.error("NumberFormat options argument must be an object.");let b=null;if(f.locale&&(b=c.parse(f.locale,1,Gt),!b))return null;let y=null;if(f.currency&&(y=c.parse(f.currency,1,Gt),!y))return null;let x=null;if(f["min-fraction-digits"]&&(x=c.parse(f["min-fraction-digits"],1,nt),!x))return null;let S=null;return f["max-fraction-digits"]&&(S=c.parse(f["max-fraction-digits"],1,nt),!S)?null:new Ys(d,b,y,x,S)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class pc{constructor(n){this.type=ro,this.sections=n}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");let d=n[1];if(!Array.isArray(d)&&typeof d=="object")return c.error("First argument must be an image or text section.");let f=[],b=!1;for(let y=1;y<=n.length-1;++y){let x=n[y];if(b&&typeof x=="object"&&!Array.isArray(x)){b=!1;let S=null;if(x["font-scale"]&&(S=c.parse(x["font-scale"],1,nt),!S))return null;let k=null;if(x["text-font"]&&(k=c.parse(x["text-font"],1,_n(Gt)),!k))return null;let D=null;if(x["text-color"]&&(D=c.parse(x["text-color"],1,tr),!D))return null;let L=null;if(x["vertical-align"]){if(typeof x["vertical-align"]=="string"&&!kl.includes(x["vertical-align"]))return c.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${x["vertical-align"]}' instead.`);if(L=c.parse(x["vertical-align"],1,Gt),!L)return null}let V=f[f.length-1];V.scale=S,V.font=k,V.textColor=D,V.verticalAlign=L}else{let S=c.parse(n[y],1,it);if(!S)return null;let k=S.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,f.push({content:S,scale:null,font:null,textColor:null,verticalAlign:null})}}return new pc(f)}evaluate(n){return new ii(this.sections.map(c=>{let d=c.content.evaluate(n);return dr(d)===Ko?new ji("",d,null,null,null,c.verticalAlign?c.verticalAlign.evaluate(n):null):new ji(Si(d),null,c.scale?c.scale.evaluate(n):null,c.font?c.font.evaluate(n).join(","):null,c.textColor?c.textColor.evaluate(n):null,c.verticalAlign?c.verticalAlign.evaluate(n):null)}))}eachChild(n){for(let c of this.sections)n(c.content),c.scale&&n(c.scale),c.font&&n(c.font),c.textColor&&n(c.textColor),c.verticalAlign&&n(c.verticalAlign)}outputDefined(){return!1}}class oo{constructor(n){this.type=Ko,this.input=n}static parse(n,c){if(n.length!==2)return c.error("Expected two arguments.");let d=c.parse(n[1],1,Gt);return d?new oo(d):c.error("No image name provided.")}evaluate(n){let c=this.input.evaluate(n),d=yn.fromString(c);return d&&n.availableImages&&(d.available=n.availableImages.indexOf(c)>-1),d}eachChild(n){n(this.input)}outputDefined(){return!1}}class rl{constructor(n){this.type=nt,this.input=n}static parse(n,c){if(n.length!==2)return c.error(`Expected 1 argument, but found ${n.length-1} instead.`);let d=c.parse(n[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${pi(d.type)} instead.`):new rl(d):null}evaluate(n){let c=this.input.evaluate(n);if(typeof c=="string")return[...c].length;if(Array.isArray(c))return c.length;throw new rr(`Expected value to be of type string or array, but found ${pi(dr(c))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}let es=8192;function bu(u,n){let c=(180+u[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(c*f*es),Math.round(d*f*es)]}function nl(u,n){let c=Math.pow(2,n.z);return[(f=(u[0]/es+n.x)/c,360*f-180),(d=(u[1]/es+n.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,f}function Ks(u,n){u[0]=Math.min(u[0],n[0]),u[1]=Math.min(u[1],n[1]),u[2]=Math.max(u[2],n[0]),u[3]=Math.max(u[3],n[1])}function Qs(u,n){return!(u[0]<=n[0]||u[2]>=n[2]||u[1]<=n[1]||u[3]>=n[3])}function yu(u,n,c){let d=u[0]-n[0],f=u[1]-n[1],b=u[0]-c[0],y=u[1]-c[1];return d*y-b*f==0&&d*b<=0&&f*y<=0}function Lo(u,n,c,d){return(f=[d[0]-c[0],d[1]-c[1]])[0]*(b=[n[0]-u[0],n[1]-u[1]])[1]-f[1]*b[0]!=0&&!(!Id(u,n,c,d)||!Id(c,d,u,n));var f,b}function Rl(u,n,c){for(let d of c)for(let f=0;f<d.length-1;++f)if(Lo(u,n,d[f],d[f+1]))return!0;return!1}function Js(u,n,c=!1){let d=!1;for(let x of n)for(let S=0;S<x.length-1;S++){if(yu(u,x[S],x[S+1]))return c;(b=x[S])[1]>(f=u)[1]!=(y=x[S+1])[1]>f[1]&&f[0]<(y[0]-b[0])*(f[1]-b[1])/(y[1]-b[1])+b[0]&&(d=!d)}var f,b,y;return d}function Td(u,n){for(let c of n)if(Js(u,c))return!0;return!1}function Md(u,n){for(let c of u)if(!Js(c,n))return!1;for(let c=0;c<u.length-1;++c)if(Rl(u[c],u[c+1],n))return!1;return!0}function Aa(u,n){for(let c of n)if(Md(u,c))return!0;return!1}function Id(u,n,c,d){let f=d[0]-c[0],b=d[1]-c[1],y=(u[0]-c[0])*b-f*(u[1]-c[1]),x=(n[0]-c[0])*b-f*(n[1]-c[1]);return y>0&&x<0||y<0&&x>0}function Ol(u,n,c){let d=[];for(let f=0;f<u.length;f++){let b=[];for(let y=0;y<u[f].length;y++){let x=bu(u[f][y],c);Ks(n,x),b.push(x)}d.push(b)}return d}function Ad(u,n,c){let d=[];for(let f=0;f<u.length;f++){let b=Ol(u[f],n,c);d.push(b)}return d}function kd(u,n,c,d){if(u[0]<c[0]||u[0]>c[2]){let f=.5*d,b=u[0]-c[0]>f?-d:c[0]-u[0]>f?d:0;b===0&&(b=u[0]-c[2]>f?-d:c[2]-u[0]>f?d:0),u[0]+=b}Ks(n,u)}function fc(u,n,c,d){let f=Math.pow(2,d.z)*es,b=[d.x*es,d.y*es],y=[];for(let x of u)for(let S of x){let k=[S.x+b[0],S.y+b[1]];kd(k,n,c,f),y.push(k)}return y}function ol(u,n,c,d){let f=Math.pow(2,d.z)*es,b=[d.x*es,d.y*es],y=[];for(let S of u){let k=[];for(let D of S){let L=[D.x+b[0],D.y+b[1]];Ks(n,L),k.push(L)}y.push(k)}if(n[2]-n[0]<=f/2){(x=n)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(let S of y)for(let k of S)kd(k,n,c,f)}var x;return y}class ea{constructor(n,c){this.type=oi,this.geojson=n,this.geometries=c}static parse(n,c){if(n.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Yi(n[1])){let d=n[1];if(d.type==="FeatureCollection"){let f=[];for(let b of d.features){let{type:y,coordinates:x}=b.geometry;y==="Polygon"&&f.push(x),y==="MultiPolygon"&&f.push(...x)}if(f.length)return new ea(d,{type:"MultiPolygon",coordinates:f})}else if(d.type==="Feature"){let f=d.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new ea(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new ea(d,d)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(c,d){let f=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],y=c.canonicalID();if(d.type==="Polygon"){let x=Ol(d.coordinates,b,y),S=fc(c.geometry(),f,b,y);if(!Qs(f,b))return!1;for(let k of S)if(!Js(k,x))return!1}if(d.type==="MultiPolygon"){let x=Ad(d.coordinates,b,y),S=fc(c.geometry(),f,b,y);if(!Qs(f,b))return!1;for(let k of S)if(!Td(k,x))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(c,d){let f=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],y=c.canonicalID();if(d.type==="Polygon"){let x=Ol(d.coordinates,b,y),S=ol(c.geometry(),f,b,y);if(!Qs(f,b))return!1;for(let k of S)if(!Md(k,x))return!1}if(d.type==="MultiPolygon"){let x=Ad(d.coordinates,b,y),S=ol(c.geometry(),f,b,y);if(!Qs(f,b))return!1;for(let k of S)if(!Aa(k,x))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Pd=class{constructor(u=[],n=(c,d)=>c<d?-1:c>d?1:0){if(this.data=u,this.length=this.data.length,this.compare=n,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;let u=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),u}peek(){return this.data[0]}_up(u){let{data:n,compare:c}=this,d=n[u];for(;u>0;){let f=u-1>>1,b=n[f];if(c(d,b)>=0)break;n[u]=b,u=f}n[u]=d}_down(u){let{data:n,compare:c}=this,d=this.length>>1,f=n[u];for(;u<d;){let b=1+(u<<1),y=b+1;if(y<this.length&&c(n[y],n[b])<0&&(b=y),c(n[b],f)>=0)break;n[u]=n[b],u=b}n[u]=f}};function vu(u,n,c=0,d=u.length-1,f=xu){for(;d>c;){if(d-c>600){let S=d-c+1,k=n-c+1,D=Math.log(S),L=.5*Math.exp(2*D/3),V=.5*Math.sqrt(D*L*(S-L)/S)*(k-S/2<0?-1:1);vu(u,n,Math.max(c,Math.floor(n-k*L/S+V)),Math.min(d,Math.floor(n+(S-k)*L/S+V)),f)}let b=u[n],y=c,x=d;for(ta(u,c,n),f(u[d],b)>0&&ta(u,c,d);y<x;){for(ta(u,y,x),y++,x--;f(u[y],b)<0;)y++;for(;f(u[x],b)>0;)x--}f(u[c],b)===0?ta(u,c,x):(x++,ta(u,x,d)),x<=n&&(c=x+1),n<=x&&(d=x-1)}}function ta(u,n,c){let d=u[n];u[n]=u[c],u[c]=d}function xu(u,n){return u<n?-1:u>n?1:0}function mc(u,n){if(u.length<=1)return[u];let c=[],d,f;for(let b of u){let y=Dd(b);y!==0&&(b.area=Math.abs(y),f===void 0&&(f=y<0),f===y<0?(d&&c.push(d),d=[b]):d.push(b))}if(d&&c.push(d),n>1)for(let b=0;b<c.length;b++)c[b].length<=n||(vu(c[b],n,1,c[b].length-1,hp),c[b]=c[b].slice(0,n));return c}function hp(u,n){return n.area-u.area}function Dd(u){let n=0;for(let c,d,f=0,b=u.length,y=b-1;f<b;y=f++)c=u[f],d=u[y],n+=(d.x-c.x)*(c.y+d.y);return n}let gc=1/298.257223563,wu=gc*(2-gc),Rd=Math.PI/180;class Cu{constructor(n){let c=6378.137*Rd*1e3,d=Math.cos(n*Rd),f=1/(1-wu*(1-d*d)),b=Math.sqrt(f);this.kx=c*b*d,this.ky=c*b*f*(1-wu)}distance(n,c){let d=this.wrap(n[0]-c[0])*this.kx,f=(n[1]-c[1])*this.ky;return Math.sqrt(d*d+f*f)}pointOnLine(n,c){let d,f,b,y,x=1/0;for(let S=0;S<n.length-1;S++){let k=n[S][0],D=n[S][1],L=this.wrap(n[S+1][0]-k)*this.kx,V=(n[S+1][1]-D)*this.ky,H=0;L===0&&V===0||(H=(this.wrap(c[0]-k)*this.kx*L+(c[1]-D)*this.ky*V)/(L*L+V*V),H>1?(k=n[S+1][0],D=n[S+1][1]):H>0&&(k+=L/this.kx*H,D+=V/this.ky*H)),L=this.wrap(c[0]-k)*this.kx,V=(c[1]-D)*this.ky;let Z=L*L+V*V;Z<x&&(x=Z,d=k,f=D,b=S,y=H)}return{point:[d,f],index:b,t:Math.max(0,Math.min(1,y))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function Od(u,n){return n[0]-u[0]}function Ni(u){return u[1]-u[0]+1}function Co(u,n){return u[1]>=u[0]&&u[1]<n}function _c(u,n){if(u[0]>u[1])return[null,null];let c=Ni(u);if(n){if(c===2)return[u,null];let f=Math.floor(c/2);return[[u[0],u[0]+f],[u[0]+f,u[1]]]}if(c===1)return[u,null];let d=Math.floor(c/2)-1;return[[u[0],u[0]+d],[u[0]+d+1,u[1]]]}function ts(u,n){if(!Co(n,u.length))return[1/0,1/0,-1/0,-1/0];let c=[1/0,1/0,-1/0,-1/0];for(let d=n[0];d<=n[1];++d)Ks(c,u[d]);return c}function Ll(u){let n=[1/0,1/0,-1/0,-1/0];for(let c of u)for(let d of c)Ks(n,d);return n}function Ld(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function Eu(u,n,c){if(!Ld(u)||!Ld(n))return NaN;let d=0,f=0;return u[2]<n[0]&&(d=n[0]-u[2]),u[0]>n[2]&&(d=u[0]-n[2]),u[1]>n[3]&&(f=u[1]-n[3]),u[3]<n[1]&&(f=n[1]-u[3]),c.distance([0,0],[d,f])}function No(u,n,c){let d=c.pointOnLine(n,u);return c.distance(u,d.point)}function bc(u,n,c,d,f){let b=Math.min(No(u,[c,d],f),No(n,[c,d],f)),y=Math.min(No(c,[u,n],f),No(d,[u,n],f));return Math.min(b,y)}function pp(u,n,c,d,f){if(!Co(n,u.length)||!Co(d,c.length))return 1/0;let b=1/0;for(let y=n[0];y<n[1];++y){let x=u[y],S=u[y+1];for(let k=d[0];k<d[1];++k){let D=c[k],L=c[k+1];if(Lo(x,S,D,L))return 0;b=Math.min(b,bc(x,S,D,L,f))}}return b}function fp(u,n,c,d,f){if(!Co(n,u.length)||!Co(d,c.length))return NaN;let b=1/0;for(let y=n[0];y<=n[1];++y)for(let x=d[0];x<=d[1];++x)if(b=Math.min(b,f.distance(u[y],c[x])),b===0)return b;return b}function mp(u,n,c){if(Js(u,n,!0))return 0;let d=1/0;for(let f of n){let b=f[0],y=f[f.length-1];if(b!==y&&(d=Math.min(d,No(u,[y,b],c)),d===0))return d;let x=c.pointOnLine(f,u);if(d=Math.min(d,c.distance(u,x.point)),d===0)return d}return d}function gp(u,n,c,d){if(!Co(n,u.length))return NaN;for(let b=n[0];b<=n[1];++b)if(Js(u[b],c,!0))return 0;let f=1/0;for(let b=n[0];b<n[1];++b){let y=u[b],x=u[b+1];for(let S of c)for(let k=0,D=S.length,L=D-1;k<D;L=k++){let V=S[L],H=S[k];if(Lo(y,x,V,H))return 0;f=Math.min(f,bc(y,x,V,H,d))}}return f}function Nd(u,n){for(let c of u)for(let d of c)if(Js(d,n,!0))return!0;return!1}function yc(u,n,c,d=1/0){let f=Ll(u),b=Ll(n);if(d!==1/0&&Eu(f,b,c)>=d)return d;if(Qs(f,b)){if(Nd(u,n))return 0}else if(Nd(n,u))return 0;let y=1/0;for(let x of u)for(let S=0,k=x.length,D=k-1;S<k;D=S++){let L=x[D],V=x[S];for(let H of n)for(let Z=0,te=H.length,de=te-1;Z<te;de=Z++){let be=H[de],Re=H[Z];if(Lo(L,V,be,Re))return 0;y=Math.min(y,bc(L,V,be,Re,c))}}return y}function ia(u,n,c,d,f,b){if(!b)return;let y=Eu(ts(d,b),f,c);y<n&&u.push([y,b,[0,0]])}function vc(u,n,c,d,f,b,y){if(!b||!y)return;let x=Eu(ts(d,b),ts(f,y),c);x<n&&u.push([x,b,y])}function Nl(u,n,c,d,f=1/0){let b=Math.min(d.distance(u[0],c[0][0]),f);if(b===0)return b;let y=new Pd([[0,[0,u.length-1],[0,0]]],Od),x=Ll(c);for(;y.length>0;){let S=y.pop();if(S[0]>=b)continue;let k=S[1],D=n?50:100;if(Ni(k)<=D){if(!Co(k,u.length))return NaN;if(n){let L=gp(u,k,c,d);if(isNaN(L)||L===0)return L;b=Math.min(b,L)}else for(let L=k[0];L<=k[1];++L){let V=mp(u[L],c,d);if(b=Math.min(b,V),b===0)return 0}}else{let L=_c(k,n);ia(y,b,d,u,x,L[0]),ia(y,b,d,u,x,L[1])}}return b}function ka(u,n,c,d,f,b=1/0){let y=Math.min(b,f.distance(u[0],c[0]));if(y===0)return y;let x=new Pd([[0,[0,u.length-1],[0,c.length-1]]],Od);for(;x.length>0;){let S=x.pop();if(S[0]>=y)continue;let k=S[1],D=S[2],L=n?50:100,V=d?50:100;if(Ni(k)<=L&&Ni(D)<=V){if(!Co(k,u.length)&&Co(D,c.length))return NaN;let H;if(n&&d)H=pp(u,k,c,D,f),y=Math.min(y,H);else if(n&&!d){let Z=u.slice(k[0],k[1]+1);for(let te=D[0];te<=D[1];++te)if(H=No(c[te],Z,f),y=Math.min(y,H),y===0)return y}else if(!n&&d){let Z=c.slice(D[0],D[1]+1);for(let te=k[0];te<=k[1];++te)if(H=No(u[te],Z,f),y=Math.min(y,H),y===0)return y}else H=fp(u,k,c,D,f),y=Math.min(y,H)}else{let H=_c(k,n),Z=_c(D,d);vc(x,y,f,u,c,H[0],Z[0]),vc(x,y,f,u,c,H[0],Z[1]),vc(x,y,f,u,c,H[1],Z[0]),vc(x,y,f,u,c,H[1],Z[1])}}return y}function wr(u){return u.type==="MultiPolygon"?u.coordinates.map(n=>({type:"Polygon",coordinates:n})):u.type==="MultiLineString"?u.coordinates.map(n=>({type:"LineString",coordinates:n})):u.type==="MultiPoint"?u.coordinates.map(n=>({type:"Point",coordinates:n})):[u]}class ra{constructor(n,c){this.type=nt,this.geojson=n,this.geometries=c}static parse(n,c){if(n.length!==2)return c.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Yi(n[1])){let d=n[1];if(d.type==="FeatureCollection")return new ra(d,d.features.map(f=>wr(f.geometry)).flat());if(d.type==="Feature")return new ra(d,wr(d.geometry));if("type"in d&&"coordinates"in d)return new ra(d,wr(d))}return c.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(c,d){let f=c.geometry(),b=f.flat().map(S=>nl([S.x,S.y],c.canonical));if(f.length===0)return NaN;let y=new Cu(b[0][1]),x=1/0;for(let S of d){switch(S.type){case"Point":x=Math.min(x,ka(b,!1,[S.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,ka(b,!1,S.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,Nl(b,!1,S.coordinates,y,x))}if(x===0)return x}return x}(n,this.geometries);if(n.geometryType()==="LineString")return function(c,d){let f=c.geometry(),b=f.flat().map(S=>nl([S.x,S.y],c.canonical));if(f.length===0)return NaN;let y=new Cu(b[0][1]),x=1/0;for(let S of d){switch(S.type){case"Point":x=Math.min(x,ka(b,!0,[S.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,ka(b,!0,S.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,Nl(b,!0,S.coordinates,y,x))}if(x===0)return x}return x}(n,this.geometries);if(n.geometryType()==="Polygon")return function(c,d){let f=c.geometry();if(f.length===0||f[0].length===0)return NaN;let b=mc(f,0).map(S=>S.map(k=>k.map(D=>nl([D.x,D.y],c.canonical)))),y=new Cu(b[0][0][0][1]),x=1/0;for(let S of d)for(let k of b){switch(S.type){case"Point":x=Math.min(x,Nl([S.coordinates],!1,k,y,x));break;case"LineString":x=Math.min(x,Nl(S.coordinates,!0,k,y,x));break;case"Polygon":x=Math.min(x,yc(k,S.coordinates,y,x))}if(x===0)return x}return x}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class sl{constructor(n){this.type=it,this.key=n}static parse(n,c){if(n.length!==2)return c.error(`Expected 1 argument, but found ${n.length-1} instead.`);let d=n[1];return d==null?c.error("Global state property must be defined."):typeof d!="string"?c.error(`Global state property must be string, but found ${typeof n[1]} instead.`):new sl(d)}evaluate(n){var c;let d=(c=n.globals)===null||c===void 0?void 0:c.globalState;return d&&Object.keys(d).length!==0?vo(d,this.key):null}eachChild(){}outputDefined(){return!1}}let Jt={"==":il,"!=":cp,">":up,"<":_u,">=":dp,"<=":Xs,array:Yt,at:Sa,boolean:Yt,case:Jr,coalesce:Ia,collator:hc,format:pc,image:oo,in:Oo,"index-of":Ta,interpolate:wn,"interpolate-hcl":wn,"interpolate-lab":wn,length:rl,let:vi,literal:ui,match:Ma,number:Yt,"number-format":Ys,object:Yt,slice:Gs,step:Ws,string:Yt,"to-boolean":xn,"to-color":xn,"to-number":xn,"to-string":xn,var:xo,within:ea,distance:ra,"global-state":sl};class Fn{constructor(n,c,d,f){this.name=n,this.type=c,this._evaluate=d,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,c){let d=n[0],f=Fn.definitions[d];if(!f)return c.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);let b=Array.isArray(f)?f[0]:f.type,y=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,x=y.filter(([k])=>!Array.isArray(k)||k.length===n.length-1),S=null;for(let[k,D]of x){S=new Wt(c.registry,rs,c.path,null,c.scope);let L=[],V=!1;for(let H=1;H<n.length;H++){let Z=n[H],te=Array.isArray(k)?k[H-1]:k.type,de=S.parse(Z,1+L.length,te);if(!de){V=!0;break}L.push(de)}if(!V)if(Array.isArray(k)&&k.length!==L.length)S.error(`Expected ${k.length} arguments, but found ${L.length} instead.`);else{for(let H=0;H<L.length;H++){let Z=Array.isArray(k)?k[H]:k.type,te=L[H];S.concat(H+1).checkSubtype(Z,te.type)}if(S.errors.length===0)return new Fn(d,b,D,L)}}if(x.length===1)c.errors.push(...S.errors);else{let k=(x.length?x:y).map(([L])=>{return V=L,Array.isArray(V)?`(${V.map(pi).join(", ")})`:`(${pi(V.type)}...)`;var V}).join(" | "),D=[];for(let L=1;L<n.length;L++){let V=c.parse(n[L],1+D.length);if(!V)return null;D.push(pi(V.type))}c.error(`Expected arguments of type ${k}, but found (${D.join(", ")}) instead.`)}return null}static register(n,c){Fn.definitions=c;for(let d in c)n[d]=Fn}}function so(u,[n,c,d,f]){n=n.evaluate(u),c=c.evaluate(u),d=d.evaluate(u);let b=f?f.evaluate(u):1,y=tl(n,c,d,b);if(y)throw new rr(y);return new fi(n/255,c/255,d/255,b,!1)}function Fd(u,n){return u in n}function Fl(u,n){let c=n[u];return c===void 0?null:c}function is(u){return{type:u}}function rs(u){if(u instanceof xo)return rs(u.boundExpression);if(u instanceof Fn&&u.name==="error"||u instanceof hc||u instanceof ea||u instanceof ra||u instanceof sl)return!1;let n=u instanceof xn||u instanceof Yt,c=!0;return u.eachChild(d=>{c=n?c&&rs(d):c&&d instanceof ui}),!!c&&na(u)&&Eo(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function na(u){if(u instanceof Fn&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof ea||u instanceof ra)return!1;let n=!0;return u.eachChild(c=>{n&&!na(c)&&(n=!1)}),n}function ns(u){if(u instanceof Fn&&u.name==="feature-state")return!1;let n=!0;return u.eachChild(c=>{n&&!ns(c)&&(n=!1)}),n}function Eo(u,n){if(u instanceof Fn&&n.indexOf(u.name)>=0)return!1;let c=!0;return u.eachChild(d=>{c&&!Eo(d,n)&&(c=!1)}),c}function Pa(u){return{result:"success",value:u}}function oa(u){return{result:"error",value:u}}function Da(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function xc(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function wc(u){return!!u.expression&&u.expression.interpolated}function Ai(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Cc(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)&&dr(u)===an}function zl(u){return u}function z(u,n){let c=u.stops&&typeof u.stops[0][0]=="object",d=c||!(c||u.property!==void 0),f=u.type||(wc(n)?"exponential":"interval"),b=function(D){switch(D.type){case"color":return fi.parse;case"padding":return Bi.parse;case"numberArray":return ir.parse;case"colorArray":return fr.parse;default:return null}}(n);if(b&&((u=$i({},u)).stops&&(u.stops=u.stops.map(D=>[D[0],b(D[1])])),u.default=b(u.default?u.default:n.default)),u.colorSpace&&(y=u.colorSpace)!=="rgb"&&y!=="hcl"&&y!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var y;let x=function(D){switch(D){case"exponential":return ht;case"interval":return Ye;case"categorical":return Ce;case"identity":return Nt;default:throw new Error(`Unknown function type "${D}"`)}}(f),S,k;if(f==="categorical"){S=Object.create(null);for(let D of u.stops)S[D[0]]=D[1];k=typeof u.stops[0][0]}if(c){let D={},L=[];for(let Z=0;Z<u.stops.length;Z++){let te=u.stops[Z],de=te[0].zoom;D[de]===void 0&&(D[de]={zoom:de,type:u.type,property:u.property,default:u.default,stops:[]},L.push(de)),D[de].stops.push([te[0].value,te[1]])}let V=[];for(let Z of L)V.push([D[Z].zoom,z(D[Z],n)]);let H={name:"linear"};return{kind:"composite",interpolationType:H,interpolationFactor:wn.interpolationFactor.bind(void 0,H),zoomStops:V.map(Z=>Z[0]),evaluate:({zoom:Z},te)=>ht({stops:V,base:u.base},n,Z).evaluate(Z,te)}}if(d){let D=f==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:wn.interpolationFactor.bind(void 0,D),zoomStops:u.stops.map(L=>L[0]),evaluate:({zoom:L})=>x(u,n,L,S,k)}}return{kind:"source",evaluate(D,L){let V=L&&L.properties?L.properties[u.property]:void 0;return V===void 0?j(u.default,n.default):x(u,n,V,S,k)}}}function j(u,n,c){return u!==void 0?u:n!==void 0?n:c!==void 0?c:void 0}function Ce(u,n,c,d,f){return j(typeof c===f?d[c]:void 0,u.default,n.default)}function Ye(u,n,c){if(Ai(c)!=="number")return j(u.default,n.default);let d=u.stops.length;if(d===1||c<=u.stops[0][0])return u.stops[0][1];if(c>=u.stops[d-1][0])return u.stops[d-1][1];let f=Pl(u.stops.map(b=>b[0]),c);return u.stops[f][1]}function ht(u,n,c){let d=u.base!==void 0?u.base:1;if(Ai(c)!=="number")return j(u.default,n.default);let f=u.stops.length;if(f===1||c<=u.stops[0][0])return u.stops[0][1];if(c>=u.stops[f-1][0])return u.stops[f-1][1];let b=Pl(u.stops.map(D=>D[0]),c),y=function(D,L,V,H){let Z=H-V,te=D-V;return Z===0?0:L===1?te/Z:(Math.pow(L,te)-1)/(Math.pow(L,Z)-1)}(c,d,u.stops[b][0],u.stops[b+1][0]),x=u.stops[b][1],S=u.stops[b+1][1],k=Jo[n.type]||zl;return typeof x.evaluate=="function"?{evaluate(...D){let L=x.evaluate.apply(void 0,D),V=S.evaluate.apply(void 0,D);if(L!==void 0&&V!==void 0)return k(L,V,y,u.colorSpace)}}:k(x,S,y,u.colorSpace)}function Nt(u,n,c){switch(n.type){case"color":c=fi.parse(c);break;case"formatted":c=ii.fromString(c.toString());break;case"resolvedImage":c=yn.fromString(c.toString());break;case"padding":c=Bi.parse(c);break;case"colorArray":c=fr.parse(c);break;case"numberArray":c=ir.parse(c);break;default:Ai(c)===n.type||n.type==="enum"&&n.values[c]||(c=void 0)}return j(c,u.default,n.default)}Fn.register(Jt,{error:[{kind:"error"},[Gt],(u,[n])=>{throw new rr(n.evaluate(u))}],typeof:[Gt,[it],(u,[n])=>pi(dr(n.evaluate(u)))],"to-rgba":[_n(nt,4),[tr],(u,[n])=>{let[c,d,f,b]=n.evaluate(u).rgb;return[255*c,255*d,255*f,b]}],rgb:[tr,[nt,nt,nt],so],rgba:[tr,[nt,nt,nt,nt],so],has:{type:oi,overloads:[[[Gt],(u,[n])=>Fd(n.evaluate(u),u.properties())],[[Gt,an],(u,[n,c])=>Fd(n.evaluate(u),c.evaluate(u))]]},get:{type:it,overloads:[[[Gt],(u,[n])=>Fl(n.evaluate(u),u.properties())],[[Gt,an],(u,[n,c])=>Fl(n.evaluate(u),c.evaluate(u))]]},"feature-state":[it,[Gt],(u,[n])=>Fl(n.evaluate(u),u.featureState||{})],properties:[an,[],u=>u.properties()],"geometry-type":[Gt,[],u=>u.geometryType()],id:[it,[],u=>u.id()],zoom:[nt,[],u=>u.globals.zoom],"heatmap-density":[nt,[],u=>u.globals.heatmapDensity||0],"line-progress":[nt,[],u=>u.globals.lineProgress||0],accumulated:[it,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[nt,is(nt),(u,n)=>{let c=0;for(let d of n)c+=d.evaluate(u);return c}],"*":[nt,is(nt),(u,n)=>{let c=1;for(let d of n)c*=d.evaluate(u);return c}],"-":{type:nt,overloads:[[[nt,nt],(u,[n,c])=>n.evaluate(u)-c.evaluate(u)],[[nt],(u,[n])=>-n.evaluate(u)]]},"/":[nt,[nt,nt],(u,[n,c])=>n.evaluate(u)/c.evaluate(u)],"%":[nt,[nt,nt],(u,[n,c])=>n.evaluate(u)%c.evaluate(u)],ln2:[nt,[],()=>Math.LN2],pi:[nt,[],()=>Math.PI],e:[nt,[],()=>Math.E],"^":[nt,[nt,nt],(u,[n,c])=>Math.pow(n.evaluate(u),c.evaluate(u))],sqrt:[nt,[nt],(u,[n])=>Math.sqrt(n.evaluate(u))],log10:[nt,[nt],(u,[n])=>Math.log(n.evaluate(u))/Math.LN10],ln:[nt,[nt],(u,[n])=>Math.log(n.evaluate(u))],log2:[nt,[nt],(u,[n])=>Math.log(n.evaluate(u))/Math.LN2],sin:[nt,[nt],(u,[n])=>Math.sin(n.evaluate(u))],cos:[nt,[nt],(u,[n])=>Math.cos(n.evaluate(u))],tan:[nt,[nt],(u,[n])=>Math.tan(n.evaluate(u))],asin:[nt,[nt],(u,[n])=>Math.asin(n.evaluate(u))],acos:[nt,[nt],(u,[n])=>Math.acos(n.evaluate(u))],atan:[nt,[nt],(u,[n])=>Math.atan(n.evaluate(u))],min:[nt,is(nt),(u,n)=>Math.min(...n.map(c=>c.evaluate(u)))],max:[nt,is(nt),(u,n)=>Math.max(...n.map(c=>c.evaluate(u)))],abs:[nt,[nt],(u,[n])=>Math.abs(n.evaluate(u))],round:[nt,[nt],(u,[n])=>{let c=n.evaluate(u);return c<0?-Math.round(-c):Math.round(c)}],floor:[nt,[nt],(u,[n])=>Math.floor(n.evaluate(u))],ceil:[nt,[nt],(u,[n])=>Math.ceil(n.evaluate(u))],"filter-==":[oi,[Gt,it],(u,[n,c])=>u.properties()[n.value]===c.value],"filter-id-==":[oi,[it],(u,[n])=>u.id()===n.value],"filter-type-==":[oi,[Gt],(u,[n])=>u.geometryType()===n.value],"filter-<":[oi,[Gt,it],(u,[n,c])=>{let d=u.properties()[n.value],f=c.value;return typeof d==typeof f&&d<f}],"filter-id-<":[oi,[it],(u,[n])=>{let c=u.id(),d=n.value;return typeof c==typeof d&&c<d}],"filter->":[oi,[Gt,it],(u,[n,c])=>{let d=u.properties()[n.value],f=c.value;return typeof d==typeof f&&d>f}],"filter-id->":[oi,[it],(u,[n])=>{let c=u.id(),d=n.value;return typeof c==typeof d&&c>d}],"filter-<=":[oi,[Gt,it],(u,[n,c])=>{let d=u.properties()[n.value],f=c.value;return typeof d==typeof f&&d<=f}],"filter-id-<=":[oi,[it],(u,[n])=>{let c=u.id(),d=n.value;return typeof c==typeof d&&c<=d}],"filter->=":[oi,[Gt,it],(u,[n,c])=>{let d=u.properties()[n.value],f=c.value;return typeof d==typeof f&&d>=f}],"filter-id->=":[oi,[it],(u,[n])=>{let c=u.id(),d=n.value;return typeof c==typeof d&&c>=d}],"filter-has":[oi,[it],(u,[n])=>n.value in u.properties()],"filter-has-id":[oi,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[oi,[_n(Gt)],(u,[n])=>n.value.indexOf(u.geometryType())>=0],"filter-id-in":[oi,[_n(it)],(u,[n])=>n.value.indexOf(u.id())>=0],"filter-in-small":[oi,[Gt,_n(it)],(u,[n,c])=>c.value.indexOf(u.properties()[n.value])>=0],"filter-in-large":[oi,[Gt,_n(it)],(u,[n,c])=>function(d,f,b,y){for(;b<=y;){let x=b+y>>1;if(f[x]===d)return!0;f[x]>d?y=x-1:b=x+1}return!1}(u.properties()[n.value],c.value,0,c.value.length-1)],all:{type:oi,overloads:[[[oi,oi],(u,[n,c])=>n.evaluate(u)&&c.evaluate(u)],[is(oi),(u,n)=>{for(let c of n)if(!c.evaluate(u))return!1;return!0}]]},any:{type:oi,overloads:[[[oi,oi],(u,[n,c])=>n.evaluate(u)||c.evaluate(u)],[is(oi),(u,n)=>{for(let c of n)if(c.evaluate(u))return!0;return!1}]]},"!":[oi,[oi],(u,[n])=>!n.evaluate(u)],"is-supported-script":[oi,[Gt],(u,[n])=>{let c=u.globals&&u.globals.isSupportedScript;return!c||c(n.evaluate(u))}],upcase:[Gt,[Gt],(u,[n])=>n.evaluate(u).toUpperCase()],downcase:[Gt,[Gt],(u,[n])=>n.evaluate(u).toLowerCase()],concat:[Gt,is(it),(u,n)=>n.map(c=>Si(c.evaluate(u))).join("")],"resolved-locale":[Gt,[Hn],(u,[n])=>n.evaluate(u).resolvedLocale()]});class ri{constructor(n,c){this.expression=n,this._warningHistory={},this._evaluator=new _s,this._defaultValue=c?function(d){if(d.type==="color"&&Cc(d.default))return new fi(0,0,0,0);switch(d.type){case"color":return fi.parse(d.default)||null;case"padding":return Bi.parse(d.default)||null;case"numberArray":return ir.parse(d.default)||null;case"colorArray":return fr.parse(d.default)||null;case"variableAnchorOffsetCollection":return Zt.parse(d.default)||null;case"projectionDefinition":return vn.parse(d.default)||null;default:return d.default===void 0?null:d.default}}(c):null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(n,c,d,f,b,y){return this._evaluator.globals=n,this._evaluator.feature=c,this._evaluator.featureState=d,this._evaluator.canonical=f,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(n,c,d,f,b,y){this._evaluator.globals=n,this._evaluator.feature=c||null,this._evaluator.featureState=d||null,this._evaluator.canonical=f,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=y||null;try{let x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new rr(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console<"u"&&console.warn(x.message)),this._defaultValue}}}function Ti(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in Jt}function mr(u,n){let c=new Wt(Jt,rs,[],n?function(f){let b={color:tr,string:Gt,number:nt,enum:Gt,boolean:oi,formatted:ro,padding:Ne,numberArray:Ln,colorArray:yi,projectionDefinition:Wi,resolvedImage:Ko,variableAnchorOffsetCollection:sr};return f.type==="array"?_n(b[f.value]||it,f.length):b[f.type]}(n):void 0),d=c.parse(u,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Pa(new ri(d,n)):oa(c.errors)}class Zr{constructor(n,c){this.kind=n,this._styleExpression=c,this.isStateDependent=n!=="constant"&&!ns(c.expression)}evaluateWithoutErrorHandling(n,c,d,f,b,y){return this._styleExpression.evaluateWithoutErrorHandling(n,c,d,f,b,y)}evaluate(n,c,d,f,b,y){return this._styleExpression.evaluate(n,c,d,f,b,y)}}class zn{constructor(n,c,d,f){this.kind=n,this.zoomStops=d,this._styleExpression=c,this.isStateDependent=n!=="camera"&&!ns(c.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,c,d,f,b,y){return this._styleExpression.evaluateWithoutErrorHandling(n,c,d,f,b,y)}evaluate(n,c,d,f,b,y){return this._styleExpression.evaluate(n,c,d,f,b,y)}interpolationFactor(n,c,d){return this.interpolationType?wn.interpolationFactor(this.interpolationType,n,c,d):0}}function ao(u,n){let c=mr(u,n);if(c.result==="error")return c;let d=c.value.expression,f=na(d);if(!f&&!Da(n))return oa([new Ut("","data expressions not supported")]);let b=Eo(d,["zoom"]);if(!b&&!xc(n))return oa([new Ut("","zoom expressions not supported")]);let y=So(d);return y||b?y instanceof Ut?oa([y]):y instanceof wn&&!wc(n)?oa([new Ut("",'"interpolate" expressions cannot be used with this property')]):Pa(y?new zn(f?"camera":"composite",c.value,y.labels,y instanceof wn?y.interpolation:void 0):new Zr(f?"constant":"source",c.value)):oa([new Ut("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Fo{constructor(n,c){this._parameters=n,this._specification=c,$i(this,z(this._parameters,this._specification))}static deserialize(n){return new Fo(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function So(u){let n=null;if(u instanceof vi)n=So(u.result);else if(u instanceof Ia){for(let c of u.args)if(n=So(c),n)break}else(u instanceof Ws||u instanceof wn)&&u.input instanceof Fn&&u.input.name==="zoom"&&(n=u);return n instanceof Ut||u.eachChild(c=>{let d=So(c);d instanceof Ut?n=d:!n&&d?n=new Ut("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&d&&n!==d&&(n=new Ut("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function bs(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(let n of u.slice(1))if(!bs(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}let Su={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Tu(u){if(u==null)return{filter:()=>!0,needGeometry:!1};bs(u)||(u=Bd(u));let n=mr(u,Su);if(n.result==="error")throw new Error(n.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,d,f)=>n.value.evaluate(c,d,{},f),needGeometry:Lm(u)}}function zd(u,n){return u<n?-1:u>n?1:0}function Lm(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let n=1;n<u.length;n++)if(Lm(u[n]))return!0;return!1}function Bd(u){if(!u)return!0;let n=u[0];return u.length<=1?n!=="any":n==="=="?_p(u[1],u[2],"=="):n==="!="?Vd(_p(u[1],u[2],"==")):n==="<"||n===">"||n==="<="||n===">="?_p(u[1],u[2],n):n==="any"?(c=u.slice(1),["any"].concat(c.map(Bd))):n==="all"?["all"].concat(u.slice(1).map(Bd)):n==="none"?["all"].concat(u.slice(1).map(Bd).map(Vd)):n==="in"?Nm(u[1],u.slice(2)):n==="!in"?Vd(Nm(u[1],u.slice(2))):n==="has"?Fm(u[1]):n!=="!has"||Vd(Fm(u[1]));var c}function _p(u,n,c){switch(u){case"$type":return[`filter-type-${c}`,n];case"$id":return[`filter-id-${c}`,n];default:return[`filter-${c}`,u,n]}}function Nm(u,n){if(n.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(c=>typeof c!=typeof n[0])?["filter-in-large",u,["literal",n.sort(zd)]]:["filter-in-small",u,["literal",n]]}}function Fm(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Vd(u){return["!",u]}function Ud(u){let n=typeof u;if(n==="number"||n==="boolean"||n==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let f="[";for(let b of u)f+=`${Ud(b)},`;return`${f}]`}let c=Object.keys(u).sort(),d="{";for(let f=0;f<c.length;f++)d+=`${JSON.stringify(c[f])}:${Ud(u[c[f]])},`;return`${d}}`}function zm(u){let n="";for(let c of Pe)n+=`/${Ud(u[c])}`;return n}function Mu(u){let n=u.value;return n?[new $e(u.key,n,"constants have been deprecated as of v8")]:[]}function jr(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function al(u){if(Array.isArray(u))return u.map(al);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){let n={};for(let c in u)n[c]=al(u[c]);return n}return jr(u)}function zo(u){let n=u.key,c=u.value,d=u.valueSpec||{},f=u.objectElementValidators||{},b=u.style,y=u.styleSpec,x=u.validateSpec,S=[],k=Ai(c);if(k!=="object")return[new $e(n,c,`object expected, ${k} found`)];for(let D in c){let L=D.split(".")[0],V=vo(d,L)||d["*"],H;if(vo(f,L))H=f[L];else if(vo(d,L))H=x;else if(f["*"])H=f["*"];else{if(!d["*"]){S.push(new $e(n,c[D],`unknown property "${D}"`));continue}H=x}S=S.concat(H({key:(n&&`${n}.`)+D,value:c[D],valueSpec:V,style:b,styleSpec:y,object:c,objectKey:D,validateSpec:x},c))}for(let D in d)f[D]||d[D].required&&d[D].default===void 0&&c[D]===void 0&&S.push(new $e(n,c,`missing required property "${D}"`));return S}function bp(u){let n=u.value,c=u.valueSpec,d=u.style,f=u.styleSpec,b=u.key,y=u.arrayElementValidator||u.validateSpec;if(Ai(n)!=="array")return[new $e(b,n,`array expected, ${Ai(n)} found`)];if(c.length&&n.length!==c.length)return[new $e(b,n,`array length ${c.length} expected, length ${n.length} found`)];if(c["min-length"]&&n.length<c["min-length"])return[new $e(b,n,`array length at least ${c["min-length"]} expected, length ${n.length} found`)];let x={type:c.value,values:c.values};f.$version<7&&(x.function=c.function),Ai(c.value)==="object"&&(x=c.value);let S=[];for(let k=0;k<n.length;k++)S=S.concat(y({array:n,arrayIndex:k,value:n[k],valueSpec:x,validateSpec:u.validateSpec,style:d,styleSpec:f,key:`${b}[${k}]`}));return S}function Iu(u){let n=u.key,c=u.value,d=u.valueSpec,f=Ai(c);return f==="number"&&c!=c&&(f="NaN"),f!=="number"?[new $e(n,c,`number expected, ${f} found`)]:"minimum"in d&&c<d.minimum?[new $e(n,c,`${c} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&c>d.maximum?[new $e(n,c,`${c} is greater than the maximum value ${d.maximum}`)]:[]}function yp(u){let n=u.valueSpec,c=jr(u.value.type),d,f,b,y={},x=c!=="categorical"&&u.value.property===void 0,S=!x,k=Ai(u.value.stops)==="array"&&Ai(u.value.stops[0])==="array"&&Ai(u.value.stops[0][0])==="object",D=zo({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(H){if(c==="identity")return[new $e(H.key,H.value,'identity function may not have a "stops" property')];let Z=[],te=H.value;return Z=Z.concat(bp({key:H.key,value:te,valueSpec:H.valueSpec,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:L})),Ai(te)==="array"&&te.length===0&&Z.push(new $e(H.key,te,"array must have at least one stop")),Z},default:function(H){return H.validateSpec({key:H.key,value:H.value,valueSpec:n,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec})}}});return c==="identity"&&x&&D.push(new $e(u.key,u.value,'missing required property "property"')),c==="identity"||u.value.stops||D.push(new $e(u.key,u.value,'missing required property "stops"')),c==="exponential"&&u.valueSpec.expression&&!wc(u.valueSpec)&&D.push(new $e(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(S&&!Da(u.valueSpec)?D.push(new $e(u.key,u.value,"property functions not supported")):x&&!xc(u.valueSpec)&&D.push(new $e(u.key,u.value,"zoom functions not supported"))),c!=="categorical"&&!k||u.value.property!==void 0||D.push(new $e(u.key,u.value,'"property" property is required')),D;function L(H){let Z=[],te=H.value,de=H.key;if(Ai(te)!=="array")return[new $e(de,te,`array expected, ${Ai(te)} found`)];if(te.length!==2)return[new $e(de,te,`array length 2 expected, length ${te.length} found`)];if(k){if(Ai(te[0])!=="object")return[new $e(de,te,`object expected, ${Ai(te[0])} found`)];if(te[0].zoom===void 0)return[new $e(de,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new $e(de,te,"object stop key must have value")];if(b&&b>jr(te[0].zoom))return[new $e(de,te[0].zoom,"stop zoom values must appear in ascending order")];jr(te[0].zoom)!==b&&(b=jr(te[0].zoom),f=void 0,y={}),Z=Z.concat(zo({key:`${de}[0]`,value:te[0],valueSpec:{zoom:{}},validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:Iu,value:V}}))}else Z=Z.concat(V({key:`${de}[0]`,value:te[0],validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec},te));return Ti(al(te[1]))?Z.concat([new $e(`${de}[1]`,te[1],"expressions are not allowed in function stops.")]):Z.concat(H.validateSpec({key:`${de}[1]`,value:te[1],valueSpec:n,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec}))}function V(H,Z){let te=Ai(H.value),de=jr(H.value),be=H.value!==null?H.value:Z;if(d){if(te!==d)return[new $e(H.key,be,`${te} stop domain type must match previous stop domain type ${d}`)]}else d=te;if(te!=="number"&&te!=="string"&&te!=="boolean")return[new $e(H.key,be,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&c!=="categorical"){let Re=`number expected, ${te} found`;return Da(n)&&c===void 0&&(Re+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new $e(H.key,be,Re)]}return c!=="categorical"||te!=="number"||isFinite(de)&&Math.floor(de)===de?c!=="categorical"&&te==="number"&&f!==void 0&&de<f?[new $e(H.key,be,"stop domain values must appear in ascending order")]:(f=de,c==="categorical"&&de in y?[new $e(H.key,be,"stop domain values must be unique")]:(y[de]=!0,[])):[new $e(H.key,be,`integer expected, found ${de}`)]}}function sa(u){let n=(u.expressionContext==="property"?ao:mr)(al(u.value),u.valueSpec);if(n.result==="error")return n.value.map(d=>new $e(`${u.key}${d.key}`,u.value,d.message));let c=n.value.expression||n.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!c.outputDefined())return[new $e(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!ns(c))return[new $e(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!ns(c))return[new $e(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!Eo(c,["zoom","feature-state"]))return[new $e(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!na(c))return[new $e(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function vp(u){let n=u.key,c=u.value,d=Ai(c);return d!=="string"?[new $e(n,c,`color expected, ${d} found`)]:fi.parse(String(c))?[]:[new $e(n,c,`color expected, "${c}" found`)]}function Au(u){let n=u.key,c=u.value,d=u.valueSpec,f=[];return Array.isArray(d.values)?d.values.indexOf(jr(c))===-1&&f.push(new $e(n,c,`expected one of [${d.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(d.values).indexOf(jr(c))===-1&&f.push(new $e(n,c,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(c)} found`)),f}function xp(u){return bs(al(u.value))?sa($i({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Bm(u)}function Bm(u){let n=u.value,c=u.key;if(Ai(n)!=="array")return[new $e(c,n,`array expected, ${Ai(n)} found`)];let d=u.styleSpec,f,b=[];if(n.length<1)return[new $e(c,n,"filter array must have at least 1 element")];switch(b=b.concat(Au({key:`${c}[0]`,value:n[0],valueSpec:d.filter_operator,style:u.style,styleSpec:u.styleSpec})),jr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&jr(n[1])==="$type"&&b.push(new $e(c,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&b.push(new $e(c,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=Ai(n[1]),f!=="string"&&b.push(new $e(`${c}[1]`,n[1],`string expected, ${f} found`)));for(let y=2;y<n.length;y++)f=Ai(n[y]),jr(n[1])==="$type"?b=b.concat(Au({key:`${c}[${y}]`,value:n[y],valueSpec:d.geometry_type,style:u.style,styleSpec:u.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&b.push(new $e(`${c}[${y}]`,n[y],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let y=1;y<n.length;y++)b=b.concat(Bm({key:`${c}[${y}]`,value:n[y],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":f=Ai(n[1]),n.length!==2?b.push(new $e(c,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&b.push(new $e(`${c}[1]`,n[1],`string expected, ${f} found`))}return b}function Vm(u,n){let c=u.key,d=u.validateSpec,f=u.style,b=u.styleSpec,y=u.value,x=u.objectKey,S=b[`${n}_${u.layerType}`];if(!S)return[];let k=x.match(/^(.*)-transition$/);if(n==="paint"&&k&&S[k[1]]&&S[k[1]].transition)return d({key:c,value:y,valueSpec:b.transition,style:f,styleSpec:b});let D=u.valueSpec||S[x];if(!D)return[new $e(c,y,`unknown property "${x}"`)];let L;if(Ai(y)==="string"&&Da(D)&&!D.tokens&&(L=/^{([^}]+)}$/.exec(y)))return[new $e(c,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(L[1])} }\`.`)];let V=[];return u.layerType==="symbol"&&(x==="text-field"&&f&&!f.glyphs&&V.push(new $e(c,y,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Cc(al(y))&&jr(y.type)==="identity"&&V.push(new $e(c,y,'"text-font" does not support identity functions'))),V.concat(d({key:u.key,value:y,valueSpec:D,style:f,styleSpec:b,expressionContext:"property",propertyType:n,propertyKey:x}))}function Um(u){return Vm(u,"paint")}function Ec(u){return Vm(u,"layout")}function Sc(u){let n=[],c=u.value,d=u.key,f=u.style,b=u.styleSpec;if(Ai(c)!=="object")return[new $e(d,c,`object expected, ${Ai(c)} found`)];c.type||c.ref||n.push(new $e(d,c,'either "type" or "ref" is required'));let y=jr(c.type),x=jr(c.ref);if(c.id){let S=jr(c.id);for(let k=0;k<u.arrayIndex;k++){let D=f.layers[k];jr(D.id)===S&&n.push(new $e(d,c.id,`duplicate layer id "${c.id}", previously used at line ${D.id.__line__}`))}}if("ref"in c){let S;["type","source","source-layer","filter","layout"].forEach(k=>{k in c&&n.push(new $e(d,c[k],`"${k}" is prohibited for ref layers`))}),f.layers.forEach(k=>{jr(k.id)===x&&(S=k)}),S?S.ref?n.push(new $e(d,c.ref,"ref cannot reference another ref layer")):y=jr(S.type):n.push(new $e(d,c.ref,`ref layer "${x}" not found`))}else if(y!=="background")if(c.source){let S=f.sources&&f.sources[c.source],k=S&&jr(S.type);S?k==="vector"&&y==="raster"?n.push(new $e(d,c.source,`layer "${c.id}" requires a raster source`)):k!=="raster-dem"&&y==="hillshade"?n.push(new $e(d,c.source,`layer "${c.id}" requires a raster-dem source`)):k==="raster"&&y!=="raster"?n.push(new $e(d,c.source,`layer "${c.id}" requires a vector source`)):k!=="vector"||c["source-layer"]?k==="raster-dem"&&y!=="hillshade"?n.push(new $e(d,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!c.paint||!c.paint["line-gradient"]||k==="geojson"&&S.lineMetrics||n.push(new $e(d,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new $e(d,c,`layer "${c.id}" must specify a "source-layer"`)):n.push(new $e(d,c.source,`source "${c.source}" not found`))}else n.push(new $e(d,c,'missing required property "source"'));return n=n.concat(zo({key:d,value:c,valueSpec:b.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${d}.type`,value:c.type,valueSpec:b.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:c,objectKey:"type"}),filter:xp,layout:S=>zo({layer:c,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":k=>Ec($i({layerType:y},k))}}),paint:S=>zo({layer:c,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":k=>Um($i({layerType:y},k))}})}})),n}function ln(u){let n=u.value,c=u.key,d=Ai(n);return d!=="string"?[new $e(c,n,`string expected, ${d} found`)]:[]}let Tc={promoteId:function({key:u,value:n}){if(Ai(n)==="string")return ln({key:u,value:n});{let c=[];for(let d in n)c.push(...ln({key:`${u}.${d}`,value:n[d]}));return c}}};function wp(u){let n=u.value,c=u.key,d=u.styleSpec,f=u.style,b=u.validateSpec;if(!n.type)return[new $e(c,n,'"type" is required')];let y=jr(n.type),x;switch(y){case"vector":case"raster":return x=zo({key:c,value:n,valueSpec:d[`source_${y.replace("-","_")}`],style:u.style,styleSpec:d,objectElementValidators:Tc,validateSpec:b}),x;case"raster-dem":return x=function(S){var k;let D=(k=S.sourceName)!==null&&k!==void 0?k:"",L=S.value,V=S.styleSpec,H=V.source_raster_dem,Z=S.style,te=[],de=Ai(L);if(L===void 0)return te;if(de!=="object")return te.push(new $e("source_raster_dem",L,`object expected, ${de} found`)),te;let be=jr(L.encoding)==="custom",Re=["redFactor","greenFactor","blueFactor","baseShift"],we=S.value.encoding?`"${S.value.encoding}"`:"Default";for(let q in L)!be&&Re.includes(q)?te.push(new $e(q,L[q],`In "${D}": "${q}" is only valid when "encoding" is set to "custom". ${we} encoding found`)):H[q]?te=te.concat(S.validateSpec({key:q,value:L[q],valueSpec:H[q],validateSpec:S.validateSpec,style:Z,styleSpec:V})):te.push(new $e(q,L[q],`unknown property "${q}"`));return te}({sourceName:c,value:n,style:u.style,styleSpec:d,validateSpec:b}),x;case"geojson":if(x=zo({key:c,value:n,valueSpec:d.source_geojson,style:f,styleSpec:d,validateSpec:b,objectElementValidators:Tc}),n.cluster)for(let S in n.clusterProperties){let[k,D]=n.clusterProperties[S],L=typeof k=="string"?[k,["accumulated"],["get",S]]:k;x.push(...sa({key:`${c}.${S}.map`,value:D,expressionContext:"cluster-map"})),x.push(...sa({key:`${c}.${S}.reduce`,value:L,expressionContext:"cluster-reduce"}))}return x;case"video":return zo({key:c,value:n,valueSpec:d.source_video,style:f,validateSpec:b,styleSpec:d});case"image":return zo({key:c,value:n,valueSpec:d.source_image,style:f,validateSpec:b,styleSpec:d});case"canvas":return[new $e(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Au({key:`${c}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function jm(u){let n=u.value,c=u.styleSpec,d=c.light,f=u.style,b=[],y=Ai(n);if(n===void 0)return b;if(y!=="object")return b=b.concat([new $e("light",n,`object expected, ${y} found`)]),b;for(let x in n){let S=x.match(/^(.*)-transition$/);b=b.concat(S&&d[S[1]]&&d[S[1]].transition?u.validateSpec({key:x,value:n[x],valueSpec:c.transition,validateSpec:u.validateSpec,style:f,styleSpec:c}):d[x]?u.validateSpec({key:x,value:n[x],valueSpec:d[x],validateSpec:u.validateSpec,style:f,styleSpec:c}):[new $e(x,n[x],`unknown property "${x}"`)])}return b}function qm(u){let n=u.value,c=u.styleSpec,d=c.sky,f=u.style,b=Ai(n);if(n===void 0)return[];if(b!=="object")return[new $e("sky",n,`object expected, ${b} found`)];let y=[];for(let x in n)y=y.concat(d[x]?u.validateSpec({key:x,value:n[x],valueSpec:d[x],style:f,styleSpec:c}):[new $e(x,n[x],`unknown property "${x}"`)]);return y}function Mc(u){let n=u.value,c=u.styleSpec,d=c.terrain,f=u.style,b=[],y=Ai(n);if(n===void 0)return b;if(y!=="object")return b=b.concat([new $e("terrain",n,`object expected, ${y} found`)]),b;for(let x in n)b=b.concat(d[x]?u.validateSpec({key:x,value:n[x],valueSpec:d[x],validateSpec:u.validateSpec,style:f,styleSpec:c}):[new $e(x,n[x],`unknown property "${x}"`)]);return b}function Cp(u){let n=[],c=u.value,d=u.key;if(Array.isArray(c)){let f=[],b=[];for(let y in c)c[y].id&&f.includes(c[y].id)&&n.push(new $e(d,c,`all the sprites' ids must be unique, but ${c[y].id} is duplicated`)),f.push(c[y].id),c[y].url&&b.includes(c[y].url)&&n.push(new $e(d,c,`all the sprites' URLs must be unique, but ${c[y].url} is duplicated`)),b.push(c[y].url),n=n.concat(zo({key:`${d}[${y}]`,value:c[y],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return n}return ln({key:d,value:c})}function jd(u){return n=u.value,n&&n.constructor===Object?[]:[new $e(u.key,u.value,`object expected, ${Ai(u.value)} found`)];var n}let Hm={"*":()=>[],array:bp,boolean:function(u){let n=u.value,c=u.key,d=Ai(n);return d!=="boolean"?[new $e(c,n,`boolean expected, ${d} found`)]:[]},number:Iu,color:vp,constants:Mu,enum:Au,filter:xp,function:yp,layer:Sc,object:zo,source:wp,light:jm,sky:qm,terrain:Mc,projection:function(u){let n=u.value,c=u.styleSpec,d=c.projection,f=u.style,b=Ai(n);if(n===void 0)return[];if(b!=="object")return[new $e("projection",n,`object expected, ${b} found`)];let y=[];for(let x in n)y=y.concat(d[x]?u.validateSpec({key:x,value:n[x],valueSpec:d[x],style:f,styleSpec:c}):[new $e(x,n[x],`unknown property "${x}"`)]);return y},projectionDefinition:function(u){let n=u.key,c=u.value;c=c instanceof String?c.valueOf():c;let d=Ai(c);return d!=="array"||function(f){return Array.isArray(f)&&f.length===3&&typeof f[0]=="string"&&typeof f[1]=="string"&&typeof f[2]=="number"}(c)||function(f){return!!["interpolate","step","literal"].includes(f[0])}(c)?["array","string"].includes(d)?[]:[new $e(n,c,`projection expected, invalid type "${d}" found`)]:[new $e(n,c,`projection expected, invalid array ${JSON.stringify(c)} found`)]},string:ln,formatted:function(u){return ln(u).length===0?[]:sa(u)},resolvedImage:function(u){return ln(u).length===0?[]:sa(u)},padding:function(u){let n=u.key,c=u.value;if(Ai(c)==="array"){if(c.length<1||c.length>4)return[new $e(n,c,`padding requires 1 to 4 values; ${c.length} values found`)];let d={type:"number"},f=[];for(let b=0;b<c.length;b++)f=f.concat(u.validateSpec({key:`${n}[${b}]`,value:c[b],validateSpec:u.validateSpec,valueSpec:d}));return f}return Iu({key:n,value:c,valueSpec:{}})},numberArray:function(u){let n=u.key,c=u.value;if(Ai(c)==="array"){let d={type:"number"};if(c.length<1)return[new $e(n,c,"array length at least 1 expected, length 0 found")];let f=[];for(let b=0;b<c.length;b++)f=f.concat(u.validateSpec({key:`${n}[${b}]`,value:c[b],validateSpec:u.validateSpec,valueSpec:d}));return f}return Iu({key:n,value:c,valueSpec:{}})},colorArray:function(u){let n=u.key,c=u.value;if(Ai(c)==="array"){if(c.length<1)return[new $e(n,c,"array length at least 1 expected, length 0 found")];let d=[];for(let f=0;f<c.length;f++)d=d.concat(vp({key:`${n}[${f}]`,value:c[f]}));return d}return vp({key:n,value:c})},variableAnchorOffsetCollection:function(u){let n=u.key,c=u.value,d=Ai(c),f=u.styleSpec;if(d!=="array"||c.length<1||c.length%2!=0)return[new $e(n,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let b=[];for(let y=0;y<c.length;y+=2)b=b.concat(Au({key:`${n}[${y}]`,value:c[y],valueSpec:f.layout_symbol["text-anchor"]})),b=b.concat(bp({key:`${n}[${y+1}]`,value:c[y+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:f}));return b},sprite:Cp,state:jd};function Ic(u){let n=u.value,c=u.valueSpec,d=u.styleSpec;return u.validateSpec=Ic,c.expression&&Cc(jr(n))?yp(u):c.expression&&Ti(al(n))?sa(u):c.type&&Hm[c.type]?Hm[c.type](u):zo($i({},u,{valueSpec:c.type?d[c.type]:c}))}function $m(u){let n=u.value,c=u.key,d=ln(u);return d.length||(n.indexOf("{fontstack}")===-1&&d.push(new $e(c,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&d.push(new $e(c,n,'"glyphs" url must include a "{range}" token'))),d}function Gn(u,n=se){let c=[];return c=c.concat(Ic({key:"",value:u,valueSpec:n.$root,styleSpec:n,style:u,validateSpec:Ic,objectElementValidators:{glyphs:$m,"*":()=>[]}})),u.constants&&(c=c.concat(Mu({key:"constants",value:u.constants}))),Ac(c)}function ys(u){return function(n){return u(si(ft({},n),{validateSpec:Ic}))}}function Ac(u){return[].concat(u).sort((n,c)=>n.line-c.line)}function vs(u){return function(...n){return Ac(u.apply(this,n))}}Gn.source=vs(ys(wp)),Gn.sprite=vs(ys(Cp)),Gn.glyphs=vs(ys($m)),Gn.light=vs(ys(jm)),Gn.sky=vs(ys(qm)),Gn.terrain=vs(ys(Mc)),Gn.state=vs(ys(jd)),Gn.layer=vs(ys(Sc)),Gn.filter=vs(ys(xp)),Gn.paintProperty=vs(ys(Um)),Gn.layoutProperty=vs(ys(Ec));let kc=Gn,qd=kc.light,Cb=kc.sky,Ep=kc.paintProperty,Hd=kc.layoutProperty;function Sp(u,n){let c=!1;if(n&&n.length)for(let d of n)u.fire(new he(new Error(d.message))),c=!0;return c}class Pc{constructor(n,c,d){let f=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;let y=new Int32Array(this.arrayBuffer);n=y[0],this.d=(c=y[1])+2*(d=y[2]);for(let S=0;S<this.d*this.d;S++){let k=y[3+S],D=y[3+S+1];f.push(k===D?null:y.subarray(k,D))}let x=y[3+f.length+1];this.keys=y.subarray(y[3+f.length],x),this.bboxes=y.subarray(x),this.insert=this._insertReadonly}else{this.d=c+2*d;for(let y=0;y<this.d*this.d;y++)f.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=n,this.padding=d,this.scale=c/n,this.uid=0;let b=d/c*n;this.min=-b,this.max=n+b}insert(n,c,d,f,b){this._forEachCell(c,d,f,b,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(b)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,c,d,f,b,y){this.cells[b].push(y)}query(n,c,d,f,b){let y=this.min,x=this.max;if(n<=y&&c<=y&&x<=d&&x<=f&&!b)return Array.prototype.slice.call(this.keys);{let S=[];return this._forEachCell(n,c,d,f,this._queryCell,S,{},b),S}}_queryCell(n,c,d,f,b,y,x,S){let k=this.cells[b];if(k!==null){let D=this.keys,L=this.bboxes;for(let V=0;V<k.length;V++){let H=k[V];if(x[H]===void 0){let Z=4*H;(S?S(L[Z+0],L[Z+1],L[Z+2],L[Z+3]):n<=L[Z+2]&&c<=L[Z+3]&&d>=L[Z+0]&&f>=L[Z+1])?(x[H]=!0,y.push(D[H])):x[H]=!1}}}}_forEachCell(n,c,d,f,b,y,x,S){let k=this._convertToCellCoord(n),D=this._convertToCellCoord(c),L=this._convertToCellCoord(d),V=this._convertToCellCoord(f);for(let H=k;H<=L;H++)for(let Z=D;Z<=V;Z++){let te=this.d*Z+H;if((!S||S(this._convertFromCellCoord(H),this._convertFromCellCoord(Z),this._convertFromCellCoord(H+1),this._convertFromCellCoord(Z+1)))&&b.call(this,n,c,d,f,te,y,x,S))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let n=this.cells,c=3+this.cells.length+1+1,d=0;for(let y=0;y<this.cells.length;y++)d+=this.cells[y].length;let f=new Int32Array(c+d+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let b=c;for(let y=0;y<n.length;y++){let x=n[y];f[3+y]=b,f.set(x,b),b+=x.length}return f[3+n.length]=b,f.set(this.keys,b),b+=this.keys.length,f[3+n.length+1]=b,f.set(this.bboxes,b),b+=this.bboxes.length,f.buffer}static serialize(n,c){let d=n.toArrayBuffer();return c&&c.push(d),{buffer:d}}static deserialize(n){return new Pc(n.buffer)}}let aa={};function Dt(u,n,c={}){if(aa[u])throw new Error(`${u} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:u,writeable:!1}),aa[u]={klass:n,omit:c.omit||[],shallow:c.shallow||[]}}Dt("Object",Object),Dt("TransferableGridIndex",Pc),Dt("Color",fi),Dt("Error",Error),Dt("AJAXError",io),Dt("ResolvedImage",yn),Dt("StylePropertyFunction",Fo),Dt("StyleExpression",ri,{omit:["_evaluator"]}),Dt("ZoomDependentExpression",zn),Dt("ZoomConstantExpression",Zr),Dt("CompoundExpression",Fn,{omit:["_evaluate"]});for(let u in Jt)Jt[u]._classRegistryKey||Dt(`Expression_${u}`,Jt[u]);function $d(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Gd(u){return u.$name||u.constructor._classRegistryKey}function Gm(u){return!function(n){if(n===null||typeof n!="object")return!1;let c=Gd(n);return!(!c||c==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||$d(u)||eo(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function Dc(u,n){if(Gm(u))return($d(u)||eo(u))&&n&&n.push(u),ArrayBuffer.isView(u)&&n&&n.push(u.buffer),u instanceof ImageData&&n&&n.push(u.data.buffer),u;if(Array.isArray(u)){let b=[];for(let y of u)b.push(Dc(y,n));return b}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);let c=Gd(u);if(!c)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!aa[c])throw new Error(`${c} is not registered.`);let{klass:d}=aa[c],f=d.serialize?d.serialize(u,n):{};if(d.serialize){if(n&&f===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let b in u){if(!u.hasOwnProperty(b)||aa[c].omit.indexOf(b)>=0)continue;let y=u[b];f[b]=aa[c].shallow.indexOf(b)>=0?y:Dc(y,n)}u instanceof Error&&(f.message=u.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(f.$name=c),f}function ku(u){if(Gm(u))return u;if(Array.isArray(u))return u.map(ku);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);let n=Gd(u)||"Object";if(!aa[n])throw new Error(`can't deserialize unregistered class ${n}`);let{klass:c}=aa[n];if(!c)throw new Error(`can't deserialize unregistered class ${n}`);if(c.deserialize)return c.deserialize(u);let d=Object.create(c.prototype);for(let f of Object.keys(u)){if(f==="$name")continue;let b=u[f];d[f]=aa[n].shallow.indexOf(f)>=0?b:ku(b)}return d}class Tp{constructor(){this.first=!0}update(n,c){let d=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=c),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=d,!0))}}let Fi={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Hangul Syllables":u=>u>=44032&&u<=55215,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function Wd(u){for(let n of u)if(Zd(n.charCodeAt(0)))return!0;return!1}function Eb(u){for(let n of u)if(!Zm(n.charCodeAt(0)))return!1;return!0}function Mp(u){let n=u.map(c=>{try{return new RegExp(`\\p{sc=${c}}`,"u").source}catch{return null}}).filter(c=>c);return new RegExp(n.join("|"),"u")}let Wm=Mp(["Arab","Dupl","Mong","Ougr","Syrc"]);function Zm(u){return!Wm.test(String.fromCodePoint(u))}let Ip=Mp(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Zd(u){return!(u!==746&&u!==747&&(u<4352||!(Fi["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Fi["CJK Compatibility"](u)||Fi["CJK Strokes"](u)||!(!Fi["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Fi["Enclosed CJK Letters and Months"](u)||Fi["Ideographic Description Characters"](u)||Fi.Kanbun(u)||Fi.Katakana(u)&&u!==12540||!(!Fi["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Fi["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Fi["Vertical Forms"](u)||Fi["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||Ip.test(String.fromCodePoint(u)))))}function Pu(u){return!(Zd(u)||function(n){return!!(Fi["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Fi["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Fi["Letterlike Symbols"](n)||Fi["Number Forms"](n)||Fi["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Fi["Control Pictures"](n)&&n!==9251||Fi["Optical Character Recognition"](n)||Fi["Enclosed Alphanumerics"](n)||Fi["Geometric Shapes"](n)||Fi["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Fi["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Fi["CJK Symbols and Punctuation"](n)||Fi.Katakana(n)||Fi["Private Use Area"](n)||Fi["CJK Compatibility Forms"](n)||Fi["Small Form Variants"](n)||Fi["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(u))}let Sb=Mp(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Xd(u){return Sb.test(String.fromCodePoint(u))}function Tb(u,n){return!(!n&&Xd(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Fi.Khmer(u))}function Mb(u){for(let n of u)if(Xd(n.charCodeAt(0)))return!0;return!1}let Ra=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){if(Ra.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(u,n){return s(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(u.pluginStatus!=="loading")return this.setState(u),u;let c=u.pluginURL,d=new Promise(b=>{this.loadScriptResolve=b});n(c);let f=new Promise(b=>setTimeout(()=>b(),this.TIMEOUT));if(yield Promise.race([d,f]),this.isParsed()){let b={pluginStatus:"loaded",pluginURL:c};return this.setState(b),b}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${c}`)})}};class Cr{constructor(n,c){this.zoom=n,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Tp,this.transition={})}isSupportedScript(n){return function(c,d){for(let f of c)if(!Tb(f.charCodeAt(0),d))return!1;return!0}(n,Ra.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let n=this.zoom,c=n-Math.floor(n),d=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*c}}}class Du{constructor(n,c){this.property=n,this.value=c,this.expression=function(d,f){if(Cc(d))return new Fo(d,f);if(Ti(d)){let b=ao(d,f);if(b.result==="error")throw new Error(b.value.map(y=>`${y.key}: ${y.message}`).join(", "));return b.value}{let b=d;return f.type==="color"&&typeof d=="string"?b=fi.parse(d):f.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?f.type!=="numberArray"||typeof d!="number"&&!Array.isArray(d)?f.type!=="colorArray"||typeof d!="string"&&!Array.isArray(d)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(d)?b=Zt.parse(d):f.type==="projectionDefinition"&&typeof d=="string"&&(b=vn.parse(d)):b=fr.parse(d):b=ir.parse(d):b=Bi.parse(d),{kind:"constant",evaluate:()=>b}}}(c===void 0?n.specification.default:c,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,c,d){return this.property.possiblyEvaluate(this,n,c,d)}}class Ap{constructor(n){this.property=n,this.value=new Du(n,void 0)}transitioned(n,c){return new Ym(this.property,this.value,c,ai({},n.transition,this.transition),n.now)}untransitioned(){return new Ym(this.property,this.value,null,{},0)}}class Xm{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Pn(this._values[n].value.value)}setValue(n,c){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Ap(this._values[n].property)),this._values[n].value=new Du(this._values[n].property,c===null?void 0:Pn(c))}getTransition(n){return Pn(this._values[n].transition)}setTransition(n,c){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Ap(this._values[n].property)),this._values[n].transition=Pn(c)||void 0}serialize(){let n={};for(let c of Object.keys(this._values)){let d=this.getValue(c);d!==void 0&&(n[c]=d);let f=this.getTransition(c);f!==void 0&&(n[`${c}-transition`]=f)}return n}transitioned(n,c){let d=new Km(this._properties);for(let f of Object.keys(this._values))d._values[f]=this._values[f].transitioned(n,c._values[f]);return d}untransitioned(){let n=new Km(this._properties);for(let c of Object.keys(this._values))n._values[c]=this._values[c].untransitioned();return n}}class Ym{constructor(n,c,d,f,b){this.property=n,this.value=c,this.begin=b+f.delay||0,this.end=this.begin+f.duration||0,n.specification.transition&&(f.delay||f.duration)&&(this.prior=d)}possiblyEvaluate(n,c,d){let f=n.now||0,b=this.value.possiblyEvaluate(n,c,d),y=this.prior;if(y){if(f>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(f<this.begin)return y.possiblyEvaluate(n,c,d);{let x=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(n,c,d),b,Bt(x))}}return b}}class Km{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,c,d){let f=new Yd(this._properties);for(let b of Object.keys(this._values))f._values[b]=this._values[b].possiblyEvaluate(n,c,d);return f}hasTransition(){for(let n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Ib{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Pn(this._values[n].value)}setValue(n,c){this._values[n]=new Du(this._values[n].property,c===null?void 0:Pn(c))}serialize(){let n={};for(let c of Object.keys(this._values)){let d=this.getValue(c);d!==void 0&&(n[c]=d)}return n}possiblyEvaluate(n,c,d){let f=new Yd(this._properties);for(let b of Object.keys(this._values))f._values[b]=this._values[b].possiblyEvaluate(n,c,d);return f}}class lo{constructor(n,c,d){this.property=n,this.value=c,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,c,d,f){return this.property.evaluate(this.value,this.parameters,n,c,d,f)}}class Yd{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class $t{constructor(n){this.specification=n}possiblyEvaluate(n,c){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(c)}interpolate(n,c,d){let f=Jo[this.specification.type];return f?f(n,c,d):n}}class ei{constructor(n,c){this.specification=n,this.overrides=c}possiblyEvaluate(n,c,d,f){return new lo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(c,null,{},d,f)}:n.expression,c)}interpolate(n,c,d){if(n.value.kind!=="constant"||c.value.kind!=="constant")return n;if(n.value.value===void 0||c.value.value===void 0)return new lo(this,{kind:"constant",value:void 0},n.parameters);let f=Jo[this.specification.type];if(f){let b=f(n.value.value,c.value.value,d);return new lo(this,{kind:"constant",value:b},n.parameters)}return n}evaluate(n,c,d,f,b,y){return n.kind==="constant"?n.value:n.evaluate(c,d,f,b,y)}}class Ru extends ei{possiblyEvaluate(n,c,d,f){if(n.value===void 0)return new lo(this,{kind:"constant",value:void 0},c);if(n.expression.kind==="constant"){let b=n.expression.evaluate(c,null,{},d,f),y=n.property.specification.type==="resolvedImage"&&typeof b!="string"?b.name:b,x=this._calculate(y,y,y,c);return new lo(this,{kind:"constant",value:x},c)}if(n.expression.kind==="camera"){let b=this._calculate(n.expression.evaluate({zoom:c.zoom-1}),n.expression.evaluate({zoom:c.zoom}),n.expression.evaluate({zoom:c.zoom+1}),c);return new lo(this,{kind:"constant",value:b},c)}return new lo(this,n.expression,c)}evaluate(n,c,d,f,b,y){if(n.kind==="source"){let x=n.evaluate(c,d,f,b,y);return this._calculate(x,x,x,c)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(c.zoom)-1},d,f),n.evaluate({zoom:Math.floor(c.zoom)},d,f),n.evaluate({zoom:Math.floor(c.zoom)+1},d,f),c):n.value}_calculate(n,c,d,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:c}:{from:d,to:c}}interpolate(n){return n}}class kp{constructor(n){this.specification=n}possiblyEvaluate(n,c,d,f){if(n.value!==void 0){if(n.expression.kind==="constant"){let b=n.expression.evaluate(c,null,{},d,f);return this._calculate(b,b,b,c)}return this._calculate(n.expression.evaluate(new Cr(Math.floor(c.zoom-1),c)),n.expression.evaluate(new Cr(Math.floor(c.zoom),c)),n.expression.evaluate(new Cr(Math.floor(c.zoom+1),c)),c)}}_calculate(n,c,d,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:c}:{from:d,to:c}}interpolate(n){return n}}class Pp{constructor(n){this.specification=n}possiblyEvaluate(n,c,d,f){return!!n.expression.evaluate(c,null,{},d,f)}interpolate(){return!1}}class tn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let c in n){let d=n[c];d.specification.overridable&&this.overridableProperties.push(c);let f=this.defaultPropertyValues[c]=new Du(d,void 0),b=this.defaultTransitionablePropertyValues[c]=new Ap(d);this.defaultTransitioningPropertyValues[c]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=f.possiblyEvaluate({})}}}Dt("DataDrivenProperty",ei),Dt("DataConstantProperty",$t),Dt("CrossFadedDataDrivenProperty",Ru),Dt("CrossFadedProperty",kp),Dt("ColorRampProperty",Pp);let Dp="-transition";class os extends ye{constructor(n,c){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),c.layout&&(this._unevaluatedLayout=new Ib(c.layout)),c.paint)){this._transitionablePaint=new Xm(c.paint);for(let d in n.paint)this.setPaintProperty(d,n.paint[d],{validate:!1});for(let d in n.layout)this.setLayoutProperty(d,n.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yd(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,c,d={}){c!=null&&this._validate(Hd,`layers.${this.id}.layout.${n}`,n,c,d)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,c):this.visibility=c)}getPaintProperty(n){return n.endsWith(Dp)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,c,d={}){if(c!=null&&this._validate(Ep,`layers.${this.id}.paint.${n}`,n,c,d))return!1;if(n.endsWith(Dp))return this._transitionablePaint.setTransition(n.slice(0,-11),c||void 0),!1;{let f=this._transitionablePaint._values[n],b=f.property.specification["property-type"]==="cross-faded-data-driven",y=f.value.isDataDriven(),x=f.value;this._transitionablePaint.setValue(n,c),this._handleSpecialPaintPropertyUpdate(n);let S=this._transitionablePaint._values[n].value;return S.isDataDriven()||y||b||this._handleOverridablePaintPropertyUpdate(n,x,S)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,c,d){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,c){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,c)}serialize(){let n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ba(n,(c,d)=>!(c===void 0||d==="layout"&&!Object.keys(c).length||d==="paint"&&!Object.keys(c).length))}_validate(n,c,d,f,b={}){return(!b||b.validate!==!1)&&Sp(this,n.call(kc,{key:c,layerType:this.type,objectKey:d,value:f,styleSpec:se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let n in this.paint._values){let c=this.paint.get(n);if(c instanceof lo&&Da(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}let Qm={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Bl{constructor(n,c){this._structArray=n,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Fr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,c){return n._trim(),c&&(n.isTransferred=!0,c.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){let c=Object.create(this.prototype);return c.arrayBuffer=n.arrayBuffer,c.length=n.length,c.capacity=n.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function kr(u,n=1){let c=0,d=0;return{members:u.map(f=>{let b=Qm[f.type].BYTES_PER_ELEMENT,y=c=Rc(c,Math.max(n,b)),x=f.components||1;return d=Math.max(d,b),c+=b*x,{name:f.name,type:f.type,components:x,offset:y}}),size:Rc(c,Math.max(d,n)),alignment:n}}function Rc(u,n){return Math.ceil(u/n)*n}class Ou extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c){let d=this.length;return this.resize(d+1),this.emplace(d,n,c)}emplace(n,c,d){let f=2*n;return this.int16[f+0]=c,this.int16[f+1]=d,n}}Ou.prototype.bytesPerElement=4,Dt("StructArrayLayout2i4",Ou);class Lu extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d){let f=this.length;return this.resize(f+1),this.emplace(f,n,c,d)}emplace(n,c,d,f){let b=3*n;return this.int16[b+0]=c,this.int16[b+1]=d,this.int16[b+2]=f,n}}Lu.prototype.bytesPerElement=6,Dt("StructArrayLayout3i6",Lu);class Vl extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,f){let b=this.length;return this.resize(b+1),this.emplace(b,n,c,d,f)}emplace(n,c,d,f,b){let y=4*n;return this.int16[y+0]=c,this.int16[y+1]=d,this.int16[y+2]=f,this.int16[y+3]=b,n}}Vl.prototype.bytesPerElement=8,Dt("StructArrayLayout4i8",Vl);class Rp extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,y){let x=this.length;return this.resize(x+1),this.emplace(x,n,c,d,f,b,y)}emplace(n,c,d,f,b,y,x){let S=6*n;return this.int16[S+0]=c,this.int16[S+1]=d,this.int16[S+2]=f,this.int16[S+3]=b,this.int16[S+4]=y,this.int16[S+5]=x,n}}Rp.prototype.bytesPerElement=12,Dt("StructArrayLayout2i4i12",Rp);class Op extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,y){let x=this.length;return this.resize(x+1),this.emplace(x,n,c,d,f,b,y)}emplace(n,c,d,f,b,y,x){let S=4*n,k=8*n;return this.int16[S+0]=c,this.int16[S+1]=d,this.uint8[k+4]=f,this.uint8[k+5]=b,this.uint8[k+6]=y,this.uint8[k+7]=x,n}}Op.prototype.bytesPerElement=8,Dt("StructArrayLayout2i4ub8",Op);class Oc extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c){let d=this.length;return this.resize(d+1),this.emplace(d,n,c)}emplace(n,c,d){let f=2*n;return this.float32[f+0]=c,this.float32[f+1]=d,n}}Oc.prototype.bytesPerElement=8,Dt("StructArrayLayout2f8",Oc);class Lp extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,y,x,S,k,D){let L=this.length;return this.resize(L+1),this.emplace(L,n,c,d,f,b,y,x,S,k,D)}emplace(n,c,d,f,b,y,x,S,k,D,L){let V=10*n;return this.uint16[V+0]=c,this.uint16[V+1]=d,this.uint16[V+2]=f,this.uint16[V+3]=b,this.uint16[V+4]=y,this.uint16[V+5]=x,this.uint16[V+6]=S,this.uint16[V+7]=k,this.uint16[V+8]=D,this.uint16[V+9]=L,n}}Lp.prototype.bytesPerElement=20,Dt("StructArrayLayout10ui20",Lp);class m extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,y,x,S,k,D,L,V){let H=this.length;return this.resize(H+1),this.emplace(H,n,c,d,f,b,y,x,S,k,D,L,V)}emplace(n,c,d,f,b,y,x,S,k,D,L,V,H){let Z=12*n;return this.int16[Z+0]=c,this.int16[Z+1]=d,this.int16[Z+2]=f,this.int16[Z+3]=b,this.uint16[Z+4]=y,this.uint16[Z+5]=x,this.uint16[Z+6]=S,this.uint16[Z+7]=k,this.int16[Z+8]=D,this.int16[Z+9]=L,this.int16[Z+10]=V,this.int16[Z+11]=H,n}}m.prototype.bytesPerElement=24,Dt("StructArrayLayout4i4ui4i24",m);class i extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d){let f=this.length;return this.resize(f+1),this.emplace(f,n,c,d)}emplace(n,c,d,f){let b=3*n;return this.float32[b+0]=c,this.float32[b+1]=d,this.float32[b+2]=f,n}}i.prototype.bytesPerElement=12,Dt("StructArrayLayout3f12",i);class l extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){let c=this.length;return this.resize(c+1),this.emplace(c,n)}emplace(n,c){return this.uint32[1*n+0]=c,n}}l.prototype.bytesPerElement=4,Dt("StructArrayLayout1ul4",l);class h extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,y,x,S,k){let D=this.length;return this.resize(D+1),this.emplace(D,n,c,d,f,b,y,x,S,k)}emplace(n,c,d,f,b,y,x,S,k,D){let L=10*n,V=5*n;return this.int16[L+0]=c,this.int16[L+1]=d,this.int16[L+2]=f,this.int16[L+3]=b,this.int16[L+4]=y,this.int16[L+5]=x,this.uint32[V+3]=S,this.uint16[L+8]=k,this.uint16[L+9]=D,n}}h.prototype.bytesPerElement=20,Dt("StructArrayLayout6i1ul2ui20",h);class p extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,y){let x=this.length;return this.resize(x+1),this.emplace(x,n,c,d,f,b,y)}emplace(n,c,d,f,b,y,x){let S=6*n;return this.int16[S+0]=c,this.int16[S+1]=d,this.int16[S+2]=f,this.int16[S+3]=b,this.int16[S+4]=y,this.int16[S+5]=x,n}}p.prototype.bytesPerElement=12,Dt("StructArrayLayout2i2i2i12",p);class g extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b){let y=this.length;return this.resize(y+1),this.emplace(y,n,c,d,f,b)}emplace(n,c,d,f,b,y){let x=4*n,S=8*n;return this.float32[x+0]=c,this.float32[x+1]=d,this.float32[x+2]=f,this.int16[S+6]=b,this.int16[S+7]=y,n}}g.prototype.bytesPerElement=16,Dt("StructArrayLayout2f1f2i16",g);class v extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,y){let x=this.length;return this.resize(x+1),this.emplace(x,n,c,d,f,b,y)}emplace(n,c,d,f,b,y,x){let S=16*n,k=4*n,D=8*n;return this.uint8[S+0]=c,this.uint8[S+1]=d,this.float32[k+1]=f,this.float32[k+2]=b,this.int16[D+6]=y,this.int16[D+7]=x,n}}v.prototype.bytesPerElement=16,Dt("StructArrayLayout2ub2f2i16",v);class C extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d){let f=this.length;return this.resize(f+1),this.emplace(f,n,c,d)}emplace(n,c,d,f){let b=3*n;return this.uint16[b+0]=c,this.uint16[b+1]=d,this.uint16[b+2]=f,n}}C.prototype.bytesPerElement=6,Dt("StructArrayLayout3ui6",C);class T extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,y,x,S,k,D,L,V,H,Z,te,de,be){let Re=this.length;return this.resize(Re+1),this.emplace(Re,n,c,d,f,b,y,x,S,k,D,L,V,H,Z,te,de,be)}emplace(n,c,d,f,b,y,x,S,k,D,L,V,H,Z,te,de,be,Re){let we=24*n,q=12*n,ce=48*n;return this.int16[we+0]=c,this.int16[we+1]=d,this.uint16[we+2]=f,this.uint16[we+3]=b,this.uint32[q+2]=y,this.uint32[q+3]=x,this.uint32[q+4]=S,this.uint16[we+10]=k,this.uint16[we+11]=D,this.uint16[we+12]=L,this.float32[q+7]=V,this.float32[q+8]=H,this.uint8[ce+36]=Z,this.uint8[ce+37]=te,this.uint8[ce+38]=de,this.uint32[q+10]=be,this.int16[we+22]=Re,n}}T.prototype.bytesPerElement=48,Dt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",T);class P extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d,f,b,y,x,S,k,D,L,V,H,Z,te,de,be,Re,we,q,ce,Ee,Ze,mt,Ke,at,vt,gt){let xt=this.length;return this.resize(xt+1),this.emplace(xt,n,c,d,f,b,y,x,S,k,D,L,V,H,Z,te,de,be,Re,we,q,ce,Ee,Ze,mt,Ke,at,vt,gt)}emplace(n,c,d,f,b,y,x,S,k,D,L,V,H,Z,te,de,be,Re,we,q,ce,Ee,Ze,mt,Ke,at,vt,gt,xt){let ut=32*n,zt=16*n;return this.int16[ut+0]=c,this.int16[ut+1]=d,this.int16[ut+2]=f,this.int16[ut+3]=b,this.int16[ut+4]=y,this.int16[ut+5]=x,this.int16[ut+6]=S,this.int16[ut+7]=k,this.uint16[ut+8]=D,this.uint16[ut+9]=L,this.uint16[ut+10]=V,this.uint16[ut+11]=H,this.uint16[ut+12]=Z,this.uint16[ut+13]=te,this.uint16[ut+14]=de,this.uint16[ut+15]=be,this.uint16[ut+16]=Re,this.uint16[ut+17]=we,this.uint16[ut+18]=q,this.uint16[ut+19]=ce,this.uint16[ut+20]=Ee,this.uint16[ut+21]=Ze,this.uint16[ut+22]=mt,this.uint32[zt+12]=Ke,this.float32[zt+13]=at,this.float32[zt+14]=vt,this.uint16[ut+30]=gt,this.uint16[ut+31]=xt,n}}P.prototype.bytesPerElement=64,Dt("StructArrayLayout8i15ui1ul2f2ui64",P);class O extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){let c=this.length;return this.resize(c+1),this.emplace(c,n)}emplace(n,c){return this.float32[1*n+0]=c,n}}O.prototype.bytesPerElement=4,Dt("StructArrayLayout1f4",O);class F extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d){let f=this.length;return this.resize(f+1),this.emplace(f,n,c,d)}emplace(n,c,d,f){let b=3*n;return this.uint16[6*n+0]=c,this.float32[b+1]=d,this.float32[b+2]=f,n}}F.prototype.bytesPerElement=12,Dt("StructArrayLayout1ui2f12",F);class N extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d){let f=this.length;return this.resize(f+1),this.emplace(f,n,c,d)}emplace(n,c,d,f){let b=4*n;return this.uint32[2*n+0]=c,this.uint16[b+2]=d,this.uint16[b+3]=f,n}}N.prototype.bytesPerElement=8,Dt("StructArrayLayout1ul2ui8",N);class X extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c){let d=this.length;return this.resize(d+1),this.emplace(d,n,c)}emplace(n,c,d){let f=2*n;return this.uint16[f+0]=c,this.uint16[f+1]=d,n}}X.prototype.bytesPerElement=4,Dt("StructArrayLayout2ui4",X);class J extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){let c=this.length;return this.resize(c+1),this.emplace(c,n)}emplace(n,c){return this.uint16[1*n+0]=c,n}}J.prototype.bytesPerElement=2,Dt("StructArrayLayout1ui2",J);class ge extends Fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d,f){let b=this.length;return this.resize(b+1),this.emplace(b,n,c,d,f)}emplace(n,c,d,f,b){let y=4*n;return this.float32[y+0]=c,this.float32[y+1]=d,this.float32[y+2]=f,this.float32[y+3]=b,n}}ge.prototype.bytesPerElement=16,Dt("StructArrayLayout4f16",ge);class me extends Bl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new R(this.anchorPointX,this.anchorPointY)}}me.prototype.size=20;class _e extends h{get(n){return new me(this,n)}}Dt("CollisionBoxArray",_e);class xe extends Bl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}xe.prototype.size=48;class Me extends T{get(n){return new xe(this,n)}}Dt("PlacedSymbolArray",Me);class Te extends Bl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Te.prototype.size=64;class ke extends P{get(n){return new Te(this,n)}}Dt("SymbolInstanceArray",ke);class Fe extends O{getoffsetX(n){return this.float32[1*n+0]}}Dt("GlyphOffsetArray",Fe);class De extends Lu{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Dt("SymbolLineVertexArray",De);class We extends Bl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}We.prototype.size=12;class lt extends F{get(n){return new We(this,n)}}Dt("TextAnchorOffsetArray",lt);class et extends Bl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}et.prototype.size=8;class rt extends N{get(n){return new et(this,n)}}Dt("FeatureIndexArray",rt);class st extends Ou{}class Mt extends Ou{}class Et extends Ou{}class _t extends Rp{}class qt extends Op{}class xi extends Oc{}class qi extends Lp{}class Pr extends m{}class gr extends i{}class Dr extends l{}class Rr extends p{}class yr extends v{}class Qi extends C{}class cn extends X{}let Cn=kr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Bn}=Cn;class Ji{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,c,d,f){let b=this.segments[this.segments.length-1];return n>Ji.MAX_VERTEX_ARRAY_LENGTH&&Ar(`Max vertices per segment is ${Ji.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Ji.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!b||b.vertexLength+n>Ji.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==f?this.createNewSegment(c,d,f):b}createNewSegment(n,c,d){let f={vertexOffset:n.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(f.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(f),f}getOrCreateLatestSegment(n,c,d){return this.prepareSegment(0,n,c,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let n of this.segments)for(let c in n.vaos)n.vaos[c].destroy()}static simpleSegment(n,c,d,f){return new Ji([{vertexOffset:n,primitiveOffset:c,vertexLength:d,primitiveLength:f,vaos:{},sortKey:0}])}}function ll(u,n){return 256*(u=Le(Math.floor(u),0,255))+Le(Math.floor(n),0,255)}Ji.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Dt("SegmentVector",Ji);let la=kr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var cl,Ul,Nu,ul={exports:{}},jl={exports:{}},Bo={exports:{}},dl=function(){if(Nu)return ul.exports;Nu=1;var u=(cl||(cl=1,jl.exports=function(c,d){var f,b,y,x,S,k,D,L;for(b=c.length-(f=3&c.length),y=d,S=3432918353,k=461845907,L=0;L<b;)D=255&c.charCodeAt(L)|(255&c.charCodeAt(++L))<<8|(255&c.charCodeAt(++L))<<16|(255&c.charCodeAt(++L))<<24,++L,y=27492+(65535&(x=5*(65535&(y=(y^=D=(65535&(D=(D=(65535&D)*S+(((D>>>16)*S&65535)<<16)&4294967295)<<15|D>>>17))*k+(((D>>>16)*k&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(D=0,f){case 3:D^=(255&c.charCodeAt(L+2))<<16;case 2:D^=(255&c.charCodeAt(L+1))<<8;case 1:y^=D=(65535&(D=(D=(65535&(D^=255&c.charCodeAt(L)))*S+(((D>>>16)*S&65535)<<16)&4294967295)<<15|D>>>17))*k+(((D>>>16)*k&65535)<<16)&4294967295}return y^=c.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}),jl.exports),n=(Ul||(Ul=1,Bo.exports=function(c,d){for(var f,b=c.length,y=d^b,x=0;b>=4;)f=1540483477*(65535&(f=255&c.charCodeAt(x)|(255&c.charCodeAt(++x))<<8|(255&c.charCodeAt(++x))<<16|(255&c.charCodeAt(++x))<<24))+((1540483477*(f>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),b-=4,++x;switch(b){case 3:y^=(255&c.charCodeAt(x+2))<<16;case 2:y^=(255&c.charCodeAt(x+1))<<8;case 1:y=1540483477*(65535&(y^=255&c.charCodeAt(x)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}),Bo.exports);return ul.exports=u,ul.exports.murmur3=u,ul.exports.murmur2=n,ul.exports}(),Oa=_(dl);class hl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,c,d,f){this.ids.push(rn(n)),this.positions.push(c,d,f)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let c=rn(n),d=0,f=this.ids.length-1;for(;d<f;){let y=d+f>>1;this.ids[y]>=c?f=y:d=y+1}let b=[];for(;this.ids[d]===c;)b.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return b}static serialize(n,c){let d=new Float64Array(n.ids),f=new Uint32Array(n.positions);return nn(d,f,0,d.length-1),c&&c.push(d.buffer,f.buffer),{ids:d,positions:f}}static deserialize(n){let c=new hl;return c.ids=n.ids,c.positions=n.positions,c.indexed=!0,c}}function rn(u){let n=+u;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Oa(String(u))}function nn(u,n,c,d){for(;c<d;){let f=u[c+d>>1],b=c-1,y=d+1;for(;;){do b++;while(u[b]<f);do y--;while(u[y]>f);if(b>=y)break;co(u,b,y),co(n,3*b,3*y),co(n,3*b+1,3*y+1),co(n,3*b+2,3*y+2)}y-c<d-y?(nn(u,n,c,y),c=y+1):(nn(u,n,y+1,d),d=y)}}function co(u,n,c){let d=u[n];u[n]=u[c],u[c]=d}Dt("FeaturePositionMap",hl);class Er{constructor(n,c){this.gl=n.gl,this.location=c}}class Kd extends Er{constructor(n,c){super(n,c),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Jm extends Er{constructor(n,c){super(n,c),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class eg extends Er{constructor(n,c){super(n,c),this.current=fi.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}let Ab=new Float32Array(16);function Np(u){return[ll(255*u.r,255*u.g),ll(255*u.b,255*u.a)]}class Fu{constructor(n,c,d){this.value=n,this.uniformNames=c.map(f=>`u_${f}`),this.type=d}setUniform(n,c,d){n.set(d.constantOr(this.value))}getBinding(n,c,d){return this.type==="color"?new eg(n,c):new Kd(n,c)}}class ss{constructor(n,c){this.uniformNames=c.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=n.tlbr}setUniform(n,c,d,f){let b=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;b&&n.set(b)}getBinding(n,c,d){return d.substr(0,9)==="u_pattern"?new Jm(n,c):new Kd(n,c)}}class ca{constructor(n,c,d,f){this.expression=n,this.type=d,this.maxValue=0,this.paintVertexAttributes=c.map(b=>({name:`a_${b}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,c,d,f,b){let y=this.paintVertexArray.length,x=this.expression.evaluate(new Cr(0),c,{},f,[],b);this.paintVertexArray.resize(n),this._setPaintValue(y,n,x)}updatePaintArray(n,c,d,f){let b=this.expression.evaluate({zoom:0},d,f);this._setPaintValue(n,c,b)}_setPaintValue(n,c,d){if(this.type==="color"){let f=Np(d);for(let b=n;b<c;b++)this.paintVertexArray.emplace(b,f[0],f[1])}else{for(let f=n;f<c;f++)this.paintVertexArray.emplace(f,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class as{constructor(n,c,d,f,b,y){this.expression=n,this.uniformNames=c.map(x=>`u_${x}_t`),this.type=d,this.useIntegerZoom=f,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=c.map(x=>({name:`a_${x}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(n,c,d,f,b){let y=this.expression.evaluate(new Cr(this.zoom),c,{},f,[],b),x=this.expression.evaluate(new Cr(this.zoom+1),c,{},f,[],b),S=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(S,n,y,x)}updatePaintArray(n,c,d,f){let b=this.expression.evaluate({zoom:this.zoom},d,f),y=this.expression.evaluate({zoom:this.zoom+1},d,f);this._setPaintValue(n,c,b,y)}_setPaintValue(n,c,d,f){if(this.type==="color"){let b=Np(d),y=Np(f);for(let x=n;x<c;x++)this.paintVertexArray.emplace(x,b[0],b[1],y[0],y[1])}else{for(let b=n;b<c;b++)this.paintVertexArray.emplace(b,d,f);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,c){let d=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,f=Le(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(f)}getBinding(n,c,d){return new Kd(n,c)}}class La{constructor(n,c,d,f,b,y){this.expression=n,this.type=c,this.useIntegerZoom=d,this.zoom=f,this.layerId=y,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(n,c,d){let f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(f,n,c.patterns&&c.patterns[this.layerId],d)}updatePaintArray(n,c,d,f,b){this._setPaintValues(n,c,d.patterns&&d.patterns[this.layerId],b)}_setPaintValues(n,c,d,f){if(!f||!d)return;let{min:b,mid:y,max:x}=d,S=f[b],k=f[y],D=f[x];if(S&&k&&D)for(let L=n;L<c;L++)this.zoomInPaintVertexArray.emplace(L,k.tl[0],k.tl[1],k.br[0],k.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],k.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(L,k.tl[0],k.tl[1],k.br[0],k.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],k.pixelRatio,D.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,la.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,la.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Qd{constructor(n,c,d){this.binders={},this._buffers=[];let f=[];for(let b in n.paint._values){if(!d(b))continue;let y=n.paint.get(b);if(!(y instanceof lo&&Da(y.property.specification)))continue;let x=Fp(b,n.type),S=y.value,k=y.property.specification.type,D=y.property.useIntegerZoom,L=y.property.specification["property-type"],V=L==="cross-faded"||L==="cross-faded-data-driven";if(S.kind==="constant")this.binders[b]=V?new ss(S.value,x):new Fu(S.value,x,k),f.push(`/u_${b}`);else if(S.kind==="source"||V){let H=Yw(b,k,"source");this.binders[b]=V?new La(S,k,D,c,H,n.id):new ca(S,x,k,H),f.push(`/a_${b}`)}else{let H=Yw(b,k,"composite");this.binders[b]=new as(S,x,k,D,c,H),f.push(`/z_${b}`)}}this.cacheKey=f.sort().join("")}getMaxValue(n){let c=this.binders[n];return c instanceof ca||c instanceof as?c.maxValue:0}populatePaintArrays(n,c,d,f,b){for(let y in this.binders){let x=this.binders[y];(x instanceof ca||x instanceof as||x instanceof La)&&x.populatePaintArray(n,c,d,f,b)}}setConstantPatternPositions(n,c){for(let d in this.binders){let f=this.binders[d];f instanceof ss&&f.setConstantPatternPositions(n,c)}}updatePaintArrays(n,c,d,f,b){let y=!1;for(let x in n){let S=c.getPositions(x);for(let k of S){let D=d.feature(k.index);for(let L in this.binders){let V=this.binders[L];if((V instanceof ca||V instanceof as||V instanceof La)&&V.expression.isStateDependent===!0){let H=f.paint.get(L);V.expression=H.value,V.updatePaintArray(k.start,k.end,D,n[x],b),y=!0}}}}return y}defines(){let n=[];for(let c in this.binders){let d=this.binders[c];(d instanceof Fu||d instanceof ss)&&n.push(...d.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){let n=[];for(let c in this.binders){let d=this.binders[c];if(d instanceof ca||d instanceof as)for(let f=0;f<d.paintVertexAttributes.length;f++)n.push(d.paintVertexAttributes[f].name);else if(d instanceof La)for(let f=0;f<la.members.length;f++)n.push(la.members[f].name)}return n}getBinderUniforms(){let n=[];for(let c in this.binders){let d=this.binders[c];if(d instanceof Fu||d instanceof ss||d instanceof as)for(let f of d.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,c){let d=[];for(let f in this.binders){let b=this.binders[f];if(b instanceof Fu||b instanceof ss||b instanceof as){for(let y of b.uniformNames)if(c[y]){let x=b.getBinding(n,c[y],y);d.push({name:y,property:f,binding:x})}}}return d}setUniforms(n,c,d,f){for(let{name:b,property:y,binding:x}of c)this.binders[y].setUniform(x,f,d.get(y),b)}updatePaintBuffers(n){this._buffers=[];for(let c in this.binders){let d=this.binders[c];if(n&&d instanceof La){let f=n.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(d instanceof ca||d instanceof as)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(n){for(let c in this.binders){let d=this.binders[c];(d instanceof ca||d instanceof as||d instanceof La)&&d.upload(n)}this.updatePaintBuffers()}destroy(){for(let n in this.binders){let c=this.binders[n];(c instanceof ca||c instanceof as||c instanceof La)&&c.destroy()}}}class pl{constructor(n,c,d=()=>!0){this.programConfigurations={};for(let f of n)this.programConfigurations[f.id]=new Qd(f,c,d);this.needsUpload=!1,this._featureMap=new hl,this._bufferOffset=0}populatePaintArrays(n,c,d,f,b,y){for(let x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(n,c,f,b,y);c.id!==void 0&&this._featureMap.add(c.id,d,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,c,d,f){for(let b of d)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(n,this._featureMap,c,b,f)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(let c in this.programConfigurations)this.programConfigurations[c].upload(n);this.needsUpload=!1}}destroy(){for(let n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Fp(u,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${n}-`,"").replace(/-/g,"_")]}function Yw(u,n,c){let d={color:{source:Oc,composite:ge},number:{source:O,composite:Oc}},f=function(b){return{"line-pattern":{source:qi,composite:qi},"fill-pattern":{source:qi,composite:qi},"fill-extrusion-pattern":{source:qi,composite:qi}}[b]}(u);return f&&f[c]||d[n][c]}Dt("ConstantBinder",Fu),Dt("CrossFadedConstantBinder",ss),Dt("SourceExpressionBinder",ca),Dt("CrossFadedCompositeBinder",La),Dt("CompositeExpressionBinder",as),Dt("ProgramConfiguration",Qd,{omit:["_buffers"]}),Dt("ProgramConfigurationSet",pl);let kb=Math.pow(2,14)-1,Kw=-kb-1;function zu(u){let n=fe/u.extent,c=u.loadGeometry();for(let d=0;d<c.length;d++){let f=c[d];for(let b=0;b<f.length;b++){let y=f[b],x=Math.round(y.x*n),S=Math.round(y.y*n);y.x=Le(x,Kw,kb),y.y=Le(S,Kw,kb),(x<y.x||x>y.x+1||S<y.y||S>y.y+1)&&Ar("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function Bu(u,n){return{type:u.type,id:u.id,properties:u.properties,geometry:n?zu(u):[]}}let Qw=-32768;function tP(u,n,c,d,f){u.emplaceBack(Qw+8*n+d,Qw+8*c+f)}class Pb{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Mt,this.indexArray=new Qi,this.segments=new Ji,this.programConfigurations=new pl(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,d){let f=this.layers[0],b=[],y=null,x=!1,S=f.type==="heatmap";if(f.type==="circle"){let D=f;y=D.layout.get("circle-sort-key"),x=!y.isConstant(),S=S||D.paint.get("circle-pitch-alignment")==="map"}let k=S?c.subdivisionGranularity.circle:1;for(let{feature:D,id:L,index:V,sourceLayerIndex:H}of n){let Z=this.layers[0]._featureFilter.needGeometry,te=Bu(D,Z);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),te,d))continue;let de=x?y.evaluate(te,{},d):void 0,be={id:L,properties:D.properties,type:D.type,sourceLayerIndex:H,index:V,geometry:Z?te.geometry:zu(D),patterns:{},sortKey:de};b.push(be)}x&&b.sort((D,L)=>D.sortKey-L.sortKey);for(let D of b){let{geometry:L,index:V,sourceLayerIndex:H}=D,Z=n[V].feature;this.addFeature(D,L,V,d,k),c.featureIndex.insert(Z,L,V,H,this.index)}}update(n,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Bn),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,c,d,f,b=1){let y;switch(b){case 1:y=[0,7];break;case 3:y=[0,2,5,7];break;case 5:y=[0,1,3,4,6,7];break;case 7:y=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${b}; valid values are 1, 3, 5, 7.`)}let x=y.length;for(let S of c)for(let k of S){let D=k.x,L=k.y;if(D<0||D>=fe||L<0||L>=fe)continue;let V=this.segments.prepareSegment(x*x,this.layoutVertexArray,this.indexArray,n.sortKey),H=V.vertexLength;for(let Z=0;Z<x;Z++)for(let te=0;te<x;te++)tP(this.layoutVertexArray,D,L,y[te],y[Z]);for(let Z=0;Z<x-1;Z++)for(let te=0;te<x-1;te++){let de=H+Z*x+te,be=H+(Z+1)*x+te;this.indexArray.emplaceBack(de,be+1,de+1),this.indexArray.emplaceBack(de,be,be+1)}V.vertexLength+=x*x,V.primitiveLength+=(x-1)*(x-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{},f)}}function Jw(u,n){for(let c=0;c<u.length;c++)if(Vu(n,u[c]))return!0;for(let c=0;c<n.length;c++)if(Vu(u,n[c]))return!0;return!!Db(u,n)}function iP(u,n,c){return!!Vu(u,n)||!!Rb(n,u,c)}function e2(u,n){if(u.length===1)return i2(n,u[0]);for(let c=0;c<n.length;c++){let d=n[c];for(let f=0;f<d.length;f++)if(Vu(u,d[f]))return!0}for(let c=0;c<u.length;c++)if(i2(n,u[c]))return!0;for(let c=0;c<n.length;c++)if(Db(u,n[c]))return!0;return!1}function rP(u,n,c){if(u.length>1){if(Db(u,n))return!0;for(let d=0;d<n.length;d++)if(Rb(n[d],u,c))return!0}for(let d=0;d<u.length;d++)if(Rb(u[d],n,c))return!0;return!1}function Db(u,n){if(u.length===0||n.length===0)return!1;for(let c=0;c<u.length-1;c++){let d=u[c],f=u[c+1];for(let b=0;b<n.length-1;b++)if(nP(d,f,n[b],n[b+1]))return!0}return!1}function nP(u,n,c,d){return Ki(u,c,d)!==Ki(n,c,d)&&Ki(u,n,c)!==Ki(u,n,d)}function Rb(u,n,c){let d=c*c;if(n.length===1)return u.distSqr(n[0])<d;for(let f=1;f<n.length;f++)if(t2(u,n[f-1],n[f])<d)return!0;return!1}function t2(u,n,c){let d=n.distSqr(c);if(d===0)return u.distSqr(n);let f=((u.x-n.x)*(c.x-n.x)+(u.y-n.y)*(c.y-n.y))/d;return u.distSqr(f<0?n:f>1?c:c.sub(n)._mult(f)._add(n))}function i2(u,n){for(let c=0;c<u.length;c++)if(Vu(u[c],n))return!0;return!1}function Vu(u,n){let c=!1;for(let d=0,f=u.length-1;d<u.length;f=d++){let b=u[d],y=u[f];b.y>n.y!=y.y>n.y&&n.x<(y.x-b.x)*(n.y-b.y)/(y.y-b.y)+b.x&&(c=!c)}return c}function oP(u,n,c){let d=c[0],f=c[2];if(u.x<d.x&&n.x<d.x||u.x>f.x&&n.x>f.x||u.y<d.y&&n.y<d.y||u.y>f.y&&n.y>f.y)return!1;let b=Ki(u,n,c[0]);return b!==Ki(u,n,c[1])||b!==Ki(u,n,c[2])||b!==Ki(u,n,c[3])}function zp(u,n,c){let d=n.paint.get(u).value;return d.kind==="constant"?d.value:c.programConfigurations.get(n.id).getMaxValue(u)}function tg(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function ig(u,n,c,d,f){if(!n[0]&&!n[1])return u;let b=R.convert(n)._mult(f);c==="viewport"&&b._rotate(-d);let y=[];for(let x=0;x<u.length;x++)y.push(u[x].sub(b));return y}let r2,n2;Dt("CircleBucket",Pb,{omit:["layers"]});var sP={get paint(){return n2=n2||new tn({"circle-radius":new ei(se.paint_circle["circle-radius"]),"circle-color":new ei(se.paint_circle["circle-color"]),"circle-blur":new ei(se.paint_circle["circle-blur"]),"circle-opacity":new ei(se.paint_circle["circle-opacity"]),"circle-translate":new $t(se.paint_circle["circle-translate"]),"circle-translate-anchor":new $t(se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new $t(se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new $t(se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ei(se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ei(se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ei(se.paint_circle["circle-stroke-opacity"])})},get layout(){return r2=r2||new tn({"circle-sort-key":new ei(se.layout_circle["circle-sort-key"])})}};class aP extends os{constructor(n){super(n,sP)}createBucket(n){return new Pb(n)}queryRadius(n){let c=n;return zp("circle-radius",this,c)+zp("circle-stroke-width",this,c)+tg(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:c,featureState:d,geometry:f,transform:b,pixelsToTileUnits:y,unwrappedTileID:x,getElevation:S}){let k=ig(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-b.bearingInRadians,y),D=this.paint.get("circle-radius").evaluate(c,d)+this.paint.get("circle-stroke-width").evaluate(c,d),L=this.paint.get("circle-pitch-alignment")==="map",V=L?k:function(Z,te,de,be){return Z.map(Re=>o2(Re,te,de,be))}(k,b,x,S),H=L?D*y:D;for(let Z of f)for(let te of Z){let de=L?te:o2(te,b,x,S),be=H,Re=b.projectTileCoordinates(te.x,te.y,x,S).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?be*=Re/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(be*=b.cameraToCenterDistance/Re),iP(V,de,be))return!0}return!1}}function o2(u,n,c,d){let f=n.projectTileCoordinates(u.x,u.y,c,d).point;return new R((.5*f.x+.5)*n.width,(.5*-f.y+.5)*n.height)}class s2 extends Pb{}let a2;Dt("HeatmapBucket",s2,{omit:["layers"]});var lP={get paint(){return a2=a2||new tn({"heatmap-radius":new ei(se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ei(se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new $t(se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Pp(se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new $t(se.paint_heatmap["heatmap-opacity"])})}};function Ob(u,{width:n,height:c},d,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*c*d)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${n*c*d}`)}else f=new Uint8Array(n*c*d);return u.width=n,u.height=c,u.data=f,u}function l2(u,{width:n,height:c},d){if(n===u.width&&c===u.height)return;let f=Ob({},{width:n,height:c},d);Lb(u,f,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,n),height:Math.min(u.height,c)},d),u.width=n,u.height=c,u.data=f.data}function Lb(u,n,c,d,f,b){if(f.width===0||f.height===0)return n;if(f.width>u.width||f.height>u.height||c.x>u.width-f.width||c.y>u.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||d.x>n.width-f.width||d.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");let y=u.data,x=n.data;if(y===x)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<f.height;S++){let k=((c.y+S)*u.width+c.x)*b,D=((d.y+S)*n.width+d.x)*b;for(let L=0;L<f.width*b;L++)x[D+L]=y[k+L]}return n}class Bp{constructor(n,c){Ob(this,n,1,c)}resize(n){l2(this,n,1)}clone(){return new Bp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,c,d,f,b){Lb(n,c,d,f,b,1)}}class xs{constructor(n,c){Ob(this,n,4,c)}resize(n){l2(this,n,4)}replace(n,c){c?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new xs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,c,d,f,b){Lb(n,c,d,f,b,4)}}function c2(u){let n={},c=u.resolution||256,d=u.clips?u.clips.length:1,f=u.image||new xs({width:c,height:d});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);let b=(y,x,S)=>{n[u.evaluationKey]=S;let k=u.expression.evaluate(n);f.data[y+x+0]=Math.floor(255*k.r/k.a),f.data[y+x+1]=Math.floor(255*k.g/k.a),f.data[y+x+2]=Math.floor(255*k.b/k.a),f.data[y+x+3]=Math.floor(255*k.a)};if(u.clips)for(let y=0,x=0;y<d;++y,x+=4*c)for(let S=0,k=0;S<c;S++,k+=4){let D=S/(c-1),{start:L,end:V}=u.clips[y];b(x,k,L*(1-D)+V*D)}else for(let y=0,x=0;y<c;y++,x+=4)b(0,x,y/(c-1));return f}Dt("AlphaImage",Bp),Dt("RGBAImage",xs);let Nb="big-fb";class cP extends os{createBucket(n){return new s2(n)}constructor(n){super(n,lP),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=c2({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Nb)&&this.heatmapFbos.delete(Nb)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let u2;var uP={get paint(){return u2=u2||new tn({"hillshade-illumination-direction":new $t(se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new $t(se.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new $t(se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new $t(se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new $t(se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new $t(se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new $t(se.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new $t(se.paint_hillshade["hillshade-method"])})}};class dP extends os{constructor(n){super(n,uP),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let n=this.paint.get("hillshade-illumination-direction").values,c=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,f=this.paint.get("hillshade-shadow-color").values,b=Math.max(n.length,c.length,d.length,f.length);n=n.concat(Array(b-n.length).fill(n.at(-1))),c=c.concat(Array(b-c.length).fill(c.at(-1))),d=d.concat(Array(b-d.length).fill(d.at(-1))),f=f.concat(Array(b-f.length).fill(f.at(-1)));let y=c.map(ya);return{directionRadians:n.map(ya),altitudeRadians:y,shadowColor:f,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let hP=kr([{name:"a_pos",components:2,type:"Int16"}],4),{members:pP}=hP;function Fb(u,n,c){let d=c.patternDependencies,f=!1;for(let b of n){let y=b.paint.get(`${u}-pattern`);y.isConstant()||(f=!0);let x=y.constantOr(null);x&&(f=!0,d[x.to]=!0,d[x.from]=!0)}return f}function zb(u,n,c,d,f){let b=f.patternDependencies;for(let y of n){let x=y.paint.get(`${u}-pattern`).value;if(x.kind!=="constant"){let S=x.evaluate({zoom:d-1},c,{},f.availableImages),k=x.evaluate({zoom:d},c,{},f.availableImages),D=x.evaluate({zoom:d+1},c,{},f.availableImages);S=S&&S.name?S.name:S,k=k&&k.name?k.name:k,D=D&&D.name?D.name:D,b[S]=!0,b[k]=!0,b[D]=!0,c.patterns[y.id]={min:S,mid:k,max:D}}}return c}function d2(u,n,c,d,f){let b;if(f===function(y,x,S,k){let D=0;for(let L=x,V=S-k;L<S;L+=k)D+=(y[V]-y[L])*(y[L+1]+y[V+1]),V=L;return D}(u,n,c,d)>0)for(let y=n;y<c;y+=d)b=m2(y/d|0,u[y],u[y+1],b);else for(let y=c-d;y>=n;y-=d)b=m2(y/d|0,u[y],u[y+1],b);return b&&Jd(b,b.next)&&(qp(b),b=b.next),b}function Uu(u,n){if(!u)return u;n||(n=u);let c,d=u;do if(c=!1,d.steiner||!Jd(d,d.next)&&Xr(d.prev,d,d.next)!==0)d=d.next;else{if(qp(d),d=n=d.prev,d===d.next)break;c=!0}while(c||d!==n);return n}function Vp(u,n,c,d,f,b,y){if(!u)return;!y&&b&&function(S,k,D,L){let V=S;do V.z===0&&(V.z=Bb(V.x,V.y,k,D,L)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==S);V.prevZ.nextZ=null,V.prevZ=null,function(H){let Z,te=1;do{let de,be=H;H=null;let Re=null;for(Z=0;be;){Z++;let we=be,q=0;for(let Ee=0;Ee<te&&(q++,we=we.nextZ,we);Ee++);let ce=te;for(;q>0||ce>0&&we;)q!==0&&(ce===0||!we||be.z<=we.z)?(de=be,be=be.nextZ,q--):(de=we,we=we.nextZ,ce--),Re?Re.nextZ=de:H=de,de.prevZ=Re,Re=de;be=we}Re.nextZ=null,te*=2}while(Z>1)}(V)}(u,d,f,b);let x=u;for(;u.prev!==u.next;){let S=u.prev,k=u.next;if(b?mP(u,d,f,b):fP(u))n.push(S.i,u.i,k.i),qp(u),u=k.next,x=k.next;else if((u=k)===x){y?y===1?Vp(u=gP(Uu(u),n),n,c,d,f,b,2):y===2&&_P(u,n,c,d,f,b):Vp(Uu(u),n,c,d,f,b,1);break}}}function fP(u){let n=u.prev,c=u,d=u.next;if(Xr(n,c,d)>=0)return!1;let f=n.x,b=c.x,y=d.x,x=n.y,S=c.y,k=d.y,D=Math.min(f,b,y),L=Math.min(x,S,k),V=Math.max(f,b,y),H=Math.max(x,S,k),Z=d.next;for(;Z!==n;){if(Z.x>=D&&Z.x<=V&&Z.y>=L&&Z.y<=H&&Up(f,x,b,S,y,k,Z.x,Z.y)&&Xr(Z.prev,Z,Z.next)>=0)return!1;Z=Z.next}return!0}function mP(u,n,c,d){let f=u.prev,b=u,y=u.next;if(Xr(f,b,y)>=0)return!1;let x=f.x,S=b.x,k=y.x,D=f.y,L=b.y,V=y.y,H=Math.min(x,S,k),Z=Math.min(D,L,V),te=Math.max(x,S,k),de=Math.max(D,L,V),be=Bb(H,Z,n,c,d),Re=Bb(te,de,n,c,d),we=u.prevZ,q=u.nextZ;for(;we&&we.z>=be&&q&&q.z<=Re;){if(we.x>=H&&we.x<=te&&we.y>=Z&&we.y<=de&&we!==f&&we!==y&&Up(x,D,S,L,k,V,we.x,we.y)&&Xr(we.prev,we,we.next)>=0||(we=we.prevZ,q.x>=H&&q.x<=te&&q.y>=Z&&q.y<=de&&q!==f&&q!==y&&Up(x,D,S,L,k,V,q.x,q.y)&&Xr(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;we&&we.z>=be;){if(we.x>=H&&we.x<=te&&we.y>=Z&&we.y<=de&&we!==f&&we!==y&&Up(x,D,S,L,k,V,we.x,we.y)&&Xr(we.prev,we,we.next)>=0)return!1;we=we.prevZ}for(;q&&q.z<=Re;){if(q.x>=H&&q.x<=te&&q.y>=Z&&q.y<=de&&q!==f&&q!==y&&Up(x,D,S,L,k,V,q.x,q.y)&&Xr(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function gP(u,n){let c=u;do{let d=c.prev,f=c.next.next;!Jd(d,f)&&p2(d,c,c.next,f)&&jp(d,f)&&jp(f,d)&&(n.push(d.i,c.i,f.i),qp(c),qp(c.next),c=u=f),c=c.next}while(c!==u);return Uu(c)}function _P(u,n,c,d,f,b){let y=u;do{let x=y.next.next;for(;x!==y.prev;){if(y.i!==x.i&&wP(y,x)){let S=f2(y,x);return y=Uu(y,y.next),S=Uu(S,S.next),Vp(y,n,c,d,f,b,0),void Vp(S,n,c,d,f,b,0)}x=x.next}y=y.next}while(y!==u)}function bP(u,n){let c=u.x-n.x;return c===0&&(c=u.y-n.y,c===0)&&(c=(u.next.y-u.y)/(u.next.x-u.x)-(n.next.y-n.y)/(n.next.x-n.x)),c}function yP(u,n){let c=function(f,b){let y=b,x=f.x,S=f.y,k,D=-1/0;if(Jd(f,y))return y;do{if(Jd(f,y.next))return y.next;if(S<=y.y&&S>=y.next.y&&y.next.y!==y.y){let te=y.x+(S-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(te<=x&&te>D&&(D=te,k=y.x<y.next.x?y:y.next,te===x))return k}y=y.next}while(y!==b);if(!k)return null;let L=k,V=k.x,H=k.y,Z=1/0;y=k;do{if(x>=y.x&&y.x>=V&&x!==y.x&&h2(S<H?x:D,S,V,H,S<H?D:x,S,y.x,y.y)){let te=Math.abs(S-y.y)/(x-y.x);jp(y,f)&&(te<Z||te===Z&&(y.x>k.x||y.x===k.x&&vP(k,y)))&&(k=y,Z=te)}y=y.next}while(y!==L);return k}(u,n);if(!c)return n;let d=f2(c,u);return Uu(d,d.next),Uu(c,c.next)}function vP(u,n){return Xr(u.prev,u,n.prev)<0&&Xr(n.next,u,u.next)<0}function Bb(u,n,c,d,f){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-c)*f|0)|u<<8))|u<<4))|u<<2))|u<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-d)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function xP(u){let n=u,c=u;do(n.x<c.x||n.x===c.x&&n.y<c.y)&&(c=n),n=n.next;while(n!==u);return c}function h2(u,n,c,d,f,b,y,x){return(f-y)*(n-x)>=(u-y)*(b-x)&&(u-y)*(d-x)>=(c-y)*(n-x)&&(c-y)*(b-x)>=(f-y)*(d-x)}function Up(u,n,c,d,f,b,y,x){return!(u===y&&n===x)&&h2(u,n,c,d,f,b,y,x)}function wP(u,n){return u.next.i!==n.i&&u.prev.i!==n.i&&!function(c,d){let f=c;do{if(f.i!==c.i&&f.next.i!==c.i&&f.i!==d.i&&f.next.i!==d.i&&p2(f,f.next,c,d))return!0;f=f.next}while(f!==c);return!1}(u,n)&&(jp(u,n)&&jp(n,u)&&function(c,d){let f=c,b=!1,y=(c.x+d.x)/2,x=(c.y+d.y)/2;do f.y>x!=f.next.y>x&&f.next.y!==f.y&&y<(f.next.x-f.x)*(x-f.y)/(f.next.y-f.y)+f.x&&(b=!b),f=f.next;while(f!==c);return b}(u,n)&&(Xr(u.prev,u,n.prev)||Xr(u,n.prev,n))||Jd(u,n)&&Xr(u.prev,u,u.next)>0&&Xr(n.prev,n,n.next)>0)}function Xr(u,n,c){return(n.y-u.y)*(c.x-n.x)-(n.x-u.x)*(c.y-n.y)}function Jd(u,n){return u.x===n.x&&u.y===n.y}function p2(u,n,c,d){let f=ng(Xr(u,n,c)),b=ng(Xr(u,n,d)),y=ng(Xr(c,d,u)),x=ng(Xr(c,d,n));return f!==b&&y!==x||!(f!==0||!rg(u,c,n))||!(b!==0||!rg(u,d,n))||!(y!==0||!rg(c,u,d))||!(x!==0||!rg(c,n,d))}function rg(u,n,c){return n.x<=Math.max(u.x,c.x)&&n.x>=Math.min(u.x,c.x)&&n.y<=Math.max(u.y,c.y)&&n.y>=Math.min(u.y,c.y)}function ng(u){return u>0?1:u<0?-1:0}function jp(u,n){return Xr(u.prev,u,u.next)<0?Xr(u,n,u.next)>=0&&Xr(u,u.prev,n)>=0:Xr(u,n,u.prev)<0||Xr(u,u.next,n)<0}function f2(u,n){let c=Vb(u.i,u.x,u.y),d=Vb(n.i,n.x,n.y),f=u.next,b=n.prev;return u.next=n,n.prev=u,c.next=f,f.prev=c,d.next=c,c.prev=d,b.next=d,d.prev=b,d}function m2(u,n,c,d){let f=Vb(u,n,c);return d?(f.next=d.next,f.prev=d,d.next.prev=f,d.next=f):(f.prev=f,f.next=f),f}function qp(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Vb(u,n,c){return{i:u,x:n,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class eh{constructor(n,c){if(c>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=c}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class og{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}og.noSubdivision=new og({fill:new eh(0,0),line:new eh(0,0),tile:new eh(0,0),stencil:new eh(0,0),circle:1}),Dt("SubdivisionGranularityExpression",eh),Dt("SubdivisionGranularitySetting",og);let th=-32768,Hp=32767;class CP{constructor(n,c){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=fe/n,this._canonical=c}_getKey(n,c){return(n+=32768)<<16|(c+=32768)<<0}_vertexToIndex(n,c){if(n<-32768||c<-32768||n>32767||c>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let d=0|Math.round(n),f=0|Math.round(c),b=this._getKey(d,f);if(this._vertexDictionary.has(b))return this._vertexDictionary.get(b);let y=this._vertexBuffer.length/2;return this._vertexDictionary.set(b,y),this._vertexBuffer.push(d,f),y}_subdivideTrianglesScanline(n){if(this._granularity<2)return function(f,b){let y=[];for(let x=0;x<b.length;x+=3){let S=b[x],k=b[x+1],D=b[x+2],L=f[2*S],V=f[2*S+1];(f[2*k]-L)*(f[2*D+1]-V)-(f[2*k+1]-V)*(f[2*D]-L)>0?(y.push(S),y.push(D),y.push(k)):(y.push(S),y.push(k),y.push(D))}return y}(this._vertexBuffer,n);let c=[],d=n.length;for(let f=0;f<d;f+=3){let b=[n[f+0],n[f+1],n[f+2]],y=[this._vertexBuffer[2*n[f+0]+0],this._vertexBuffer[2*n[f+0]+1],this._vertexBuffer[2*n[f+1]+0],this._vertexBuffer[2*n[f+1]+1],this._vertexBuffer[2*n[f+2]+0],this._vertexBuffer[2*n[f+2]+1]],x=1/0,S=1/0,k=-1/0,D=-1/0;for(let te=0;te<3;te++){let de=y[2*te],be=y[2*te+1];x=Math.min(x,de),k=Math.max(k,de),S=Math.min(S,be),D=Math.max(D,be)}if(x===k||S===D)continue;let L=Math.floor(x/this._granularityCellSize),V=Math.ceil(k/this._granularityCellSize),H=Math.floor(S/this._granularityCellSize),Z=Math.ceil(D/this._granularityCellSize);if(L!==V||H!==Z)for(let te=H;te<Z;te++){let de=this._scanlineGenerateVertexRingForCellRow(te,y,b);EP(this._vertexBuffer,de,c)}else c.push(...b)}return c}_scanlineGenerateVertexRingForCellRow(n,c,d){let f=n*this._granularityCellSize,b=f+this._granularityCellSize,y=[];for(let x=0;x<3;x++){let S=c[2*x],k=c[2*x+1],D=c[2*(x+1)%6],L=c[(2*(x+1)+1)%6],V=c[2*(x+2)%6],H=c[(2*(x+2)+1)%6],Z=D-S,te=L-k,de=Z===0,be=te===0,Re=(f-k)/te,we=(b-k)/te,q=Math.min(Re,we),ce=Math.max(Re,we);if(!be&&(q>=1||ce<=0)||be&&(k<f||k>b)){L>=f&&L<=b&&y.push(d[(x+1)%3]);continue}!be&&q>0&&y.push(this._vertexToIndex(S+Z*q,k+te*q));let Ee=S+Z*Math.max(q,0),Ze=S+Z*Math.min(ce,1);de||this._generateIntraEdgeVertices(y,S,k,D,L,Ee,Ze),!be&&ce<1&&y.push(this._vertexToIndex(S+Z*ce,k+te*ce)),(be||L>=f&&L<=b)&&y.push(d[(x+1)%3]),!be&&(L<=f||L>=b)&&this._generateInterEdgeVertices(y,S,k,D,L,V,H,Ze,f,b)}return y}_generateIntraEdgeVertices(n,c,d,f,b,y,x){let S=f-c,k=b-d,D=k===0,L=D?Math.min(c,f):Math.min(y,x),V=D?Math.max(c,f):Math.max(y,x),H=Math.floor(L/this._granularityCellSize)+1,Z=Math.ceil(V/this._granularityCellSize)-1;if(D?c<f:y<x)for(let te=H;te<=Z;te++){let de=te*this._granularityCellSize;n.push(this._vertexToIndex(de,d+k*(de-c)/S))}else for(let te=Z;te>=H;te--){let de=te*this._granularityCellSize;n.push(this._vertexToIndex(de,d+k*(de-c)/S))}}_generateInterEdgeVertices(n,c,d,f,b,y,x,S,k,D){let L=b-d,V=y-f,H=x-b,Z=(k-b)/H,te=(D-b)/H,de=Math.min(Z,te),be=Math.max(Z,te),Re=f+V*de,we=Math.floor(Math.min(Re,S)/this._granularityCellSize)+1,q=Math.ceil(Math.max(Re,S)/this._granularityCellSize)-1,ce=S<Re,Ee=H===0;if(Ee&&(x===k||x===D))return;if(Ee||de>=1||be<=0){let mt=d-x,Ke=y+(c-y)*Math.min((k-x)/mt,(D-x)/mt);we=Math.floor(Math.min(Ke,S)/this._granularityCellSize)+1,q=Math.ceil(Math.max(Ke,S)/this._granularityCellSize)-1,ce=S<Ke}let Ze=L>0?D:k;if(ce)for(let mt=we;mt<=q;mt++)n.push(this._vertexToIndex(mt*this._granularityCellSize,Ze));else for(let mt=q;mt>=we;mt--)n.push(this._vertexToIndex(mt*this._granularityCellSize,Ze))}_generateOutline(n){let c=[];for(let d of n){let f=ju(d,this._granularity,!0),b=this._pointArrayToIndices(f),y=[];for(let x=1;x<b.length;x++)y.push(b[x-1]),y.push(b[x]);c.push(y)}return c}_handlePoles(n){let c=!1,d=!1;this._canonical&&(this._canonical.y===0&&(c=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(c||d)&&this._fillPoles(n,c,d)}_ensureNoPoleVertices(){let n=this._vertexBuffer;for(let c=0;c<n.length;c+=2){let d=n[c+1];d===th&&(n[c+1]=-32767),d===Hp&&(n[c+1]=32766)}}_generatePoleQuad(n,c,d,f,b,y){f>b!=(y===th)?(n.push(c),n.push(d),n.push(this._vertexToIndex(f,y)),n.push(d),n.push(this._vertexToIndex(b,y)),n.push(this._vertexToIndex(f,y))):(n.push(d),n.push(c),n.push(this._vertexToIndex(f,y)),n.push(this._vertexToIndex(b,y)),n.push(d),n.push(this._vertexToIndex(f,y)))}_fillPoles(n,c,d){let f=this._vertexBuffer,b=fe,y=n.length;for(let x=2;x<y;x+=3){let S=n[x-2],k=n[x-1],D=n[x],L=f[2*S],V=f[2*S+1],H=f[2*k],Z=f[2*k+1],te=f[2*D],de=f[2*D+1];c&&(V===0&&Z===0&&this._generatePoleQuad(n,S,k,L,H,th),Z===0&&de===0&&this._generatePoleQuad(n,k,D,H,te,th),de===0&&V===0&&this._generatePoleQuad(n,D,S,te,L,th)),d&&(V===b&&Z===b&&this._generatePoleQuad(n,S,k,L,H,Hp),Z===b&&de===b&&this._generatePoleQuad(n,k,D,H,te,Hp),de===b&&V===b&&this._generatePoleQuad(n,D,S,te,L,Hp))}}_initializeVertices(n){for(let c=0;c<n.length;c+=2)this._vertexToIndex(n[c],n[c+1])}subdividePolygonInternal(n,c){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:d,holeIndices:f}=function(x){let S=[],k=[];for(let D of x)if(D.length!==0){D!==x[0]&&S.push(k.length/2);for(let L=0;L<D.length;L++)k.push(D[L].x),k.push(D[L].y)}return{flattened:k,holeIndices:S}}(n),b;this._initializeVertices(d);try{let x=function(k,D,L=2){let V=D&&D.length,H=V?D[0]*L:k.length,Z=d2(k,0,H,L,!0),te=[];if(!Z||Z.next===Z.prev)return te;let de,be,Re;if(V&&(Z=function(we,q,ce,Ee){let Ze=[];for(let mt=0,Ke=q.length;mt<Ke;mt++){let at=d2(we,q[mt]*Ee,mt<Ke-1?q[mt+1]*Ee:we.length,Ee,!1);at===at.next&&(at.steiner=!0),Ze.push(xP(at))}Ze.sort(bP);for(let mt=0;mt<Ze.length;mt++)ce=yP(Ze[mt],ce);return ce}(k,D,Z,L)),k.length>80*L){de=1/0,be=1/0;let we=-1/0,q=-1/0;for(let ce=L;ce<H;ce+=L){let Ee=k[ce],Ze=k[ce+1];Ee<de&&(de=Ee),Ze<be&&(be=Ze),Ee>we&&(we=Ee),Ze>q&&(q=Ze)}Re=Math.max(we-de,q-be),Re=Re!==0?32767/Re:0}return Vp(Z,te,L,de,be,Re,0),te}(d,f),S=this._convertIndices(d,x);b=this._subdivideTrianglesScanline(S)}catch(x){console.error(x)}let y=[];return c&&(y=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(b),{verticesFlattened:this._vertexBuffer,indicesTriangles:b,indicesLineList:y}}_convertIndices(n,c){let d=[];for(let f=0;f<c.length;f++)d.push(this._vertexToIndex(n[2*c[f]],n[2*c[f]+1]));return d}_pointArrayToIndices(n){let c=[];for(let d=0;d<n.length;d++){let f=n[d];c.push(this._vertexToIndex(f.x,f.y))}return c}}function g2(u,n,c,d=!0){return new CP(c,n).subdividePolygonInternal(u,d)}function ju(u,n,c=!1){if(!u||u.length<1)return[];if(u.length<2)return[];let d=u[0],f=u[u.length-1],b=c&&(d.x!==f.x||d.y!==f.y);if(n<2)return b?[...u,u[0]]:[...u];let y=Math.floor(fe/n),x=[];x.push(new R(u[0].x,u[0].y));let S=u.length,k=b?S:S-1;for(let D=0;D<k;D++){let L=u[D],V=D<S-1?u[D+1]:u[0],H=L.x,Z=L.y,te=V.x,de=V.y,be=H!==te,Re=Z!==de;if(!be&&!Re)continue;let we=te-H,q=de-Z,ce=Math.abs(we),Ee=Math.abs(q),Ze=H,mt=Z;for(;;){let at=we>0?(Math.floor(Ze/y)+1)*y:(Math.ceil(Ze/y)-1)*y,vt=q>0?(Math.floor(mt/y)+1)*y:(Math.ceil(mt/y)-1)*y,gt=Math.abs(Ze-at),xt=Math.abs(mt-vt),ut=Math.abs(Ze-te),zt=Math.abs(mt-de),Kt=be?gt/ce:Number.POSITIVE_INFINITY,Xt=Re?xt/Ee:Number.POSITIVE_INFINITY;if((ut<=gt||!be)&&(zt<=xt||!Re))break;if(Kt<Xt&&be||!Re){Ze=at,mt+=q*Kt;let Ht=new R(Ze,Math.round(mt));x[x.length-1].x===Ht.x&&x[x.length-1].y===Ht.y||x.push(Ht)}else{Ze+=we*Xt,mt=vt;let Ht=new R(Math.round(Ze),mt);x[x.length-1].x===Ht.x&&x[x.length-1].y===Ht.y||x.push(Ht)}}let Ke=new R(te,de);x[x.length-1].x===Ke.x&&x[x.length-1].y===Ke.y||x.push(Ke)}return x}function EP(u,n,c){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,f=u[2*n[0]];for(let S=1;S<n.length;S++){let k=u[2*n[S]];k<f&&(f=k,d=S)}let b=n.length,y=d,x=(y+1)%b;for(;;){let S=y-1>=0?y-1:b-1,k=(x+1)%b,D=u[2*n[S]],L=u[2*n[k]],V=u[2*n[y]],H=u[2*n[y]+1],Z=u[2*n[x]+1],te=!1;if(D<L)te=!0;else if(D>L)te=!1;else{let de=Z-H,be=-(u[2*n[x]]-V),Re=H<Z?1:-1;((D-V)*de+(u[2*n[S]+1]-H)*be)*Re>((L-V)*de+(u[2*n[k]+1]-H)*be)*Re&&(te=!0)}if(te){let de=n[S],be=n[y],Re=n[x];de!==be&&de!==Re&&be!==Re&&c.push(Re,be,de),y--,y<0&&(y=b-1)}else{let de=n[k],be=n[y],Re=n[x];de!==be&&de!==Re&&be!==Re&&c.push(Re,be,de),x++,x>=b&&(x=0)}if(S===k)break}}function _2(u,n,c,d,f,b,y,x,S){let k=f.length/2,D=y&&x&&S;if(k<Ji.MAX_VERTEX_ARRAY_LENGTH){let L=n.prepareSegment(k,c,d),V=L.vertexLength;for(let te=0;te<b.length;te+=3)d.emplaceBack(V+b[te],V+b[te+1],V+b[te+2]);let H,Z;L.vertexLength+=k,L.primitiveLength+=b.length/3,D&&(Z=y.prepareSegment(k,c,x),H=Z.vertexLength,Z.vertexLength+=k);for(let te=0;te<f.length;te+=2)u(f[te],f[te+1]);if(D)for(let te=0;te<S.length;te++){let de=S[te];for(let be=1;be<de.length;be+=2)x.emplaceBack(H+de[be-1],H+de[be]);Z.primitiveLength+=de.length/2}}else(function(L,V,H,Z,te,de){let be=[];for(let Ee=0;Ee<Z.length/2;Ee++)be.push(-1);let Re={count:0},we=0,q=L.getOrCreateLatestSegment(V,H),ce=q.vertexLength;for(let Ee=2;Ee<te.length;Ee+=3){let Ze=te[Ee-2],mt=te[Ee-1],Ke=te[Ee],at=be[Ze]<we,vt=be[mt]<we,gt=be[Ke]<we;q.vertexLength+((at?1:0)+(vt?1:0)+(gt?1:0))>Ji.MAX_VERTEX_ARRAY_LENGTH&&(q=L.createNewSegment(V,H),we=Re.count,at=!0,vt=!0,gt=!0,ce=0);let xt=$p(be,Z,de,Re,Ze,at,q),ut=$p(be,Z,de,Re,mt,vt,q),zt=$p(be,Z,de,Re,Ke,gt,q);H.emplaceBack(ce+xt-we,ce+ut-we,ce+zt-we),q.primitiveLength++}})(n,c,d,f,b,u),D&&function(L,V,H,Z,te,de){let be=[];for(let Ee=0;Ee<Z.length/2;Ee++)be.push(-1);let Re={count:0},we=0,q=L.getOrCreateLatestSegment(V,H),ce=q.vertexLength;for(let Ee=0;Ee<te.length;Ee++){let Ze=te[Ee];for(let mt=1;mt<te[Ee].length;mt+=2){let Ke=Ze[mt-1],at=Ze[mt],vt=be[Ke]<we,gt=be[at]<we;q.vertexLength+((vt?1:0)+(gt?1:0))>Ji.MAX_VERTEX_ARRAY_LENGTH&&(q=L.createNewSegment(V,H),we=Re.count,vt=!0,gt=!0,ce=0);let xt=$p(be,Z,de,Re,Ke,vt,q),ut=$p(be,Z,de,Re,at,gt,q);H.emplaceBack(ce+xt-we,ce+ut-we),q.primitiveLength++}}}(y,c,x,f,S,u),n.forceNewSegmentOnNextPrepare(),y?.forceNewSegmentOnNextPrepare()}function $p(u,n,c,d,f,b,y){if(b){let x=d.count;return c(n[2*f],n[2*f+1]),u[f]=d.count,d.count++,y.vertexLength++,x}return u[f]}class Ub{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Et,this.indexArray=new Qi,this.indexArray2=new cn,this.programConfigurations=new pl(n.layers,n.zoom),this.segments=new Ji,this.segments2=new Ji,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,d){this.hasPattern=Fb("fill",this.layers,c);let f=this.layers[0].layout.get("fill-sort-key"),b=!f.isConstant(),y=[];for(let{feature:x,id:S,index:k,sourceLayerIndex:D}of n){let L=this.layers[0]._featureFilter.needGeometry,V=Bu(x,L);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),V,d))continue;let H=b?f.evaluate(V,{},d,c.availableImages):void 0,Z={id:S,properties:x.properties,type:x.type,sourceLayerIndex:D,index:k,geometry:L?V.geometry:zu(x),patterns:{},sortKey:H};y.push(Z)}b&&y.sort((x,S)=>x.sortKey-S.sortKey);for(let x of y){let{geometry:S,index:k,sourceLayerIndex:D}=x;if(this.hasPattern){let L=zb("fill",this.layers,x,this.zoom,c);this.patternFeatures.push(L)}else this.addFeature(x,S,k,d,{},c.subdivisionGranularity);c.featureIndex.insert(n[k].feature,S,k,D,this.index)}}update(n,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,d)}addFeatures(n,c,d){for(let f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,c,d,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,pP),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,c,d,f,b,y){for(let x of mc(c,500)){let S=g2(x,f,y.fill.getGranularityForZoomLevel(f.z)),k=this.layoutVertexArray;_2((D,L)=>{k.emplaceBack(D,L)},this.segments,this.layoutVertexArray,this.indexArray,S.verticesFlattened,S.indicesTriangles,this.segments2,this.indexArray2,S.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,b,f)}}let b2,y2;Dt("FillBucket",Ub,{omit:["layers","patternFeatures"]});var SP={get paint(){return y2=y2||new tn({"fill-antialias":new $t(se.paint_fill["fill-antialias"]),"fill-opacity":new ei(se.paint_fill["fill-opacity"]),"fill-color":new ei(se.paint_fill["fill-color"]),"fill-outline-color":new ei(se.paint_fill["fill-outline-color"]),"fill-translate":new $t(se.paint_fill["fill-translate"]),"fill-translate-anchor":new $t(se.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ru(se.paint_fill["fill-pattern"])})},get layout(){return b2=b2||new tn({"fill-sort-key":new ei(se.layout_fill["fill-sort-key"])})}};class TP extends os{constructor(n){super(n,SP)}recalculate(n,c){super.recalculate(n,c);let d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Ub(n)}queryRadius(){return tg(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:c,transform:d,pixelsToTileUnits:f}){return e2(ig(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,f),c)}isTileClipped(){return!0}}let MP=kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),IP=kr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:AP}=MP;var jb,v2,qb,x2,Hb,w2,C2,sg={};function E2(){if(v2)return jb;v2=1;var u=M();function n(f,b,y,x,S){this.properties={},this.extent=y,this.type=0,this._pbf=f,this._geometry=-1,this._keys=x,this._values=S,f.readFields(c,this,b)}function c(f,b,y){f==1?b.id=y.readVarint():f==2?function(x,S){for(var k=x.readVarint()+x.pos;x.pos<k;){var D=S._keys[x.readVarint()],L=S._values[x.readVarint()];S.properties[D]=L}}(y,b):f==3?b.type=y.readVarint():f==4&&(b._geometry=y.pos)}function d(f){for(var b,y,x=0,S=0,k=f.length,D=k-1;S<k;D=S++)x+=((y=f[D]).x-(b=f[S]).x)*(b.y+y.y);return x}return jb=n,n.types=["Unknown","Point","LineString","Polygon"],n.prototype.loadGeometry=function(){var f=this._pbf;f.pos=this._geometry;for(var b,y=f.readVarint()+f.pos,x=1,S=0,k=0,D=0,L=[];f.pos<y;){if(S<=0){var V=f.readVarint();x=7&V,S=V>>3}if(S--,x===1||x===2)k+=f.readSVarint(),D+=f.readSVarint(),x===1&&(b&&L.push(b),b=[]),b.push(new u(k,D));else{if(x!==7)throw new Error("unknown command "+x);b&&b.push(b[0].clone())}}return b&&L.push(b),L},n.prototype.bbox=function(){var f=this._pbf;f.pos=this._geometry;for(var b=f.readVarint()+f.pos,y=1,x=0,S=0,k=0,D=1/0,L=-1/0,V=1/0,H=-1/0;f.pos<b;){if(x<=0){var Z=f.readVarint();y=7&Z,x=Z>>3}if(x--,y===1||y===2)(S+=f.readSVarint())<D&&(D=S),S>L&&(L=S),(k+=f.readSVarint())<V&&(V=k),k>H&&(H=k);else if(y!==7)throw new Error("unknown command "+y)}return[D,V,L,H]},n.prototype.toGeoJSON=function(f,b,y){var x,S,k=this.extent*Math.pow(2,y),D=this.extent*f,L=this.extent*b,V=this.loadGeometry(),H=n.types[this.type];function Z(be){for(var Re=0;Re<be.length;Re++){var we=be[Re];be[Re]=[360*(we.x+D)/k-180,360/Math.PI*Math.atan(Math.exp((180-360*(we.y+L)/k)*Math.PI/180))-90]}}switch(this.type){case 1:var te=[];for(x=0;x<V.length;x++)te[x]=V[x][0];Z(V=te);break;case 2:for(x=0;x<V.length;x++)Z(V[x]);break;case 3:for(V=function(be){var Re=be.length;if(Re<=1)return[be];for(var we,q,ce=[],Ee=0;Ee<Re;Ee++){var Ze=d(be[Ee]);Ze!==0&&(q===void 0&&(q=Ze<0),q===Ze<0?(we&&ce.push(we),we=[be[Ee]]):we.push(be[Ee]))}return we&&ce.push(we),ce}(V),x=0;x<V.length;x++)for(S=0;S<V[x].length;S++)Z(V[x][S])}V.length===1?V=V[0]:H="Multi"+H;var de={type:"Feature",geometry:{type:H,coordinates:V},properties:this.properties};return"id"in this&&(de.id=this.id),de},jb}function S2(){if(x2)return qb;x2=1;var u=E2();function n(d,f){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(c,this,f),this.length=this._features.length}function c(d,f,b){d===15?f.version=b.readVarint():d===1?f.name=b.readString():d===5?f.extent=b.readVarint():d===2?f._features.push(b.pos):d===3?f._keys.push(b.readString()):d===4&&f._values.push(function(y){for(var x=null,S=y.readVarint()+y.pos;y.pos<S;){var k=y.readVarint()>>3;x=k===1?y.readString():k===2?y.readFloat():k===3?y.readDouble():k===4?y.readVarint64():k===5?y.readVarint():k===6?y.readSVarint():k===7?y.readBoolean():null}return x}(b))}return qb=n,n.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var f=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,f,this.extent,this._keys,this._values)},qb}function T2(){return C2||(C2=1,sg.VectorTile=function(){if(w2)return Hb;w2=1;var u=S2();function n(c,d,f){if(c===3){var b=new u(f,f.readVarint()+f.pos);b.length&&(d[b.name]=b)}}return Hb=function(c,d){this.layers=c.readFields(n,{},d)},Hb}(),sg.VectorTileFeature=E2(),sg.VectorTileLayer=S2()),sg}var Gp=_(T2());let kP=Gp.VectorTileFeature.types,$b=Math.pow(2,13);function Wp(u,n,c,d,f,b,y,x){u.emplaceBack(n,c,2*Math.floor(d*$b)+y,f*$b*2,b*$b*2,Math.round(x))}class Gb{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new _t,this.centroidVertexArray=new st,this.indexArray=new Qi,this.programConfigurations=new pl(n.layers,n.zoom),this.segments=new Ji,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,d){this.features=[],this.hasPattern=Fb("fill-extrusion",this.layers,c);for(let{feature:f,id:b,index:y,sourceLayerIndex:x}of n){let S=this.layers[0]._featureFilter.needGeometry,k=Bu(f,S);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),k,d))continue;let D={id:b,sourceLayerIndex:x,index:y,geometry:S?k.geometry:zu(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(zb("fill-extrusion",this.layers,D,this.zoom,c)):this.addFeature(D,D.geometry,y,d,{},c.subdivisionGranularity),c.featureIndex.insert(f,D.geometry,y,x,this.index,!0)}}addFeatures(n,c,d){for(let f of this.features){let{geometry:b}=f;this.addFeature(f,b,f.index,c,d,n.subdivisionGranularity)}}update(n,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,AP),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,IP.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,c,d,f,b,y){for(let x of mc(c,500)){let S={x:0,y:0,sampleCount:0},k=this.layoutVertexArray.length;this.processPolygon(S,f,n,x,y);let D=this.layoutVertexArray.length-k,L=Math.floor(S.x/S.sampleCount),V=Math.floor(S.y/S.sampleCount);for(let H=0;H<D;H++)this.centroidVertexArray.emplaceBack(L,V)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,b,f)}processPolygon(n,c,d,f,b){if(f.length<1||M2(f[0]))return;for(let L of f)L.length!==0&&PP(n,L);let y={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},x=b.fill.getGranularityForZoomLevel(c.z),S=kP[d.type]==="Polygon";for(let L of f){if(L.length===0||M2(L))continue;let V=ju(L,x,S);this._generateSideFaces(V,y)}if(!S)return;let k=g2(f,c,x,!1),D=this.layoutVertexArray;_2((L,V)=>{Wp(D,L,V,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles)}_generateSideFaces(n,c){let d=0;for(let f=1;f<n.length;f++){let b=n[f],y=n[f-1];if(DP(b,y))continue;c.segment.vertexLength+4>Ji.MAX_VERTEX_ARRAY_LENGTH&&(c.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let x=b.sub(y)._perp()._unit(),S=y.dist(b);d+S>32768&&(d=0),Wp(this.layoutVertexArray,b.x,b.y,x.x,x.y,0,0,d),Wp(this.layoutVertexArray,b.x,b.y,x.x,x.y,0,1,d),d+=S,Wp(this.layoutVertexArray,y.x,y.y,x.x,x.y,0,0,d),Wp(this.layoutVertexArray,y.x,y.y,x.x,x.y,0,1,d);let k=c.segment.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),c.segment.vertexLength+=4,c.segment.primitiveLength+=2}}}function PP(u,n){for(let c=0;c<n.length;c++){let d=n[c];c===n.length-1&&n[0].x===d.x&&n[0].y===d.y||(u.x+=d.x,u.y+=d.y,u.sampleCount++)}}function DP(u,n){return u.x===n.x&&(u.x<0||u.x>fe)||u.y===n.y&&(u.y<0||u.y>fe)}function M2(u){return u.every(n=>n.x<0)||u.every(n=>n.x>fe)||u.every(n=>n.y<0)||u.every(n=>n.y>fe)}let I2;Dt("FillExtrusionBucket",Gb,{omit:["layers","features"]});var RP={get paint(){return I2=I2||new tn({"fill-extrusion-opacity":new $t(se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ei(se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new $t(se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new $t(se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ru(se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ei(se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ei(se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new $t(se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class OP extends os{constructor(n){super(n,RP)}createBucket(n){return new Gb(n)}queryRadius(){return tg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:c,featureState:d,geometry:f,transform:b,pixelsToTileUnits:y,pixelPosMatrix:x}){let S=ig(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-b.bearingInRadians,y),k=this.paint.get("fill-extrusion-height").evaluate(c,d),D=this.paint.get("fill-extrusion-base").evaluate(c,d),L=function(H,Z,te){let de=[];for(let be of H){let Re=[be.x,be.y,0,1];bt(Re,Re,Z),de.push(new R(Re[0]/Re[3],Re[1]/Re[3]))}return de}(S,x),V=function(H,Z,te,de){let be=[],Re=[],we=de[8]*Z,q=de[9]*Z,ce=de[10]*Z,Ee=de[11]*Z,Ze=de[8]*te,mt=de[9]*te,Ke=de[10]*te,at=de[11]*te;for(let vt of H){let gt=[],xt=[];for(let ut of vt){let zt=ut.x,Kt=ut.y,Xt=de[0]*zt+de[4]*Kt+de[12],Ht=de[1]*zt+de[5]*Kt+de[13],Vi=de[2]*zt+de[6]*Kt+de[14],zr=de[3]*zt+de[7]*Kt+de[15],dn=Vi+ce,Zn=zr+Ee,Cs=Xt+Ze,Uo=Ht+mt,Vn=Vi+Ke,Or=zr+at,En=new R((Xt+we)/Zn,(Ht+q)/Zn);En.z=dn/Zn,gt.push(En);let Un=new R(Cs/Or,Uo/Or);Un.z=Vn/Or,xt.push(Un)}be.push(gt),Re.push(xt)}return[be,Re]}(f,D,k,x);return function(H,Z,te){let de=1/0;e2(te,Z)&&(de=A2(te,Z[0]));for(let be=0;be<Z.length;be++){let Re=Z[be],we=H[be];for(let q=0;q<Re.length-1;q++){let ce=Re[q],Ee=[ce,Re[q+1],we[q+1],we[q],ce];Jw(te,Ee)&&(de=Math.min(de,A2(te,Ee)))}}return de!==1/0&&de}(V[0],V[1],L)}}function Zp(u,n){return u.x*n.x+u.y*n.y}function A2(u,n){if(u.length===1){let c=0,d=n[c++],f;for(;!f||d.equals(f);)if(f=n[c++],!f)return 1/0;for(;c<n.length;c++){let b=n[c],y=u[0],x=f.sub(d),S=b.sub(d),k=y.sub(d),D=Zp(x,x),L=Zp(x,S),V=Zp(S,S),H=Zp(k,x),Z=Zp(k,S),te=D*V-L*L,de=(V*H-L*Z)/te,be=(D*Z-L*H)/te,Re=d.z*(1-de-be)+f.z*de+b.z*be;if(isFinite(Re))return Re}return 1/0}{let c=1/0;for(let d of n)c=Math.min(c,d.z);return c}}let LP=kr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:NP}=LP,FP=kr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:zP}=FP,BP=Gp.VectorTileFeature.types,VP=Math.cos(Math.PI/180*37.5),k2=Math.pow(2,14)/.5;class Wb{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new qt,this.layoutVertexArray2=new xi,this.indexArray=new Qi,this.programConfigurations=new pl(n.layers,n.zoom),this.segments=new Ji,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,d){this.hasPattern=Fb("line",this.layers,c);let f=this.layers[0].layout.get("line-sort-key"),b=!f.isConstant(),y=[];for(let{feature:x,id:S,index:k,sourceLayerIndex:D}of n){let L=this.layers[0]._featureFilter.needGeometry,V=Bu(x,L);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),V,d))continue;let H=b?f.evaluate(V,{},d):void 0,Z={id:S,properties:x.properties,type:x.type,sourceLayerIndex:D,index:k,geometry:L?V.geometry:zu(x),patterns:{},sortKey:H};y.push(Z)}b&&y.sort((x,S)=>x.sortKey-S.sortKey);for(let x of y){let{geometry:S,index:k,sourceLayerIndex:D}=x;if(this.hasPattern){let L=zb("line",this.layers,x,this.zoom,c);this.patternFeatures.push(L)}else this.addFeature(x,S,k,d,{},c.subdivisionGranularity);c.featureIndex.insert(n[k].feature,S,k,D,this.index)}}update(n,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,d)}addFeatures(n,c,d){for(let f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,c,d,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,zP)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,NP),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,c,d,f,b,y){let x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),k=x.get("line-cap"),D=x.get("line-miter-limit"),L=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(let V of c)this.addLine(V,n,S,k,D,L,f,y);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,b,f)}addLine(n,c,d,f,b,y,x,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=ju(n,x?S.line.getGranularityForZoomLevel(x.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let we=0;we<n.length-1;we++)this.totalDistance+=n[we].dist(n[we+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let k=BP[c.type]==="Polygon",D=n.length;for(;D>=2&&n[D-1].equals(n[D-2]);)D--;let L=0;for(;L<D-1&&n[L].equals(n[L+1]);)L++;if(D<(k?3:2))return;d==="bevel"&&(b=1.05);let V=this.overscaling<=16?15*fe/(512*this.overscaling):0,H=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray),Z,te,de,be,Re;this.e1=this.e2=-1,k&&(Z=n[D-2],Re=n[L].sub(Z)._unit()._perp());for(let we=L;we<D;we++){if(de=we===D-1?k?n[L+1]:void 0:n[we+1],de&&n[we].equals(de))continue;Re&&(be=Re),Z&&(te=Z),Z=n[we],Re=de?de.sub(Z)._unit()._perp():be,be=be||Re;let q=be.add(Re);q.x===0&&q.y===0||q._unit();let ce=be.x*Re.x+be.y*Re.y,Ee=q.x*Re.x+q.y*Re.y,Ze=Ee!==0?1/Ee:1/0,mt=2*Math.sqrt(2-2*Ee),Ke=Ee<VP&&te&&de,at=be.x*Re.y-be.y*Re.x>0;if(Ke&&we>L){let xt=Z.dist(te);if(xt>2*V){let ut=Z.sub(Z.sub(te)._mult(V/xt)._round());this.updateDistance(te,ut),this.addCurrentVertex(ut,be,0,0,H),te=ut}}let vt=te&&de,gt=vt?d:k?"butt":f;if(vt&&gt==="round"&&(Ze<y?gt="miter":Ze<=2&&(gt="fakeround")),gt==="miter"&&Ze>b&&(gt="bevel"),gt==="bevel"&&(Ze>2&&(gt="flipbevel"),Ze<b&&(gt="miter")),te&&this.updateDistance(te,Z),gt==="miter")q._mult(Ze),this.addCurrentVertex(Z,q,0,0,H);else if(gt==="flipbevel"){if(Ze>100)q=Re.mult(-1);else{let xt=Ze*be.add(Re).mag()/be.sub(Re).mag();q._perp()._mult(xt*(at?-1:1))}this.addCurrentVertex(Z,q,0,0,H),this.addCurrentVertex(Z,q.mult(-1),0,0,H)}else if(gt==="bevel"||gt==="fakeround"){let xt=-Math.sqrt(Ze*Ze-1),ut=at?xt:0,zt=at?0:xt;if(te&&this.addCurrentVertex(Z,be,ut,zt,H),gt==="fakeround"){let Kt=Math.round(180*mt/Math.PI/20);for(let Xt=1;Xt<Kt;Xt++){let Ht=Xt/Kt;if(Ht!==.5){let zr=Ht-.5;Ht+=Ht*zr*(Ht-1)*((1.0904+ce*(ce*(3.55645-1.43519*ce)-3.2452))*zr*zr+(.848013+ce*(.215638*ce-1.06021)))}let Vi=Re.sub(be)._mult(Ht)._add(be)._unit()._mult(at?-1:1);this.addHalfVertex(Z,Vi.x,Vi.y,!1,at,0,H)}}de&&this.addCurrentVertex(Z,Re,-ut,-zt,H)}else if(gt==="butt")this.addCurrentVertex(Z,q,0,0,H);else if(gt==="square"){let xt=te?1:-1;this.addCurrentVertex(Z,q,xt,xt,H)}else gt==="round"&&(te&&(this.addCurrentVertex(Z,be,0,0,H),this.addCurrentVertex(Z,be,1,1,H,!0)),de&&(this.addCurrentVertex(Z,Re,-1,-1,H,!0),this.addCurrentVertex(Z,Re,0,0,H)));if(Ke&&we<D-1){let xt=Z.dist(de);if(xt>2*V){let ut=Z.add(de.sub(Z)._mult(V/xt)._round());this.updateDistance(Z,ut),this.addCurrentVertex(ut,Re,0,0,H),Z=ut}}}}addCurrentVertex(n,c,d,f,b,y=!1){let x=c.y*f-c.x,S=-c.y-c.x*f;this.addHalfVertex(n,c.x+c.y*d,c.y-c.x*d,y,!1,d,b),this.addHalfVertex(n,x,S,y,!0,-f,b),this.distance>k2/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,c,d,f,b,y))}addHalfVertex({x:n,y:c},d,f,b,y,x,S){let k=.5*(this.lineClips?this.scaledDistance*(k2-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(b?1:0),(c<<1)+(y?1:0),Math.round(63*d)+128,Math.round(63*f)+128,1+(x===0?0:x<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let D=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,D,this.e2),S.primitiveLength++),y?this.e2=D:this.e1=D}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,c){this.distance+=n.dist(c),this.updateScaledDistance()}}let P2,D2;Dt("LineBucket",Wb,{omit:["layers","patternFeatures"]});var R2={get paint(){return D2=D2||new tn({"line-opacity":new ei(se.paint_line["line-opacity"]),"line-color":new ei(se.paint_line["line-color"]),"line-translate":new $t(se.paint_line["line-translate"]),"line-translate-anchor":new $t(se.paint_line["line-translate-anchor"]),"line-width":new ei(se.paint_line["line-width"]),"line-gap-width":new ei(se.paint_line["line-gap-width"]),"line-offset":new ei(se.paint_line["line-offset"]),"line-blur":new ei(se.paint_line["line-blur"]),"line-dasharray":new kp(se.paint_line["line-dasharray"]),"line-pattern":new Ru(se.paint_line["line-pattern"]),"line-gradient":new Pp(se.paint_line["line-gradient"])})},get layout(){return P2=P2||new tn({"line-cap":new $t(se.layout_line["line-cap"]),"line-join":new ei(se.layout_line["line-join"]),"line-miter-limit":new $t(se.layout_line["line-miter-limit"]),"line-round-limit":new $t(se.layout_line["line-round-limit"]),"line-sort-key":new ei(se.layout_line["line-sort-key"])})}};class UP extends ei{possiblyEvaluate(n,c){return c=new Cr(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(n,c)}evaluate(n,c,d,f){return c=ai({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(n,c,d,f)}}let ag;class jP extends os{constructor(n){super(n,R2),this.gradientVersion=0,ag||(ag=new UP(R2.paint.properties["line-width"].specification),ag.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){let c=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof Ws,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,c){super.recalculate(n,c),this.paint._values["line-floorwidth"]=ag.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Wb(n)}queryRadius(n){let c=n,d=O2(zp("line-width",this,c),zp("line-gap-width",this,c)),f=zp("line-offset",this,c);return d/2+Math.abs(f)+tg(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:c,featureState:d,geometry:f,transform:b,pixelsToTileUnits:y}){let x=ig(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-b.bearingInRadians,y),S=y/2*O2(this.paint.get("line-width").evaluate(c,d),this.paint.get("line-gap-width").evaluate(c,d)),k=this.paint.get("line-offset").evaluate(c,d);return k&&(f=function(D,L){let V=[];for(let H=0;H<D.length;H++){let Z=D[H],te=[];for(let de=0;de<Z.length;de++){let be=Z[de-1],Re=Z[de],we=Z[de+1],q=de===0?new R(0,0):Re.sub(be)._unit()._perp(),ce=de===Z.length-1?new R(0,0):we.sub(Re)._unit()._perp(),Ee=q._add(ce)._unit(),Ze=Ee.x*ce.x+Ee.y*ce.y;Ze!==0&&Ee._mult(1/Ze),te.push(Ee._mult(L)._add(Re))}V.push(te)}return V}(f,k*y)),function(D,L,V){for(let H=0;H<L.length;H++){let Z=L[H];if(D.length>=3){for(let te=0;te<Z.length;te++)if(Vu(D,Z[te]))return!0}if(rP(D,Z,V))return!0}return!1}(x,f,S)}isTileClipped(){return!0}}function O2(u,n){return n>0?n+2*u:u}let qP=kr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),HP=kr([{name:"a_projected_pos",components:3,type:"Float32"}],4);kr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let $P=kr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);kr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let L2=kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),GP=kr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function WP(u,n,c){return u.sections.forEach(d=>{d.text=function(f,b,y){let x=b.layout.get("text-transform").evaluate(y,{});return x==="uppercase"?f=f.toLocaleUpperCase():x==="lowercase"&&(f=f.toLocaleLowerCase()),Ra.applyArabicShaping&&(f=Ra.applyArabicShaping(f)),f}(d.text,n,c)}),u}kr([{name:"triangle",components:3,type:"Uint16"}]),kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),kr([{type:"Float32",name:"offsetX"}]),kr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),kr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let Xp={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var N2,Zb,F2,un=24,Xb={};function ZP(){return N2||(N2=1,Xb.read=function(u,n,c,d,f){var b,y,x=8*f-d-1,S=(1<<x)-1,k=S>>1,D=-7,L=c?f-1:0,V=c?-1:1,H=u[n+L];for(L+=V,b=H&(1<<-D)-1,H>>=-D,D+=x;D>0;b=256*b+u[n+L],L+=V,D-=8);for(y=b&(1<<-D)-1,b>>=-D,D+=d;D>0;y=256*y+u[n+L],L+=V,D-=8);if(b===0)b=1-k;else{if(b===S)return y?NaN:1/0*(H?-1:1);y+=Math.pow(2,d),b-=k}return(H?-1:1)*y*Math.pow(2,b-d)},Xb.write=function(u,n,c,d,f,b){var y,x,S,k=8*b-f-1,D=(1<<k)-1,L=D>>1,V=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=d?0:b-1,Z=d?1:-1,te=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(x=isNaN(n)?1:0,y=D):(y=Math.floor(Math.log(n)/Math.LN2),n*(S=Math.pow(2,-y))<1&&(y--,S*=2),(n+=y+L>=1?V/S:V*Math.pow(2,1-L))*S>=2&&(y++,S/=2),y+L>=D?(x=0,y=D):y+L>=1?(x=(n*S-1)*Math.pow(2,f),y+=L):(x=n*Math.pow(2,L-1)*Math.pow(2,f),y=0));f>=8;u[c+H]=255&x,H+=Z,x/=256,f-=8);for(y=y<<f|x,k+=f;k>0;u[c+H]=255&y,H+=Z,y/=256,k-=8);u[c+H-Z]|=128*te}),Xb}function z2(){if(F2)return Zb;F2=1,Zb=n;var u=ZP();function n(q){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(q)?q:new Uint8Array(q||0),this.pos=0,this.type=0,this.length=this.buf.length}n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var c=4294967296,d=1/c,f=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function b(q){return q.type===n.Bytes?q.readVarint()+q.pos:q.pos+1}function y(q,ce,Ee){return Ee?4294967296*ce+(q>>>0):4294967296*(ce>>>0)+(q>>>0)}function x(q,ce,Ee){var Ze=ce<=16383?1:ce<=2097151?2:ce<=268435455?3:Math.floor(Math.log(ce)/(7*Math.LN2));Ee.realloc(Ze);for(var mt=Ee.pos-1;mt>=q;mt--)Ee.buf[mt+Ze]=Ee.buf[mt]}function S(q,ce){for(var Ee=0;Ee<q.length;Ee++)ce.writeVarint(q[Ee])}function k(q,ce){for(var Ee=0;Ee<q.length;Ee++)ce.writeSVarint(q[Ee])}function D(q,ce){for(var Ee=0;Ee<q.length;Ee++)ce.writeFloat(q[Ee])}function L(q,ce){for(var Ee=0;Ee<q.length;Ee++)ce.writeDouble(q[Ee])}function V(q,ce){for(var Ee=0;Ee<q.length;Ee++)ce.writeBoolean(q[Ee])}function H(q,ce){for(var Ee=0;Ee<q.length;Ee++)ce.writeFixed32(q[Ee])}function Z(q,ce){for(var Ee=0;Ee<q.length;Ee++)ce.writeSFixed32(q[Ee])}function te(q,ce){for(var Ee=0;Ee<q.length;Ee++)ce.writeFixed64(q[Ee])}function de(q,ce){for(var Ee=0;Ee<q.length;Ee++)ce.writeSFixed64(q[Ee])}function be(q,ce){return(q[ce]|q[ce+1]<<8|q[ce+2]<<16)+16777216*q[ce+3]}function Re(q,ce,Ee){q[Ee]=ce,q[Ee+1]=ce>>>8,q[Ee+2]=ce>>>16,q[Ee+3]=ce>>>24}function we(q,ce){return(q[ce]|q[ce+1]<<8|q[ce+2]<<16)+(q[ce+3]<<24)}return n.prototype={destroy:function(){this.buf=null},readFields:function(q,ce,Ee){for(Ee=Ee||this.length;this.pos<Ee;){var Ze=this.readVarint(),mt=Ze>>3,Ke=this.pos;this.type=7&Ze,q(mt,ce,this),this.pos===Ke&&this.skip(Ze)}return ce},readMessage:function(q,ce){return this.readFields(q,ce,this.readVarint()+this.pos)},readFixed32:function(){var q=be(this.buf,this.pos);return this.pos+=4,q},readSFixed32:function(){var q=we(this.buf,this.pos);return this.pos+=4,q},readFixed64:function(){var q=be(this.buf,this.pos)+be(this.buf,this.pos+4)*c;return this.pos+=8,q},readSFixed64:function(){var q=be(this.buf,this.pos)+we(this.buf,this.pos+4)*c;return this.pos+=8,q},readFloat:function(){var q=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,q},readDouble:function(){var q=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,q},readVarint:function(q){var ce,Ee,Ze=this.buf;return ce=127&(Ee=Ze[this.pos++]),Ee<128?ce:(ce|=(127&(Ee=Ze[this.pos++]))<<7,Ee<128?ce:(ce|=(127&(Ee=Ze[this.pos++]))<<14,Ee<128?ce:(ce|=(127&(Ee=Ze[this.pos++]))<<21,Ee<128?ce:function(mt,Ke,at){var vt,gt,xt=at.buf;if(vt=(112&(gt=xt[at.pos++]))>>4,gt<128||(vt|=(127&(gt=xt[at.pos++]))<<3,gt<128)||(vt|=(127&(gt=xt[at.pos++]))<<10,gt<128)||(vt|=(127&(gt=xt[at.pos++]))<<17,gt<128)||(vt|=(127&(gt=xt[at.pos++]))<<24,gt<128)||(vt|=(1&(gt=xt[at.pos++]))<<31,gt<128))return y(mt,vt,Ke);throw new Error("Expected varint not more than 10 bytes")}(ce|=(15&(Ee=Ze[this.pos]))<<28,q,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var q=this.readVarint();return q%2==1?(q+1)/-2:q/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var q=this.readVarint()+this.pos,ce=this.pos;return this.pos=q,q-ce>=12&&f?function(Ee,Ze,mt){return f.decode(Ee.subarray(Ze,mt))}(this.buf,ce,q):function(Ee,Ze,mt){for(var Ke="",at=Ze;at<mt;){var vt,gt,xt,ut=Ee[at],zt=null,Kt=ut>239?4:ut>223?3:ut>191?2:1;if(at+Kt>mt)break;Kt===1?ut<128&&(zt=ut):Kt===2?(192&(vt=Ee[at+1]))==128&&(zt=(31&ut)<<6|63&vt)<=127&&(zt=null):Kt===3?(gt=Ee[at+2],(192&(vt=Ee[at+1]))==128&&(192&gt)==128&&((zt=(15&ut)<<12|(63&vt)<<6|63&gt)<=2047||zt>=55296&&zt<=57343)&&(zt=null)):Kt===4&&(gt=Ee[at+2],xt=Ee[at+3],(192&(vt=Ee[at+1]))==128&&(192&gt)==128&&(192&xt)==128&&((zt=(15&ut)<<18|(63&vt)<<12|(63&gt)<<6|63&xt)<=65535||zt>=1114112)&&(zt=null)),zt===null?(zt=65533,Kt=1):zt>65535&&(zt-=65536,Ke+=String.fromCharCode(zt>>>10&1023|55296),zt=56320|1023&zt),Ke+=String.fromCharCode(zt),at+=Kt}return Ke}(this.buf,ce,q)},readBytes:function(){var q=this.readVarint()+this.pos,ce=this.buf.subarray(this.pos,q);return this.pos=q,ce},readPackedVarint:function(q,ce){if(this.type!==n.Bytes)return q.push(this.readVarint(ce));var Ee=b(this);for(q=q||[];this.pos<Ee;)q.push(this.readVarint(ce));return q},readPackedSVarint:function(q){if(this.type!==n.Bytes)return q.push(this.readSVarint());var ce=b(this);for(q=q||[];this.pos<ce;)q.push(this.readSVarint());return q},readPackedBoolean:function(q){if(this.type!==n.Bytes)return q.push(this.readBoolean());var ce=b(this);for(q=q||[];this.pos<ce;)q.push(this.readBoolean());return q},readPackedFloat:function(q){if(this.type!==n.Bytes)return q.push(this.readFloat());var ce=b(this);for(q=q||[];this.pos<ce;)q.push(this.readFloat());return q},readPackedDouble:function(q){if(this.type!==n.Bytes)return q.push(this.readDouble());var ce=b(this);for(q=q||[];this.pos<ce;)q.push(this.readDouble());return q},readPackedFixed32:function(q){if(this.type!==n.Bytes)return q.push(this.readFixed32());var ce=b(this);for(q=q||[];this.pos<ce;)q.push(this.readFixed32());return q},readPackedSFixed32:function(q){if(this.type!==n.Bytes)return q.push(this.readSFixed32());var ce=b(this);for(q=q||[];this.pos<ce;)q.push(this.readSFixed32());return q},readPackedFixed64:function(q){if(this.type!==n.Bytes)return q.push(this.readFixed64());var ce=b(this);for(q=q||[];this.pos<ce;)q.push(this.readFixed64());return q},readPackedSFixed64:function(q){if(this.type!==n.Bytes)return q.push(this.readSFixed64());var ce=b(this);for(q=q||[];this.pos<ce;)q.push(this.readSFixed64());return q},skip:function(q){var ce=7&q;if(ce===n.Varint)for(;this.buf[this.pos++]>127;);else if(ce===n.Bytes)this.pos=this.readVarint()+this.pos;else if(ce===n.Fixed32)this.pos+=4;else{if(ce!==n.Fixed64)throw new Error("Unimplemented type: "+ce);this.pos+=8}},writeTag:function(q,ce){this.writeVarint(q<<3|ce)},realloc:function(q){for(var ce=this.length||16;ce<this.pos+q;)ce*=2;if(ce!==this.length){var Ee=new Uint8Array(ce);Ee.set(this.buf),this.buf=Ee,this.length=ce}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(q){this.realloc(4),Re(this.buf,q,this.pos),this.pos+=4},writeSFixed32:function(q){this.realloc(4),Re(this.buf,q,this.pos),this.pos+=4},writeFixed64:function(q){this.realloc(8),Re(this.buf,-1&q,this.pos),Re(this.buf,Math.floor(q*d),this.pos+4),this.pos+=8},writeSFixed64:function(q){this.realloc(8),Re(this.buf,-1&q,this.pos),Re(this.buf,Math.floor(q*d),this.pos+4),this.pos+=8},writeVarint:function(q){(q=+q||0)>268435455||q<0?function(ce,Ee){var Ze,mt;if(ce>=0?(Ze=ce%4294967296|0,mt=ce/4294967296|0):(mt=~(-ce/4294967296),4294967295^(Ze=~(-ce%4294967296))?Ze=Ze+1|0:(Ze=0,mt=mt+1|0)),ce>=18446744073709552e3||ce<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ee.realloc(10),function(Ke,at,vt){vt.buf[vt.pos++]=127&Ke|128,Ke>>>=7,vt.buf[vt.pos++]=127&Ke|128,Ke>>>=7,vt.buf[vt.pos++]=127&Ke|128,Ke>>>=7,vt.buf[vt.pos++]=127&Ke|128,vt.buf[vt.pos]=127&(Ke>>>=7)}(Ze,0,Ee),function(Ke,at){var vt=(7&Ke)<<4;at.buf[at.pos++]|=vt|((Ke>>>=3)?128:0),Ke&&(at.buf[at.pos++]=127&Ke|((Ke>>>=7)?128:0),Ke&&(at.buf[at.pos++]=127&Ke|((Ke>>>=7)?128:0),Ke&&(at.buf[at.pos++]=127&Ke|((Ke>>>=7)?128:0),Ke&&(at.buf[at.pos++]=127&Ke|((Ke>>>=7)?128:0),Ke&&(at.buf[at.pos++]=127&Ke)))))}(mt,Ee)}(q,this):(this.realloc(4),this.buf[this.pos++]=127&q|(q>127?128:0),q<=127||(this.buf[this.pos++]=127&(q>>>=7)|(q>127?128:0),q<=127||(this.buf[this.pos++]=127&(q>>>=7)|(q>127?128:0),q<=127||(this.buf[this.pos++]=q>>>7&127))))},writeSVarint:function(q){this.writeVarint(q<0?2*-q-1:2*q)},writeBoolean:function(q){this.writeVarint(!!q)},writeString:function(q){q=String(q),this.realloc(4*q.length),this.pos++;var ce=this.pos;this.pos=function(Ze,mt,Ke){for(var at,vt,gt=0;gt<mt.length;gt++){if((at=mt.charCodeAt(gt))>55295&&at<57344){if(!vt){at>56319||gt+1===mt.length?(Ze[Ke++]=239,Ze[Ke++]=191,Ze[Ke++]=189):vt=at;continue}if(at<56320){Ze[Ke++]=239,Ze[Ke++]=191,Ze[Ke++]=189,vt=at;continue}at=vt-55296<<10|at-56320|65536,vt=null}else vt&&(Ze[Ke++]=239,Ze[Ke++]=191,Ze[Ke++]=189,vt=null);at<128?Ze[Ke++]=at:(at<2048?Ze[Ke++]=at>>6|192:(at<65536?Ze[Ke++]=at>>12|224:(Ze[Ke++]=at>>18|240,Ze[Ke++]=at>>12&63|128),Ze[Ke++]=at>>6&63|128),Ze[Ke++]=63&at|128)}return Ke}(this.buf,q,this.pos);var Ee=this.pos-ce;Ee>=128&&x(ce,Ee,this),this.pos=ce-1,this.writeVarint(Ee),this.pos+=Ee},writeFloat:function(q){this.realloc(4),u.write(this.buf,q,this.pos,!0,23,4),this.pos+=4},writeDouble:function(q){this.realloc(8),u.write(this.buf,q,this.pos,!0,52,8),this.pos+=8},writeBytes:function(q){var ce=q.length;this.writeVarint(ce),this.realloc(ce);for(var Ee=0;Ee<ce;Ee++)this.buf[this.pos++]=q[Ee]},writeRawMessage:function(q,ce){this.pos++;var Ee=this.pos;q(ce,this);var Ze=this.pos-Ee;Ze>=128&&x(Ee,Ze,this),this.pos=Ee-1,this.writeVarint(Ze),this.pos+=Ze},writeMessage:function(q,ce,Ee){this.writeTag(q,n.Bytes),this.writeRawMessage(ce,Ee)},writePackedVarint:function(q,ce){ce.length&&this.writeMessage(q,S,ce)},writePackedSVarint:function(q,ce){ce.length&&this.writeMessage(q,k,ce)},writePackedBoolean:function(q,ce){ce.length&&this.writeMessage(q,V,ce)},writePackedFloat:function(q,ce){ce.length&&this.writeMessage(q,D,ce)},writePackedDouble:function(q,ce){ce.length&&this.writeMessage(q,L,ce)},writePackedFixed32:function(q,ce){ce.length&&this.writeMessage(q,H,ce)},writePackedSFixed32:function(q,ce){ce.length&&this.writeMessage(q,Z,ce)},writePackedFixed64:function(q,ce){ce.length&&this.writeMessage(q,te,ce)},writePackedSFixed64:function(q,ce){ce.length&&this.writeMessage(q,de,ce)},writeBytesField:function(q,ce){this.writeTag(q,n.Bytes),this.writeBytes(ce)},writeFixed32Field:function(q,ce){this.writeTag(q,n.Fixed32),this.writeFixed32(ce)},writeSFixed32Field:function(q,ce){this.writeTag(q,n.Fixed32),this.writeSFixed32(ce)},writeFixed64Field:function(q,ce){this.writeTag(q,n.Fixed64),this.writeFixed64(ce)},writeSFixed64Field:function(q,ce){this.writeTag(q,n.Fixed64),this.writeSFixed64(ce)},writeVarintField:function(q,ce){this.writeTag(q,n.Varint),this.writeVarint(ce)},writeSVarintField:function(q,ce){this.writeTag(q,n.Varint),this.writeSVarint(ce)},writeStringField:function(q,ce){this.writeTag(q,n.Bytes),this.writeString(ce)},writeFloatField:function(q,ce){this.writeTag(q,n.Fixed32),this.writeFloat(ce)},writeDoubleField:function(q,ce){this.writeTag(q,n.Fixed64),this.writeDouble(ce)},writeBooleanField:function(q,ce){this.writeVarintField(q,!!ce)}},Zb}var Yb=_(z2());let Kb=3;function XP(u,n,c){u===1&&c.readMessage(YP,n)}function YP(u,n,c){if(u===3){let{id:d,bitmap:f,width:b,height:y,left:x,top:S,advance:k}=c.readMessage(KP,{});n.push({id:d,bitmap:new Bp({width:b+2*Kb,height:y+2*Kb},f),metrics:{width:b,height:y,left:x,top:S,advance:k}})}}function KP(u,n,c){u===1?n.id=c.readVarint():u===2?n.bitmap=c.readBytes():u===3?n.width=c.readVarint():u===4?n.height=c.readVarint():u===5?n.left=c.readSVarint():u===6?n.top=c.readSVarint():u===7&&(n.advance=c.readVarint())}let QP=Kb;function B2(u){let n=0,c=0;for(let y of u)n+=y.w*y.h,c=Math.max(c,y.w);u.sort((y,x)=>x.h-y.h);let d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),c),h:1/0}],f=0,b=0;for(let y of u)for(let x=d.length-1;x>=0;x--){let S=d[x];if(!(y.w>S.w||y.h>S.h)){if(y.x=S.x,y.y=S.y,b=Math.max(b,y.y+y.h),f=Math.max(f,y.x+y.w),y.w===S.w&&y.h===S.h){let k=d.pop();x<d.length&&(d[x]=k)}else y.h===S.h?(S.x+=y.w,S.w-=y.w):y.w===S.w?(S.y+=y.h,S.h-=y.h):(d.push({x:S.x+y.w,y:S.y,w:S.w-y.w,h:y.h}),S.y+=y.h,S.h-=y.h);break}}return{w:f,h:b,fill:n/(f*b)||0}}let Vo=1;class Qb{constructor(n,{pixelRatio:c,version:d,stretchX:f,stretchY:b,content:y,textFitWidth:x,textFitHeight:S}){this.paddedRect=n,this.pixelRatio=c,this.stretchX=f,this.stretchY=b,this.content=y,this.version=d,this.textFitWidth=x,this.textFitHeight=S}get tl(){return[this.paddedRect.x+Vo,this.paddedRect.y+Vo]}get br(){return[this.paddedRect.x+this.paddedRect.w-Vo,this.paddedRect.y+this.paddedRect.h-Vo]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Vo)/this.pixelRatio,(this.paddedRect.h-2*Vo)/this.pixelRatio]}}class V2{constructor(n,c){let d={},f={};this.haveRenderCallbacks=[];let b=[];this.addImages(n,d,b),this.addImages(c,f,b);let{w:y,h:x}=B2(b),S=new xs({width:y||1,height:x||1});for(let k in n){let D=n[k],L=d[k].paddedRect;xs.copy(D.data,S,{x:0,y:0},{x:L.x+Vo,y:L.y+Vo},D.data)}for(let k in c){let D=c[k],L=f[k].paddedRect,V=L.x+Vo,H=L.y+Vo,Z=D.data.width,te=D.data.height;xs.copy(D.data,S,{x:0,y:0},{x:V,y:H},D.data),xs.copy(D.data,S,{x:0,y:te-1},{x:V,y:H-1},{width:Z,height:1}),xs.copy(D.data,S,{x:0,y:0},{x:V,y:H+te},{width:Z,height:1}),xs.copy(D.data,S,{x:Z-1,y:0},{x:V-1,y:H},{width:1,height:te}),xs.copy(D.data,S,{x:0,y:0},{x:V+Z,y:H},{width:1,height:te})}this.image=S,this.iconPositions=d,this.patternPositions=f}addImages(n,c,d){for(let f in n){let b=n[f],y={x:0,y:0,w:b.data.width+2*Vo,h:b.data.height+2*Vo};d.push(y),c[f]=new Qb(y,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,c){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let d in n.updatedImages)this.patchUpdatedImage(this.iconPositions[d],n.getImage(d),c),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d),c)}patchUpdatedImage(n,c,d){if(!n||!c||n.version===c.version)return;n.version=c.version;let[f,b]=n.tl;d.update(c.data,void 0,{x:f,y:b})}}var Lc;Dt("ImagePosition",Qb),Dt("ImageAtlas",V2),a.al=void 0,(Lc=a.al||(a.al={}))[Lc.none=0]="none",Lc[Lc.horizontal=1]="horizontal",Lc[Lc.vertical=2]="vertical",Lc[Lc.horizontalOnly=3]="horizontalOnly";let lg=-17;class Yp{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(n,c,d){let f=new Yp;return f.scale=n||1,f.fontStack=c,f.verticalAlign=d||"bottom",f}static forImage(n,c){let d=new Yp;return d.imageName=n,d.verticalAlign=c||"bottom",d}}class ih{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,c){let d=new ih;for(let f=0;f<n.sections.length;f++){let b=n.sections[f];b.image?d.addImageSection(b):d.addTextSection(b,c)}return d}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let c="";for(let d=0;d<n.length;d++){let f=n.charCodeAt(d+1)||null,b=n.charCodeAt(d-1)||null;c+=f&&Pu(f)&&!Xp[n[d+1]]||b&&Pu(b)&&!Xp[n[d-1]]||!Xp[n[d]]?n[d]:Xp[n[d]]}return c}(this.text)}trim(){let n=0;for(let d=0;d<this.text.length&&ug[this.text.charCodeAt(d)];d++)n++;let c=this.text.length;for(let d=this.text.length-1;d>=0&&d>=n&&ug[this.text.charCodeAt(d)];d--)c--;this.text=this.text.substring(n,c),this.sectionIndex=this.sectionIndex.slice(n,c)}substring(n,c){let d=new ih;return d.text=this.text.substring(n,c),d.sectionIndex=this.sectionIndex.slice(n,c),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,c)=>Math.max(n,this.sections[c].scale),0)}getMaxImageSize(n){let c=0,d=0;for(let f=0;f<this.length();f++){let b=this.getSection(f);if(b.imageName){let y=n[b.imageName];if(!y)continue;let x=y.displaySize;c=Math.max(c,x[0]),d=Math.max(d,x[1])}}return{maxImageWidth:c,maxImageHeight:d}}addTextSection(n,c){this.text+=n.text,this.sections.push(Yp.forText(n.scale,n.fontStack||c,n.verticalAlign));let d=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(d)}addImageSection(n){let c=n.image?n.image.name:"";if(c.length===0)return void Ar("Can't add FormattedSection with an empty image.");let d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Yp.forImage(c,n.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Ar("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function cg(u,n,c,d,f,b,y,x,S,k,D,L,V,H,Z){let te=ih.fromFeature(u,f),de;L===a.al.vertical&&te.verticalizePunctuation();let{processBidirectionalText:be,processStyledBidirectionalText:Re}=Ra;if(be&&te.sections.length===1){de=[];let ce=be(te.toString(),Jb(te,k,b,n,d,H));for(let Ee of ce){let Ze=new ih;Ze.text=Ee,Ze.sections=te.sections;for(let mt=0;mt<Ee.length;mt++)Ze.sectionIndex.push(0);de.push(Ze)}}else if(Re){de=[];let ce=Re(te.text,te.sectionIndex,Jb(te,k,b,n,d,H));for(let Ee of ce){let Ze=new ih;Ze.text=Ee[0],Ze.sectionIndex=Ee[1],Ze.sections=te.sections,de.push(Ze)}}else de=function(ce,Ee){let Ze=[],mt=ce.text,Ke=0;for(let at of Ee)Ze.push(ce.substring(Ke,at)),Ke=at;return Ke<mt.length&&Ze.push(ce.substring(Ke,mt.length)),Ze}(te,Jb(te,k,b,n,d,H));let we=[],q={positionedLines:we,text:te.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:L,iconsInText:!1,verticalizable:!1};return function(ce,Ee,Ze,mt,Ke,at,vt,gt,xt,ut,zt,Kt){let Xt=0,Ht=0,Vi=0,zr=0,dn=gt==="right"?1:gt==="left"?0:.5,Zn=un/Kt,Cs=0;for(let Or of Ke){Or.trim();let En=Or.getMaxScale(),Un={positionedGlyphs:[],lineOffset:0};ce.positionedLines[Cs]=Un;let jn=Un.positionedGlyphs,To=0;if(!Or.length()){Ht+=at,++Cs;continue}let Es=iD(mt,Or,Zn);for(let jo=0;jo<Or.length();jo++){let hn=Or.getSection(jo),Tn=Or.getSectionIndex(jo),Mn=Or.getCharCode(jo),on=rD(xt,zt,Mn),Sr;if(hn.imageName){if(ce.iconsInText=!0,hn.scale=hn.scale*Zn,Sr=oD(hn,on,En,Es,mt),!Sr)continue;To=Math.max(To,Sr.imageOffset)}else if(Sr=nD(hn,Mn,on,Es,Ee,Ze),!Sr)continue;let{rect:Na,metrics:sh,baselineOffset:Fa}=Sr;jn.push({glyph:Mn,imageName:hn.imageName,x:Xt,y:Ht+Fa+lg,vertical:on,scale:hn.scale,fontStack:hn.fontStack,sectionIndex:Tn,metrics:sh,rect:Na}),on?(ce.verticalizable=!0,Xt+=(hn.imageName?sh.advance:un)*hn.scale+ut):Xt+=sh.advance*hn.scale+ut}jn.length!==0&&(Vi=Math.max(Xt-ut,Vi),sD(jn,0,jn.length-1,dn)),Xt=0,Un.lineOffset=Math.max(To,(En-1)*un);let Sn=at*En+To;Ht+=Sn,zr=Math.max(Sn,zr),++Cs}let{horizontalAlign:Uo,verticalAlign:Vn}=ey(vt);(function(Or,En,Un,jn,To,Es,Sn,jo,hn){let Tn=(En-Un)*To,Mn=0;Mn=Es!==Sn?-jo*jn-lg:-jn*hn*Sn+.5*Sn;for(let on of Or)for(let Sr of on.positionedGlyphs)Sr.x+=Tn,Sr.y+=Mn})(ce.positionedLines,dn,Uo,Vn,Vi,zr,at,Ht,Ke.length),ce.top+=-Vn*Ht,ce.bottom=ce.top+Ht,ce.left+=-Uo*Vi,ce.right=ce.left+Vi}(q,n,c,d,de,y,x,S,L,k,V,Z),!function(ce){for(let Ee of ce)if(Ee.positionedGlyphs.length!==0)return!1;return!0}(we)&&q}let ug={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},JP={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},eD={40:!0};function U2(u,n,c,d,f,b){if(n.imageName){let y=d[n.imageName];return y?y.displaySize[0]*n.scale*un/b+f:0}{let y=c[n.fontStack],x=y&&y[u];return x?x.metrics.advance*n.scale+f:0}}function j2(u,n,c,d){let f=Math.pow(u-n,2);return d?u<n?f/2:2*f:f+Math.abs(c)*c}function tD(u,n,c){let d=0;return u===10&&(d-=1e4),c&&(d+=150),u!==40&&u!==65288||(d+=50),n!==41&&n!==65289||(d+=50),d}function q2(u,n,c,d,f,b){let y=null,x=j2(n,c,f,b);for(let S of d){let k=j2(n-S.x,c,f,b)+S.badness;k<=x&&(y=S,x=k)}return{index:u,x:n,priorBreak:y,badness:x}}function H2(u){return u?H2(u.priorBreak).concat(u.index):[]}function Jb(u,n,c,d,f,b){if(!u)return[];let y=[],x=function(L,V,H,Z,te,de){let be=0;for(let Re=0;Re<L.length();Re++){let we=L.getSection(Re);be+=U2(L.getCharCode(Re),we,Z,te,V,de)}return be/Math.max(1,Math.ceil(be/H))}(u,n,c,d,f,b),S=u.text.indexOf("\u200B")>=0,k=0;for(let L=0;L<u.length();L++){let V=u.getSection(L),H=u.getCharCode(L);if(ug[H]||(k+=U2(H,V,d,f,n,b)),L<u.length()-1){let Z=!((D=H)<11904)&&(!!Fi["CJK Compatibility Forms"](D)||!!Fi["CJK Compatibility"](D)||!!Fi["CJK Strokes"](D)||!!Fi["CJK Symbols and Punctuation"](D)||!!Fi["Enclosed CJK Letters and Months"](D)||!!Fi["Halfwidth and Fullwidth Forms"](D)||!!Fi["Ideographic Description Characters"](D)||!!Fi["Vertical Forms"](D)||Ip.test(String.fromCodePoint(D)));(JP[H]||Z||V.imageName||L!==u.length()-2&&eD[u.getCharCode(L+1)])&&y.push(q2(L+1,k,x,y,tD(H,u.getCharCode(L+1),Z&&S),!1))}}var D;return H2(q2(u.length(),k,x,y,0,!0))}function ey(u){let n=.5,c=.5;switch(u){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:n,verticalAlign:c}}function iD(u,n,c){let d=n.getMaxScale()*un,{maxImageWidth:f,maxImageHeight:b}=n.getMaxImageSize(u),y=Math.max(d,b*c);return{verticalLineContentWidth:Math.max(d,f*c),horizontalLineContentHeight:y}}function $2(u){switch(u){case"top":return 0;case"center":return .5;default:return 1}}function rD(u,n,c){return!(u===a.al.horizontal||!n&&!Zd(c)||n&&(ug[c]||(d=c,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function nD(u,n,c,d,f,b){let y=b[u.fontStack],x=function(k,D,L,V){if(k&&k.rect)return k;let H=D[L.fontStack],Z=H&&H[V];return Z?{rect:null,metrics:Z.metrics}:null}(y&&y[n],f,u,n);if(x===null)return null;let S;if(c)S=d.verticalLineContentWidth-u.scale*un;else{let k=$2(u.verticalAlign);S=(d.horizontalLineContentHeight-u.scale*un)*k}return{rect:x.rect,metrics:x.metrics,baselineOffset:S}}function oD(u,n,c,d,f){let b=f[u.imageName];if(!b)return null;let y=b.paddedRect,x=b.displaySize,S={width:x[0],height:x[1],left:Vo,top:-3,advance:n?x[1]:x[0]},k;if(n)k=d.verticalLineContentWidth-x[1]*u.scale;else{let D=$2(u.verticalAlign);k=(d.horizontalLineContentHeight-x[1]*u.scale)*D}return{rect:y,metrics:S,baselineOffset:k,imageOffset:(n?x[0]:x[1])*u.scale-un*c}}function sD(u,n,c,d){if(d===0)return;let f=u[c],b=(u[c].x+f.metrics.advance*f.scale)*d;for(let y=n;y<=c;y++)u[y].x-=b}function aD(u,n,c){let{horizontalAlign:d,verticalAlign:f}=ey(c),b=n[0]-u.displaySize[0]*d,y=n[1]-u.displaySize[1]*f;return{image:u,top:y,bottom:y+u.displaySize[1],left:b,right:b+u.displaySize[0]}}function G2(u){var n,c;let d=u.left,f=u.top,b=u.right-d,y=u.bottom-f,x=(n=u.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",S=(c=u.image.textFitHeight)!==null&&c!==void 0?c:"stretchOrShrink",k=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(S==="proportional"){if(x==="stretchOnly"&&b/y<k||x==="proportional"){let D=Math.ceil(y*k);d*=D/b,b=D}}else if(x==="proportional"&&S==="stretchOnly"&&k!==0&&b/y>k){let D=Math.ceil(b/k);f*=D/y,y=D}return{x1:d,y1:f,x2:d+b,y2:f+y}}function W2(u,n,c,d,f,b){let y=u.image,x;if(y.content){let de=y.content,be=y.pixelRatio||1;x=[de[0]/be,de[1]/be,y.displaySize[0]-de[2]/be,y.displaySize[1]-de[3]/be]}let S=n.left*b,k=n.right*b,D,L,V,H;c==="width"||c==="both"?(H=f[0]+S-d[3],L=f[0]+k+d[1]):(H=f[0]+(S+k-y.displaySize[0])/2,L=H+y.displaySize[0]);let Z=n.top*b,te=n.bottom*b;return c==="height"||c==="both"?(D=f[1]+Z-d[0],V=f[1]+te+d[2]):(D=f[1]+(Z+te-y.displaySize[1])/2,V=D+y.displaySize[1]),{image:y,top:D,right:L,bottom:V,left:H,collisionPadding:x}}let Kp=255,fl=128,Nc=Kp*fl;function Z2(u,n){let{expression:c}=n;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Cr(u+1))};if(c.kind==="source")return{kind:"source"};{let{zoomStops:d,interpolationType:f}=c,b=0;for(;b<d.length&&d[b]<=u;)b++;b=Math.max(0,b-1);let y=b;for(;y<d.length&&d[y]<u+1;)y++;y=Math.min(d.length-1,y);let x=d[b],S=d[y];return c.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:f}:{kind:"camera",minZoom:x,maxZoom:S,minSize:c.evaluate(new Cr(x)),maxSize:c.evaluate(new Cr(S)),interpolationType:f}}}function ty(u,n,c){let d="never",f=u.get(n);return f?d=f:u.get(c)&&(d="always"),d}let lD=Gp.VectorTileFeature.types,cD=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function dg(u,n,c,d,f,b,y,x,S,k,D,L,V){let H=x?Math.min(Nc,Math.round(x[0])):0,Z=x?Math.min(Nc,Math.round(x[1])):0;u.emplaceBack(n,c,Math.round(32*d),Math.round(32*f),b,y,(H<<1)+(S?1:0),Z,16*k,16*D,256*L,256*V)}function iy(u,n,c){u.emplaceBack(n.x,n.y,c),u.emplaceBack(n.x,n.y,c),u.emplaceBack(n.x,n.y,c),u.emplaceBack(n.x,n.y,c)}function uD(u){for(let n of u.sections)if(Mb(n.text))return!0;return!1}class ry{constructor(n){this.layoutVertexArray=new Pr,this.indexArray=new Qi,this.programConfigurations=n,this.segments=new Ji,this.dynamicLayoutVertexArray=new gr,this.opacityVertexArray=new Dr,this.hasVisibleVertices=!1,this.placedSymbolArray=new Me}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,c,d,f){this.isEmpty()||(d&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,qP.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,HP.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,cD,!0),this.opacityVertexBuffer.itemSize=1),(d||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Dt("SymbolBuffers",ry);class ny{constructor(n,c,d){this.layoutVertexArray=new n,this.layoutAttributes=c,this.indexArray=new d,this.segments=new Ji,this.collisionVertexArray=new yr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,$P.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Dt("CollisionBuffers",ny);class rh{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(y=>y.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Z2(this.zoom,c["text-size"]),this.iconSizeData=Z2(this.zoom,c["icon-size"]);let d=this.layers[0].layout,f=d.get("symbol-sort-key"),b=d.get("symbol-z-order");this.canOverlap=ty(d,"text-overlap","text-allow-overlap")!=="never"||ty(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(y=>a.al[y])),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=n.sourceID}createArrays(){this.text=new ry(new pl(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new ry(new pl(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Fe,this.lineVertexArray=new De,this.symbolInstances=new ke,this.textAnchorOffsets=new lt}calculateGlyphDependencies(n,c,d,f,b){for(let y=0;y<n.length;y++)if(c[n.charCodeAt(y)]=!0,(d||f)&&b){let x=Xp[n.charAt(y)];x&&(c[x.charCodeAt(0)]=!0)}}populate(n,c,d){let f=this.layers[0],b=f.layout,y=b.get("text-font"),x=b.get("text-field"),S=b.get("icon-image"),k=(x.value.kind!=="constant"||x.value.value instanceof ii&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),D=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,L=b.get("symbol-sort-key");if(this.features=[],!k&&!D)return;let V=c.iconDependencies,H=c.glyphDependencies,Z=c.availableImages,te=new Cr(this.zoom);for(let{feature:de,id:be,index:Re,sourceLayerIndex:we}of n){let q=f._featureFilter.needGeometry,ce=Bu(de,q);if(!f._featureFilter.filter(te,ce,d))continue;let Ee,Ze;if(q||(ce.geometry=zu(de)),k){let Ke=f.getValueAndResolveTokens("text-field",ce,d,Z),at=ii.factory(Ke),vt=this.hasRTLText=this.hasRTLText||uD(at);(!vt||Ra.getRTLTextPluginStatus()==="unavailable"||vt&&Ra.isParsed())&&(Ee=WP(at,f,ce))}if(D){let Ke=f.getValueAndResolveTokens("icon-image",ce,d,Z);Ze=Ke instanceof yn?Ke:yn.fromString(Ke)}if(!Ee&&!Ze)continue;let mt=this.sortFeaturesByKey?L.evaluate(ce,{},d):void 0;if(this.features.push({id:be,text:Ee,icon:Ze,index:Re,sourceLayerIndex:we,geometry:ce.geometry,properties:de.properties,type:lD[de.type],sortKey:mt}),Ze&&(V[Ze.name]=!0),Ee){let Ke=y.evaluate(ce,{},d).join(","),at=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.al.vertical)>=0;for(let vt of Ee.sections)if(vt.image)V[vt.image.name]=!0;else{let gt=Wd(Ee.toString()),xt=vt.fontStack||Ke,ut=H[xt]=H[xt]||{};this.calculateGlyphDependencies(vt.text,ut,at,this.allowVerticalPlacement,gt)}}}b.get("symbol-placement")==="line"&&(this.features=function(de){let be={},Re={},we=[],q=0;function ce(Ke){we.push(de[Ke]),q++}function Ee(Ke,at,vt){let gt=Re[Ke];return delete Re[Ke],Re[at]=gt,we[gt].geometry[0].pop(),we[gt].geometry[0]=we[gt].geometry[0].concat(vt[0]),gt}function Ze(Ke,at,vt){let gt=be[at];return delete be[at],be[Ke]=gt,we[gt].geometry[0].shift(),we[gt].geometry[0]=vt[0].concat(we[gt].geometry[0]),gt}function mt(Ke,at,vt){let gt=vt?at[0][at[0].length-1]:at[0][0];return`${Ke}:${gt.x}:${gt.y}`}for(let Ke=0;Ke<de.length;Ke++){let at=de[Ke],vt=at.geometry,gt=at.text?at.text.toString():null;if(!gt){ce(Ke);continue}let xt=mt(gt,vt),ut=mt(gt,vt,!0);if(xt in Re&&ut in be&&Re[xt]!==be[ut]){let zt=Ze(xt,ut,vt),Kt=Ee(xt,ut,we[zt].geometry);delete be[xt],delete Re[ut],Re[mt(gt,we[Kt].geometry,!0)]=Kt,we[zt].geometry=null}else xt in Re?Ee(xt,ut,vt):ut in be?Ze(xt,ut,vt):(ce(Ke),be[xt]=q-1,Re[ut]=q-1)}return we.filter(Ke=>Ke.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((de,be)=>de.sortKey-be.sortKey)}update(n,c,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,c,this.layers,d),this.icon.programConfigurations.updatePaintArrays(n,c,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,c){let d=this.lineVertexArray.length;if(n.segment!==void 0){let f=n.dist(c[n.segment+1]),b=n.dist(c[n.segment]),y={};for(let x=n.segment+1;x<c.length;x++)y[x]={x:c[x].x,y:c[x].y,tileUnitDistanceFromAnchor:f},x<c.length-1&&(f+=c[x+1].dist(c[x]));for(let x=n.segment||0;x>=0;x--)y[x]={x:c[x].x,y:c[x].y,tileUnitDistanceFromAnchor:b},x>0&&(b+=c[x-1].dist(c[x]));for(let x=0;x<c.length;x++){let S=y[x];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(n,c,d,f,b,y,x,S,k,D,L,V){let H=n.indexArray,Z=n.layoutVertexArray,te=n.segments.prepareSegment(4*c.length,Z,H,this.canOverlap?y.sortKey:void 0),de=this.glyphOffsetArray.length,be=te.vertexLength,Re=this.allowVerticalPlacement&&x===a.al.vertical?Math.PI/2:0,we=y.text&&y.text.sections;for(let q=0;q<c.length;q++){let{tl:ce,tr:Ee,bl:Ze,br:mt,tex:Ke,pixelOffsetTL:at,pixelOffsetBR:vt,minFontScaleX:gt,minFontScaleY:xt,glyphOffset:ut,isSDF:zt,sectionIndex:Kt}=c[q],Xt=te.vertexLength,Ht=ut[1];dg(Z,S.x,S.y,ce.x,Ht+ce.y,Ke.x,Ke.y,d,zt,at.x,at.y,gt,xt),dg(Z,S.x,S.y,Ee.x,Ht+Ee.y,Ke.x+Ke.w,Ke.y,d,zt,vt.x,at.y,gt,xt),dg(Z,S.x,S.y,Ze.x,Ht+Ze.y,Ke.x,Ke.y+Ke.h,d,zt,at.x,vt.y,gt,xt),dg(Z,S.x,S.y,mt.x,Ht+mt.y,Ke.x+Ke.w,Ke.y+Ke.h,d,zt,vt.x,vt.y,gt,xt),iy(n.dynamicLayoutVertexArray,S,Re),H.emplaceBack(Xt,Xt+2,Xt+1),H.emplaceBack(Xt+1,Xt+2,Xt+3),te.vertexLength+=4,te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ut[0]),q!==c.length-1&&Kt===c[q+1].sectionIndex||n.programConfigurations.populatePaintArrays(Z.length,y,y.index,{},V,we&&we[Kt])}n.placedSymbolArray.emplaceBack(S.x,S.y,de,this.glyphOffsetArray.length-de,be,k,D,S.segment,d?d[0]:0,d?d[1]:0,f[0],f[1],x,0,!1,0,L)}_addCollisionDebugVertex(n,c,d,f,b,y){return c.emplaceBack(0,0),n.emplaceBack(d.x,d.y,f,b,Math.round(y.x),Math.round(y.y))}addCollisionDebugVertices(n,c,d,f,b,y,x){let S=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),k=S.vertexLength,D=b.layoutVertexArray,L=b.collisionVertexArray,V=x.anchorX,H=x.anchorY;this._addCollisionDebugVertex(D,L,y,V,H,new R(n,c)),this._addCollisionDebugVertex(D,L,y,V,H,new R(d,c)),this._addCollisionDebugVertex(D,L,y,V,H,new R(d,f)),this._addCollisionDebugVertex(D,L,y,V,H,new R(n,f)),S.vertexLength+=4;let Z=b.indexArray;Z.emplaceBack(k,k+1),Z.emplaceBack(k+1,k+2),Z.emplaceBack(k+2,k+3),Z.emplaceBack(k+3,k),S.primitiveLength+=4}addDebugCollisionBoxes(n,c,d,f){for(let b=n;b<c;b++){let y=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,f?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ny(Rr,L2.members,cn),this.iconCollisionBox=new ny(Rr,L2.members,cn);for(let n=0;n<this.symbolInstances.length;n++){let c=this.symbolInstances.get(n);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(n,c,d,f,b,y,x,S,k){let D={};for(let L=c;L<d;L++){let V=n.get(L);D.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},D.textFeatureIndex=V.featureIndex;break}for(let L=f;L<b;L++){let V=n.get(L);D.verticalTextBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},D.verticalTextFeatureIndex=V.featureIndex;break}for(let L=y;L<x;L++){let V=n.get(L);D.iconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},D.iconFeatureIndex=V.featureIndex;break}for(let L=S;L<k;L++){let V=n.get(L);D.verticalIconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},D.verticalIconFeatureIndex=V.featureIndex;break}return D}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){let d=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,c){let d=n.placedSymbolArray.get(c),f=d.vertexStartIndex+4*d.numGlyphs;for(let b=d.vertexStartIndex;b<f;b+=4)n.indexArray.emplaceBack(b,b+2,b+1),n.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let c=Math.sin(n),d=Math.cos(n),f=[],b=[],y=[];for(let x=0;x<this.symbolInstances.length;++x){y.push(x);let S=this.symbolInstances.get(x);f.push(0|Math.round(c*S.anchorX+d*S.anchorY)),b.push(S.featureIndex)}return y.sort((x,S)=>f[x]-f[S]||b[S]-b[x]),y}addToSortKeyRanges(n,c){let d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===c?d.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let c of this.symbolInstanceIndexes){let d=this.symbolInstances.get(c);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((f,b,y)=>{f>=0&&y.indexOf(f)===b&&this.addIndicesForPlacedSymbol(this.text,f)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let X2,Y2;Dt("SymbolBucket",rh,{omit:["layers","collisionBoxArray","features","compareText"]}),rh.MAX_GLYPHS=65535,rh.addDynamicAttributes=iy;var oy={get paint(){return Y2=Y2||new tn({"icon-opacity":new ei(se.paint_symbol["icon-opacity"]),"icon-color":new ei(se.paint_symbol["icon-color"]),"icon-halo-color":new ei(se.paint_symbol["icon-halo-color"]),"icon-halo-width":new ei(se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ei(se.paint_symbol["icon-halo-blur"]),"icon-translate":new $t(se.paint_symbol["icon-translate"]),"icon-translate-anchor":new $t(se.paint_symbol["icon-translate-anchor"]),"text-opacity":new ei(se.paint_symbol["text-opacity"]),"text-color":new ei(se.paint_symbol["text-color"],{runtimeType:tr,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new ei(se.paint_symbol["text-halo-color"]),"text-halo-width":new ei(se.paint_symbol["text-halo-width"]),"text-halo-blur":new ei(se.paint_symbol["text-halo-blur"]),"text-translate":new $t(se.paint_symbol["text-translate"]),"text-translate-anchor":new $t(se.paint_symbol["text-translate-anchor"])})},get layout(){return X2=X2||new tn({"symbol-placement":new $t(se.layout_symbol["symbol-placement"]),"symbol-spacing":new $t(se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new $t(se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ei(se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new $t(se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new $t(se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new $t(se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new $t(se.layout_symbol["icon-ignore-placement"]),"icon-optional":new $t(se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new $t(se.layout_symbol["icon-rotation-alignment"]),"icon-size":new ei(se.layout_symbol["icon-size"]),"icon-text-fit":new $t(se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new $t(se.layout_symbol["icon-text-fit-padding"]),"icon-image":new ei(se.layout_symbol["icon-image"]),"icon-rotate":new ei(se.layout_symbol["icon-rotate"]),"icon-padding":new ei(se.layout_symbol["icon-padding"]),"icon-keep-upright":new $t(se.layout_symbol["icon-keep-upright"]),"icon-offset":new ei(se.layout_symbol["icon-offset"]),"icon-anchor":new ei(se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new $t(se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new $t(se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new $t(se.layout_symbol["text-rotation-alignment"]),"text-field":new ei(se.layout_symbol["text-field"]),"text-font":new ei(se.layout_symbol["text-font"]),"text-size":new ei(se.layout_symbol["text-size"]),"text-max-width":new ei(se.layout_symbol["text-max-width"]),"text-line-height":new $t(se.layout_symbol["text-line-height"]),"text-letter-spacing":new ei(se.layout_symbol["text-letter-spacing"]),"text-justify":new ei(se.layout_symbol["text-justify"]),"text-radial-offset":new ei(se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new $t(se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ei(se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ei(se.layout_symbol["text-anchor"]),"text-max-angle":new $t(se.layout_symbol["text-max-angle"]),"text-writing-mode":new $t(se.layout_symbol["text-writing-mode"]),"text-rotate":new ei(se.layout_symbol["text-rotate"]),"text-padding":new $t(se.layout_symbol["text-padding"]),"text-keep-upright":new $t(se.layout_symbol["text-keep-upright"]),"text-transform":new ei(se.layout_symbol["text-transform"]),"text-offset":new ei(se.layout_symbol["text-offset"]),"text-allow-overlap":new $t(se.layout_symbol["text-allow-overlap"]),"text-overlap":new $t(se.layout_symbol["text-overlap"]),"text-ignore-placement":new $t(se.layout_symbol["text-ignore-placement"]),"text-optional":new $t(se.layout_symbol["text-optional"])})}};class K2{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:jt,this.defaultValue=n}evaluate(n){if(n.formattedSection){let c=this.defaultValue.property.overrides;if(c&&c.hasOverride(n.formattedSection))return c.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Dt("FormatSectionOverride",K2,{omit:["defaultValue"]});class hg extends os{constructor(n){super(n,oy)}recalculate(n,c){if(super.recalculate(n,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let d=this.layout.get("text-writing-mode");if(d){let f=[];for(let b of d)f.indexOf(b)<0&&f.push(b);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,c,d,f){let b=this.layout.get(n).evaluate(c,{},d,f),y=this._unevaluatedLayout._values[n];return y.isDataDriven()||Ti(y.value)||!b?b:function(x,S){return S.replace(/{([^{}]+)}/g,(k,D)=>x&&D in x?String(x[D]):"")}(c.properties,b)}createBucket(n){return new rh(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let n of oy.paint.overridableProperties){if(!hg.hasPaintOverride(this.layout,n))continue;let c=this.paint.get(n),d=new K2(c),f=new ri(d,c.property.specification),b=null;b=c.value.kind==="constant"||c.value.kind==="source"?new Zr("source",f):new zn("composite",f,c.value.zoomStops),this.paint._values[n]=new lo(c.property,b,c.parameters)}}_handleOverridablePaintPropertyUpdate(n,c,d){return!(!this.layout||c.isDataDriven()||d.isDataDriven())&&hg.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,c){let d=n.get("text-field"),f=oy.paint.properties[c],b=!1,y=x=>{for(let S of x)if(f.overrides&&f.overrides.hasOverride(S))return void(b=!0)};if(d.value.kind==="constant"&&d.value.value instanceof ii)y(d.value.value.sections);else if(d.value.kind==="source"){let x=k=>{b||(k instanceof ui&&dr(k.value)===ro?y(k.value.sections):k instanceof pc?y(k.sections):k.eachChild(x))},S=d.value;S._styleExpression&&x(S._styleExpression.expression)}return b}}let Q2;var dD={get paint(){return Q2=Q2||new tn({"background-color":new $t(se.paint_background["background-color"]),"background-pattern":new kp(se.paint_background["background-pattern"]),"background-opacity":new $t(se.paint_background["background-opacity"])})}};class hD extends os{constructor(n){super(n,dD)}}let J2;var pD={get paint(){return J2=J2||new tn({"raster-opacity":new $t(se.paint_raster["raster-opacity"]),"raster-hue-rotate":new $t(se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new $t(se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new $t(se.paint_raster["raster-brightness-max"]),"raster-saturation":new $t(se.paint_raster["raster-saturation"]),"raster-contrast":new $t(se.paint_raster["raster-contrast"]),"raster-resampling":new $t(se.paint_raster["raster-resampling"]),"raster-fade-duration":new $t(se.paint_raster["raster-fade-duration"])})}};class fD extends os{constructor(n){super(n,pD)}}class mD extends os{constructor(n){super(n,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class gD{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let _D={once:!0},sy=63710088e-1;class Fc{constructor(n,c){if(isNaN(n)||isNaN(c))throw new Error(`Invalid LngLat object: (${n}, ${c})`);if(this.lng=+n,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Fc(kt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){let c=Math.PI/180,d=this.lat*c,f=n.lat*c,b=Math.sin(d)*Math.sin(f)+Math.cos(d)*Math.cos(f)*Math.cos((n.lng-this.lng)*c);return sy*Math.acos(Math.min(b,1))}static convert(n){if(n instanceof Fc)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Fc(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Fc(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let eC=2*Math.PI*sy;function tC(u){return eC*Math.cos(u*Math.PI/180)}function iC(u){return(180+u)/360}function rC(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function nC(u,n){return u/tC(n)}function ay(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function oC(u,n){return u*tC(ay(n))}class Qp{constructor(n,c,d=0){this.x=+n,this.y=+c,this.z=+d}static fromLngLat(n,c=0){let d=Fc.convert(n);return new Qp(iC(d.lng),rC(d.lat),nC(c,d.lat))}toLngLat(){return new Fc(360*this.x-180,ay(this.y))}toAltitude(){return oC(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/eC*(n=ay(this.y),1/Math.cos(n*Math.PI/180));var n}}function sC(u,n,c){var d=2*Math.PI*6378137/256/Math.pow(2,c);return[u*d-2*Math.PI*6378137/2,n*d-2*Math.PI*6378137/2]}class ly{constructor(n,c,d){if(!function(f,b,y){return!(f<0||f>25||y<0||y>=Math.pow(2,f)||b<0||b>=Math.pow(2,f))}(n,c,d))throw new Error(`x=${c}, y=${d}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=c,this.y=d,this.key=nh(0,n,n,c,d)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,c,d){let f=(y=this.y,x=this.z,S=sC(256*(b=this.x),256*(y=Math.pow(2,x)-y-1),x),k=sC(256*(b+1),256*(y+1),x),S[0]+","+S[1]+","+k[0]+","+k[1]);var b,y,x,S,k;let D=function(L,V,H){let Z,te="";for(let de=L;de>0;de--)Z=1<<de-1,te+=(V&Z?1:0)+(H&Z?2:0);return te}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,D).replace(/{bbox-epsg-3857}/g,f)}isChildOf(n){let c=this.z-n.z;return c>0&&n.x===this.x>>c&&n.y===this.y>>c}getTilePoint(n){let c=Math.pow(2,this.z);return new R((n.x*c-this.x)*fe,(n.y*c-this.y)*fe)}toString(){return`${this.z}/${this.x}/${this.y}`}}class aC{constructor(n,c){this.wrap=n,this.canonical=c,this.key=nh(n,c.z,c.z,c.x,c.y)}}class ws{constructor(n,c,d,f,b){if(this.terrainRttPosMatrix32f=null,n<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${d}`);this.overscaledZ=n,this.wrap=c,this.canonical=new ly(d,+f,+b),this.key=nh(c,n,d,f,b)}clone(){return new ws(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);let c=this.canonical.z-n;return n>this.canonical.z?new ws(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ws(n,this.wrap,n,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(n,c){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);let d=this.canonical.z-n;return n>this.canonical.z?nh(this.wrap*+c,n,this.canonical.z,this.canonical.x,this.canonical.y):nh(this.wrap*+c,n,n,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(n){if(n.wrap!==this.wrap)return!1;let c=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>c&&n.canonical.y===this.canonical.y>>c}children(n){if(this.overscaledZ>=n)return[new ws(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let c=this.canonical.z+1,d=2*this.canonical.x,f=2*this.canonical.y;return[new ws(c,this.wrap,c,d,f),new ws(c,this.wrap,c,d+1,f),new ws(c,this.wrap,c,d,f+1),new ws(c,this.wrap,c,d+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new ws(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new ws(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new aC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Qp(n.x-this.wrap,n.y))}}function nh(u,n,c,d,f){(u*=2)<0&&(u=-1*u-1);let b=1<<c;return(b*b*u+b*f+d).toString(36)+c.toString(36)+n.toString(36)}Dt("CanonicalTileID",ly),Dt("OverscaledTileID",ws,{omit:["terrainRttPosMatrix32f"]});class lC{constructor(n,c,d,f=1,b=1,y=1,x=0){if(this.uid=n,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Ar(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;let S=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=b,this.blueFactor=y,this.baseShift=x;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<S;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(S,k)]=this.data[this._idx(S-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,S)]=this.data[this._idx(k,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<S;k++)for(let D=0;D<S;D++){let L=this.get(k,D);L>this.max&&(this.max=L),L<this.min&&(this.min=L)}}get(n,c){let d=new Uint8Array(this.data.buffer),f=4*this._idx(n,c);return this.unpack(d[f],d[f+1],d[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,c){if(n<-1||n>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(n+1)}unpack(n,c,d){return n*this.redFactor+c*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new xs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,c,d){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=c*this.dim,b=c*this.dim+this.dim,y=d*this.dim,x=d*this.dim+this.dim;switch(c){case-1:f=b-1;break;case 1:b=f+1}switch(d){case-1:y=x-1;break;case 1:x=y+1}let S=-c*this.dim,k=-d*this.dim;for(let D=y;D<x;D++)for(let L=f;L<b;L++)this.data[this._idx(L,D)]=n.data[this._idx(L+S,D+k)]}}Dt("DEMData",lC);class cC{constructor(n){this._stringToNumber={},this._numberToString=[];for(let c=0;c<n.length;c++){let d=n[c];this._stringToNumber[d]=c,this._numberToString[c]=d}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class uC{constructor(n,c,d,f,b){this.type="Feature",this._vectorTileFeature=n,n._z=c,n._x=d,n._y=f,this.properties=n.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){let n={geometry:this.geometry};for(let c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(n[c]=this[c]);return n}}class dC{constructor(n,c){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Pc(fe,16,0),this.grid3D=new Pc(fe,16,0),this.featureIndexArray=new rt,this.promoteId=c}insert(n,c,d,f,b,y){let x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,f,b);let S=y?this.grid3D:this.grid;for(let k=0;k<c.length;k++){let D=c[k],L=[1/0,1/0,-1/0,-1/0];for(let V=0;V<D.length;V++){let H=D[V];L[0]=Math.min(L[0],H.x),L[1]=Math.min(L[1],H.y),L[2]=Math.max(L[2],H.x),L[3]=Math.max(L[3],H.y)}L[0]<fe&&L[1]<fe&&L[2]>=0&&L[3]>=0&&S.insert(x,L[0],L[1],L[2],L[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Gp.VectorTile(new Yb(this.rawTileData)).layers,this.sourceLayerCoder=new cC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,c,d,f){this.loadVTLayers();let b=n.params,y=fe/n.tileSize/n.scale,x=Tu(b.filter),S=n.queryGeometry,k=n.queryPadding*y,D=pC(S),L=this.grid.query(D.minX-k,D.minY-k,D.maxX+k,D.maxY+k),V=pC(n.cameraQueryGeometry),H=this.grid3D.query(V.minX-k,V.minY-k,V.maxX+k,V.maxY+k,(de,be,Re,we)=>function(q,ce,Ee,Ze,mt){for(let at of q)if(ce<=at.x&&Ee<=at.y&&Ze>=at.x&&mt>=at.y)return!0;let Ke=[new R(ce,Ee),new R(ce,mt),new R(Ze,mt),new R(Ze,Ee)];if(q.length>2){for(let at of Ke)if(Vu(q,at))return!0}for(let at=0;at<q.length-1;at++)if(oP(q[at],q[at+1],Ke))return!0;return!1}(n.cameraQueryGeometry,de-k,be-k,Re+k,we+k));for(let de of H)L.push(de);L.sort(bD);let Z={},te;for(let de=0;de<L.length;de++){let be=L[de];if(be===te)continue;te=be;let Re=this.featureIndexArray.get(be),we=null;this.loadMatchingFeature(Z,Re.bucketIndex,Re.sourceLayerIndex,Re.featureIndex,x,b.layers,b.availableImages,c,d,f,(q,ce,Ee)=>(we||(we=zu(q)),ce.queryIntersectsFeature({queryGeometry:S,feature:q,featureState:Ee,geometry:we,zoom:this.z,transform:n.transform,pixelsToTileUnits:y,pixelPosMatrix:n.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:n.getElevation})))}return Z}loadMatchingFeature(n,c,d,f,b,y,x,S,k,D,L){let V=this.bucketLayerIDs[c];if(y&&!V.some(de=>y.has(de)))return;let H=this.sourceLayerCoder.decode(d),Z=this.vtLayers[H].feature(f);if(b.needGeometry){let de=Bu(Z,!0);if(!b.filter(new Cr(this.tileID.overscaledZ),de,this.tileID.canonical))return}else if(!b.filter(new Cr(this.tileID.overscaledZ),Z))return;let te=this.getId(Z,H);for(let de=0;de<V.length;de++){let be=V[de];if(y&&!y.has(be))continue;let Re=S[be];if(!Re)continue;let we={};te&&D&&(we=D.getState(Re.sourceLayer||"_geojsonTileLayer",te));let q=ai({},k[be]);q.paint=hC(q.paint,Re.paint,Z,we,x),q.layout=hC(q.layout,Re.layout,Z,we,x);let ce=!L||L(Z,Re,we);if(!ce)continue;let Ee=new uC(Z,this.z,this.x,this.y,te);Ee.layer=q;let Ze=n[be];Ze===void 0&&(Ze=n[be]=[]),Ze.push({featureIndex:f,feature:Ee,intersectionZ:ce})}}lookupSymbolFeatures(n,c,d,f,b,y,x,S){let k={};this.loadVTLayers();let D=Tu(b);for(let L of n)this.loadMatchingFeature(k,d,f,L,D,y,x,S,c);return k}hasLayer(n){for(let c of this.bucketLayerIDs)for(let d of c)if(n===d)return!0;return!1}getId(n,c){var d;let f=n.id;return this.promoteId&&(f=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof f=="boolean"&&(f=Number(f)),f===void 0&&(!((d=n.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(f=Number(n.properties.cluster_id))),f}}function hC(u,n,c,d,f){return Ro(u,(b,y)=>{let x=n instanceof Yd?n.get(y):null;return x&&x.evaluate?x.evaluate(c,d,f):x})}function pC(u){let n=1/0,c=1/0,d=-1/0,f=-1/0;for(let b of u)n=Math.min(n,b.x),c=Math.min(c,b.y),d=Math.max(d,b.x),f=Math.max(f,b.y);return{minX:n,minY:c,maxX:d,maxY:f}}function bD(u,n){return n-u}function fC(u,n,c,d,f){let b=[];for(let y=0;y<u.length;y++){let x=u[y],S;for(let k=0;k<x.length-1;k++){let D=x[k],L=x[k+1];D.x<n&&L.x<n||(D.x<n?D=new R(n,D.y+(n-D.x)/(L.x-D.x)*(L.y-D.y))._round():L.x<n&&(L=new R(n,D.y+(n-D.x)/(L.x-D.x)*(L.y-D.y))._round()),D.y<c&&L.y<c||(D.y<c?D=new R(D.x+(c-D.y)/(L.y-D.y)*(L.x-D.x),c)._round():L.y<c&&(L=new R(D.x+(c-D.y)/(L.y-D.y)*(L.x-D.x),c)._round()),D.x>=d&&L.x>=d||(D.x>=d?D=new R(d,D.y+(d-D.x)/(L.x-D.x)*(L.y-D.y))._round():L.x>=d&&(L=new R(d,D.y+(d-D.x)/(L.x-D.x)*(L.y-D.y))._round()),D.y>=f&&L.y>=f||(D.y>=f?D=new R(D.x+(f-D.y)/(L.y-D.y)*(L.x-D.x),f)._round():L.y>=f&&(L=new R(D.x+(f-D.y)/(L.y-D.y)*(L.x-D.x),f)._round()),S&&D.equals(S[S.length-1])||(S=[D],b.push(S)),S.push(L)))))}}return b}Dt("FeatureIndex",dC,{omit:["rawTileData","sourceLayerCoder"]});class zc extends R{constructor(n,c,d,f){super(n,c),this.angle=d,f!==void 0&&(this.segment=f)}clone(){return new zc(this.x,this.y,this.angle,this.segment)}}function mC(u,n,c,d,f){if(n.segment===void 0||c===0)return!0;let b=n,y=n.segment+1,x=0;for(;x>-c/2;){if(y--,y<0)return!1;x-=u[y].dist(b),b=u[y]}x+=u[y].dist(u[y+1]),y++;let S=[],k=0;for(;x<c/2;){let D=u[y],L=u[y+1];if(!L)return!1;let V=u[y-1].angleTo(D)-D.angleTo(L);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:V}),k+=V;x-S[0].distance>d;)k-=S.shift().angleDelta;if(k>f)return!1;y++,x+=D.dist(L)}return!0}function gC(u){let n=0;for(let c=0;c<u.length-1;c++)n+=u[c].dist(u[c+1]);return n}function _C(u,n,c){return u?.6*n*c:0}function bC(u,n){return Math.max(u?u.right-u.left:0,n?n.right-n.left:0)}function yD(u,n,c,d,f,b){let y=_C(c,f,b),x=bC(c,d)*b,S=0,k=gC(u)/2;for(let D=0;D<u.length-1;D++){let L=u[D],V=u[D+1],H=L.dist(V);if(S+H>k){let Z=(k-S)/H,te=Jo.number(L.x,V.x,Z),de=Jo.number(L.y,V.y,Z),be=new zc(te,de,V.angleTo(L),D);return be._round(),!y||mC(u,be,x,y,n)?be:void 0}S+=H}}function vD(u,n,c,d,f,b,y,x,S){let k=_C(d,b,y),D=bC(d,f),L=D*y,V=u[0].x===0||u[0].x===S||u[0].y===0||u[0].y===S;return n-L<n/4&&(n=L+n/4),yC(u,V?n/2*x%n:(D/2+2*b)*y*x%n,n,k,c,L,V,!1,S)}function yC(u,n,c,d,f,b,y,x,S){let k=b/2,D=gC(u),L=0,V=n-c,H=[];for(let Z=0;Z<u.length-1;Z++){let te=u[Z],de=u[Z+1],be=te.dist(de),Re=de.angleTo(te);for(;V+c<L+be;){V+=c;let we=(V-L)/be,q=Jo.number(te.x,de.x,we),ce=Jo.number(te.y,de.y,we);if(q>=0&&q<S&&ce>=0&&ce<S&&V-k>=0&&V+k<=D){let Ee=new zc(q,ce,Re,Z);Ee._round(),d&&!mC(u,Ee,b,d,f)||H.push(Ee)}}L+=be}return x||H.length||y||(H=yC(u,L/2,c,d,f,b,y,!0,S)),H}Dt("Anchor",zc);let Jp=Vo;function vC(u,n,c,d){let f=[],b=u.image,y=b.pixelRatio,x=b.paddedRect.w-2*Jp,S=b.paddedRect.h-2*Jp,k={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom},D=b.stretchX||[[0,x]],L=b.stretchY||[[0,S]],V=(ut,zt)=>ut+zt[1]-zt[0],H=D.reduce(V,0),Z=L.reduce(V,0),te=x-H,de=S-Z,be=0,Re=H,we=0,q=Z,ce=0,Ee=te,Ze=0,mt=de;if(b.content&&d){let ut=b.content,zt=ut[2]-ut[0],Kt=ut[3]-ut[1];(b.textFitWidth||b.textFitHeight)&&(k=G2(u)),be=pg(D,0,ut[0]),we=pg(L,0,ut[1]),Re=pg(D,ut[0],ut[2]),q=pg(L,ut[1],ut[3]),ce=ut[0]-be,Ze=ut[1]-we,Ee=zt-Re,mt=Kt-q}let Ke=k.x1,at=k.y1,vt=k.x2-Ke,gt=k.y2-at,xt=(ut,zt,Kt,Xt)=>{let Ht=fg(ut.stretch-be,Re,vt,Ke),Vi=mg(ut.fixed-ce,Ee,ut.stretch,H),zr=fg(zt.stretch-we,q,gt,at),dn=mg(zt.fixed-Ze,mt,zt.stretch,Z),Zn=fg(Kt.stretch-be,Re,vt,Ke),Cs=mg(Kt.fixed-ce,Ee,Kt.stretch,H),Uo=fg(Xt.stretch-we,q,gt,at),Vn=mg(Xt.fixed-Ze,mt,Xt.stretch,Z),Or=new R(Ht,zr),En=new R(Zn,zr),Un=new R(Zn,Uo),jn=new R(Ht,Uo),To=new R(Vi/y,dn/y),Es=new R(Cs/y,Vn/y),Sn=n*Math.PI/180;if(Sn){let Tn=Math.sin(Sn),Mn=Math.cos(Sn),on=[Mn,-Tn,Tn,Mn];Or._matMult(on),En._matMult(on),jn._matMult(on),Un._matMult(on)}let jo=ut.stretch+ut.fixed,hn=zt.stretch+zt.fixed;return{tl:Or,tr:En,bl:jn,br:Un,tex:{x:b.paddedRect.x+Jp+jo,y:b.paddedRect.y+Jp+hn,w:Kt.stretch+Kt.fixed-jo,h:Xt.stretch+Xt.fixed-hn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:To,pixelOffsetBR:Es,minFontScaleX:Ee/y/vt,minFontScaleY:mt/y/gt,isSDF:c}};if(d&&(b.stretchX||b.stretchY)){let ut=xC(D,te,H),zt=xC(L,de,Z);for(let Kt=0;Kt<ut.length-1;Kt++){let Xt=ut[Kt],Ht=ut[Kt+1];for(let Vi=0;Vi<zt.length-1;Vi++)f.push(xt(Xt,zt[Vi],Ht,zt[Vi+1]))}}else f.push(xt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return f}function pg(u,n,c){let d=0;for(let f of u)d+=Math.max(n,Math.min(c,f[1]))-Math.max(n,Math.min(c,f[0]));return d}function xC(u,n,c){let d=[{fixed:-1,stretch:0}];for(let[f,b]of u){let y=d[d.length-1];d.push({fixed:f-y.stretch,stretch:y.stretch}),d.push({fixed:f-y.stretch,stretch:y.stretch+(b-f)})}return d.push({fixed:n+Jp,stretch:c}),d}function fg(u,n,c,d){return u/n*c+d}function mg(u,n,c,d){return u-n*c/d}class gg{constructor(n,c,d,f,b,y,x,S,k,D){var L;if(this.boxStartIndex=n.length,k){let V=y.top,H=y.bottom,Z=y.collisionPadding;Z&&(V-=Z[1],H+=Z[3]);let te=H-V;te>0&&(te=Math.max(10,te),this.circleDiameter=te)}else{let V=!((L=y.image)===null||L===void 0)&&L.content&&(y.image.textFitWidth||y.image.textFitHeight)?G2(y):{x1:y.left,y1:y.top,x2:y.right,y2:y.bottom};V.y1=V.y1*x-S[0],V.y2=V.y2*x+S[2],V.x1=V.x1*x-S[3],V.x2=V.x2*x+S[1];let H=y.collisionPadding;if(H&&(V.x1-=H[0]*x,V.y1-=H[1]*x,V.x2+=H[2]*x,V.y2+=H[3]*x),D){let Z=new R(V.x1,V.y1),te=new R(V.x2,V.y1),de=new R(V.x1,V.y2),be=new R(V.x2,V.y2),Re=D*Math.PI/180;Z._rotate(Re),te._rotate(Re),de._rotate(Re),be._rotate(Re),V.x1=Math.min(Z.x,te.x,de.x,be.x),V.x2=Math.max(Z.x,te.x,de.x,be.x),V.y1=Math.min(Z.y,te.y,de.y,be.y),V.y2=Math.max(Z.y,te.y,de.y,be.y)}n.emplaceBack(c.x,c.y,V.x1,V.y1,V.x2,V.y2,d,f,b)}this.boxEndIndex=n.length}}class xD{constructor(n=[],c=(d,f)=>d<f?-1:d>f?1:0){if(this.data=n,this.length=this.data.length,this.compare=c,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;let n=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),n}peek(){return this.data[0]}_up(n){let{data:c,compare:d}=this,f=c[n];for(;n>0;){let b=n-1>>1,y=c[b];if(d(f,y)>=0)break;c[n]=y,n=b}c[n]=f}_down(n){let{data:c,compare:d}=this,f=this.length>>1,b=c[n];for(;n<f;){let y=1+(n<<1),x=y+1;if(x<this.length&&d(c[x],c[y])<0&&(y=x),d(c[y],b)>=0)break;c[n]=c[y],n=y}c[n]=b}}function wD(u,n=1,c=!1){let d=1/0,f=1/0,b=-1/0,y=-1/0,x=u[0];for(let H=0;H<x.length;H++){let Z=x[H];(!H||Z.x<d)&&(d=Z.x),(!H||Z.y<f)&&(f=Z.y),(!H||Z.x>b)&&(b=Z.x),(!H||Z.y>y)&&(y=Z.y)}let S=Math.min(b-d,y-f),k=S/2,D=new xD([],CD);if(S===0)return new R(d,f);for(let H=d;H<b;H+=S)for(let Z=f;Z<y;Z+=S)D.push(new oh(H+k,Z+k,k,u));let L=function(H){let Z=0,te=0,de=0,be=H[0];for(let Re=0,we=be.length,q=we-1;Re<we;q=Re++){let ce=be[Re],Ee=be[q],Ze=ce.x*Ee.y-Ee.x*ce.y;te+=(ce.x+Ee.x)*Ze,de+=(ce.y+Ee.y)*Ze,Z+=3*Ze}return new oh(te/Z,de/Z,0,H)}(u),V=D.length;for(;D.length;){let H=D.pop();(H.d>L.d||!L.d)&&(L=H,c&&console.log("found best %d after %d probes",Math.round(1e4*H.d)/1e4,V)),H.max-L.d<=n||(k=H.h/2,D.push(new oh(H.p.x-k,H.p.y-k,k,u)),D.push(new oh(H.p.x+k,H.p.y-k,k,u)),D.push(new oh(H.p.x-k,H.p.y+k,k,u)),D.push(new oh(H.p.x+k,H.p.y+k,k,u)),V+=4)}return c&&(console.log(`num probes: ${V}`),console.log(`best distance: ${L.d}`)),L.p}function CD(u,n){return n.max-u.max}function oh(u,n,c,d){this.p=new R(u,n),this.h=c,this.d=function(f,b){let y=!1,x=1/0;for(let S=0;S<b.length;S++){let k=b[S];for(let D=0,L=k.length,V=L-1;D<L;V=D++){let H=k[D],Z=k[V];H.y>f.y!=Z.y>f.y&&f.x<(Z.x-H.x)*(f.y-H.y)/(Z.y-H.y)+H.x&&(y=!y),x=Math.min(x,t2(f,H,Z))}}return(y?1:-1)*Math.sqrt(x)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Wn;a.aB=void 0,(Wn=a.aB||(a.aB={}))[Wn.center=1]="center",Wn[Wn.left=2]="left",Wn[Wn.right=3]="right",Wn[Wn.top=4]="top",Wn[Wn.bottom=5]="bottom",Wn[Wn["top-left"]=6]="top-left",Wn[Wn["top-right"]=7]="top-right",Wn[Wn["bottom-left"]=8]="bottom-left",Wn[Wn["bottom-right"]=9]="bottom-right";let Bc=7,cy=Number.POSITIVE_INFINITY;function wC(u,n){return n[1]!==cy?function(c,d,f){let b=0,y=0;switch(d=Math.abs(d),f=Math.abs(f),c){case"top-right":case"top-left":case"top":y=f-Bc;break;case"bottom-right":case"bottom-left":case"bottom":y=-f+Bc}switch(c){case"top-right":case"bottom-right":case"right":b=-d;break;case"top-left":case"bottom-left":case"left":b=d}return[b,y]}(u,n[0],n[1]):function(c,d){let f=0,b=0;d<0&&(d=0);let y=d/Math.SQRT2;switch(c){case"top-right":case"top-left":b=y-Bc;break;case"bottom-right":case"bottom-left":b=-y+Bc;break;case"bottom":b=-d+Bc;break;case"top":b=d-Bc}switch(c){case"top-right":case"bottom-right":f=-y;break;case"top-left":case"bottom-left":f=y;break;case"left":f=d;break;case"right":f=-d}return[f,b]}(u,n[0])}function CC(u,n,c){var d;let f=u.layout,b=(d=f.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(n,{},c);if(b){let x=b.values,S=[];for(let k=0;k<x.length;k+=2){let D=S[k]=x[k],L=x[k+1].map(V=>V*un);D.startsWith("top")?L[1]-=Bc:D.startsWith("bottom")&&(L[1]+=Bc),S[k+1]=L}return new Zt(S)}let y=f.get("text-variable-anchor");if(y){let x;x=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(n,{},c)*un,cy]:f.get("text-offset").evaluate(n,{},c).map(k=>k*un);let S=[];for(let k of y)S.push(k,wC(k,x));return new Zt(S)}return null}function uy(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ED(u,n,c,d,f,b,y,x,S,k,D,L){let V=b.textMaxSize.evaluate(n,{});V===void 0&&(V=y);let H=u.layers[0].layout,Z=H.get("icon-offset").evaluate(n,{},D),te=SC(c.horizontal),de=y/24,be=u.tilePixelRatio*de,Re=u.tilePixelRatio*V/24,we=u.tilePixelRatio*x,q=u.tilePixelRatio*H.get("symbol-spacing"),ce=H.get("text-padding")*u.tilePixelRatio,Ee=function(Kt,Xt,Ht,Vi=1){let zr=Kt.get("icon-padding").evaluate(Xt,{},Ht),dn=zr&&zr.values;return[dn[0]*Vi,dn[1]*Vi,dn[2]*Vi,dn[3]*Vi]}(H,n,D,u.tilePixelRatio),Ze=H.get("text-max-angle")/180*Math.PI,mt=H.get("text-rotation-alignment")!=="viewport"&&H.get("symbol-placement")!=="point",Ke=H.get("icon-rotation-alignment")==="map"&&H.get("symbol-placement")!=="point",at=H.get("symbol-placement"),vt=q/2,gt=H.get("icon-text-fit"),xt;d&&gt!=="none"&&(u.allowVerticalPlacement&&c.vertical&&(xt=W2(d,c.vertical,gt,H.get("icon-text-fit-padding"),Z,de)),te&&(d=W2(d,te,gt,H.get("icon-text-fit-padding"),Z,de)));let ut=D?L.line.getGranularityForZoomLevel(D.z):1,zt=(Kt,Xt)=>{Xt.x<0||Xt.x>=fe||Xt.y<0||Xt.y>=fe||function(Ht,Vi,zr,dn,Zn,Cs,Uo,Vn,Or,En,Un,jn,To,Es,Sn,jo,hn,Tn,Mn,on,Sr,Na,sh,Fa,MD){let ah=Ht.addToLineVertexArray(Vi,zr),qu,lh,ch,uh,AC=0,kC=0,PC=0,DC=0,by=-1,yy=-1,ql={},RC=Oa("");if(Ht.allowVerticalPlacement&&dn.vertical){let uo=Vn.layout.get("text-rotate").evaluate(Sr,{},Fa)+90;ch=new gg(Or,Vi,En,Un,jn,dn.vertical,To,Es,Sn,uo),Uo&&(uh=new gg(Or,Vi,En,Un,jn,Uo,hn,Tn,Sn,uo))}if(Zn){let uo=Vn.layout.get("icon-rotate").evaluate(Sr,{}),Ss=Vn.layout.get("icon-text-fit")!=="none",Hu=vC(Zn,uo,sh,Ss),Ba=Uo?vC(Uo,uo,sh,Ss):void 0;lh=new gg(Or,Vi,En,Un,jn,Zn,hn,Tn,!1,uo),AC=4*Hu.length;let $u=Ht.iconSizeData,ml=null;$u.kind==="source"?(ml=[fl*Vn.layout.get("icon-size").evaluate(Sr,{})],ml[0]>Nc&&Ar(`${Ht.layerIds[0]}: Value for "icon-size" is >= ${Kp}. Reduce your "icon-size".`)):$u.kind==="composite"&&(ml=[fl*Na.compositeIconSizes[0].evaluate(Sr,{},Fa),fl*Na.compositeIconSizes[1].evaluate(Sr,{},Fa)],(ml[0]>Nc||ml[1]>Nc)&&Ar(`${Ht.layerIds[0]}: Value for "icon-size" is >= ${Kp}. Reduce your "icon-size".`)),Ht.addSymbols(Ht.icon,Hu,ml,on,Mn,Sr,a.al.none,Vi,ah.lineStartIndex,ah.lineLength,-1,Fa),by=Ht.icon.placedSymbolArray.length-1,Ba&&(kC=4*Ba.length,Ht.addSymbols(Ht.icon,Ba,ml,on,Mn,Sr,a.al.vertical,Vi,ah.lineStartIndex,ah.lineLength,-1,Fa),yy=Ht.icon.placedSymbolArray.length-1)}let OC=Object.keys(dn.horizontal);for(let uo of OC){let Ss=dn.horizontal[uo];if(!qu){RC=Oa(Ss.text);let Ba=Vn.layout.get("text-rotate").evaluate(Sr,{},Fa);qu=new gg(Or,Vi,En,Un,jn,Ss,To,Es,Sn,Ba)}let Hu=Ss.positionedLines.length===1;if(PC+=EC(Ht,Vi,Ss,Cs,Vn,Sn,Sr,jo,ah,dn.vertical?a.al.horizontal:a.al.horizontalOnly,Hu?OC:[uo],ql,by,Na,Fa),Hu)break}dn.vertical&&(DC+=EC(Ht,Vi,dn.vertical,Cs,Vn,Sn,Sr,jo,ah,a.al.vertical,["vertical"],ql,yy,Na,Fa));let ID=qu?qu.boxStartIndex:Ht.collisionBoxArray.length,AD=qu?qu.boxEndIndex:Ht.collisionBoxArray.length,kD=ch?ch.boxStartIndex:Ht.collisionBoxArray.length,PD=ch?ch.boxEndIndex:Ht.collisionBoxArray.length,DD=lh?lh.boxStartIndex:Ht.collisionBoxArray.length,RD=lh?lh.boxEndIndex:Ht.collisionBoxArray.length,OD=uh?uh.boxStartIndex:Ht.collisionBoxArray.length,LD=uh?uh.boxEndIndex:Ht.collisionBoxArray.length,za=-1,bg=(uo,Ss)=>uo&&uo.circleDiameter?Math.max(uo.circleDiameter,Ss):Ss;za=bg(qu,za),za=bg(ch,za),za=bg(lh,za),za=bg(uh,za);let LC=za>-1?1:0;LC&&(za*=MD/un),Ht.glyphOffsetArray.length>=rh.MAX_GLYPHS&&Ar("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Sr.sortKey!==void 0&&Ht.addToSortKeyRanges(Ht.symbolInstances.length,Sr.sortKey);let ND=CC(Vn,Sr,Fa),[FD,zD]=function(uo,Ss){let Hu=uo.length,Ba=Ss?.values;if(Ba?.length>0)for(let $u=0;$u<Ba.length;$u+=2){let ml=Ba[$u+1];uo.emplaceBack(a.aB[Ba[$u]],ml[0],ml[1])}return[Hu,uo.length]}(Ht.textAnchorOffsets,ND);Ht.symbolInstances.emplaceBack(Vi.x,Vi.y,ql.right>=0?ql.right:-1,ql.center>=0?ql.center:-1,ql.left>=0?ql.left:-1,ql.vertical||-1,by,yy,RC,ID,AD,kD,PD,DD,RD,OD,LD,En,PC,DC,AC,kC,LC,0,To,za,FD,zD)}(u,Xt,Kt,c,d,f,xt,u.layers[0],u.collisionBoxArray,n.index,n.sourceLayerIndex,u.index,be,[ce,ce,ce,ce],mt,S,we,Ee,Ke,Z,n,b,k,D,y)};if(at==="line")for(let Kt of fC(n.geometry,0,0,fe,fe)){let Xt=ju(Kt,ut),Ht=vD(Xt,q,Ze,c.vertical||te,d,24,Re,u.overscaling,fe);for(let Vi of Ht)te&&SD(u,te.text,vt,Vi)||zt(Xt,Vi)}else if(at==="line-center"){for(let Kt of n.geometry)if(Kt.length>1){let Xt=ju(Kt,ut),Ht=yD(Xt,Ze,c.vertical||te,d,24,Re);Ht&&zt(Xt,Ht)}}else if(n.type==="Polygon")for(let Kt of mc(n.geometry,0)){let Xt=wD(Kt,16);zt(ju(Kt[0],ut,!0),new zc(Xt.x,Xt.y,0))}else if(n.type==="LineString")for(let Kt of n.geometry){let Xt=ju(Kt,ut);zt(Xt,new zc(Xt[0].x,Xt[0].y,0))}else if(n.type==="Point")for(let Kt of n.geometry)for(let Xt of Kt)zt([Xt],new zc(Xt.x,Xt.y,0))}function EC(u,n,c,d,f,b,y,x,S,k,D,L,V,H,Z){let te=function(Re,we,q,ce,Ee,Ze,mt,Ke){let at=ce.layout.get("text-rotate").evaluate(Ze,{})*Math.PI/180,vt=[];for(let gt of we.positionedLines)for(let xt of gt.positionedGlyphs){if(!xt.rect)continue;let ut=xt.rect||{},zt=QP+1,Kt=!0,Xt=1,Ht=0,Vi=(Ee||Ke)&&xt.vertical,zr=xt.metrics.advance*xt.scale/2;if(Ke&&we.verticalizable&&(Ht=gt.lineOffset/2-(xt.imageName?-(un-xt.metrics.width*xt.scale)/2:(xt.scale-1)*un)),xt.imageName){let Tn=mt[xt.imageName];Kt=Tn.sdf,Xt=Tn.pixelRatio,zt=Vo/Xt}let dn=Ee?[xt.x+zr,xt.y]:[0,0],Zn=Ee?[0,0]:[xt.x+zr+q[0],xt.y+q[1]-Ht],Cs=[0,0];Vi&&(Cs=Zn,Zn=[0,0]);let Uo=xt.metrics.isDoubleResolution?2:1,Vn=(xt.metrics.left-zt)*xt.scale-zr+Zn[0],Or=(-xt.metrics.top-zt)*xt.scale+Zn[1],En=Vn+ut.w/Uo*xt.scale/Xt,Un=Or+ut.h/Uo*xt.scale/Xt,jn=new R(Vn,Or),To=new R(En,Or),Es=new R(Vn,Un),Sn=new R(En,Un);if(Vi){let Tn=new R(-zr,zr-lg),Mn=-Math.PI/2,on=un/2-zr,Sr=new R(5-lg-on,-(xt.imageName?on:0)),Na=new R(...Cs);jn._rotateAround(Mn,Tn)._add(Sr)._add(Na),To._rotateAround(Mn,Tn)._add(Sr)._add(Na),Es._rotateAround(Mn,Tn)._add(Sr)._add(Na),Sn._rotateAround(Mn,Tn)._add(Sr)._add(Na)}if(at){let Tn=Math.sin(at),Mn=Math.cos(at),on=[Mn,-Tn,Tn,Mn];jn._matMult(on),To._matMult(on),Es._matMult(on),Sn._matMult(on)}let jo=new R(0,0),hn=new R(0,0);vt.push({tl:jn,tr:To,bl:Es,br:Sn,tex:ut,writingMode:we.writingMode,glyphOffset:dn,sectionIndex:xt.sectionIndex,isSDF:Kt,pixelOffsetTL:jo,pixelOffsetBR:hn,minFontScaleX:0,minFontScaleY:0})}return vt}(0,c,x,f,b,y,d,u.allowVerticalPlacement),de=u.textSizeData,be=null;de.kind==="source"?(be=[fl*f.layout.get("text-size").evaluate(y,{})],be[0]>Nc&&Ar(`${u.layerIds[0]}: Value for "text-size" is >= ${Kp}. Reduce your "text-size".`)):de.kind==="composite"&&(be=[fl*H.compositeTextSizes[0].evaluate(y,{},Z),fl*H.compositeTextSizes[1].evaluate(y,{},Z)],(be[0]>Nc||be[1]>Nc)&&Ar(`${u.layerIds[0]}: Value for "text-size" is >= ${Kp}. Reduce your "text-size".`)),u.addSymbols(u.text,te,be,x,b,y,k,n,S.lineStartIndex,S.lineLength,V,Z);for(let Re of D)L[Re]=u.text.placedSymbolArray.length-1;return 4*te.length}function SC(u){for(let n in u)return u[n];return null}function SD(u,n,c,d){let f=u.compareText;if(n in f){let b=f[n];for(let y=b.length-1;y>=0;y--)if(d.dist(b[y])<c)return!0}else f[n]=[];return f[n].push(d),!1}let TC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class dy{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[c,d]=new Uint8Array(n,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");let f=d>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);let b=TC[15&d];if(!b)throw new Error("Unrecognized array type.");let[y]=new Uint16Array(n,2,1),[x]=new Uint32Array(n,4,1);return new dy(x,y,b,n)}constructor(n,c=64,d=Float64Array,f){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=d,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;let b=TC.indexOf(this.ArrayType),y=2*n*this.ArrayType.BYTES_PER_ELEMENT,x=n*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-x%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${d}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+x+S,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+y+x+S),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+x+S,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=n)}add(n,c){let d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=n,this.coords[this._pos++]=c,d}finish(){let n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return hy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,c,d,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:b,coords:y,nodeSize:x}=this,S=[0,b.length-1,0],k=[];for(;S.length;){let D=S.pop()||0,L=S.pop()||0,V=S.pop()||0;if(L-V<=x){for(let de=V;de<=L;de++){let be=y[2*de],Re=y[2*de+1];be>=n&&be<=d&&Re>=c&&Re<=f&&k.push(b[de])}continue}let H=V+L>>1,Z=y[2*H],te=y[2*H+1];Z>=n&&Z<=d&&te>=c&&te<=f&&k.push(b[H]),(D===0?n<=Z:c<=te)&&(S.push(V),S.push(H-1),S.push(1-D)),(D===0?d>=Z:f>=te)&&(S.push(H+1),S.push(L),S.push(1-D))}return k}within(n,c,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:f,coords:b,nodeSize:y}=this,x=[0,f.length-1,0],S=[],k=d*d;for(;x.length;){let D=x.pop()||0,L=x.pop()||0,V=x.pop()||0;if(L-V<=y){for(let de=V;de<=L;de++)IC(b[2*de],b[2*de+1],n,c)<=k&&S.push(f[de]);continue}let H=V+L>>1,Z=b[2*H],te=b[2*H+1];IC(Z,te,n,c)<=k&&S.push(f[H]),(D===0?n-d<=Z:c-d<=te)&&(x.push(V),x.push(H-1),x.push(1-D)),(D===0?n+d>=Z:c+d>=te)&&(x.push(H+1),x.push(L),x.push(1-D))}return S}}function hy(u,n,c,d,f,b){if(f-d<=c)return;let y=d+f>>1;MC(u,n,y,d,f,b),hy(u,n,c,d,y-1,1-b),hy(u,n,c,y+1,f,1-b)}function MC(u,n,c,d,f,b){for(;f>d;){if(f-d>600){let k=f-d+1,D=c-d+1,L=Math.log(k),V=.5*Math.exp(2*L/3),H=.5*Math.sqrt(L*V*(k-V)/k)*(D-k/2<0?-1:1);MC(u,n,c,Math.max(d,Math.floor(c-D*V/k+H)),Math.min(f,Math.floor(c+(k-D)*V/k+H)),b)}let y=n[2*c+b],x=d,S=f;for(ef(u,n,d,c),n[2*f+b]>y&&ef(u,n,d,f);x<S;){for(ef(u,n,x,S),x++,S--;n[2*x+b]<y;)x++;for(;n[2*S+b]>y;)S--}n[2*d+b]===y?ef(u,n,d,S):(S++,ef(u,n,S,f)),S<=c&&(d=S+1),c<=S&&(f=S-1)}}function ef(u,n,c,d){py(u,c,d),py(n,2*c,2*d),py(n,2*c+1,2*d+1)}function py(u,n,c){let d=u[n];u[n]=u[c],u[c]=d}function IC(u,n,c,d){let f=u-c,b=n-d;return f*f+b*b}var fy;a.co=void 0,(fy=a.co||(a.co={})).create="create",fy.load="load",fy.fullLoad="fullLoad";let _g=null,tf=[],my=1e3/60,gy="loadTime",_y="fullLoadTime",TD={mark(u){performance.mark(u)},frame(u){let n=u;_g!=null&&tf.push(n-_g),_g=n},clearMetrics(){_g=null,tf=[],performance.clearMeasures(gy),performance.clearMeasures(_y);for(let u in a.co)performance.clearMarks(a.co[u])},getPerformanceMetrics(){performance.measure(gy,a.co.create,a.co.load),performance.measure(_y,a.co.create,a.co.fullLoad);let u=performance.getEntriesByName(gy)[0].duration,n=performance.getEntriesByName(_y)[0].duration,c=tf.length,d=1/(tf.reduce((b,y)=>b+y,0)/c/1e3),f=tf.filter(b=>b>my).reduce((b,y)=>b+(y-my)/my,0);return{loadTime:u,fullLoadTime:n,fps:d,percentDroppedFrames:f/(c+f)*100,totalFrames:c}}};a.$=Qp,a.A=ue,a.B=Jo,a.C=Cr,a.D=$t,a.E=ye,a.F=Cb,a.G=function(u){if(Vs==null){let n=u.navigator?u.navigator.userAgent:null;Vs=!!u.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Vs},a.H=class{constructor(u,n){this.target=u,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new gD(()=>this.process()),this.subscription=ps(this.target,"message",c=>this.receive(c),!1),this.globalScope=Jn(self)?u:window}registerMessageHandler(u,n){this.messageHandlers[u]=n}sendAsync(u,n){return new Promise((c,d)=>{let f=Math.round(1e18*Math.random()).toString(36).substring(0,10),b=n?ps(n.signal,"abort",()=>{b?.unsubscribe(),delete this.resolveRejects[f];let S={id:f,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},_D):null;this.resolveRejects[f]={resolve:S=>{b?.unsubscribe(),c(S)},reject:S=>{b?.unsubscribe(),d(S)}};let y=[],x=Object.assign(Object.assign({},u),{id:f,sourceMapId:this.mapId,origin:location.origin,data:Dc(u.data,y)});this.target.postMessage(x,{transfer:y})})}receive(u){let n=u.data,c=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[c];let d=this.abortControllers[c];return delete this.abortControllers[c],void(d&&d.abort())}if(Jn(self)||n.mustQueue)return this.tasks[c]=n,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,n)}}process(){if(this.taskQueue.length===0)return;let u=this.taskQueue.shift(),n=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(u,n)}processTask(u,n){return s(this,void 0,void 0,function*(){if(n.type==="<response>"){let f=this.resolveRejects[u];return delete this.resolveRejects[u],f?void(n.error?f.reject(ku(n.error)):f.resolve(ku(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let c=ku(n.data),d=new AbortController;this.abortControllers[u]=d;try{let f=yield this.messageHandlers[n.type](n.sourceMapId,c,d);this.completeTask(u,null,f)}catch(f){this.completeTask(u,f)}})}completeTask(u,n,c){let d=[];delete this.abortControllers[u];let f={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Dc(n):null,data:Dc(c,d)};this.target.postMessage(f,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.I=Qb,a.J=Qa,a.K=function(){var u=new ue(16);return ue!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},a.L=function(u,n,c){var d,f,b,y,x,S,k,D,L,V,H,Z,te=c[0],de=c[1],be=c[2];return n===u?(u[12]=n[0]*te+n[4]*de+n[8]*be+n[12],u[13]=n[1]*te+n[5]*de+n[9]*be+n[13],u[14]=n[2]*te+n[6]*de+n[10]*be+n[14],u[15]=n[3]*te+n[7]*de+n[11]*be+n[15]):(f=n[1],b=n[2],y=n[3],x=n[4],S=n[5],k=n[6],D=n[7],L=n[8],V=n[9],H=n[10],Z=n[11],u[0]=d=n[0],u[1]=f,u[2]=b,u[3]=y,u[4]=x,u[5]=S,u[6]=k,u[7]=D,u[8]=L,u[9]=V,u[10]=H,u[11]=Z,u[12]=d*te+x*de+L*be+n[12],u[13]=f*te+S*de+V*be+n[13],u[14]=b*te+k*de+H*be+n[14],u[15]=y*te+D*de+Z*be+n[15]),u},a.M=function(u,n,c){var d=c[0],f=c[1],b=c[2];return u[0]=n[0]*d,u[1]=n[1]*d,u[2]=n[2]*d,u[3]=n[3]*d,u[4]=n[4]*f,u[5]=n[5]*f,u[6]=n[6]*f,u[7]=n[7]*f,u[8]=n[8]*b,u[9]=n[9]*b,u[10]=n[10]*b,u[11]=n[11]*b,u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15],u},a.N=function(u,n,c){var d=n[0],f=n[1],b=n[2],y=n[3],x=n[4],S=n[5],k=n[6],D=n[7],L=n[8],V=n[9],H=n[10],Z=n[11],te=n[12],de=n[13],be=n[14],Re=n[15],we=c[0],q=c[1],ce=c[2],Ee=c[3];return u[0]=we*d+q*x+ce*L+Ee*te,u[1]=we*f+q*S+ce*V+Ee*de,u[2]=we*b+q*k+ce*H+Ee*be,u[3]=we*y+q*D+ce*Z+Ee*Re,u[4]=(we=c[4])*d+(q=c[5])*x+(ce=c[6])*L+(Ee=c[7])*te,u[5]=we*f+q*S+ce*V+Ee*de,u[6]=we*b+q*k+ce*H+Ee*be,u[7]=we*y+q*D+ce*Z+Ee*Re,u[8]=(we=c[8])*d+(q=c[9])*x+(ce=c[10])*L+(Ee=c[11])*te,u[9]=we*f+q*S+ce*V+Ee*de,u[10]=we*b+q*k+ce*H+Ee*be,u[11]=we*y+q*D+ce*Z+Ee*Re,u[12]=(we=c[12])*d+(q=c[13])*x+(ce=c[14])*L+(Ee=c[15])*te,u[13]=we*f+q*S+ce*V+Ee*de,u[14]=we*b+q*k+ce*H+Ee*be,u[15]=we*y+q*D+ce*Z+Ee*Re,u},a.O=function(u,n){let c={};for(let d=0;d<n.length;d++){let f=n[d];f in u&&(c[f]=u[f])}return c},a.P=R,a.Q=Fc,a.R=xs,a.S=rC,a.T=Xm,a.U=iC,a.V=le,a.W=ne,a.X=Ya,a.Y=ws,a.Z=fe,a._=s,a.a=Yo,a.a$=function(u,n,c){var d=Math.sin(c),f=Math.cos(c),b=n[4],y=n[5],x=n[6],S=n[7],k=n[8],D=n[9],L=n[10],V=n[11];return n!==u&&(u[0]=n[0],u[1]=n[1],u[2]=n[2],u[3]=n[3],u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15]),u[4]=b*f+k*d,u[5]=y*f+D*d,u[6]=x*f+L*d,u[7]=S*f+V*d,u[8]=k*f-b*d,u[9]=D*f-y*d,u[10]=L*f-x*d,u[11]=V*f-S*d,u},a.a0=25,a.a1=ly,a.a2=u=>{let n=window.document.createElement("video");return n.muted=!0,new Promise(c=>{n.onloadstart=()=>{c(n)};for(let d of u){let f=window.document.createElement("source");qe(d)||(n.crossOrigin="Anonymous"),f.src=d,n.appendChild(f)}})},a.a3=$e,a.a4=function(){return Ur++},a.a5=_e,a.a6=rh,a.a7=Tu,a.a8=Bu,a.a9=uC,a.aA=function(u,n,c,d,f=!1){if(!c[0]&&!c[1])return[0,0];let b=f?d==="map"?-u.bearingInRadians:0:d==="viewport"?u.bearingInRadians:0;if(b){let y=Math.sin(b),x=Math.cos(b);c=[c[0]*x-c[1]*y,c[0]*y+c[1]*x]}return[f?c[0]:Ue(n,c[0],u.zoom),f?c[1]:Ue(n,c[1],u.zoom)]},a.aC=ty,a.aD=uy,a.aE=ey,a.aF=dy,a.aG=kr,a.aH=og,a.aI=st,a.aJ=Ji,a.aK=Qi,a.aL=kt,a.aM=Rn,a.aN=oC,a.aO=function(u,n,c){return u[0]=n[0]*c,u[1]=n[1]*c,u[2]=n[2]*c,u},a.aP=function(u,n,c){return u[0]=n[0]+c[0],u[1]=n[1]+c[1],u[2]=n[2]+c[2],u},a.aQ=function(u){var n=new ue(3);return n[0]=u[0],n[1]=u[1],n[2]=u[2],n},a.aR=function(u,n,c){return u[0]=n[0]*c[0],u[1]=n[1]*c[1],u[2]=n[2]*c[2],u[3]=n[3]*c[3],u},a.aS=function(u,n,c){return u[0]=n[0]-c[0],u[1]=n[1]-c[1],u[2]=n[2]-c[2],u},a.aT=function(u,n){var c=n[0],d=n[1],f=n[2],b=c*c+d*d+f*f;return b>0&&(b=1/Math.sqrt(b)),u[0]=n[0]*b,u[1]=n[1]*b,u[2]=n[2]*b,u},a.aU=function(u,n,c){var d=n[0],f=n[1],b=n[2],y=c[0],x=c[1],S=c[2];return u[0]=f*S-b*x,u[1]=b*y-d*S,u[2]=d*x-f*y,u},a.aV=function(u,n){return u[0]*n[0]+u[1]*n[1]+u[2]*n[2]},a.aW=aC,a.aX=nh,a.aY=function(u,n,c,d,f){var b,y=1/Math.tan(n/2);return u[0]=y/c,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=y,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,f!=null&&f!==1/0?(u[10]=(f+d)*(b=1/(d-f)),u[14]=2*f*d*b):(u[10]=-1,u[14]=-2*d),u},a.aZ=function(u){var n=new ue(16);return n[0]=u[0],n[1]=u[1],n[2]=u[2],n[3]=u[3],n[4]=u[4],n[5]=u[5],n[6]=u[6],n[7]=u[7],n[8]=u[8],n[9]=u[9],n[10]=u[10],n[11]=u[11],n[12]=u[12],n[13]=u[13],n[14]=u[14],n[15]=u[15],n},a.a_=function(u,n,c){var d=Math.sin(c),f=Math.cos(c),b=n[0],y=n[1],x=n[2],S=n[3],k=n[4],D=n[5],L=n[6],V=n[7];return n!==u&&(u[8]=n[8],u[9]=n[9],u[10]=n[10],u[11]=n[11],u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15]),u[0]=b*f+k*d,u[1]=y*f+D*d,u[2]=x*f+L*d,u[3]=S*f+V*d,u[4]=k*f-b*d,u[5]=D*f-y*d,u[6]=L*f-x*d,u[7]=V*f-S*d,u},a.aa=function(u){let n={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,d,f,b)=>{let y=f||b;return n[d]=!y||y.toLowerCase(),""}),n["max-age"]){let c=parseInt(n["max-age"],10);isNaN(c)?delete n["max-age"]:n["max-age"]=c}return n},a.ab=ya,a.ac=function(u){return Math.pow(2,u)},a.ad=Ve,a.ae=Le,a.af=85.051129,a.ag=nC,a.ah=function(u){return Math.log(u)/Math.LN2},a.ai=function(u){var n=u[0],c=u[1];return n*n+c*c},a.aj=function(u,n){let c=[];for(let d in u)d in n||c.push(d);return c},a.ak=function(u,n){let c=0,d=0;if(u.kind==="constant")d=u.layoutSize;else if(u.kind!=="source"){let{interpolationType:f,minZoom:b,maxZoom:y}=u,x=f?Le(wn.interpolationFactor(f,n,b,y),0,1):0;u.kind==="camera"?d=Jo.number(u.minSize,u.maxSize,x):c=x}return{uSizeT:c,uSize:d}},a.am=function(u,{uSize:n,uSizeT:c},{lowerSize:d,upperSize:f}){return u.kind==="source"?d/fl:u.kind==="composite"?Jo.number(d/fl,f/fl,c):n},a.an=function(u,n){var c=n[0],d=n[1],f=n[2],b=n[3],y=n[4],x=n[5],S=n[6],k=n[7],D=n[8],L=n[9],V=n[10],H=n[11],Z=n[12],te=n[13],de=n[14],be=n[15],Re=c*x-d*y,we=c*S-f*y,q=c*k-b*y,ce=d*S-f*x,Ee=d*k-b*x,Ze=f*k-b*S,mt=D*te-L*Z,Ke=D*de-V*Z,at=D*be-H*Z,vt=L*de-V*te,gt=L*be-H*te,xt=V*be-H*de,ut=Re*xt-we*gt+q*vt+ce*at-Ee*Ke+Ze*mt;return ut?(u[0]=(x*xt-S*gt+k*vt)*(ut=1/ut),u[1]=(f*gt-d*xt-b*vt)*ut,u[2]=(te*Ze-de*Ee+be*ce)*ut,u[3]=(V*Ee-L*Ze-H*ce)*ut,u[4]=(S*at-y*xt-k*Ke)*ut,u[5]=(c*xt-f*at+b*Ke)*ut,u[6]=(de*q-Z*Ze-be*we)*ut,u[7]=(D*Ze-V*q+H*we)*ut,u[8]=(y*gt-x*at+k*mt)*ut,u[9]=(d*at-c*gt-b*mt)*ut,u[10]=(Z*Ee-te*q+be*Re)*ut,u[11]=(L*q-D*Ee-H*Re)*ut,u[12]=(x*Ke-y*vt-S*mt)*ut,u[13]=(c*vt-d*Ke+f*mt)*ut,u[14]=(te*we-Z*ce-de*Re)*ut,u[15]=(D*ce-L*we+V*Re)*ut,u):null},a.ao=ee,a.ap=function(u){return Math.hypot(u[0],u[1])},a.aq=function(u){return u[0]=0,u[1]=0,u},a.ar=function(u,n,c){return u[0]=n[0]*c,u[1]=n[1]*c,u},a.as=iy,a.at=bt,a.au=function(u,n,c,d){let f=n.y-u.y,b=n.x-u.x,y=d.y-c.y,x=d.x-c.x,S=y*b-x*f;if(S===0)return null;let k=(x*(u.y-c.y)-y*(u.x-c.x))/S;return new R(u.x+k*b,u.y+k*f)},a.av=fC,a.aw=Jw,a.ax=function(u){let n=1/0,c=1/0,d=-1/0,f=-1/0;for(let b of u)n=Math.min(n,b.x),c=Math.min(c,b.y),d=Math.max(d,b.x),f=Math.max(f,b.y);return[n,c,d,f]},a.ay=un,a.az=Ue,a.b=eo,a.b$=class extends J{},a.b0=function(){let u=new Float32Array(16);return Ve(u),u},a.b1=function(){let u=new Float64Array(16);return Ve(u),u},a.b2=function(){return new Float64Array(16)},a.b3=function(u,n,c){let d=new Float64Array(4);return function(f,b,y,x){var S=.5*Math.PI/180;b*=S,y*=S,x*=S;var k=Math.sin(b),D=Math.cos(b),L=Math.sin(y),V=Math.cos(y),H=Math.sin(x),Z=Math.cos(x);f[0]=k*V*Z-D*L*H,f[1]=D*L*Z+k*V*H,f[2]=D*V*H-k*L*Z,f[3]=D*V*Z+k*L*H}(d,u,n-90,c),d},a.b4=function(u,n,c,d){var f,b,y,x,S,k=n[0],D=n[1],L=n[2],V=n[3],H=c[0],Z=c[1],te=c[2],de=c[3];return(b=k*H+D*Z+L*te+V*de)<0&&(b=-b,H=-H,Z=-Z,te=-te,de=-de),1-b>re?(f=Math.acos(b),y=Math.sin(f),x=Math.sin((1-d)*f)/y,S=Math.sin(d*f)/y):(x=1-d,S=d),u[0]=x*k+S*H,u[1]=x*D+S*Z,u[2]=x*L+S*te,u[3]=x*V+S*de,u},a.b5=function(u){let n=new Float64Array(9);var c,d,f,b,y,x,S,k,D,L,V,H,Z,te,de,be,Re,we;L=(f=(d=u)[0])*(S=f+f),V=(b=d[1])*S,Z=(y=d[2])*S,te=y*(k=b+b),be=(x=d[3])*S,Re=x*k,we=x*(D=y+y),(c=n)[0]=1-(H=b*k)-(de=y*D),c[3]=V-we,c[6]=Z+Re,c[1]=V+we,c[4]=1-L-de,c[7]=te-be,c[2]=Z-Re,c[5]=te+be,c[8]=1-L-H;let q=Rn(-Math.asin(Le(n[2],-1,1))),ce,Ee;return Math.hypot(n[5],n[8])<.001?(ce=0,Ee=-Rn(Math.atan2(n[3],n[4]))):(ce=Rn(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),Ee=Rn(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:ce,pitch:q+90,bearing:Ee}},a.b6=function(u,n){return u.roll==n.roll&&u.pitch==n.pitch&&u.bearing==n.bearing},a.b7=fi,a.b8=Kd,a.b9=th,a.bA=function(u){if(u.type==="custom")return new mD(u);switch(u.type){case"background":return new hD(u);case"circle":return new aP(u);case"fill":return new TP(u);case"fill-extrusion":return new OP(u);case"heatmap":return new cP(u);case"hillshade":return new dP(u);case"line":return new jP(u);case"raster":return new fD(u);case"symbol":return new hg(u)}},a.bB=Pn,a.bC=function(u,n){if(!u)return[{command:"setStyle",args:[n]}];let c=[];try{if(!He(u.version,n.version))return[{command:"setStyle",args:[n]}];He(u.center,n.center)||c.push({command:"setCenter",args:[n.center]}),He(u.state,n.state)||c.push({command:"setGlobalState",args:[n.state]}),He(u.centerAltitude,n.centerAltitude)||c.push({command:"setCenterAltitude",args:[n.centerAltitude]}),He(u.zoom,n.zoom)||c.push({command:"setZoom",args:[n.zoom]}),He(u.bearing,n.bearing)||c.push({command:"setBearing",args:[n.bearing]}),He(u.pitch,n.pitch)||c.push({command:"setPitch",args:[n.pitch]}),He(u.roll,n.roll)||c.push({command:"setRoll",args:[n.roll]}),He(u.sprite,n.sprite)||c.push({command:"setSprite",args:[n.sprite]}),He(u.glyphs,n.glyphs)||c.push({command:"setGlyphs",args:[n.glyphs]}),He(u.transition,n.transition)||c.push({command:"setTransition",args:[n.transition]}),He(u.light,n.light)||c.push({command:"setLight",args:[n.light]}),He(u.terrain,n.terrain)||c.push({command:"setTerrain",args:[n.terrain]}),He(u.sky,n.sky)||c.push({command:"setSky",args:[n.sky]}),He(u.projection,n.projection)||c.push({command:"setProjection",args:[n.projection]});let d={},f=[];(function(y,x,S,k){let D;for(D in x=x||{},y=y||{})Object.prototype.hasOwnProperty.call(y,D)&&(Object.prototype.hasOwnProperty.call(x,D)||dt(D,S,k));for(D in x)Object.prototype.hasOwnProperty.call(x,D)&&(Object.prototype.hasOwnProperty.call(y,D)?He(y[D],x[D])||(y[D].type==="geojson"&&x[D].type==="geojson"&&Tt(y,x,D)?Xe(S,{command:"setGeoJSONSourceData",args:[D,x[D].data]}):Ct(D,x,S,k)):je(D,x,S))})(u.sources,n.sources,f,d);let b=[];u.layers&&u.layers.forEach(y=>{"source"in y&&d[y.source]?c.push({command:"removeLayer",args:[y.id]}):b.push(y)}),c=c.concat(f),function(y,x,S){x=x||[];let k=(y=y||[]).map(ni),D=x.map(ni),L=y.reduce(Lt,{}),V=x.reduce(Lt,{}),H=k.slice(),Z=Object.create(null),te,de,be,Re,we;for(let q=0,ce=0;q<k.length;q++)te=k[q],Object.prototype.hasOwnProperty.call(V,te)?ce++:(Xe(S,{command:"removeLayer",args:[te]}),H.splice(H.indexOf(te,ce),1));for(let q=0,ce=0;q<D.length;q++)te=D[D.length-1-q],H[H.length-1-q]!==te&&(Object.prototype.hasOwnProperty.call(L,te)?(Xe(S,{command:"removeLayer",args:[te]}),H.splice(H.lastIndexOf(te,H.length-ce),1)):ce++,Re=H[H.length-q],Xe(S,{command:"addLayer",args:[V[te],Re]}),H.splice(H.length-q,0,te),Z[te]=!0);for(let q=0;q<D.length;q++)if(te=D[q],de=L[te],be=V[te],!Z[te]&&!He(de,be))if(He(de.source,be.source)&&He(de["source-layer"],be["source-layer"])&&He(de.type,be.type)){for(we in Ae(de.layout,be.layout,S,te,null,"setLayoutProperty"),Ae(de.paint,be.paint,S,te,null,"setPaintProperty"),He(de.filter,be.filter)||Xe(S,{command:"setFilter",args:[te,be.filter]}),He(de.minzoom,be.minzoom)&&He(de.maxzoom,be.maxzoom)||Xe(S,{command:"setLayerZoomRange",args:[te,be.minzoom,be.maxzoom]}),de)Object.prototype.hasOwnProperty.call(de,we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?Ae(de[we],be[we],S,te,we.slice(6),"setPaintProperty"):He(de[we],be[we])||Xe(S,{command:"setLayerProperty",args:[te,we,be[we]]}));for(we in be)Object.prototype.hasOwnProperty.call(be,we)&&!Object.prototype.hasOwnProperty.call(de,we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?Ae(de[we],be[we],S,te,we.slice(6),"setPaintProperty"):He(de[we],be[we])||Xe(S,{command:"setLayerProperty",args:[te,we,be[we]]}))}else Xe(S,{command:"removeLayer",args:[te]}),Re=H[H.lastIndexOf(te)+1],Xe(S,{command:"addLayer",args:[be,Re]})}(b,n.layers,c)}catch(d){console.warn("Unable to compute style diff:",d),c=[{command:"setStyle",args:[n]}]}return c},a.bD=function(u){let n=[],c=u.id;return c===void 0&&n.push({message:`layers.${c}: missing required property "id"`}),u.render===void 0&&n.push({message:`layers.${c}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&n.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),n},a.bE=function u(n,c){if(Array.isArray(n)){if(!Array.isArray(c)||n.length!==c.length)return!1;for(let d=0;d<n.length;d++)if(!u(n[d],c[d]))return!1;return!0}if(typeof n=="object"&&n!==null&&c!==null){if(typeof c!="object"||Object.keys(n).length!==Object.keys(c).length)return!1;for(let d in n)if(!u(n[d],c[d]))return!1;return!0}return n===c},a.bF=Ro,a.bG=ba,a.bH=class extends Er{constructor(u,n){super(u,n),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},a.bI=eg,a.bJ=class extends Er{constructor(u,n){super(u,n),this.current=Ab}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let n=1;n<16;n++)if(u[n]!==this.current[n]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},a.bK=Jm,a.bL=class extends Er{constructor(u,n){super(u,n),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},a.bM=class extends Er{constructor(u,n){super(u,n),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},a.bN=oe,a.bO=function(u,n){var c=Math.sin(n),d=Math.cos(n);return u[0]=d,u[1]=c,u[2]=0,u[3]=-c,u[4]=d,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},a.bP=function(u,n,c){var d=n[0],f=n[1],b=n[2];return u[0]=d*c[0]+f*c[3]+b*c[6],u[1]=d*c[1]+f*c[4]+b*c[7],u[2]=d*c[2]+f*c[5]+b*c[8],u},a.bQ=function(u,n,c,d,f,b,y){var x=1/(n-c),S=1/(d-f),k=1/(b-y);return u[0]=-2*x,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*S,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*k,u[11]=0,u[12]=(n+c)*x,u[13]=(f+d)*S,u[14]=(y+b)*k,u[15]=1,u},a.bR=class extends Er{constructor(u,n){super(u,n),this.current=new Array}set(u){if(u!=this.current){this.current=u;let n=new Float32Array(4*u.length);for(let c=0;c<u.length;c++)n[4*c]=u[c].r,n[4*c+1]=u[c].g,n[4*c+2]=u[c].b,n[4*c+3]=u[c].a;this.gl.uniform4fv(this.location,n)}}},a.bS=class extends Er{constructor(u,n){super(u,n),this.current=new Array}set(u){if(u!=this.current){this.current=u;let n=new Float32Array(u);this.gl.uniform1fv(this.location,n)}}},a.bT=class extends g{},a.bU=GP,a.bV=class extends C{},a.bW=Nb,a.bX=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},a.bY=c2,a.bZ=function(u,n,c){var d=n[0],f=n[1],b=n[2],y=c[3]*d+c[7]*f+c[11]*b+c[15];return u[0]=(c[0]*d+c[4]*f+c[8]*b+c[12])/(y=y||1),u[1]=(c[1]*d+c[5]*f+c[9]*b+c[13])/y,u[2]=(c[2]*d+c[6]*f+c[10]*b+c[14])/y,u},a.b_=class extends Vl{},a.ba=Hp,a.bb=eh,a.bc=Pt,a.bd=Bt,a.be=vn,a.bf=function(u,n,c,d,f){return Pt(d,f,Le((u-n)/(c-n),0,1))},a.bg=ot,a.bh=function(){return new Float64Array(3)},a.bi=function(u,n,c,d){return u[0]=n[0]+c[0]*d,u[1]=n[1]+c[1]*d,u[2]=n[2]+c[2]*d,u},a.bj=Ge,a.bk=function(){return new Float64Array(4)},a.bl=function(u,n,c,d){var f=[],b=[];return f[0]=n[0]-c[0],f[1]=n[1]-c[1],f[2]=n[2]-c[2],b[0]=f[0]*Math.cos(d)-f[1]*Math.sin(d),b[1]=f[0]*Math.sin(d)+f[1]*Math.cos(d),b[2]=f[2],u[0]=b[0]+c[0],u[1]=b[1]+c[1],u[2]=b[2]+c[2],u},a.bm=function(u,n,c,d){var f=[],b=[];return f[0]=n[0]-c[0],f[1]=n[1]-c[1],f[2]=n[2]-c[2],b[0]=f[0],b[1]=f[1]*Math.cos(d)-f[2]*Math.sin(d),b[2]=f[1]*Math.sin(d)+f[2]*Math.cos(d),u[0]=b[0]+c[0],u[1]=b[1]+c[1],u[2]=b[2]+c[2],u},a.bn=function(u,n,c,d){var f=[],b=[];return f[0]=n[0]-c[0],f[1]=n[1]-c[1],f[2]=n[2]-c[2],b[0]=f[2]*Math.sin(d)+f[0]*Math.cos(d),b[1]=f[1],b[2]=f[2]*Math.cos(d)-f[0]*Math.sin(d),u[0]=b[0]+c[0],u[1]=b[1]+c[1],u[2]=b[2]+c[2],u},a.bo=ct,a.bp=function(u,n,c){var d=Math.sin(c),f=Math.cos(c),b=n[0],y=n[1],x=n[2],S=n[3],k=n[8],D=n[9],L=n[10],V=n[11];return n!==u&&(u[4]=n[4],u[5]=n[5],u[6]=n[6],u[7]=n[7],u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15]),u[0]=b*f-k*d,u[1]=y*f-D*d,u[2]=x*f-L*d,u[3]=S*f-V*d,u[8]=b*d+k*f,u[9]=y*d+D*f,u[10]=x*d+L*f,u[11]=S*d+V*f,u},a.bq=function(u,n){let c=ot(u,360),d=ot(n,360),f=d-c,b=d>c?f-360:f+360;return Math.abs(f)<Math.abs(b)?f:b},a.br=function(u){return u[0]=0,u[1]=0,u[2]=0,u},a.bs=function(u,n,c,d){let f=Math.sqrt(u*u+n*n),b=Math.sqrt(c*c+d*d);u/=f,n/=f,c/=b,d/=b;let y=Math.acos(u*c+n*d);return-n*c+u*d>0?y:-y},a.bt=function(u,n){return u[0]*n[0]+u[1]*n[1]+u[2]*n[2]+u[3]},a.bu=sy,a.bv=function(u,n){let c=ot(u,2*Math.PI),d=ot(n,2*Math.PI);return Math.min(Math.abs(c-d),Math.abs(c-d+2*Math.PI),Math.abs(c-d-2*Math.PI))},a.bw=function(){let u={},n=se.$version;for(let c in se.$root){let d=se.$root[c];if(d.required){let f=null;f=c==="version"?n:d.type==="array"?[]:{},f!=null&&(u[c]=f)}}return u},a.bx=Tp,a.by=On,a.bz=function(u){u=u.slice();let n=Object.create(null);for(let c=0;c<u.length;c++)n[u[c].id]=u[c];for(let c=0;c<u.length;c++)"ref"in u[c]&&(u[c]=ze(u[c],n[u[c].ref]));return u},a.c=Li,a.c0=function(u,n){return u[0]===n[0]&&u[1]===n[1]&&u[2]===n[2]&&u[3]===n[3]&&u[4]===n[4]&&u[5]===n[5]&&u[6]===n[6]&&u[7]===n[7]&&u[8]===n[8]&&u[9]===n[9]&&u[10]===n[10]&&u[11]===n[11]&&u[12]===n[12]&&u[13]===n[13]&&u[14]===n[14]&&u[15]===n[15]},a.c1=function(u,n){var c=u[0],d=u[1],f=u[2],b=u[3],y=u[4],x=u[5],S=u[6],k=u[7],D=u[8],L=u[9],V=u[10],H=u[11],Z=u[12],te=u[13],de=u[14],be=u[15],Re=n[0],we=n[1],q=n[2],ce=n[3],Ee=n[4],Ze=n[5],mt=n[6],Ke=n[7],at=n[8],vt=n[9],gt=n[10],xt=n[11],ut=n[12],zt=n[13],Kt=n[14],Xt=n[15];return Math.abs(c-Re)<=re*Math.max(1,Math.abs(c),Math.abs(Re))&&Math.abs(d-we)<=re*Math.max(1,Math.abs(d),Math.abs(we))&&Math.abs(f-q)<=re*Math.max(1,Math.abs(f),Math.abs(q))&&Math.abs(b-ce)<=re*Math.max(1,Math.abs(b),Math.abs(ce))&&Math.abs(y-Ee)<=re*Math.max(1,Math.abs(y),Math.abs(Ee))&&Math.abs(x-Ze)<=re*Math.max(1,Math.abs(x),Math.abs(Ze))&&Math.abs(S-mt)<=re*Math.max(1,Math.abs(S),Math.abs(mt))&&Math.abs(k-Ke)<=re*Math.max(1,Math.abs(k),Math.abs(Ke))&&Math.abs(D-at)<=re*Math.max(1,Math.abs(D),Math.abs(at))&&Math.abs(L-vt)<=re*Math.max(1,Math.abs(L),Math.abs(vt))&&Math.abs(V-gt)<=re*Math.max(1,Math.abs(V),Math.abs(gt))&&Math.abs(H-xt)<=re*Math.max(1,Math.abs(H),Math.abs(xt))&&Math.abs(Z-ut)<=re*Math.max(1,Math.abs(Z),Math.abs(ut))&&Math.abs(te-zt)<=re*Math.max(1,Math.abs(te),Math.abs(zt))&&Math.abs(de-Kt)<=re*Math.max(1,Math.abs(de),Math.abs(Kt))&&Math.abs(be-Xt)<=re*Math.max(1,Math.abs(be),Math.abs(Xt))},a.c2=function(u,n){return u[0]=n[0],u[1]=n[1],u[2]=n[2],u[3]=n[3],u[4]=n[4],u[5]=n[5],u[6]=n[6],u[7]=n[7],u[8]=n[8],u[9]=n[9],u[10]=n[10],u[11]=n[11],u[12]=n[12],u[13]=n[13],u[14]=n[14],u[15]=n[15],u},a.c3=u=>u.type==="symbol",a.c4=u=>u.type==="circle",a.c5=u=>u.type==="heatmap",a.c6=u=>u.type==="line",a.c7=u=>u.type==="fill",a.c8=u=>u.type==="fill-extrusion",a.c9=u=>u.type==="hillshade",a.cA=Ub,a.cB=Gb,a.cC=Gp,a.cD=Yb,a.cE=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},a.cF=function(u,n,c,d,f){return s(this,void 0,void 0,function*(){if(ne())try{return yield Ya(u,n,c,d,f)}catch{}return function(b,y,x,S,k){let D=b.width,L=b.height;qn&&to||(qn=new OffscreenCanvas(D,L),to=qn.getContext("2d",{willReadFrequently:!0})),qn.width=D,qn.height=L,to.drawImage(b,0,0,D,L);let V=to.getImageData(y,x,S,k);return to.clearRect(0,0,D,L),V.data}(u,n,c,d,f)})},a.cG=lC,a.cH=_,a.cI=M,a.cJ=T2,a.cK=z2,a.cL=mr,a.cM=Ra,a.ca=u=>u.type==="raster",a.cb=u=>u.type==="background",a.cc=u=>u.type==="custom",a.cd=Di,a.ce=function(u,n,c){let d=B(n.x-c.x,n.y-c.y),f=B(u.x-c.x,u.y-c.y);var b,y;return Rn(Math.atan2(d[0]*f[1]-d[1]*f[0],(b=d)[0]*(y=f)[0]+b[1]*y[1]))},a.cf=Ie,a.cg=function(u,n){return Nr[n]&&(u instanceof MouseEvent||u instanceof WheelEvent)},a.ch=function(u,n){return fs[n]&&"touches"in u},a.ci=function(u){return fs[u]||Nr[u]},a.cj=function(u,n,c){var d=n[0],f=n[1];return u[0]=c[0]*d+c[4]*f+c[12],u[1]=c[1]*d+c[5]*f+c[13],u},a.ck=function(u,n){let{x:c,y:d}=Qp.fromLngLat(n);return!(u<0||u>25||d<0||d>=1||c<0||c>=1)},a.cl=function(u,n){return u[0]=n[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=n[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=n[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},a.cm=class extends Lu{},a.cn=TD,a.cp=function(u){return u.message===Ka},a.cq=io,a.cr=function(u,n){Yo.REGISTERED_PROTOCOLS[u]=n},a.cs=function(u){delete Yo.REGISTERED_PROTOCOLS[u]},a.ct=function(u,n){let c={};for(let f=0;f<u.length;f++){let b=n&&n[u[f].id]||zm(u[f]);n&&(n[u[f].id]=b);let y=c[b];y||(y=c[b]=[]),y.push(u[f])}let d=[];for(let f in c)d.push(c[f]);return d},a.cu=Dt,a.cv=cC,a.cw=dC,a.cx=V2,a.cy=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=fe/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;let n=u.bucket.layers[0],c=n.layout,d=n._unevaluatedLayout._values,f={layoutIconSize:d["icon-size"].possiblyEvaluate(new Cr(u.bucket.zoom+1),u.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Cr(u.bucket.zoom+1),u.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Cr(18))};if(u.bucket.textSizeData.kind==="composite"){let{minZoom:k,maxZoom:D}=u.bucket.textSizeData;f.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Cr(k),u.canonical),d["text-size"].possiblyEvaluate(new Cr(D),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){let{minZoom:k,maxZoom:D}=u.bucket.iconSizeData;f.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Cr(k),u.canonical),d["icon-size"].possiblyEvaluate(new Cr(D),u.canonical)]}let b=c.get("text-line-height")*un,y=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",x=c.get("text-keep-upright"),S=c.get("text-size");for(let k of u.bucket.features){let D=c.get("text-font").evaluate(k,{},u.canonical).join(","),L=S.evaluate(k,{},u.canonical),V=f.layoutTextSize.evaluate(k,{},u.canonical),H=f.layoutIconSize.evaluate(k,{},u.canonical),Z={horizontal:{},vertical:void 0},te=k.text,de,be=[0,0];if(te){let q=te.toString(),ce=c.get("text-letter-spacing").evaluate(k,{},u.canonical)*un,Ee=Eb(q)?ce:0,Ze=c.get("text-anchor").evaluate(k,{},u.canonical),mt=CC(n,k,u.canonical);if(!mt){let gt=c.get("text-radial-offset").evaluate(k,{},u.canonical);be=gt?wC(Ze,[gt*un,cy]):c.get("text-offset").evaluate(k,{},u.canonical).map(xt=>xt*un)}let Ke=y?"center":c.get("text-justify").evaluate(k,{},u.canonical),at=c.get("symbol-placement")==="point"?c.get("text-max-width").evaluate(k,{},u.canonical)*un:1/0,vt=()=>{u.bucket.allowVerticalPlacement&&Wd(q)&&(Z.vertical=cg(te,u.glyphMap,u.glyphPositions,u.imagePositions,D,at,b,Ze,"left",Ee,be,a.al.vertical,!0,V,L))};if(!y&&mt){let gt=new Set;if(Ke==="auto")for(let ut=0;ut<mt.values.length;ut+=2)gt.add(uy(mt.values[ut]));else gt.add(Ke);let xt=!1;for(let ut of gt)if(!Z.horizontal[ut])if(xt)Z.horizontal[ut]=Z.horizontal[0];else{let zt=cg(te,u.glyphMap,u.glyphPositions,u.imagePositions,D,at,b,"center",ut,Ee,be,a.al.horizontal,!1,V,L);zt&&(Z.horizontal[ut]=zt,xt=zt.positionedLines.length===1)}vt()}else{Ke==="auto"&&(Ke=uy(Ze));let gt=cg(te,u.glyphMap,u.glyphPositions,u.imagePositions,D,at,b,Ze,Ke,Ee,be,a.al.horizontal,!1,V,L);gt&&(Z.horizontal[Ke]=gt),vt(),Wd(q)&&y&&x&&(Z.vertical=cg(te,u.glyphMap,u.glyphPositions,u.imagePositions,D,at,b,Ze,Ke,Ee,be,a.al.vertical,!1,V,L))}}let Re=!1;if(k.icon&&k.icon.name){let q=u.imageMap[k.icon.name];q&&(de=aD(u.imagePositions[k.icon.name],c.get("icon-offset").evaluate(k,{},u.canonical),c.get("icon-anchor").evaluate(k,{},u.canonical)),Re=!!q.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=Re:u.bucket.sdfIcons!==Re&&Ar("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(q.pixelRatio!==u.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}let we=SC(Z.horizontal)||Z.vertical;u.bucket.iconsInText=!!we&&we.iconsInText,(we||de)&&ED(u.bucket,k,Z,de,u.imageMap,f,V,H,be,Re,u.canonical,u.subdivisionGranularity)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},a.cz=Wb,a.d=qe,a.e=ai,a.f=u=>s(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));let n=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(n)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),a.g=ms,a.h=u=>new Promise((n,c)=>{let d=new Image;d.onload=()=>{n(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=Tl})},d.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let f=new Blob([new Uint8Array(u)],{type:"image/png"});d.src=u.byteLength?URL.createObjectURL(f):Tl}),a.i=Jn,a.j=(u,n)=>yo(ai(u,{type:"json"}),n),a.k=he,a.l=Y,a.m=yo,a.n=(u,n)=>yo(ai(u,{type:"arrayBuffer"}),n),a.o=function(u){return new Yb(u).readFields(XP,[])},a.p=B2,a.q=Bp,a.r=tn,a.s=ps,a.t=qd,a.u=Fi,a.v=se,a.w=Ar,a.x=Sp,a.y=kc,a.z=function([u,n,c]){return n+=90,n*=Math.PI/180,c*=Math.PI/180,{x:u*Math.cos(n)*Math.sin(c),y:u*Math.sin(n)*Math.sin(c),z:u*Math.cos(c)}}}),e("worker",["./shared"],function(a){"use strict";class s{constructor(Q){this.keyCache={},Q&&this.replace(Q)}replace(Q){this._layerConfigs={},this._layers={},this.update(Q,[])}update(Q,U){for(let he of Q){this._layerConfigs[he.id]=he;let ye=this._layers[he.id]=a.bA(he);ye._featureFilter=a.a7(ye.filter),this.keyCache[he.id]&&delete this.keyCache[he.id]}for(let he of U)delete this.keyCache[he],delete this._layerConfigs[he],delete this._layers[he];this.familiesBySource={};let Y=a.ct(Object.values(this._layerConfigs),this.keyCache);for(let he of Y){let ye=he.map(je=>this._layers[je.id]),se=ye[0];if(se.visibility==="none")continue;let Pe=se.source||"",ze=this.familiesBySource[Pe];ze||(ze=this.familiesBySource[Pe]={});let He=se.sourceLayer||"_geojsonTileLayer",Xe=ze[He];Xe||(Xe=ze[He]=[]),Xe.push(ye)}}}class _{constructor(Q){let U={},Y=[];for(let Pe in Q){let ze=Q[Pe],He=U[Pe]={};for(let Xe in ze){let je=ze[+Xe];if(!je||je.bitmap.width===0||je.bitmap.height===0)continue;let dt={x:0,y:0,w:je.bitmap.width+2,h:je.bitmap.height+2};Y.push(dt),He[Xe]={rect:dt,metrics:je.metrics}}}let{w:he,h:ye}=a.p(Y),se=new a.q({width:he||1,height:ye||1});for(let Pe in Q){let ze=Q[Pe];for(let He in ze){let Xe=ze[+He];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;let je=U[Pe][He].rect;a.q.copy(Xe.bitmap,se,{x:0,y:0},{x:je.x+1,y:je.y+1},Xe.bitmap)}}this.image=se,this.positions=U}}a.cu("GlyphAtlas",_);class w{constructor(Q){this.tileID=new a.Y(Q.tileID.overscaledZ,Q.tileID.wrap,Q.tileID.canonical.z,Q.tileID.canonical.x,Q.tileID.canonical.y),this.uid=Q.uid,this.zoom=Q.zoom,this.pixelRatio=Q.pixelRatio,this.tileSize=Q.tileSize,this.source=Q.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Q.showCollisionBoxes,this.collectResourceTiming=!!Q.collectResourceTiming,this.returnDependencies=!!Q.returnDependencies,this.promoteId=Q.promoteId,this.inFlightDependencies=[]}parse(Q,U,Y,he,ye){return a._(this,void 0,void 0,function*(){this.status="parsing",this.data=Q,this.collisionBoxArray=new a.a5;let se=new a.cv(Object.keys(Q.layers).sort()),Pe=new a.cw(this.tileID,this.promoteId);Pe.bucketLayerIDs=[];let ze={},He={featureIndex:Pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Y,subdivisionGranularity:ye},Xe=U.familiesBySource[this.source];for(let jt in Xe){let nt=Q.layers[jt];if(!nt)continue;nt.version===1&&a.w(`Vector tile source "${this.source}" layer "${jt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Gt=se.encode(jt),oi=[];for(let tr=0;tr<nt.length;tr++){let Wi=nt.feature(tr),an=Pe.getId(Wi,jt);oi.push({feature:Wi,id:an,index:tr,sourceLayerIndex:Gt})}for(let tr of Xe[jt]){let Wi=tr[0];Wi.source!==this.source&&a.w(`layer.source = ${Wi.source} does not equal this.source = ${this.source}`),Wi.minzoom&&this.zoom<Math.floor(Wi.minzoom)||Wi.maxzoom&&this.zoom>=Wi.maxzoom||Wi.visibility!=="none"&&(E(tr,this.zoom,Y),(ze[Wi.id]=Wi.createBucket({index:Pe.bucketLayerIDs.length,layers:tr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gt,sourceID:this.source})).populate(oi,He,this.tileID.canonical),Pe.bucketLayerIDs.push(tr.map(an=>an.id)))}}let je=a.bF(He.glyphDependencies,jt=>Object.keys(jt).map(Number));this.inFlightDependencies.forEach(jt=>jt?.abort()),this.inFlightDependencies=[];let dt=Promise.resolve({});if(Object.keys(je).length){let jt=new AbortController;this.inFlightDependencies.push(jt),dt=he.sendAsync({type:"GG",data:{stacks:je,source:this.source,tileID:this.tileID,type:"glyphs"}},jt)}let Ct=Object.keys(He.iconDependencies),Tt=Promise.resolve({});if(Ct.length){let jt=new AbortController;this.inFlightDependencies.push(jt),Tt=he.sendAsync({type:"GI",data:{icons:Ct,source:this.source,tileID:this.tileID,type:"icons"}},jt)}let Ae=Object.keys(He.patternDependencies),ni=Promise.resolve({});if(Ae.length){let jt=new AbortController;this.inFlightDependencies.push(jt),ni=he.sendAsync({type:"GI",data:{icons:Ae,source:this.source,tileID:this.tileID,type:"patterns"}},jt)}let[Lt,$e,$i]=yield Promise.all([dt,Tt,ni]),Ut=new _(Lt),hi=new a.cx($e,$i);for(let jt in ze){let nt=ze[jt];nt instanceof a.a6?(E(nt.layers,this.zoom,Y),a.cy({bucket:nt,glyphMap:Lt,glyphPositions:Ut.positions,imageMap:$e,imagePositions:hi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:He.subdivisionGranularity})):nt.hasPattern&&(nt instanceof a.cz||nt instanceof a.cA||nt instanceof a.cB)&&(E(nt.layers,this.zoom,Y),nt.addFeatures(He,this.tileID.canonical,hi.patternPositions))}return this.status="done",{buckets:Object.values(ze).filter(jt=>!jt.isEmpty()),featureIndex:Pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ut.image,imageAtlas:hi,glyphMap:this.returnDependencies?Lt:null,iconMap:this.returnDependencies?$e:null,glyphPositions:this.returnDependencies?Ut.positions:null}})}}function E(qe,Q,U){let Y=new a.C(Q);for(let he of qe)he.recalculate(Y,U)}class M{constructor(Q,U,Y){this.actor=Q,this.layerIndex=U,this.availableImages=Y,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(Q,U){return a._(this,void 0,void 0,function*(){let Y=yield a.n(Q.request,U);try{return{vectorTile:new a.cC.VectorTile(new a.cD(Y.data)),rawData:Y.data,cacheControl:Y.cacheControl,expires:Y.expires}}catch(he){let ye=new Uint8Array(Y.data),se=`Unable to parse the tile at ${Q.request.url}, `;throw se+=ye[0]===31&&ye[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${he.message}`,new Error(se)}})}loadTile(Q){return a._(this,void 0,void 0,function*(){let U=Q.uid,Y=!!(Q&&Q.request&&Q.request.collectResourceTiming)&&new a.cE(Q.request),he=new w(Q);this.loading[U]=he;let ye=new AbortController;he.abort=ye;try{let se=yield this.loadVectorTile(Q,ye);if(delete this.loading[U],!se)return null;let Pe=se.rawData,ze={};se.expires&&(ze.expires=se.expires),se.cacheControl&&(ze.cacheControl=se.cacheControl);let He={};if(Y){let je=Y.finish();je&&(He.resourceTiming=JSON.parse(JSON.stringify(je)))}he.vectorTile=se.vectorTile;let Xe=he.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity);this.loaded[U]=he,this.fetching[U]={rawTileData:Pe,cacheControl:ze,resourceTiming:He};try{let je=yield Xe;return a.e({rawTileData:Pe.slice(0)},je,ze,He)}finally{delete this.fetching[U]}}catch(se){throw delete this.loading[U],he.status="done",this.loaded[U]=he,se}})}reloadTile(Q){return a._(this,void 0,void 0,function*(){let U=Q.uid;if(!this.loaded||!this.loaded[U])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let Y=this.loaded[U];if(Y.showCollisionBoxes=Q.showCollisionBoxes,Y.status==="parsing"){let he=yield Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity),ye;if(this.fetching[U]){let{rawTileData:se,cacheControl:Pe,resourceTiming:ze}=this.fetching[U];delete this.fetching[U],ye=a.e({rawTileData:se.slice(0)},he,Pe,ze)}else ye=he;return ye}if(Y.status==="done"&&Y.vectorTile)return Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity)})}abortTile(Q){return a._(this,void 0,void 0,function*(){let U=this.loading,Y=Q.uid;U&&U[Y]&&U[Y].abort&&(U[Y].abort.abort(),delete U[Y])})}removeTile(Q){return a._(this,void 0,void 0,function*(){this.loaded&&this.loaded[Q.uid]&&delete this.loaded[Q.uid]})}}class I{constructor(){this.loaded={}}loadTile(Q){return a._(this,void 0,void 0,function*(){let{uid:U,encoding:Y,rawImageData:he,redFactor:ye,greenFactor:se,blueFactor:Pe,baseShift:ze}=Q,He=he.width+2,Xe=he.height+2,je=a.b(he)?new a.R({width:He,height:Xe},yield a.cF(he,-1,-1,He,Xe)):he,dt=new a.cG(U,je,Y,ye,se,Pe,ze);return this.loaded=this.loaded||{},this.loaded[U]=dt,dt})}removeTile(Q){let U=this.loaded,Y=Q.uid;U&&U[Y]&&delete U[Y]}}var A,R,$=function(){if(R)return A;function qe(U,Y){if(U.length!==0){Q(U[0],Y);for(var he=1;he<U.length;he++)Q(U[he],!Y)}}function Q(U,Y){for(var he=0,ye=0,se=0,Pe=U.length,ze=Pe-1;se<Pe;ze=se++){var He=(U[se][0]-U[ze][0])*(U[ze][1]+U[se][1]),Xe=he+He;ye+=Math.abs(he)>=Math.abs(He)?he-Xe+He:He-Xe+he,he=Xe}he+ye>=0!=!!Y&&U.reverse()}return R=1,A=function U(Y,he){var ye,se=Y&&Y.type;if(se==="FeatureCollection")for(ye=0;ye<Y.features.length;ye++)U(Y.features[ye],he);else if(se==="GeometryCollection")for(ye=0;ye<Y.geometries.length;ye++)U(Y.geometries[ye],he);else if(se==="Feature")U(Y.geometry,he);else if(se==="Polygon")qe(Y.coordinates,he);else if(se==="MultiPolygon")for(ye=0;ye<Y.coordinates.length;ye++)qe(Y.coordinates[ye],he);return Y}}(),W=a.cH($);let G=a.cC.VectorTileFeature.prototype.toGeoJSON;class pe{constructor(Q){this._feature=Q,this.extent=a.Z,this.type=Q.type,this.properties=Q.tags,"id"in Q&&!isNaN(Q.id)&&(this.id=parseInt(Q.id,10))}loadGeometry(){if(this._feature.type===1){let Q=[];for(let U of this._feature.geometry)Q.push([new a.P(U[0],U[1])]);return Q}{let Q=[];for(let U of this._feature.geometry){let Y=[];for(let he of U)Y.push(new a.P(he[0],he[1]));Q.push(Y)}return Q}}toGeoJSON(Q,U,Y){return G.call(this,Q,U,Y)}}class le{constructor(Q){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.Z,this.length=Q.length,this._features=Q}feature(Q){return new pe(this._features[Q])}}var ne,re,ue,oe={exports:{}},Ve=function(){if(ue)return oe.exports;ue=1;var qe=a.cK(),Q=function(){if(re)return ne;re=1;var Xe=a.cI(),je=a.cJ().VectorTileFeature;function dt(Tt,Ae){this.options=Ae||{},this.features=Tt,this.length=Tt.length}function Ct(Tt,Ae){this.id=typeof Tt.id=="number"?Tt.id:void 0,this.type=Tt.type,this.rawGeometry=Tt.type===1?[Tt.geometry]:Tt.geometry,this.properties=Tt.tags,this.extent=Ae||4096}return ne=dt,dt.prototype.feature=function(Tt){return new Ct(this.features[Tt],this.options.extent)},Ct.prototype.loadGeometry=function(){var Tt=this.rawGeometry;this.geometry=[];for(var Ae=0;Ae<Tt.length;Ae++){for(var ni=Tt[Ae],Lt=[],$e=0;$e<ni.length;$e++)Lt.push(new Xe(ni[$e][0],ni[$e][1]));this.geometry.push(Lt)}return this.geometry},Ct.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Tt=this.geometry,Ae=1/0,ni=-1/0,Lt=1/0,$e=-1/0,$i=0;$i<Tt.length;$i++)for(var Ut=Tt[$i],hi=0;hi<Ut.length;hi++){var jt=Ut[hi];Ae=Math.min(Ae,jt.x),ni=Math.max(ni,jt.x),Lt=Math.min(Lt,jt.y),$e=Math.max($e,jt.y)}return[Ae,Lt,ni,$e]},Ct.prototype.toGeoJSON=je.prototype.toGeoJSON,ne}();function U(Xe){var je=new qe;return function(dt,Ct){for(var Tt in dt.layers)Ct.writeMessage(3,Y,dt.layers[Tt])}(Xe,je),je.finish()}function Y(Xe,je){var dt;je.writeVarintField(15,Xe.version||1),je.writeStringField(1,Xe.name||""),je.writeVarintField(5,Xe.extent||4096);var Ct={keys:[],values:[],keycache:{},valuecache:{}};for(dt=0;dt<Xe.length;dt++)Ct.feature=Xe.feature(dt),je.writeMessage(2,he,Ct);var Tt=Ct.keys;for(dt=0;dt<Tt.length;dt++)je.writeStringField(3,Tt[dt]);var Ae=Ct.values;for(dt=0;dt<Ae.length;dt++)je.writeMessage(4,He,Ae[dt])}function he(Xe,je){var dt=Xe.feature;dt.id!==void 0&&je.writeVarintField(1,dt.id),je.writeMessage(2,ye,Xe),je.writeVarintField(3,dt.type),je.writeMessage(4,ze,dt)}function ye(Xe,je){var dt=Xe.feature,Ct=Xe.keys,Tt=Xe.values,Ae=Xe.keycache,ni=Xe.valuecache;for(var Lt in dt.properties){var $e=dt.properties[Lt],$i=Ae[Lt];if($e!==null){$i===void 0&&(Ct.push(Lt),Ae[Lt]=$i=Ct.length-1),je.writeVarint($i);var Ut=typeof $e;Ut!=="string"&&Ut!=="boolean"&&Ut!=="number"&&($e=JSON.stringify($e));var hi=Ut+":"+$e,jt=ni[hi];jt===void 0&&(Tt.push($e),ni[hi]=jt=Tt.length-1),je.writeVarint(jt)}}}function se(Xe,je){return(je<<3)+(7&Xe)}function Pe(Xe){return Xe<<1^Xe>>31}function ze(Xe,je){for(var dt=Xe.loadGeometry(),Ct=Xe.type,Tt=0,Ae=0,ni=dt.length,Lt=0;Lt<ni;Lt++){var $e=dt[Lt],$i=1;Ct===1&&($i=$e.length),je.writeVarint(se(1,$i));for(var Ut=Ct===3?$e.length-1:$e.length,hi=0;hi<Ut;hi++){hi===1&&Ct!==1&&je.writeVarint(se(2,Ut-1));var jt=$e[hi].x-Tt,nt=$e[hi].y-Ae;je.writeVarint(Pe(jt)),je.writeVarint(Pe(nt)),Tt+=jt,Ae+=nt}Ct===3&&je.writeVarint(se(7,1))}}function He(Xe,je){var dt=typeof Xe;dt==="string"?je.writeStringField(1,Xe):dt==="boolean"?je.writeBooleanField(7,Xe):dt==="number"&&(Xe%1!=0?je.writeDoubleField(3,Xe):Xe<0?je.writeSVarintField(6,Xe):je.writeVarintField(5,Xe))}return oe.exports=U,oe.exports.fromVectorTileJs=U,oe.exports.fromGeojsonVt=function(Xe,je){je=je||{};var dt={};for(var Ct in Xe)dt[Ct]=new Q(Xe[Ct].features,je),dt[Ct].name=Ct,dt[Ct].version=je.version,dt[Ct].extent=je.extent;return U({layers:dt})},oe.exports.GeoJSONWrapper=Q,oe.exports}(),tt=a.cH(Ve);let ct={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:qe=>qe},Qe=Math.fround||(ve=new Float32Array(1),qe=>(ve[0]=+qe,ve[0]));var ve;let Ge=3,bt=5,ae=6;class ee{constructor(Q){this.options=Object.assign(Object.create(ct),Q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Q){let{log:U,minZoom:Y,maxZoom:he}=this.options;U&&console.time("total time");let ye=`prepare ${Q.length} points`;U&&console.time(ye),this.points=Q;let se=[];for(let ze=0;ze<Q.length;ze++){let He=Q[ze];if(!He.geometry)continue;let[Xe,je]=He.geometry.coordinates,dt=Qe(Ue(Xe)),Ct=Qe(ot(je));se.push(dt,Ct,1/0,ze,-1,1),this.options.reduce&&se.push(0)}let Pe=this.trees[he+1]=this._createTree(se);U&&console.timeEnd(ye);for(let ze=he;ze>=Y;ze--){let He=+Date.now();Pe=this.trees[ze]=this._createTree(this._cluster(Pe,ze)),U&&console.log("z%d: %d clusters in %dms",ze,Pe.numItems,+Date.now()-He)}return U&&console.timeEnd("total time"),this}getClusters(Q,U){let Y=((Q[0]+180)%360+360)%360-180,he=Math.max(-90,Math.min(90,Q[1])),ye=Q[2]===180?180:((Q[2]+180)%360+360)%360-180,se=Math.max(-90,Math.min(90,Q[3]));if(Q[2]-Q[0]>=360)Y=-180,ye=180;else if(Y>ye){let je=this.getClusters([Y,he,180,se],U),dt=this.getClusters([-180,he,ye,se],U);return je.concat(dt)}let Pe=this.trees[this._limitZoom(U)],ze=Pe.range(Ue(Y),ot(se),Ue(ye),ot(he)),He=Pe.data,Xe=[];for(let je of ze){let dt=this.stride*je;Xe.push(He[dt+bt]>1?B(He,dt,this.clusterProps):this.points[He[dt+Ge]])}return Xe}getChildren(Q){let U=this._getOriginId(Q),Y=this._getOriginZoom(Q),he="No cluster with the specified id.",ye=this.trees[Y];if(!ye)throw new Error(he);let se=ye.data;if(U*this.stride>=se.length)throw new Error(he);let Pe=this.options.radius/(this.options.extent*Math.pow(2,Y-1)),ze=ye.within(se[U*this.stride],se[U*this.stride+1],Pe),He=[];for(let Xe of ze){let je=Xe*this.stride;se[je+4]===Q&&He.push(se[je+bt]>1?B(se,je,this.clusterProps):this.points[se[je+Ge]])}if(He.length===0)throw new Error(he);return He}getLeaves(Q,U,Y){let he=[];return this._appendLeaves(he,Q,U=U||10,Y=Y||0,0),he}getTile(Q,U,Y){let he=this.trees[this._limitZoom(Q)],ye=Math.pow(2,Q),{extent:se,radius:Pe}=this.options,ze=Pe/se,He=(Y-ze)/ye,Xe=(Y+1+ze)/ye,je={features:[]};return this._addTileFeatures(he.range((U-ze)/ye,He,(U+1+ze)/ye,Xe),he.data,U,Y,ye,je),U===0&&this._addTileFeatures(he.range(1-ze/ye,He,1,Xe),he.data,ye,Y,ye,je),U===ye-1&&this._addTileFeatures(he.range(0,He,ze/ye,Xe),he.data,-1,Y,ye,je),je.features.length?je:null}getClusterExpansionZoom(Q){let U=this._getOriginZoom(Q)-1;for(;U<=this.options.maxZoom;){let Y=this.getChildren(Q);if(U++,Y.length!==1)break;Q=Y[0].properties.cluster_id}return U}_appendLeaves(Q,U,Y,he,ye){let se=this.getChildren(U);for(let Pe of se){let ze=Pe.properties;if(ze&&ze.cluster?ye+ze.point_count<=he?ye+=ze.point_count:ye=this._appendLeaves(Q,ze.cluster_id,Y,he,ye):ye<he?ye++:Q.push(Pe),Q.length===Y)break}return ye}_createTree(Q){let U=new a.aF(Q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Y=0;Y<Q.length;Y+=this.stride)U.add(Q[Y],Q[Y+1]);return U.finish(),U.data=Q,U}_addTileFeatures(Q,U,Y,he,ye,se){for(let Pe of Q){let ze=Pe*this.stride,He=U[ze+bt]>1,Xe,je,dt;if(He)Xe=fe(U,ze,this.clusterProps),je=U[ze],dt=U[ze+1];else{let Ae=this.points[U[ze+Ge]];Xe=Ae.properties;let[ni,Lt]=Ae.geometry.coordinates;je=Ue(ni),dt=ot(Lt)}let Ct={type:1,geometry:[[Math.round(this.options.extent*(je*ye-Y)),Math.round(this.options.extent*(dt*ye-he))]],tags:Xe},Tt;Tt=He||this.options.generateId?U[ze+Ge]:this.points[U[ze+Ge]].id,Tt!==void 0&&(Ct.id=Tt),se.features.push(Ct)}}_limitZoom(Q){return Math.max(this.options.minZoom,Math.min(Math.floor(+Q),this.options.maxZoom+1))}_cluster(Q,U){let{radius:Y,extent:he,reduce:ye,minPoints:se}=this.options,Pe=Y/(he*Math.pow(2,U)),ze=Q.data,He=[],Xe=this.stride;for(let je=0;je<ze.length;je+=Xe){if(ze[je+2]<=U)continue;ze[je+2]=U;let dt=ze[je],Ct=ze[je+1],Tt=Q.within(ze[je],ze[je+1],Pe),Ae=ze[je+bt],ni=Ae;for(let Lt of Tt){let $e=Lt*Xe;ze[$e+2]>U&&(ni+=ze[$e+bt])}if(ni>Ae&&ni>=se){let Lt,$e=dt*Ae,$i=Ct*Ae,Ut=-1,hi=((je/Xe|0)<<5)+(U+1)+this.points.length;for(let jt of Tt){let nt=jt*Xe;if(ze[nt+2]<=U)continue;ze[nt+2]=U;let Gt=ze[nt+bt];$e+=ze[nt]*Gt,$i+=ze[nt+1]*Gt,ze[nt+4]=hi,ye&&(Lt||(Lt=this._map(ze,je,!0),Ut=this.clusterProps.length,this.clusterProps.push(Lt)),ye(Lt,this._map(ze,nt)))}ze[je+4]=hi,He.push($e/ni,$i/ni,1/0,hi,-1,ni),ye&&He.push(Ut)}else{for(let Lt=0;Lt<Xe;Lt++)He.push(ze[je+Lt]);if(ni>1)for(let Lt of Tt){let $e=Lt*Xe;if(!(ze[$e+2]<=U)){ze[$e+2]=U;for(let $i=0;$i<Xe;$i++)He.push(ze[$e+$i])}}}}return He}_getOriginId(Q){return Q-this.points.length>>5}_getOriginZoom(Q){return(Q-this.points.length)%32}_map(Q,U,Y){if(Q[U+bt]>1){let se=this.clusterProps[Q[U+ae]];return Y?Object.assign({},se):se}let he=this.points[Q[U+Ge]].properties,ye=this.options.map(he);return Y&&ye===he?Object.assign({},ye):ye}}function B(qe,Q,U){return{type:"Feature",id:qe[Q+Ge],properties:fe(qe,Q,U),geometry:{type:"Point",coordinates:[(Y=qe[Q],360*(Y-.5)),Pt(qe[Q+1])]}};var Y}function fe(qe,Q,U){let Y=qe[Q+bt],he=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y,ye=qe[Q+ae],se=ye===-1?{}:Object.assign({},U[ye]);return Object.assign(se,{cluster:!0,cluster_id:qe[Q+Ge],point_count:Y,point_count_abbreviated:he})}function Ue(qe){return qe/360+.5}function ot(qe){let Q=Math.sin(qe*Math.PI/180),U=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return U<0?0:U>1?1:U}function Pt(qe){let Q=(180-360*qe)*Math.PI/180;return 360*Math.atan(Math.exp(Q))/Math.PI-90}function Bt(qe,Q,U,Y){let he=Y,ye=Q+(U-Q>>1),se,Pe=U-Q,ze=qe[Q],He=qe[Q+1],Xe=qe[U],je=qe[U+1];for(let dt=Q+3;dt<U;dt+=3){let Ct=Di(qe[dt],qe[dt+1],ze,He,Xe,je);if(Ct>he)se=dt,he=Ct;else if(Ct===he){let Tt=Math.abs(dt-ye);Tt<Pe&&(se=dt,Pe=Tt)}}he>Y&&(se-Q>3&&Bt(qe,Q,se,Y),qe[se+2]=he,U-se>3&&Bt(qe,se,U,Y))}function Di(qe,Q,U,Y,he,ye){let se=he-U,Pe=ye-Y;if(se!==0||Pe!==0){let ze=((qe-U)*se+(Q-Y)*Pe)/(se*se+Pe*Pe);ze>1?(U=he,Y=ye):ze>0&&(U+=se*ze,Y+=Pe*ze)}return se=qe-U,Pe=Q-Y,se*se+Pe*Pe}function Ie(qe,Q,U,Y){let he={id:qe??null,type:Q,geometry:U,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Q==="Point"||Q==="MultiPoint"||Q==="LineString")Le(he,U);else if(Q==="Polygon")Le(he,U[0]);else if(Q==="MultiLineString")for(let ye of U)Le(he,ye);else if(Q==="MultiPolygon")for(let ye of U)Le(he,ye[0]);return he}function Le(qe,Q){for(let U=0;U<Q.length;U+=3)qe.minX=Math.min(qe.minX,Q[U]),qe.minY=Math.min(qe.minY,Q[U+1]),qe.maxX=Math.max(qe.maxX,Q[U]),qe.maxY=Math.max(qe.maxY,Q[U+1])}function kt(qe,Q,U,Y){if(!Q.geometry)return;let he=Q.geometry.coordinates;if(he&&he.length===0)return;let ye=Q.geometry.type,se=Math.pow(U.tolerance/((1<<U.maxZoom)*U.extent),2),Pe=[],ze=Q.id;if(U.promoteId?ze=Q.properties[U.promoteId]:U.generateId&&(ze=Y||0),ye==="Point")ai(he,Pe);else if(ye==="MultiPoint")for(let He of he)ai(He,Pe);else if(ye==="LineString")Ur(he,Pe,se,!1);else if(ye==="MultiLineString"){if(U.lineMetrics){for(let He of he)Pe=[],Ur(He,Pe,se,!1),qe.push(Ie(ze,"LineString",Pe,Q.properties));return}Ro(he,Pe,se,!1)}else if(ye==="Polygon")Ro(he,Pe,se,!0);else{if(ye!=="MultiPolygon"){if(ye==="GeometryCollection"){for(let He of Q.geometry.geometries)kt(qe,{id:ze,geometry:He,properties:Q.properties},U,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let He of he){let Xe=[];Ro(He,Xe,se,!0),Pe.push(Xe)}}qe.push(Ie(ze,ye,Pe,Q.properties))}function ai(qe,Q){Q.push(ba(qe[0]),Pn(qe[1]),0)}function Ur(qe,Q,U,Y){let he,ye,se=0;for(let ze=0;ze<qe.length;ze++){let He=ba(qe[ze][0]),Xe=Pn(qe[ze][1]);Q.push(He,Xe,0),ze>0&&(se+=Y?(he*Xe-He*ye)/2:Math.sqrt(Math.pow(He-he,2)+Math.pow(Xe-ye,2))),he=He,ye=Xe}let Pe=Q.length-3;Q[2]=1,Bt(Q,0,Pe,U),Q[Pe+2]=1,Q.size=Math.abs(se),Q.start=0,Q.end=Q.size}function Ro(qe,Q,U,Y){for(let he=0;he<qe.length;he++){let ye=[];Ur(qe[he],ye,U,Y),Q.push(ye)}}function ba(qe){return qe/360+.5}function Pn(qe){let Q=Math.sin(qe*Math.PI/180),U=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return U<0?0:U>1?1:U}function Dn(qe,Q,U,Y,he,ye,se,Pe){if(Y/=Q,ye>=(U/=Q)&&se<Y)return qe;if(se<U||ye>=Y)return null;let ze=[];for(let He of qe){let Xe=He.geometry,je=He.type,dt=he===0?He.minX:He.minY,Ct=he===0?He.maxX:He.maxY;if(dt>=U&&Ct<Y){ze.push(He);continue}if(Ct<U||dt>=Y)continue;let Tt=[];if(je==="Point"||je==="MultiPoint")Ar(Xe,Tt,U,Y,he);else if(je==="LineString")Ki(Xe,Tt,U,Y,he,!1,Pe.lineMetrics);else if(je==="MultiLineString")Vs(Xe,Tt,U,Y,he,!1);else if(je==="Polygon")Vs(Xe,Tt,U,Y,he,!0);else if(je==="MultiPolygon")for(let Ae of Xe){let ni=[];Vs(Ae,ni,U,Y,he,!0),ni.length&&Tt.push(ni)}if(Tt.length){if(Pe.lineMetrics&&je==="LineString"){for(let Ae of Tt)ze.push(Ie(He.id,je,Ae,He.tags));continue}je!=="LineString"&&je!=="MultiLineString"||(Tt.length===1?(je="LineString",Tt=Tt[0]):je="MultiLineString"),je!=="Point"&&je!=="MultiPoint"||(je=Tt.length===3?"Point":"MultiPoint"),ze.push(Ie(He.id,je,Tt,He.tags))}}return ze.length?ze:null}function Ar(qe,Q,U,Y,he){for(let ye=0;ye<qe.length;ye+=3){let se=qe[ye+he];se>=U&&se<=Y&&eo(Q,qe[ye],qe[ye+1],qe[ye+2])}}function Ki(qe,Q,U,Y,he,ye,se){let Pe=Jn(qe),ze=he===0?Tl:Ya,He,Xe,je=qe.start;for(let ni=0;ni<qe.length-3;ni+=3){let Lt=qe[ni],$e=qe[ni+1],$i=qe[ni+2],Ut=qe[ni+3],hi=qe[ni+4],jt=he===0?Lt:$e,nt=he===0?Ut:hi,Gt=!1;se&&(He=Math.sqrt(Math.pow(Lt-Ut,2)+Math.pow($e-hi,2))),jt<U?nt>U&&(Xe=ze(Pe,Lt,$e,Ut,hi,U),se&&(Pe.start=je+He*Xe)):jt>Y?nt<Y&&(Xe=ze(Pe,Lt,$e,Ut,hi,Y),se&&(Pe.start=je+He*Xe)):eo(Pe,Lt,$e,$i),nt<U&&jt>=U&&(Xe=ze(Pe,Lt,$e,Ut,hi,U),Gt=!0),nt>Y&&jt<=Y&&(Xe=ze(Pe,Lt,$e,Ut,hi,Y),Gt=!0),!ye&&Gt&&(se&&(Pe.end=je+He*Xe),Q.push(Pe),Pe=Jn(qe)),se&&(je+=He)}let dt=qe.length-3,Ct=qe[dt],Tt=qe[dt+1],Ae=he===0?Ct:Tt;Ae>=U&&Ae<=Y&&eo(Pe,Ct,Tt,qe[dt+2]),dt=Pe.length-3,ye&&dt>=3&&(Pe[dt]!==Pe[0]||Pe[dt+1]!==Pe[1])&&eo(Pe,Pe[0],Pe[1],Pe[2]),Pe.length&&Q.push(Pe)}function Jn(qe){let Q=[];return Q.size=qe.size,Q.start=qe.start,Q.end=qe.end,Q}function Vs(qe,Q,U,Y,he,ye){for(let se of qe)Ki(se,Q,U,Y,he,ye,!1)}function eo(qe,Q,U,Y){qe.push(Q,U,Y)}function Tl(qe,Q,U,Y,he,ye){let se=(ye-Q)/(Y-Q);return eo(qe,ye,U+(he-U)*se,1),se}function Ya(qe,Q,U,Y,he,ye){let se=(ye-U)/(he-U);return eo(qe,Q+(Y-Q)*se,ye,1),se}function qn(qe,Q){let U=[];for(let Y=0;Y<qe.length;Y++){let he=qe[Y],ye=he.type,se;if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")se=to(he.geometry,Q);else if(ye==="MultiLineString"||ye==="Polygon"){se=[];for(let Pe of he.geometry)se.push(to(Pe,Q))}else if(ye==="MultiPolygon"){se=[];for(let Pe of he.geometry){let ze=[];for(let He of Pe)ze.push(to(He,Q));se.push(ze)}}U.push(Ie(he.id,ye,se,he.tags))}return U}function to(qe,Q){let U=[];U.size=qe.size,qe.start!==void 0&&(U.start=qe.start,U.end=qe.end);for(let Y=0;Y<qe.length;Y+=3)U.push(qe[Y]+Q,qe[Y+1],qe[Y+2]);return U}function ps(qe,Q){if(qe.transformed)return qe;let U=1<<qe.z,Y=qe.x,he=qe.y;for(let ye of qe.features){let se=ye.geometry,Pe=ye.type;if(ye.geometry=[],Pe===1)for(let ze=0;ze<se.length;ze+=2)ye.geometry.push(ya(se[ze],se[ze+1],Q,U,Y,he));else for(let ze=0;ze<se.length;ze++){let He=[];for(let Xe=0;Xe<se[ze].length;Xe+=2)He.push(ya(se[ze][Xe],se[ze][Xe+1],Q,U,Y,he));ye.geometry.push(He)}}return qe.transformed=!0,qe}function ya(qe,Q,U,Y,he,ye){return[Math.round(U*(qe*Y-he)),Math.round(U*(Q*Y-ye))]}function Rn(qe,Q,U,Y,he){let ye=Q===he.maxZoom?0:he.tolerance/((1<<Q)*he.extent),se={features:[],numPoints:0,numSimplified:0,numFeatures:qe.length,source:null,x:U,y:Y,z:Q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let Pe of qe)fs(se,Pe,ye,he);return se}function fs(qe,Q,U,Y){let he=Q.geometry,ye=Q.type,se=[];if(qe.minX=Math.min(qe.minX,Q.minX),qe.minY=Math.min(qe.minY,Q.minY),qe.maxX=Math.max(qe.maxX,Q.maxX),qe.maxY=Math.max(qe.maxY,Q.maxY),ye==="Point"||ye==="MultiPoint")for(let Pe=0;Pe<he.length;Pe+=3)se.push(he[Pe],he[Pe+1]),qe.numPoints++,qe.numSimplified++;else if(ye==="LineString")Nr(se,he,qe,U,!1,!1);else if(ye==="MultiLineString"||ye==="Polygon")for(let Pe=0;Pe<he.length;Pe++)Nr(se,he[Pe],qe,U,ye==="Polygon",Pe===0);else if(ye==="MultiPolygon")for(let Pe=0;Pe<he.length;Pe++){let ze=he[Pe];for(let He=0;He<ze.length;He++)Nr(se,ze[He],qe,U,!0,He===0)}if(se.length){let Pe=Q.tags||null;if(ye==="LineString"&&Y.lineMetrics){Pe={};for(let He in Q.tags)Pe[He]=Q.tags[He];Pe.mapbox_clip_start=he.start/he.size,Pe.mapbox_clip_end=he.end/he.size}let ze={geometry:se,type:ye==="Polygon"||ye==="MultiPolygon"?3:ye==="LineString"||ye==="MultiLineString"?2:1,tags:Pe};Q.id!==null&&(ze.id=Q.id),qe.features.push(ze)}}function Nr(qe,Q,U,Y,he,ye){let se=Y*Y;if(Y>0&&Q.size<(he?se:Y))return void(U.numPoints+=Q.length/3);let Pe=[];for(let ze=0;ze<Q.length;ze+=3)(Y===0||Q[ze+2]>se)&&(U.numSimplified++,Pe.push(Q[ze],Q[ze+1])),U.numPoints++;he&&function(ze,He){let Xe=0;for(let je=0,dt=ze.length,Ct=dt-2;je<dt;Ct=je,je+=2)Xe+=(ze[je]-ze[Ct])*(ze[je+1]+ze[Ct+1]);if(Xe>0===He)for(let je=0,dt=ze.length;je<dt/2;je+=2){let Ct=ze[je],Tt=ze[je+1];ze[je]=ze[dt-2-je],ze[je+1]=ze[dt-1-je],ze[dt-2-je]=Ct,ze[dt-1-je]=Tt}}(Pe,ye),qe.push(Pe)}let Ka={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Li{constructor(Q,U){let Y=(U=this.options=function(ye,se){for(let Pe in se)ye[Pe]=se[Pe];return ye}(Object.create(Ka),U)).debug;if(Y&&console.time("preprocess data"),U.maxZoom<0||U.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(U.promoteId&&U.generateId)throw new Error("promoteId and generateId cannot be used together.");let he=function(ye,se){let Pe=[];if(ye.type==="FeatureCollection")for(let ze=0;ze<ye.features.length;ze++)kt(Pe,ye.features[ze],se,ze);else kt(Pe,ye.type==="Feature"?ye:{geometry:ye},se);return Pe}(Q,U);this.tiles={},this.tileCoords=[],Y&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",U.indexMaxZoom,U.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),he=function(ye,se){let Pe=se.buffer/se.extent,ze=ye,He=Dn(ye,1,-1-Pe,Pe,0,-1,2,se),Xe=Dn(ye,1,1-Pe,2+Pe,0,-1,2,se);return(He||Xe)&&(ze=Dn(ye,1,-Pe,1+Pe,0,-1,2,se)||[],He&&(ze=qn(He,1).concat(ze)),Xe&&(ze=ze.concat(qn(Xe,-1)))),ze}(he,U),he.length&&this.splitTile(he,0,0,0),Y&&(he.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Q,U,Y,he,ye,se,Pe){let ze=[Q,U,Y,he],He=this.options,Xe=He.debug;for(;ze.length;){he=ze.pop(),Y=ze.pop(),U=ze.pop(),Q=ze.pop();let je=1<<U,dt=Yo(U,Y,he),Ct=this.tiles[dt];if(!Ct&&(Xe>1&&console.time("creation"),Ct=this.tiles[dt]=Rn(Q,U,Y,he,He),this.tileCoords.push({z:U,x:Y,y:he}),Xe)){Xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",U,Y,he,Ct.numFeatures,Ct.numPoints,Ct.numSimplified),console.timeEnd("creation"));let Gt=`z${U}`;this.stats[Gt]=(this.stats[Gt]||0)+1,this.total++}if(Ct.source=Q,ye==null){if(U===He.indexMaxZoom||Ct.numPoints<=He.indexMaxPoints)continue}else{if(U===He.maxZoom||U===ye)continue;if(ye!=null){let Gt=ye-U;if(Y!==se>>Gt||he!==Pe>>Gt)continue}}if(Ct.source=null,Q.length===0)continue;Xe>1&&console.time("clipping");let Tt=.5*He.buffer/He.extent,Ae=.5-Tt,ni=.5+Tt,Lt=1+Tt,$e=null,$i=null,Ut=null,hi=null,jt=Dn(Q,je,Y-Tt,Y+ni,0,Ct.minX,Ct.maxX,He),nt=Dn(Q,je,Y+Ae,Y+Lt,0,Ct.minX,Ct.maxX,He);Q=null,jt&&($e=Dn(jt,je,he-Tt,he+ni,1,Ct.minY,Ct.maxY,He),$i=Dn(jt,je,he+Ae,he+Lt,1,Ct.minY,Ct.maxY,He),jt=null),nt&&(Ut=Dn(nt,je,he-Tt,he+ni,1,Ct.minY,Ct.maxY,He),hi=Dn(nt,je,he+Ae,he+Lt,1,Ct.minY,Ct.maxY,He),nt=null),Xe>1&&console.timeEnd("clipping"),ze.push($e||[],U+1,2*Y,2*he),ze.push($i||[],U+1,2*Y,2*he+1),ze.push(Ut||[],U+1,2*Y+1,2*he),ze.push(hi||[],U+1,2*Y+1,2*he+1)}}getTile(Q,U,Y){Q=+Q,U=+U,Y=+Y;let he=this.options,{extent:ye,debug:se}=he;if(Q<0||Q>24)return null;let Pe=1<<Q,ze=Yo(Q,U=U+Pe&Pe-1,Y);if(this.tiles[ze])return ps(this.tiles[ze],ye);se>1&&console.log("drilling down to z%d-%d-%d",Q,U,Y);let He,Xe=Q,je=U,dt=Y;for(;!He&&Xe>0;)Xe--,je>>=1,dt>>=1,He=this.tiles[Yo(Xe,je,dt)];return He&&He.source?(se>1&&(console.log("found parent tile z%d-%d-%d",Xe,je,dt),console.time("drilling down")),this.splitTile(He.source,Xe,je,dt,Q,U,Y),se>1&&console.timeEnd("drilling down"),this.tiles[ze]?ps(this.tiles[ze],ye):null):null}}function Yo(qe,Q,U){return 32*((1<<qe)*U+Q)+qe}function ms(qe,Q){return Q?qe.properties[Q]:qe.id}function Qa(qe,Q){if(qe==null)return!0;if(qe.type==="Feature")return ms(qe,Q)!=null;if(qe.type==="FeatureCollection"){let U=new Set;for(let Y of qe.features){let he=ms(Y,Q);if(he==null||U.has(he))return!1;U.add(he)}return!0}return!1}function io(qe,Q){let U=new Map;if(qe!=null)if(qe.type==="Feature")U.set(ms(qe,Q),qe);else for(let Y of qe.features)U.set(ms(Y,Q),Y);return U}class On extends M{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(Q,U){return a._(this,void 0,void 0,function*(){let Y=Q.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let he=this._geoJSONIndex.getTile(Y.z,Y.x,Y.y);if(!he)return null;let ye=new le(he.features),se=tt(ye);return se.byteOffset===0&&se.byteLength===se.buffer.byteLength||(se=new Uint8Array(se)),{vectorTile:ye,rawData:se.buffer}})}loadData(Q){return a._(this,void 0,void 0,function*(){var U;(U=this._pendingRequest)===null||U===void 0||U.abort();let Y=!!(Q&&Q.request&&Q.request.collectResourceTiming)&&new a.cE(Q.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(Q,this._pendingRequest),this._geoJSONIndex=Q.cluster?new ee(function({superclusterOptions:se,clusterProperties:Pe}){if(!Pe||!se)return se;let ze={},He={},Xe={accumulated:null,zoom:0},je={properties:null},dt=Object.keys(Pe);for(let Ct of dt){let[Tt,Ae]=Pe[Ct],ni=a.cL(Ae),Lt=a.cL(typeof Tt=="string"?[Tt,["accumulated"],["get",Ct]]:Tt);ze[Ct]=ni.value,He[Ct]=Lt.value}return se.map=Ct=>{je.properties=Ct;let Tt={};for(let Ae of dt)Tt[Ae]=ze[Ae].evaluate(Xe,je);return Tt},se.reduce=(Ct,Tt)=>{je.properties=Tt;for(let Ae of dt)Xe.accumulated=Ct[Ae],Ct[Ae]=He[Ae].evaluate(Xe,je)},se}(Q)).load((yield this._pendingData).features):(he=yield this._pendingData,new Li(he,Q.geojsonVtOptions)),this.loaded={};let ye={};if(Y){let se=Y.finish();se&&(ye.resourceTiming={},ye.resourceTiming[Q.source]=JSON.parse(JSON.stringify(se)))}return ye}catch(ye){if(delete this._pendingRequest,a.cp(ye))return{abandoned:!0};throw ye}var he})}getData(){return a._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(Q){let U=this.loaded;return U&&U[Q.uid]?super.reloadTile(Q):this.loadTile(Q)}loadAndProcessGeoJSON(Q,U){return a._(this,void 0,void 0,function*(){let Y=yield this.loadGeoJSON(Q,U);if(delete this._pendingRequest,typeof Y!="object")throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`);if(W(Y,!0),Q.filter){let he=a.cL(Q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(he.result==="error")throw new Error(he.value.map(se=>`${se.key}: ${se.message}`).join(", "));Y={type:"FeatureCollection",features:Y.features.filter(se=>he.value.evaluate({zoom:0},se))}}return Y})}loadGeoJSON(Q,U){return a._(this,void 0,void 0,function*(){let{promoteId:Y}=Q;if(Q.request){let he=yield a.j(Q.request,U);return this._dataUpdateable=Qa(he.data,Y)?io(he.data,Y):void 0,he.data}if(typeof Q.data=="string")try{let he=JSON.parse(Q.data);return this._dataUpdateable=Qa(he,Y)?io(he,Y):void 0,he}catch{throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`)}if(!Q.dataDiff)throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Q.source}`);return function(he,ye,se){var Pe,ze,He,Xe;if(ye.removeAll&&he.clear(),ye.remove)for(let je of ye.remove)he.delete(je);if(ye.add)for(let je of ye.add){let dt=ms(je,se);dt!=null&&he.set(dt,je)}if(ye.update)for(let je of ye.update){let dt=he.get(je.id);if(dt==null)continue;let Ct=!je.removeAllProperties&&(((Pe=je.removeProperties)===null||Pe===void 0?void 0:Pe.length)>0||((ze=je.addOrUpdateProperties)===null||ze===void 0?void 0:ze.length)>0);if((je.newGeometry||je.removeAllProperties||Ct)&&(dt=Object.assign({},dt),he.set(je.id,dt),Ct&&(dt.properties=Object.assign({},dt.properties))),je.newGeometry&&(dt.geometry=je.newGeometry),je.removeAllProperties)dt.properties={};else if(((He=je.removeProperties)===null||He===void 0?void 0:He.length)>0)for(let Tt of je.removeProperties)Object.prototype.hasOwnProperty.call(dt.properties,Tt)&&delete dt.properties[Tt];if(((Xe=je.addOrUpdateProperties)===null||Xe===void 0?void 0:Xe.length)>0)for(let{key:Tt,value:Ae}of je.addOrUpdateProperties)dt.properties[Tt]=Ae}}(this._dataUpdateable,Q.dataDiff,Y),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(Q){return a._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(Q){return this._geoJSONIndex.getClusterExpansionZoom(Q.clusterId)}getClusterChildren(Q){return this._geoJSONIndex.getChildren(Q.clusterId)}getClusterLeaves(Q){return this._geoJSONIndex.getLeaves(Q.clusterId,Q.limit,Q.offset)}}class yo{constructor(Q){this.self=Q,this.actor=new a.H(Q),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(U,Y)=>{if(this.externalWorkerSourceTypes[U])throw new Error(`Worker source with name "${U}" already registered.`);this.externalWorkerSourceTypes[U]=Y},this.self.addProtocol=a.cr,this.self.removeProtocol=a.cs,this.self.registerRTLTextPlugin=U=>{a.cM.setMethods(U)},this.actor.registerMessageHandler("LDT",(U,Y)=>this._getDEMWorkerSource(U,Y.source).loadTile(Y)),this.actor.registerMessageHandler("RDT",(U,Y)=>a._(this,void 0,void 0,function*(){this._getDEMWorkerSource(U,Y.source).removeTile(Y)})),this.actor.registerMessageHandler("GCEZ",(U,Y)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(U,Y.type,Y.source).getClusterExpansionZoom(Y)})),this.actor.registerMessageHandler("GCC",(U,Y)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(U,Y.type,Y.source).getClusterChildren(Y)})),this.actor.registerMessageHandler("GCL",(U,Y)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(U,Y.type,Y.source).getClusterLeaves(Y)})),this.actor.registerMessageHandler("LD",(U,Y)=>this._getWorkerSource(U,Y.type,Y.source).loadData(Y)),this.actor.registerMessageHandler("GD",(U,Y)=>this._getWorkerSource(U,Y.type,Y.source).getData()),this.actor.registerMessageHandler("LT",(U,Y)=>this._getWorkerSource(U,Y.type,Y.source).loadTile(Y)),this.actor.registerMessageHandler("RT",(U,Y)=>this._getWorkerSource(U,Y.type,Y.source).reloadTile(Y)),this.actor.registerMessageHandler("AT",(U,Y)=>this._getWorkerSource(U,Y.type,Y.source).abortTile(Y)),this.actor.registerMessageHandler("RMT",(U,Y)=>this._getWorkerSource(U,Y.type,Y.source).removeTile(Y)),this.actor.registerMessageHandler("RS",(U,Y)=>a._(this,void 0,void 0,function*(){if(!this.workerSources[U]||!this.workerSources[U][Y.type]||!this.workerSources[U][Y.type][Y.source])return;let he=this.workerSources[U][Y.type][Y.source];delete this.workerSources[U][Y.type][Y.source],he.removeSource!==void 0&&he.removeSource(Y)})),this.actor.registerMessageHandler("RM",U=>a._(this,void 0,void 0,function*(){delete this.layerIndexes[U],delete this.availableImages[U],delete this.workerSources[U],delete this.demWorkerSources[U]})),this.actor.registerMessageHandler("SR",(U,Y)=>a._(this,void 0,void 0,function*(){this.referrer=Y})),this.actor.registerMessageHandler("SRPS",(U,Y)=>this._syncRTLPluginState(U,Y)),this.actor.registerMessageHandler("IS",(U,Y)=>a._(this,void 0,void 0,function*(){this.self.importScripts(Y)})),this.actor.registerMessageHandler("SI",(U,Y)=>this._setImages(U,Y)),this.actor.registerMessageHandler("UL",(U,Y)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(U).update(Y.layers,Y.removedIds)})),this.actor.registerMessageHandler("SL",(U,Y)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(U).replace(Y)}))}_setImages(Q,U){return a._(this,void 0,void 0,function*(){this.availableImages[Q]=U;for(let Y in this.workerSources[Q]){let he=this.workerSources[Q][Y];for(let ye in he)he[ye].availableImages=U}})}_syncRTLPluginState(Q,U){return a._(this,void 0,void 0,function*(){return yield a.cM.syncState(U,this.self.importScripts)})}_getAvailableImages(Q){let U=this.availableImages[Q];return U||(U=[]),U}_getLayerIndex(Q){let U=this.layerIndexes[Q];return U||(U=this.layerIndexes[Q]=new s),U}_getWorkerSource(Q,U,Y){if(this.workerSources[Q]||(this.workerSources[Q]={}),this.workerSources[Q][U]||(this.workerSources[Q][U]={}),!this.workerSources[Q][U][Y]){let he={sendAsync:(ye,se)=>(ye.targetMapId=Q,this.actor.sendAsync(ye,se))};switch(U){case"vector":this.workerSources[Q][U][Y]=new M(he,this._getLayerIndex(Q),this._getAvailableImages(Q));break;case"geojson":this.workerSources[Q][U][Y]=new On(he,this._getLayerIndex(Q),this._getAvailableImages(Q));break;default:this.workerSources[Q][U][Y]=new this.externalWorkerSourceTypes[U](he,this._getLayerIndex(Q),this._getAvailableImages(Q))}}return this.workerSources[Q][U][Y]}_getDEMWorkerSource(Q,U){return this.demWorkerSources[Q]||(this.demWorkerSources[Q]={}),this.demWorkerSources[Q][U]||(this.demWorkerSources[Q][U]=new I),this.demWorkerSources[Q][U]}}return a.i(self)&&(self.worker=new yo(self)),yo}),e("index",["exports","./shared"],function(a,s){"use strict";var _="5.5.0";function w(){var m=new s.A(4);return s.A!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}let E,M,I={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(m,i,l){let h=requestAnimationFrame(g=>{p(),i(g)}),{unsubscribe:p}=s.s(m.signal,"abort",()=>{p(),cancelAnimationFrame(h),l(s.c())},!1)},frameAsync(m){return new Promise((i,l)=>{this.frame(m,i,l)})},getImageData(m,i=0){return this.getImageCanvasContext(m).getImageData(-i,-i,m.width+2*i,m.height+2*i)},getImageCanvasContext(m){let i=window.document.createElement("canvas"),l=i.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return i.width=m.width,i.height=m.height,l.drawImage(m,0,0,m.width,m.height),l},resolveURL:m=>(E||(E=document.createElement("a")),E.href=m,E.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(M==null&&(M=matchMedia("(prefers-reduced-motion: reduce)")),M.matches)}};class A{static testProp(i){if(!A.docStyle)return i[0];for(let l=0;l<i.length;l++)if(i[l]in A.docStyle)return i[l];return i[0]}static create(i,l,h){let p=window.document.createElement(i);return l!==void 0&&(p.className=l),h&&h.appendChild(p),p}static createNS(i,l){return window.document.createElementNS(i,l)}static disableDrag(){A.docStyle&&A.selectProp&&(A.userSelect=A.docStyle[A.selectProp],A.docStyle[A.selectProp]="none")}static enableDrag(){A.docStyle&&A.selectProp&&(A.docStyle[A.selectProp]=A.userSelect)}static setTransform(i,l){i.style[A.transformProp]=l}static addEventListener(i,l,h,p={}){i.addEventListener(l,h,"passive"in p?p:p.capture)}static removeEventListener(i,l,h,p={}){i.removeEventListener(l,h,"passive"in p?p:p.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",A.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",A.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",A.suppressClickInternal,!0)},0)}static getScale(i){let l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}static getPoint(i,l,h){let p=l.boundingClientRect;return new s.P((h.clientX-p.left)/l.x-i.clientLeft,(h.clientY-p.top)/l.y-i.clientTop)}static mousePos(i,l){let h=A.getScale(i);return A.getPoint(i,h,l)}static touchPos(i,l){let h=[],p=A.getScale(i);for(let g=0;g<l.length;g++)h.push(A.getPoint(i,p,l[g]));return h}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}static sanitize(i){let l=new DOMParser().parseFromString(i,"text/html").body||document.createElement("body"),h=l.querySelectorAll("script");for(let p of h)p.remove();return A.clean(l),l.innerHTML}static isPossiblyDangerous(i,l){let h=l.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(i)||!h.includes("javascript:")&&!h.includes("data:"))||!!i.startsWith("on")||void 0}static clean(i){let l=i.children;for(let h of l)A.removeAttributes(h),A.clean(h)}static removeAttributes(i){for(let{name:l,value:h}of i.attributes)A.isPossiblyDangerous(l,h)&&i.removeAttribute(l)}}A.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,A.selectProp=A.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),A.transformProp=A.testProp(["transform","WebkitTransform"]);let R={supported:!1,testSupport:function(m){!G&&W&&(pe?le(m):$=m)}},$,W,G=!1,pe=!1;function le(m){let i=m.createTexture();m.bindTexture(m.TEXTURE_2D,i);try{if(m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,W),m.isContextLost())return;R.supported=!0}catch{}m.deleteTexture(i),G=!0}var ne;typeof document<"u"&&(W=document.createElement("img"),W.onload=()=>{$&&le($),$=null,pe=!0},W.onerror=()=>{G=!0,$=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(m){let i,l,h,p;m.resetRequestQueue=()=>{i=[],l=0,h=0,p={}},m.addThrottleControl=T=>{let P=h++;return p[P]=T,P},m.removeThrottleControl=T=>{delete p[T],v()},m.getImage=(T,P,O=!0)=>new Promise((F,N)=>{R.supported&&(T.headers||(T.headers={}),T.headers.accept="image/webp,*/*"),s.e(T,{type:"image"}),i.push({abortController:P,requestParameters:T,supportImageRefresh:O,state:"queued",onError:X=>{N(X)},onSuccess:X=>{F(X)}}),v()});let g=T=>s._(this,void 0,void 0,function*(){T.state="running";let{requestParameters:P,supportImageRefresh:O,onError:F,onSuccess:N,abortController:X}=T,J=O===!1&&!s.i(self)&&!s.g(P.url)&&(!P.headers||Object.keys(P.headers).reduce((_e,xe)=>_e&&xe==="accept",!0));l++;let ge=J?C(P,X):s.m(P,X);try{let _e=yield ge;delete T.abortController,T.state="completed",_e.data instanceof HTMLImageElement||s.b(_e.data)?N(_e):_e.data&&N({data:yield(me=_e.data,typeof createImageBitmap=="function"?s.f(me):s.h(me)),cacheControl:_e.cacheControl,expires:_e.expires})}catch(_e){delete T.abortController,F(_e)}finally{l--,v()}var me}),v=()=>{let T=(()=>{for(let P of Object.keys(p))if(p[P]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let P=l;P<T&&i.length>0;P++){let O=i.shift();O.abortController.signal.aborted?P--:g(O)}},C=(T,P)=>new Promise((O,F)=>{let N=new Image,X=T.url,J=T.credentials;J&&J==="include"?N.crossOrigin="use-credentials":(J&&J==="same-origin"||!s.d(X))&&(N.crossOrigin="anonymous"),P.signal.addEventListener("abort",()=>{N.src="",F(s.c())}),N.fetchPriority="high",N.onload=()=>{N.onerror=N.onload=null,O({data:N})},N.onerror=()=>{N.onerror=N.onload=null,P.signal.aborted||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},N.src=X})}(ne||(ne={})),ne.resetRequestQueue();class re{constructor(i){this._transformRequestFn=i}transformRequest(i,l){return this._transformRequestFn&&this._transformRequestFn(i,l)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function ue(m){let i=[];if(typeof m=="string")i.push({id:"default",url:m});else if(m&&m.length>0){let l=[];for(let{id:h,url:p}of m){let g=`${h}${p}`;l.indexOf(g)===-1&&(l.push(g),i.push({id:h,url:p}))}}return i}function oe(m,i,l){try{let h=new URL(m);return h.pathname+=`${i}${l}`,h.toString()}catch{throw new Error(`Invalid sprite URL "${m}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class Ve{constructor(i,l,h,p){this.context=i,this.format=h,this.texture=i.gl.createTexture(),this.update(l,p)}update(i,l,h){let{width:p,height:g}=i,v=!(this.size&&this.size[0]===p&&this.size[1]===g||h),{context:C}=this,{gl:T}=C;if(this.useMipmap=!!(l&&l.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!l||l.premultiply!==!1)),v)this.size=[p,g],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.b(i)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,i):T.texImage2D(T.TEXTURE_2D,0,this.format,p,g,0,this.format,T.UNSIGNED_BYTE,i.data);else{let{x:P,y:O}=h||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.b(i)?T.texSubImage2D(T.TEXTURE_2D,0,P,O,T.RGBA,T.UNSIGNED_BYTE,i):T.texSubImage2D(T.TEXTURE_2D,0,P,O,p,g,T.RGBA,T.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D),C.pixelStoreUnpackFlipY.setDefault(),C.pixelStoreUnpack.setDefault(),C.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(i,l,h){let{context:p}=this,{gl:g}=p;g.bindTexture(g.TEXTURE_2D,this.texture),h!==g.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=g.LINEAR),i!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,i),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,h||i),this.filter=i),l!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,l),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function tt(m){let{userImage:i}=m;return!!(i&&i.render&&i.render())&&(m.data.replace(new Uint8Array(i.data.buffer)),!0)}class ct extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(let{ids:l,promiseResolve:h}of this.requestors)h(this._getImagesForIds(l));this.requestors=[]}}getImage(i){let l=this.images[i];if(l&&!l.data&&l.spriteData){let h=l.spriteData;l.data=new s.R({width:h.width,height:h.height},h.context.getImageData(h.x,h.y,h.width,h.height).data),l.spriteData=null}return l}addImage(i,l){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,l)&&(this.images[i]=l)}_validate(i,l){let h=!0,p=l.data||l.spriteData;return this._validateStretch(l.stretchX,p&&p.width)||(this.fire(new s.k(new Error(`Image "${i}" has invalid "stretchX" value`))),h=!1),this._validateStretch(l.stretchY,p&&p.height)||(this.fire(new s.k(new Error(`Image "${i}" has invalid "stretchY" value`))),h=!1),this._validateContent(l.content,l)||(this.fire(new s.k(new Error(`Image "${i}" has invalid "content" value`))),h=!1),h}_validateStretch(i,l){if(!i)return!0;let h=0;for(let p of i){if(p[0]<h||p[1]<p[0]||l<p[1])return!1;h=p[1]}return!0}_validateContent(i,l){if(!i)return!0;if(i.length!==4)return!1;let h=l.spriteData,p=h&&h.width||l.data.width,g=h&&h.height||l.data.height;return!(i[0]<0||p<i[0]||i[1]<0||g<i[1]||i[2]<0||p<i[2]||i[3]<0||g<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,l,h=!0){let p=this.getImage(i);if(h&&(p.data.width!==l.data.width||p.data.height!==l.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=p.version+1,this.images[i]=l,this.updatedImages[i]=!0}removeImage(i){let l=this.images[i];delete this.images[i],delete this.patterns[i],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((l,h)=>{let p=!0;if(!this.isLoaded())for(let g of i)this.images[g]||(p=!1);this.isLoaded()||p?l(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:l})})}_getImagesForIds(i){let l={};for(let h of i){let p=this.getImage(h);p||(this.fire(new s.l("styleimagemissing",{id:h})),p=this.getImage(h)),p?l[h]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:s.w(`Image "${h}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){let{width:i,height:l}=this.atlasImage;return{width:i,height:l}}getPattern(i){let l=this.patterns[i],h=this.getImage(i);if(!h)return null;if(l&&l.position.version===h.version)return l.position;if(l)l.position.version=h.version;else{let p={w:h.data.width+2,h:h.data.height+2,x:0,y:0},g=new s.I(p,h);this.patterns[i]={bin:p,position:g}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){let l=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ve(i,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){let i=[];for(let g in this.patterns)i.push(this.patterns[g].bin);let{w:l,h}=s.p(i),p=this.atlasImage;p.resize({width:l||1,height:h||1});for(let g in this.patterns){let{bin:v}=this.patterns[g],C=v.x+1,T=v.y+1,P=this.getImage(g).data,O=P.width,F=P.height;s.R.copy(P,p,{x:0,y:0},{x:C,y:T},{width:O,height:F}),s.R.copy(P,p,{x:0,y:F-1},{x:C,y:T-1},{width:O,height:1}),s.R.copy(P,p,{x:0,y:0},{x:C,y:T+F},{width:O,height:1}),s.R.copy(P,p,{x:O-1,y:0},{x:C-1,y:T},{width:1,height:F}),s.R.copy(P,p,{x:0,y:0},{x:C+O,y:T},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(let l of i){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;let h=this.getImage(l);h||s.w(`Image with ID: "${l}" was not found`),tt(h)&&this.updateImage(l,h)}}}let Qe=1e20;function ve(m,i,l,h,p,g,v,C,T){for(let P=i;P<i+h;P++)Ge(m,l*g+P,g,p,v,C,T);for(let P=l;P<l+p;P++)Ge(m,P*g+i,1,h,v,C,T)}function Ge(m,i,l,h,p,g,v){g[0]=0,v[0]=-1e20,v[1]=Qe,p[0]=m[i];for(let C=1,T=0,P=0;C<h;C++){p[C]=m[i+C*l];let O=C*C;do{let F=g[T];P=(p[C]-p[F]+O-F*F)/(C-F)/2}while(P<=v[T]&&--T>-1);T++,g[T]=C,v[T]=P,v[T+1]=Qe}for(let C=0,T=0;C<h;C++){for(;v[T+1]<C;)T++;let P=g[T],O=C-P;m[i+C*l]=p[P]+O*O}}class bt{constructor(i,l){this.requestManager=i,this.localIdeographFontFamily=l,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return s._(this,void 0,void 0,function*(){let l=[];for(let g in i)for(let v of i[g])l.push(this._getAndCacheGlyphsPromise(g,v));let h=yield Promise.all(l),p={};for(let{stack:g,id:v,glyph:C}of h)p[g]||(p[g]={}),p[g][v]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics};return p})}_getAndCacheGlyphsPromise(i,l){return s._(this,void 0,void 0,function*(){let h=this.entries[i];h||(h=this.entries[i]={glyphs:{},requests:{},ranges:{}});let p=h.glyphs[l];if(p!==void 0)return{stack:i,id:l,glyph:p};if(p=this._tinySDF(h,i,l),p)return h.glyphs[l]=p,{stack:i,id:l,glyph:p};let g=Math.floor(l/256);if(256*g>65535)throw new Error("glyphs > 65535 not supported");if(h.ranges[g])return{stack:i,id:l,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!h.requests[g]){let C=bt.loadGlyphRange(i,g,this.url,this.requestManager);h.requests[g]=C}let v=yield h.requests[g];for(let C in v)this._doesCharSupportLocalGlyph(+C)||(h.glyphs[+C]=v[+C]);return h.ranges[g]=!0,{stack:i,id:l,glyph:v[l]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(i))||s.u["CJK Unified Ideographs"](i)||s.u["Hangul Syllables"](i)||s.u.Hiragana(i)||s.u.Katakana(i)||s.u["CJK Symbols and Punctuation"](i)||s.u["Halfwidth and Fullwidth Forms"](i))}_tinySDF(i,l,h){let p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(h))return;let g=i.tinySDF;if(!g){let C="400";/bold/i.test(l)?C="900":/medium/i.test(l)?C="500":/light/i.test(l)&&(C="200"),g=i.tinySDF=new bt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:C})}let v=g.draw(String.fromCharCode(h));return{id:h,bitmap:new s.q({width:v.width||60,height:v.height||60},v.data),metrics:{width:v.glyphWidth/2||24,height:v.glyphHeight/2||24,left:v.glyphLeft/2+.5||0,top:v.glyphTop/2-27.5||-8,advance:v.glyphAdvance/2||24,isDoubleResolution:!0}}}}bt.loadGlyphRange=function(m,i,l,h){return s._(this,void 0,void 0,function*(){let p=256*i,g=p+255,v=h.transformRequest(l.replace("{fontstack}",m).replace("{range}",`${p}-${g}`),"Glyphs"),C=yield s.n(v,new AbortController);if(!C||!C.data)throw new Error(`Could not load glyph range. range: ${i}, ${p}-${g}`);let T={};for(let P of s.o(C.data))T[P.id]=P;return T})},bt.TinySDF=class{constructor({fontSize:m=24,buffer:i=3,radius:l=8,cutoff:h=.25,fontFamily:p="sans-serif",fontWeight:g="normal",fontStyle:v="normal"}={}){this.buffer=i,this.cutoff=h,this.radius=l;let C=this.size=m+4*i,T=this._createCanvas(C),P=this.ctx=T.getContext("2d",{willReadFrequently:!0});P.font=`${v} ${g} ${m}px ${p}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(m){let i=document.createElement("canvas");return i.width=i.height=m,i}draw(m){let{width:i,actualBoundingBoxAscent:l,actualBoundingBoxDescent:h,actualBoundingBoxLeft:p,actualBoundingBoxRight:g}=this.ctx.measureText(m),v=Math.ceil(l),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-p))),T=Math.min(this.size-this.buffer,v+Math.ceil(h)),P=C+2*this.buffer,O=T+2*this.buffer,F=Math.max(P*O,0),N=new Uint8ClampedArray(F),X={data:N,width:P,height:O,glyphWidth:C,glyphHeight:T,glyphTop:v,glyphLeft:0,glyphAdvance:i};if(C===0||T===0)return X;let{ctx:J,buffer:ge,gridInner:me,gridOuter:_e}=this;J.clearRect(ge,ge,C,T),J.fillText(m,ge,ge+v);let xe=J.getImageData(ge,ge,C,T);_e.fill(Qe,0,F),me.fill(0,0,F);for(let Me=0;Me<T;Me++)for(let Te=0;Te<C;Te++){let ke=xe.data[4*(Me*C+Te)+3]/255;if(ke===0)continue;let Fe=(Me+ge)*P+Te+ge;if(ke===1)_e[Fe]=0,me[Fe]=Qe;else{let De=.5-ke;_e[Fe]=De>0?De*De:0,me[Fe]=De<0?De*De:0}}ve(_e,0,0,P,O,P,this.f,this.v,this.z),ve(me,ge,ge,C,T,P,this.f,this.v,this.z);for(let Me=0;Me<F;Me++){let Te=Math.sqrt(_e[Me])-Math.sqrt(me[Me]);N[Me]=Math.round(255-255*(Te/this.radius+this.cutoff))}return X}};class ae{constructor(){this.specification=s.v.light.position}possiblyEvaluate(i,l){return s.z(i.expression.evaluate(l))}interpolate(i,l,h){return{x:s.B.number(i.x,l.x,h),y:s.B.number(i.y,l.y,h),z:s.B.number(i.z,l.z,h)}}}let ee;class B extends s.E{constructor(i){super(),ee=ee||new s.r({anchor:new s.D(s.v.light.anchor),position:new ae,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(ee),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,l={}){if(!this._validate(s.t,i,l))for(let h in i){let p=i[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),p):this._transitionable.setValue(h,p)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,l,h){return(!h||h.validate!==!1)&&s.x(this,i.call(s.y,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}let fe=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class Ue extends s.E{constructor(i){super(),this._transitionable=new s.T(fe),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0))}setSky(i,l={}){if(!this._validate(s.F,i,l)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let h in i){let p=i[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),p):this._transitionable.setValue(h,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,l,h={}){return h?.validate!==!1&&s.x(this,i.call(s.y,s.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class ot{constructor(i,l){this.width=i,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,l){let h=i.join(",")+String(l);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(i,l)),this.dashEntry[h]}getDashRanges(i,l,h){let p=[],g=i.length%2==1?-i[i.length-1]*h:0,v=i[0]*h,C=!0;p.push({left:g,right:v,isDash:C,zeroLength:i[0]===0});let T=i[0];for(let P=1;P<i.length;P++){C=!C;let O=i[P];g=T*h,T+=O,v=T*h,p.push({left:g,right:v,isDash:C,zeroLength:O===0})}return p}addRoundDash(i,l,h){let p=l/2;for(let g=-h;g<=h;g++){let v=this.width*(this.nextRow+h+g),C=0,T=i[C];for(let P=0;P<this.width;P++){P/T.right>1&&(T=i[++C]);let O=Math.abs(P-T.left),F=Math.abs(P-T.right),N=Math.min(O,F),X,J=g/h*(p+1);if(T.isDash){let ge=p-Math.abs(J);X=Math.sqrt(N*N+ge*ge)}else X=p-Math.sqrt(N*N+J*J);this.data[v+P]=Math.max(0,Math.min(255,X+128))}}}addRegularDash(i){for(let C=i.length-1;C>=0;--C){let T=i[C],P=i[C+1];T.zeroLength?i.splice(C,1):P&&P.isDash===T.isDash&&(P.left=T.left,i.splice(C,1))}let l=i[0],h=i[i.length-1];l.isDash===h.isDash&&(l.left=h.left-this.width,h.right=l.right+this.width);let p=this.width*this.nextRow,g=0,v=i[g];for(let C=0;C<this.width;C++){C/v.right>1&&(v=i[++g]);let T=Math.abs(C-v.left),P=Math.abs(C-v.right),O=Math.min(T,P);this.data[p+C]=Math.max(0,Math.min(255,(v.isDash?O:-O)+128))}}addDash(i,l){let h=l?7:0,p=2*h+1;if(this.nextRow+p>this.height)return s.w("LineAtlas out of space"),null;let g=0;for(let C=0;C<i.length;C++)g+=i[C];if(g!==0){let C=this.width/g,T=this.getDashRanges(i,this.width,C);l?this.addRoundDash(T,C,h):this.addRegularDash(T)}let v={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:g};return this.nextRow+=p,this.dirty=!0,v}bind(i){let l=i.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}let Pt="maplibre_preloaded_worker_pool";class Bt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Bt.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Pt]}numActive(){return Object.keys(this.active).length}}let Di=Math.floor(I.hardwareConcurrency/2),Ie,Le;function kt(){return Ie||(Ie=new Bt),Ie}Bt.workerCount=s.G(globalThis)?Math.max(Math.min(Di,3),1):1;class ai{constructor(i,l){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=l;let h=this.workerPool.acquire(l);for(let p=0;p<h.length;p++){let g=new s.H(h[p],l);g.name=`Worker ${p}`,this.actors.push(g)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,l){let h=[];for(let p of this.actors)h.push(p.sendAsync({type:i,data:l}));return Promise.all(h)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,l){for(let h of this.actors)h.registerMessageHandler(i,l)}}function Ur(){return Le||(Le=new ai(kt(),s.J),Le.registerMessageHandler("GR",(m,i,l)=>s.m(i,l))),Le}function Ro(m,i){let l=s.K();return s.L(l,l,[1,1,0]),s.M(l,l,[.5*m.width,.5*m.height,1]),m.calculatePosMatrix?s.N(l,l,m.calculatePosMatrix(i.toUnwrapped())):l}function ba(m,i,l,h,p,g,v){var C;let T=function(N,X,J){if(N)for(let ge of N){let me=X[ge];if(me&&me.source===J&&me.type==="fill-extrusion")return!0}else for(let ge in X){let me=X[ge];if(me.source===J&&me.type==="fill-extrusion")return!0}return!1}((C=p?.layers)!==null&&C!==void 0?C:null,i,m.id),P=g.maxPitchScaleFactor(),O=m.tilesIn(h,P,T);O.sort(Pn);let F=[];for(let N of O)F.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(i,l,m._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,p,g,P,Ro(m.transform,N.tileID),v?(X,J)=>v(N.tileID,X,J):void 0)});return function(N,X){for(let J in N)for(let ge of N[J])Dn(ge,X);return N}(function(N){let X={},J={};for(let ge of N){let me=ge.queryResults,_e=ge.wrappedTileID,xe=J[_e]=J[_e]||{};for(let Me in me){let Te=me[Me],ke=xe[Me]=xe[Me]||{},Fe=X[Me]=X[Me]||[];for(let De of Te)ke[De.featureIndex]||(ke[De.featureIndex]=!0,Fe.push(De))}}return X}(F),m)}function Pn(m,i){let l=m.tileID,h=i.tileID;return l.overscaledZ-h.overscaledZ||l.canonical.y-h.canonical.y||l.wrap-h.wrap||l.canonical.x-h.canonical.x}function Dn(m,i){let l=m.feature,h=i.getFeatureState(l.layer["source-layer"],l.id);l.source=l.layer.source,l.layer["source-layer"]&&(l.sourceLayer=l.layer["source-layer"]),l.state=h}function Ar(m,i,l){return s._(this,void 0,void 0,function*(){let h=m;if(m.url?h=(yield s.j(i.transformRequest(m.url,"Source"),l)).data:yield I.frameAsync(l),!h)return null;let p=s.O(s.e(h,m),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in h&&h.vector_layers&&(p.vectorLayerIds=h.vector_layers.map(g=>g.id)),p})}class Ki{constructor(i,l){i&&(l?this.setSouthWest(i).setNorthEast(l):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof s.Q?new s.Q(i.lng,i.lat):s.Q.convert(i),this}setSouthWest(i){return this._sw=i instanceof s.Q?new s.Q(i.lng,i.lat):s.Q.convert(i),this}extend(i){let l=this._sw,h=this._ne,p,g;if(i instanceof s.Q)p=i,g=i;else{if(!(i instanceof Ki))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Ki.convert(i)):this.extend(s.Q.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(s.Q.convert(i)):this;if(p=i._sw,g=i._ne,!p||!g)return this}return l||h?(l.lng=Math.min(p.lng,l.lng),l.lat=Math.min(p.lat,l.lat),h.lng=Math.max(g.lng,h.lng),h.lat=Math.max(g.lat,h.lat)):(this._sw=new s.Q(p.lng,p.lat),this._ne=new s.Q(g.lng,g.lat)),this}getCenter(){return new s.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.Q(this.getWest(),this.getNorth())}getSouthEast(){return new s.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){let{lng:l,lat:h}=s.Q.convert(i),p=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(i){return i instanceof Ki?i:i&&new Ki(i)}static fromLngLat(i,l=0){let h=360*l/40075017,p=h/Math.cos(Math.PI/180*i.lat);return new Ki(new s.Q(i.lng-p,i.lat-h),new s.Q(i.lng+p,i.lat+h))}adjustAntiMeridian(){let i=new s.Q(this._sw.lng,this._sw.lat),l=new s.Q(this._ne.lng,this._ne.lat);return new Ki(i,i.lng>l.lng?new s.Q(l.lng+360,l.lat):l)}}class Jn{constructor(i,l,h){this.bounds=Ki.convert(this.validateBounds(i)),this.minzoom=l||0,this.maxzoom=h||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){let l=Math.pow(2,i.z),h=Math.floor(s.U(this.bounds.getWest())*l),p=Math.floor(s.S(this.bounds.getNorth())*l),g=Math.ceil(s.U(this.bounds.getEast())*l),v=Math.ceil(s.S(this.bounds.getSouth())*l);return i.x>=h&&i.x<g&&i.y>=p&&i.y<v}}class Vs extends s.E{constructor(i,l,h,p){if(super(),this.id=i,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.O(l,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let i=yield Ar(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(s.e(this,i),i.bounds&&(this.tileBounds=new Jn(i.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new s.k(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(i){return s._(this,void 0,void 0,function*(){let l=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h={request:this.map._requestManager.transformRequest(l,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};h.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((g,v)=>{i.reloadPromise={resolve:g,reject:v}})}else i.actor=this.dispatcher.getActor(),p="LT";i.abortController=new AbortController;try{let g=yield i.actor.sendAsync({type:p,data:h},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,g)}catch(g){if(delete i.abortController,i.aborted)return;if(g&&g.status!==404)throw g;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,l){if(l&&l.resourceTiming&&(i.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&i.setExpiryData(l),i.loadVectorData(l,this.map.painter),i.reloadPromise){let h=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(h.resolve).catch(h.reject)}}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class eo extends s.E{constructor(i,l,h,p){super(),this.id=i,this.dispatcher=h,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},l),s.e(this,s.O(l,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,function*(i=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let l=yield Ar(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,l&&(s.e(this,l),l.bounds&&(this.tileBounds=new Jn(l.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:i})))}catch(l){this._tileJSONRequest=null,this.fire(new s.k(l))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load(!0)}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return s.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return s._(this,void 0,void 0,function*(){let l=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{let h=yield ne.getImage(this.map._requestManager.transformRequest(l,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(h&&h.data){this.map._refreshExpiredTiles&&(h.cacheControl||h.expires)&&i.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});let p=this.map.painter.context,g=p.gl,v=h.data;i.texture=this.map.painter.getTileTexture(v.width),i.texture?i.texture.update(v,{useMipmap:!0}):(i.texture=new Ve(p,v,g.RGBA,{useMipmap:!0}),i.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(h){if(delete i.abortController,i.aborted)i.state="unloaded";else if(h)throw i.state="errored",h}})}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class Tl extends eo{constructor(i,l,h,p){super(i,l,h,p),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(i){return s._(this,void 0,void 0,function*(){let l=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h=this.map._requestManager.transformRequest(l,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{let p=yield ne.getImage(h,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(p&&p.data){let g=p.data;this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&i.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});let v=s.b(g)&&s.V()?g:yield this.readImageNow(g),C={type:this.type,uid:i.uid,source:this.id,rawImageData:v,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();let T=yield i.actor.sendAsync({type:"LDT",data:C});i.dem=T,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(p){if(delete i.abortController,i.aborted)i.state="unloaded";else if(p)throw i.state="errored",p}})}readImageNow(i){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.W()){let l=i.width+2,h=i.height+2;try{return new s.R({width:l,height:h},yield s.X(i,-1,-1,l,h))}catch{}}return I.getImageData(i,1)})}_getNeighboringTiles(i){let l=i.canonical,h=Math.pow(2,l.z),p=(l.x-1+h)%h,g=l.x===0?i.wrap-1:i.wrap,v=(l.x+1+h)%h,C=l.x+1===h?i.wrap+1:i.wrap,T={};return T[new s.Y(i.overscaledZ,g,l.z,p,l.y).key]={backfilled:!1},T[new s.Y(i.overscaledZ,C,l.z,v,l.y).key]={backfilled:!1},l.y>0&&(T[new s.Y(i.overscaledZ,g,l.z,p,l.y-1).key]={backfilled:!1},T[new s.Y(i.overscaledZ,i.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},T[new s.Y(i.overscaledZ,C,l.z,v,l.y-1).key]={backfilled:!1}),l.y+1<h&&(T[new s.Y(i.overscaledZ,g,l.z,p,l.y+1).key]={backfilled:!1},T[new s.Y(i.overscaledZ,i.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},T[new s.Y(i.overscaledZ,C,l.z,v,l.y+1).key]={backfilled:!1}),T}unloadTile(i){return s._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class Ya extends s.E{constructor(i,l,h,p){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(p),this._data=l.data,this._options=s.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId,l.clusterMaxZoom!==void 0&&this.maxzoom<=l.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${l.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(l.buffer!==void 0?l.buffer:128),tolerance:this._pixelsToTileUnits(l.tolerance!==void 0?l.tolerance:.375),extent:s.Z,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:s.Z,radius:this._pixelsToTileUnits(l.clusterRadius||50),log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(i){return i*(s.Z/this.tileSize)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return s._(this,void 0,void 0,function*(){let i=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})})}getCoordinatesFromGeometry(i){return i.type==="GeometryCollection"?i.geometries.map(l=>l.coordinates).flat(1/0):i.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,function*(){let i=new Ki,l=yield this.getData(),h;switch(l.type){case"FeatureCollection":h=l.features.map(p=>this.getCoordinatesFromGeometry(p.geometry)).flat(1/0);break;case"Feature":h=this.getCoordinatesFromGeometry(l.geometry);break;default:h=this.getCoordinatesFromGeometry(l)}if(h.length==0)return i;for(let p=0;p<h.length-1;p+=2)i.extend([h[p],h[p+1]]);return i})}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(i.clusterRadius)),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,l,h){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:l,offset:h}})}_updateWorkerData(i){return s._(this,void 0,void 0,function*(){let l=s.e({type:this.type},this.workerOptions);i?l.dataDiff=i:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(I.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.l("dataloading",{dataType:"source"}));try{let h=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||h.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));let p=null;h.resourceTiming&&h.resourceTiming[this.id]&&(p=h.resourceTiming[this.id].slice(0));let g={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&s.e(g,{resourceTiming:p}),this.fire(new s.l("data",Object.assign(Object.assign({},g),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},g),{sourceDataType:"content"})))}catch(h){if(this._pendingLoads--,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(h))}})}loaded(){return this._pendingLoads===0}loadTile(i){return s._(this,void 0,void 0,function*(){let l=i.actor?"RT":"LT";i.actor=this.actor;let h={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};i.abortController=new AbortController;let p=yield this.actor.sendAsync({type:l,data:h},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(p,this.map.painter,l==="RT")})}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class qn extends s.E{constructor(i,l,h,p){super(),this.flippedWindingOrder=!1,this.id=i,this.dispatcher=h,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=l}load(i){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let l=yield ne.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,i&&(this.coordinates=i),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new s.k(l))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;let l=i.map(s.$.fromLngLat);var h;return this.tileID=function(p){let g=1/0,v=1/0,C=-1/0,T=-1/0;for(let N of p)g=Math.min(g,N.x),v=Math.min(v,N.y),C=Math.max(C,N.x),T=Math.max(T,N.y);let P=Math.max(C-g,T-v),O=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),F=Math.pow(2,O);return new s.a1(O,Math.floor((g+C)/2*F),Math.floor((v+T)/2*F))}(l),this.terrainTileRanges=this._getOverlappingTileRanges(l),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=l.map(p=>this.tileID.getTilePoint(p)._round()),this.flippedWindingOrder=((h=this.tileCoords)[1].x-h[0].x)*(h[2].y-h[0].y)-(h[1].y-h[0].y)*(h[2].x-h[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let i=this.map.painter.context,l=i.gl;this.texture||(this.texture=new Ve(i,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let h=!1;for(let p in this.tiles){let g=this.tiles[p];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,h=!0)}h&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(i){let l=1/0,h=1/0,p=-1/0,g=-1/0;for(let C of i)l=Math.min(l,C.x),h=Math.min(h,C.y),p=Math.max(p,C.x),g=Math.max(g,C.y);let v={};for(let C=0;C<=s.a0;C++){let T=Math.pow(2,C),P=Math.floor(l*T),O=Math.floor(h*T),F=Math.floor(p*T),N=Math.floor(g*T);v[C]={minTileX:P,minTileY:O,maxTileX:F,maxTileY:N}}return v}}class to extends qn{constructor(i,l,h,p){super(i,l,h,p),this.roundZoom=!0,this.type="video",this.options=l}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;let i=this.options;this.urls=[];for(let l of i.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{let l=yield s.a2(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new s.k(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){let l=this.video.seekable;i<l.start(0)||i>l.end(0)?this.fire(new s.k(new s.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let i=this.map.painter.context,l=i.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new Ve(i,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let h=!1;for(let p in this.tiles){let g=this.tiles[p];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,h=!0)}h&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ps extends qn{constructor(i,l,h,p){super(i,l,h,p),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(g=>!Array.isArray(g)||g.length!==2||g.some(v=>typeof v!="number"))||this.fire(new s.k(new s.a3(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a3(`sources.${i}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new s.k(new s.a3(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a3(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a3(`sources.${i}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let l=this.map.painter.context,h=l.gl;this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ve(l,this.canvas,h.RGBA,{premultiply:!0});let p=!1;for(let g in this.tiles){let v=this.tiles[g];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,p=!0)}p&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}let ya={},Rn=m=>{switch(m){case"geojson":return Ya;case"image":return qn;case"raster":return eo;case"raster-dem":return Tl;case"vector":return Vs;case"video":return to;case"canvas":return ps}return ya[m]},fs="RTLPluginLoaded";class Nr extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ur()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return s._(this,arguments,void 0,function*(l,h=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=I.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!h)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(fs))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ka=null;function Li(){return Ka||(Ka=new Nr),Ka}class Yo{constructor(i,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=s.a4(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){let l=i+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,l,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(p,g){let v={};if(!g)return v;for(let C of p){let T=C.layerIds.map(P=>g.getLayer(P)).filter(Boolean);if(T.length!==0){C.layers=T,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(P=>T.filter(O=>O.id===P)[0]));for(let P of T)v[P.id]=C}}return v}(i.buckets,l?.style),this.hasSymbolBuckets=!1;for(let p in this.buckets){let g=this.buckets[p];if(g instanceof s.a6){if(this.hasSymbolBuckets=!0,!h)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let p in this.buckets){let g=this.buckets[p];if(g instanceof s.a6&&g.hasRTLText){this.hasRTLText=!0,Li().lazyLoad();break}}this.queryPadding=0;for(let p in this.buckets){let g=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(p).queryRadius(g))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(let i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(let h in this.buckets){let p=this.buckets[h];p.uploadPending()&&p.upload(i)}let l=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ve(i,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ve(i,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,l,h,p,g,v,C,T,P,O,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:g,scale:v,tileSize:this.tileSize,pixelPosMatrix:O,transform:T,params:C,queryPadding:this.queryPadding*P,getElevation:F},i,l,h):{}}querySourceFeatures(i,l){let h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;let p=h.loadVTLayers(),g=l&&l.sourceLayer?l.sourceLayer:"",v=p._geojsonTileLayer||p[g];if(!v)return;let C=s.a7(l&&l.filter),{z:T,x:P,y:O}=this.tileID.canonical,F={z:T,x:P,y:O};for(let N=0;N<v.length;N++){let X=v.feature(N);if(C.needGeometry){let me=s.a8(X,!0);if(!C.filter(new s.C(this.tileID.overscaledZ),me,this.tileID.canonical))continue}else if(!C.filter(new s.C(this.tileID.overscaledZ),X))continue;let J=h.getId(X,g),ge=new s.a9(X,T,P,O,J);ge.tile=F,i.push(ge)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){let l=this.expirationTime;if(i.cacheControl){let h=s.aa(i.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){let h=Date.now(),p=!1;if(this.expirationTime>h)p=!1;else if(l)if(this.expirationTime<l)p=!0;else{let g=this.expirationTime-l;g?this.expirationTime=h+Math.max(g,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;let h=this.latestFeatureIndex.loadVTLayers();for(let p in this.buckets){if(!l.style.hasLayer(p))continue;let g=this.buckets[p],v=g.layers[0].sourceLayer||"_geojsonTileLayer",C=h[v],T=i[v];if(!C||!T||Object.keys(T).length===0)continue;g.update(T,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});let P=l&&l.style&&l.style.getLayer(p);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(g)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<I.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=I.now()+i}setDependencies(i,l){let h={};for(let p of l)h[p]=!0;this.dependencies[i]=h}hasDependency(i,l){for(let h of i){let p=this.dependencies[h];if(p){for(let g of l)if(p[g])return!0}}return!1}}class ms{constructor(i,l){this.max=i,this.onRemove=l,this.reset()}reset(){for(let i in this.data)for(let l of this.data[i])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(i,l,h){let p=i.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);let g={value:l,timeout:void 0};if(h!==void 0&&(g.timeout=setTimeout(()=>{this.remove(i,g)},h)),this.data[p].push(g),this.order.push(p),this.order.length>this.max){let v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){let l=this.data[i].shift();return l.timeout&&clearTimeout(l.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),l.value}getByKey(i){let l=this.data[i];return l?l[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,l){if(!this.has(i))return this;let h=i.wrapped().key,p=l===void 0?0:this.data[h].indexOf(l),g=this.data[h][p];return this.data[h].splice(p,1),g.timeout&&clearTimeout(g.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(g.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){let l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(i){let l=[];for(let h in this.data)for(let p of this.data[h])i(p.value)||l.push(p);for(let h of l)this.remove(h.value.tileID,h)}}class Qa{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,l,h){let p=String(l);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][p]=this.stateChanges[i][p]||{},s.e(this.stateChanges[i][p],h),this.deletedStates[i]===null){this.deletedStates[i]={};for(let g in this.state[i])g!==p&&(this.deletedStates[i][g]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][p]===null){this.deletedStates[i][p]={};for(let g in this.state[i][p])h[g]||(this.deletedStates[i][p][g]=null)}else for(let g in h)this.deletedStates[i]&&this.deletedStates[i][p]&&this.deletedStates[i][p][g]===null&&delete this.deletedStates[i][p][g]}removeFeatureState(i,l,h){if(this.deletedStates[i]===null)return;let p=String(l);if(this.deletedStates[i]=this.deletedStates[i]||{},h&&l!==void 0)this.deletedStates[i][p]!==null&&(this.deletedStates[i][p]=this.deletedStates[i][p]||{},this.deletedStates[i][p][h]=null);else if(l!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][p])for(h in this.deletedStates[i][p]={},this.stateChanges[i][p])this.deletedStates[i][p][h]=null;else this.deletedStates[i][p]=null;else this.deletedStates[i]=null}getState(i,l){let h=String(l),p=s.e({},(this.state[i]||{})[h],(this.stateChanges[i]||{})[h]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){let g=this.deletedStates[i][l];if(g===null)return{};for(let v in g)delete p[v]}return p}initializeTileState(i,l){i.setFeatureState(this.state,l)}coalesceChanges(i,l){let h={};for(let p in this.stateChanges){this.state[p]=this.state[p]||{};let g={};for(let v in this.stateChanges[p])this.state[p][v]||(this.state[p][v]={}),s.e(this.state[p][v],this.stateChanges[p][v]),g[v]=this.state[p][v];h[p]=g}for(let p in this.deletedStates){this.state[p]=this.state[p]||{};let g={};if(this.deletedStates[p]===null)for(let v in this.state[p])g[v]={},this.state[p][v]={};else for(let v in this.deletedStates[p]){if(this.deletedStates[p][v]===null)this.state[p][v]={};else for(let C of Object.keys(this.deletedStates[p][v]))delete this.state[p][v][C];g[v]=this.state[p][v]}h[p]=h[p]||{},s.e(h[p],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(let p in i)i[p].setFeatureState(h,l)}}let io=89.25;function On(m,i){let l=s.ae(i.lat,-85.051129,s.af);return new s.P(s.U(i.lng)*m,s.S(l)*m)}function yo(m,i){return new s.$(i.x/m,i.y/m).toLngLat()}function qe(m){return m.cameraToCenterDistance*Math.min(.85*Math.tan(s.ab(90-m.pitch)),Math.tan(s.ab(io-m.pitch)))}function Q(m,i){let l=m.canonical,h=i/s.ac(l.z),p=l.x+Math.pow(2,l.z)*m.wrap,g=s.ad(new Float64Array(16));return s.L(g,g,[p*h,l.y*h,0]),s.M(g,g,[h/s.Z,h/s.Z,1]),g}function U(m,i,l,h,p){let g=s.$.fromLngLat(m,i),v=p*s.ag(1,m.lat),C=v*Math.cos(s.ab(l)),T=Math.sqrt(v*v-C*C),P=T*Math.sin(s.ab(-h)),O=T*Math.cos(s.ab(-h));return new s.$(g.x+P,g.y+O,g.z+C)}function Y(m,i,l){let h=i.intersectsFrustum(m);if(!l)return h;let p=i.intersectsPlane(l);return h===0||p===0?0:h===2&&p===2?2:1}function he(m,i,l){let h=0,p=(l-i)/10;for(let g=0;g<10;g++)h+=p*Math.pow(Math.cos(i+(g+.5)/10*(l-i)),m);return h}function ye(m,i){return function(l,h,p,g,v){let C=2*((m-1)/s.ah(Math.cos(s.ab(io-v))/Math.cos(s.ab(io)))-1),T=Math.acos(p/g),P=2*he(C-1,0,s.ab(v/2)),O=Math.min(s.ab(io),T+s.ab(v/2)),F=he(C-1,Math.min(O,T-s.ab(v/2)),O),N=Math.atan(h/p),X=Math.hypot(h,p),J=l;return J+=s.ah(g/X/Math.max(.5,Math.cos(s.ab(v/2)))),J+=C*s.ah(Math.cos(N))/2,J-=s.ah(Math.max(1,F/P/i))/2,J}}let se=ye(9.314,3);function Pe(m,i){let l=(i.roundZoom?Math.round:Math.floor)(m.zoom+s.ah(m.tileSize/i.tileSize));return Math.max(0,l)}function ze(m,i){let l=m.getCameraFrustum(),h=m.getClippingPlane(),p=m.screenPointToMercatorCoordinate(m.getCameraPoint()),g=s.$.fromLngLat(m.center,m.elevation);p.z=g.z+Math.cos(m.pitchInRadians)*m.cameraToCenterDistance/m.worldSize;let v=m.getCoveringTilesDetailsProvider(),C=v.allowVariableZoom(m,i),T=Pe(m,i),P=i.minzoom||0,O=i.maxzoom!==void 0?i.maxzoom:m.maxZoom,F=Math.min(Math.max(0,T),O),N=Math.pow(2,F),X=[N*p.x,N*p.y,0],J=[N*g.x,N*g.y,0],ge=Math.hypot(g.x-p.x,g.y-p.y),me=Math.abs(g.z-p.z),_e=Math.hypot(ge,me),xe=ke=>({zoom:0,x:0,y:0,wrap:ke,fullyVisible:!1}),Me=[],Te=[];if(m.renderWorldCopies&&v.allowWorldCopies())for(let ke=1;ke<=3;ke++)Me.push(xe(-ke)),Me.push(xe(ke));for(Me.push(xe(0));Me.length>0;){let ke=Me.pop(),Fe=ke.x,De=ke.y,We=ke.fullyVisible,lt={x:Fe,y:De,z:ke.zoom},et=v.getTileAABB(lt,ke.wrap,m.elevation,i);if(!We){let Et=Y(l,et,h);if(Et===0)continue;We=Et===2}let rt=v.distanceToTile2d(p.x,p.y,lt,et),st=T;C&&(st=(i.calculateTileZoom||se)(m.zoom+s.ah(m.tileSize/i.tileSize),rt,me,_e,m.fov)),st=(i.roundZoom?Math.round:Math.floor)(st),st=Math.max(0,st);let Mt=Math.min(st,O);if(ke.wrap=v.getWrap(g,lt,ke.wrap),ke.zoom>=Mt){if(ke.zoom<P)continue;let Et=F-ke.zoom,_t=X[0]-.5-(Fe<<Et),qt=X[1]-.5-(De<<Et),xi=i.reparseOverscaled?Math.max(ke.zoom,st):ke.zoom;Te.push({tileID:new s.Y(ke.zoom===O?xi:ke.zoom,ke.wrap,ke.zoom,Fe,De),distanceSq:s.ai([J[0]-.5-Fe,J[1]-.5-De]),tileDistanceToCamera:Math.sqrt(_t*_t+qt*qt)})}else for(let Et=0;Et<4;Et++)Me.push({zoom:ke.zoom+1,x:(Fe<<1)+Et%2,y:(De<<1)+(Et>>1),wrap:ke.wrap,fullyVisible:We})}return Te.sort((ke,Fe)=>ke.distanceSq-Fe.distanceSq).map(ke=>ke.tileID)}class He extends s.E{constructor(i,l,h){super(),this.id=i,this.dispatcher=h,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,g,v,C)=>{let T=new(Rn(g.type))(p,g,v,C);if(T.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${T.id}`);return T})(i,l,h,this),this._tiles={},this._cache=new ms(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Qa,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let i in this._tiles){let l=this._tiles[i];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,l,h){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,l,h)}catch(p){i.state="errored",p.status!==404?this._source.fire(new s.k(p,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new s.l("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let l in this._tiles){let h=this._tiles[l];h.upload(i),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Xe).map(i=>i.key)}getRenderableIds(i){let l=[];for(let h in this._tiles)this._isIdRenderable(h,i)&&l.push(this._tiles[h]);return i?l.sort((h,p)=>{let g=h.tileID,v=p.tileID,C=new s.P(g.canonical.x,g.canonical.y)._rotate(-this.transform.bearingInRadians),T=new s.P(v.canonical.x,v.canonical.y)._rotate(-this.transform.bearingInRadians);return g.overscaledZ-v.overscaledZ||T.y-C.y||T.x-C.x}).map(h=>h.tileID.key):l.map(h=>h.tileID).sort(Xe).map(h=>h.key)}hasRenderableParent(i){let l=this.findLoadedParent(i,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(i,l){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(l||!this._tiles[i].holdingForFade())}reload(i){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let l in this._tiles)(i||this._tiles[l].state!=="errored")&&this._reloadTile(l,"reloading")}}_reloadTile(i,l){return s._(this,void 0,void 0,function*(){let h=this._tiles[i];h&&(h.state!=="loading"&&(h.state=l),yield this._loadTile(h,i,l))})}_tileLoaded(i,l,h){i.timeAdded=I.now(),h==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(l,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){let l=this.getRenderableIds();for(let p=0;p<l.length;p++){let g=l[p];if(i.neighboringTiles&&i.neighboringTiles[g]){let v=this.getTileByID(g);h(i,v),h(v,i)}}function h(p,g){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let v=g.tileID.canonical.x-p.tileID.canonical.x,C=g.tileID.canonical.y-p.tileID.canonical.y,T=Math.pow(2,p.tileID.canonical.z),P=g.tileID.key;v===0&&C===0||Math.abs(C)>1||(Math.abs(v)>1&&(Math.abs(v+T)===1?v+=T:Math.abs(v-T)===1&&(v-=T)),g.dem&&p.dem&&(p.dem.backfillBorder(g.dem,v,C),p.neighboringTiles&&p.neighboringTiles[P]&&(p.neighboringTiles[P].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,l,h,p){for(let g in this._tiles){let v=this._tiles[g];if(p[g]||!v.hasData()||v.tileID.overscaledZ<=l||v.tileID.overscaledZ>h)continue;let C=v.tileID;for(;v&&v.tileID.overscaledZ>l+1;){let P=v.tileID.scaledTo(v.tileID.overscaledZ-1);v=this._tiles[P.key],v&&v.hasData()&&(C=P)}let T=C;for(;T.overscaledZ>l;)if(T=T.scaledTo(T.overscaledZ-1),i[T.key]||i[T.canonical.key]){p[C.key]=C;break}}}findLoadedParent(i,l){if(i.key in this._loadedParentTiles){let h=this._loadedParentTiles[i.key];return h&&h.tileID.overscaledZ>=l?h:null}for(let h=i.overscaledZ-1;h>=l;h--){let p=i.scaledTo(h),g=this._getLoadedTile(p);if(g)return g}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){let l=this._tiles[i.key];return l&&l.hasData()?l:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){let l=Math.ceil(i.width/this._source.tileSize)+1,h=Math.ceil(i.height/this._source.tileSize)+1,p=Math.floor(l*h*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),g=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(g)}handleWrapJump(i){let l=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,l){let h={};for(let p in this._tiles){let g=this._tiles[p];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+l),h[g.tileID.key]=g}this._tiles=h;for(let p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(let p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(i,l,h,p,g,v){let C={},T={},P=Object.keys(i),O=I.now();for(let F of P){let N=i[F],X=this._tiles[F];if(!X||X.fadeEndTime!==0&&X.fadeEndTime<=O)continue;let J=this.findLoadedParent(N,l),ge=this.findLoadedSibling(N),me=J||ge||null;me&&(this._addTile(me.tileID),C[me.tileID.key]=me.tileID),T[F]=N}this._retainLoadedChildren(T,p,h,i);for(let F in C)i[F]||(this._coveredTiles[F]=!0,i[F]=C[F]);if(v){let F={},N={};for(let X of g)this._tiles[X.key].hasData()?F[X.key]=X:N[X.key]=X;for(let X in N){let J=N[X].children(this._source.maxzoom);this._tiles[J[0].key]&&this._tiles[J[1].key]&&this._tiles[J[2].key]&&this._tiles[J[3].key]&&(F[J[0].key]=i[J[0].key]=J[0],F[J[1].key]=i[J[1].key]=J[1],F[J[2].key]=i[J[2].key]=J[2],F[J[3].key]=i[J[3].key]=J[3],delete N[X])}for(let X in N){let J=N[X],ge=this.findLoadedParent(J,this._source.minzoom),me=this.findLoadedSibling(J),_e=ge||me||null;if(_e){F[_e.tileID.key]=i[_e.tileID.key]=_e.tileID;for(let xe in F)F[xe].isChildOf(_e.tileID)&&delete F[xe]}}for(let X in this._tiles)F[X]||(this._coveredTiles[X]=!0)}}update(i,l){if(!this._sourceLoaded||this._paused)return;let h;this.transform=i,this.terrain=l,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new s.Y(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(h=ze(i,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(h=h.filter(O=>this._source.hasTile(O)))):h=[];let p=Pe(i,this._source),g=Math.max(p-He.maxOverzooming,this._source.minzoom),v=Math.max(p+He.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let O={};for(let F of h)if(F.canonical.z>this._source.minzoom){let N=F.scaledTo(F.canonical.z-1);O[N.key]=N;let X=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));O[X.key]=X}h=h.concat(Object.values(O))}let C=h.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let T=this._updateRetainedTiles(h,p);je(this._source.type)&&this._updateCoveredAndRetainedTiles(T,g,v,p,h,l);for(let O in T)this._tiles[O].clearFadeHold();let P=s.aj(this._tiles,T);for(let O of P){let F=this._tiles[O];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,l){var h;let p={},g={},v=Math.max(l-He.maxOverzooming,this._source.minzoom),C=Math.max(l+He.maxUnderzooming,this._source.minzoom),T={};for(let P of i){let O=this._addTile(P);p[P.key]=P,O.hasData()||l<this._source.maxzoom&&(T[P.key]=P)}this._retainLoadedChildren(T,l,C,p);for(let P of i){let O=this._tiles[P.key];if(O.hasData())continue;if(l+1>this._source.maxzoom){let N=P.children(this._source.maxzoom)[0],X=this.getTile(N);if(X&&X.hasData()){p[N.key]=N;continue}}else{let N=P.children(this._source.maxzoom);if(p[N[0].key]&&p[N[1].key]&&p[N[2].key]&&p[N[3].key])continue}let F=O.wasRequested();for(let N=P.overscaledZ-1;N>=v;--N){let X=P.scaledTo(N);if(g[X.key])break;if(g[X.key]=!0,O=this.getTile(X),!O&&F&&(O=this._addTile(X)),O){let J=O.hasData();if((J||!(!((h=this.map)===null||h===void 0)&&h.cancelPendingTileRequestsWhileZooming)||F)&&(p[X.key]=X),F=O.wasRequested(),J)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let i in this._tiles){let l=[],h,p=this._tiles[i].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){h=this._loadedParentTiles[p.key];break}l.push(p.key);let g=p.scaledTo(p.overscaledZ-1);if(h=this._getLoadedTile(g),h)break;p=g}for(let g of l)this._loadedParentTiles[g]=h}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let i in this._tiles){let l=this._tiles[i].tileID,h=this._getLoadedTile(l);this._loadedSiblingTiles[l.key]=h}}_addTile(i){let l=this._tiles[i.key];if(l)return l;l=this._cache.getAndRemove(i),l&&(this._setTileReloadTimer(i.key,l),l.tileID=i,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,l)));let h=l;return l||(l=new Yo(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(l,i.key,l.state)),l.uses++,this._tiles[i.key]=l,h||this._source.fire(new s.l("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(i,l){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);let h=l.getExpiryTimeout();h&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},h))}refreshTiles(i){for(let l in this._tiles)this._isIdRenderable(l)&&i.some(h=>h.equals(this._tiles[l].tileID.canonical))&&this._reloadTile(l,"expired")}_removeTile(i){let l=this._tiles[i];l&&(l.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(i){let l=i.sourceDataType;i.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&l==="content"&&(this.reload(i.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,l,h){let p=[],g=this.transform;if(!g)return p;let v=h?g.getCameraQueryGeometry(i):i,C=i.map(J=>g.screenPointToMercatorCoordinate(J,this.terrain)),T=v.map(J=>g.screenPointToMercatorCoordinate(J,this.terrain)),P=this.getIds(),O=1/0,F=1/0,N=-1/0,X=-1/0;for(let J of T)O=Math.min(O,J.x),F=Math.min(F,J.y),N=Math.max(N,J.x),X=Math.max(X,J.y);for(let J=0;J<P.length;J++){let ge=this._tiles[P[J]];if(ge.holdingForFade())continue;let me=g.getCoveringTilesDetailsProvider().allowWorldCopies()?ge.tileID:ge.tileID.unwrapTo(0),_e=Math.pow(2,g.zoom-ge.tileID.overscaledZ),xe=l*ge.queryPadding*s.Z/ge.tileSize/_e,Me=[me.getTilePoint(new s.$(O,F)),me.getTilePoint(new s.$(N,X))];if(Me[0].x-xe<s.Z&&Me[0].y-xe<s.Z&&Me[1].x+xe>=0&&Me[1].y+xe>=0){let Te=C.map(Fe=>me.getTilePoint(Fe)),ke=T.map(Fe=>me.getTilePoint(Fe));p.push({tile:ge,tileID:me,queryGeometry:Te,cameraQueryGeometry:ke,scale:_e})}}return p}getVisibleCoordinates(i){let l=this.getRenderableIds(i).map(h=>this._tiles[h].tileID);return this.transform&&this.transform.populateCache(l),l}hasTransition(){if(this._source.hasTransition())return!0;if(je(this._source.type)){let i=I.now();for(let l in this._tiles)if(this._tiles[l].fadeEndTime>=i)return!0}return!1}setFeatureState(i,l,h){this._state.updateState(i=i||"_geojsonTileLayer",l,h)}removeFeatureState(i,l,h){this._state.removeFeatureState(i=i||"_geojsonTileLayer",l,h)}getFeatureState(i,l){return this._state.getState(i=i||"_geojsonTileLayer",l)}setDependencies(i,l,h){let p=this._tiles[i];p&&p.setDependencies(l,h)}reloadTilesForDependencies(i,l){for(let h in this._tiles)this._tiles[h].hasDependency(i,l)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(i,l))}}function Xe(m,i){let l=Math.abs(2*m.wrap)-+(m.wrap<0),h=Math.abs(2*i.wrap)-+(i.wrap<0);return m.overscaledZ-i.overscaledZ||h-l||i.canonical.y-m.canonical.y||i.canonical.x-m.canonical.x}function je(m){return m==="raster"||m==="image"||m==="video"}He.maxOverzooming=10,He.maxUnderzooming=3;class dt{constructor(i,l){this.reset(i,l)}reset(i,l){this.points=i||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.ae(i,0,1);let l=1,h=this._distances[l],p=i*this.paddedLength+this.padding;for(;h<p&&l<this._distances.length;)h=this._distances[++l];let g=l-1,v=this._distances[g],C=h-v,T=C>0?(p-v)/C:0;return this.points[g].mult(1-T).add(this.points[l].mult(T))}}function Ct(m,i){let l=!0;return m==="always"||m!=="never"&&i!=="never"||(l=!1),l}class Tt{constructor(i,l,h){let p=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(i/h),this.yCellCount=Math.ceil(l/h);for(let v=0;v<this.xCellCount*this.yCellCount;v++)p.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=l,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,l,h,p,g){this._forEachCell(l,h,p,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(g)}insertCircle(i,l,h,p){this._forEachCell(l-p,h-p,l+p,h+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(l),this.circles.push(h),this.circles.push(p)}_insertBoxCell(i,l,h,p,g,v){this.boxCells[g].push(v)}_insertCircleCell(i,l,h,p,g,v){this.circleCells[g].push(v)}_query(i,l,h,p,g,v,C){if(h<0||i>this.width||p<0||l>this.height)return[];let T=[];if(i<=0&&l<=0&&this.width<=h&&this.height<=p){if(g)return[{key:null,x1:i,y1:l,x2:h,y2:p}];for(let P=0;P<this.boxKeys.length;P++)T.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){let O=this.circles[3*P],F=this.circles[3*P+1],N=this.circles[3*P+2];T.push({key:this.circleKeys[P],x1:O-N,y1:F-N,x2:O+N,y2:F+N})}}else this._forEachCell(i,l,h,p,this._queryCell,T,{hitTest:g,overlapMode:v,seenUids:{box:{},circle:{}}},C);return T}query(i,l,h,p){return this._query(i,l,h,p,!1,null)}hitTest(i,l,h,p,g,v){return this._query(i,l,h,p,!0,g,v).length>0}hitTestCircle(i,l,h,p,g){let v=i-h,C=i+h,T=l-h,P=l+h;if(C<0||v>this.width||P<0||T>this.height)return!1;let O=[];return this._forEachCell(v,T,C,P,this._queryCellCircle,O,{hitTest:!0,overlapMode:p,circle:{x:i,y:l,radius:h},seenUids:{box:{},circle:{}}},g),O.length>0}_queryCell(i,l,h,p,g,v,C,T){let{seenUids:P,hitTest:O,overlapMode:F}=C,N=this.boxCells[g];if(N!==null){let J=this.bboxes;for(let ge of N)if(!P.box[ge]){P.box[ge]=!0;let me=4*ge,_e=this.boxKeys[ge];if(i<=J[me+2]&&l<=J[me+3]&&h>=J[me+0]&&p>=J[me+1]&&(!T||T(_e))&&(!O||!Ct(F,_e.overlapMode))&&(v.push({key:_e,x1:J[me],y1:J[me+1],x2:J[me+2],y2:J[me+3]}),O))return!0}}let X=this.circleCells[g];if(X!==null){let J=this.circles;for(let ge of X)if(!P.circle[ge]){P.circle[ge]=!0;let me=3*ge,_e=this.circleKeys[ge];if(this._circleAndRectCollide(J[me],J[me+1],J[me+2],i,l,h,p)&&(!T||T(_e))&&(!O||!Ct(F,_e.overlapMode))){let xe=J[me],Me=J[me+1],Te=J[me+2];if(v.push({key:_e,x1:xe-Te,y1:Me-Te,x2:xe+Te,y2:Me+Te}),O)return!0}}}return!1}_queryCellCircle(i,l,h,p,g,v,C,T){let{circle:P,seenUids:O,overlapMode:F}=C,N=this.boxCells[g];if(N!==null){let J=this.bboxes;for(let ge of N)if(!O.box[ge]){O.box[ge]=!0;let me=4*ge,_e=this.boxKeys[ge];if(this._circleAndRectCollide(P.x,P.y,P.radius,J[me+0],J[me+1],J[me+2],J[me+3])&&(!T||T(_e))&&!Ct(F,_e.overlapMode))return v.push(!0),!0}}let X=this.circleCells[g];if(X!==null){let J=this.circles;for(let ge of X)if(!O.circle[ge]){O.circle[ge]=!0;let me=3*ge,_e=this.circleKeys[ge];if(this._circlesCollide(J[me],J[me+1],J[me+2],P.x,P.y,P.radius)&&(!T||T(_e))&&!Ct(F,_e.overlapMode))return v.push(!0),!0}}}_forEachCell(i,l,h,p,g,v,C,T){let P=this._convertToXCellCoord(i),O=this._convertToYCellCoord(l),F=this._convertToXCellCoord(h),N=this._convertToYCellCoord(p);for(let X=P;X<=F;X++)for(let J=O;J<=N;J++)if(g.call(this,i,l,h,p,this.xCellCount*J+X,v,C,T))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,l,h,p,g,v){let C=p-i,T=g-l,P=h+v;return P*P>C*C+T*T}_circleAndRectCollide(i,l,h,p,g,v,C){let T=(v-p)/2,P=Math.abs(i-(p+T));if(P>T+h)return!1;let O=(C-g)/2,F=Math.abs(l-(g+O));if(F>O+h)return!1;if(P<=T||F<=O)return!0;let N=P-T,X=F-O;return N*N+X*X<=h*h}}function Ae(m,i,l){let h=s.K();if(!m){let{vecSouth:F,vecEast:N}=Lt(i),X=w();X[0]=N[0],X[1]=N[1],X[2]=F[0],X[3]=F[1],p=X,(O=(v=(g=X)[0])*(P=g[3])-(T=g[2])*(C=g[1]))&&(p[0]=P*(O=1/O),p[1]=-C*O,p[2]=-T*O,p[3]=v*O),h[0]=X[0],h[1]=X[1],h[4]=X[2],h[5]=X[3]}var p,g,v,C,T,P,O;return s.M(h,h,[1/l,1/l,1]),h}function ni(m,i,l,h){if(m){let p=s.K();if(!i){let{vecSouth:g,vecEast:v}=Lt(l);p[0]=v[0],p[1]=v[1],p[4]=g[0],p[5]=g[1]}return s.M(p,p,[h,h,1]),p}return l.pixelsToClipSpaceMatrix}function Lt(m){let i=Math.cos(m.rollInRadians),l=Math.sin(m.rollInRadians),h=Math.cos(m.pitchInRadians),p=Math.cos(m.bearingInRadians),g=Math.sin(m.bearingInRadians),v=s.ao();v[0]=-p*h*l-g*i,v[1]=-g*h*l+p*i;let C=s.ap(v);C<1e-9?s.aq(v):s.ar(v,v,1/C);let T=s.ao();T[0]=p*h*i-g*l,T[1]=g*h*i+p*l;let P=s.ap(T);return P<1e-9?s.aq(T):s.ar(T,T,1/P),{vecEast:T,vecSouth:v}}function $e(m,i,l,h){let p;h?(p=[m,i,h(m,i),1],s.at(p,p,l)):(p=[m,i,0,1],Ko(p,p,l));let g=p[3];return{point:new s.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g,isOccluded:!1}}function $i(m,i){return .5+m/i*.5}function Ut(m,i){return m.x>=-i[0]&&m.x<=i[0]&&m.y>=-i[1]&&m.y<=i[1]}function hi(m,i,l,h,p,g,v,C,T,P,O,F,N){let X=l?m.textSizeData:m.iconSizeData,J=s.ak(X,i.transform.zoom),ge=[256/i.width*2+1,256/i.height*2+1],me=l?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;me.clear();let _e=m.lineVertexArray,xe=l?m.text.placedSymbolArray:m.icon.placedSymbolArray,Me=i.transform.width/i.transform.height,Te=!1;for(let ke=0;ke<xe.length;ke++){let Fe=xe.get(ke);if(Fe.hidden||Fe.writingMode===s.al.vertical&&!Te){Ln(Fe.numGlyphs,me);continue}Te=!1;let De=new s.P(Fe.anchorX,Fe.anchorY),We={getElevation:N,pitchedLabelPlaneMatrix:h,lineVertexArray:_e,pitchWithMap:g,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:i.transform,tileAnchorPoint:De,unwrappedTileID:T,width:P,height:O,translation:F},lt=it(Fe.anchorX,Fe.anchorY,We);if(!Ut(lt.point,ge)){Ln(Fe.numGlyphs,me);continue}let et=$i(i.transform.cameraToCenterDistance,lt.signedDistanceFromCamera),rt=s.am(X,J,Fe),st=g?rt*i.transform.getPitchedTextCorrection(Fe.anchorX,Fe.anchorY,T)/et:rt*et,Mt=Gt({projectionContext:We,pitchedLabelPlaneMatrixInverse:p,symbol:Fe,fontSize:st,flip:!1,keepUpright:v,glyphOffsetArray:m.glyphOffsetArray,dynamicLayoutVertexArray:me,aspectRatio:Me,rotateToLine:C});Te=Mt.useVertical,(Mt.notEnoughRoom||Te||Mt.needsFlipping&&Gt({projectionContext:We,pitchedLabelPlaneMatrixInverse:p,symbol:Fe,fontSize:st,flip:!0,keepUpright:v,glyphOffsetArray:m.glyphOffsetArray,dynamicLayoutVertexArray:me,aspectRatio:Me,rotateToLine:C}).notEnoughRoom)&&Ln(Fe.numGlyphs,me)}l?m.text.dynamicLayoutVertexBuffer.updateData(me):m.icon.dynamicLayoutVertexBuffer.updateData(me)}function jt(m,i,l,h,p,g,v,C){let T=g.glyphStartIndex+g.numGlyphs,P=g.lineStartIndex,O=g.lineStartIndex+g.lineLength,F=i.getoffsetX(g.glyphStartIndex),N=i.getoffsetX(T-1),X=Ne(m*F,l,h,p,g.segment,P,O,C,v);if(!X)return null;let J=Ne(m*N,l,h,p,g.segment,P,O,C,v);return J?C.projectionCache.anyProjectionOccluded?null:{first:X,last:J}:null}function nt(m,i,l,h){return m===s.al.horizontal&&Math.abs(l.y-i.y)>Math.abs(l.x-i.x)*h?{useVertical:!0}:(m===s.al.vertical?i.y<l.y:i.x>l.x)?{needsFlipping:!0}:null}function Gt(m){let{projectionContext:i,pitchedLabelPlaneMatrixInverse:l,symbol:h,fontSize:p,flip:g,keepUpright:v,glyphOffsetArray:C,dynamicLayoutVertexArray:T,aspectRatio:P,rotateToLine:O}=m,F=p/24,N=h.lineOffsetX*F,X=h.lineOffsetY*F,J;if(h.numGlyphs>1){let ge=h.glyphStartIndex+h.numGlyphs,me=h.lineStartIndex,_e=h.lineStartIndex+h.lineLength,xe=jt(F,C,N,X,g,h,O,i);if(!xe)return{notEnoughRoom:!0};let Me=an(xe.first.point.x,xe.first.point.y,i,l),Te=an(xe.last.point.x,xe.last.point.y,i,l);if(v&&!g){let ke=nt(h.writingMode,Me,Te,P);if(ke)return ke}J=[xe.first];for(let ke=h.glyphStartIndex+1;ke<ge-1;ke++)J.push(Ne(F*C.getoffsetX(ke),N,X,g,h.segment,me,_e,i,O));J.push(xe.last)}else{if(v&&!g){let me=Wi(i.tileAnchorPoint.x,i.tileAnchorPoint.y,i).point,_e=h.lineStartIndex+h.segment+1,xe=new s.P(i.lineVertexArray.getx(_e),i.lineVertexArray.gety(_e)),Me=Wi(xe.x,xe.y,i),Te=Me.signedDistanceFromCamera>0?Me.point:oi(i.tileAnchorPoint,xe,me,1,i),ke=an(me.x,me.y,i,l),Fe=an(Te.x,Te.y,i,l),De=nt(h.writingMode,ke,Fe,P);if(De)return De}let ge=Ne(F*C.getoffsetX(h.glyphStartIndex),N,X,g,h.segment,h.lineStartIndex,h.lineStartIndex+h.lineLength,i,O);if(!ge||i.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};J=[ge]}for(let ge of J)s.as(T,ge.point,ge.angle);return{}}function oi(m,i,l,h,p){let g=m.add(m.sub(i)._unit()),v=Wi(g.x,g.y,p).point,C=l.sub(v);return l.add(C._mult(h/C.mag()))}function tr(m,i,l){let h=i.projectionCache;if(h.projections[m])return h.projections[m];let p=new s.P(i.lineVertexArray.getx(m),i.lineVertexArray.gety(m)),g=Wi(p.x,p.y,i);if(g.signedDistanceFromCamera>0)return h.projections[m]=g.point,h.anyProjectionOccluded=h.anyProjectionOccluded||g.isOccluded,g.point;let v=m-l.direction;return oi(l.distanceFromAnchor===0?i.tileAnchorPoint:new s.P(i.lineVertexArray.getx(v),i.lineVertexArray.gety(v)),p,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,i)}function Wi(m,i,l){let h=m+l.translation[0],p=i+l.translation[1],g;return l.pitchWithMap?(g=$e(h,p,l.pitchedLabelPlaneMatrix,l.getElevation),g.isOccluded=!1):(g=l.transform.projectTileCoordinates(h,p,l.unwrappedTileID,l.getElevation),g.point.x=(.5*g.point.x+.5)*l.width,g.point.y=(.5*-g.point.y+.5)*l.height),g}function an(m,i,l,h){if(l.pitchWithMap){let p=[m,i,0,1];return s.at(p,p,h),l.transform.projectTileCoordinates(p[0]/p[3],p[1]/p[3],l.unwrappedTileID,l.getElevation).point}return{x:m/l.width*2-1,y:i/l.height*2-1}}function it(m,i,l){return l.transform.projectTileCoordinates(m,i,l.unwrappedTileID,l.getElevation)}function Hn(m,i,l){return m._unit()._perp()._mult(i*l)}function ro(m,i,l,h,p,g,v,C,T){if(C.projectionCache.offsets[m])return C.projectionCache.offsets[m];let P=l.add(i);if(m+T.direction<h||m+T.direction>=p)return C.projectionCache.offsets[m]=P,P;let O=tr(m+T.direction,C,T),F=Hn(O.sub(l),v,T.direction),N=l.add(F),X=O.add(F);return C.projectionCache.offsets[m]=s.au(g,P,N,X)||P,C.projectionCache.offsets[m]}function Ne(m,i,l,h,p,g,v,C,T){let P=h?m-i:m+i,O=P>0?1:-1,F=0;h&&(O*=-1,F=Math.PI),O<0&&(F+=Math.PI);let N,X=O>0?g+p:g+p+1;C.projectionCache.cachedAnchorPoint?N=C.projectionCache.cachedAnchorPoint:(N=Wi(C.tileAnchorPoint.x,C.tileAnchorPoint.y,C).point,C.projectionCache.cachedAnchorPoint=N);let J,ge,me=N,_e=N,xe=0,Me=0,Te=Math.abs(P),ke=[],Fe;for(;xe+Me<=Te;){if(X+=O,X<g||X>=v)return null;xe+=Me,_e=me,ge=J;let lt={absOffsetX:Te,direction:O,distanceFromAnchor:xe,previousVertex:_e};if(me=tr(X,C,lt),l===0)ke.push(_e),Fe=me.sub(_e);else{let et,rt=me.sub(_e);et=rt.mag()===0?Hn(tr(X+O,C,lt).sub(me),l,O):Hn(rt,l,O),ge||(ge=_e.add(et)),J=ro(X,et,me,g,v,ge,l,C,lt),ke.push(ge),Fe=J.sub(ge)}Me=Fe.mag()}let De=Fe._mult((Te-xe)/Me)._add(ge||_e),We=F+Math.atan2(me.y-_e.y,me.x-_e.x);return ke.push(De),{point:De,angle:T?We:0,path:ke}}let yi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ln(m,i){for(let l=0;l<m;l++){let h=i.length;i.resize(h+4),i.float32.set(yi,3*h)}}function Ko(m,i,l){let h=i[0],p=i[1];return m[0]=l[0]*h+l[4]*p+l[12],m[1]=l[1]*h+l[5]*p+l[13],m[3]=l[3]*h+l[7]*p+l[15],m}let sr=100;class _n{constructor(i,l=new Tt(i.width+200,i.height+200,25),h=new Tt(i.width+200,i.height+200,25)){this.transform=i,this.grid=l,this.ignoredGrid=h,this.pitchFactor=Math.cos(i.pitch*Math.PI/180)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+sr,this.screenBottomBoundary=i.height+sr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,l,h,p,g,v,C,T,P,O,F,N){let X=this.projectAndGetPerspectiveRatio(i.anchorPointX+T[0],i.anchorPointY+T[1],g,O,N),J=h*X.perspectiveRatio,ge;if(v||C)ge=this._projectCollisionBox(i,J,p,g,v,C,T,X,O,F,N);else{let Fe=X.x+(F?F.x*J:0),De=X.y+(F?F.y*J:0);ge={allPointsOccluded:!1,box:[Fe+i.x1*J,De+i.y1*J,Fe+i.x2*J,De+i.y2*J]}}let[me,_e,xe,Me]=ge.box,Te=v?ge.allPointsOccluded:X.isOccluded,ke=Te;return ke||(ke=X.perspectiveRatio<this.perspectiveRatioCutoff),ke||(ke=!this.isInsideGrid(me,_e,xe,Me)),ke||l!=="always"&&this.grid.hitTest(me,_e,xe,Me,l,P)?{box:[me,_e,xe,Me],placeable:!1,offscreen:!1,occluded:Te}:{box:[me,_e,xe,Me],placeable:!0,offscreen:this.isOffscreen(me,_e,xe,Me),occluded:Te}}placeCollisionCircles(i,l,h,p,g,v,C,T,P,O,F,N,X,J){let ge=[],me=new s.P(l.anchorX,l.anchorY),_e=this.getPerspectiveRatio(me.x,me.y,v,J),xe=(P?g*this.transform.getPitchedTextCorrection(l.anchorX,l.anchorY,v)/_e:g*_e)/s.ay,Me={getElevation:J,pitchedLabelPlaneMatrix:C,lineVertexArray:h,pitchWithMap:P,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:me,unwrappedTileID:v,width:this.transform.width,height:this.transform.height,translation:X},Te=jt(xe,p,l.lineOffsetX*xe,l.lineOffsetY*xe,!1,l,!1,Me),ke=!1,Fe=!1,De=!0;if(Te){let We=.5*F*_e+N,lt=new s.P(-100,-100),et=new s.P(this.screenRightBoundary,this.screenBottomBoundary),rt=new dt,st=Te.first,Mt=Te.last,Et=[];for(let xi=st.path.length-1;xi>=1;xi--)Et.push(st.path[xi]);for(let xi=1;xi<Mt.path.length;xi++)Et.push(Mt.path[xi]);let _t=2.5*We;if(P){let xi=this.projectPathToScreenSpace(Et,Me);Et=xi.some(qi=>qi.signedDistanceFromCamera<=0)?[]:xi.map(qi=>qi.point)}let qt=[];if(Et.length>0){let xi=Et[0].clone(),qi=Et[0].clone();for(let Pr=1;Pr<Et.length;Pr++)xi.x=Math.min(xi.x,Et[Pr].x),xi.y=Math.min(xi.y,Et[Pr].y),qi.x=Math.max(qi.x,Et[Pr].x),qi.y=Math.max(qi.y,Et[Pr].y);qt=xi.x>=lt.x&&qi.x<=et.x&&xi.y>=lt.y&&qi.y<=et.y?[Et]:qi.x<lt.x||xi.x>et.x||qi.y<lt.y||xi.y>et.y?[]:s.av([Et],lt.x,lt.y,et.x,et.y)}for(let xi of qt){rt.reset(xi,.25*We);let qi=0;qi=rt.length<=.5*We?1:Math.ceil(rt.paddedLength/_t)+1;for(let Pr=0;Pr<qi;Pr++){let gr=Pr/Math.max(qi-1,1),Dr=rt.lerp(gr),Rr=Dr.x+sr,yr=Dr.y+sr;ge.push(Rr,yr,We,0);let Qi=Rr-We,cn=yr-We,Cn=Rr+We,Bn=yr+We;if(De=De&&this.isOffscreen(Qi,cn,Cn,Bn),Fe=Fe||this.isInsideGrid(Qi,cn,Cn,Bn),i!=="always"&&this.grid.hitTestCircle(Rr,yr,We,i,O)&&(ke=!0,!T))return{circles:[],offscreen:!1,collisionDetected:ke}}}}return{circles:!T&&ke||!Fe||_e<this.perspectiveRatioCutoff?[]:ge,offscreen:De,collisionDetected:ke}}projectPathToScreenSpace(i,l){let h=function(p,g){let v=s.K();return s.an(v,g.pitchedLabelPlaneMatrix),p.map(C=>{let T=$e(C.x,C.y,v,g.getElevation),P=g.transform.projectTileCoordinates(T.point.x,T.point.y,g.unwrappedTileID,g.getElevation);return P.point.x=(.5*P.point.x+.5)*g.width,P.point.y=(.5*-P.point.y+.5)*g.height,P})}(i,l);return function(p){let g=0,v=0,C=0,T=0;for(let P=0;P<p.length;P++)p[P].isOccluded?(C=P+1,T=0):(T++,T>v&&(v=T,g=C));return p.slice(g,g+v)}(h)}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let l=[],h=1/0,p=1/0,g=-1/0,v=-1/0;for(let O of i){let F=new s.P(O.x+sr,O.y+sr);h=Math.min(h,F.x),p=Math.min(p,F.y),g=Math.max(g,F.x),v=Math.max(v,F.y),l.push(F)}let C=this.grid.query(h,p,g,v).concat(this.ignoredGrid.query(h,p,g,v)),T={},P={};for(let O of C){let F=O.key;if(T[F.bucketInstanceId]===void 0&&(T[F.bucketInstanceId]={}),T[F.bucketInstanceId][F.featureIndex])continue;let N=[new s.P(O.x1,O.y1),new s.P(O.x2,O.y1),new s.P(O.x2,O.y2),new s.P(O.x1,O.y2)];s.aw(l,N)&&(T[F.bucketInstanceId][F.featureIndex]=!0,P[F.bucketInstanceId]===void 0&&(P[F.bucketInstanceId]=[]),P[F.bucketInstanceId].push(F.featureIndex))}return P}insertCollisionBox(i,l,h,p,g,v){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:g,collisionGroupID:v,overlapMode:l},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,l,h,p,g,v){let C=h?this.ignoredGrid:this.grid,T={bucketInstanceId:p,featureIndex:g,collisionGroupID:v,overlapMode:l};for(let P=0;P<i.length;P+=4)C.insertCircle(T,i[P],i[P+1],i[P+2])}projectAndGetPerspectiveRatio(i,l,h,p,g){if(g){let v;p?(v=[i,l,p(i,l),1],s.at(v,v,g)):(v=[i,l,0,1],Ko(v,v,g));let C=v[3];return{x:(v[0]/C+1)/2*this.transform.width+sr,y:(-v[1]/C+1)/2*this.transform.height+sr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/C*.5,isOccluded:!1,signedDistanceFromCamera:C}}{let v=this.transform.projectTileCoordinates(i,l,h,p);return{x:(v.point.x+1)/2*this.transform.width+sr,y:(1-v.point.y)/2*this.transform.height+sr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/v.signedDistanceFromCamera*.5,isOccluded:v.isOccluded,signedDistanceFromCamera:v.signedDistanceFromCamera}}}getPerspectiveRatio(i,l,h,p){let g=this.transform.projectTileCoordinates(i,l,h,p);return .5+this.transform.cameraToCenterDistance/g.signedDistanceFromCamera*.5}isOffscreen(i,l,h,p){return h<sr||i>=this.screenRightBoundary||p<sr||l>this.screenBottomBoundary}isInsideGrid(i,l,h,p){return h>=0&&i<this.gridRightBoundary&&p>=0&&l<this.gridBottomBoundary}getViewportMatrix(){let i=s.ad([]);return s.L(i,i,[-100,-100,0]),i}_projectCollisionBox(i,l,h,p,g,v,C,T,P,O,F){let N=1,X=0,J=0,ge=1,me=i.anchorPointX+C[0],_e=i.anchorPointY+C[1];if(v&&!g){let Et=this.projectAndGetPerspectiveRatio(me+1,_e,p,P,F),_t=Et.x-T.x,qt=Math.atan((Et.y-T.y)/_t)+(_t<0?Math.PI:0),xi=Math.sin(qt),qi=Math.cos(qt);N=qi,X=xi,J=-xi,ge=qi}else if(!v&&g){let Et=Lt(this.transform);N=Et.vecEast[0],X=Et.vecEast[1],J=Et.vecSouth[0],ge=Et.vecSouth[1]}let xe=T.x,Me=T.y,Te=l;g&&(xe=me,Me=_e,Te=Math.pow(2,-(this.transform.zoom-h.overscaledZ)),Te*=this.transform.getPitchedTextCorrection(me,_e,p),O||(Te*=s.ae(.5+T.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),O&&(xe+=N*O.x*Te+J*O.y*Te,Me+=X*O.x*Te+ge*O.y*Te);let ke=i.x1*Te,Fe=i.x2*Te,De=(ke+Fe)/2,We=i.y1*Te,lt=i.y2*Te,et=(We+lt)/2,rt=[{offsetX:ke,offsetY:We},{offsetX:De,offsetY:We},{offsetX:Fe,offsetY:We},{offsetX:Fe,offsetY:et},{offsetX:Fe,offsetY:lt},{offsetX:De,offsetY:lt},{offsetX:ke,offsetY:lt},{offsetX:ke,offsetY:et}],st=[];for(let{offsetX:Et,offsetY:_t}of rt)st.push(new s.P(xe+N*Et+J*_t,Me+X*Et+ge*_t));let Mt=!1;if(g){let Et=st.map(_t=>this.projectAndGetPerspectiveRatio(_t.x,_t.y,p,P,F));Mt=Et.some(_t=>!_t.isOccluded),st=Et.map(_t=>new s.P(_t.x,_t.y))}else Mt=!0;return{box:s.ax(st),allPointsOccluded:!Mt}}}class pi{constructor(i,l,h,p){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?l:-l))):p&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class va{constructor(i,l,h,p,g){this.text=new pi(i?i.text:null,l,h,g),this.icon=new pi(i?i.icon:null,l,p,g)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class gs{constructor(i,l,h){this.text=i,this.icon=l,this.skipFade=h}}class Ml{constructor(i,l,h,p,g){this.bucketInstanceId=i,this.featureIndex=l,this.sourceLayerIndex=h,this.bucketIndex=p,this.tileID=g}}class It{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){let l=++this.maxGroupID;this.collisionGroups[i]={ID:l,predicate:h=>h.collisionGroupID===l}}return this.collisionGroups[i]}}function bn(m,i,l,h,p){let{horizontalAlign:g,verticalAlign:v}=s.aE(m);return new s.P(-(g-.5)*i+h[0]*p,-(v-.5)*l+h[1]*p)}class Us{constructor(i,l,h,p,g){this.transform=i.clone(),this.terrain=l,this.collisionIndex=new _n(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new It(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=g,g&&(g.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){let l=this.terrain;return l?(h,p)=>l.getElevation(i,h,p):null}getBucketParts(i,l,h,p){let g=h.getBucket(l),v=h.latestFeatureIndex;if(!g||!v||l.id!==g.layerIds[0])return;let C=h.collisionBoxArray,T=g.layers[0].layout,P=g.layers[0].paint,O=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),F=h.tileSize/s.Z,N=h.tileID.toUnwrapped(),X=T.get("text-rotation-alignment")==="map",J=s.az(h,1,this.transform.zoom),ge=s.aA(this.collisionIndex.transform,h,P.get("text-translate"),P.get("text-translate-anchor")),me=s.aA(this.collisionIndex.transform,h,P.get("icon-translate"),P.get("icon-translate-anchor")),_e=Ae(X,this.transform,J);this.retainedQueryData[g.bucketInstanceId]=new Ml(g.bucketInstanceId,v,g.sourceLayerIndex,g.index,h.tileID);let xe={bucket:g,layout:T,translationText:ge,translationIcon:me,unwrappedTileID:N,pitchedLabelPlaneMatrix:_e,scale:O,textPixelRatio:F,holdingForFade:h.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:s.ak(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(p)for(let Me of g.sortKeyRanges){let{sortKey:Te,symbolInstanceStart:ke,symbolInstanceEnd:Fe}=Me;i.push({sortKey:Te,symbolInstanceStart:ke,symbolInstanceEnd:Fe,parameters:xe})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:xe})}attemptAnchorPlacement(i,l,h,p,g,v,C,T,P,O,F,N,X,J,ge,me,_e,xe,Me,Te){let ke=s.aB[i.textAnchor],Fe=[i.textOffset0,i.textOffset1],De=bn(ke,h,p,Fe,g),We=this.collisionIndex.placeCollisionBox(l,N,T,P,O,C,v,me,F.predicate,Me,De,Te);if((!xe||this.collisionIndex.placeCollisionBox(xe,N,T,P,O,C,v,_e,F.predicate,Me,De,Te).placeable)&&We.placeable){let lt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(lt=this.prevPlacement.variableOffsets[X.crossTileID].anchor),X.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[X.crossTileID]={textOffset:Fe,width:h,height:p,anchor:ke,textBoxScale:g,prevAnchor:lt},this.markUsedJustification(J,ke,X,ge),J.allowVerticalPlacement&&(this.markUsedOrientation(J,ge,X),this.placedOrientations[X.crossTileID]=ge),{shift:De,placedGlyphBoxes:We}}}placeLayerBucketPart(i,l,h){let{bucket:p,layout:g,translationText:v,translationIcon:C,unwrappedTileID:T,pitchedLabelPlaneMatrix:P,textPixelRatio:O,holdingForFade:F,collisionBoxArray:N,partiallyEvaluatedTextSize:X,collisionGroup:J}=i.parameters,ge=g.get("text-optional"),me=g.get("icon-optional"),_e=s.aC(g,"text-overlap","text-allow-overlap"),xe=_e==="always",Me=s.aC(g,"icon-overlap","icon-allow-overlap"),Te=Me==="always",ke=g.get("text-rotation-alignment")==="map",Fe=g.get("text-pitch-alignment")==="map",De=g.get("icon-text-fit")!=="none",We=g.get("symbol-z-order")==="viewport-y",lt=xe&&(Te||!p.hasIconData()||me),et=Te&&(xe||!p.hasTextData()||ge);!p.collisionArrays&&N&&p.deserializeCollisionBoxes(N);let rt=this.retainedQueryData[p.bucketInstanceId].tileID,st=this._getTerrainElevationFunc(rt),Mt=this.transform.getFastPathSimpleProjectionMatrix(rt),Et=(_t,qt,xi)=>{var qi,Pr;if(l[_t.crossTileID])return;if(F)return void(this.placements[_t.crossTileID]=new gs(!1,!1,!1));let gr=!1,Dr=!1,Rr=!0,yr=null,Qi={box:null,placeable:!1,offscreen:null,occluded:!1},cn={placeable:!1},Cn=null,Bn=null,Ji=null,ll=0,la=0,cl=0;qt.textFeatureIndex?ll=qt.textFeatureIndex:_t.useRuntimeCollisionCircles&&(ll=_t.featureIndex),qt.verticalTextFeatureIndex&&(la=qt.verticalTextFeatureIndex);let Ul=qt.textBox;if(Ul){let Bo=rn=>{let nn=s.al.horizontal;if(p.allowVerticalPlacement&&!rn&&this.prevPlacement){let co=this.prevPlacement.placedOrientations[_t.crossTileID];co&&(this.placedOrientations[_t.crossTileID]=co,nn=co,this.markUsedOrientation(p,nn,_t))}return nn},dl=(rn,nn)=>{if(p.allowVerticalPlacement&&_t.numVerticalGlyphVertices>0&&qt.verticalTextBox){for(let co of p.writingModes)if(co===s.al.vertical?(Qi=nn(),cn=Qi):Qi=rn(),Qi&&Qi.placeable)break}else Qi=rn()},Oa=_t.textAnchorOffsetStartIndex,hl=_t.textAnchorOffsetEndIndex;if(hl===Oa){let rn=(nn,co)=>{let Er=this.collisionIndex.placeCollisionBox(nn,_e,O,rt,T,Fe,ke,v,J.predicate,st,void 0,Mt);return Er&&Er.placeable&&(this.markUsedOrientation(p,co,_t),this.placedOrientations[_t.crossTileID]=co),Er};dl(()=>rn(Ul,s.al.horizontal),()=>{let nn=qt.verticalTextBox;return p.allowVerticalPlacement&&_t.numVerticalGlyphVertices>0&&nn?rn(nn,s.al.vertical):{box:null,offscreen:null}}),Bo(Qi&&Qi.placeable)}else{let rn=s.aB[(Pr=(qi=this.prevPlacement)===null||qi===void 0?void 0:qi.variableOffsets[_t.crossTileID])===null||Pr===void 0?void 0:Pr.anchor],nn=(Er,Kd,Jm)=>{let eg=Er.x2-Er.x1,Ab=Er.y2-Er.y1,Np=_t.textBoxScale,Fu=De&&Me==="never"?Kd:null,ss=null,ca=_e==="never"?1:2,as="never";rn&&ca++;for(let La=0;La<ca;La++){for(let Qd=Oa;Qd<hl;Qd++){let pl=p.textAnchorOffsets.get(Qd);if(rn&&pl.textAnchor!==rn)continue;let Fp=this.attemptAnchorPlacement(pl,Er,eg,Ab,Np,ke,Fe,O,rt,T,J,as,_t,p,Jm,v,C,Fu,st);if(Fp&&(ss=Fp.placedGlyphBoxes,ss&&ss.placeable))return gr=!0,yr=Fp.shift,ss}rn?rn=null:as=_e}return h&&!ss&&(ss={box:this.collisionIndex.placeCollisionBox(Ul,"always",O,rt,T,Fe,ke,v,J.predicate,st,void 0,Mt).box,offscreen:!1,placeable:!1,occluded:!1}),ss};dl(()=>nn(Ul,qt.iconBox,s.al.horizontal),()=>{let Er=qt.verticalTextBox;return p.allowVerticalPlacement&&(!Qi||!Qi.placeable)&&_t.numVerticalGlyphVertices>0&&Er?nn(Er,qt.verticalIconBox,s.al.vertical):{box:null,occluded:!0,offscreen:null}}),Qi&&(gr=Qi.placeable,Rr=Qi.offscreen);let co=Bo(Qi&&Qi.placeable);if(!gr&&this.prevPlacement){let Er=this.prevPlacement.variableOffsets[_t.crossTileID];Er&&(this.variableOffsets[_t.crossTileID]=Er,this.markUsedJustification(p,Er.anchor,_t,co))}}}if(Cn=Qi,gr=Cn&&Cn.placeable,Rr=Cn&&Cn.offscreen,_t.useRuntimeCollisionCircles){let Bo=p.text.placedSymbolArray.get(_t.centerJustifiedTextSymbolIndex),dl=s.am(p.textSizeData,X,Bo),Oa=g.get("text-padding");Bn=this.collisionIndex.placeCollisionCircles(_e,Bo,p.lineVertexArray,p.glyphOffsetArray,dl,T,P,h,Fe,J.predicate,_t.collisionCircleDiameter,Oa,v,st),Bn.circles.length&&Bn.collisionDetected&&!h&&s.w("Collisions detected, but collision boxes are not shown"),gr=xe||Bn.circles.length>0&&!Bn.collisionDetected,Rr=Rr&&Bn.offscreen}if(qt.iconFeatureIndex&&(cl=qt.iconFeatureIndex),qt.iconBox){let Bo=dl=>this.collisionIndex.placeCollisionBox(dl,Me,O,rt,T,Fe,ke,C,J.predicate,st,De&&yr?yr:void 0,Mt);cn&&cn.placeable&&qt.verticalIconBox?(Ji=Bo(qt.verticalIconBox),Dr=Ji.placeable):(Ji=Bo(qt.iconBox),Dr=Ji.placeable),Rr=Rr&&Ji.offscreen}let Nu=ge||_t.numHorizontalGlyphVertices===0&&_t.numVerticalGlyphVertices===0,ul=me||_t.numIconVertices===0;Nu||ul?ul?Nu||(Dr=Dr&&gr):gr=Dr&&gr:Dr=gr=Dr&&gr;let jl=Dr&&Ji.placeable;if(gr&&Cn.placeable&&this.collisionIndex.insertCollisionBox(Cn.box,_e,g.get("text-ignore-placement"),p.bucketInstanceId,cn&&cn.placeable&&la?la:ll,J.ID),jl&&this.collisionIndex.insertCollisionBox(Ji.box,Me,g.get("icon-ignore-placement"),p.bucketInstanceId,cl,J.ID),Bn&&gr&&this.collisionIndex.insertCollisionCircles(Bn.circles,_e,g.get("text-ignore-placement"),p.bucketInstanceId,ll,J.ID),h&&this.storeCollisionData(p.bucketInstanceId,xi,qt,Cn,Ji,Bn),_t.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[_t.crossTileID]=new gs((gr||lt)&&!Cn?.occluded,(Dr||et)&&!Ji?.occluded,Rr||p.justReloaded),l[_t.crossTileID]=!0};if(We){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let _t=p.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let qt=_t.length-1;qt>=0;--qt){let xi=_t[qt];Et(p.symbolInstances.get(xi),p.collisionArrays[xi],xi)}}else for(let _t=i.symbolInstanceStart;_t<i.symbolInstanceEnd;_t++)Et(p.symbolInstances.get(_t),p.collisionArrays[_t],_t);p.justReloaded=!1}storeCollisionData(i,l,h,p,g,v){if(h.textBox||h.iconBox){let C,T;this.collisionBoxArrays.has(i)?C=this.collisionBoxArrays.get(i):(C=new Map,this.collisionBoxArrays.set(i,C)),C.has(l)?T=C.get(l):(T={text:null,icon:null},C.set(l,T)),h.textBox&&(T.text=p.box),h.iconBox&&(T.icon=g.box)}if(v){let C=this.collisionCircleArrays[i];C===void 0&&(C=this.collisionCircleArrays[i]=[]);for(let T=0;T<v.circles.length;T+=4)C.push(v.circles[T+0]-sr),C.push(v.circles[T+1]-sr),C.push(v.circles[T+2]),C.push(v.collisionDetected?1:0)}}markUsedJustification(i,l,h,p){let g;g=p===s.al.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[s.aD(l)];let v=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(let C of v)C>=0&&(i.text.placedSymbolArray.get(C).crossTileID=g>=0&&C!==g?0:h.crossTileID)}markUsedOrientation(i,l,h){let p=l===s.al.horizontal||l===s.al.horizontalOnly?l:0,g=l===s.al.vertical?l:0,v=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(let C of v)i.text.placedSymbolArray.get(C).placedOrientation=p;h.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=g)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;let l=this.prevPlacement,h=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;let p=l?l.symbolFadeChange(i):1,g=l?l.opacities:{},v=l?l.variableOffsets:{},C=l?l.placedOrientations:{};for(let T in this.placements){let P=this.placements[T],O=g[T];O?(this.opacities[T]=new va(O,p,P.text,P.icon),h=h||P.text!==O.text.placed||P.icon!==O.icon.placed):(this.opacities[T]=new va(null,p,P.text,P.icon,P.skipFade),h=h||P.text||P.icon)}for(let T in g){let P=g[T];if(!this.opacities[T]){let O=new va(P,p,!1,!1);O.isHidden()||(this.opacities[T]=O,h=h||P.text.placed||P.icon.placed)}}for(let T in v)this.variableOffsets[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.variableOffsets[T]=v[T]);for(let T in C)this.placedOrientations[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.placedOrientations[T]=C[T]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:i)}updateLayerOpacities(i,l){let h={};for(let p of l){let g=p.getBucket(i);g&&p.latestFeatureIndex&&i.id===g.layerIds[0]&&this.updateBucketOpacities(g,p.tileID,h,p.collisionBoxArray)}}updateBucketOpacities(i,l,h,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();let g=i.layers[0],v=g.layout,C=new va(null,0,!1,!1,!0),T=v.get("text-allow-overlap"),P=v.get("icon-allow-overlap"),O=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=v.get("text-rotation-alignment")==="map",N=v.get("text-pitch-alignment")==="map",X=v.get("icon-text-fit")!=="none",J=new va(null,0,T&&(P||!i.hasIconData()||v.get("icon-optional")),P&&(T||!i.hasTextData()||v.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);let ge=(_e,xe,Me)=>{for(let Te=0;Te<xe/4;Te++)_e.opacityVertexArray.emplaceBack(Me);_e.hasVisibleVertices=_e.hasVisibleVertices||Me!==Nn},me=this.collisionBoxArrays.get(i.bucketInstanceId);for(let _e=0;_e<i.symbolInstances.length;_e++){let xe=i.symbolInstances.get(_e),{numHorizontalGlyphVertices:Me,numVerticalGlyphVertices:Te,crossTileID:ke}=xe,Fe=this.opacities[ke];h[ke]?Fe=C:Fe||(Fe=J,this.opacities[ke]=Fe),h[ke]=!0;let De=xe.numIconVertices>0,We=this.placedOrientations[xe.crossTileID],lt=We===s.al.vertical,et=We===s.al.horizontal||We===s.al.horizontalOnly;if(Me>0||Te>0){let st=wa(Fe.text);ge(i.text,Me,lt?Nn:st),ge(i.text,Te,et?Nn:st);let Mt=Fe.text.isHidden();[xe.rightJustifiedTextSymbolIndex,xe.centerJustifiedTextSymbolIndex,xe.leftJustifiedTextSymbolIndex].forEach(qt=>{qt>=0&&(i.text.placedSymbolArray.get(qt).hidden=Mt||lt?1:0)}),xe.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(xe.verticalPlacedTextSymbolIndex).hidden=Mt||et?1:0);let Et=this.variableOffsets[xe.crossTileID];Et&&this.markUsedJustification(i,Et.anchor,xe,We);let _t=this.placedOrientations[xe.crossTileID];_t&&(this.markUsedJustification(i,"left",xe,_t),this.markUsedOrientation(i,_t,xe))}if(De){let st=wa(Fe.icon),Mt=!(X&&xe.verticalPlacedIconSymbolIndex&&lt);xe.placedIconSymbolIndex>=0&&(ge(i.icon,xe.numIconVertices,Mt?st:Nn),i.icon.placedSymbolArray.get(xe.placedIconSymbolIndex).hidden=Fe.icon.isHidden()),xe.verticalPlacedIconSymbolIndex>=0&&(ge(i.icon,xe.numVerticalIconVertices,Mt?Nn:st),i.icon.placedSymbolArray.get(xe.verticalPlacedIconSymbolIndex).hidden=Fe.icon.isHidden())}let rt=me&&me.has(_e)?me.get(_e):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){let st=i.collisionArrays[_e];if(st){let Mt=new s.P(0,0);if(st.textBox||st.verticalTextBox){let Et=!0;if(O){let _t=this.variableOffsets[ke];_t?(Mt=bn(_t.anchor,_t.width,_t.height,_t.textOffset,_t.textBoxScale),F&&Mt._rotate(N?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Et=!1}if(st.textBox||st.verticalTextBox){let _t;st.textBox&&(_t=lt),st.verticalTextBox&&(_t=et),Ja(i.textCollisionBox.collisionVertexArray,Fe.text.placed,!Et||_t,rt.text,Mt.x,Mt.y)}}if(st.iconBox||st.verticalIconBox){let Et=!!(!et&&st.verticalIconBox),_t;st.iconBox&&(_t=Et),st.verticalIconBox&&(_t=!Et),Ja(i.iconCollisionBox.collisionVertexArray,Fe.icon.placed,_t,rt.icon,X?Mt.x:0,X?Mt.y:0)}}}}if(i.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);i.bucketInstanceId in this.collisionCircleArrays&&(i.collisionCircleArray=this.collisionCircleArrays[i.bucketInstanceId],delete this.collisionCircleArrays[i.bucketInstanceId])}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,l){let h=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*h>i}setStale(){this.stale=!0}}function Ja(m,i,l,h,p,g){h&&h.length!==0||(h=[0,0,0,0]);let v=h[0]-sr,C=h[1]-sr,T=h[2]-sr,P=h[3]-sr;m.emplaceBack(i?1:0,l?1:0,p||0,g||0,v,C),m.emplaceBack(i?1:0,l?1:0,p||0,g||0,T,C),m.emplaceBack(i?1:0,l?1:0,p||0,g||0,T,P),m.emplaceBack(i?1:0,l?1:0,p||0,g||0,v,P)}let Zi=Math.pow(2,25),xa=Math.pow(2,24),el=Math.pow(2,17),Cd=Math.pow(2,16),js=Math.pow(2,9),ap=Math.pow(2,8),Ed=Math.pow(2,1);function wa(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;let i=m.placed?1:0,l=Math.floor(127*m.opacity);return l*Zi+i*xa+l*el+i*Cd+l*js+i*ap+l*Ed+i}let Nn=0;class Il{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,l,h,p,g){let v=this._bucketParts;for(;this._currentTileIndex<i.length;)if(l.getBucketParts(v,p,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,v.sort((C,T)=>C.sortKey-T.sortKey));this._currentPartIndex<v.length;)if(l.placeLayerBucketPart(v[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,g())return!0;return!1}}class lc{constructor(i,l,h,p,g,v,C,T){this.placement=new Us(i,l,v,C,T),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=g,this._done=!1}isDone(){return this._done}continuePlacement(i,l,h){let p=I.now(),g=()=>!this._forceFullPlacement&&I.now()-p>2;for(;this._currentPlacementIndex>=0;){let v=l[i[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(v.type==="symbol"&&(!v.minzoom||v.minzoom<=C)&&(!v.maxzoom||v.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new Il(v)),this._inProgressLayer.continuePlacement(h[v.source],this.placement,this._showCollisionBoxes,v,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}let qs=512/s.Z/2;class Hs{constructor(i,l,h){this.tileID=i,this.bucketInstanceId=h,this._symbolsByKey={};let p=new Map;for(let g=0;g<l.length;g++){let v=l.get(g),C=v.key,T=p.get(C);T?T.push(v):p.set(C,[v])}for(let[g,v]of p){let C={positions:v.map(T=>({x:Math.floor(T.anchorX*qs),y:Math.floor(T.anchorY*qs)})),crossTileIDs:v.map(T=>T.crossTileID)};if(C.positions.length>128){let T=new s.aF(C.positions.length,16,Uint16Array);for(let{x:P,y:O}of C.positions)T.add(P,O);T.finish(),delete C.positions,C.index=T}this._symbolsByKey[g]=C}}getScaledCoordinates(i,l){let{x:h,y:p,z:g}=this.tileID.canonical,{x:v,y:C,z:T}=l.canonical,P=qs/Math.pow(2,T-g),O=(C*s.Z+i.anchorY)*P,F=p*s.Z*qs;return{x:Math.floor((v*s.Z+i.anchorX)*P-h*s.Z*qs),y:Math.floor(O-F)}}findMatches(i,l,h){let p=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let g=0;g<i.length;g++){let v=i.get(g);if(v.crossTileID)continue;let C=this._symbolsByKey[v.key];if(!C)continue;let T=this.getScaledCoordinates(v,l);if(C.index){let P=C.index.range(T.x-p,T.y-p,T.x+p,T.y+p).sort();for(let O of P){let F=C.crossTileIDs[O];if(!h[F]){h[F]=!0,v.crossTileID=F;break}}}else if(C.positions)for(let P=0;P<C.positions.length;P++){let O=C.positions[P],F=C.crossTileIDs[P];if(Math.abs(O.x-T.x)<=p&&Math.abs(O.y-T.y)<=p&&!h[F]){h[F]=!0,v.crossTileID=F;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class cc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class vo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){let l=Math.round((i-this.lng)/360);if(l!==0)for(let h in this.indexes){let p=this.indexes[h],g={};for(let v in p){let C=p[v];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+l),g[C.tileID.key]=C}this.indexes[h]=g}this.lng=i}addBucket(i,l,h){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let g=0;g<l.symbolInstances.length;g++)l.symbolInstances.get(g).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});let p=this.usedCrossTileIDs[i.overscaledZ];for(let g in this.indexes){let v=this.indexes[g];if(Number(g)>i.overscaledZ)for(let C in v){let T=v[C];T.tileID.isChildOf(i)&&T.findMatches(l.symbolInstances,i,p)}else{let C=v[i.scaledTo(Number(g)).key];C&&C.findMatches(l.symbolInstances,i,p)}}for(let g=0;g<l.symbolInstances.length;g++){let v=l.symbolInstances.get(g);v.crossTileID||(v.crossTileID=h.generate(),p[v.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Hs(i,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(i,l){for(let h of l.getCrossTileIDsLists())for(let p of h)delete this.usedCrossTileIDs[i][p]}removeStaleBuckets(i){let l=!1;for(let h in this.indexes){let p=this.indexes[h];for(let g in p)i[p[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,p[g]),delete p[g],l=!0)}return l}}class Gi{constructor(){this.layerIndexes={},this.crossTileIDs=new cc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,l,h){let p=this.layerIndexes[i.id];p===void 0&&(p=this.layerIndexes[i.id]=new vo);let g=!1,v={};p.handleWrapJump(h);for(let C of l){let T=C.getBucket(i);T&&i.id===T.layerIds[0]&&(T.bucketInstanceId||(T.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(C.tileID,T,this.crossTileIDs)&&(g=!0),v[T.bucketInstanceId]=!0)}return p.removeStaleBuckets(v)&&(g=!0),g}pruneUnusedLayers(i){let l={};i.forEach(h=>{l[h]=!0});for(let h in this.layerIndexes)l[h]||delete this.layerIndexes[h]}}var mu="void main() {fragColor=vec4(1.0);}";let pr={prelude:Ei(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Ei("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Ei("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Ei(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Ei(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ei(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ei(mu,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Ei(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Ei(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ei("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ei("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ei("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Ei(mu,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Ei(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Ei(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Ei(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Ei(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ei(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ei(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ei(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ei(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Ei(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ei(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ei(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ei(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ei(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Ei(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ei(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ei(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ei("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ei("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ei("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Ei("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Ei(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Ei("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ei(m,i){let l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=i.match(/in ([\w]+) ([\w]+)/g),p=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),g=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=g?g.concat(p):p,C={};return{fragmentSource:m=m.replace(l,(T,P,O,F,N)=>(C[N]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${N}
in ${O} ${F} ${N};
#else
uniform ${O} ${F} u_${N};
#endif
`:`
#ifdef HAS_UNIFORM_u_${N}
    ${O} ${F} ${N} = u_${N};
#endif
`)),vertexSource:i=i.replace(l,(T,P,O,F,N)=>{let X=F==="float"?"vec2":"vec4",J=N.match(/color/)?"color":X;return C[N]?P==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
in ${O} ${X} a_${N};
out ${O} ${F} ${N};
#else
uniform ${O} ${F} u_${N};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = a_${N};
#else
    ${O} ${F} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = unpack_mix_${J}(a_${N}, u_${N}_t);
#else
    ${O} ${F} ${N} = u_${N};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
in ${O} ${X} a_${N};
#else
uniform ${O} ${F} u_${N};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${O} ${F} ${N} = a_${N};
#else
    ${O} ${F} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${O} ${F} ${N} = unpack_mix_${J}(a_${N}, u_${N}_t);
#else
    ${O} ${F} ${N} = u_${N};
#endif
`}),staticAttributes:h,staticUniforms:v}}class Qo{constructor(i,l,h){this.vertexBuffer=i,this.indexBuffer=l,this.segments=h}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Wr=s.aG([{name:"a_pos",type:"Int16",components:2}]);let Ca="#define PROJECTION_MERCATOR",fi="mercator";class Al{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return fi}get shaderDefine(){return Ca}get shaderPreludeCode(){return pr.projectionMercator}get vertexShaderPreludeCode(){return pr.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(i){}getMeshFromTileID(i,l,h,p,g){if(this._cachedMesh)return this._cachedMesh;let v=new s.aI;v.emplaceBack(0,0),v.emplaceBack(s.Z,0),v.emplaceBack(0,s.Z),v.emplaceBack(s.Z,s.Z);let C=i.createVertexBuffer(v,Wr.members),T=s.aJ.simpleSegment(0,0,4,2),P=new s.aK;P.emplaceBack(1,0,2),P.emplaceBack(1,2,3);let O=i.createIndexBuffer(P);return this._cachedMesh=new Qo(C,O,T),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(i){}}class kl{constructor(i=0,l=0,h=0,p=0){if(isNaN(i)||i<0||isNaN(l)||l<0||isNaN(h)||h<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=l,this.left=h,this.right=p}interpolate(i,l,h){return l.top!=null&&i.top!=null&&(this.top=s.B.number(i.top,l.top,h)),l.bottom!=null&&i.bottom!=null&&(this.bottom=s.B.number(i.bottom,l.bottom,h)),l.left!=null&&i.left!=null&&(this.left=s.B.number(i.left,l.left,h)),l.right!=null&&i.right!=null&&(this.right=s.B.number(i.right,l.right,h)),this}getCenter(i,l){let h=s.ae((this.left+i-this.right)/2,0,i),p=s.ae((this.top+l-this.bottom)/2,0,l);return new s.P(h,p)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new kl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ji(m,i){if(!m.renderWorldCopies||m.lngRange)return;let l=i.lng-m.center.lng;i.lng+=l>180?-360:l<-180?360:0}function ii(m){return Math.max(0,Math.floor(m))}class Bi{constructor(i,l,h,p,g,v){this._callbacks=i,this._tileSize=512,this._renderWorldCopies=v===void 0||!!v,this._minZoom=l||0,this._maxZoom=h||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ii(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new kl,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(i,l,h){this._latRange=i.latRange,this._lngRange=i.lngRange,this._width=i.width,this._height=i.height,this._center=i.center,this._elevation=i.elevation,this._minElevationForCurrentTile=i.minElevationForCurrentTile,this._zoom=i.zoom,this._tileZoom=ii(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=i.bearingInRadians,this._fovInRadians=i.fovInRadians,this._pitchInRadians=i.pitchInRadians,this._rollInRadians=i.rollInRadians,this._unmodified=i.unmodified,this._edgeInsets=new kl(i.padding.top,i.padding.bottom,i.padding.left,i.padding.right),this._minZoom=i.minZoom,this._maxZoom=i.maxZoom,this._minPitch=i.minPitch,this._maxPitch=i.maxPitch,this._renderWorldCopies=i.renderWorldCopies,this._cameraToCenterDistance=i.cameraToCenterDistance,this._nearZ=i.nearZ,this._farZ=i.farZ,this._autoCalculateNearFarZ=!h&&i.autoCalculateNearFarZ,l&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(i){this._minElevationForCurrentTile=i}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(i){this._minZoom!==i&&(this._minZoom=i,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(i){this._minPitch!==i&&(this._minPitch=i,this.setPitch(Math.max(this.pitch,i)))}get maxPitch(){return this._maxPitch}setMaxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.setPitch(Math.min(this.pitch,i)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(i){let l=s.aL(i,-180,180)*Math.PI/180;var h,p,g,v,C,T,P,O,F;this._bearingInRadians!==l&&(this._unmodified=!1,this._bearingInRadians=l,this._calcMatrices(),this._rotationMatrix=w(),h=this._rotationMatrix,g=-this._bearingInRadians,v=(p=this._rotationMatrix)[0],C=p[1],T=p[2],P=p[3],O=Math.sin(g),F=Math.cos(g),h[0]=v*F+T*O,h[1]=C*F+P*O,h[2]=v*-O+T*F,h[3]=C*-O+P*F)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(i){let l=s.ae(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==l&&(this._unmodified=!1,this._pitchInRadians=l,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(i){let l=i/180*Math.PI;this._rollInRadians!==l&&(this._unmodified=!1,this._rollInRadians=l,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aM(this._fovInRadians)}setFov(i){i=s.ae(i,.1,150),this.fov!==i&&(this._unmodified=!1,this._fovInRadians=s.ab(i),this._calcMatrices())}get zoom(){return this._zoom}setZoom(i){let l=this.getConstrained(this._center,i).zoom;this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this._tileZoom=Math.max(0,Math.floor(l)),this._scale=s.ac(l),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(i,l){this._autoCalculateNearFarZ=!1,this._nearZ=i,this._farZ=l,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,l,h){this._unmodified=!1,this._edgeInsets.interpolate(i,l,h),this._constrain(),this._calcMatrices()}resize(i,l,h=!0){this._width=i,this._height=l,h&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ki([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(i){i?(this._lngRange=[i.getWest(),i.getEast()],this._latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,s.af])}getConstrained(i,l){return this._callbacks.getConstrained(i,l)}getCameraQueryGeometry(i,l){if(l.length===1)return[l[0],i];{let h=i.x,p=i.y,g=i.x,v=i.y;for(let C of l)h=Math.min(h,C.x),p=Math.min(p,C.y),g=Math.max(g,C.x),v=Math.max(v,C.y);return[new s.P(h,p),new s.P(g,p),new s.P(g,v),new s.P(h,v),new s.P(h,p)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let i=this._unmodified,{center:l,zoom:h}=this.getConstrained(this.center,this.zoom);this.setCenter(l),this.setZoom(h),this._unmodified=i,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let i=s.ad(new Float64Array(16));s.M(i,i,[this._width/2,-this._height/2,1]),s.L(i,i,[1,-1,0]),this._clipSpaceToPixelsMatrix=i,i=s.ad(new Float64Array(16)),s.M(i,i,[1,-1,1]),s.L(i,i,[-1,-1,0]),s.M(i,i,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=i,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(i,l,h,p){let g=h!==void 0?h:this.bearing,v=p=p!==void 0?p:this.pitch,C=s.$.fromLngLat(i,l),T=-Math.cos(s.ab(v)),P=Math.sin(s.ab(v)),O=P*Math.sin(s.ab(g)),F=-P*Math.cos(s.ab(g)),N=this.elevation,X=l-N,J;T*X>=0||Math.abs(T)<.1?(J=1e4,N=l+J*T):J=-X/T;let ge,me,_e=s.aN(1,C.y),xe=0;do{if(xe+=1,xe>10)break;me=J/_e,ge=new s.$(C.x+O*me,C.y+F*me),_e=1/ge.meterInMercatorCoordinateUnits()}while(Math.abs(J-me*_e)>1e-12);return{center:ge.toLngLat(),elevation:N,zoom:s.ah(this.height/2/Math.tan(this.fovInRadians/2)/me/this.tileSize)}}recalculateZoomAndCenter(i){if(this.elevation-i==0)return;let l=s.ag(1,this.center.lat)*this.worldSize,h=this.cameraToCenterDistance/l,p=s.$.fromLngLat(this.center,this.elevation),g=U(this.center,this.elevation,this.pitch,this.bearing,h);this._elevation=i;let v=this.calculateCenterFromCameraLngLatAlt(g.toLngLat(),s.aN(g.z,p.y),this.bearing,this.pitch);this._elevation=v.elevation,this._center=v.center,this.setZoom(v.zoom)}getCameraPoint(){let i=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(i*Math.sin(this.rollInRadians),i*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let i=s.ag(1,this.center.lat)*this.worldSize;return U(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/i).toLngLat()}getMercatorTileCoordinates(i){if(!i)return[0,0,1,1];let l=i.canonical.z>=0?1<<i.canonical.z:Math.pow(2,i.canonical.z);return[i.canonical.x/l,i.canonical.y/l,1/l/s.Z,1/l/s.Z]}}class ir{constructor(i,l){this.min=i,this.max=l,this.center=s.aO([],s.aP([],this.min,this.max),.5)}quadrant(i){let l=[i%2==0,i<2],h=s.aQ(this.min),p=s.aQ(this.max);for(let g=0;g<l.length;g++)h[g]=l[g]?this.min[g]:this.center[g],p[g]=l[g]?this.center[g]:this.max[g];return p[2]=this.max[2],new ir(h,p)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersectsFrustum(i){let l=!0;for(let h=0;h<i.planes.length;h++){let p=this.intersectsPlane(i.planes[h]);if(p===0)return 0;p===1&&(l=!1)}return l?2:i.aabb.min[0]>this.max[0]||i.aabb.min[1]>this.max[1]||i.aabb.min[2]>this.max[2]||i.aabb.max[0]<this.min[0]||i.aabb.max[1]<this.min[1]||i.aabb.max[2]<this.min[2]?0:1}intersectsPlane(i){let l=i[3],h=i[3];for(let p=0;p<3;p++)i[p]>0?(l+=i[p]*this.min[p],h+=i[p]*this.max[p]):(h+=i[p]*this.min[p],l+=i[p]*this.max[p]);return l>=0?2:h<0?0:1}}class fr{distanceToTile2d(i,l,h,p){let g=p.distanceX([i,l]),v=p.distanceY([i,l]);return Math.hypot(g,v)}getWrap(i,l,h){return h}getTileAABB(i,l,h,p){var g,v;let C=h,T=h;if(p.terrain){let O=new s.Y(i.z,l,i.z,i.x,i.y),F=p.terrain.getMinMaxElevation(O);C=(g=F.minElevation)!==null&&g!==void 0?g:h,T=(v=F.maxElevation)!==null&&v!==void 0?v:h}let P=1<<i.z;return new ir([l+i.x/P,i.y/P,C],[l+(i.x+1)/P,(i.y+1)/P,T])}allowVariableZoom(i,l){let h=i.fov*(Math.abs(Math.cos(i.rollInRadians))*i.height+Math.abs(Math.sin(i.rollInRadians))*i.width)/i.height,p=s.ae(78.5-h/2,0,60);return!!l.terrain||i.pitch>p}allowWorldCopies(){return!0}recalculateCache(){}}class rr{constructor(i,l,h){this.points=i,this.planes=l,this.aabb=h}static fromInvProjectionMatrix(i,l=1,h=0){let p=Math.pow(2,h),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{let O=1/(P=s.at([],P,i))[3]/l*p;return s.aR(P,P,[O,O,1/P[3],O])}),v=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{let O=s.aS([],g[P[0]],g[P[1]]),F=s.aS([],g[P[2]],g[P[1]]),N=s.aT([],s.aU([],O,F)),X=-s.aV(N,g[P[1]]);return N.concat(X)}),C=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],T=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let P of g)for(let O=0;O<3;O++)C[O]=Math.min(C[O],P[O]),T[O]=Math.max(T[O],P[O]);return new rr(g,v,new ir(C,T))}}class no{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,l,h){return this._helper.interpolatePadding(i,l,h)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,l,h=!0){this._helper.resize(i,l,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,l){this._helper.overrideNearFarZ(i,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i,l){}constructor(i,l,h,p,g){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Bi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(v,C)=>this.getConstrained(v,C)},i,l,h,p,g),this._coveringTilesDetailsProvider=new fr}clone(){let i=new no;return i.apply(this),i}apply(i,l,h){this._helper.apply(i,l,h)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(i){let l=[new s.aW(0,i)];if(this._helper._renderWorldCopies){let h=this.screenPointToMercatorCoordinate(new s.P(0,0)),p=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),g=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),v=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),C=Math.floor(Math.min(h.x,p.x,g.x,v.x)),T=Math.floor(Math.max(h.x,p.x,g.x,v.x)),P=1;for(let O=C-P;O<=T+P;O++)O!==0&&l.push(new s.aW(O,i))}return l}getCameraFrustum(){return rr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){let l=this.screenPointToLocation(this.centerPoint,i),h=i?i.getElevationForLngLatZoom(l,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(h)}setLocationAtPoint(i,l){let h=s.ag(this.elevation,this.center.lat),p=this.screenPointToMercatorCoordinateAtZ(l,h),g=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,h),v=s.$.fromLngLat(i),C=new s.$(v.x-(p.x-g.x),v.y-(p.y-g.y));this.setCenter(C?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(i,l){return l?this.coordinatePoint(s.$.fromLngLat(i),l.getElevationForLngLatZoom(i,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.$.fromLngLat(i))}screenPointToLocation(i,l){var h;return(h=this.screenPointToMercatorCoordinate(i,l))===null||h===void 0?void 0:h.toLngLat()}screenPointToMercatorCoordinate(i,l){if(l){let h=l.pointCoordinate(i);if(h!=null)return h}return this.screenPointToMercatorCoordinateAtZ(i)}screenPointToMercatorCoordinateAtZ(i,l){let h=l||0,p=[i.x,i.y,0,1],g=[i.x,i.y,1,1];s.at(p,p,this._pixelMatrixInverse),s.at(g,g,this._pixelMatrixInverse);let v=p[3],C=g[3],T=p[1]/v,P=g[1]/C,O=p[2]/v,F=g[2]/C,N=O===F?0:(h-O)/(F-O);return new s.$(s.B.number(p[0]/v,g[0]/C,N)/this.worldSize,s.B.number(T,P,N)/this.worldSize,h)}coordinatePoint(i,l=0,h=this._pixelMatrix){let p=[i.x*this.worldSize,i.y*this.worldSize,l,1];return s.at(p,p,h),new s.P(p[0]/p[3],p[1]/p[3])}getBounds(){let i=Math.max(0,this._helper._height/2-qe(this));return new Ki().extend(this.screenPointToLocation(new s.P(0,i))).extend(this.screenPointToLocation(new s.P(this._helper._width,i))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(i,l){return l?l.pointCoordinate(i)!=null:i.y>this.height/2-qe(this)}calculatePosMatrix(i,l=!1,h){var p;let g=(p=i.key)!==null&&p!==void 0?p:s.aX(i.wrap,i.canonical.z,i.canonical.z,i.canonical.x,i.canonical.y),v=l?this._alignedPosMatrixCache:this._posMatrixCache;if(v.has(g)){let P=v.get(g);return h?P.f32:P.f64}let C=Q(i,this.worldSize);s.N(C,l?this._alignedProjMatrix:this._viewProjMatrix,C);let T={f64:C,f32:new Float32Array(C)};return v.set(g,T),h?T.f32:T.f64}calculateFogMatrix(i){let l=i.key,h=this._fogMatrixCacheF32;if(h.has(l))return h.get(l);let p=Q(i,this.worldSize);return s.N(p,this._fogMatrix,p),h.set(l,new Float32Array(p)),h.get(l)}getConstrained(i,l){l=s.ae(+l,this.minZoom,this.maxZoom);let h={center:new s.Q(i.lng,i.lat),zoom:l},p=this._helper._lngRange;this._helper._renderWorldCopies||p!==null||(p=[-179.9999999999,180-1e-10]);let g=this.tileSize*s.ac(h.zoom),v=0,C=g,T=0,P=g,O=0,F=0,{x:N,y:X}=this.size;if(this._helper._latRange){let Me=this._helper._latRange;v=s.S(Me[1])*g,C=s.S(Me[0])*g,C-v<X&&(O=X/(C-v))}p&&(T=s.aL(s.U(p[0])*g,0,g),P=s.aL(s.U(p[1])*g,0,g),P<T&&(P+=g),P-T<N&&(F=N/(P-T)));let{x:J,y:ge}=On(g,i),me,_e,xe=Math.max(F||0,O||0);if(xe){let Me=new s.P(F?(P+T)/2:J,O?(C+v)/2:ge);return h.center=yo(g,Me).wrap(),h.zoom+=s.ah(xe),h}if(this._helper._latRange){let Me=X/2;ge-Me<v&&(_e=v+Me),ge+Me>C&&(_e=C-Me)}if(p){let Me=(T+P)/2,Te=J;this._helper._renderWorldCopies&&(Te=s.aL(J,Me-g/2,Me+g/2));let ke=N/2;Te-ke<T&&(me=T+ke),Te+ke>P&&(me=P-ke)}if(me!==void 0||_e!==void 0){let Me=new s.P(me??J,_e??ge);h.center=yo(g,Me).wrap()}return h}calculateCenterFromCameraLngLatAlt(i,l,h,p){return this._helper.calculateCenterFromCameraLngLatAlt(i,l,h,p)}_calculateNearFarZIfNeeded(i,l,h){if(!this._helper.autoCalculateNearFarZ)return;let p=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),g=i-p*this._helper._pixelPerMeter/Math.cos(l),v=p<0?g:i,C=Math.PI/2+this.pitchInRadians,T=s.ab(this.fov)*(Math.abs(Math.cos(s.ab(this.roll)))*this.height+Math.abs(Math.sin(s.ab(this.roll)))*this.width)/this.height*(.5+h.y/this.height),P=Math.sin(T)*v/Math.sin(s.ae(Math.PI-C-T,.01,Math.PI-.01)),O=qe(this),F=Math.atan(O/this._helper.cameraToCenterDistance),N=s.ab(.75),X=F>N?2*F*(.5+h.y/(2*O)):N,J=Math.sin(X)*v/Math.sin(s.ae(Math.PI-C-X,.01,Math.PI-.01)),ge=Math.min(P,J);this._helper._farZ=1.01*(Math.cos(Math.PI/2-l)*ge+v),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let i=this.centerOffset,l=On(this.worldSize,this.center),h=l.x,p=l.y;this._helper._pixelPerMeter=s.ag(1,this.center.lat)*this.worldSize;let g=s.ab(Math.min(this.pitch,io)),v=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(g)),C;this._calculateNearFarZIfNeeded(v,g,i),C=new Float64Array(16),s.aY(C,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.an(this._invProjMatrix,C),C[8]=2*-i.x/this._helper._width,C[9]=2*i.y/this._helper._height,this._projectionMatrix=s.aZ(C),s.M(C,C,[1,-1,1]),s.L(C,C,[0,0,-this._helper.cameraToCenterDistance]),s.a_(C,C,-this.rollInRadians),s.a$(C,C,this.pitchInRadians),s.a_(C,C,-this.bearingInRadians),s.L(C,C,[-h,-p,0]),this._mercatorMatrix=s.M([],C,[this.worldSize,this.worldSize,this.worldSize]),s.M(C,C,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,C),s.L(C,C,[0,0,-this.elevation]),this._viewProjMatrix=C,this._invViewProjMatrix=s.an([],C);let T=[0,0,-1,1];s.at(T,T,this._invViewProjMatrix),this._cameraPosition=[T[0]/T[3],T[1]/T[3],T[2]/T[3]],this._fogMatrix=new Float64Array(16),s.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,v,this._helper._farZ),this._fogMatrix[8]=2*-i.x/this.width,this._fogMatrix[9]=2*i.y/this.height,s.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.L(this._fogMatrix,this._fogMatrix,[-h,-p,0]),s.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,C);let P=this._helper._width%2/2,O=this._helper._height%2/2,F=Math.cos(this.bearingInRadians),N=Math.sin(-this.bearingInRadians),X=h-Math.round(h)+F*P+N*O,J=p-Math.round(p)+F*O+N*P,ge=new Float64Array(C);if(s.L(ge,ge,[X>.5?X-1:X,J>.5?J-1:J,0]),this._alignedProjMatrix=ge,C=s.an(new Float64Array(16),this._pixelMatrix),!C)throw new Error("failed to invert matrix");this._pixelMatrixInverse=C,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let i=this.screenPointToMercatorCoordinate(new s.P(0,0)),l=[i.x*this.worldSize,i.y*this.worldSize,0,1];return s.at(l,l,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let i=s.ag(1,this.center.lat)*this.worldSize;return U(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/i).toLngLat()}lngLatToCameraDepth(i,l){let h=s.$.fromLngLat(i),p=[h.x*this.worldSize,h.y*this.worldSize,l,1];return s.at(p,p,this._viewProjMatrix),p[2]/p[3]}getProjectionData(i){let{overscaledTileID:l,aligned:h,applyTerrainMatrix:p}=i,g=this._helper.getMercatorTileCoordinates(l),v=l?this.calculatePosMatrix(l,h,!0):null,C;return C=l&&l.terrainRttPosMatrix32f&&p?l.terrainRttPosMatrix32f:v||s.b0(),{mainMatrix:C,tileMercatorCoords:g,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:C}}isLocationOccluded(i){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(i,l,h){return 1}transformLightDirection(i){return s.aQ(i)}getRayDirectionFromPixel(i){throw new Error("Not implemented.")}projectTileCoordinates(i,l,h,p){let g=this.calculatePosMatrix(h),v;p?(v=[i,l,p(i,l),1],s.at(v,v,g)):(v=[i,l,0,1],Ko(v,v,g));let C=v[3];return{point:new s.P(v[0]/C,v[1]/C),signedDistanceFromCamera:C,isOccluded:!1}}populateCache(i){for(let l of i)this.calculatePosMatrix(l)}getMatrixForModel(i,l){let h=s.$.fromLngLat(i,l),p=h.meterInMercatorCoordinateUnits(),g=s.b1();return s.L(g,g,[h.x,h.y,h.z]),s.a_(g,g,Math.PI),s.a$(g,g,Math.PI/2),s.M(g,g,[-p,p,p]),g}getProjectionDataForCustomLayer(i=!0){let l=new s.Y(0,0,0,0,0),h=this.getProjectionData({overscaledTileID:l,applyGlobeMatrix:i}),p=Q(l,this.worldSize);s.N(p,this._viewProjMatrix,p),h.tileMercatorCoords=[0,0,1,1];let g=[s.Z,s.Z,this.worldSize/this._helper.pixelsPerMeter],v=s.b2();return s.M(v,p,g),h.fallbackMatrix=v,h.mainMatrix=v,h}getFastPathSimpleProjectionMatrix(i){return this.calculatePosMatrix(i)}}function Zt(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function yn(m){if(m.useSlerp)if(m.k<1){let i=s.b3(m.startEulerAngles.roll,m.startEulerAngles.pitch,m.startEulerAngles.bearing),l=s.b3(m.endEulerAngles.roll,m.endEulerAngles.pitch,m.endEulerAngles.bearing),h=new Float64Array(4);s.b4(h,i,l,m.k);let p=s.b5(h);m.tr.setRoll(p.roll),m.tr.setPitch(p.pitch),m.tr.setBearing(p.bearing)}else m.tr.setRoll(m.endEulerAngles.roll),m.tr.setPitch(m.endEulerAngles.pitch),m.tr.setBearing(m.endEulerAngles.bearing);else m.tr.setRoll(s.B.number(m.startEulerAngles.roll,m.endEulerAngles.roll,m.k)),m.tr.setPitch(s.B.number(m.startEulerAngles.pitch,m.endEulerAngles.pitch,m.k)),m.tr.setBearing(s.B.number(m.startEulerAngles.bearing,m.endEulerAngles.bearing,m.k))}function vn(m,i,l,h,p){let g=p.padding,v=On(p.worldSize,l.getNorthWest()),C=On(p.worldSize,l.getNorthEast()),T=On(p.worldSize,l.getSouthEast()),P=On(p.worldSize,l.getSouthWest()),O=s.ab(-h),F=v.rotate(O),N=C.rotate(O),X=T.rotate(O),J=P.rotate(O),ge=new s.P(Math.max(F.x,N.x,J.x,X.x),Math.max(F.y,N.y,J.y,X.y)),me=new s.P(Math.min(F.x,N.x,J.x,X.x),Math.min(F.y,N.y,J.y,X.y)),_e=ge.sub(me),xe=(p.width-(g.left+g.right+i.left+i.right))/_e.x,Me=(p.height-(g.top+g.bottom+i.top+i.bottom))/_e.y;if(Me<0||xe<0)return void Zt();let Te=Math.min(s.ah(p.scale*Math.min(xe,Me)),m.maxZoom),ke=s.P.convert(m.offset),Fe=new s.P((i.left-i.right)/2,(i.top-i.bottom)/2).rotate(s.ab(h)),De=ke.add(Fe).mult(p.scale/s.ac(Te));return{center:yo(p.worldSize,v.add(T).div(2).sub(De)),zoom:Te,bearing:h}}class tl{get useGlobeControls(){return!1}handlePanInertia(i,l){return{easingOffset:i,easingCenter:l.center}}handleMapControlsRollPitchBearingZoom(i,l){i.bearingDelta&&l.setBearing(l.bearing+i.bearingDelta),i.pitchDelta&&l.setPitch(l.pitch+i.pitchDelta),i.rollDelta&&l.setRoll(l.roll+i.rollDelta),i.zoomDelta&&l.setZoom(l.zoom+i.zoomDelta)}handleMapControlsPan(i,l,h){i.around.distSqr(l.centerPoint)<.01||l.setLocationAtPoint(h,i.around)}cameraForBoxAndBearing(i,l,h,p,g){return vn(i,l,h,p,g)}handleJumpToCenterZoom(i,l){i.zoom!==(l.zoom!==void 0?+l.zoom:i.zoom)&&i.setZoom(+l.zoom),l.center!==void 0&&i.setCenter(s.Q.convert(l.center))}handleEaseTo(i,l){let h=i.zoom,p=i.padding,g={roll:i.roll,pitch:i.pitch,bearing:i.bearing},v={roll:l.roll===void 0?i.roll:l.roll,pitch:l.pitch===void 0?i.pitch:l.pitch,bearing:l.bearing===void 0?i.bearing:l.bearing},C=l.zoom!==void 0,T=!i.isPaddingEqual(l.padding),P=!1,O=C?+l.zoom:i.zoom,F=i.centerPoint.add(l.offsetAsPoint),N=i.screenPointToLocation(F),{center:X,zoom:J}=i.getConstrained(s.Q.convert(l.center||N),O??h);ji(i,X);let ge=On(i.worldSize,N),me=On(i.worldSize,X).sub(ge),_e=s.ac(J-h);return P=J!==h,{easeFunc:xe=>{if(P&&i.setZoom(s.B.number(h,J,xe)),s.b6(g,v)||yn({startEulerAngles:g,endEulerAngles:v,tr:i,k:xe,useSlerp:g.roll!=v.roll}),T&&(i.interpolatePadding(p,l.padding,xe),F=i.centerPoint.add(l.offsetAsPoint)),l.around)i.setLocationAtPoint(l.around,l.aroundPoint);else{let Me=s.ac(i.zoom-h),Te=J>h?Math.min(2,_e):Math.max(.5,_e),ke=Math.pow(Te,1-xe),Fe=yo(i.worldSize,ge.add(me.mult(xe*ke)).mult(Me));i.setLocationAtPoint(i.renderWorldCopies?Fe.wrap():Fe,F)}},isZooming:P,elevationCenter:X}}handleFlyTo(i,l){let h=l.zoom!==void 0,p=i.zoom,g=i.getConstrained(s.Q.convert(l.center||l.locationAtOffset),h?+l.zoom:p),v=g.center,C=g.zoom;ji(i,v);let T=On(i.worldSize,l.locationAtOffset),P=On(i.worldSize,v).sub(T),O=P.mag(),F=s.ac(C-p),N;if(l.minZoom!==void 0){let X=Math.min(+l.minZoom,p,C),J=i.getConstrained(v,X).zoom;N=s.ac(J-p)}return{easeFunc:(X,J,ge,me)=>{i.setZoom(X===1?C:p+s.ah(J));let _e=X===1?v:yo(i.worldSize,T.add(P.mult(ge)).mult(J));i.setLocationAtPoint(i.renderWorldCopies?_e.wrap():_e,me)},scaleOfZoom:F,targetCenter:v,scaleOfMinZoom:N,pixelPathLength:O}}}class Yi{constructor(i,l,h){this.blendFunction=i,this.blendColor=l,this.mask=h}}Yi.Replace=[1,0],Yi.disabled=new Yi(Yi.Replace,s.b7.transparent,[!1,!1,!1,!1]),Yi.unblended=new Yi(Yi.Replace,s.b7.transparent,[!0,!0,!0,!0]),Yi.alphaBlended=new Yi([1,771],s.b7.transparent,[!0,!0,!0,!0]);let dr=2305;class Si{constructor(i,l,h){this.enable=i,this.mode=l,this.frontFace=h}}Si.disabled=new Si(!1,1029,dr),Si.backCCW=new Si(!0,1029,dr),Si.frontCCW=new Si(!0,1028,dr);class ui{constructor(i,l,h){this.func=i,this.mask=l,this.range=h}}ui.ReadOnly=!1,ui.ReadWrite=!0,ui.disabled=new ui(519,ui.ReadOnly,[0,1]);let $s=7680;class Yt{constructor(i,l,h,p,g,v){this.test=i,this.ref=l,this.mask=h,this.fail=p,this.depthFail=g,this.pass=v}}Yt.disabled=new Yt({func:519,mask:0},0,0,$s,$s,$s);let Ea=new WeakMap;function xn(m){var i;if(Ea.has(m))return Ea.get(m);{let l=(i=m.getParameter(m.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Ea.set(m,l),l}}class gu{get awaitingQuery(){return!!this._readbackQueue}constructor(i){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=i;let l=i.context,h=l.gl;this._texFormat=h.RGBA,this._texType=h.UNSIGNED_BYTE;let p=new s.aI;p.emplaceBack(-1,-1),p.emplaceBack(2,-1),p.emplaceBack(-1,2);let g=new s.aK;g.emplaceBack(0,1,2),this._fullscreenTriangle=new Qo(l.createVertexBuffer(p,Wr.members),l.createIndexBuffer(g),s.aJ.simpleSegment(0,0,p.length,g.length)),this._resultBuffer=new Uint8Array(4),l.activeTexture.set(h.TEXTURE1);let v=h.createTexture();h.bindTexture(h.TEXTURE_2D,v),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texImage2D(h.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=l.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(v),xn(h)&&(this._pbo=h.createBuffer(),h.bindBuffer(h.PIXEL_PACK_BUFFER,this._pbo),h.bufferData(h.PIXEL_PACK_BUFFER,4,h.STREAM_READ),h.bindBuffer(h.PIXEL_PACK_BUFFER,null))}destroy(){let i=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),i.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(i,l){let h=this._updateCount;return this._readbackQueue?h>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():h>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(i,l),this._updateCount++,this._measuredError}_bindFramebuffer(){let i=this._cachedRenderContext.context,l=i.gl;i.activeTexture.set(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,this._fbo.colorAttachment.get()),i.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(i,l){let h=this._cachedRenderContext.context,p=h.gl;if(this._bindFramebuffer(),h.viewport.set([0,0,this._texWidth,this._texHeight]),h.clear({color:s.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(h,p.TRIANGLES,ui.disabled,Yt.disabled,Yi.unblended,Si.disabled,((g,v)=>({u_input:g,u_output_expected:v}))(i,l),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&xn(p)){p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.readBuffer(p.COLOR_ATTACHMENT0),p.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),p.bindBuffer(p.PIXEL_PACK_BUFFER,null);let g=p.fenceSync(p.SYNC_GPU_COMMANDS_COMPLETE,0);p.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:g}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let i=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&xn(i)){let l=i.clientWaitSync(this._readbackQueue.sync,0,0);if(l===i.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(l===i.TIMEOUT_EXPIRED)return;i.bindBuffer(i.PIXEL_PACK_BUFFER,this._pbo),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),i.bindBuffer(i.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),i.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=gu._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(i){let l=0;return l+=i[0]/256,l+=i[1]/65536,l+=i[2]/16777216,i[3]<127&&(l=-l),l/128}}let _s=s.Z/128;function Wt(m,i){let l=m.granularity!==void 0?Math.max(m.granularity,1):1,h=l+(m.generateBorders?2:0),p=l+(m.extendToNorthPole||m.generateBorders?1:0)+(m.extendToSouthPole||m.generateBorders?1:0),g=h+1,v=p+1,C=m.generateBorders?-1:0,T=m.generateBorders||m.extendToNorthPole?-1:0,P=l+(m.generateBorders?1:0),O=l+(m.generateBorders||m.extendToSouthPole?1:0),F=g*v,N=h*p*6,X=g*v>65536;if(X&&i==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let J=X||i==="32bit",ge=new Int16Array(2*F),me=0;for(let Me=T;Me<=O;Me++)for(let Te=C;Te<=P;Te++){let ke=Te/l*s.Z;Te===-1&&(ke=-64),Te===l+1&&(ke=s.Z+_s);let Fe=Me/l*s.Z;Me===-1&&(Fe=m.extendToNorthPole?s.b9:-64),Me===l+1&&(Fe=m.extendToSouthPole?s.ba:s.Z+_s),ge[me++]=ke,ge[me++]=Fe}let _e=J?new Uint32Array(N):new Uint16Array(N),xe=0;for(let Me=0;Me<p;Me++)for(let Te=0;Te<h;Te++){let ke=Te+1+Me*g,Fe=Te+(Me+1)*g,De=Te+1+(Me+1)*g;_e[xe++]=Te+Me*g,_e[xe++]=Fe,_e[xe++]=ke,_e[xe++]=ke,_e[xe++]=Fe,_e[xe++]=De}return{vertices:ge.buffer.slice(0),indices:_e.buffer.slice(0),uses32bitIndices:J}}let vi=new s.aH({fill:new s.bb(128,2),line:new s.bb(512,0),tile:new s.bb(128,32),stencil:new s.bb(128,1),circle:3});class xo{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return pr.projectionGlobe}get vertexShaderPreludeCode(){return pr.projectionMercator.vertexSource}get subdivisionGranularity(){return vi}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(i){this._errorMeasurement||(this._errorMeasurement=new gu(i));let l=s.S(this._errorQueryLatitudeDegrees),h=2*Math.atan(Math.exp(Math.PI-l*Math.PI*2))-.5*Math.PI,p=this._errorMeasurement.updateErrorLoop(l,h),g=I.now();p!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=p,this._errorMeasurementLastChangeTime=g);let v=Math.min(Math.max((g-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bd(v))}_getMeshKey(i){return`${i.granularity.toString(36)}_${i.generateBorders?"b":""}${i.extendToNorthPole?"n":""}${i.extendToSouthPole?"s":""}`}getMeshFromTileID(i,l,h,p,g){let v=(g==="stencil"?vi.stencil:vi.tile).getGranularityForZoomLevel(l.z);return this._getMesh(i,{granularity:v,generateBorders:h,extendToNorthPole:l.y===0&&p,extendToSouthPole:l.y===(1<<l.z)-1&&p})}_getMesh(i,l){let h=this._getMeshKey(l);if(h in this._tileMeshCache)return this._tileMeshCache[h];let p=function(g,v){let C=Wt(v,"16bit"),T=s.aI.deserialize({arrayBuffer:C.vertices,length:C.vertices.byteLength/2/2}),P=s.aK.deserialize({arrayBuffer:C.indices,length:C.indices.byteLength/2/3});return new Qo(g.createVertexBuffer(T,Wr.members),g.createIndexBuffer(P),s.aJ.simpleSegment(0,0,T.length,P.length))}(i,l);return this._tileMeshCache[h]=p,p}recalculate(i){}hasTransition(){let i=I.now(),l=!1;return l=l||(i-this._errorMeasurementLastChangeTime)/1e3<.7,l=l||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,l}setErrorQueryLatitudeDegrees(i){this._errorQueryLatitudeDegrees=i}}let Sa=new s.r({type:new s.D(s.v.projection.type)});class Oo extends s.E{constructor(i){super(),this._transitionable=new s.T(Sa),this.setProjection(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0)),this._mercatorProjection=new Al,this._verticalPerspectiveProjection=new xo}get transitionState(){let i=this.properties.get("type");if(typeof i=="string"&&i==="mercator")return 0;if(typeof i=="string"&&i==="vertical-perspective")return 1;if(i instanceof s.be){if(i.from==="vertical-perspective"&&i.to==="mercator")return 1-i.transition;if(i.from==="mercator"&&i.to==="vertical-perspective")return i.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(i){this._mercatorProjection.updateGPUdependent(i),this._verticalPerspectiveProjection.updateGPUdependent(i)}getMeshFromTileID(i,l,h,p,g){return this.currentProjection.getMeshFromTileID(i,l,h,p,g)}setProjection(i){this._transitionable.setValue("type",i?.type||"mercator")}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}setErrorQueryLatitudeDegrees(i){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(i),this._mercatorProjection.setErrorQueryLatitudeDegrees(i)}}function Ta(m){let i=Gs(m.worldSize,m.center.lat);return 2*Math.PI*i}function Ma(m,i,l,h,p){let g=1/(1<<p),v=i/s.Z*g+h*g,C=s.bg((m/s.Z*g+l*g)*Math.PI*2+Math.PI,2*Math.PI),T=2*Math.atan(Math.exp(Math.PI-v*Math.PI*2))-.5*Math.PI,P=Math.cos(T),O=new Float64Array(3);return O[0]=Math.sin(C)*P,O[1]=Math.sin(T),O[2]=Math.cos(C)*P,O}function Jr(m){return function(i,l){let h=Math.cos(l),p=new Float64Array(3);return p[0]=Math.sin(i)*h,p[1]=Math.sin(l),p[2]=Math.cos(i)*h,p}(m.lng*Math.PI/180,m.lat*Math.PI/180)}function Gs(m,i){return m/(2*Math.PI)/Math.cos(i*Math.PI/180)}function Pl(m){let i=Math.asin(m[1])/Math.PI*180,l=Math.sqrt(m[0]*m[0]+m[2]*m[2]);if(l>1e-6){let h=m[0]/l,p=Math.acos(m[2]/l),g=(h>0?p:-p)/Math.PI*180;return new s.Q(s.aL(g,-180,180),i)}return new s.Q(0,i)}function Ws(m){return Math.cos(m*Math.PI/180)}function en(m,i){let l=Ws(m),h=Ws(i);return s.ah(h/l)}function uc(m,i){let l=m.rotate(i.bearingInRadians),h=i.zoom+en(i.center.lat,0),p=s.bc(1/Ws(i.center.lat),1/Ws(Math.min(Math.abs(i.center.lat),60)),s.bf(h,7,3,0,1)),g=360/Ta({worldSize:i.worldSize,center:{lat:i.center.lat}});return new s.Q(i.center.lng-l.x*g*p,s.ae(i.center.lat+l.y*g,-85.051129,s.af))}function dc(m){let i=.5*m,l=Math.sin(i),h=Math.cos(i);return Math.log(l+h)-Math.log(h-l)}function Sd(m,i,l,h){let p=m.lat+l*h;if(Math.abs(l)>1){let g=(Math.sign(m.lat+l)!==Math.sign(m.lat)?-Math.abs(m.lat):Math.abs(m.lat))*Math.PI/180,v=Math.abs(m.lat+l)*Math.PI/180,C=dc(g+h*(v-g)),T=dc(g),P=dc(v);return new s.Q(m.lng+i*((C-T)/(P-T)),p)}return new s.Q(m.lng+i*h,p)}class lp{constructor(i){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=i}recalculateCache(){if(!this._hadAnyChanges)return;let i=this._cachePrevious;this._cachePrevious=this._cache,this._cache=i,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(i,l,h,p){let g=`${i.z}_${i.x}_${i.y}`,v=this._cache.get(g);if(v)return v;let C=this._cachePrevious.get(g);if(C)return this._cache.set(g,C),C;let T=this._aabbFactory(i,l,h,p);return this._cache.set(g,T),this._hadAnyChanges=!0,T}}function wn(m,i,l){let h=m-i;return h<0?-h:Math.max(0,h-l)}function Dl(m,i,l,h,p){let g=m-l,v;return v=g<0?Math.min(-g,1+g-p):g>1?Math.min(Math.max(g-p,0),1-g):0,Math.max(v,wn(i,h,p))}class Jo{constructor(){this._aabbCache=new lp(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(i,l,h,p){let g=1<<h.z,v=1/g,C=h.x/g,T=h.y/g,P=2;return P=Math.min(P,Dl(i,l,C,T,v)),P=Math.min(P,Dl(i,l,C+.5,-T-v,v)),P=Math.min(P,Dl(i,l,C+.5,2-T-v,v)),P}getWrap(i,l,h){let p=1<<l.z,g=1/p,v=l.x/p,C=wn(i.x,v,g),T=wn(i.x,v-1,g),P=wn(i.x,v+1,g),O=Math.min(C,T,P);return O===P?1:O===T?-1:0}allowVariableZoom(i,l){return Pe(i,l)>4}allowWorldCopies(){return!1}getTileAABB(i,l,h,p){return this._aabbCache.getTileAABB(i,l,h,p)}_computeTileAABB(i,l,h,p){if(i.z<=0)return new ir([-1,-1,-1],[1,1,1]);if(i.z===1)return new ir([i.x===0?-1:0,i.y===0?0:-1,-1],[i.x===0?0:1,i.y===0?1:0,1]);{let g=[Ma(0,0,i.x,i.y,i.z),Ma(s.Z,0,i.x,i.y,i.z),Ma(s.Z,s.Z,i.x,i.y,i.z),Ma(0,s.Z,i.x,i.y,i.z)],v=[1,1,1],C=[-1,-1,-1];for(let T of g)for(let P=0;P<3;P++)v[P]=Math.min(v[P],T[P]),C[P]=Math.max(C[P],T[P]);if(i.y===0||i.y===(1<<i.z)-1){let T=[0,i.y===0?1:-1,0];for(let P=0;P<3;P++)v[P]=Math.min(v[P],T[P]),C[P]=Math.max(C[P],T[P])}return new ir(v,C)}}}class Ia{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,l,h){return this._helper.interpolatePadding(i,l,h)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,l){this._helper.resize(i,l)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,l){this._helper.overrideNearFarZ(i,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i){}constructor(){this._cachedClippingPlane=s.bk(),this._projectionMatrix=s.b1(),this._globeViewProjMatrix32f=s.b0(),this._globeViewProjMatrixNoCorrection=s.b1(),this._globeViewProjMatrixNoCorrectionInverted=s.b1(),this._globeProjMatrixInverted=s.b1(),this._cameraPosition=s.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Bi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(i,l)=>this.getConstrained(i,l)}),this._coveringTilesDetailsProvider=new Jo}clone(){let i=new Ia;return i.apply(this),i}apply(i,l){this._globeLatitudeErrorCorrectionRadians=l||0,this._helper.apply(i)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let i=s.bh();return i[0]=this._cameraPosition[0],i[1]=this._cameraPosition[1],i[2]=this._cameraPosition[2],i}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(i){let{overscaledTileID:l,applyGlobeMatrix:h}=i,p=this._helper.getMercatorTileCoordinates(l);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:p,clippingPlane:this._cachedClippingPlane,projectionTransition:h?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(i){let l=this.pitchInRadians,h=this.cameraToCenterDistance/i,p=Math.sin(l)*h,g=Math.cos(l)*h+1,v=1/Math.sqrt(p*p+g*g)*1,C=-p,T=g,P=Math.sqrt(C*C+T*T);C/=P,T/=P;let O=[0,C,T];s.bl(O,O,[0,0,0],-this.bearingInRadians),s.bm(O,O,[0,0,0],-1*this.center.lat*Math.PI/180),s.bn(O,O,[0,0,0],this.center.lng*Math.PI/180);let F=1/s.bo(O);return s.aO(O,O,F),[...O,-v*F]}isLocationOccluded(i){return!this.isSurfacePointVisible(Jr(i))}transformLightDirection(i){let l=this._helper._center.lng*Math.PI/180,h=this._helper._center.lat*Math.PI/180,p=Math.cos(h),g=[Math.sin(l)*p,Math.sin(h),Math.cos(l)*p],v=[g[2],0,-g[0]],C=[0,0,0];s.aU(C,v,g),s.aT(v,v),s.aT(C,C);let T=[0,0,0];return s.aT(T,[v[0]*i[0]+C[0]*i[1]+g[0]*i[2],v[1]*i[0]+C[1]*i[1]+g[1]*i[2],v[2]*i[0]+C[2]*i[1]+g[2]*i[2]]),T}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(i,l,h){let p=function(C,T,P){let O=1/(1<<P.z);return new s.$(C/s.Z*O+P.x*O,T/s.Z*O+P.y*O)}(i,l,h.canonical),g=(v=p.y,[s.bg(p.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-v*Math.PI*2))-.5*Math.PI]);var v;return this.getCircleRadiusCorrection()/Math.cos(g[1])}projectTileCoordinates(i,l,h,p){let g=h.canonical,v=Ma(i,l,g.x,g.y,g.z),C=1+(p?p(i,l):0)/s.bu,T=[v[0]*C,v[1]*C,v[2]*C,1];s.at(T,T,this._globeViewProjMatrixNoCorrection);let P=this._cachedClippingPlane,O=P[0]*v[0]+P[1]*v[1]+P[2]*v[2]+P[3]<0;return{point:new s.P(T[0]/T[3],T[1]/T[3]),signedDistanceFromCamera:T[3],isOccluded:O}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let i=Gs(this.worldSize,this.center.lat),l=s.b2(),h=s.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*i),s.aY(l,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let p=this.centerOffset;l[8]=2*-p.x/this._helper._width,l[9]=2*p.y/this._helper._height,this._projectionMatrix=s.aZ(l),this._globeProjMatrixInverted=s.b2(),s.an(this._globeProjMatrixInverted,l),s.L(l,l,[0,0,-this.cameraToCenterDistance]),s.a_(l,l,this.rollInRadians),s.a$(l,l,-this.pitchInRadians),s.a_(l,l,this.bearingInRadians),s.L(l,l,[0,0,-i]);let g=s.bh();g[0]=i,g[1]=i,g[2]=i,s.a$(h,l,this.center.lat*Math.PI/180),s.bp(h,h,-this.center.lng*Math.PI/180),s.M(h,h,g),this._globeViewProjMatrixNoCorrection=h,s.a$(l,l,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bp(l,l,-this.center.lng*Math.PI/180),s.M(l,l,g),this._globeViewProjMatrix32f=new Float32Array(l),this._globeViewProjMatrixNoCorrectionInverted=s.b2(),s.an(this._globeViewProjMatrixNoCorrectionInverted,h);let v=s.bh();this._cameraPosition=s.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/i,s.bl(this._cameraPosition,this._cameraPosition,v,-this.rollInRadians),s.bm(this._cameraPosition,this._cameraPosition,v,this.pitchInRadians),s.bl(this._cameraPosition,this._cameraPosition,v,-this.bearingInRadians),s.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bm(this._cameraPosition,this._cameraPosition,v,-this.center.lat*Math.PI/180),s.bn(this._cameraPosition,this._cameraPosition,v,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(i);let C=s.aZ(this._globeViewProjMatrixNoCorrectionInverted);s.M(C,C,[1,1,-1]),this._cachedFrustum=rr.fromInvProjectionMatrix(C)}calculateFogMatrix(i){s.w("calculateFogMatrix is not supported on globe projection.");let l=s.b2();return s.ad(l),l}getVisibleUnwrappedCoordinates(i){return[new s.aW(0,i)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){i&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,l){if(!this._globeViewProjMatrixNoCorrection)return 1;let h=Jr(i);s.aO(h,h,1+l/s.bu);let p=s.bk();return s.at(p,[h[0],h[1],h[2],1],this._globeViewProjMatrixNoCorrection),p[2]/p[3]}populateCache(i){}getBounds(){let i=.5*this.width,l=.5*this.height,h=[new s.P(0,0),new s.P(i,0),new s.P(this.width,0),new s.P(this.width,l),new s.P(this.width,this.height),new s.P(i,this.height),new s.P(0,this.height),new s.P(0,l)],p=[];for(let F of h)p.push(this.unprojectScreenPoint(F));let g=0,v=0,C=0,T=0,P=this.center;for(let F of p){let N=s.bq(P.lng,F.lng),X=s.bq(P.lat,F.lat);N<v&&(v=N),N>g&&(g=N),X<T&&(T=X),X>C&&(C=X)}let O=[P.lng+v,P.lat+T,P.lng+g,P.lat+C];return this.isSurfacePointOnScreen([0,1,0])&&(O[3]=90,O[0]=-180,O[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(O[1]=-90,O[0]=-180,O[2]=180),new Ki(O)}getConstrained(i,l){let h=s.ae(i.lat,-85.051129,s.af),p=s.ae(+l,this.minZoom+en(0,h),this.maxZoom);return{center:new s.Q(i.lng,h),zoom:p}}calculateCenterFromCameraLngLatAlt(i,l,h,p){return this._helper.calculateCenterFromCameraLngLatAlt(i,l,h,p)}setLocationAtPoint(i,l){let h=Jr(this.unprojectScreenPoint(l)),p=Jr(i),g=s.bh();s.br(g);let v=s.bh();s.bn(v,h,g,-this.center.lng*Math.PI/180),s.bm(v,v,g,this.center.lat*Math.PI/180);let C=p[0]*p[0]+p[2]*p[2],T=v[0]*v[0];if(C<T)return;let P=Math.sqrt(C-T),O=-P,F=s.bs(p[0],p[2],v[0],P),N=s.bs(p[0],p[2],v[0],O),X=s.bh();s.bn(X,p,g,-F);let J=s.bs(X[1],X[2],v[1],v[2]),ge=s.bh();s.bn(ge,p,g,-N);let me=s.bs(ge[1],ge[2],v[1],v[2]),_e=.5*Math.PI,xe=J>=-_e&&J<=_e,Me=me>=-_e&&me<=_e,Te,ke;if(xe&&Me){let lt=this.center.lng*Math.PI/180,et=this.center.lat*Math.PI/180;s.bv(F,lt)+s.bv(J,et)<s.bv(N,lt)+s.bv(me,et)?(Te=F,ke=J):(Te=N,ke=me)}else if(xe)Te=F,ke=J;else{if(!Me)return;Te=N,ke=me}let Fe=Te/Math.PI*180,De=ke/Math.PI*180,We=this.center.lat;this.setCenter(new s.Q(Fe,s.ae(De,-90,90))),this.setZoom(this.zoom+en(We,this.center.lat))}locationToScreenPoint(i,l){let h=Jr(i);if(l){let p=l.getElevationForLngLatZoom(i,this._helper._tileZoom);s.aO(h,h,1+p/s.bu)}return this._projectSurfacePointToScreen(h)}_projectSurfacePointToScreen(i){let l=s.bk();return s.at(l,[...i,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],new s.P((.5*l[0]+.5)*this.width,(.5*-l[1]+.5)*this.height)}screenPointToMercatorCoordinate(i,l){if(l){let h=l.pointCoordinate(i);if(h)return h}return s.$.fromLngLat(this.unprojectScreenPoint(i))}screenPointToLocation(i,l){var h;return(h=this.screenPointToMercatorCoordinate(i,l))===null||h===void 0?void 0:h.toLngLat()}isPointOnMapSurface(i,l){let h=this._cameraPosition,p=this.getRayDirectionFromPixel(i);return!!this.rayPlanetIntersection(h,p)}getRayDirectionFromPixel(i){let l=s.bk();l[0]=i.x/this.width*2-1,l[1]=-1*(i.y/this.height*2-1),l[2]=1,l[3]=1,s.at(l,l,this._globeViewProjMatrixNoCorrectionInverted),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3];let h=s.bh();h[0]=l[0]-this._cameraPosition[0],h[1]=l[1]-this._cameraPosition[1],h[2]=l[2]-this._cameraPosition[2];let p=s.bh();return s.aT(p,h),p}isSurfacePointVisible(i){let l=this._cachedClippingPlane;return l[0]*i[0]+l[1]*i[1]+l[2]*i[2]+l[3]>=0}isSurfacePointOnScreen(i){if(!this.isSurfacePointVisible(i))return!1;let l=s.bk();return s.at(l,[...i,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3],l[0]>-1&&l[0]<1&&l[1]>-1&&l[1]<1&&l[2]>-1&&l[2]<1}rayPlanetIntersection(i,l){let h=s.aV(i,l),p=s.bh(),g=s.bh();s.aO(g,l,h),s.aS(p,i,g);let v=1-s.aV(p,p);if(v<0)return null;let C=s.aV(i,i)-1,T=-h+(h<0?1:-1)*Math.sqrt(v),P=C/T,O=T;return{tMin:Math.min(P,O),tMax:Math.max(P,O)}}unprojectScreenPoint(i){let l=this._cameraPosition,h=this.getRayDirectionFromPixel(i),p=this.rayPlanetIntersection(l,h);if(p){let O=s.bh();s.aP(O,l,[h[0]*p.tMin,h[1]*p.tMin,h[2]*p.tMin]);let F=s.bh();return s.aT(F,O),Pl(F)}let g=this._cachedClippingPlane,v=g[0]*h[0]+g[1]*h[1]+g[2]*h[2],C=-s.bt(g,l)/v,T=s.bh();if(C>0)s.aP(T,l,[h[0]*C,h[1]*C,h[2]*C]);else{let O=s.bh();s.aP(O,l,[2*h[0],2*h[1],2*h[2]]);let F=s.bt(this._cachedClippingPlane,O);s.aS(T,O,[this._cachedClippingPlane[0]*F,this._cachedClippingPlane[1]*F,this._cachedClippingPlane[2]*F])}let P=function(O){let F=s.bh();return F[0]=O[0]*-O[3],F[1]=O[1]*-O[3],F[2]=O[2]*-O[3],{center:F,radius:Math.sqrt(1-O[3]*O[3])}}(g);return Pl(function(O,F,N){let X=s.bh();s.aS(X,N,O);let J=s.bh();return s.bi(J,O,X,F/s.bj(X)),J}(P.center,P.radius,T))}getMatrixForModel(i,l){let h=s.Q.convert(i),p=1/s.bu,g=s.b1();return s.bp(g,g,h.lng/180*Math.PI),s.a$(g,g,-h.lat/180*Math.PI),s.L(g,g,[0,0,1+l/s.bu]),s.a$(g,g,.5*Math.PI),s.M(g,g,[p,p,p]),g}getProjectionDataForCustomLayer(i=!0){let l=this.getProjectionData({overscaledTileID:new s.Y(0,0,0,0,0),applyGlobeMatrix:i});return l.tileMercatorCoords=[0,0,1,1],l}getFastPathSimpleProjectionMatrix(i){}}class $n{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,l,h){return this._helper.interpolatePadding(i,l,h)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,l,h=!0){this._helper.resize(i,l,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,l){this._helper.overrideNearFarZ(i,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(i,l){this._globeness=i,this._globeLatitudeErrorCorrectionRadians=l,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Bi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(i,l)=>this.getConstrained(i,l)}),this._globeness=1,this._mercatorTransform=new no,this._verticalPerspectiveTransform=new Ia}clone(){let i=new $n;return i._globeness=this._globeness,i._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,i.apply(this),i}apply(i){this._helper.apply(i),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(i){let l=this._mercatorTransform.getProjectionData(i),h=this._verticalPerspectiveTransform.getProjectionData(i);return{mainMatrix:this.isGlobeRendering?h.mainMatrix:l.mainMatrix,clippingPlane:h.clippingPlane,tileMercatorCoords:h.tileMercatorCoords,projectionTransition:i.applyGlobeMatrix?this._globeness:0,fallbackMatrix:l.fallbackMatrix}}isLocationOccluded(i){return this.currentTransform.isLocationOccluded(i)}transformLightDirection(i){return this.currentTransform.transformLightDirection(i)}getPixelScale(){return s.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(i,l,h){let p=this._mercatorTransform.getPitchedTextCorrection(i,l,h),g=this._verticalPerspectiveTransform.getPitchedTextCorrection(i,l,h);return s.bc(p,g,this._globeness)}projectTileCoordinates(i,l,h,p){return this.currentTransform.projectTileCoordinates(i,l,h,p)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(i){return this.currentTransform.calculateFogMatrix(i)}getVisibleUnwrappedCoordinates(i){return this.currentTransform.getVisibleUnwrappedCoordinates(i)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(i){this._mercatorTransform.recalculateZoomAndCenter(i),this._verticalPerspectiveTransform.recalculateZoomAndCenter(i)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,l){return this.currentTransform.lngLatToCameraDepth(i,l)}populateCache(i){this._mercatorTransform.populateCache(i),this._verticalPerspectiveTransform.populateCache(i)}getBounds(){return this.currentTransform.getBounds()}getConstrained(i,l){return this.currentTransform.getConstrained(i,l)}calculateCenterFromCameraLngLatAlt(i,l,h,p){return this._helper.calculateCenterFromCameraLngLatAlt(i,l,h,p)}setLocationAtPoint(i,l){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(i,l),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(i,l),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(i,l){return this.currentTransform.locationToScreenPoint(i,l)}screenPointToMercatorCoordinate(i,l){return this.currentTransform.screenPointToMercatorCoordinate(i,l)}screenPointToLocation(i,l){return this.currentTransform.screenPointToLocation(i,l)}isPointOnMapSurface(i,l){return this.currentTransform.isPointOnMapSurface(i,l)}getRayDirectionFromPixel(i){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(i)}getMatrixForModel(i,l){return this.currentTransform.getMatrixForModel(i,l)}getProjectionDataForCustomLayer(i=!0){let l=this._mercatorTransform.getProjectionDataForCustomLayer(i);if(!this.isGlobeRendering)return l;let h=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(i);return h.fallbackMatrix=l.mainMatrix,h}getFastPathSimpleProjectionMatrix(i){return this.currentTransform.getFastPathSimpleProjectionMatrix(i)}}class wo{get useGlobeControls(){return!0}handlePanInertia(i,l){let h=uc(i,l);return Math.abs(h.lng-l.center.lng)>180&&(h.lng=l.center.lng+179.5*Math.sign(h.lng-l.center.lng)),{easingCenter:h,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(i,l){let h=i.around,p=l.screenPointToLocation(h);i.bearingDelta&&l.setBearing(l.bearing+i.bearingDelta),i.pitchDelta&&l.setPitch(l.pitch+i.pitchDelta),i.rollDelta&&l.setRoll(l.roll+i.rollDelta);let g=l.zoom;i.zoomDelta&&l.setZoom(l.zoom+i.zoomDelta);let v=l.zoom-g;if(v===0)return;let C=s.bq(l.center.lng,p.lng),T=C/(Math.abs(C/180)+1),P=s.bq(l.center.lat,p.lat),O=l.getRayDirectionFromPixel(h),F=l.cameraPosition,N=-1*s.aV(F,O),X=s.bh();s.aP(X,F,[O[0]*N,O[1]*N,O[2]*N]);let J=s.bo(X)-1,ge=Math.exp(.5*-Math.max(J-.3,0)),me=Gs(l.worldSize,l.center.lat)/Math.min(l.width,l.height),_e=s.bf(me,.9,.5,1,.25),xe=(1-s.ac(-v))*Math.min(ge,_e),Me=l.center.lat,Te=l.zoom,ke=new s.Q(l.center.lng+T*xe,s.ae(l.center.lat+P*xe,-85.051129,s.af));l.setLocationAtPoint(p,h);let Fe=l.center,De=s.bf(Math.abs(C),45,85,0,1),We=s.bf(me,.75,.35,0,1),lt=Math.pow(Math.max(De,We),.25),et=s.bq(Fe.lng,ke.lng),rt=s.bq(Fe.lat,ke.lat);l.setCenter(new s.Q(Fe.lng+et*lt,Fe.lat+rt*lt).wrap()),l.setZoom(Te+en(Me,l.center.lat))}handleMapControlsPan(i,l,h){if(!i.panDelta)return;let p=l.center.lat,g=l.zoom;l.setCenter(uc(i.panDelta,l).wrap()),l.setZoom(g+en(p,l.center.lat))}cameraForBoxAndBearing(i,l,h,p,g){let v=vn(i,l,h,p,g),C=l.left/g.width*2-1,T=(g.width-l.right)/g.width*2-1,P=l.top/g.height*-2+1,O=(g.height-l.bottom)/g.height*-2+1,F=s.bq(h.getWest(),h.getEast())<0,N=F?h.getEast():h.getWest(),X=F?h.getWest():h.getEast(),J=Math.max(h.getNorth(),h.getSouth()),ge=Math.min(h.getNorth(),h.getSouth()),me=N+.5*s.bq(N,X),_e=J+.5*s.bq(J,ge),xe=g.clone();xe.setCenter(v.center),xe.setBearing(v.bearing),xe.setPitch(0),xe.setRoll(0),xe.setZoom(v.zoom);let Me=xe.modelViewProjectionMatrix,Te=[Jr(h.getNorthWest()),Jr(h.getNorthEast()),Jr(h.getSouthWest()),Jr(h.getSouthEast()),Jr(new s.Q(X,_e)),Jr(new s.Q(N,_e)),Jr(new s.Q(me,J)),Jr(new s.Q(me,ge))],ke=Jr(v.center),Fe=Number.POSITIVE_INFINITY;for(let De of Te)C<0&&(Fe=wo.getLesserNonNegativeNonNull(Fe,wo.solveVectorScale(De,ke,Me,"x",C))),T>0&&(Fe=wo.getLesserNonNegativeNonNull(Fe,wo.solveVectorScale(De,ke,Me,"x",T))),P>0&&(Fe=wo.getLesserNonNegativeNonNull(Fe,wo.solveVectorScale(De,ke,Me,"y",P))),O<0&&(Fe=wo.getLesserNonNegativeNonNull(Fe,wo.solveVectorScale(De,ke,Me,"y",O)));if(Number.isFinite(Fe)&&Fe!==0)return v.zoom=xe.zoom+s.ah(Fe),v;Zt()}handleJumpToCenterZoom(i,l){let h=i.center.lat,p=i.getConstrained(l.center?s.Q.convert(l.center):i.center,i.zoom).center;i.setCenter(p.wrap());let g=l.zoom!==void 0?+l.zoom:i.zoom+en(h,p.lat);i.zoom!==g&&i.setZoom(g)}handleEaseTo(i,l){let h=i.zoom,p=i.center,g=i.padding,v={roll:i.roll,pitch:i.pitch,bearing:i.bearing},C={roll:l.roll===void 0?i.roll:l.roll,pitch:l.pitch===void 0?i.pitch:l.pitch,bearing:l.bearing===void 0?i.bearing:l.bearing},T=l.zoom!==void 0,P=!i.isPaddingEqual(l.padding),O=!1,F=l.center?s.Q.convert(l.center):p,N=i.getConstrained(F,h).center;ji(i,N);let X=i.clone();X.setCenter(N),X.setZoom(T?+l.zoom:h+en(p.lat,F.lat)),X.setBearing(l.bearing);let J=new s.P(s.ae(i.centerPoint.x+l.offsetAsPoint.x,0,i.width),s.ae(i.centerPoint.y+l.offsetAsPoint.y,0,i.height));X.setLocationAtPoint(N,J);let ge=(l.offset&&l.offsetAsPoint.mag())>0?X.center:N,me=T?+l.zoom:h+en(p.lat,ge.lat),_e=h+en(p.lat,0),xe=me+en(ge.lat,0),Me=s.bq(p.lng,ge.lng),Te=s.bq(p.lat,ge.lat),ke=s.ac(xe-_e);return O=me!==h,{easeFunc:Fe=>{if(s.b6(v,C)||yn({startEulerAngles:v,endEulerAngles:C,tr:i,k:Fe,useSlerp:v.roll!=C.roll}),P&&i.interpolatePadding(g,l.padding,Fe),l.around)s.w("Easing around a point is not supported under globe projection."),i.setLocationAtPoint(l.around,l.aroundPoint);else{let De=xe>_e?Math.min(2,ke):Math.max(.5,ke),We=Math.pow(De,1-Fe),lt=Sd(p,Me,Te,Fe*We);i.setCenter(lt.wrap())}if(O){let De=s.B.number(_e,xe,Fe)+en(0,i.center.lat);i.setZoom(De)}},isZooming:O,elevationCenter:ge}}handleFlyTo(i,l){let h=l.zoom!==void 0,p=i.center,g=i.zoom,v=i.padding,C=!i.isPaddingEqual(l.padding),T=i.getConstrained(s.Q.convert(l.center||l.locationAtOffset),g).center,P=h?+l.zoom:i.zoom+en(i.center.lat,T.lat),O=i.clone();O.setCenter(T),O.setZoom(P),O.setBearing(l.bearing);let F=new s.P(s.ae(i.centerPoint.x+l.offsetAsPoint.x,0,i.width),s.ae(i.centerPoint.y+l.offsetAsPoint.y,0,i.height));O.setLocationAtPoint(T,F);let N=O.center;ji(i,N);let X=function(Te,ke,Fe){let De=Jr(ke),We=Jr(Fe),lt=s.aV(De,We),et=Math.acos(lt),rt=Ta(Te);return et/(2*Math.PI)*rt}(i,p,N),J=g+en(p.lat,0),ge=P+en(N.lat,0),me=s.ac(ge-J),_e;if(typeof l.minZoom=="number"){let Te=+l.minZoom+en(N.lat,0),ke=Math.min(Te,J,ge)+en(0,N.lat),Fe=i.getConstrained(N,ke).zoom+en(N.lat,0);_e=s.ac(Fe-J)}let xe=s.bq(p.lng,N.lng),Me=s.bq(p.lat,N.lat);return{easeFunc:(Te,ke,Fe,De)=>{let We=Sd(p,xe,Me,Fe);C&&i.interpolatePadding(v,l.padding,Te);let lt=Te===1?N:We;i.setCenter(lt.wrap());let et=J+s.ah(ke);i.setZoom(Te===1?P:et+en(0,lt.lat))},scaleOfZoom:me,targetCenter:N,scaleOfMinZoom:_e,pixelPathLength:X}}static solveVectorScale(i,l,h,p,g){let v=p==="x"?[h[0],h[4],h[8],h[12]]:[h[1],h[5],h[9],h[13]],C=[h[3],h[7],h[11],h[15]],T=i[0]*v[0]+i[1]*v[1]+i[2]*v[2],P=i[0]*C[0]+i[1]*C[1]+i[2]*C[2],O=l[0]*v[0]+l[1]*v[1]+l[2]*v[2],F=l[0]*C[0]+l[1]*C[1]+l[2]*C[2];return O+g*P===T+g*F||C[3]*(T-O)+v[3]*(F-P)+T*F==O*P?null:(O+v[3]-g*F-g*C[3])/(O-T-g*F+g*P)}static getLesserNonNegativeNonNull(i,l){return l!==null&&l>=0&&l<i?l:i}}class Zs{constructor(i){this._globe=i,this._mercatorCameraHelper=new tl,this._verticalPerspectiveCameraHelper=new wo}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(i,l){return this.currentHelper.handlePanInertia(i,l)}handleMapControlsRollPitchBearingZoom(i,l){return this.currentHelper.handleMapControlsRollPitchBearingZoom(i,l)}handleMapControlsPan(i,l,h){this.currentHelper.handleMapControlsPan(i,l,h)}cameraForBoxAndBearing(i,l,h,p,g){return this.currentHelper.cameraForBoxAndBearing(i,l,h,p,g)}handleJumpToCenterZoom(i,l){this.currentHelper.handleJumpToCenterZoom(i,l)}handleEaseTo(i,l){return this.currentHelper.handleEaseTo(i,l)}handleFlyTo(i,l){return this.currentHelper.handleFlyTo(i,l)}}let il=(m,i)=>s.x(m,i&&i.filter(l=>l.identifier!=="source.canvas")),cp=s.bw();class _u extends s.E{constructor(i,l={}){super(),this._rtlPluginLoaded=()=>{for(let h in this.sourceCaches){let p=this.sourceCaches[h].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[h].reload()}},this.map=i,this.dispatcher=new ai(kt(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(h,p)=>this.getGlyphs(h,p)),this.dispatcher.registerMessageHandler("GI",(h,p)=>this.getImages(h,p)),this.imageManager=new ct,this.imageManager.setEventedParent(this),this.glyphManager=new bt(i._requestManager,l.localIdeographFontFamily),this.lineAtlas=new ot(256,512),this.crossTileSymbolIndex=new Gi,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.by()),Li().on(fs,this._rtlPluginLoaded),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;let p=this.sourceCaches[h.sourceId];if(!p)return;let g=p.getSource();if(g&&g.vectorLayerIds)for(let v in this._layers){let C=this._layers[v];C.source===g.id&&this._validateLayer(C)}})}loadURL(i,l={},h){this.fire(new s.l("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;let p=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;let g=this._loadStyleRequest;s.j(p,this._loadStyleRequest).then(v=>{this._loadStyleRequest=null,this._load(v.data,l,h)}).catch(v=>{this._loadStyleRequest=null,v&&!g.signal.aborted&&this.fire(new s.k(v))})}loadJSON(i,l={},h){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,I.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(i,l,h)}).catch(()=>{})}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(cp,{validate:!1})}_load(i,l,h){var p,g;let v=l.transformStyle?l.transformStyle(h,i):i;if(!l.validate||!il(this,s.y(v))){this._loaded=!0,this.stylesheet=v;for(let C in v.sources)this.addSource(C,v.sources[C],{validate:!1});v.sprite?this._loadSprite(v.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(v.glyphs),this._createLayers(),this.light=new B(this.stylesheet.light),this._setProjectionInternal(((p=this.stylesheet.projection)===null||p===void 0?void 0:p.type)||"mercator"),this.sky=new Ue(this.stylesheet.sky),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){let i=s.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(l=>l.id),this._layers={},this._serializedLayers=null;for(let l of i){let h=s.bA(l);h.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=h}}_loadSprite(i,l=!1,h=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(g,v,C,T){return s._(this,void 0,void 0,function*(){let P=ue(g),O=C>1?"@2x":"",F={},N={};for(let{id:X,url:J}of P){let ge=v.transformRequest(oe(J,O,".json"),"SpriteJSON");F[X]=s.j(ge,T);let me=v.transformRequest(oe(J,O,".png"),"SpriteImage");N[X]=ne.getImage(me,T)}return yield Promise.all([...Object.values(F),...Object.values(N)]),function(X,J){return s._(this,void 0,void 0,function*(){let ge={};for(let me in X){ge[me]={};let _e=I.getImageCanvasContext((yield J[me]).data),xe=(yield X[me]).data;for(let Me in xe){let{width:Te,height:ke,x:Fe,y:De,sdf:We,pixelRatio:lt,stretchX:et,stretchY:rt,content:st,textFitWidth:Mt,textFitHeight:Et}=xe[Me];ge[me][Me]={data:null,pixelRatio:lt,sdf:We,stretchX:et,stretchY:rt,content:st,textFitWidth:Mt,textFitHeight:Et,spriteData:{width:Te,height:ke,x:Fe,y:De,context:_e}}}}return ge})}(F,N)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(g=>{if(this._spriteRequest=null,g)for(let v in g){this._spritesImagesIds[v]=[];let C=this._spritesImagesIds[v]?this._spritesImagesIds[v].filter(T=>!(T in g)):[];for(let T of C)this.imageManager.removeImage(T),this._changedImages[T]=!0;for(let T in g[v]){let P=v==="default"?T:`${v}:${T}`;this._spritesImagesIds[v].push(P),P in this.imageManager.images?this.imageManager.updateImage(P,g[v][T],!1):this.imageManager.addImage(P,g[v][T]),l&&(this._changedImages[P]=!0)}}}).catch(g=>{this._spriteRequest=null,p=g,this.fire(new s.k(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),h&&h(p)})}_unloadSprite(){for(let i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(i){let l=this.sourceCaches[i.source];if(!l)return;let h=i.sourceLayer;if(!h)return;let p=l.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(h)===-1)&&this.fire(new s.k(new Error(`Source layer "${h}" does not exist on source "${p.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,l=!1){let h=this._serializedAllLayers();if(!i||i.length===0)return Object.values(l?s.bB(h):h);let p=[];for(let g of i)if(h[g]){let v=l?s.bB(h[g]):h[g];p.push(v)}return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};let l=Object.keys(this._layers);for(let h of l){let p=this._layers[h];p.type!=="custom"&&(i[h]=p.serialize())}return i}hasTransitions(){var i,l,h;if(!((i=this.light)===null||i===void 0)&&i.hasTransition()||!((l=this.sky)===null||l===void 0)&&l.hasTransition()||!((h=this.projection)===null||h===void 0)&&h.hasTransition())return!0;for(let p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(let p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;let l=this._changed;if(l){let p=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);(p.length||g.length)&&this._updateWorkerLayers(p,g);for(let v in this._updatedSources){let C=this._updatedSources[v];if(C==="reload")this._reloadSource(v);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(v)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let v in this._updatedPaintProps)this._layers[v].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}let h={};for(let p in this.sourceCaches){let g=this.sourceCaches[p];h[p]=g.used,g.used=!1}for(let p of this._order){let g=this._layers[p];g.recalculate(i,this._availableImages),!g.isHidden(i.zoom)&&g.source&&(this.sourceCaches[g.source].used=!0)}for(let p in h){let g=this.sourceCaches[p];!!h[p]!=!!g.used&&g.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(i),this.sky.recalculate(i),this.projection.recalculate(i),this.z=i.zoom,l&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let i=Object.keys(this._changedImages);if(i.length){for(let l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,l={}){var h;this._checkLoaded();let p=this.serialize();if(i=l.transformStyle?l.transformStyle(p,i):i,((h=l.validate)===null||h===void 0||h)&&il(this,s.y(i)))return!1;(i=s.bB(i)).layers=s.bz(i.layers);let g=s.bC(p,i),v=this._getOperationsToPerform(g);if(v.unimplemented.length>0)throw new Error(`Unimplemented: ${v.unimplemented.join(", ")}.`);if(v.operations.length===0)return!1;for(let C of v.operations)C();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){let l=[],h=[];for(let p of i)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":l.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":l.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setSky":l.push(()=>this.setSky.apply(this,p.args));break;case"setProjection":this.setProjection.apply(this,p.args);break;case"setTransition":l.push(()=>{});break;default:h.push(p.command)}return{operations:l,unimplemented:h}}addImage(i,l){if(this.getImage(i))return this.fire(new s.k(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,l),this._afterImageUpdated(i)}updateImage(i,l){this.imageManager.updateImage(i,l)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new s.k(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,l,h={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(s.y.source,`sources.${i}`,l,null,h))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);let p=this.sourceCaches[i]=new He(i,l,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:i})),p.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(let h in this._layers)if(this._layers[h].source===i)return this.fire(new s.k(new Error(`Source "${i}" cannot be removed while layer "${h}" is using it.`)));let l=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],l.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,l){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);let h=this.sourceCaches[i].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(l),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,l,h={}){this._checkLoaded();let p=i.id;if(this.getLayer(p))return void this.fire(new s.k(new Error(`Layer "${p}" already exists on this map.`)));let g;if(i.type==="custom"){if(il(this,s.bD(i)))return;g=s.bA(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(p,i.source),i=s.bB(i),i=s.e(i,{source:p})),this._validate(s.y.layer,`layers.${p}`,i,{arrayIndex:-1},h))return;g=s.bA(i),this._validateLayer(g),g.setEventedParent(this,{layer:{id:p}})}let v=l?this._order.indexOf(l):this._order.length;if(l&&v===-1)this.fire(new s.k(new Error(`Cannot add layer "${p}" before non-existing layer "${l}".`)));else{if(this._order.splice(v,0,p),this._layerOrderChanged=!0,this._layers[p]=g,this._removedLayers[p]&&g.source&&g.type!=="custom"){let C=this._removedLayers[p];delete this._removedLayers[p],C.type!==g.type?this._updatedSources[g.source]="clear":(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause())}this._updateLayer(g),g.onAdd&&g.onAdd(this.map)}}moveLayer(i,l){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new s.k(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===l)return;let h=this._order.indexOf(i);this._order.splice(h,1);let p=l?this._order.indexOf(l):this._order.length;l&&p===-1?this.fire(new s.k(new Error(`Cannot move layer "${i}" before non-existing layer "${l}".`))):(this._order.splice(p,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();let l=this._layers[i];if(!l)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${i}".`)));l.setEventedParent(null);let h=this._order.indexOf(i);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=l,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],l.onRemove&&l.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,l,h){this._checkLoaded();let p=this.getLayer(i);p?p.minzoom===l&&p.maxzoom===h||(l!=null&&(p.minzoom=l),h!=null&&(p.maxzoom=h),this._updateLayer(p)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,l,h={}){this._checkLoaded();let p=this.getLayer(i);if(p){if(!s.bE(p.filter,l))return l==null?(p.filter=void 0,void this._updateLayer(p)):void(this._validate(s.y.filter,`layers.${p.id}.filter`,l,null,h)||(p.filter=s.bB(l),this._updateLayer(p)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return s.bB(this.getLayer(i).filter)}setLayoutProperty(i,l,h,p={}){this._checkLoaded();let g=this.getLayer(i);g?s.bE(g.getLayoutProperty(l),h)||(g.setLayoutProperty(l,h,p),this._updateLayer(g)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,l){let h=this.getLayer(i);if(h)return h.getLayoutProperty(l);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,l,h,p={}){this._checkLoaded();let g=this.getLayer(i);g?s.bE(g.getPaintProperty(l),h)||(g.setPaintProperty(l,h,p)&&this._updateLayer(g),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new s.k(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,l){return this.getLayer(i).getPaintProperty(l)}setFeatureState(i,l){this._checkLoaded();let h=i.source,p=i.sourceLayer,g=this.sourceCaches[h];if(g===void 0)return void this.fire(new s.k(new Error(`The source '${h}' does not exist in the map's style.`)));let v=g.getSource().type;v==="geojson"&&p?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):v!=="vector"||p?(i.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),g.setFeatureState(p,i.id,l)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,l){this._checkLoaded();let h=i.source,p=this.sourceCaches[h];if(p===void 0)return void this.fire(new s.k(new Error(`The source '${h}' does not exist in the map's style.`)));let g=p.getSource().type,v=g==="vector"?i.sourceLayer:void 0;g!=="vector"||v?l&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(v,i.id,l):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();let l=i.source,h=i.sourceLayer,p=this.sourceCaches[l];if(p!==void 0)return p.getSource().type!=="vector"||h?(i.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),p.getFeatureState(h,i.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let i=s.bF(this.sourceCaches,g=>g.serialize()),l=this._serializeByIds(this._order,!0),h=this.map.getTerrain()||void 0,p=this.stylesheet;return s.bG({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,projection:p.projection,sources:i,layers:l,terrain:h},g=>g!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){let l=v=>this._layers[v].type==="fill-extrusion",h={},p=[];for(let v=this._order.length-1;v>=0;v--){let C=this._order[v];if(l(C)){h[C]=v;for(let T of i){let P=T[C];if(P)for(let O of P)p.push(O)}}}p.sort((v,C)=>C.intersectionZ-v.intersectionZ);let g=[];for(let v=this._order.length-1;v>=0;v--){let C=this._order[v];if(l(C))for(let T=p.length-1;T>=0;T--){let P=p[T].feature;if(h[P.layer.id]<v)break;g.push(P),p.pop()}else for(let T of i){let P=T[C];if(P)for(let O of P)g.push(O.feature)}}return g}queryRenderedFeatures(i,l,h){l&&l.filter&&this._validate(s.y.filter,"queryRenderedFeatures.filter",l.filter,null,l);let p={};if(l&&l.layers){if(!(Array.isArray(l.layers)||l.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let P of l.layers){let O=this._layers[P];if(!O)return this.fire(new s.k(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];p[O.source]=!0}}let g=[];l.availableImages=this._availableImages;let v=this._serializedAllLayers(),C=l.layers instanceof Set?l.layers:Array.isArray(l.layers)?new Set(l.layers):null,T=Object.assign(Object.assign({},l),{layers:C});for(let P in this.sourceCaches)l.layers&&!p[P]||g.push(ba(this.sourceCaches[P],this._layers,v,i,T,h,this.map.terrain?(O,F,N)=>this.map.terrain.getElevation(O,F,N):void 0));return this.placement&&g.push(function(P,O,F,N,X,J,ge){let me={},_e=J.queryRenderedSymbols(N),xe=[];for(let Me of Object.keys(_e).map(Number))xe.push(ge[Me]);xe.sort(Pn);for(let Me of xe){let Te=Me.featureIndex.lookupSymbolFeatures(_e[Me.bucketInstanceId],O,Me.bucketIndex,Me.sourceLayerIndex,X.filter,X.layers,X.availableImages,P);for(let ke in Te){let Fe=me[ke]=me[ke]||[],De=Te[ke];De.sort((We,lt)=>{let et=Me.featureSortOrder;if(et){let rt=et.indexOf(We.featureIndex);return et.indexOf(lt.featureIndex)-rt}return lt.featureIndex-We.featureIndex});for(let We of De)Fe.push(We)}}return function(Me,Te,ke){for(let Fe in Me)for(let De of Me[Fe])Dn(De,ke[Te[Fe].source]);return Me}(me,P,F)}(this._layers,v,this.sourceCaches,i,T,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(g)}querySourceFeatures(i,l){l&&l.filter&&this._validate(s.y.filter,"querySourceFeatures.filter",l.filter,null,l);let h=this.sourceCaches[i];return h?function(p,g){let v=p.getRenderableIds().map(P=>p.getTileByID(P)),C=[],T={};for(let P=0;P<v.length;P++){let O=v[P],F=O.tileID.canonical.key;T[F]||(T[F]=!0,O.querySourceFeatures(C,g))}return C}(h,l):[]}getLight(){return this.light.getLight()}setLight(i,l={}){this._checkLoaded();let h=this.light.getLight(),p=!1;for(let v in i)if(!s.bE(i[v],h[v])){p=!0;break}if(!p)return;let g={now:I.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,l),this.light.updateTransitions(g)}getProjection(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.projection}setProjection(i){if(this._checkLoaded(),this.projection){if(this.projection.name===i.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=i,this._setProjectionInternal(i.type)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,l={}){this._checkLoaded();let h=this.getSky(),p=!1;if(!i&&!h)return;if(i&&!h)p=!0;else if(!i&&h)p=!0;else for(let v in i)if(!s.bE(i[v],h[v])){p=!0;break}if(!p)return;let g={now:I.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,l),this.sky.updateTransitions(g)}_setProjectionInternal(i){let l=function(h){if(Array.isArray(h)){let p=new Oo({type:h});return{projection:p,transform:new $n,cameraHelper:new Zs(p)}}switch(h){case"mercator":return{projection:new Al,transform:new no,cameraHelper:new tl};case"globe":{let p=new Oo({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:p,transform:new $n,cameraHelper:new Zs(p)}}case"vertical-perspective":return{projection:new xo,transform:new Ia,cameraHelper:new wo};default:return s.w(`Unknown projection name: ${h}. Falling back to mercator projection.`),{projection:new Al,transform:new no,cameraHelper:new tl}}}(i);this.projection=l.projection,this.map.migrateProjection(l.transform,l.cameraHelper);for(let h in this.sourceCaches)this.sourceCaches[h].reload()}_validate(i,l,h,p,g={}){return(!g||g.validate!==!1)&&il(this,i.call(s.y,s.e({key:l,style:this.serialize(),value:h,styleSpec:s.v},p)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Li().off(fs,this._rtlPluginLoaded);for(let l in this._layers)this._layers[l].setEventedParent(null);for(let l in this.sourceCaches){let h=this.sourceCaches[l];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(let l in this.sourceCaches)this.sourceCaches[l].update(i,this.map.terrain)}_generateCollisionBoxes(){for(let i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,l,h,p,g=!1){let v=!1,C=!1,T={};for(let P of this._order){let O=this._layers[P];if(O.type!=="symbol")continue;if(!T[O.source]){let N=this.sourceCaches[O.source];T[O.source]=N.getRenderableIds(!0).map(X=>N.getTileByID(X)).sort((X,J)=>J.tileID.overscaledZ-X.tileID.overscaledZ||(X.tileID.isLessThan(J.tileID)?-1:1))}let F=this.crossTileSymbolIndex.addLayer(O,T[O.source],i.center.lng);v=v||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((g=g||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(I.now(),i.zoom))&&(this.pauseablePlacement=new lc(i,this.map.terrain,this._order,g,l,h,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,T),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(I.now()),C=!0),v&&this.pauseablePlacement.placement.setStale()),C||v)for(let P of this._order){let O=this._layers[P];O.type==="symbol"&&this.placement.updateLayerOpacities(O,T[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(I.now())}_releaseSymbolFadeTiles(){for(let i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,l){return s._(this,void 0,void 0,function*(){let h=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();let p=this.sourceCaches[l.source];return p&&p.setDependencies(l.tileID.key,l.type,l.icons),h})}getGlyphs(i,l){return s._(this,void 0,void 0,function*(){let h=yield this.glyphManager.getGlyphs(l.stacks),p=this.sourceCaches[l.source];return p&&p.setDependencies(l.tileID.key,l.type,[""]),h})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,l={}){this._checkLoaded(),i&&this._validate(s.y.glyphs,"glyphs",i,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,l,h={},p){this._checkLoaded();let g=[{id:i,url:l}],v=[...ue(this.stylesheet.sprite),...g];this._validate(s.y.sprite,"sprite",v,null,h)||(this.stylesheet.sprite=v,this._loadSprite(g,!0,p))}removeSprite(i){this._checkLoaded();let l=ue(this.stylesheet.sprite);if(l.find(h=>h.id===i)){if(this._spritesImagesIds[i])for(let h of this._spritesImagesIds[i])this.imageManager.removeImage(h),this._changedImages[h]=!0;l.splice(l.findIndex(h=>h.id===i),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return ue(this.stylesheet.sprite)}setSprite(i,l={},h){this._checkLoaded(),i&&this._validate(s.y.sprite,"sprite",i,null,l)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,h):(this._unloadSprite(),h&&h(null)))}}var up=s.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Xs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,l,h,p,g,v,C,T,P){this.context=i;let O=this.boundPaintVertexBuffers.length!==p.length;for(let F=0;!O&&F<p.length;F++)this.boundPaintVertexBuffers[F]!==p[F]&&(O=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==h||O||this.boundIndexBuffer!==g||this.boundVertexOffset!==v||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==T||this.boundDynamicVertexBuffer3!==P?this.freshBind(l,h,p,g,v,C,T,P):(i.bindVertexArray.set(this.vao),C&&C.bind(),g&&g.dynamicDraw&&g.bind(),T&&T.bind(),P&&P.bind())}freshBind(i,l,h,p,g,v,C,T){let P=i.numAttributes,O=this.context,F=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=p,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=v,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=T,l.enableAttributes(F,i);for(let N of h)N.enableAttributes(F,i);v&&v.enableAttributes(F,i),C&&C.enableAttributes(F,i),T&&T.enableAttributes(F,i),l.bind(),l.setVertexAttribPointers(F,i,g);for(let N of h)N.bind(),N.setVertexAttribPointers(F,i,g);v&&(v.bind(),v.setVertexAttribPointers(F,i,g)),p&&p.bind(),C&&(C.bind(),C.setVertexAttribPointers(F,i,g)),T&&(T.bind(),T.setVertexAttribPointers(F,i,g)),O.currentNumAttributes=P}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let dp=(m,i,l,h,p)=>({u_texture:0,u_ele_delta:m,u_fog_matrix:i,u_fog_color:l?l.properties.get("fog-color"):s.b7.white,u_fog_ground_blend:l?l.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?0:l?l.calculateFogBlendOpacity(h):0,u_horizon_color:l?l.properties.get("horizon-color"):s.b7.white,u_horizon_fog_blend:l?l.properties.get("horizon-fog-blend"):1,u_is_globe_mode:p?1:0}),hc={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ys(m){let i=[];for(let l=0;l<m.length;l++){if(m[l]===null)continue;let h=m[l].split(" ");i.push(h.pop())}return i}class pc{constructor(i,l,h,p,g,v,C,T,P=[]){let O=i.gl;this.program=O.createProgram();let F=Ys(l.staticAttributes),N=h?h.getBinderAttributes():[],X=F.concat(N),J=pr.prelude.staticUniforms?Ys(pr.prelude.staticUniforms):[],ge=C.staticUniforms?Ys(C.staticUniforms):[],me=l.staticUniforms?Ys(l.staticUniforms):[],_e=h?h.getBinderUniforms():[],xe=J.concat(ge).concat(me).concat(_e),Me=[];for(let et of xe)Me.indexOf(et)<0&&Me.push(et);let Te=h?h.defines():[];xn(O)&&Te.unshift("#version 300 es"),g&&Te.push("#define OVERDRAW_INSPECTOR;"),v&&Te.push("#define TERRAIN3D;"),T&&Te.push(T),P&&Te.push(...P);let ke=Te.concat(pr.prelude.fragmentSource,C.fragmentSource,l.fragmentSource).join(`
`),Fe=Te.concat(pr.prelude.vertexSource,C.vertexSource,l.vertexSource).join(`
`);xn(O)||(ke=function(et){return et.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(ke),Fe=function(et){return et.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Fe));let De=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(De,ke),O.compileShader(De),!O.getShaderParameter(De,O.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${O.getShaderInfoLog(De)}`);O.attachShader(this.program,De);let We=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(We,Fe),O.compileShader(We),!O.getShaderParameter(We,O.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${O.getShaderInfoLog(We)}`);O.attachShader(this.program,We),this.attributes={};let lt={};this.numAttributes=X.length;for(let et=0;et<this.numAttributes;et++)X[et]&&(O.bindAttribLocation(this.program,et,X[et]),this.attributes[X[et]]=et);if(O.linkProgram(this.program),!O.getProgramParameter(this.program,O.LINK_STATUS))throw new Error(`Program failed to link: ${O.getProgramInfoLog(this.program)}`);O.deleteShader(We),O.deleteShader(De);for(let et=0;et<Me.length;et++){let rt=Me[et];if(rt&&!lt[rt]){let st=O.getUniformLocation(this.program,rt);st&&(lt[rt]=st)}}this.fixedUniforms=p(i,lt),this.terrainUniforms=((et,rt)=>({u_depth:new s.bH(et,rt.u_depth),u_terrain:new s.bH(et,rt.u_terrain),u_terrain_dim:new s.b8(et,rt.u_terrain_dim),u_terrain_matrix:new s.bJ(et,rt.u_terrain_matrix),u_terrain_unpack:new s.bK(et,rt.u_terrain_unpack),u_terrain_exaggeration:new s.b8(et,rt.u_terrain_exaggeration)}))(i,lt),this.projectionUniforms=((et,rt)=>({u_projection_matrix:new s.bJ(et,rt.u_projection_matrix),u_projection_tile_mercator_coords:new s.bK(et,rt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bK(et,rt.u_projection_clipping_plane),u_projection_transition:new s.b8(et,rt.u_projection_transition),u_projection_fallback_matrix:new s.bJ(et,rt.u_projection_fallback_matrix)}))(i,lt),this.binderUniforms=h?h.getUniforms(i,lt):[]}draw(i,l,h,p,g,v,C,T,P,O,F,N,X,J,ge,me,_e,xe,Me){let Te=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(h),i.setStencilMode(p),i.setColorMode(g),i.setCullFace(v),T){i.activeTexture.set(Te.TEXTURE2),Te.bindTexture(Te.TEXTURE_2D,T.depthTexture),i.activeTexture.set(Te.TEXTURE3),Te.bindTexture(Te.TEXTURE_2D,T.texture);for(let Fe in this.terrainUniforms)this.terrainUniforms[Fe].set(T[Fe])}if(P)for(let Fe in P)this.projectionUniforms[hc[Fe]].set(P[Fe]);if(C)for(let Fe in this.fixedUniforms)this.fixedUniforms[Fe].set(C[Fe]);me&&me.setUniforms(i,this.binderUniforms,J,{zoom:ge});let ke=0;switch(l){case Te.LINES:ke=2;break;case Te.TRIANGLES:ke=3;break;case Te.LINE_STRIP:ke=1}for(let Fe of X.get()){let De=Fe.vaos||(Fe.vaos={});(De[O]||(De[O]=new Xs)).bind(i,this,F,me?me.getPaintVertexBuffers():[],N,Fe.vertexOffset,_e,xe,Me),Te.drawElements(l,Fe.primitiveLength*ke,Te.UNSIGNED_SHORT,Fe.primitiveOffset*ke*2)}}}function oo(m,i,l){let h=1/s.az(l,1,i.transform.tileZoom),p=Math.pow(2,l.tileID.overscaledZ),g=l.tileSize*Math.pow(2,i.transform.tileZoom)/p,v=g*(l.tileID.canonical.x+l.tileID.wrap*p),C=g*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[h,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[v>>16,C>>16],u_pixel_coord_lower:[65535&v,65535&C]}}let rl=(m,i,l,h)=>{let p=m.style.light,g=p.properties.get("position"),v=[g.x,g.y,g.z],C=s.bN();p.properties.get("anchor")==="viewport"&&s.bO(C,m.transform.bearingInRadians),s.bP(v,v,C);let T=m.transform.transformLightDirection(v),P=p.properties.get("color");return{u_lightpos:v,u_lightpos_globe:T,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[P.r,P.g,P.b],u_vertical_gradient:+i,u_opacity:l,u_fill_translate:h}},es=(m,i,l,h,p,g,v)=>s.e(rl(m,i,l,h),oo(g,m,v),{u_height_factor:-Math.pow(2,p.overscaledZ)/v.tileSize/8}),bu=(m,i,l,h)=>s.e(oo(i,m,l),{u_fill_translate:h}),nl=(m,i)=>({u_world:m,u_fill_translate:i}),Ks=(m,i,l,h,p)=>s.e(bu(m,i,l,p),{u_world:h}),Qs=(m,i,l,h,p)=>{let g=m.transform,v,C,T=0;if(l.paint.get("circle-pitch-alignment")==="map"){let P=s.az(i,1,g.zoom);v=!0,C=[P,P],T=P/(s.Z*Math.pow(2,i.tileID.overscaledZ))*2*Math.PI*p}else v=!1,C=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(l.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+v,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:C,u_globe_extrude_scale:T,u_translate:h}},yu=m=>({u_pixel_extrude_scale:[1/m.width,1/m.height]}),Lo=m=>({u_viewport_size:[m.width,m.height]}),Rl=(m,i=1)=>({u_color:m,u_overlay:0,u_overlay_scale:i}),Js=(m,i,l,h)=>{let p=s.az(m,1,i)/(s.Z*Math.pow(2,m.tileID.overscaledZ))*2*Math.PI*h;return{u_extrude_scale:s.az(m,1,i),u_intensity:l,u_globe_extrude_scale:p}},Td=(m,i,l,h)=>{let p=s.K();s.bQ(p,0,m.width,m.height,0,0,1);let g=m.context.gl;return{u_matrix:p,u_world:[g.drawingBufferWidth,g.drawingBufferHeight],u_image:l,u_color_ramp:h,u_opacity:i.paint.get("heatmap-opacity")}},Md=(m,i,l)=>{let h=l.paint.get("hillshade-accent-color"),p;switch(l.paint.get("hillshade-method")){case"basic":p=4;break;case"combined":p=1;break;case"igor":p=2;break;case"multidirectional":p=3;break;default:p=0}let g=l.getIlluminationProperties();for(let v=0;v<g.directionRadians.length;v++)l.paint.get("hillshade-illumination-anchor")==="viewport"&&(g.directionRadians[v]+=m.transform.bearingInRadians);return{u_image:0,u_latrange:Id(0,i.tileID),u_exaggeration:l.paint.get("hillshade-exaggeration"),u_altitudes:g.altitudeRadians,u_azimuths:g.directionRadians,u_accent:h,u_method:p,u_highlights:g.highlightColor,u_shadows:g.shadowColor}},Aa=(m,i)=>{let l=i.stride,h=s.K();return s.bQ(h,0,s.Z,-8192,0,0,1),s.L(h,h,[0,-8192,0]),{u_matrix:h,u_image:1,u_dimension:[l,l],u_zoom:m.overscaledZ,u_unpack:i.getUnpackVector()}};function Id(m,i){let l=Math.pow(2,i.canonical.z),h=i.canonical.y;return[new s.$(0,h/l).toLngLat().lat,new s.$(0,(h+1)/l).toLngLat().lat]}let Ol=(m,i,l,h)=>{let p=m.transform;return{u_translation:ea(m,i,l),u_ratio:h/s.az(i,1,p.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Ad=(m,i,l,h,p)=>s.e(Ol(m,i,l,h),{u_image:0,u_image_height:p}),kd=(m,i,l,h,p)=>{let g=m.transform,v=ol(i,g);return{u_translation:ea(m,i,l),u_texsize:i.imageAtlasTexture.size,u_ratio:h/s.az(i,1,g.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[v,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},fc=(m,i,l,h,p,g)=>{let v=m.lineAtlas,C=ol(i,m.transform),T=l.layout.get("line-cap")==="round",P=v.getDash(p.from,T),O=v.getDash(p.to,T),F=P.width*g.fromScale,N=O.width*g.toScale;return s.e(Ol(m,i,l,h),{u_patternscale_a:[C/F,-P.height/2],u_patternscale_b:[C/N,-O.height/2],u_sdfgamma:v.width/(256*Math.min(F,N)*m.pixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:O.y,u_mix:g.t})};function ol(m,i){return 1/s.az(m,1,i.tileZoom)}function ea(m,i,l){return s.aA(m.transform,i,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}let Pd=(m,i,l,h,p)=>{return{u_tl_parent:m,u_scale_parent:i,u_buffer_scale:1,u_fade_t:l.mix,u_opacity:l.opacity*h.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:h.paint.get("raster-brightness-min"),u_brightness_high:h.paint.get("raster-brightness-max"),u_saturation_factor:(v=h.paint.get("raster-saturation"),v>0?1-1/(1.001-v):-v),u_contrast_factor:(g=h.paint.get("raster-contrast"),g>0?1/(1-g):1+g),u_spin_weights:vu(h.paint.get("raster-hue-rotate")),u_coords_top:[p[0].x,p[0].y,p[1].x,p[1].y],u_coords_bottom:[p[3].x,p[3].y,p[2].x,p[2].y]};var g,v};function vu(m){m*=Math.PI/180;let i=Math.sin(m),l=Math.cos(m);return[(2*l+1)/3,(-Math.sqrt(3)*i-l+1)/3,(Math.sqrt(3)*i-l+1)/3]}let ta=(m,i,l,h,p,g,v,C,T,P,O,F,N)=>{let X=v.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:X.width/X.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_label_plane_matrix:C,u_coord_matrix:T,u_is_text:+O,u_pitch_with_map:+h,u_is_along_line:p,u_is_variable_anchor:g,u_texsize:F,u_texture:0,u_translation:P,u_pitched_scale:N}},xu=(m,i,l,h,p,g,v,C,T,P,O,F,N,X)=>{let J=v.transform;return s.e(ta(m,i,l,h,p,g,v,C,T,P,O,F,X),{u_gamma_scale:h?Math.cos(J.pitch*Math.PI/180)*J.cameraToCenterDistance:1,u_device_pixel_ratio:v.pixelRatio,u_is_halo:1})},mc=(m,i,l,h,p,g,v,C,T,P,O,F,N)=>s.e(xu(m,i,l,h,p,g,v,C,T,P,!0,O,0,N),{u_texsize_icon:F,u_texture_icon:1}),hp=(m,i)=>({u_opacity:m,u_color:i}),Dd=(m,i,l,h,p)=>s.e(function(g,v,C,T){let P=C.imageManager.getPattern(g.from.toString()),O=C.imageManager.getPattern(g.to.toString()),{width:F,height:N}=C.imageManager.getPixelSize(),X=Math.pow(2,T.tileID.overscaledZ),J=T.tileSize*Math.pow(2,C.transform.tileZoom)/X,ge=J*(T.tileID.canonical.x+T.tileID.wrap*X),me=J*T.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:P.tl,u_pattern_br_a:P.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[F,N],u_mix:v.t,u_pattern_size_a:P.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:v.fromScale,u_scale_b:v.toScale,u_tile_units_to_pixels:1/s.az(T,1,C.transform.tileZoom),u_pixel_coord_upper:[ge>>16,me>>16],u_pixel_coord_lower:[65535&ge,65535&me]}}(l,p,i,h),{u_opacity:m}),gc=(m,i)=>{},wu={fillExtrusion:(m,i)=>({u_lightpos:new s.bL(m,i.u_lightpos),u_lightpos_globe:new s.bL(m,i.u_lightpos_globe),u_lightintensity:new s.b8(m,i.u_lightintensity),u_lightcolor:new s.bL(m,i.u_lightcolor),u_vertical_gradient:new s.b8(m,i.u_vertical_gradient),u_opacity:new s.b8(m,i.u_opacity),u_fill_translate:new s.bM(m,i.u_fill_translate)}),fillExtrusionPattern:(m,i)=>({u_lightpos:new s.bL(m,i.u_lightpos),u_lightpos_globe:new s.bL(m,i.u_lightpos_globe),u_lightintensity:new s.b8(m,i.u_lightintensity),u_lightcolor:new s.bL(m,i.u_lightcolor),u_vertical_gradient:new s.b8(m,i.u_vertical_gradient),u_height_factor:new s.b8(m,i.u_height_factor),u_opacity:new s.b8(m,i.u_opacity),u_fill_translate:new s.bM(m,i.u_fill_translate),u_image:new s.bH(m,i.u_image),u_texsize:new s.bM(m,i.u_texsize),u_pixel_coord_upper:new s.bM(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(m,i.u_pixel_coord_lower),u_scale:new s.bL(m,i.u_scale),u_fade:new s.b8(m,i.u_fade)}),fill:(m,i)=>({u_fill_translate:new s.bM(m,i.u_fill_translate)}),fillPattern:(m,i)=>({u_image:new s.bH(m,i.u_image),u_texsize:new s.bM(m,i.u_texsize),u_pixel_coord_upper:new s.bM(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(m,i.u_pixel_coord_lower),u_scale:new s.bL(m,i.u_scale),u_fade:new s.b8(m,i.u_fade),u_fill_translate:new s.bM(m,i.u_fill_translate)}),fillOutline:(m,i)=>({u_world:new s.bM(m,i.u_world),u_fill_translate:new s.bM(m,i.u_fill_translate)}),fillOutlinePattern:(m,i)=>({u_world:new s.bM(m,i.u_world),u_image:new s.bH(m,i.u_image),u_texsize:new s.bM(m,i.u_texsize),u_pixel_coord_upper:new s.bM(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(m,i.u_pixel_coord_lower),u_scale:new s.bL(m,i.u_scale),u_fade:new s.b8(m,i.u_fade),u_fill_translate:new s.bM(m,i.u_fill_translate)}),circle:(m,i)=>({u_camera_to_center_distance:new s.b8(m,i.u_camera_to_center_distance),u_scale_with_map:new s.bH(m,i.u_scale_with_map),u_pitch_with_map:new s.bH(m,i.u_pitch_with_map),u_extrude_scale:new s.bM(m,i.u_extrude_scale),u_device_pixel_ratio:new s.b8(m,i.u_device_pixel_ratio),u_globe_extrude_scale:new s.b8(m,i.u_globe_extrude_scale),u_translate:new s.bM(m,i.u_translate)}),collisionBox:(m,i)=>({u_pixel_extrude_scale:new s.bM(m,i.u_pixel_extrude_scale)}),collisionCircle:(m,i)=>({u_viewport_size:new s.bM(m,i.u_viewport_size)}),debug:(m,i)=>({u_color:new s.bI(m,i.u_color),u_overlay:new s.bH(m,i.u_overlay),u_overlay_scale:new s.b8(m,i.u_overlay_scale)}),depth:gc,clippingMask:gc,heatmap:(m,i)=>({u_extrude_scale:new s.b8(m,i.u_extrude_scale),u_intensity:new s.b8(m,i.u_intensity),u_globe_extrude_scale:new s.b8(m,i.u_globe_extrude_scale)}),heatmapTexture:(m,i)=>({u_matrix:new s.bJ(m,i.u_matrix),u_world:new s.bM(m,i.u_world),u_image:new s.bH(m,i.u_image),u_color_ramp:new s.bH(m,i.u_color_ramp),u_opacity:new s.b8(m,i.u_opacity)}),hillshade:(m,i)=>({u_image:new s.bH(m,i.u_image),u_latrange:new s.bM(m,i.u_latrange),u_exaggeration:new s.b8(m,i.u_exaggeration),u_altitudes:new s.bS(m,i.u_altitudes),u_azimuths:new s.bS(m,i.u_azimuths),u_accent:new s.bI(m,i.u_accent),u_method:new s.bH(m,i.u_method),u_shadows:new s.bR(m,i.u_shadows),u_highlights:new s.bR(m,i.u_highlights)}),hillshadePrepare:(m,i)=>({u_matrix:new s.bJ(m,i.u_matrix),u_image:new s.bH(m,i.u_image),u_dimension:new s.bM(m,i.u_dimension),u_zoom:new s.b8(m,i.u_zoom),u_unpack:new s.bK(m,i.u_unpack)}),line:(m,i)=>({u_translation:new s.bM(m,i.u_translation),u_ratio:new s.b8(m,i.u_ratio),u_device_pixel_ratio:new s.b8(m,i.u_device_pixel_ratio),u_units_to_pixels:new s.bM(m,i.u_units_to_pixels)}),lineGradient:(m,i)=>({u_translation:new s.bM(m,i.u_translation),u_ratio:new s.b8(m,i.u_ratio),u_device_pixel_ratio:new s.b8(m,i.u_device_pixel_ratio),u_units_to_pixels:new s.bM(m,i.u_units_to_pixels),u_image:new s.bH(m,i.u_image),u_image_height:new s.b8(m,i.u_image_height)}),linePattern:(m,i)=>({u_translation:new s.bM(m,i.u_translation),u_texsize:new s.bM(m,i.u_texsize),u_ratio:new s.b8(m,i.u_ratio),u_device_pixel_ratio:new s.b8(m,i.u_device_pixel_ratio),u_image:new s.bH(m,i.u_image),u_units_to_pixels:new s.bM(m,i.u_units_to_pixels),u_scale:new s.bL(m,i.u_scale),u_fade:new s.b8(m,i.u_fade)}),lineSDF:(m,i)=>({u_translation:new s.bM(m,i.u_translation),u_ratio:new s.b8(m,i.u_ratio),u_device_pixel_ratio:new s.b8(m,i.u_device_pixel_ratio),u_units_to_pixels:new s.bM(m,i.u_units_to_pixels),u_patternscale_a:new s.bM(m,i.u_patternscale_a),u_patternscale_b:new s.bM(m,i.u_patternscale_b),u_sdfgamma:new s.b8(m,i.u_sdfgamma),u_image:new s.bH(m,i.u_image),u_tex_y_a:new s.b8(m,i.u_tex_y_a),u_tex_y_b:new s.b8(m,i.u_tex_y_b),u_mix:new s.b8(m,i.u_mix)}),raster:(m,i)=>({u_tl_parent:new s.bM(m,i.u_tl_parent),u_scale_parent:new s.b8(m,i.u_scale_parent),u_buffer_scale:new s.b8(m,i.u_buffer_scale),u_fade_t:new s.b8(m,i.u_fade_t),u_opacity:new s.b8(m,i.u_opacity),u_image0:new s.bH(m,i.u_image0),u_image1:new s.bH(m,i.u_image1),u_brightness_low:new s.b8(m,i.u_brightness_low),u_brightness_high:new s.b8(m,i.u_brightness_high),u_saturation_factor:new s.b8(m,i.u_saturation_factor),u_contrast_factor:new s.b8(m,i.u_contrast_factor),u_spin_weights:new s.bL(m,i.u_spin_weights),u_coords_top:new s.bK(m,i.u_coords_top),u_coords_bottom:new s.bK(m,i.u_coords_bottom)}),symbolIcon:(m,i)=>({u_is_size_zoom_constant:new s.bH(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(m,i.u_is_size_feature_constant),u_size_t:new s.b8(m,i.u_size_t),u_size:new s.b8(m,i.u_size),u_camera_to_center_distance:new s.b8(m,i.u_camera_to_center_distance),u_pitch:new s.b8(m,i.u_pitch),u_rotate_symbol:new s.bH(m,i.u_rotate_symbol),u_aspect_ratio:new s.b8(m,i.u_aspect_ratio),u_fade_change:new s.b8(m,i.u_fade_change),u_label_plane_matrix:new s.bJ(m,i.u_label_plane_matrix),u_coord_matrix:new s.bJ(m,i.u_coord_matrix),u_is_text:new s.bH(m,i.u_is_text),u_pitch_with_map:new s.bH(m,i.u_pitch_with_map),u_is_along_line:new s.bH(m,i.u_is_along_line),u_is_variable_anchor:new s.bH(m,i.u_is_variable_anchor),u_texsize:new s.bM(m,i.u_texsize),u_texture:new s.bH(m,i.u_texture),u_translation:new s.bM(m,i.u_translation),u_pitched_scale:new s.b8(m,i.u_pitched_scale)}),symbolSDF:(m,i)=>({u_is_size_zoom_constant:new s.bH(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(m,i.u_is_size_feature_constant),u_size_t:new s.b8(m,i.u_size_t),u_size:new s.b8(m,i.u_size),u_camera_to_center_distance:new s.b8(m,i.u_camera_to_center_distance),u_pitch:new s.b8(m,i.u_pitch),u_rotate_symbol:new s.bH(m,i.u_rotate_symbol),u_aspect_ratio:new s.b8(m,i.u_aspect_ratio),u_fade_change:new s.b8(m,i.u_fade_change),u_label_plane_matrix:new s.bJ(m,i.u_label_plane_matrix),u_coord_matrix:new s.bJ(m,i.u_coord_matrix),u_is_text:new s.bH(m,i.u_is_text),u_pitch_with_map:new s.bH(m,i.u_pitch_with_map),u_is_along_line:new s.bH(m,i.u_is_along_line),u_is_variable_anchor:new s.bH(m,i.u_is_variable_anchor),u_texsize:new s.bM(m,i.u_texsize),u_texture:new s.bH(m,i.u_texture),u_gamma_scale:new s.b8(m,i.u_gamma_scale),u_device_pixel_ratio:new s.b8(m,i.u_device_pixel_ratio),u_is_halo:new s.bH(m,i.u_is_halo),u_translation:new s.bM(m,i.u_translation),u_pitched_scale:new s.b8(m,i.u_pitched_scale)}),symbolTextAndIcon:(m,i)=>({u_is_size_zoom_constant:new s.bH(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(m,i.u_is_size_feature_constant),u_size_t:new s.b8(m,i.u_size_t),u_size:new s.b8(m,i.u_size),u_camera_to_center_distance:new s.b8(m,i.u_camera_to_center_distance),u_pitch:new s.b8(m,i.u_pitch),u_rotate_symbol:new s.bH(m,i.u_rotate_symbol),u_aspect_ratio:new s.b8(m,i.u_aspect_ratio),u_fade_change:new s.b8(m,i.u_fade_change),u_label_plane_matrix:new s.bJ(m,i.u_label_plane_matrix),u_coord_matrix:new s.bJ(m,i.u_coord_matrix),u_is_text:new s.bH(m,i.u_is_text),u_pitch_with_map:new s.bH(m,i.u_pitch_with_map),u_is_along_line:new s.bH(m,i.u_is_along_line),u_is_variable_anchor:new s.bH(m,i.u_is_variable_anchor),u_texsize:new s.bM(m,i.u_texsize),u_texsize_icon:new s.bM(m,i.u_texsize_icon),u_texture:new s.bH(m,i.u_texture),u_texture_icon:new s.bH(m,i.u_texture_icon),u_gamma_scale:new s.b8(m,i.u_gamma_scale),u_device_pixel_ratio:new s.b8(m,i.u_device_pixel_ratio),u_is_halo:new s.bH(m,i.u_is_halo),u_translation:new s.bM(m,i.u_translation),u_pitched_scale:new s.b8(m,i.u_pitched_scale)}),background:(m,i)=>({u_opacity:new s.b8(m,i.u_opacity),u_color:new s.bI(m,i.u_color)}),backgroundPattern:(m,i)=>({u_opacity:new s.b8(m,i.u_opacity),u_image:new s.bH(m,i.u_image),u_pattern_tl_a:new s.bM(m,i.u_pattern_tl_a),u_pattern_br_a:new s.bM(m,i.u_pattern_br_a),u_pattern_tl_b:new s.bM(m,i.u_pattern_tl_b),u_pattern_br_b:new s.bM(m,i.u_pattern_br_b),u_texsize:new s.bM(m,i.u_texsize),u_mix:new s.b8(m,i.u_mix),u_pattern_size_a:new s.bM(m,i.u_pattern_size_a),u_pattern_size_b:new s.bM(m,i.u_pattern_size_b),u_scale_a:new s.b8(m,i.u_scale_a),u_scale_b:new s.b8(m,i.u_scale_b),u_pixel_coord_upper:new s.bM(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(m,i.u_pixel_coord_lower),u_tile_units_to_pixels:new s.b8(m,i.u_tile_units_to_pixels)}),terrain:(m,i)=>({u_texture:new s.bH(m,i.u_texture),u_ele_delta:new s.b8(m,i.u_ele_delta),u_fog_matrix:new s.bJ(m,i.u_fog_matrix),u_fog_color:new s.bI(m,i.u_fog_color),u_fog_ground_blend:new s.b8(m,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.b8(m,i.u_fog_ground_blend_opacity),u_horizon_color:new s.bI(m,i.u_horizon_color),u_horizon_fog_blend:new s.b8(m,i.u_horizon_fog_blend),u_is_globe_mode:new s.b8(m,i.u_is_globe_mode)}),terrainDepth:(m,i)=>({u_ele_delta:new s.b8(m,i.u_ele_delta)}),terrainCoords:(m,i)=>({u_texture:new s.bH(m,i.u_texture),u_terrain_coords_id:new s.b8(m,i.u_terrain_coords_id),u_ele_delta:new s.b8(m,i.u_ele_delta)}),projectionErrorMeasurement:(m,i)=>({u_input:new s.b8(m,i.u_input),u_output_expected:new s.b8(m,i.u_output_expected)}),atmosphere:(m,i)=>({u_sun_pos:new s.bL(m,i.u_sun_pos),u_atmosphere_blend:new s.b8(m,i.u_atmosphere_blend),u_globe_position:new s.bL(m,i.u_globe_position),u_globe_radius:new s.b8(m,i.u_globe_radius),u_inv_proj_matrix:new s.bJ(m,i.u_inv_proj_matrix)}),sky:(m,i)=>({u_sky_color:new s.bI(m,i.u_sky_color),u_horizon_color:new s.bI(m,i.u_horizon_color),u_horizon:new s.bM(m,i.u_horizon),u_horizon_normal:new s.bM(m,i.u_horizon_normal),u_sky_horizon_blend:new s.b8(m,i.u_sky_horizon_blend),u_sky_blend:new s.b8(m,i.u_sky_blend)})};class Rd{constructor(i,l,h){this.context=i;let p=i.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){let l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Cu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Od{constructor(i,l,h,p){this.length=l.length,this.attributes=h,this.itemSize=l.bytesPerElement,this.dynamicDraw=p,this.context=i;let g=i.gl;this.buffer=g.createBuffer(),i.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);let l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,l){for(let h=0;h<this.attributes.length;h++){let p=l.attributes[this.attributes[h].name];p!==void 0&&i.enableVertexAttribArray(p)}}setVertexAttribPointers(i,l,h){for(let p=0;p<this.attributes.length;p++){let g=this.attributes[p],v=l.attributes[g.name];v!==void 0&&i.vertexAttribPointer(v,g.components,i[Cu[g.type]],!1,this.itemSize,g.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ni{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Co extends Ni{getDefault(){return s.b7.transparent}set(i){let l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class _c extends Ni{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class ts extends Ni{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Ll extends Ni{getDefault(){return[!0,!0,!0,!0]}set(i){let l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ld extends Ni{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Eu extends Ni{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class No extends Ni{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){let l=this.current;(i.func!==l.func||i.ref!==l.ref||i.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class bc extends Ni{getDefault(){let i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){let l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class pp extends Ni{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let l=this.gl;i?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=i,this.dirty=!1}}class fp extends Ni{getDefault(){return[0,1]}set(i){let l=this.current;(i[0]!==l[0]||i[1]!==l[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class mp extends Ni{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let l=this.gl;i?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=i,this.dirty=!1}}class gp extends Ni{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Nd extends Ni{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let l=this.gl;i?l.enable(l.BLEND):l.disable(l.BLEND),this.current=i,this.dirty=!1}}class yc extends Ni{getDefault(){let i=this.gl;return[i.ONE,i.ZERO]}set(i){let l=this.current;(i[0]!==l[0]||i[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class ia extends Ni{getDefault(){return s.b7.transparent}set(i){let l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class vc extends Ni{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Nl extends Ni{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let l=this.gl;i?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=i,this.dirty=!1}}class ka extends Ni{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class wr extends Ni{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class ra extends Ni{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class sl extends Ni{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Jt extends Ni{getDefault(){let i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){let l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Fn extends Ni{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class so extends Ni{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Fd extends Ni{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let l=this.gl;l.bindTexture(l.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Fl extends Ni{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class is extends Ni{getDefault(){return null}set(i){let l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class rs extends Ni{getDefault(){return null}set(i){var l;if(i===this.current&&!this.dirty)return;let h=this.gl;xn(h)?h.bindVertexArray(i):(l=h.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class na extends Ni{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ns extends Ni{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Eo extends Ni{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Pa extends Ni{constructor(i,l){super(i),this.context=i,this.parent=l}getDefault(){return null}}class oa extends Pa{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Da extends Pa{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class xc extends Pa{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}let wc="Framebuffer is not complete";class Ai{constructor(i,l,h,p,g){this.context=i,this.width=l,this.height=h;let v=i.gl,C=this.framebuffer=v.createFramebuffer();if(this.colorAttachment=new oa(i,C),p)this.depthAttachment=g?new xc(i,C):new Da(i,C);else if(g)throw new Error("Stencil cannot be set without depth");if(v.checkFramebufferStatus(v.FRAMEBUFFER)!==v.FRAMEBUFFER_COMPLETE)throw new Error(wc)}destroy(){let i=this.context.gl,l=this.colorAttachment.get();if(l&&i.deleteTexture(l),this.depthAttachment){let h=this.depthAttachment.get();h&&i.deleteRenderbuffer(h)}i.deleteFramebuffer(this.framebuffer)}}class Cc{constructor(i){var l,h;if(this.gl=i,this.clearColor=new Co(this),this.clearDepth=new _c(this),this.clearStencil=new ts(this),this.colorMask=new Ll(this),this.depthMask=new Ld(this),this.stencilMask=new Eu(this),this.stencilFunc=new No(this),this.stencilOp=new bc(this),this.stencilTest=new pp(this),this.depthRange=new fp(this),this.depthTest=new mp(this),this.depthFunc=new gp(this),this.blend=new Nd(this),this.blendFunc=new yc(this),this.blendColor=new ia(this),this.blendEquation=new vc(this),this.cullFace=new Nl(this),this.cullFaceSide=new ka(this),this.frontFace=new wr(this),this.program=new ra(this),this.activeTexture=new sl(this),this.viewport=new Jt(this),this.bindFramebuffer=new Fn(this),this.bindRenderbuffer=new so(this),this.bindTexture=new Fd(this),this.bindVertexBuffer=new Fl(this),this.bindElementBuffer=new is(this),this.bindVertexArray=new rs(this),this.pixelStoreUnpack=new na(this),this.pixelStoreUnpackPremultiplyAlpha=new ns(this),this.pixelStoreUnpackFlipY=new Eo(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),xn(i)){this.HALF_FLOAT=i.HALF_FLOAT;let p=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=i.RGBA16F)!==null&&l!==void 0?l:p?.RGBA16F_EXT,this.RGB16F=(h=i.RGB16F)!==null&&h!==void 0?h:p?.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");let p=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=p?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,l){return new Rd(this,i,l)}createVertexBuffer(i,l,h){return new Od(this,i,l,h)}createRenderbuffer(i,l,h){let p=this.gl,g=p.createRenderbuffer();return this.bindRenderbuffer.set(g),p.renderbufferStorage(p.RENDERBUFFER,i,l,h),this.bindRenderbuffer.set(null),g}createFramebuffer(i,l,h,p){return new Ai(this,i,l,h,p)}clear({color:i,depth:l,stencil:h}){let p=this.gl,g=0;i&&(g|=p.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(g|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),h!==void 0&&(g|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(h),this.stencilMask.set(255)),p.clear(g)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){s.bE(i.blendFunction,Yi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return xn(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var l;return xn(this.gl)?this.gl.deleteVertexArray(i):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}let zl;function z(m,i,l,h,p){let g=m.context,v=m.transform,C=g.gl,T=m.useProgram("collisionBox"),P=[],O=0,F=0;for(let _e=0;_e<h.length;_e++){let xe=h[_e],Me=i.getTile(xe).getBucket(l);if(!Me)continue;let Te=p?Me.textCollisionBox:Me.iconCollisionBox,ke=Me.collisionCircleArray;ke.length>0&&(P.push({circleArray:ke,circleOffset:F,coord:xe}),O+=ke.length/4,F=O),Te&&T.draw(g,C.LINES,ui.disabled,Yt.disabled,m.colorModeForRenderPass(),Si.disabled,yu(m.transform),m.style.map.terrain&&m.style.map.terrain.getTerrainData(xe),v.getProjectionData({overscaledTileID:xe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),l.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,null,m.transform.zoom,null,null,Te.collisionVertexBuffer)}if(!p||!P.length)return;let N=m.useProgram("collisionCircle"),X=new s.bT;X.resize(4*O),X._trim();let J=0;for(let _e of P)for(let xe=0;xe<_e.circleArray.length/4;xe++){let Me=4*xe,Te=_e.circleArray[Me+0],ke=_e.circleArray[Me+1],Fe=_e.circleArray[Me+2],De=_e.circleArray[Me+3];X.emplace(J++,Te,ke,Fe,De,0),X.emplace(J++,Te,ke,Fe,De,1),X.emplace(J++,Te,ke,Fe,De,2),X.emplace(J++,Te,ke,Fe,De,3)}(!zl||zl.length<2*O)&&(zl=function(_e){let xe=2*_e,Me=new s.bV;Me.resize(xe),Me._trim();for(let Te=0;Te<xe;Te++){let ke=6*Te;Me.uint16[ke+0]=4*Te+0,Me.uint16[ke+1]=4*Te+1,Me.uint16[ke+2]=4*Te+2,Me.uint16[ke+3]=4*Te+2,Me.uint16[ke+4]=4*Te+3,Me.uint16[ke+5]=4*Te+0}return Me}(O));let ge=g.createIndexBuffer(zl,!0),me=g.createVertexBuffer(X,s.bU.members,!0);for(let _e of P){let xe=Lo(m.transform);N.draw(g,C.TRIANGLES,ui.disabled,Yt.disabled,m.colorModeForRenderPass(),Si.disabled,xe,m.style.map.terrain&&m.style.map.terrain.getTerrainData(_e.coord),null,l.id,me,ge,s.aJ.simpleSegment(0,2*_e.circleOffset,_e.circleArray.length,_e.circleArray.length/2),null,m.transform.zoom,null,null,null)}me.destroy(),ge.destroy()}let j=s.ad(new Float32Array(16));function Ce(m,i,l,h,p,g){let{horizontalAlign:v,verticalAlign:C}=s.aE(m);return new s.P((-(v-.5)*i/p+h[0])*g,(-(C-.5)*l/p+h[1])*g)}function Ye(m,i,l,h,p,g){let v=i.tileAnchorPoint.add(new s.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let C=h.mult(g);l||(C=C.rotate(-p));let T=v.add(C);return $e(T.x,T.y,i.pitchedLabelPlaneMatrix,i.getElevation).point}if(l){let C=Wi(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(m),T=Math.atan(C.y/C.x)+(C.x<0?Math.PI:0);return m.add(h.rotate(T))}return m.add(h)}function ht(m,i,l,h,p,g,v,C,T,P,O,F){let N=m.text.placedSymbolArray,X=m.text.dynamicLayoutVertexArray,J=m.icon.dynamicLayoutVertexArray,ge={};X.clear();for(let me=0;me<N.length;me++){let _e=N.get(me),xe=_e.hidden||!_e.crossTileID||m.allowVerticalPlacement&&!_e.placedOrientation?null:h[_e.crossTileID];if(xe){let Me=new s.P(_e.anchorX,_e.anchorY),Te={getElevation:F,width:p.width,height:p.height,pitchedLabelPlaneMatrix:g,pitchWithMap:l,transform:p,tileAnchorPoint:Me,translation:P,unwrappedTileID:O},ke=l?it(Me.x,Me.y,Te):Wi(Me.x,Me.y,Te),Fe=$i(p.cameraToCenterDistance,ke.signedDistanceFromCamera),De=s.am(m.textSizeData,C,_e)*Fe/s.ay;l&&(De*=m.tilePixelRatio/v);let{width:We,height:lt,anchor:et,textOffset:rt,textBoxScale:st}=xe,Mt=Ce(et,We,lt,rt,st,De),Et=p.getPitchedTextCorrection(Me.x+P[0],Me.y+P[1],O),_t=Ye(ke.point,Te,i,Mt,-p.bearingInRadians,Et),qt=m.allowVerticalPlacement&&_e.placedOrientation===s.al.vertical?Math.PI/2:0;for(let xi=0;xi<_e.numGlyphs;xi++)s.as(X,_t,qt);T&&_e.associatedIconIndex>=0&&(ge[_e.associatedIconIndex]={shiftedAnchor:_t,angle:qt})}else Ln(_e.numGlyphs,X)}if(T){J.clear();let me=m.icon.placedSymbolArray;for(let _e=0;_e<me.length;_e++){let xe=me.get(_e);if(xe.hidden)Ln(xe.numGlyphs,J);else{let Me=ge[_e];if(Me)for(let Te=0;Te<xe.numGlyphs;Te++)s.as(J,Me.shiftedAnchor,Me.angle);else Ln(xe.numGlyphs,J)}}m.icon.dynamicLayoutVertexBuffer.updateData(J)}m.text.dynamicLayoutVertexBuffer.updateData(X)}function Nt(m,i,l){return l.iconsInText&&i?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function ri(m,i,l,h,p,g,v,C,T,P,O,F,N){let X=m.context,J=X.gl,ge=m.transform,me=C==="map",_e=T==="map",xe=C!=="viewport"&&l.layout.get("symbol-placement")!=="point",Me=me&&!_e&&!xe,Te=!l.layout.get("symbol-sort-key").isConstant(),ke=!1,Fe=m.getDepthModeForSublayer(0,ui.ReadOnly),De=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),We=[],lt=ge.getCircleRadiusCorrection();for(let et of h){let rt=i.getTile(et),st=rt.getBucket(l);if(!st)continue;let Mt=p?st.text:st.icon;if(!Mt||!Mt.segments.get().length||!Mt.hasVisibleVertices)continue;let Et=Mt.programConfigurations.get(l.id),_t=p||st.sdfIcons,qt=p?st.textSizeData:st.iconSizeData,xi=_e||ge.pitch!==0,qi=m.useProgram(Nt(_t,p,st),Et),Pr=s.ak(qt,ge.zoom),gr=m.style.map.terrain&&m.style.map.terrain.getTerrainData(et),Dr,Rr,yr,Qi,cn=[0,0],Cn=null;if(p)Rr=rt.glyphAtlasTexture,yr=J.LINEAR,Dr=rt.glyphAtlasTexture.size,st.iconsInText&&(cn=rt.imageAtlasTexture.size,Cn=rt.imageAtlasTexture,Qi=xi||m.options.rotating||m.options.zooming||qt.kind==="composite"||qt.kind==="camera"?J.LINEAR:J.NEAREST);else{let rn=l.layout.get("icon-size").constantOr(0)!==1||st.iconsNeedLinear;Rr=rt.imageAtlasTexture,yr=_t||m.options.rotating||m.options.zooming||rn||xi?J.LINEAR:J.NEAREST,Dr=rt.imageAtlasTexture.size}let Bn=s.az(rt,1,m.transform.zoom),Ji=Ae(me,m.transform,Bn),ll=s.K();s.an(ll,Ji);let la=ni(_e,me,m.transform,Bn),cl=s.aA(ge,rt,g,v),Ul=ge.getProjectionData({overscaledTileID:et,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),Nu=De&&st.hasTextData(),ul=l.layout.get("icon-text-fit")!=="none"&&Nu&&st.hasIconData();if(xe){let rn=m.style.map.terrain?(co,Er)=>m.style.map.terrain.getElevation(et,co,Er):null,nn=l.layout.get("text-rotation-alignment")==="map";hi(st,m,p,Ji,ll,_e,P,nn,et.toUnwrapped(),ge.width,ge.height,cl,rn)}let jl=p&&De||ul,Bo=xe||jl?j:_e?Ji:m.transform.clipSpaceToPixelsMatrix,dl=_t&&l.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Oa;Oa=_t?st.iconsInText?mc(qt.kind,Pr,Me,_e,xe,jl,m,Bo,la,cl,Dr,cn,lt):xu(qt.kind,Pr,Me,_e,xe,jl,m,Bo,la,cl,p,Dr,0,lt):ta(qt.kind,Pr,Me,_e,xe,jl,m,Bo,la,cl,p,Dr,lt);let hl={program:qi,buffers:Mt,uniformValues:Oa,projectionData:Ul,atlasTexture:Rr,atlasTextureIcon:Cn,atlasInterpolation:yr,atlasInterpolationIcon:Qi,isSDF:_t,hasHalo:dl};if(Te&&st.canOverlap){ke=!0;let rn=Mt.segments.get();for(let nn of rn)We.push({segments:new s.aJ([nn]),sortKey:nn.sortKey,state:hl,terrainData:gr})}else We.push({segments:Mt.segments,sortKey:0,state:hl,terrainData:gr})}ke&&We.sort((et,rt)=>et.sortKey-rt.sortKey);for(let et of We){let rt=et.state;if(X.activeTexture.set(J.TEXTURE0),rt.atlasTexture.bind(rt.atlasInterpolation,J.CLAMP_TO_EDGE),rt.atlasTextureIcon&&(X.activeTexture.set(J.TEXTURE1),rt.atlasTextureIcon&&rt.atlasTextureIcon.bind(rt.atlasInterpolationIcon,J.CLAMP_TO_EDGE)),rt.isSDF){let st=rt.uniformValues;rt.hasHalo&&(st.u_is_halo=1,Ti(rt.buffers,et.segments,l,m,rt.program,Fe,O,F,st,rt.projectionData,et.terrainData)),st.u_is_halo=0}Ti(rt.buffers,et.segments,l,m,rt.program,Fe,O,F,rt.uniformValues,rt.projectionData,et.terrainData)}}function Ti(m,i,l,h,p,g,v,C,T,P,O){let F=h.context;p.draw(F,F.gl.TRIANGLES,g,v,C,Si.backCCW,T,O,P,l.id,m.layoutVertexBuffer,m.indexBuffer,i,l.paint,h.transform.zoom,m.programConfigurations.get(l.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function mr(m,i,l,h,p){let g=m.context,v=g.gl,C=Yt.disabled,T=new Yi([v.ONE,v.ONE],s.b7.transparent,[!0,!0,!0,!0]),P=i.getBucket(l);if(!P)return;let O=h.key,F=l.heatmapFbos.get(O);F||(F=zn(g,i.tileSize,i.tileSize),l.heatmapFbos.set(O,F)),g.bindFramebuffer.set(F.framebuffer),g.viewport.set([0,0,i.tileSize,i.tileSize]),g.clear({color:s.b7.transparent});let N=P.programConfigurations.get(l.id),X=m.useProgram("heatmap",N,!p),J=m.transform.getProjectionData({overscaledTileID:i.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ge=m.style.map.terrain.getTerrainData(h);X.draw(g,v.TRIANGLES,ui.disabled,C,T,Si.disabled,Js(i,m.transform.zoom,l.paint.get("heatmap-intensity"),1),ge,J,l.id,P.layoutVertexBuffer,P.indexBuffer,P.segments,l.paint,m.transform.zoom,N)}function Zr(m,i,l,h,p){let g=m.context,v=g.gl,C=m.transform;g.setColorMode(m.colorModeForRenderPass());let T=ao(g,i),P=l.key,O=i.heatmapFbos.get(P);if(!O)return;g.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,O.colorAttachment.get()),g.activeTexture.set(v.TEXTURE1),T.bind(v.LINEAR,v.CLAMP_TO_EDGE);let F=C.getProjectionData({overscaledTileID:l,applyTerrainMatrix:p,applyGlobeMatrix:!h});m.useProgram("heatmapTexture").draw(g,v.TRIANGLES,ui.disabled,Yt.disabled,m.colorModeForRenderPass(),Si.disabled,Td(m,i,0,1),null,F,i.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments,i.paint,C.zoom),O.destroy(),i.heatmapFbos.delete(P)}function zn(m,i,l){var h,p;let g=m.gl,v=g.createTexture();g.bindTexture(g.TEXTURE_2D,v),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);let C=(h=m.HALF_FLOAT)!==null&&h!==void 0?h:g.UNSIGNED_BYTE,T=(p=m.RGBA16F)!==null&&p!==void 0?p:g.RGBA;g.texImage2D(g.TEXTURE_2D,0,T,i,l,0,g.RGBA,C,null);let P=m.createFramebuffer(i,l,!1,!1);return P.colorAttachment.set(v),P}function ao(m,i){return i.colorRampTexture||(i.colorRampTexture=new Ve(m,i.colorRamp,m.gl.RGBA)),i.colorRampTexture}function Fo(m,i,l,h,p){if(!l||!h||!h.imageAtlas)return;let g=h.imageAtlas.patternPositions,v=g[l.to.toString()],C=g[l.from.toString()];if(!v&&C&&(v=C),!C&&v&&(C=v),!v||!C){let T=p.getPaintProperty(i);v=g[T],C=g[T]}v&&C&&m.setConstantPatternPositions(v,C)}function So(m,i,l,h,p,g,v,C){let T=m.context.gl,P="fill-pattern",O=l.paint.get(P),F=O&&O.constantOr(1),N=l.getCrossfadeParameters(),X,J,ge,me,_e,xe=m.transform,Me=l.paint.get("fill-translate"),Te=l.paint.get("fill-translate-anchor");v?(J=F&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=T.LINES):(J=F?"fillPattern":"fill",X=T.TRIANGLES);let ke=O.constantOr(null);for(let Fe of h){let De=i.getTile(Fe);if(F&&!De.patternsLoaded())continue;let We=De.getBucket(l);if(!We)continue;let lt=We.programConfigurations.get(l.id),et=m.useProgram(J,lt),rt=m.style.map.terrain&&m.style.map.terrain.getTerrainData(Fe);F&&(m.context.activeTexture.set(T.TEXTURE0),De.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),lt.updatePaintBuffers(N)),Fo(lt,P,ke,De,l);let st=xe.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!C,applyTerrainMatrix:!0}),Mt=s.aA(xe,De,Me,Te);if(v){me=We.indexBuffer2,_e=We.segments2;let _t=[T.drawingBufferWidth,T.drawingBufferHeight];ge=J==="fillOutlinePattern"&&F?Ks(m,N,De,_t,Mt):nl(_t,Mt)}else me=We.indexBuffer,_e=We.segments,ge=F?bu(m,N,De,Mt):{u_fill_translate:Mt};let Et=m.stencilModeForClipping(Fe);et.draw(m.context,X,p,Et,g,Si.backCCW,ge,rt,st,l.id,We.layoutVertexBuffer,me,_e,l.paint,m.transform.zoom,lt)}}function bs(m,i,l,h,p,g,v,C){let T=m.context,P=T.gl,O="fill-extrusion-pattern",F=l.paint.get(O),N=F.constantOr(1),X=l.getCrossfadeParameters(),J=l.paint.get("fill-extrusion-opacity"),ge=F.constantOr(null),me=m.transform;for(let _e of h){let xe=i.getTile(_e),Me=xe.getBucket(l);if(!Me)continue;let Te=m.style.map.terrain&&m.style.map.terrain.getTerrainData(_e),ke=Me.programConfigurations.get(l.id),Fe=m.useProgram(N?"fillExtrusionPattern":"fillExtrusion",ke);N&&(m.context.activeTexture.set(P.TEXTURE0),xe.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),ke.updatePaintBuffers(X));let De=me.getProjectionData({overscaledTileID:_e,applyGlobeMatrix:!C,applyTerrainMatrix:!0});Fo(ke,O,ge,xe,l);let We=s.aA(me,xe,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),lt=l.paint.get("fill-extrusion-vertical-gradient"),et=N?es(m,lt,J,We,_e,X,xe):rl(m,lt,J,We);Fe.draw(T,T.gl.TRIANGLES,p,g,v,Si.backCCW,et,Te,De,l.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,l.paint,m.transform.zoom,ke,m.style.map.terrain&&Me.centroidVertexBuffer)}}function Su(m,i,l,h,p,g,v,C,T){var P;let O=m.style.projection,F=m.context,N=m.transform,X=F.gl,J=[`#define NUM_ILLUMINATION_SOURCES ${l.paint.get("hillshade-highlight-color").values.length}`],ge=m.useProgram("hillshade",null,!1,J),me=!m.options.moving;for(let _e of h){let xe=i.getTile(_e),Me=xe.fbo;if(!Me)continue;let Te=O.getMeshFromTileID(F,_e.canonical,C,!0,"raster"),ke=(P=m.style.map.terrain)===null||P===void 0?void 0:P.getTerrainData(_e);F.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,Me.colorAttachment.get());let Fe=N.getProjectionData({overscaledTileID:_e,aligned:me,applyGlobeMatrix:!T,applyTerrainMatrix:!0});ge.draw(F,X.TRIANGLES,g,p[_e.overscaledZ],v,Si.backCCW,Md(m,xe,l),ke,Fe,l.id,Te.vertexBuffer,Te.indexBuffer,Te.segments)}}let Tu=[new s.P(0,0),new s.P(s.Z,0),new s.P(s.Z,s.Z),new s.P(0,s.Z)];function zd(m,i,l,h,p,g,v,C,T=!1,P=!1){let O=h[h.length-1].overscaledZ,F=m.context,N=F.gl,X=m.useProgram("raster"),J=m.transform,ge=m.style.projection,me=m.colorModeForRenderPass(),_e=!m.options.moving;for(let xe of h){let Me=m.getDepthModeForSublayer(xe.overscaledZ-O,l.paint.get("raster-opacity")===1?ui.ReadWrite:ui.ReadOnly,N.LESS),Te=i.getTile(xe);Te.registerFadeDuration(l.paint.get("raster-fade-duration"));let ke=i.findLoadedParent(xe,0),Fe=i.findLoadedSibling(xe),De=Lm(Te,ke||Fe||null,i,l,m.transform,m.style.map.terrain),We,lt,et=l.paint.get("raster-resampling")==="nearest"?N.NEAREST:N.LINEAR;F.activeTexture.set(N.TEXTURE0),Te.texture.bind(et,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),F.activeTexture.set(N.TEXTURE1),ke?(ke.texture.bind(et,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),We=Math.pow(2,ke.tileID.overscaledZ-Te.tileID.overscaledZ),lt=[Te.tileID.canonical.x*We%1,Te.tileID.canonical.y*We%1]):Te.texture.bind(et,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),Te.texture.useMipmap&&F.extTextureFilterAnisotropic&&m.transform.pitch>20&&N.texParameterf(N.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax);let rt=m.style.map.terrain&&m.style.map.terrain.getTerrainData(xe),st=J.getProjectionData({overscaledTileID:xe,aligned:_e,applyGlobeMatrix:!P,applyTerrainMatrix:!0}),Mt=Pd(lt||[0,0],We||1,De,l,C),Et=ge.getMeshFromTileID(F,xe.canonical,g,v,"raster");X.draw(F,N.TRIANGLES,Me,p?p[xe.overscaledZ]:Yt.disabled,me,T?Si.frontCCW:Si.backCCW,Mt,rt,st,l.id,Et.vertexBuffer,Et.indexBuffer,Et.segments)}}function Lm(m,i,l,h,p,g){let v=h.paint.get("raster-fade-duration");if(!g&&v>0){let C=I.now(),T=(C-m.timeAdded)/v,P=i?(C-i.timeAdded)/v:-1,O=l.getSource(),F=Pe(p,{tileSize:O.tileSize,roundZoom:O.roundZoom}),N=!i||Math.abs(i.tileID.overscaledZ-F)>Math.abs(m.tileID.overscaledZ-F),X=N&&m.refreshedUponExpiration?1:s.ae(N?T:1-P,0,1);return m.refreshedUponExpiration&&T>=1&&(m.refreshedUponExpiration=!1),i?{opacity:1,mix:1-X}:{opacity:X,mix:0}}return{opacity:1,mix:0}}let Bd=new s.b7(1,0,0,1),_p=new s.b7(0,1,0,1),Nm=new s.b7(0,0,1,1),Fm=new s.b7(1,0,1,1),Vd=new s.b7(0,1,1,1);function Ud(m,i,l,h){Mu(m,0,i+l/2,m.transform.width,l,h)}function zm(m,i,l,h){Mu(m,i-l/2,0,l,m.transform.height,h)}function Mu(m,i,l,h,p,g){let v=m.context,C=v.gl;C.enable(C.SCISSOR_TEST),C.scissor(i*m.pixelRatio,l*m.pixelRatio,h*m.pixelRatio,p*m.pixelRatio),v.clear({color:g}),C.disable(C.SCISSOR_TEST)}function jr(m,i,l){let h=m.context,p=h.gl,g=m.useProgram("debug"),v=ui.disabled,C=Yt.disabled,T=m.colorModeForRenderPass(),P="$debug",O=m.style.map.terrain&&m.style.map.terrain.getTerrainData(l);h.activeTexture.set(p.TEXTURE0);let F=i.getTileByID(l.key).latestRawTileData,N=Math.floor((F&&F.byteLength||0)/1024),X=i.getTile(l).tileSize,J=512/Math.min(X,512)*(l.overscaledZ/m.transform.zoom)*.5,ge=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(ge+=` => ${l.overscaledZ}`),function(_e,xe){_e.initDebugOverlayCanvas();let Me=_e.debugOverlayCanvas,Te=_e.context.gl,ke=_e.debugOverlayCanvas.getContext("2d");ke.clearRect(0,0,Me.width,Me.height),ke.shadowColor="white",ke.shadowBlur=2,ke.lineWidth=1.5,ke.strokeStyle="white",ke.textBaseline="top",ke.font="bold 36px Open Sans, sans-serif",ke.fillText(xe,5,5),ke.strokeText(xe,5,5),_e.debugOverlayTexture.update(Me),_e.debugOverlayTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE)}(m,`${ge} ${N}kB`);let me=m.transform.getProjectionData({overscaledTileID:l,applyGlobeMatrix:!0,applyTerrainMatrix:!0});g.draw(h,p.TRIANGLES,v,C,Yi.alphaBlended,Si.disabled,Rl(s.b7.transparent,J),null,me,P,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments),g.draw(h,p.LINE_STRIP,v,C,T,Si.disabled,Rl(s.b7.red),O,me,P,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments)}function al(m,i,l,h){let{isRenderingGlobe:p}=h,g=m.context,v=g.gl,C=m.transform,T=m.colorModeForRenderPass(),P=m.getDepthModeFor3D(),O=m.useProgram("terrain");g.bindFramebuffer.set(null),g.viewport.set([0,0,m.width,m.height]);for(let F of l){let N=i.getTerrainMesh(F.tileID),X=m.renderToTexture.getTexture(F),J=i.getTerrainData(F.tileID);g.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,X.texture);let ge=i.getMeshFrameDelta(C.zoom),me=C.calculateFogMatrix(F.tileID.toUnwrapped()),_e=dp(ge,me,m.style.sky,C.pitch,p),xe=C.getProjectionData({overscaledTileID:F.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});O.draw(g,v.TRIANGLES,P,Yt.disabled,T,Si.backCCW,_e,J,xe,"terrain",N.vertexBuffer,N.indexBuffer,N.segments)}}function zo(m,i){if(!i.mesh){let l=new s.aI;l.emplaceBack(-1,-1),l.emplaceBack(1,-1),l.emplaceBack(1,1),l.emplaceBack(-1,1);let h=new s.aK;h.emplaceBack(0,1,2),h.emplaceBack(0,2,3),i.mesh=new Qo(m.createVertexBuffer(l,Wr.members),m.createIndexBuffer(h),s.aJ.simpleSegment(0,0,l.length,h.length))}return i.mesh}class bp{constructor(i,l){this.context=new Cc(i),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=He.maxUnderzooming+He.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Gi}resize(i,l,h){if(this.width=Math.floor(i*h),this.height=Math.floor(l*h),this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let p of this.style._order)this.style._layers[p].resize()}setup(){let i=this.context,l=new s.aI;l.emplaceBack(0,0),l.emplaceBack(s.Z,0),l.emplaceBack(0,s.Z),l.emplaceBack(s.Z,s.Z),this.tileExtentBuffer=i.createVertexBuffer(l,Wr.members),this.tileExtentSegments=s.aJ.simpleSegment(0,0,4,2);let h=new s.aI;h.emplaceBack(0,0),h.emplaceBack(s.Z,0),h.emplaceBack(0,s.Z),h.emplaceBack(s.Z,s.Z),this.debugBuffer=i.createVertexBuffer(h,Wr.members),this.debugSegments=s.aJ.simpleSegment(0,0,4,5);let p=new s.b_;p.emplaceBack(0,0,0,0),p.emplaceBack(s.Z,0,s.Z,0),p.emplaceBack(0,s.Z,0,s.Z),p.emplaceBack(s.Z,s.Z,s.Z,s.Z),this.rasterBoundsBuffer=i.createVertexBuffer(p,up.members),this.rasterBoundsSegments=s.aJ.simpleSegment(0,0,4,2);let g=new s.aI;g.emplaceBack(0,0),g.emplaceBack(s.Z,0),g.emplaceBack(0,s.Z),g.emplaceBack(s.Z,s.Z),this.rasterBoundsBufferPosOnly=i.createVertexBuffer(g,Wr.members),this.rasterBoundsSegmentsPosOnly=s.aJ.simpleSegment(0,0,4,5);let v=new s.aI;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(v,Wr.members),this.viewportSegments=s.aJ.simpleSegment(0,0,4,2);let C=new s.b$;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(C);let T=new s.aK;T.emplaceBack(1,0,2),T.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(T);let P=this.context.gl;this.stencilClearMode=new Yt({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO),this.tileExtentMesh=new Qo(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let i=this.context,l=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let h=s.K();s.bQ(h,0,this.width,this.height,0,0,1),s.M(h,h,[l.drawingBufferWidth,l.drawingBufferHeight,0]);let p={mainMatrix:h,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:h};this.useProgram("clippingMask",null,!0).draw(i,l.TRIANGLES,ui.disabled,this.stencilClearMode,Yi.disabled,Si.disabled,null,null,p,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,l,h){if(this.currentStencilSource===i.source||!i.isTileClipped()||!l||!l.length)return;this.currentStencilSource=i.source,this.nextStencilID+l.length>256&&this.clearStencil();let p=this.context;p.setColorMode(Yi.disabled),p.setDepthMode(ui.disabled);let g={};for(let v of l)g[v.key]=this.nextStencilID++;this._renderTileMasks(g,l,h,!0),this._renderTileMasks(g,l,h,!1),this._tileClippingMaskIDs=g}_renderTileMasks(i,l,h,p){let g=this.context,v=g.gl,C=this.style.projection,T=this.transform,P=this.useProgram("clippingMask");for(let O of l){let F=i[O.key],N=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O),X=C.getMeshFromTileID(this.context,O.canonical,p,!0,"stencil"),J=T.getProjectionData({overscaledTileID:O,applyGlobeMatrix:!h,applyTerrainMatrix:!0});P.draw(g,v.TRIANGLES,ui.disabled,new Yt({func:v.ALWAYS,mask:0},F,255,v.KEEP,v.KEEP,v.REPLACE),Yi.disabled,h?Si.disabled:Si.backCCW,null,N,J,"$clipping",X.vertexBuffer,X.indexBuffer,X.segments)}}_renderTilesDepthBuffer(){let i=this.context,l=i.gl,h=this.style.projection,p=this.transform,g=this.useProgram("depth"),v=this.getDepthModeFor3D(),C=ze(p,{tileSize:p.tileSize});for(let T of C){let P=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T),O=h.getMeshFromTileID(this.context,T.canonical,!0,!0,"raster"),F=p.getProjectionData({overscaledTileID:T,applyGlobeMatrix:!0,applyTerrainMatrix:!0});g.draw(i,l.TRIANGLES,v,Yt.disabled,Yi.disabled,Si.backCCW,null,P,F,"$clipping",O.vertexBuffer,O.indexBuffer,O.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let i=this.nextStencilID++,l=this.context.gl;return new Yt({func:l.NOTEQUAL,mask:255},i,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(i){let l=this.context.gl;return new Yt({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,l.KEEP,l.KEEP,l.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(i){let l=this.context.gl,h=i.sort((v,C)=>C.overscaledZ-v.overscaledZ),p=h[h.length-1].overscaledZ,g=h[0].overscaledZ-p+1;if(g>1){this.currentStencilSource=void 0,this.nextStencilID+g>256&&this.clearStencil();let v={};for(let C=0;C<g;C++)v[C+p]=new Yt({func:l.GEQUAL,mask:255},C+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=g,[v,h]}return[{[p]:Yt.disabled},h]}stencilConfigForOverlapTwoPass(i){let l=this.context.gl,h=i.sort((v,C)=>C.overscaledZ-v.overscaledZ),p=h[h.length-1].overscaledZ,g=h[0].overscaledZ-p+1;if(this.clearStencil(),g>1){let v={},C={};for(let T=0;T<g;T++)v[T+p]=new Yt({func:l.GREATER,mask:255},g+1+T,255,l.KEEP,l.KEEP,l.REPLACE),C[T+p]=new Yt({func:l.GREATER,mask:255},1+T,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID=2*g+1,[v,C,h]}return this.nextStencilID=3,[{[p]:new Yt({func:l.GREATER,mask:255},2,255,l.KEEP,l.KEEP,l.REPLACE)},{[p]:new Yt({func:l.GREATER,mask:255},1,255,l.KEEP,l.KEEP,l.REPLACE)},h]}colorModeForRenderPass(){let i=this.context.gl;return this._showOverdrawInspector?new Yi([i.CONSTANT_COLOR,i.ONE],new s.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Yi.unblended:Yi.alphaBlended}getDepthModeForSublayer(i,l,h){if(!this.opaquePassEnabledForLayer())return ui.disabled;let p=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new ui(h||this.context.gl.LEQUAL,l,[p,p])}getDepthModeFor3D(){return new ui(this.context.gl.LEQUAL,ui.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,l){var h,p;this.style=i,this.options=l,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(I.now()),this.imageManager.beginFrame();let g=this.style._order,v=this.style.sourceCaches,C={},T={},P={},O={isRenderingToTexture:!1,isRenderingGlobe:((h=i.projection)===null||h===void 0?void 0:h.transitionState)>0};for(let N in v){let X=v[N];X.used&&X.prepare(this.context),C[N]=X.getVisibleCoordinates(!1),T[N]=C[N].slice().reverse(),P[N]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let N=0;N<g.length;N++)if(this.style._layers[g[N]].is3D()){this.opaquePassCutoff=N;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let N of g){let X=this.style._layers[N];if(!X.hasOffscreenPass()||X.isHidden(this.transform.zoom))continue;let J=T[X.source];(X.type==="custom"||J.length)&&this.renderLayer(this,v[X.source],X,J,O)}if((p=this.style.projection)===null||p===void 0||p.updateGPUdependent({context:this.context,useProgram:N=>this.useProgram(N)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?s.b7.black:s.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(N,X){let J=N.context,ge=J.gl,me=((Fe,De,We)=>{let lt=Math.cos(De.rollInRadians),et=Math.sin(De.rollInRadians),rt=qe(De),st=De.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Fe.properties.get("sky-color"),u_horizon_color:Fe.properties.get("horizon-color"),u_horizon:[(De.width/2-rt*et)*We,(De.height/2+rt*lt)*We],u_horizon_normal:[-et,lt],u_sky_horizon_blend:Fe.properties.get("sky-horizon-blend")*De.height/2*We,u_sky_blend:st}})(X,N.style.map.transform,N.pixelRatio),_e=new ui(ge.LEQUAL,ui.ReadWrite,[0,1]),xe=Yt.disabled,Me=N.colorModeForRenderPass(),Te=N.useProgram("sky"),ke=zo(J,X);Te.draw(J,ge.TRIANGLES,_e,xe,Me,Si.disabled,me,null,void 0,"sky",ke.vertexBuffer,ke.indexBuffer,ke.segments)}(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){let N=this.style._layers[g[this.currentLayer]],X=v[N.source],J=C[N.source];this._renderTileClippingMasks(N,J,!1),this.renderLayer(this,X,N,J,O)}this.renderPass="translucent";let F=!1;for(this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){let N=this.style._layers[g[this.currentLayer]],X=v[N.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(N,O))continue;this.opaquePassEnabledForLayer()||F||(F=!0,O.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let J=(N.type==="symbol"?P:T)[N.source];this._renderTileClippingMasks(N,C[N.source],!!this.renderToTexture),this.renderLayer(this,X,N,J,O)}if(O.isRenderingGlobe&&function(N,X,J){let ge=N.context,me=ge.gl,_e=N.useProgram("atmosphere"),xe=new ui(me.LEQUAL,ui.ReadOnly,[0,1]),Me=N.transform,Te=function(st,Mt){let Et=st.properties.get("position"),_t=[-Et.x,-Et.y,-Et.z],qt=s.ad(new Float64Array(16));return st.properties.get("anchor")==="map"&&(s.a_(qt,qt,Mt.rollInRadians),s.a$(qt,qt,-Mt.pitchInRadians),s.a_(qt,qt,Mt.bearingInRadians),s.a$(qt,qt,Mt.center.lat*Math.PI/180),s.bp(qt,qt,-Mt.center.lng*Math.PI/180)),s.bZ(_t,_t,qt),_t}(J,N.transform),ke=Me.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Fe=X.properties.get("atmosphere-blend")*ke.projectionTransition;if(Fe===0)return;let De=Gs(Me.worldSize,Me.center.lat),We=Me.inverseProjectionMatrix,lt=new Float64Array(4);lt[3]=1,s.at(lt,lt,Me.modelViewProjectionMatrix),lt[0]/=lt[3],lt[1]/=lt[3],lt[2]/=lt[3],lt[3]=1,s.at(lt,lt,We),lt[0]/=lt[3],lt[1]/=lt[3],lt[2]/=lt[3],lt[3]=1;let et=((st,Mt,Et,_t,qt)=>({u_sun_pos:st,u_atmosphere_blend:Mt,u_globe_position:Et,u_globe_radius:_t,u_inv_proj_matrix:qt}))(Te,Fe,[lt[0],lt[1],lt[2]],De,We),rt=zo(ge,X);_e.draw(ge,me.TRIANGLES,xe,Yt.disabled,Yi.alphaBlended,Si.disabled,et,null,null,"atmosphere",rt.vertexBuffer,rt.indexBuffer,rt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let N=function(X,J){let ge=null,me=Object.values(X._layers).flatMap(Te=>Te.source&&!Te.isHidden(J)?[X.sourceCaches[Te.source]]:[]),_e=me.filter(Te=>Te.getSource().type==="vector"),xe=me.filter(Te=>Te.getSource().type!=="vector"),Me=Te=>{(!ge||ge.getSource().maxzoom<Te.getSource().maxzoom)&&(ge=Te)};return _e.forEach(Te=>Me(Te)),ge||xe.forEach(Te=>Me(Te)),ge}(this.style,this.transform.zoom);N&&function(X,J,ge){for(let me=0;me<ge.length;me++)jr(X,J,ge[me])}(this,N,N.getVisibleCoordinates())}this.options.showPadding&&function(N){let X=N.transform.padding;Ud(N,N.transform.height-(X.top||0),3,Bd),Ud(N,X.bottom||0,3,_p),zm(N,X.left||0,3,Nm),zm(N,N.transform.width-(X.right||0),3,Fm);let J=N.transform.centerPoint;(function(ge,me,_e,xe){Mu(ge,me-1,_e-10,2,20,xe),Mu(ge,me-10,_e-1,20,2,xe)})(N,J.x,N.transform.height-J.y,Vd)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;let l=this.terrainFacilitator.matrix,h=this.transform.modelViewProjectionMatrix,p=this.terrainFacilitator.dirty;p||(p=i?!s.c0(l,h):!s.c1(l,h)),p||(p=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),p&&(s.c2(l,h),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(g,v){let C=g.context,T=C.gl,P=g.transform,O=Yi.unblended,F=new ui(T.LEQUAL,ui.ReadWrite,[0,1]),N=v.sourceCache.getRenderableTiles(),X=g.useProgram("terrainDepth");C.bindFramebuffer.set(v.getFramebuffer("depth").framebuffer),C.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),C.clear({color:s.b7.transparent,depth:1});for(let J of N){let ge=v.getTerrainMesh(J.tileID),me=v.getTerrainData(J.tileID),_e=P.getProjectionData({overscaledTileID:J.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),xe={u_ele_delta:v.getMeshFrameDelta(P.zoom)};X.draw(C,T.TRIANGLES,F,Yt.disabled,O,Si.backCCW,xe,me,_e,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments)}C.bindFramebuffer.set(null),C.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain),function(g,v){let C=g.context,T=C.gl,P=g.transform,O=Yi.unblended,F=new ui(T.LEQUAL,ui.ReadWrite,[0,1]),N=v.getCoordsTexture(),X=v.sourceCache.getRenderableTiles(),J=g.useProgram("terrainCoords");C.bindFramebuffer.set(v.getFramebuffer("coords").framebuffer),C.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),C.clear({color:s.b7.transparent,depth:1}),v.coordsIndex=[];for(let ge of X){let me=v.getTerrainMesh(ge.tileID),_e=v.getTerrainData(ge.tileID);C.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,N.texture);let xe={u_terrain_coords_id:(255-v.coordsIndex.length)/255,u_texture:0,u_ele_delta:v.getMeshFrameDelta(P.zoom)},Me=P.getProjectionData({overscaledTileID:ge.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});J.draw(C,T.TRIANGLES,F,Yt.disabled,O,Si.backCCW,xe,_e,Me,"terrain",me.vertexBuffer,me.indexBuffer,me.segments),v.coordsIndex.push(ge.tileID.key)}C.bindFramebuffer.set(null),C.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain))}renderLayer(i,l,h,p,g){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||(p||[]).length)&&(this.id=h.id,s.c3(h)?function(v,C,T,P,O,F){if(v.renderPass!=="translucent")return;let{isRenderingToTexture:N}=F,X=Yt.disabled,J=v.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ge,me,_e,xe,Me,Te,ke,Fe,De){let We=me.transform,lt=me.style.map.terrain,et=Me==="map",rt=Te==="map";for(let st of ge){let Mt=xe.getTile(st),Et=Mt.getBucket(_e);if(!Et||!Et.text||!Et.text.segments.get().length)continue;let _t=s.ak(Et.textSizeData,We.zoom),qt=s.az(Mt,1,me.transform.zoom),xi=Ae(et,me.transform,qt),qi=_e.layout.get("icon-text-fit")!=="none"&&Et.hasIconData();if(_t){let Pr=Math.pow(2,We.zoom-Mt.tileID.overscaledZ),gr=lt?(Dr,Rr)=>lt.getElevation(st,Dr,Rr):null;ht(Et,et,rt,De,We,xi,Pr,_t,qi,s.aA(We,Mt,ke,Fe),st.toUnwrapped(),gr)}}}(P,v,T,C,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),O),T.paint.get("icon-opacity").constantOr(1)!==0&&ri(v,C,T,P,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),X,J,N),T.paint.get("text-opacity").constantOr(1)!==0&&ri(v,C,T,P,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),X,J,N),C.map.showCollisionBoxes&&(z(v,C,T,P,!0),z(v,C,T,P,!1))}(i,l,h,p,this.style.placement.variableOffsets,g):s.c4(h)?function(v,C,T,P,O){if(v.renderPass!=="translucent")return;let{isRenderingToTexture:F}=O,N=T.paint.get("circle-opacity"),X=T.paint.get("circle-stroke-width"),J=T.paint.get("circle-stroke-opacity"),ge=!T.layout.get("circle-sort-key").isConstant();if(N.constantOr(1)===0&&(X.constantOr(1)===0||J.constantOr(1)===0))return;let me=v.context,_e=me.gl,xe=v.transform,Me=v.getDepthModeForSublayer(0,ui.ReadOnly),Te=Yt.disabled,ke=v.colorModeForRenderPass(),Fe=[],De=xe.getCircleRadiusCorrection();for(let We=0;We<P.length;We++){let lt=P[We],et=C.getTile(lt),rt=et.getBucket(T);if(!rt)continue;let st=T.paint.get("circle-translate"),Mt=T.paint.get("circle-translate-anchor"),Et=s.aA(xe,et,st,Mt),_t=rt.programConfigurations.get(T.id),qt=v.useProgram("circle",_t),xi=rt.layoutVertexBuffer,qi=rt.indexBuffer,Pr=v.style.map.terrain&&v.style.map.terrain.getTerrainData(lt),gr={programConfiguration:_t,program:qt,layoutVertexBuffer:xi,indexBuffer:qi,uniformValues:Qs(v,et,T,Et,De),terrainData:Pr,projectionData:xe.getProjectionData({overscaledTileID:lt,applyGlobeMatrix:!F,applyTerrainMatrix:!0})};if(ge){let Dr=rt.segments.get();for(let Rr of Dr)Fe.push({segments:new s.aJ([Rr]),sortKey:Rr.sortKey,state:gr})}else Fe.push({segments:rt.segments,sortKey:0,state:gr})}ge&&Fe.sort((We,lt)=>We.sortKey-lt.sortKey);for(let We of Fe){let{programConfiguration:lt,program:et,layoutVertexBuffer:rt,indexBuffer:st,uniformValues:Mt,terrainData:Et,projectionData:_t}=We.state;et.draw(me,_e.TRIANGLES,Me,Te,ke,Si.backCCW,Mt,Et,_t,T.id,rt,st,We.segments,T.paint,v.transform.zoom,lt)}}(i,l,h,p,g):s.c5(h)?function(v,C,T,P,O){if(T.paint.get("heatmap-opacity")===0)return;let F=v.context,{isRenderingToTexture:N,isRenderingGlobe:X}=O;if(v.style.map.terrain){for(let J of P){let ge=C.getTile(J);C.hasRenderableParent(J)||(v.renderPass==="offscreen"?mr(v,ge,T,J,X):v.renderPass==="translucent"&&Zr(v,T,J,N,X))}F.viewport.set([0,0,v.width,v.height])}else v.renderPass==="offscreen"?function(J,ge,me,_e){let xe=J.context,Me=xe.gl,Te=J.transform,ke=Yt.disabled,Fe=new Yi([Me.ONE,Me.ONE],s.b7.transparent,[!0,!0,!0,!0]);(function(De,We,lt){let et=De.gl;De.activeTexture.set(et.TEXTURE1),De.viewport.set([0,0,We.width/4,We.height/4]);let rt=lt.heatmapFbos.get(s.bW);rt?(et.bindTexture(et.TEXTURE_2D,rt.colorAttachment.get()),De.bindFramebuffer.set(rt.framebuffer)):(rt=zn(De,We.width/4,We.height/4),lt.heatmapFbos.set(s.bW,rt))})(xe,J,me),xe.clear({color:s.b7.transparent});for(let De=0;De<_e.length;De++){let We=_e[De];if(ge.hasRenderableParent(We))continue;let lt=ge.getTile(We),et=lt.getBucket(me);if(!et)continue;let rt=et.programConfigurations.get(me.id),st=J.useProgram("heatmap",rt),Mt=Te.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Et=Te.getCircleRadiusCorrection();st.draw(xe,Me.TRIANGLES,ui.disabled,ke,Fe,Si.backCCW,Js(lt,Te.zoom,me.paint.get("heatmap-intensity"),Et),null,Mt,me.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,me.paint,Te.zoom,rt)}xe.viewport.set([0,0,J.width,J.height])}(v,C,T,P):v.renderPass==="translucent"&&function(J,ge){let me=J.context,_e=me.gl;me.setColorMode(J.colorModeForRenderPass());let xe=ge.heatmapFbos.get(s.bW);xe&&(me.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,xe.colorAttachment.get()),me.activeTexture.set(_e.TEXTURE1),ao(me,ge).bind(_e.LINEAR,_e.CLAMP_TO_EDGE),J.useProgram("heatmapTexture").draw(me,_e.TRIANGLES,ui.disabled,Yt.disabled,J.colorModeForRenderPass(),Si.disabled,Td(J,ge,0,1),null,null,ge.id,J.viewportBuffer,J.quadTriangleIndexBuffer,J.viewportSegments,ge.paint,J.transform.zoom))}(v,T)}(i,l,h,p,g):s.c6(h)?function(v,C,T,P,O){if(v.renderPass!=="translucent")return;let{isRenderingToTexture:F}=O,N=T.paint.get("line-opacity"),X=T.paint.get("line-width");if(N.constantOr(1)===0||X.constantOr(1)===0)return;let J=v.getDepthModeForSublayer(0,ui.ReadOnly),ge=v.colorModeForRenderPass(),me=T.paint.get("line-dasharray"),_e=T.paint.get("line-pattern"),xe=_e.constantOr(1),Me=T.paint.get("line-gradient"),Te=T.getCrossfadeParameters(),ke=xe?"linePattern":me?"lineSDF":Me?"lineGradient":"line",Fe=v.context,De=Fe.gl,We=v.transform,lt=!0;for(let et of P){let rt=C.getTile(et);if(xe&&!rt.patternsLoaded())continue;let st=rt.getBucket(T);if(!st)continue;let Mt=st.programConfigurations.get(T.id),Et=v.context.program.get(),_t=v.useProgram(ke,Mt),qt=lt||_t.program!==Et,xi=v.style.map.terrain&&v.style.map.terrain.getTerrainData(et),qi=_e.constantOr(null);if(qi&&rt.imageAtlas){let yr=rt.imageAtlas,Qi=yr.patternPositions[qi.to.toString()],cn=yr.patternPositions[qi.from.toString()];Qi&&cn&&Mt.setConstantPatternPositions(Qi,cn)}let Pr=We.getProjectionData({overscaledTileID:et,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),gr=We.getPixelScale(),Dr=xe?kd(v,rt,T,gr,Te):me?fc(v,rt,T,gr,me,Te):Me?Ad(v,rt,T,gr,st.lineClipsArray.length):Ol(v,rt,T,gr);if(xe)Fe.activeTexture.set(De.TEXTURE0),rt.imageAtlasTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE),Mt.updatePaintBuffers(Te);else if(me&&(qt||v.lineAtlas.dirty))Fe.activeTexture.set(De.TEXTURE0),v.lineAtlas.bind(Fe);else if(Me){let yr=st.gradients[T.id],Qi=yr.texture;if(T.gradientVersion!==yr.version){let cn=256;if(T.stepInterpolant){let Cn=C.getSource().maxzoom,Bn=et.canonical.z===Cn?Math.ceil(1<<v.transform.maxZoom-et.canonical.z):1;cn=s.ae(s.bX(st.maxLineLength/s.Z*1024*Bn),256,Fe.maxTextureSize)}yr.gradient=s.bY({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:cn,image:yr.gradient||void 0,clips:st.lineClipsArray}),yr.texture?yr.texture.update(yr.gradient):yr.texture=new Ve(Fe,yr.gradient,De.RGBA),yr.version=T.gradientVersion,Qi=yr.texture}Fe.activeTexture.set(De.TEXTURE0),Qi.bind(T.stepInterpolant?De.NEAREST:De.LINEAR,De.CLAMP_TO_EDGE)}let Rr=v.stencilModeForClipping(et);_t.draw(Fe,De.TRIANGLES,J,Rr,ge,Si.disabled,Dr,xi,Pr,T.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,T.paint,v.transform.zoom,Mt,st.layoutVertexBuffer2),lt=!1}}(i,l,h,p,g):s.c7(h)?function(v,C,T,P,O){let F=T.paint.get("fill-color"),N=T.paint.get("fill-opacity");if(N.constantOr(1)===0)return;let{isRenderingToTexture:X}=O,J=v.colorModeForRenderPass(),ge=T.paint.get("fill-pattern"),me=v.opaquePassEnabledForLayer()&&!ge.constantOr(1)&&F.constantOr(s.b7.transparent).a===1&&N.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===me){let _e=v.getDepthModeForSublayer(1,v.renderPass==="opaque"?ui.ReadWrite:ui.ReadOnly);So(v,C,T,P,_e,J,!1,X)}if(v.renderPass==="translucent"&&T.paint.get("fill-antialias")){let _e=v.getDepthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,ui.ReadOnly);So(v,C,T,P,_e,J,!0,X)}}(i,l,h,p,g):s.c8(h)?function(v,C,T,P,O){let F=T.paint.get("fill-extrusion-opacity");if(F===0)return;let{isRenderingToTexture:N}=O;if(v.renderPass==="translucent"){let X=new ui(v.context.gl.LEQUAL,ui.ReadWrite,v.depthRangeFor3D);if(F!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))bs(v,C,T,P,X,Yt.disabled,Yi.disabled,N),bs(v,C,T,P,X,v.stencilModeFor3D(),v.colorModeForRenderPass(),N);else{let J=v.colorModeForRenderPass();bs(v,C,T,P,X,Yt.disabled,J,N)}}}(i,l,h,p,g):s.c9(h)?function(v,C,T,P,O){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;let{isRenderingToTexture:F}=O,N=v.context,X=v.style.projection.useSubdivision,J=v.getDepthModeForSublayer(0,ui.ReadOnly),ge=v.colorModeForRenderPass();if(v.renderPass==="offscreen")(function(me,_e,xe,Me,Te,ke,Fe){let De=me.context,We=De.gl;for(let lt of xe){let et=_e.getTile(lt),rt=et.dem;if(!rt||!rt.data||!et.needsHillshadePrepare)continue;let st=rt.dim,Mt=rt.stride,Et=rt.getPixels();if(De.activeTexture.set(We.TEXTURE1),De.pixelStoreUnpackPremultiplyAlpha.set(!1),et.demTexture=et.demTexture||me.getTileTexture(Mt),et.demTexture){let qt=et.demTexture;qt.update(Et,{premultiply:!1}),qt.bind(We.NEAREST,We.CLAMP_TO_EDGE)}else et.demTexture=new Ve(De,Et,We.RGBA,{premultiply:!1}),et.demTexture.bind(We.NEAREST,We.CLAMP_TO_EDGE);De.activeTexture.set(We.TEXTURE0);let _t=et.fbo;if(!_t){let qt=new Ve(De,{width:st,height:st,data:null},We.RGBA);qt.bind(We.LINEAR,We.CLAMP_TO_EDGE),_t=et.fbo=De.createFramebuffer(st,st,!0,!1),_t.colorAttachment.set(qt.texture)}De.bindFramebuffer.set(_t.framebuffer),De.viewport.set([0,0,st,st]),me.useProgram("hillshadePrepare").draw(De,We.TRIANGLES,Te,ke,Fe,Si.disabled,Aa(et.tileID,rt),null,null,Me.id,me.rasterBoundsBuffer,me.quadTriangleIndexBuffer,me.rasterBoundsSegments),et.needsHillshadePrepare=!1}})(v,C,P,T,J,Yt.disabled,ge),N.viewport.set([0,0,v.width,v.height]);else if(v.renderPass==="translucent")if(X){let[me,_e,xe]=v.stencilConfigForOverlapTwoPass(P);Su(v,C,T,xe,me,J,ge,!1,F),Su(v,C,T,xe,_e,J,ge,!0,F)}else{let[me,_e]=v.getStencilConfigForOverlapAndUpdateStencilID(P);Su(v,C,T,_e,me,J,ge,!1,F)}}(i,l,h,p,g):s.ca(h)?function(v,C,T,P,O){if(v.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!P.length)return;let{isRenderingToTexture:F}=O,N=C.getSource(),X=v.style.projection.useSubdivision;if(N instanceof qn)zd(v,C,T,P,null,!1,!1,N.tileCoords,N.flippedWindingOrder,F);else if(X){let[J,ge,me]=v.stencilConfigForOverlapTwoPass(P);zd(v,C,T,me,J,!1,!0,Tu,!1,F),zd(v,C,T,me,ge,!0,!0,Tu,!1,F)}else{let[J,ge]=v.getStencilConfigForOverlapAndUpdateStencilID(P);zd(v,C,T,ge,J,!1,!0,Tu,!1,F)}}(i,l,h,p,g):s.cb(h)?function(v,C,T,P,O){let F=T.paint.get("background-color"),N=T.paint.get("background-opacity");if(N===0)return;let{isRenderingToTexture:X}=O,J=v.context,ge=J.gl,me=v.style.projection,_e=v.transform,xe=_e.tileSize,Me=T.paint.get("background-pattern");if(v.isPatternMissing(Me))return;let Te=!Me&&F.a===1&&N===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==Te)return;let ke=Yt.disabled,Fe=v.getDepthModeForSublayer(0,Te==="opaque"?ui.ReadWrite:ui.ReadOnly),De=v.colorModeForRenderPass(),We=v.useProgram(Me?"backgroundPattern":"background"),lt=P||ze(_e,{tileSize:xe,terrain:v.style.map.terrain});Me&&(J.activeTexture.set(ge.TEXTURE0),v.imageManager.bind(v.context));let et=T.getCrossfadeParameters();for(let rt of lt){let st=_e.getProjectionData({overscaledTileID:rt,applyGlobeMatrix:!X,applyTerrainMatrix:!0}),Mt=Me?Dd(N,v,Me,{tileID:rt,tileSize:xe},et):hp(N,F),Et=v.style.map.terrain&&v.style.map.terrain.getTerrainData(rt),_t=me.getMeshFromTileID(J,rt.canonical,!1,!0,"raster");We.draw(J,ge.TRIANGLES,Fe,ke,De,Si.backCCW,Mt,Et,st,T.id,_t.vertexBuffer,_t.indexBuffer,_t.segments)}}(i,0,h,p,g):s.cc(h)&&function(v,C,T,P){let{isRenderingGlobe:O}=P,F=v.context,N=T.implementation,X=v.style.projection,J=v.transform,ge=J.getProjectionDataForCustomLayer(O),me={farZ:J.farZ,nearZ:J.nearZ,fov:J.fov*Math.PI/180,modelViewProjectionMatrix:J.modelViewProjectionMatrix,projectionMatrix:J.projectionMatrix,shaderData:{variantName:X.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${X.shaderPreludeCode.vertexSource}`,define:X.shaderDefine},defaultProjectionData:ge},_e=N.renderingMode?N.renderingMode:"2d";if(v.renderPass==="offscreen"){let xe=N.prerender;xe&&(v.setCustomLayerDefaults(),F.setColorMode(v.colorModeForRenderPass()),xe.call(N,F.gl,me),F.setDirty(),v.setBaseState())}else if(v.renderPass==="translucent"){v.setCustomLayerDefaults(),F.setColorMode(v.colorModeForRenderPass()),F.setStencilMode(Yt.disabled);let xe=_e==="3d"?v.getDepthModeFor3D():v.getDepthModeForSublayer(0,ui.ReadOnly);F.setDepthMode(xe),N.render(F.gl,me),F.setDirty(),v.setBaseState(),F.bindFramebuffer.set(null)}}(i,0,h,g))}saveTileTexture(i){let l=this._tileTextures[i.size[0]];l?l.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){let l=this._tileTextures[i];return l&&l.length>0?l.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;let l=this.imageManager.getPattern(i.from.toString()),h=this.imageManager.getPattern(i.to.toString());return!l||!h}useProgram(i,l,h=!1,p=[]){this.cache=this.cache||{};let g=!!this.style.map.terrain,v=this.style.projection,C=h?pr.projectionMercator:v.shaderPreludeCode,T=h?Ca:v.shaderDefine,P=i+(l?l.cacheKey:"")+`/${h?fi:v.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(g?"/terrain":"")+(p?`/${p.join("/")}`:"");return this.cache[P]||(this.cache[P]=new pc(this.context,pr[i],l,wu[i],this._showOverdrawInspector,g,C,T,p)),this.cache[P]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ve(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:i,drawingBufferHeight:l}=this.context.gl;return this.width!==i||this.height!==l}}function Iu(m,i){let l,h=!1,p=null,g=null,v=()=>{p=null,h&&(m.apply(g,l),p=setTimeout(v,i),h=!1)};return(...C)=>(h=!0,g=this,l=C,p||v(),p)}class yp{constructor(i){this._getCurrentHash=()=>{let l=window.location.hash.replace("#","");if(this._hashName){let h;return l.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(h=p)}),(h&&h[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{let l=this._getCurrentHash();if(!this._isValidHash(l))return!1;let h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:h,pitch:+(l[4]||0)}),!0},this._updateHashUnthrottled=()=>{let l=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,l)},this._removeHash=()=>{let l=this._getCurrentHash();if(l.length===0)return;let h=l.join("/"),p=h;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${h}`);let g=window.location.hash.replace(p,"");g.startsWith("#&")?g=g.slice(0,1)+g.slice(2):g==="#"&&(g="");let v=window.location.href.replace(/(#.+)?$/,g);v=v.replace("&&","&"),window.history.replaceState(window.history.state,null,v)},this._updateHash=Iu(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){let l=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,p=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,p),v=Math.round(l.lng*g)/g,C=Math.round(l.lat*g)/g,T=this._map.getBearing(),P=this._map.getPitch(),O="";if(O+=i?`/${v}/${C}/${h}`:`${h}/${C}/${v}`,(T||P)&&(O+="/"+Math.round(10*T)/10),P&&(O+=`/${Math.round(P)}`),this._hashName){let F=this._hashName,N=!1,X=window.location.hash.slice(1).split("&").map(J=>{let ge=J.split("=")[0];return ge===F?(N=!0,`${ge}=${O}`):J}).filter(J=>J);return N||X.push(`${F}=${O}`),`#${X.join("&")}`}return`#${O}`}_isValidHash(i){if(i.length<3||i.some(isNaN))return!1;try{new s.Q(+i[2],+i[1])}catch{return!1}let l=+i[0],h=+(i[3]||0),p=+(i[4]||0);return l>=this._map.getMinZoom()&&l<=this._map.getMaxZoom()&&h>=-180&&h<=180&&p>=this._map.getMinPitch()&&p<=this._map.getMaxPitch()}}let sa={linearity:.3,easing:s.cd(0,0,.3,1)},vp=s.e({deceleration:2500,maxSpeed:1400},sa),Au=s.e({deceleration:20,maxSpeed:1400},sa),xp=s.e({deceleration:1e3,maxSpeed:360},sa),Bm=s.e({deceleration:1e3,maxSpeed:90},sa),Vm=s.e({deceleration:1e3,maxSpeed:360},sa);class Um{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:I.now(),settings:i})}_drainInertiaBuffer(){let i=this._inertiaBuffer,l=I.now();for(;i.length>0&&l-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let l={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:g}of this._inertiaBuffer)l.zoom+=g.zoomDelta||0,l.bearing+=g.bearingDelta||0,l.pitch+=g.pitchDelta||0,l.roll+=g.rollDelta||0,g.panDelta&&l.pan._add(g.panDelta),g.around&&(l.around=g.around),g.pinchAround&&(l.pinchAround=g.pinchAround);let h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(l.pan.mag()){let g=Sc(l.pan.mag(),h,s.e({},vp,i||{})),v=l.pan.mult(g.amount/l.pan.mag()),C=this._map.cameraHelper.handlePanInertia(v,this._map.transform);p.center=C.easingCenter,p.offset=C.easingOffset,Ec(p,g)}if(l.zoom){let g=Sc(l.zoom,h,Au);p.zoom=this._map.transform.zoom+g.amount,Ec(p,g)}if(l.bearing){let g=Sc(l.bearing,h,xp);p.bearing=this._map.transform.bearing+s.ae(g.amount,-179,179),Ec(p,g)}if(l.pitch){let g=Sc(l.pitch,h,Bm);p.pitch=this._map.transform.pitch+g.amount,Ec(p,g)}if(l.roll){let g=Sc(l.roll,h,Vm);p.roll=this._map.transform.roll+s.ae(g.amount,-179,179),Ec(p,g)}if(p.zoom||p.bearing){let g=l.pinchAround===void 0?l.around:l.pinchAround;p.around=g?this._map.unproject(g):this._map.getCenter()}return this.clear(),s.e(p,{noMoveStart:!0})}}function Ec(m,i){(!m.duration||m.duration<i.duration)&&(m.duration=i.duration,m.easing=i.easing)}function Sc(m,i,l){let{maxSpeed:h,linearity:p,deceleration:g}=l,v=s.ae(m*p/(i/1e3),-h,h),C=Math.abs(v)/(g*p);return{easing:l.easing,duration:1e3*C,amount:v*(C/2)}}class ln extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,h,p={}){h=h instanceof MouseEvent?h:new MouseEvent(i,h);let g=A.mousePos(l.getCanvas(),h),v=l.unproject(g);super(i,s.e({point:g,lngLat:v,originalEvent:h},p)),this._defaultPrevented=!1,this.target=l}}class Tc extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,h){let p=i==="touchend"?h.changedTouches:h.touches,g=A.touchPos(l.getCanvasContainer(),p),v=g.map(T=>l.unproject(T)),C=g.reduce((T,P,O,F)=>T.add(P.div(F.length)),new s.P(0,0));super(i,{points:g,point:C,lngLats:v,lngLat:l.unproject(C),originalEvent:h}),this._defaultPrevented=!1}}class wp extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,h){super(i,{originalEvent:h}),this._defaultPrevented=!1}}class jm{constructor(i,l){this._map=i,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new wp(i.type,this._map,i))}mousedown(i,l){return this._mousedownPos=l,this._firePreventable(new ln(i.type,this._map,i))}mouseup(i){this._map.fire(new ln(i.type,this._map,i))}click(i,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new ln(i.type,this._map,i))}dblclick(i){return this._firePreventable(new ln(i.type,this._map,i))}mouseover(i){this._map.fire(new ln(i.type,this._map,i))}mouseout(i){this._map.fire(new ln(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Tc(i.type,this._map,i))}touchmove(i){this._map.fire(new Tc(i.type,this._map,i))}touchend(i){this._map.fire(new Tc(i.type,this._map,i))}touchcancel(i){this._map.fire(new Tc(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qm{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new ln(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ln("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new ln(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Mc{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.screenPointToLocation(s.P.convert(i),this._map.terrain)}}class Cp{constructor(i,l){this._map=i,this._tr=new Mc(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,l){this.isEnabled()&&i.shiftKey&&i.button===0&&(A.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(i,l){if(!this._active)return;let h=l;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;let p=this._startPos;this._lastPos=h,this._box||(this._box=A.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));let g=Math.min(p.x,h.x),v=Math.max(p.x,h.x),C=Math.min(p.y,h.y),T=Math.max(p.y,h.y);A.setTransform(this._box,`translate(${g}px,${C}px)`),this._box.style.width=v-g+"px",this._box.style.height=T-C+"px"}mouseupWindow(i,l){if(!this._active||i.button!==0)return;let h=this._startPos,p=l;if(this.reset(),A.suppressClick(),h.x!==p.x||h.y!==p.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:i})),{cameraAnimation:g=>g.fitScreenCoordinates(h,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,l){return this._map.fire(new s.l(i,{originalEvent:l}))}}function jd(m,i){if(m.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${m.length}, points ${i.length}`);let l={};for(let h=0;h<m.length;h++)l[m[h].identifier]=i[h];return l}class Hm{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,l,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),h.length===this.numTouches&&(this.centroid=function(p){let g=new s.P(0,0);for(let v of p)g._add(v);return g.div(p.length)}(l),this.touches=jd(h,l)))}touchmove(i,l,h){if(this.aborted||!this.centroid)return;let p=jd(h,l);for(let g in this.touches){let v=p[g];(!v||v.dist(this.touches[g])>30)&&(this.aborted=!0)}}touchend(i,l,h){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){let p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Ic{constructor(i){this.singleTap=new Hm(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,l,h){this.singleTap.touchstart(i,l,h)}touchmove(i,l,h){this.singleTap.touchmove(i,l,h)}touchend(i,l,h){let p=this.singleTap.touchend(i,l,h);if(p){let g=i.timeStamp-this.lastTime<500,v=!this.lastTap||this.lastTap.dist(p)<30;if(g&&v||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class $m{constructor(i){this._tr=new Mc(i),this._zoomIn=new Ic({numTouches:1,numTaps:2}),this._zoomOut=new Ic({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,l,h){this._zoomIn.touchstart(i,l,h),this._zoomOut.touchstart(i,l,h)}touchmove(i,l,h){this._zoomIn.touchmove(i,l,h),this._zoomOut.touchmove(i,l,h)}touchend(i,l,h){let p=this._zoomIn.touchend(i,l,h),g=this._zoomOut.touchend(i,l,h),v=this._tr;return p?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:v.zoom+1,around:v.unproject(p)},{originalEvent:i})}):g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:v.zoom-1,around:v.unproject(g)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gn{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){let l=this._moveFunction(...i);if(l.bearingDelta||l.pitchDelta||l.rollDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(i,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=Array.isArray(l)?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,l){if(!this.isEnabled())return;let h=this._lastPoint;if(!h)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);let p=Array.isArray(l)?l[0]:l;return!this._moved&&p.dist(h)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(h,p))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&A.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let ys={0:1,2:2};class Ac{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){let l=A.mouseButton(i);this._eventButton=l}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(l,h){let p=ys[h];return l.buttons===void 0||(l.buttons&p)!==p}(i,this._eventButton)}isValidEndEvent(i){return A.mouseButton(i)===this._eventButton}}class vs{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}class kc{constructor(i=new Ac({checkCorrectEvent:()=>!0}),l=new vs){this.mouseMoveStateManager=i,this.oneFingerTouchMoveStateManager=l}_executeRelevantHandler(i,l,h){return i instanceof MouseEvent?l(i):typeof TouchEvent<"u"&&i instanceof TouchEvent?h(i):void 0}startMove(i){this._executeRelevantHandler(i,l=>this.mouseMoveStateManager.startMove(l),l=>this.oneFingerTouchMoveStateManager.startMove(l))}endMove(i){this._executeRelevantHandler(i,l=>this.mouseMoveStateManager.endMove(l),l=>this.oneFingerTouchMoveStateManager.endMove(l))}isValidStartEvent(i){return this._executeRelevantHandler(i,l=>this.mouseMoveStateManager.isValidStartEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidStartEvent(l))}isValidMoveEvent(i){return this._executeRelevantHandler(i,l=>this.mouseMoveStateManager.isValidMoveEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(l))}isValidEndEvent(i){return this._executeRelevantHandler(i,l=>this.mouseMoveStateManager.isValidEndEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidEndEvent(l))}}let qd=m=>{m.mousedown=m.dragStart,m.mousemoveWindow=m.dragMove,m.mouseup=m.dragEnd,m.contextmenu=i=>{i.preventDefault()}};class Cb{constructor(i,l){this._clickTolerance=i.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,l,h){return this._calculateTransform(i,l,h)}touchmove(i,l,h){if(this._active){if(!this._shouldBePrevented(h.length))return i.preventDefault(),this._calculateTransform(i,l,h);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,l,h){this._calculateTransform(i,l,h),this._active&&this._shouldBePrevented(h.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,l,h){h.length>0&&(this._active=!0);let p=jd(h,l),g=new s.P(0,0),v=new s.P(0,0),C=0;for(let P in p){let O=p[P],F=this._touches[P];F&&(g._add(O),v._add(O.sub(F)),C++,p[P]=O)}if(this._touches=p,this._shouldBePrevented(C)||!v.mag())return;let T=v.div(C);return this._sum._add(T),this._sum.mag()<this._clickTolerance?void 0:{around:g.div(C),panDelta:T}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ep{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,l,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([l[0],l[1]]))}touchmove(i,l,h){if(!this._firstTwoTouches)return;i.preventDefault();let[p,g]=this._firstTwoTouches,v=Hd(h,l,p),C=Hd(h,l,g);if(!v||!C)return;let T=this._aroundCenter?null:v.add(C).div(2);return this._move([v,C],T,i)}touchend(i,l,h){if(!this._firstTwoTouches)return;let[p,g]=this._firstTwoTouches,v=Hd(h,l,p),C=Hd(h,l,g);v&&C||(this._active&&A.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Hd(m,i,l){for(let h=0;h<m.length;h++)if(m[h].identifier===l)return i[h]}function Sp(m,i){return Math.log(m/i)/Math.LN2}class Pc extends Ep{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,l){let h=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Sp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sp(this._distance,h),pinchAround:l}}}function aa(m,i){return 180*m.angleWith(i)/Math.PI}class Dt extends Ep{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,l,h){let p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:aa(this._vector,p),pinchAround:l}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());let l=25/(Math.PI*this._minDiameter)*360,h=aa(i,this._startVector);return Math.abs(h)<l}}function $d(m){return Math.abs(m.y)>Math.abs(m.x)}class Gd extends Ep{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,l,h){super.touchstart(i,l,h),this._currentTouchCount=h.length}_start(i){this._lastPoints=i,$d(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,l,h){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let p=i[0].sub(this._lastPoints[0]),g=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,g,h.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(p.y+g.y)/2*-.5}):void 0}gestureBeginsVertically(i,l,h){if(this._valid!==void 0)return this._valid;let p=i.mag()>=2,g=l.mag()>=2;if(!p&&!g)return;if(!p||!g)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;let v=i.y>0==l.y>0;return $d(i)&&$d(l)&&v}}let Gm={panStep:100,bearingStep:15,pitchStep:10};class Dc{constructor(i){this._tr=new Mc(i);let l=Gm;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let l=0,h=0,p=0,g=0,v=0;switch(i.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:i.shiftKey?h=-1:(i.preventDefault(),g=-1);break;case 39:i.shiftKey?h=1:(i.preventDefault(),g=1);break;case 38:i.shiftKey?p=1:(i.preventDefault(),v=-1);break;case 40:i.shiftKey?p=-1:(i.preventDefault(),v=1);break;default:return}return this._rotationDisabled&&(h=0,p=0),{cameraAnimation:C=>{let T=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:ku,zoom:l?Math.round(T.zoom)+l*(i.shiftKey?2:1):T.zoom,bearing:T.bearing+h*this._bearingStep,pitch:T.pitch+p*this._pitchStep,offset:[-g*this._panStep,-v*this._panStep],center:T.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ku(m){return m*(2-m)}let Tp=4.000244140625;class Fi{constructor(i,l){this._onTimeout=h=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)},this._map=i,this._tr=new Mc(i),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let l=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY,h=I.now(),p=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,l!==0&&l%Tp==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(p*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),i.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=i,this._delta-=l,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let l=A.mousePos(this._map.getCanvas(),i),h=this._tr;this._aroundPoint=this._aroundCenter?h.transform.locationToScreenPoint(s.Q.convert(h.center)):l,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let i=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let C=i.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=C),typeof this._targetZoom=="number"&&(this._targetZoom+=C)}if(this._delta!==0){let C=this._type==="wheel"&&Math.abs(this._delta)>Tp?this._wheelZoomRate:this._defaultZoomRate,T=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&T!==0&&(T=1/T);let P=typeof this._targetZoom!="number"?i.scale:s.ac(this._targetZoom);this._targetZoom=i.getConstrained(i.getCameraLngLat(),s.ah(P*T)).zoom,this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let l=typeof this._targetZoom!="number"?i.zoom:this._targetZoom,h=this._startZoom,p=this._easing,g,v=!1;if(this._type==="wheel"&&h&&p){let C=I.now()-this._lastWheelEventTime,T=Math.min((C+5)/200,1),P=p(T);g=s.B.number(h,l,P),T<1?this._frameId||(this._frameId=!0):v=!0}else g=l,v=!0;return this._active=!0,v&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=g,{noInertia:!0,needsRenderFrame:!v,zoomDelta:g-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let l=s.cf;if(this._prevEase){let h=this._prevEase,p=(I.now()-h.start)/h.duration,g=h.easing(p+.01)-h.easing(p),v=.27/Math.sqrt(g*g+1e-4)*.01,C=Math.sqrt(.0729-v*v);l=s.cd(v,C,.25,1)}return this._prevEase={start:I.now(),duration:i,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Wd{constructor(i,l){this._clickZoom=i,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Eb{constructor(i){this._tr=new Mc(i),this.reset()}reset(){this._active=!1}dblclick(i,l){return i.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mp{constructor(){this._tap=new Ic({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,l,h){if(!this._swipePoint)if(this._tapTime){let p=l[0],g=i.timeStamp-this._tapTime<500,v=this._tapPoint.dist(p)<30;g&&v?h.length>0&&(this._swipePoint=p,this._swipeTouch=h[0].identifier):this.reset()}else this._tap.touchstart(i,l,h)}touchmove(i,l,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;let p=l[0],g=p.y-this._swipePoint.y;return this._swipePoint=p,i.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(i,l,h)}touchend(i,l,h){if(this._tapTime)this._swipePoint&&h.length===0&&this.reset();else{let p=this._tap.touchend(i,l,h);p&&(this._tapTime=i.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wm{constructor(i,l,h){this._el=i,this._mousePan=l,this._touchPan=h}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Zm{constructor(i,l,h,p){this._pitchWithRotate=i.pitchWithRotate,this._rollEnabled=i.rollEnabled,this._mouseRotate=l,this._mousePitch=h,this._mouseRoll=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Ip{constructor(i,l,h,p){this._el=i,this._touchZoom=l,this._touchRotate=h,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Zd{constructor(i,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=A.create("div","maplibregl-cooperative-gesture-screen",i);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let h=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=l,this._container.appendChild(p);let g=document.createElement("div");g.className="maplibregl-mobile-message",g.textContent=h,this._container.appendChild(g),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(A.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,l){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:i,originalEvent:l})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let Pu=m=>m.zoom||m.drag||m.roll||m.pitch||m.rotate;class Sb extends s.l{}function Xd(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta||m.rollDelta}class Tb{constructor(i,l){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,g)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let v=p.type==="renderFrame"?void 0:p,C={needsRenderFrame:!1},T={},P={};for(let{handlerName:N,handler:X,allowed:J}of this._handlers){if(!X.isEnabled())continue;let ge;if(this._blockedByActive(P,J,N))X.reset();else if(X[g||p.type]){if(s.cg(p,g||p.type)){let me=A.mousePos(this._map.getCanvas(),p);ge=X[g||p.type](p,me)}else if(s.ch(p,g||p.type)){let me=this._getMapTouches(p.touches),_e=A.touchPos(this._map.getCanvas(),me);ge=X[g||p.type](p,_e,me)}else s.ci(g||p.type)||(ge=X[g||p.type](p));this.mergeHandlerResult(C,T,ge,N,v),ge&&ge.needsRenderFrame&&this._triggerRenderFrame()}(ge||X.isActive())&&(P[N]=X)}let O={};for(let N in this._previousActiveHandlers)P[N]||(O[N]=v);this._previousActiveHandlers=P,(Object.keys(O).length||Xd(C))&&(this._changes.push([C,T,O]),this._triggerRenderFrame()),(Object.keys(P).length||Xd(C))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:F}=C;F&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],F(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Um(i),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);let h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(let[p,g,v]of this._listeners)A.addEventListener(p,g,p===document?this.handleWindowEvent:this.handleEvent,v)}destroy(){for(let[i,l,h]of this._listeners)A.removeEventListener(i,l,i===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(i){let l=this._map,h=l.getCanvasContainer();this._add("mapEvent",new jm(l,i));let p=l.boxZoom=new Cp(l,i);this._add("boxZoom",p),i.interactive&&i.boxZoom&&p.enable();let g=l.cooperativeGestures=new Zd(l,i.cooperativeGestures);this._add("cooperativeGestures",g),i.cooperativeGestures&&g.enable();let v=new $m(l),C=new Eb(l);l.doubleClickZoom=new Wd(C,v),this._add("tapZoom",v),this._add("clickZoom",C),i.interactive&&i.doubleClickZoom&&l.doubleClickZoom.enable();let T=new Mp;this._add("tapDragZoom",T);let P=l.touchPitch=new Gd(l);this._add("touchPitch",P),i.interactive&&i.touchPitch&&l.touchPitch.enable(i.touchPitch);let O=()=>l.project(l.getCenter()),F=function({enable:Te,clickTolerance:ke,aroundCenter:Fe=!0,minPixelCenterThreshold:De=100,rotateDegreesPerPixelMoved:We=.8},lt){let et=new Ac({checkCorrectEvent:rt=>A.mouseButton(rt)===0&&rt.ctrlKey||A.mouseButton(rt)===2&&!rt.ctrlKey});return new Gn({clickTolerance:ke,move:(rt,st)=>{let Mt=lt();if(Fe&&Math.abs(Mt.y-rt.y)>De)return{bearingDelta:s.ce(new s.P(rt.x,st.y),st,Mt)};let Et=(st.x-rt.x)*We;return Fe&&st.y<Mt.y&&(Et=-Et),{bearingDelta:Et}},moveStateManager:et,enable:Te,assignEvents:qd})}(i,O),N=function({enable:Te,clickTolerance:ke,pitchDegreesPerPixelMoved:Fe=-.5}){let De=new Ac({checkCorrectEvent:We=>A.mouseButton(We)===0&&We.ctrlKey||A.mouseButton(We)===2});return new Gn({clickTolerance:ke,move:(We,lt)=>({pitchDelta:(lt.y-We.y)*Fe}),moveStateManager:De,enable:Te,assignEvents:qd})}(i),X=function({enable:Te,clickTolerance:ke,rollDegreesPerPixelMoved:Fe=.3},De){let We=new Ac({checkCorrectEvent:lt=>A.mouseButton(lt)===2&&lt.ctrlKey});return new Gn({clickTolerance:ke,move:(lt,et)=>{let rt=De(),st=(et.x-lt.x)*Fe;return et.y<rt.y&&(st=-st),{rollDelta:st}},moveStateManager:We,enable:Te,assignEvents:qd})}(i,O);l.dragRotate=new Zm(i,F,N,X),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",N,["mouseRotate","mouseRoll"]),this._add("mouseRoll",X,["mousePitch"]),i.interactive&&i.dragRotate&&l.dragRotate.enable();let J=function({enable:Te,clickTolerance:ke}){let Fe=new Ac({checkCorrectEvent:De=>A.mouseButton(De)===0&&!De.ctrlKey});return new Gn({clickTolerance:ke,move:(De,We)=>({around:We,panDelta:We.sub(De)}),activateOnStart:!0,moveStateManager:Fe,enable:Te,assignEvents:qd})}(i),ge=new Cb(i,l);l.dragPan=new Wm(h,J,ge),this._add("mousePan",J),this._add("touchPan",ge,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&l.dragPan.enable(i.dragPan);let me=new Dt,_e=new Pc;l.touchZoomRotate=new Ip(h,_e,me,T),this._add("touchRotate",me,["touchPan","touchZoom"]),this._add("touchZoom",_e,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&l.touchZoomRotate.enable(i.touchZoomRotate);let xe=l.scrollZoom=new Fi(l,()=>this._triggerRenderFrame());this._add("scrollZoom",xe,["mousePan"]),i.interactive&&i.scrollZoom&&l.scrollZoom.enable(i.scrollZoom);let Me=l.keyboard=new Dc(l);this._add("keyboard",Me),i.interactive&&i.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new qm(l))}_add(i,l,h){this._handlers.push({handlerName:i,handler:l,allowed:h}),this._handlersById[i]=l}stop(i){if(!this._updatingCamera){for(let{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(let{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Pu(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,l,h){for(let p in i)if(p!==h&&(!l||l.indexOf(p)<0))return!0;return!1}_getMapTouches(i){let l=[];for(let h of i)this._el.contains(h.target)&&l.push(h);return l}mergeHandlerResult(i,l,h,p,g){if(!h)return;s.e(i,h);let v={handlerName:p,originalEvent:h.originalEvent||g};h.zoomDelta!==void 0&&(l.zoom=v),h.panDelta!==void 0&&(l.drag=v),h.rollDelta!==void 0&&(l.roll=v),h.pitchDelta!==void 0&&(l.pitch=v),h.bearingDelta!==void 0&&(l.rotate=v)}_applyChanges(){let i={},l={},h={};for(let[p,g,v]of this._changes)p.panDelta&&(i.panDelta=(i.panDelta||new s.P(0,0))._add(p.panDelta)),p.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+p.pitchDelta),p.rollDelta&&(i.rollDelta=(i.rollDelta||0)+p.rollDelta),p.around!==void 0&&(i.around=p.around),p.pinchAround!==void 0&&(i.pinchAround=p.pinchAround),p.noInertia&&(i.noInertia=p.noInertia),s.e(l,g),s.e(h,v);this._updateMapTransform(i,l,h),this._changes=[]}_updateMapTransform(i,l,h){let p=this._map,g=p._getTransformForUpdate(),v=p.terrain;if(!(Xd(i)||v&&this._terrainMovement))return this._fireEvents(l,h,!0);p._stop(!0);let{panDelta:C,zoomDelta:T,bearingDelta:P,pitchDelta:O,rollDelta:F,around:N,pinchAround:X}=i;X!==void 0&&(N=X),N=N||p.transform.centerPoint,v&&!g.isPointOnMapSurface(N)&&(N=g.centerPoint);let J={panDelta:C,zoomDelta:T,rollDelta:F,pitchDelta:O,bearingDelta:P,around:N};this._map.cameraHelper.useGlobeControls&&!g.isPointOnMapSurface(N)&&(N=g.centerPoint);let ge=N.distSqr(g.centerPoint)<.01?g.center:g.screenPointToLocation(C?N.sub(C):N);v?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(J,g),this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?g.setCenter(g.screenPointToLocation(g.centerPoint.sub(C))):this._map.cameraHelper.handleMapControlsPan(J,g,ge):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(J,g,ge))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(J,g),this._map.cameraHelper.handleMapControlsPan(J,g,ge)),p._applyUpdatedTransform(g),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(l,h,!0)}_fireEvents(i,l,h){let p=Pu(this._eventsInProgress),g=Pu(i),v={};for(let F in i){let{originalEvent:N}=i[F];this._eventsInProgress[F]||(v[`${F}start`]=N),this._eventsInProgress[F]=i[F]}!p&&g&&this._fireEvent("movestart",g.originalEvent);for(let F in v)this._fireEvent(F,v[F]);g&&this._fireEvent("move",g.originalEvent);for(let F in i){let{originalEvent:N}=i[F];this._fireEvent(F,N)}let C={},T;for(let F in this._eventsInProgress){let{handlerName:N,originalEvent:X}=this._eventsInProgress[F];this._handlersById[N].isActive()||(delete this._eventsInProgress[F],T=l[N]||X,C[`${F}end`]=T)}for(let F in C)this._fireEvent(F,C[F]);let P=Pu(this._eventsInProgress),O=(p||g)&&!P;if(O&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let F=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&F.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(F)}if(h&&O){this._updatingCamera=!0;let F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;!F||!F.essential&&I.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:T})),N(this._map.getBearing())&&this._map.resetNorth()):(N(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:T})),this._updatingCamera=!1}}_fireEvent(i,l){this._map.fire(new s.l(i,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Sb("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Mb extends s.E{constructor(i,l,h){super(),this._renderFrameCallback=()=>{let p=Math.min((I.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=h.bearingSnap,this.cameraHelper=l,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(i,l){i.apply(this.transform),this.transform=i,this.cameraHelper=l}getCenter(){return new s.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(i,l){return this.jumpTo({center:i},l)}getCenterElevation(){return this.transform.elevation}setCenterElevation(i,l){return this.jumpTo({elevation:i},l),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(i){this._centerClampedToGround=i}panBy(i,l,h){return i=s.P.convert(i).mult(-1),this.panTo(this.transform.center,s.e({offset:i},l),h)}panTo(i,l,h){return this.easeTo(s.e({center:i},l),h)}getZoom(){return this.transform.zoom}setZoom(i,l){return this.jumpTo({zoom:i},l),this}zoomTo(i,l,h){return this.easeTo(s.e({zoom:i},l),h)}zoomIn(i,l){return this.zoomTo(this.getZoom()+1,i,l),this}zoomOut(i,l){return this.zoomTo(this.getZoom()-1,i,l),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(i,l){return i!=this.transform.fov&&(this.transform.setFov(i),this.fire(new s.l("movestart",l)).fire(new s.l("move",l)).fire(new s.l("moveend",l))),this}getBearing(){return this.transform.bearing}setBearing(i,l){return this.jumpTo({bearing:i},l),this}getPadding(){return this.transform.padding}setPadding(i,l){return this.jumpTo({padding:i},l),this}rotateTo(i,l,h){return this.easeTo(s.e({bearing:i},l),h)}resetNorth(i,l){return this.rotateTo(0,s.e({duration:1e3},i),l),this}resetNorthPitch(i,l){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},i),l),this}snapToNorth(i,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,l):this}getPitch(){return this.transform.pitch}setPitch(i,l){return this.jumpTo({pitch:i},l),this}getRoll(){return this.transform.roll}setRoll(i,l){return this.jumpTo({roll:i},l),this}cameraForBounds(i,l){i=Ki.convert(i).adjustAntiMeridian();let h=l&&l.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),h,l)}_cameraForBoxAndBearing(i,l,h,p){let g={top:0,bottom:0,right:0,left:0};if(typeof(p=s.e({padding:g,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){let P=p.padding;p.padding={top:P,bottom:P,right:P,left:P}}let v=s.e(g,p.padding);p.padding=v;let C=this.transform,T=new Ki(i,l);return this.cameraHelper.cameraForBoxAndBearing(p,v,T,h,C)}fitBounds(i,l,h){return this._fitInternal(this.cameraForBounds(i,l),l,h)}fitScreenCoordinates(i,l,h,p,g){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(i)),this.transform.screenPointToLocation(s.P.convert(l)),h,p),p,g)}_fitInternal(i,l,h){return i?(delete(l=s.e(i,l)).padding,l.linear?this.easeTo(l,h):this.flyTo(l,h)):this}jumpTo(i,l){this.stop();let h=this._getTransformForUpdate(),p=!1,g=!1,v=!1,C=h.zoom;this.cameraHelper.handleJumpToCenterZoom(h,i);let T=h.zoom!==C;return"elevation"in i&&h.elevation!==+i.elevation&&h.setElevation(+i.elevation),"bearing"in i&&h.bearing!==+i.bearing&&(p=!0,h.setBearing(+i.bearing)),"pitch"in i&&h.pitch!==+i.pitch&&(g=!0,h.setPitch(+i.pitch)),"roll"in i&&h.roll!==+i.roll&&(v=!0,h.setRoll(+i.roll)),i.padding==null||h.isPaddingEqual(i.padding)||h.setPadding(i.padding),this._applyUpdatedTransform(h),this.fire(new s.l("movestart",l)).fire(new s.l("move",l)),T&&this.fire(new s.l("zoomstart",l)).fire(new s.l("zoom",l)).fire(new s.l("zoomend",l)),p&&this.fire(new s.l("rotatestart",l)).fire(new s.l("rotate",l)).fire(new s.l("rotateend",l)),g&&this.fire(new s.l("pitchstart",l)).fire(new s.l("pitch",l)).fire(new s.l("pitchend",l)),v&&this.fire(new s.l("rollstart",l)).fire(new s.l("roll",l)).fire(new s.l("rollend",l)),this.fire(new s.l("moveend",l))}calculateCameraOptionsFromTo(i,l,h,p=0){let g=s.$.fromLngLat(i,l),v=s.$.fromLngLat(h,p),C=v.x-g.x,T=v.y-g.y,P=v.z-g.z,O=Math.hypot(C,T,P);if(O===0)throw new Error("Can't calculate camera options with same From and To");let F=Math.hypot(C,T),N=s.ah(this.transform.cameraToCenterDistance/O/this.transform.tileSize),X=180*Math.atan2(C,-T)/Math.PI,J=180*Math.acos(F/O)/Math.PI;return J=P<0?90-J:90+J,{center:v.toLngLat(),elevation:p,zoom:N,pitch:J,bearing:X}}calculateCameraOptionsFromCameraLngLatAltRotation(i,l,h,p,g){let v=this.transform.calculateCenterFromCameraLngLatAlt(i,l,h,p);return{center:v.center,elevation:v.elevation,zoom:v.zoom,bearing:h,pitch:p,roll:g}}easeTo(i,l){this._stop(!1,i.easeId),((i=s.e({offset:[0,0],duration:500,easing:s.cf},i)).animate===!1||!i.essential&&I.prefersReducedMotion)&&(i.duration=0);let h=this._getTransformForUpdate(),p=this.getBearing(),g=h.pitch,v=h.roll,C="bearing"in i?this._normalizeBearing(i.bearing,p):p,T="pitch"in i?+i.pitch:g,P="roll"in i?this._normalizeBearing(i.roll,v):v,O="padding"in i?i.padding:h.padding,F=s.P.convert(i.offset),N,X;i.around&&(N=s.Q.convert(i.around),X=h.locationToScreenPoint(N));let J={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ge=this.cameraHelper.handleEaseTo(h,{bearing:C,pitch:T,roll:P,padding:O,around:N,aroundPoint:X,offsetAsPoint:F,offset:i.offset,zoom:i.zoom,center:i.center});return this._rotating=this._rotating||p!==C,this._pitching=this._pitching||T!==g,this._rolling=this._rolling||P!==v,this._padding=!h.isPaddingEqual(O),this._zooming=this._zooming||ge.isZooming,this._easeId=i.easeId,this._prepareEase(l,i.noMoveStart,J),this.terrain&&this._prepareElevation(ge.elevationCenter),this._ease(me=>{ge.easeFunc(me),this.terrain&&!i.freezeElevation&&this._updateElevation(me),this._applyUpdatedTransform(h),this._fireMoveEvents(l)},me=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(l,me)},i),this}_prepareEase(i,l,h={}){this._moving=!0,l||h.moving||this.fire(new s.l("movestart",i)),this._zooming&&!h.zooming&&this.fire(new s.l("zoomstart",i)),this._rotating&&!h.rotating&&this.fire(new s.l("rotatestart",i)),this._pitching&&!h.pitching&&this.fire(new s.l("pitchstart",i)),this._rolling&&!h.rolling&&this.fire(new s.l("rollstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&l!==this._elevationTarget){let h=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(h-(l-(h*i+this._elevationStart))/(1-i)),this._elevationTarget=l}this.transform.setElevation(s.B.number(this._elevationStart,this._elevationTarget,i))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){if(!this.terrain&&i.elevation>=0&&i.pitch<=90)return{};let l=i.getCameraLngLat(),h=i.getCameraAltitude(),p=this.terrain?this.terrain.getElevationForLngLatZoom(l,i.zoom):0;if(h<p){let g=this.calculateCameraOptionsFromTo(l,p,i.center,i.elevation);return{pitch:g.pitch,zoom:g.zoom}}return{}}_applyUpdatedTransform(i){let l=[];if(l.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&l.push(p=>this.transformCameraUpdate(p)),!l.length)return;let h=i.clone();for(let p of l){let g=h.clone(),{center:v,zoom:C,roll:T,pitch:P,bearing:O,elevation:F}=p(g);v&&g.setCenter(v),F!==void 0&&g.setElevation(F),C!==void 0&&g.setZoom(C),T!==void 0&&g.setRoll(T),P!==void 0&&g.setPitch(P),O!==void 0&&g.setBearing(O),h.apply(g)}this.transform.apply(h)}_fireMoveEvents(i){this.fire(new s.l("move",i)),this._zooming&&this.fire(new s.l("zoom",i)),this._rotating&&this.fire(new s.l("rotate",i)),this._pitching&&this.fire(new s.l("pitch",i)),this._rolling&&this.fire(new s.l("roll",i))}_afterEase(i,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;let h=this._zooming,p=this._rotating,g=this._pitching,v=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,h&&this.fire(new s.l("zoomend",i)),p&&this.fire(new s.l("rotateend",i)),g&&this.fire(new s.l("pitchend",i)),v&&this.fire(new s.l("rollend",i)),this.fire(new s.l("moveend",i))}flyTo(i,l){if(!i.essential&&I.prefersReducedMotion){let st=s.O(i,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(st,l)}this.stop(),i=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.cf},i);let h=this._getTransformForUpdate(),p=h.bearing,g=h.pitch,v=h.roll,C=h.padding,T="bearing"in i?this._normalizeBearing(i.bearing,p):p,P="pitch"in i?+i.pitch:g,O="roll"in i?this._normalizeBearing(i.roll,v):v,F="padding"in i?i.padding:h.padding,N=s.P.convert(i.offset),X=h.centerPoint.add(N),J=h.screenPointToLocation(X),ge=this.cameraHelper.handleFlyTo(h,{bearing:T,pitch:P,roll:O,padding:F,locationAtOffset:J,offsetAsPoint:N,center:i.center,minZoom:i.minZoom,zoom:i.zoom}),me=i.curve,_e=Math.max(h.width,h.height),xe=_e/ge.scaleOfZoom,Me=ge.pixelPathLength;typeof ge.scaleOfMinZoom=="number"&&(me=Math.sqrt(_e/ge.scaleOfMinZoom/Me*2));let Te=me*me;function ke(st){let Mt=(xe*xe-_e*_e+(st?-1:1)*Te*Te*Me*Me)/(2*(st?xe:_e)*Te*Me);return Math.log(Math.sqrt(Mt*Mt+1)-Mt)}function Fe(st){return(Math.exp(st)-Math.exp(-st))/2}function De(st){return(Math.exp(st)+Math.exp(-st))/2}let We=ke(!1),lt=function(st){return De(We)/De(We+me*st)},et=function(st){return _e*((De(We)*(Fe(Mt=We+me*st)/De(Mt))-Fe(We))/Te)/Me;var Mt},rt=(ke(!0)-We)/me;if(Math.abs(Me)<2e-6||!isFinite(rt)){if(Math.abs(_e-xe)<1e-6)return this.easeTo(i,l);let st=xe<_e?-1:1;rt=Math.abs(Math.log(xe/_e))/me,et=()=>0,lt=Mt=>Math.exp(st*me*Mt)}return i.duration="duration"in i?+i.duration:1e3*rt/("screenSpeed"in i?+i.screenSpeed/me:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=p!==T,this._pitching=P!==g,this._rolling=O!==v,this._padding=!h.isPaddingEqual(F),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(ge.targetCenter),this._ease(st=>{let Mt=st*rt,Et=1/lt(Mt),_t=et(Mt);this._rotating&&h.setBearing(s.B.number(p,T,st)),this._pitching&&h.setPitch(s.B.number(g,P,st)),this._rolling&&h.setRoll(s.B.number(v,O,st)),this._padding&&(h.interpolatePadding(C,F,st),X=h.centerPoint.add(N)),ge.easeFunc(st,Et,_t,X),this.terrain&&!i.freezeElevation&&this._updateElevation(st),this._applyUpdatedTransform(h),this._fireMoveEvents(l)},()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(l)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,l){var h;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,l)}return i||(h=this.handlers)===null||h===void 0||h.stop(!1),this}_ease(i,l,h){h.animate===!1||h.duration===0?(i(1),l()):(this._easeStart=I.now(),this._easeOptions=h,this._onEaseFrame=i,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,l){i=s.aL(i,-180,180);let h=Math.abs(i-l);return Math.abs(i-360-l)<h&&(i-=360),Math.abs(i+360-l)<h&&(i+=360),i}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(s.Q.convert(i),this.transform.tileZoom):null}}let Ra={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Cr{constructor(i=Ra){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=A.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=A.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,l){let h=this._map._getUIString(`AttributionControl.${l}`);i.title=h,i.setAttribute("aria-label",h)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){let p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}let l=this._map.style.sourceCaches;for(let p in l){let g=l[p];if(g.used||g.usedForTerrain){let v=g.getSource();v.attribution&&i.indexOf(v.attribution)<0&&i.push(v.attribution)}}i=i.filter(p=>String(p).trim()),i.sort((p,g)=>p.length-g.length),i=i.filter((p,g)=>{for(let v=g+1;v<i.length;v++)if(i[v].indexOf(p)>=0)return!1;return!0});let h=i.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,i.length?(this._innerContainer.innerHTML=A.sanitize(h),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Du{constructor(i={}){this._updateCompact=()=>{let l=this._container.children;if(l.length){let h=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact"):h.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=A.create("div","maplibregl-ctrl");let l=A.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){A.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ap{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){let l=++this._id;return this._queue.push({callback:i,id:l,cancelled:!1}),l}remove(i){let l=this._currentlyRunning,h=l?this._queue.concat(l):this._queue;for(let p of h)if(p.id===i)return void(p.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let l=this._currentlyRunning=this._queue;this._queue=[];for(let h of l)if(!h.cancelled&&(h.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Xm=s.aG([{name:"a_pos3d",type:"Int16",components:3}]);class Ym extends s.E{constructor(i){super(),this._lastTilesetChange=I.now(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=i._source.tileSize*2**this.deltaZoom,i.usedForTerrain=!0,i.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,l){this.sourceCache.update(i,l),this._renderableTilesKeys=[];let h={};for(let p of ze(i,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))h[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.terrainRttPosMatrix32f=new Float64Array(16),s.bQ(p.terrainRttPosMatrix32f,0,s.Z,s.Z,0,0,1),this._tiles[p.key]=new Yo(p,this.tileSize),this._lastTilesetChange=I.now());for(let p in this._tiles)h[p]||delete this._tiles[p]}freeRtt(i){for(let l in this._tiles){let h=this._tiles[l];(!i||h.tileID.equals(i)||h.tileID.isChildOf(i)||i.isChildOf(h.tileID))&&(h.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i,l){return l?this._getTerrainCoordsForTileRanges(i,l):this._getTerrainCoordsForRegularTile(i)}_getTerrainCoordsForRegularTile(i){let l={};for(let h of this._renderableTilesKeys){let p=this._tiles[h].tileID,g=i.clone(),v=s.b2();if(p.canonical.equals(i.canonical))s.bQ(v,0,s.Z,s.Z,0,0,1);else if(p.canonical.isChildOf(i.canonical)){let C=p.canonical.z-i.canonical.z,T=p.canonical.x-(p.canonical.x>>C<<C),P=p.canonical.y-(p.canonical.y>>C<<C),O=s.Z>>C;s.bQ(v,0,O,O,0,0,1),s.L(v,v,[-T*O,-P*O,0])}else{if(!i.canonical.isChildOf(p.canonical))continue;{let C=i.canonical.z-p.canonical.z,T=i.canonical.x-(i.canonical.x>>C<<C),P=i.canonical.y-(i.canonical.y>>C<<C),O=s.Z>>C;s.bQ(v,0,s.Z,s.Z,0,0,1),s.L(v,v,[T*O,P*O,0]),s.M(v,v,[1/2**C,1/2**C,0])}}g.terrainRttPosMatrix32f=new Float32Array(v),l[h]=g}return l}_getTerrainCoordsForTileRanges(i,l){let h={};for(let p of this._renderableTilesKeys){let g=this._tiles[p].tileID;if(!this._isWithinTileRanges(g,l))continue;let v=i.clone(),C=s.b2();if(g.canonical.z===i.canonical.z){let T=i.canonical.x-g.canonical.x,P=i.canonical.y-g.canonical.y;s.bQ(C,0,s.Z,s.Z,0,0,1),s.L(C,C,[T*s.Z,P*s.Z,0])}else if(g.canonical.z>i.canonical.z){let T=g.canonical.z-i.canonical.z,P=g.canonical.x-(g.canonical.x>>T<<T),O=g.canonical.y-(g.canonical.y>>T<<T),F=i.canonical.x-(g.canonical.x>>T),N=i.canonical.y-(g.canonical.y>>T),X=s.Z>>T;s.bQ(C,0,X,X,0,0,1),s.L(C,C,[-P*X+F*s.Z,-O*X+N*s.Z,0])}else{let T=i.canonical.z-g.canonical.z,P=i.canonical.x-(i.canonical.x>>T<<T),O=i.canonical.y-(i.canonical.y>>T<<T),F=(i.canonical.x>>T)-g.canonical.x,N=(i.canonical.y>>T)-g.canonical.y,X=s.Z<<T;s.bQ(C,0,X,X,0,0,1),s.L(C,C,[P*s.Z+F*X,O*s.Z+N*X,0])}v.terrainRttPosMatrix32f=new Float32Array(C),h[p]=v}return h}getSourceTile(i,l){let h=this.sourceCache._source,p=i.overscaledZ-this.deltaZoom;if(p>h.maxzoom&&(p=h.maxzoom),p<h.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(p).key);let g=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!g||!g.dem)&&l)for(;p>=h.minzoom&&(!g||!g.dem);)g=this.sourceCache.getTileByID(i.scaledTo(p--).key);return g}anyTilesAfterTime(i=Date.now()){return this._lastTilesetChange>=i}_isWithinTileRanges(i,l){return l[i.canonical.z]&&i.canonical.x>=l[i.canonical.z].minTileX&&i.canonical.x<=l[i.canonical.z].maxTileX&&i.canonical.y>=l[i.canonical.z].minTileY&&i.canonical.y<=l[i.canonical.z].maxTileY}}class Km{constructor(i,l,h){this._meshCache={},this.painter=i,this.sourceCache=new Ym(l),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,l,h,p=s.Z){var g;if(!(l>=0&&l<p&&h>=0&&h<p))return 0;let v=this.getTerrainData(i),C=(g=v.tile)===null||g===void 0?void 0:g.dem;if(!C)return 0;let T=s.cj([],[l/p*s.Z,h/p*s.Z],v.u_terrain_matrix),P=[T[0]*C.dim,T[1]*C.dim],O=Math.floor(P[0]),F=Math.floor(P[1]),N=P[0]-O,X=P[1]-F;return C.get(O,F)*(1-N)*(1-X)+C.get(O+1,F)*N*(1-X)+C.get(O,F+1)*(1-N)*X+C.get(O+1,F+1)*N*X}getElevationForLngLatZoom(i,l){if(!s.ck(l,i.wrap()))return 0;let{tileID:h,mercatorX:p,mercatorY:g}=this._getOverscaledTileIDFromLngLatZoom(i,l);return this.getElevation(h,p%s.Z,g%s.Z,s.Z)}getElevation(i,l,h,p=s.Z){return this.getDEMElevation(i,l,h,p)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){let p=this.painter.context,g=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ve(p,g,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ve(p,new s.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ad([])}let l=this.sourceCache.getSourceTile(i,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){let p=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new Ve(p,l.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),l.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}let h=l&&l+l.tileID.key+i.key;if(h&&!this._demMatrixCache[h]){let p=this.sourceCache.sourceCache._source.maxzoom,g=i.canonical.z-l.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=p?g=i.canonical.z-p:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let v=i.canonical.x-(i.canonical.x>>g<<g),C=i.canonical.y-(i.canonical.y>>g<<g),T=s.cl(new Float64Array(16),[1/(s.Z<<g),1/(s.Z<<g),0]);s.L(T,T,[v*s.Z,C*s.Z,0]),this._demMatrixCache[i.key]={matrix:T,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(i){let l=this.painter,h=l.width/devicePixelRatio,p=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ve(l.context,{width:h,height:p,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ve(l.context,{width:h,height:p,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(h,p,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,h,p))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let g=0,v=0;g<this._coordsTextureSize;g++)for(let C=0;C<this._coordsTextureSize;C++,v+=4)l[v+0]=255&C,l[v+1]=255&g,l[v+2]=C>>8<<4|g>>8,l[v+3]=0;let h=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),p=new Ve(i,h,i.gl.RGBA,{premultiply:!1});return p.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);let l=new Uint8Array(4),h=this.painter.context,p=h.gl,g=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),v=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),C=Math.round(this.painter.height/devicePixelRatio);h.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(g,C-v-1,1,1,p.RGBA,p.UNSIGNED_BYTE,l),h.bindFramebuffer.set(null);let T=l[0]+(l[2]>>4<<8),P=l[1]+((15&l[2])<<8),O=this.coordsIndex[255-l[3]],F=O&&this.sourceCache.getTileByID(O);if(!F)return null;let N=this._coordsTextureSize,X=(1<<F.tileID.canonical.z)*N;return new s.$((F.tileID.canonical.x*N+T)/X+F.tileID.wrap,(F.tileID.canonical.y*N+P)/X,this.getElevation(F.tileID,T,P,N))}depthAtPoint(i){let l=new Uint8Array(4),h=this.painter.context,p=h.gl;return h.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,l),h.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(i){var l;let h=((l=this.painter.style.projection)===null||l===void 0?void 0:l.transitionState)>0,p=h&&i.canonical.y===0,g=h&&i.canonical.y===(1<<i.canonical.z)-1,v=`m_${p?"n":""}_${g?"s":""}`;if(this._meshCache[v])return this._meshCache[v];let C=this.painter.context,T=new s.cm,P=new s.aK,O=this.meshSize,F=s.Z/O,N=O*O;for(let De=0;De<=O;De++)for(let We=0;We<=O;We++)T.emplaceBack(We*F,De*F,0);for(let De=0;De<N;De+=O+1)for(let We=0;We<O;We++)P.emplaceBack(We+De,O+We+De+1,O+We+De+2),P.emplaceBack(We+De,O+We+De+2,We+De+1);let X=T.length,J=X+(O+1),ge=(O+1)*O,me=p?s.b9:0,_e=p?0:1,xe=g?s.ba:s.Z,Me=g?0:1;for(let De=0;De<=O;De++)T.emplaceBack(De*F,me,_e);for(let De=0;De<=O;De++)T.emplaceBack(De*F,xe,Me);for(let De=0;De<O;De++)P.emplaceBack(ge+De,J+De,J+De+1),P.emplaceBack(ge+De,J+De+1,ge+De+1),P.emplaceBack(0+De,X+De+1,X+De),P.emplaceBack(0+De,0+De+1,X+De+1);let Te=T.length,ke=Te+2*(O+1);for(let De of[0,1])for(let We=0;We<=O;We++)for(let lt of[0,1])T.emplaceBack(De*s.Z,We*F,lt);for(let De=0;De<2*O;De+=2)P.emplaceBack(Te+De,Te+De+1,Te+De+3),P.emplaceBack(Te+De,Te+De+3,Te+De+2),P.emplaceBack(ke+De,ke+De+3,ke+De+1),P.emplaceBack(ke+De,ke+De+2,ke+De+3);let Fe=new Qo(C.createVertexBuffer(T,Xm.members),C.createIndexBuffer(P),s.aJ.simpleSegment(0,0,T.length,P.length));return this._meshCache[v]=Fe,Fe}getMeshFrameDelta(i){return 2*Math.PI*s.bu/Math.pow(2,Math.max(i,0))/5}getMinTileElevationForLngLatZoom(i,l){var h;let{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(i,l);return(h=this.getMinMaxElevation(p).minElevation)!==null&&h!==void 0?h:0}getMinMaxElevation(i){let l=this.getTerrainData(i).tile,h={minElevation:null,maxElevation:null};return l&&l.dem&&(h.minElevation=l.dem.min*this.exaggeration,h.maxElevation=l.dem.max*this.exaggeration),h}_getOverscaledTileIDFromLngLatZoom(i,l){let h=s.$.fromLngLat(i.wrap()),p=(1<<l)*s.Z,g=h.x*p,v=h.y*p,C=Math.floor(g/s.Z),T=Math.floor(v/s.Z);return{tileID:new s.Y(l,0,l,C,T),mercatorX:g,mercatorY:v}}}class Ib{constructor(i,l,h){this._context=i,this._size=l,this._tileSize=h,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){let l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),h=new Ve(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return h.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(h.texture),{id:i,fbo:l,texture:h,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>i.id!==l),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(let l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(let i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}let lo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Yd{constructor(i,l){this.painter=i,this.terrain=l,this.pool=new Ib(i.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(h=>!i._layers[h].isHidden(l)),this._coordsAscending={};for(let h in i.sourceCaches){this._coordsAscending[h]={};let p=i.sourceCaches[h].getVisibleCoordinates(),g=i.sourceCaches[h].getSource(),v=g instanceof qn?g.terrainTileRanges:null;for(let C of p){let T=this.terrain.sourceCache.getTerrainCoords(C,v);for(let P in T)this._coordsAscending[h][P]||(this._coordsAscending[h][P]=[]),this._coordsAscending[h][P].push(T[P])}}this._coordsAscendingStr={};for(let h of i._order){let p=i._layers[h],g=p.source;if(lo[p.type]&&!this._coordsAscendingStr[g]){this._coordsAscendingStr[g]={};for(let v in this._coordsAscending[g])this._coordsAscendingStr[g][v]=this._coordsAscending[g][v].map(C=>C.key).sort().join()}}for(let h of this._renderableTiles)for(let p in this._coordsAscendingStr){let g=this._coordsAscendingStr[p][h.tileID.key];g&&g!==h.rttCoords[p]&&(h.rtt=[])}}renderLayer(i,l){if(i.isHidden(this.painter.transform.zoom))return!1;let h=Object.assign(Object.assign({},l),{isRenderingToTexture:!0}),p=i.type,g=this.painter,v=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(lo[p]&&(this._prevType&&lo[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(i.id),!v))return!0;if(lo[this._prevType]||lo[p]&&v){this._prevType=p;let C=this._stacks.length-1,T=this._stacks[C]||[];for(let P of this._renderableTiles){if(this.pool.isFull()&&(al(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(P),P.rtt[C]){let F=this.pool.getObjectForId(P.rtt[C].id);if(F.stamp===P.rtt[C].stamp){this.pool.useObject(F);continue}}let O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),P.rtt[C]={id:O.id,stamp:O.stamp},g.context.bindFramebuffer.set(O.fbo.framebuffer),g.context.clear({color:s.b7.transparent,stencil:0}),g.currentStencilSource=void 0;for(let F=0;F<T.length;F++){let N=g.style._layers[T[F]],X=N.source?this._coordsAscending[N.source][P.tileID.key]:[P.tileID];g.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),g._renderTileClippingMasks(N,X,!0),g.renderLayer(g,g.style.sourceCaches[N.source],N,X,h),N.source&&(P.rttCoords[N.source]=this._coordsAscendingStr[N.source][P.tileID.key])}}return al(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects(),lo[p]}return!1}}let $t={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ei=_,Ru={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ra,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},kp={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Pp{constructor(i,l,h=!1){this.mousedown=g=>{this.startMove(g,A.mousePos(this.element,g)),A.addEventListener(window,"mousemove",this.mousemove),A.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=g=>{this.move(g,A.mousePos(this.element,g))},this.mouseup=g=>{this._rotatePitchHanlder.dragEnd(g),this.offTemp()},this.touchstart=g=>{g.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,g.targetTouches)[0],this.startMove(g,this._startPos),A.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.addEventListener(window,"touchend",this.touchend))},this.touchmove=g=>{g.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,g.targetTouches)[0],this.move(g,this._lastPos))},this.touchend=g=>{g.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=l;let p=new kc;this._rotatePitchHanlder=new Gn({clickTolerance:3,move:(g,v)=>{let C=l.getBoundingClientRect(),T=new s.P((C.bottom-C.top)/2,(C.right-C.left)/2);return{bearingDelta:s.ce(new s.P(g.x,v.y),v,T),pitchDelta:h?-.5*(v.y-g.y):void 0}},moveStateManager:p,enable:!0,assignEvents:()=>{}}),this.map=i,A.addEventListener(l,"mousedown",this.mousedown),A.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(l,"touchcancel",this.reset)}startMove(i,l){this._rotatePitchHanlder.dragStart(i,l),A.disableDrag()}move(i,l){let h=this.map,{bearingDelta:p,pitchDelta:g}=this._rotatePitchHanlder.dragMove(i,l)||{};p&&h.setBearing(h.getBearing()+p),g&&h.setPitch(h.getPitch()+g)}off(){let i=this.element;A.removeEventListener(i,"mousedown",this.mousedown),A.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend),A.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){A.enableDrag(),A.removeEventListener(window,"mousemove",this.mousemove),A.removeEventListener(window,"mouseup",this.mouseup),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend)}}let tn;function Dp(m,i,l,h=!1){if(h||!l.getCoveringTilesDetailsProvider().allowWorldCopies())return m?.wrap();let p=new s.Q(m.lng,m.lat);if(m=new s.Q(m.lng,m.lat),i){let g=new s.Q(m.lng-360,m.lat),v=new s.Q(m.lng+360,m.lat),C=l.locationToScreenPoint(m).distSqr(i);l.locationToScreenPoint(g).distSqr(i)<C?m=g:l.locationToScreenPoint(v).distSqr(i)<C&&(m=v)}for(;Math.abs(m.lng-l.center.lng)>180;){let g=l.locationToScreenPoint(m);if(g.x>=0&&g.y>=0&&g.x<=l.width&&g.y<=l.height)break;m.lng>l.center.lng?m.lng-=360:m.lng+=360}return m.lng!==p.lng&&l.isPointOnMapSurface(l.locationToScreenPoint(m))?m:p}let os={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Qm(m,i,l){let h=m.classList;for(let p in os)h.remove(`maplibregl-${l}-anchor-${p}`);h.add(`maplibregl-${l}-anchor-${i}`)}class Bl extends s.E{constructor(i){if(super(),this._onKeyPress=l=>{let h=l.code,p=l.charCode||l.keyCode;h!=="Space"&&h!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=l=>{let h=l.originalEvent.target,p=this._element;this._popup&&(h===p||p.contains(h))&&this.togglePopup()},this._update=l=>{if(!this._map)return;let h=this._map.loaded()&&!this._map.isMoving();(l?.type==="terrain"||l?.type==="render"&&!h)&&this._map.once("render",this._update),this._lngLat=Dp(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let g="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?g="rotateX(0deg)":this._pitchAlignment==="map"&&(g=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||l&&l.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,`${os[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${g} ${p}`),I.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){let h=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(i?.opacity,i?.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=s.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div");let l=A.createNS("http://www.w3.org/2000/svg","svg"),h=41,p=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${h}px`),l.setAttributeNS(null,"width",`${p}px`),l.setAttributeNS(null,"viewBox",`0 0 ${p} ${h}`);let g=A.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"stroke","none"),g.setAttributeNS(null,"stroke-width","1"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"fill-rule","evenodd");let v=A.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"fill-rule","nonzero");let C=A.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");let T=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let _e of T){let xe=A.createNS("http://www.w3.org/2000/svg","ellipse");xe.setAttributeNS(null,"opacity","0.04"),xe.setAttributeNS(null,"cx","10.5"),xe.setAttributeNS(null,"cy","5.80029008"),xe.setAttributeNS(null,"rx",_e.rx),xe.setAttributeNS(null,"ry",_e.ry),C.appendChild(xe)}let P=A.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill",this._color);let O=A.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),P.appendChild(O);let F=A.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"opacity","0.25"),F.setAttributeNS(null,"fill","#000000");let N=A.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),F.appendChild(N);let X=A.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(6.0, 7.0)"),X.setAttributeNS(null,"fill","#FFFFFF");let J=A.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(8.0, 8.0)");let ge=A.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#000000"),ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962");let me=A.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#FFFFFF"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962"),J.appendChild(ge),J.appendChild(me),v.appendChild(C),v.appendChild(P),v.appendChild(F),v.appendChild(X),v.appendChild(J),l.appendChild(v),l.setAttributeNS(null,"height",h*this._scale+"px"),l.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(l),this._offset=s.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),Qm(this._element,this._anchor,"marker"),i&&i.className)for(let l of i.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),i.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.Q.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){let p=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){let i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var l,h;let p=(l=this._map)===null||l===void 0?void 0:l.terrain,g=this._map.transform.isLocationOccluded(this._lngLat);if(!p||g){let X=g?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==X&&(this._element.style.opacity=X))}if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let v=this._map,C=v.terrain.depthAtPoint(this._pos),T=v.terrain.getElevationForLngLatZoom(this._lngLat,v.transform.tileZoom);if(v.transform.lngLatToCameraDepth(this._lngLat,T)-C<.006)return void(this._element.style.opacity=this._opacity);let P=-this._offset.y/v.transform.pixelsPerMeter,O=Math.sin(v.getPitch()*Math.PI/180)*P,F=v.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),N=v.transform.lngLatToCameraDepth(this._lngLat,T+O)-F>.006;!((h=this._popup)===null||h===void 0)&&h.isOpen()&&N&&this._popup.remove(),this._element.style.opacity=N?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=s.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,l){return(this._opacity===void 0||i===void 0&&l===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}let Fr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},kr=0,Rc=!1,Ou={maxWidth:100,unit:"metric"};function Lu(m,i,l){let h=l&&l.maxWidth||100,p=m._container.clientHeight/2,g=m._container.clientWidth/2,v=m.unproject([g-h/2,p]),C=m.unproject([g+h/2,p]),T=Math.round(m.project(C).x-m.project(v).x),P=Math.min(h,T,m._container.clientWidth),O=v.distanceTo(C);if(l&&l.unit==="imperial"){let F=3.2808*O;F>5280?Vl(i,P,F/5280,m._getUIString("ScaleControl.Miles")):Vl(i,P,F,m._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?Vl(i,P,O/1852,m._getUIString("ScaleControl.NauticalMiles")):O>=1e3?Vl(i,P,O/1e3,m._getUIString("ScaleControl.Kilometers")):Vl(i,P,O,m._getUIString("ScaleControl.Meters"))}function Vl(m,i,l,h){let p=function(g){let v=Math.pow(10,`${Math.floor(g)}`.length-1),C=g/v;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(T){let P=Math.pow(10,Math.ceil(-Math.log(T)/Math.LN10));return Math.round(T*P)/P}(C),v*C}(l);m.style.width=i*(p/l)+"px",m.innerHTML=`${p}&nbsp;${h}`}let Rp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Op=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Oc(m){if(m){if(typeof m=="number"){let i=Math.round(Math.abs(m)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,m),"top-left":new s.P(i,i),"top-right":new s.P(-i,i),bottom:new s.P(0,-m),"bottom-left":new s.P(i,-i),"bottom-right":new s.P(-i,-i),left:new s.P(m,0),right:new s.P(-m,0)}}if(m instanceof s.P||Array.isArray(m)){let i=s.P.convert(m);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:s.P.convert(m.center||[0,0]),top:s.P.convert(m.top||[0,0]),"top-left":s.P.convert(m["top-left"]||[0,0]),"top-right":s.P.convert(m["top-right"]||[0,0]),bottom:s.P.convert(m.bottom||[0,0]),"bottom-left":s.P.convert(m["bottom-left"]||[0,0]),"bottom-right":s.P.convert(m["bottom-right"]||[0,0]),left:s.P.convert(m.left||[0,0]),right:s.P.convert(m.right||[0,0])}}return Oc(new s.P(0,0))}let Lp=_;a.AJAXError=s.cq,a.Event=s.l,a.Evented=s.E,a.LngLat=s.Q,a.MercatorCoordinate=s.$,a.Point=s.P,a.addProtocol=s.cr,a.config=s.a,a.removeProtocol=s.cs,a.AttributionControl=Cr,a.BoxZoomHandler=Cp,a.CanvasSource=ps,a.CooperativeGesturesHandler=Zd,a.DoubleClickZoomHandler=Wd,a.DragPanHandler=Wm,a.DragRotateHandler=Zm,a.EdgeInsets=kl,a.FullscreenControl=class extends s.E{constructor(m={}){super(),this._onFullscreenChange=()=>{var i;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=l?.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){A.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let m=this._fullscreenButton=A.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);A.create("span","maplibregl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=Ya,a.GeolocateControl=class extends s.E{constructor(m){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",i)),this._finish()}},this._updateCamera=i=>{let l=new s.Q(i.coords.longitude,i.coords.latitude),h=i.coords.accuracy,p=this._map.getBearing(),g=s.e({bearing:p},this.options.fitBoundsOptions),v=Ki.fromLngLat(l,h);this._map.fitBounds(v,g,{geolocateSource:!0})},this._updateMarker=i=>{if(i){let l=new s.Q(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Rc)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=A.create("button","maplibregl-ctrl-geolocate",this._container),A.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");let l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{let l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Bl({element:this._dotElement}),this._circleElement=A.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Bl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))})}},this.options=s.e({},Fr,m)}onAdd(m){return this._map=m,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(i=!1){if(tn!==void 0&&!i)return tn;if(window.navigator.permissions===void 0)return tn=!!window.navigator.geolocation,tn;try{tn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{tn=!!window.navigator.geolocation}return tn})}().then(i=>this._finishSetupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,kr=0,Rc=!1}_isOutOfMapMaxBounds(m){let i=this._map.getMaxBounds(),l=m.coords;return i&&(l.longitude<i.getWest()||l.longitude>i.getEast()||l.latitude<i.getSouth()||l.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let m=this._map.getBounds(),i=m.getSouthEast(),l=m.getNorthEast(),h=i.distanceTo(l),p=Math.ceil(this._accuracy/(h/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":kr--,Rc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),kr++,kr>1?(m={maximumAge:6e5,timeout:0},Rc=!0):(m=this.options.positionOptions,Rc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.GlobeControl=class{constructor(){this._toggleProjection=()=>{var m;let i=(m=this._map.getProjection())===null||m===void 0?void 0:m.type;this._map.setProjection(i!=="mercator"&&i?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var m;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((m=this._map.getProjection())===null||m===void 0?void 0:m.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(m){return this._map=m,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=A.create("button","maplibregl-ctrl-globe",this._container),A.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},a.Hash=yp,a.ImageSource=qn,a.KeyboardHandler=Dc,a.LngLatBounds=Ki,a.LogoControl=Du,a.Map=class extends Mb{constructor(m){var i,l;s.cn.mark(s.co.create);let h=Object.assign(Object.assign(Object.assign({},Ru),m),{canvasContextAttributes:Object.assign(Object.assign({},Ru.canvasContextAttributes),m.canvasContextAttributes)});if(h.minZoom!=null&&h.maxZoom!=null&&h.minZoom>h.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(h.minPitch!=null&&h.maxPitch!=null&&h.minPitch>h.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(h.minPitch!=null&&h.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(h.maxPitch!=null&&h.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let p=new no,g=new tl;if(h.minZoom!==void 0&&p.setMinZoom(h.minZoom),h.maxZoom!==void 0&&p.setMaxZoom(h.maxZoom),h.minPitch!==void 0&&p.setMinPitch(h.minPitch),h.maxPitch!==void 0&&p.setMaxPitch(h.maxPitch),h.renderWorldCopies!==void 0&&p.setRenderWorldCopies(h.renderWorldCopies),super(p,g,{bearingSnap:h.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ap,this._controls=[],this._mapId=s.a4(),this._contextLost=C=>{C.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:C}))},this._contextRestored=C=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:C}))},this._onMapScroll=C=>{if(C.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=h.interactive,this._maxTileCacheSize=h.maxTileCacheSize,this._maxTileCacheZoomLevels=h.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},h.canvasContextAttributes),this._trackResize=h.trackResize===!0,this._bearingSnap=h.bearingSnap,this._centerClampedToGround=h.centerClampedToGround,this._refreshExpiredTiles=h.refreshExpiredTiles===!0,this._fadeDuration=h.fadeDuration,this._crossSourceCollisions=h.crossSourceCollisions===!0,this._collectResourceTiming=h.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},$t),h.locale),this._clickTolerance=h.clickTolerance,this._overridePixelRatio=h.pixelRatio,this._maxCanvasSize=h.maxCanvasSize,this.transformCameraUpdate=h.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=h.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ne.addThrottleControl(()=>this.isMoving()),this._requestManager=new re(h.transformRequest),typeof h.container=="string"){if(this._container=document.getElementById(h.container),!this._container)throw new Error(`Container '${h.container}' not found.`)}else{if(!(h.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=h.container}if(h.maxBounds&&this.setMaxBounds(h.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let C=!1,T=Iu(P=>{this._trackResize&&!this._removed&&(this.resize(P),this.redraw())},50);this._resizeObserver=new ResizeObserver(P=>{C?T(P):C=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Tb(this,h),this._hash=h.hash&&new yp(typeof h.hash=="string"&&h.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:h.center,elevation:h.elevation,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch,roll:h.roll}),h.bounds&&(this.resize(),this.fitBounds(h.bounds,s.e({},h.fitBoundsOptions,{duration:0}))));let v=typeof h.style=="string"||((l=(i=h.style)===null||i===void 0?void 0:i.projection)===null||l===void 0?void 0:l.type)!=="globe";this.resize(null,v),this._localIdeographFontFamily=h.localIdeographFontFamily,this._validateStyle=h.validateStyle,h.style&&this.setStyle(h.style,{localIdeographFontFamily:h.localIdeographFontFamily}),h.attributionControl&&this.addControl(new Cr(typeof h.attributionControl=="boolean"?void 0:h.attributionControl)),h.maplibreLogo&&this.addControl(new Du,h.logoPosition),this.on("style.load",()=>{if(v||this._resizeTransform(),this.transform.unmodified){let C=s.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(C)}}),this.on("data",C=>{this._update(C.dataType==="style"),this.fire(new s.l(`${C.dataType}data`,C))}),this.on("dataloading",C=>{this.fire(new s.l(`${C.dataType}dataloading`,C))}),this.on("dataabort",C=>{this.fire(new s.l("sourcedataabort",C))})}_getMapId(){return this._mapId}addControl(m,i){if(i===void 0&&(i=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let l=m.onAdd(this);this._controls.push(m);let h=this._controlPositions[i];return i.indexOf("bottom")!==-1?h.insertBefore(l,h.firstChild):h.appendChild(l),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let i=this._controls.indexOf(m);return i>-1&&this._controls.splice(i,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}calculateCameraOptionsFromTo(m,i,l,h){return h==null&&this.terrain&&(h=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(m,i,l,h)}resize(m,i=!0){let[l,h]=this._containerDimensions(),p=this._getClampedPixelRatio(l,h);if(this._resizeCanvas(l,h,p),this.painter.resize(l,h,p),this.painter.overLimit()){let v=this.painter.context.gl;this._maxCanvasSize=[v.drawingBufferWidth,v.drawingBufferHeight];let C=this._getClampedPixelRatio(l,h);this._resizeCanvas(l,h,C),this.painter.resize(l,h,C)}this._resizeTransform(i);let g=!this._moving;return g&&(this.stop(),this.fire(new s.l("movestart",m)).fire(new s.l("move",m))),this.fire(new s.l("resize",m)),g&&this.fire(new s.l("moveend",m)),this}_resizeTransform(m=!0){var i;let[l,h]=this._containerDimensions();this.transform.resize(l,h,m),(i=this._requestedCameraState)===null||i===void 0||i.resize(l,h,m)}_getClampedPixelRatio(m,i){let{0:l,1:h}=this._maxCanvasSize,p=this.getPixelRatio(),g=m*p,v=i*p;return Math.min(g>l?l/g:1,v>h?h/v:1)*p}getPixelRatio(){var m;return(m=this._overridePixelRatio)!==null&&m!==void 0?m:devicePixelRatio}setPixelRatio(m){this._overridePixelRatio=m,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(Ki.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.setMinZoom(m),this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.setMaxZoom(m),this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.setMinPitch(m),this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(m>=this.transform.minPitch)return this.transform.setMaxPitch(m),this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.setRenderWorldCopies(m),this._update()}project(m){return this.transform.locationToScreenPoint(s.Q.convert(m),this.style&&this.terrain)}unproject(m){return this.transform.screenPointToLocation(s.P.convert(m),this.terrain)}isMoving(){var m;return this._moving||((m=this.handlers)===null||m===void 0?void 0:m.isMoving())}isZooming(){var m;return this._zooming||((m=this.handlers)===null||m===void 0?void 0:m.isZooming())}isRotating(){var m;return this._rotating||((m=this.handlers)===null||m===void 0?void 0:m.isRotating())}_createDelegatedListener(m,i,l){if(m==="mouseenter"||m==="mouseover"){let h=!1;return{layers:i,listener:l,delegates:{mousemove:g=>{let v=i.filter(T=>this.getLayer(T)),C=v.length!==0?this.queryRenderedFeatures(g.point,{layers:v}):[];C.length?h||(h=!0,l.call(this,new ln(m,this,g.originalEvent,{features:C}))):h=!1},mouseout:()=>{h=!1}}}}if(m==="mouseleave"||m==="mouseout"){let h=!1;return{layers:i,listener:l,delegates:{mousemove:v=>{let C=i.filter(T=>this.getLayer(T));(C.length!==0?this.queryRenderedFeatures(v.point,{layers:C}):[]).length?h=!0:h&&(h=!1,l.call(this,new ln(m,this,v.originalEvent)))},mouseout:v=>{h&&(h=!1,l.call(this,new ln(m,this,v.originalEvent)))}}}}{let h=p=>{let g=i.filter(C=>this.getLayer(C)),v=g.length!==0?this.queryRenderedFeatures(p.point,{layers:g}):[];v.length&&(p.features=v,l.call(this,p),delete p.features)};return{layers:i,listener:l,delegates:{[m]:h}}}}_saveDelegatedListener(m,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(i)}_removeDelegatedListener(m,i,l){if(!this._delegatedListeners||!this._delegatedListeners[m])return;let h=this._delegatedListeners[m];for(let p=0;p<h.length;p++){let g=h[p];if(g.listener===l&&g.layers.length===i.length&&g.layers.every(v=>i.includes(v))){for(let v in g.delegates)this.off(v,g.delegates[v]);return void h.splice(p,1)}}}on(m,i,l){if(l===void 0)return super.on(m,i);let h=typeof i=="string"?[i]:i,p=this._createDelegatedListener(m,h,l);this._saveDelegatedListener(m,p);for(let g in p.delegates)this.on(g,p.delegates[g]);return{unsubscribe:()=>{this._removeDelegatedListener(m,h,l)}}}once(m,i,l){if(l===void 0)return super.once(m,i);let h=typeof i=="string"?[i]:i,p=this._createDelegatedListener(m,h,l);for(let g in p.delegates){let v=p.delegates[g];p.delegates[g]=(...C)=>{this._removeDelegatedListener(m,h,l),v(...C)}}this._saveDelegatedListener(m,p);for(let g in p.delegates)this.once(g,p.delegates[g]);return this}off(m,i,l){return l===void 0?super.off(m,i):(this._removeDelegatedListener(m,typeof i=="string"?[i]:i,l),this)}queryRenderedFeatures(m,i){if(!this.style)return[];let l,h=m instanceof s.P||Array.isArray(m),p=h?m:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(h?{}:m)||{},p instanceof s.P||typeof p[0]=="number")l=[s.P.convert(p)];else{let g=s.P.convert(p[0]),v=s.P.convert(p[1]);l=[g,new s.P(v.x,g.y),v,new s.P(g.x,v.y),g]}return this.style.queryRenderedFeatures(l,i,this.transform)}querySourceFeatures(m,i){return this.style.querySourceFeatures(m,i)}setStyle(m,i){return(i=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(m,i))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){let i=this._locale[m];if(i==null)throw new Error(`Missing UI string '${m}'`);return i}_updateStyle(m,i){var l,h;if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(m,i));let p=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!m)),m?(this.style=new _u(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m,i,p):this.style.loadJSON(m,i,p),this):((h=(l=this.style)===null||l===void 0?void 0:l.projection)===null||h===void 0||h.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new _u(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,i){if(typeof m=="string"){let l=this._requestManager.transformRequest(m,"Style");s.j(l,new AbortController).then(h=>{this._updateDiff(h.data,i)}).catch(h=>{h&&this.fire(new s.k(h))})}else typeof m=="object"&&this._updateDiff(m,i)}_updateDiff(m,i){try{this.style.setState(m,i)&&this._update(!0)}catch(l){s.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(m,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(m,i){return this._lazyInitEmptyStyle(),this.style.addSource(m,i),this._update(!0)}isSourceLoaded(m){let i=this.style&&this.style.sourceCaches[m];if(i!==void 0)return i.loaded();this.fire(new s.k(new Error(`There is no source with ID '${m}'`)))}setTerrain(m){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),m){let i=this.style.sourceCaches[m.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${m.source}`);this.terrain===null&&i.reload();for(let l in this.style._layers){let h=this.style._layers[l];h.type==="hillshade"&&h.source===m.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Km(this.painter,i,m),this.painter.renderToTexture=new Yd(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=l=>{var h;l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==m.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((h=l.source)===null||h===void 0?void 0:h.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:m})),this}getTerrain(){var m,i;return(i=(m=this.terrain)===null||m===void 0?void 0:m.options)!==null&&i!==void 0?i:null}areTilesLoaded(){let m=this.style&&this.style.sourceCaches;for(let i in m){let l=m[i]._tiles;for(let h in l){let p=l[h];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}setSourceTileLodParams(m,i,l){if(l){let h=this.getSource(l);if(!h)throw new Error(`There is no source with ID "${l}", cannot set LOD parameters`);h.calculateTileZoom=ye(Math.max(1,m),Math.max(1,i))}else for(let h in this.style.sourceCaches)this.style.sourceCaches[h].getSource().calculateTileZoom=ye(Math.max(1,m),Math.max(1,i));return this._update(!0),this}refreshTiles(m,i){let l=this.style.sourceCaches[m];if(!l)throw new Error(`There is no source cache with ID "${m}", cannot refresh tile`);i===void 0?l.reload():l.refreshTiles(i.map(h=>new s.a1(h.z,h.x,h.y)))}addImage(m,i,l={}){let{pixelRatio:h=1,sdf:p=!1,stretchX:g,stretchY:v,content:C,textFitWidth:T,textFitHeight:P}=l;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||s.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:O,height:F,data:N}=i,X=i;return this.style.addImage(m,{data:new s.R({width:O,height:F},new Uint8Array(N)),pixelRatio:h,stretchX:g,stretchY:v,content:C,textFitWidth:T,textFitHeight:P,sdf:p,version:0,userImage:X}),X.onAdd&&X.onAdd(this,m),this}}{let{width:O,height:F,data:N}=I.getImageData(i);this.style.addImage(m,{data:new s.R({width:O,height:F},N),pixelRatio:h,stretchX:g,stretchY:v,content:C,textFitWidth:T,textFitHeight:P,sdf:p,version:0})}}updateImage(m,i){let l=this.style.getImage(m);if(!l)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let h=i instanceof HTMLImageElement||s.b(i)?I.getImageData(i):i,{width:p,height:g,data:v}=h;if(p===void 0||g===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==l.data.width||g!==l.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let C=!(i instanceof HTMLImageElement||s.b(i));return l.data.replace(v,C),this.style.updateImage(m,l),this}getImage(m){return this.style.getImage(m)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m){return ne.getImage(this._requestManager.transformRequest(m,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(m,i){return this._lazyInitEmptyStyle(),this.style.addLayer(m,i),this._update(!0)}moveLayer(m,i){return this.style.moveLayer(m,i),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(m,i,l){return this.style.setLayerZoomRange(m,i,l),this._update(!0)}setFilter(m,i,l={}){return this.style.setFilter(m,i,l),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,i,l,h={}){return this.style.setPaintProperty(m,i,l,h),this._update(!0)}getPaintProperty(m,i){return this.style.getPaintProperty(m,i)}setLayoutProperty(m,i,l,h={}){return this.style.setLayoutProperty(m,i,l,h),this._update(!0)}getLayoutProperty(m,i){return this.style.getLayoutProperty(m,i)}setGlyphs(m,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(m,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(m,i,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(m,i,l,h=>{h||this._update(!0)}),this}removeSprite(m){return this._lazyInitEmptyStyle(),this.style.removeSprite(m),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(m,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(m,i,l=>{l||this._update(!0)}),this}setLight(m,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(m,i={}){return this._lazyInitEmptyStyle(),this.style.setSky(m,i),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(m,i){return this.style.setFeatureState(m,i),this._update()}removeFeatureState(m,i){return this.style.removeFeatureState(m,i),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,i=0;return this._container&&(m=this._container.clientWidth||400,i=this._container.clientHeight||300),[m,i]}_setupContainer(){let m=this._container;m.classList.add("maplibregl-map");let i=this._canvasContainer=A.create("div","maplibregl-canvas-container",m);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=A.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let l=this._containerDimensions(),h=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],h);let p=this._controlContainer=A.create("div","maplibregl-control-container",m),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{g[v]=A.create("div",`maplibregl-ctrl-${v} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,i,l){this._canvas.width=Math.floor(l*m),this._canvas.height=Math.floor(l*i),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${i}px`}_setupPainter(){let m=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),i=null;this._canvas.addEventListener("webglcontextcreationerror",h=>{i={requestedAttributes:m},h&&(i.statusMessage=h.statusMessage,i.type=h.type)},{once:!0});let l=null;if(l=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,m):this._canvas.getContext("webgl2",m)||this._canvas.getContext("webgl",m),!l){let h="Failed to initialize WebGL";throw i?(i.message=h,new Error(JSON.stringify(i))):new Error(h)}this.painter=new bp(l,this.transform),R.testSupport(l)}migrateProjection(m,i){super.migrateProjection(m,i),this.painter.transform=m,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){var i,l,h,p,g;let v=this._idleTriggered?this._fadeDuration:0,C=((i=this.style.projection)===null||i===void 0?void 0:i.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let T=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let F=this.transform.zoom,N=I.now();this.style.zoomHistory.update(F,N);let X=new s.C(F,{now:N,fadeDuration:v,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),J=X.crossFadingFactor();J===1&&J===this._crossFadingFactor||(T=!0,this._crossFadingFactor=J),this.style.update(X)}let P=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0!==C;(h=this.style.projection)===null||h===void 0||h.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((p=this.style.projection)===null||p===void 0?void 0:p.transitionState,(g=this.style.projection)===null||g===void 0?void 0:g.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||P)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,v,this._crossSourceCollisions,P),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:v,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cn.mark(s.co.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||T)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let O=this._sourcesDirty||this._styleDirty||this._placementDirty;return O||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,s.cn.mark(s.co.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var m;this._hash&&this._hash.remove();for(let l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ne.removeThrottleControl(this._imageQueueHandle),(m=this._resizeObserver)===null||m===void 0||m.disconnect();let i=this.painter.context.gl.getExtension("WEBGL_lose_context");i?.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),A.remove(this._canvasContainer),A.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cn.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,I.frame(this._frameRequest,m=>{s.cn.frame(m),this._frameRequest=null;try{this._render(m)}catch(i){if(!s.cp(i)&&!function(l){return l.message===wc}(i))throw i}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get version(){return ei}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(m){return this._lazyInitEmptyStyle(),this.style.setProjection(m),this._update(!0)}},a.MapMouseEvent=ln,a.MapTouchEvent=Tc,a.MapWheelEvent=wp,a.Marker=Bl,a.NavigationControl=class{constructor(m){this._updateZoomButtons=()=>{let i=this._map.getZoom(),l=i===this._map.getMaxZoom(),h=i===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(i,l)=>{let h=this._map._getUIString(`NavigationControl.${l}`);i.title=h,i.setAttribute("aria-label",h)},this.options=s.e({},kp,m),this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),A.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),A.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=A.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Pp(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,i){let l=A.create("button",m,this._container);return l.type="button",l.addEventListener("click",i),l}},a.Popup=class extends s.E{constructor(m){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=A.create("div","maplibregl-popup",this._map.getContainer()),this._tip=A.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let v of this.options.className.split(" "))this._container.classList.add(v);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Dp(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!i)return;let l=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationToScreenPoint(this._lngLat));let h=this.options.anchor,p=Oc(this.options.offset);if(!h){let v=this._container.offsetWidth,C=this._container.offsetHeight,T;T=l.y+p.bottom.y<C?["top"]:l.y>this._map.transform.height-C?["bottom"]:[],l.x<v/2?T.push("left"):l.x>this._map.transform.width-v/2&&T.push("right"),h=T.length===0?"bottom":T.join("-")}let g=l.add(p[h]);this.options.subpixelPositioning||(g=g.round()),A.setTransform(this._container,`${os[h]} translate(${g.x}px,${g.y}px)`),Qm(this._container,h,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Rp),m)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=s.Q.convert(m),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){let i=document.createDocumentFragment(),l=document.createElement("body"),h;for(l.innerHTML=m;h=l.firstChild,h;)i.appendChild(h);return this.setDOMContent(i)}getMaxWidth(){var m;return(m=this._container)===null||m===void 0?void 0:m.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){return this._container&&this._container.classList.add(m),this}removeClassName(m){return this._container&&this._container.classList.remove(m),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}setSubpixelPositioning(m){this.options.subpixelPositioning=m}_createCloseButton(){this.options.closeButton&&(this._closeButton=A.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let m=this._container.querySelector(Op);m&&m.focus()}},a.RasterDEMTileSource=Tl,a.RasterTileSource=eo,a.ScaleControl=class{constructor(m){this._onMove=()=>{Lu(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Lu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ou),m)}getDefaultPosition(){return"bottom-left"}onAdd(m){return this._map=m,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=Fi,a.Style=_u,a.TerrainControl=class{constructor(m){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=m}onAdd(m){return this._map=m,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=A.create("button","maplibregl-ctrl-terrain",this._container),A.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){A.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=Gd,a.TwoFingersTouchRotateHandler=Dt,a.TwoFingersTouchZoomHandler=Pc,a.TwoFingersTouchZoomRotateHandler=Ip,a.VectorTileSource=Vs,a.VideoSource=to,a.addSourceType=(m,i)=>s._(void 0,void 0,void 0,function*(){if(Rn(m))throw new Error(`A source type called "${m}" already exists.`);((l,h)=>{ya[l]=h})(m,i)}),a.clearPrewarmedResources=function(){let m=Ie;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(Pt),Ie=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.createTileMesh=Wt,a.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return Li().getRTLTextPluginStatus()},a.getVersion=function(){return Lp},a.getWorkerCount=function(){return Bt.workerCount},a.getWorkerUrl=function(){return s.a.WORKER_URL},a.importScriptInWorkers=function(m){return Ur().broadcast("IS",m)},a.prewarm=function(){kt().acquire(Pt)},a.setMaxParallelImageRequests=function(m){s.a.MAX_PARALLEL_IMAGE_REQUESTS=m},a.setRTLTextPlugin=function(m,i){return Li().setRTLTextPlugin(m,i)},a.setWorkerCount=function(m){Bt.workerCount=m},a.setWorkerUrl=function(m){s.a.WORKER_URL=m}});var o=r;return o})});import lL from"./angular-app-manifest.mjs";var bf=class{},Wg=class{},Ha=class r{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let o=e.indexOf(":");if(o>0){let a=e.slice(0,o),s=e.slice(o+1).trim();this.addHeaderEntry(a,s)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,o)=>{this.addHeaderEntry(o,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,o])=>{this.setHeaderEntries(e,o)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof r?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new r;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof r?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let o=t.value;if(typeof o=="string"&&(o=[o]),o.length===0)return;this.maybeSetNormalizedName(t.name,e);let a=(t.op==="a"?this.headers.get(e):void 0)||[];a.push(...o),this.headers.set(e,a);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let _=this.headers.get(e);if(!_)return;_=_.filter(w=>s.indexOf(w)===-1),_.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,_)}break}}addHeaderEntry(t,e){let o=t.toLowerCase();this.maybeSetNormalizedName(t,o),this.headers.has(o)?this.headers.get(o).push(e):this.headers.set(o,[e])}setHeaderEntries(t,e){let o=(Array.isArray(e)?e:[e]).map(s=>s.toString()),a=t.toLowerCase();this.headers.set(a,o),this.maybeSetNormalizedName(t,a)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var $y=class{encodeKey(t){return zE(t)}encodeValue(t){return zE(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function UD(r,t){let e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(a=>{let s=a.indexOf("="),[_,w]=s==-1?[t.decodeKey(a),""]:[t.decodeKey(a.slice(0,s)),t.decodeValue(a.slice(s+1))],E=e.get(_)||[];E.push(w),e.set(_,E)}),e}var jD=/%(\d[a-f0-9])/gi,qD={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function zE(r){return encodeURIComponent(r).replace(jD,(t,e)=>qD[e]??t)}function Gg(r){return`${r}`}var xl=class r{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new $y,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=UD(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let o=t.fromObject[e],a=Array.isArray(o)?o.map(Gg):[Gg(o)];this.map.set(e,a)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(o=>{let a=t[o];Array.isArray(a)?a.forEach(s=>{e.push({param:o,value:s,op:"a"})}):e.push({param:o,value:a,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(o=>e+"="+this.encoder.encodeValue(o)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new r({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Gg(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let o=this.map.get(t.param)||[],a=o.indexOf(Gg(t.value));a!==-1&&o.splice(a,1),o.length>0?this.map.set(t.param,o):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Gy=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function HD(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function BE(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function VE(r){return typeof Blob<"u"&&r instanceof Blob}function UE(r){return typeof FormData<"u"&&r instanceof FormData}function $D(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}var _f=class r{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,o,a){this.url=e,this.method=t.toUpperCase();let s;if(HD(this.method)||a?(this.body=o!==void 0?o:null,s=a):s=o,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Ha,this.context??=new Gy,!this.params)this.params=new xl,this.urlWithParams=e;else{let _=this.params.toString();if(_.length===0)this.urlWithParams=e;else{let w=e.indexOf("?"),E=w===-1?"?":w<e.length-1?"&":"";this.urlWithParams=e+E+_}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||BE(this.body)||VE(this.body)||UE(this.body)||$D(this.body)?this.body:this.body instanceof xl?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||UE(this.body)?null:VE(this.body)?this.body.type||null:BE(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof xl?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,o=t.url||this.url,a=t.responseType||this.responseType,s=t.transferCache??this.transferCache,_=t.body!==void 0?t.body:this.body,w=t.withCredentials??this.withCredentials,E=t.reportProgress??this.reportProgress,M=t.headers||this.headers,I=t.params||this.params,A=t.context??this.context;return t.setHeaders!==void 0&&(M=Object.keys(t.setHeaders).reduce((R,$)=>R.set($,t.setHeaders[$]),M)),t.setParams&&(I=Object.keys(t.setParams).reduce((R,$)=>R.set($,t.setParams[$]),I)),new r(e,o,_,{params:I,headers:M,context:A,reportProgress:E,responseType:a,withCredentials:w,transferCache:s})}},Kc=function(r){return r[r.Sent=0]="Sent",r[r.UploadProgress=1]="UploadProgress",r[r.ResponseHeader=2]="ResponseHeader",r[r.DownloadProgress=3]="DownloadProgress",r[r.Response=4]="Response",r[r.User=5]="User",r}(Kc||{}),yf=class{headers;status;statusText;url;ok;type;constructor(t,e=200,o="OK"){this.headers=t.headers||new Ha,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||o,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Zg=class r extends yf{constructor(t={}){super(t)}type=Kc.ResponseHeader;clone(t={}){return new r({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},vf=class r extends yf{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Kc.Response;clone(t={}){return new r({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Yc=class extends yf{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},GE=200,GD=204;function Hy(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials,transferCache:r.transferCache}}var $a=(()=>{class r{handler;constructor(e){this.handler=e}request(e,o,a={}){let s;if(e instanceof _f)s=e;else{let E;a.headers instanceof Ha?E=a.headers:E=new Ha(a.headers);let M;a.params&&(a.params instanceof xl?M=a.params:M=new xl({fromObject:a.params})),s=new _f(e,o,a.body!==void 0?a.body:null,{headers:E,context:a.context,params:M,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials,transferCache:a.transferCache})}let _=ti(s).pipe(qc(E=>this.handler.handle(E)));if(e instanceof _f||a.observe==="events")return _;let w=_.pipe(sn(E=>E instanceof vf));switch(a.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return w.pipe(gi(E=>{if(E.body!==null&&!(E.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return E.body}));case"blob":return w.pipe(gi(E=>{if(E.body!==null&&!(E.body instanceof Blob))throw new Error("Response is not a Blob.");return E.body}));case"text":return w.pipe(gi(E=>{if(E.body!==null&&typeof E.body!="string")throw new Error("Response is not a string.");return E.body}));case"json":default:return w.pipe(gi(E=>E.body))}case"response":return w;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(e,o={}){return this.request("DELETE",e,o)}get(e,o={}){return this.request("GET",e,o)}head(e,o={}){return this.request("HEAD",e,o)}jsonp(e,o){return this.request("JSONP",e,{params:new xl().append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,o={}){return this.request("OPTIONS",e,o)}patch(e,o,a={}){return this.request("PATCH",e,Hy(a,o))}post(e,o,a={}){return this.request("POST",e,Hy(a,o))}put(e,o,a={}){return this.request("PUT",e,Hy(a,o))}static \u0275fac=function(o){return new(o||r)(li(bf))};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})(),WD=/^\)\]\}',?\n/,ZD="X-Request-URL";function jE(r){if(r.url)return r.url;let t=ZD.toLocaleLowerCase();return r.headers.get(t)}var XD=(()=>{class r{fetchImpl=Oe(Wy,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e));ngZone=Oe(Xi);handle(e){return new $l(o=>{let a=new AbortController;return this.doRequest(e,a.signal,o).then(Zy,s=>o.error(new Yc({error:s}))),()=>a.abort()})}doRequest(e,o,a){return vr(this,null,function*(){let s=this.createRequestInit(e),_;try{let $=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,ft({signal:o},s)));YD($),a.next({type:Kc.Sent}),_=yield $}catch($){a.error(new Yc({error:$,status:$.status??0,statusText:$.statusText,url:e.urlWithParams,headers:$.headers}));return}let w=new Ha(_.headers),E=_.statusText,M=jE(_)??e.urlWithParams,I=_.status,A=null;if(e.reportProgress&&a.next(new Zg({headers:w,status:I,statusText:E,url:M})),_.body){let $=_.headers.get("content-length"),W=[],G=_.body.getReader(),pe=0,le,ne,re=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>vr(this,null,function*(){for(;;){let{done:oe,value:Ve}=yield G.read();if(oe)break;if(W.push(Ve),pe+=Ve.length,e.reportProgress){ne=e.responseType==="text"?(ne??"")+(le??=new TextDecoder).decode(Ve,{stream:!0}):void 0;let tt=()=>a.next({type:Kc.DownloadProgress,total:$?+$:void 0,loaded:pe,partialText:ne});re?re.run(tt):tt()}}}));let ue=this.concatChunks(W,pe);try{let oe=_.headers.get("Content-Type")??"";A=this.parseBody(e,ue,oe)}catch(oe){a.error(new Yc({error:oe,headers:new Ha(_.headers),status:_.status,statusText:_.statusText,url:jE(_)??e.urlWithParams}));return}}I===0&&(I=A?GE:0),I>=200&&I<300?(a.next(new vf({body:A,headers:w,status:I,statusText:E,url:M})),a.complete()):a.error(new Yc({error:A,headers:w,status:I,statusText:E,url:M}))})}parseBody(e,o,a){switch(e.responseType){case"json":let s=new TextDecoder().decode(o).replace(WD,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(o);case"blob":return new Blob([o],{type:a});case"arraybuffer":return o.buffer}}createRequestInit(e){let o={},a=e.withCredentials?"include":void 0;if(e.headers.forEach((s,_)=>o[s]=_.join(",")),e.headers.has("Accept")||(o.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let s=e.detectContentTypeHeader();s!==null&&(o["Content-Type"]=s)}return{body:e.serializeBody(),method:e.method,headers:o,credentials:a}}concatChunks(e,o){let a=new Uint8Array(o),s=0;for(let _ of e)a.set(_,s),s+=_.length;return a}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})(),Wy=class{};function Zy(){}function YD(r){r.then(Zy,Zy)}function WE(r,t){return t(r)}function KD(r,t){return(e,o)=>t.intercept(e,{handle:a=>r(a,o)})}function QD(r,t,e){return(o,a)=>cs(e,()=>t(o,s=>r(s,a)))}var JD=new Ft(""),Xy=new Ft(""),Yy=new Ft(""),ZE=new Ft("",{providedIn:"root",factory:()=>!0});function eR(){let r=null;return(t,e)=>{r===null&&(r=(Oe(JD,{optional:!0})??[]).reduceRight(KD,WE));let o=Oe(lf);if(Oe(ZE)){let s=o.add();return r(t,e).pipe(Gl(()=>o.remove(s)))}else return r(t,e)}}var qE=(()=>{class r extends bf{backend;injector;chain=null;pendingTasks=Oe(lf);contributeToStability=Oe(ZE);constructor(e,o){super(),this.backend=e,this.injector=o}handle(e){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(Xy),...this.injector.get(Yy,[])]));this.chain=o.reduceRight((a,s)=>QD(a,s,this.injector),WE)}if(this.contributeToStability){let o=this.pendingTasks.add();return this.chain(e,a=>this.backend.handle(a)).pipe(Gl(()=>this.pendingTasks.remove(o)))}else return this.chain(e,o=>this.backend.handle(o))}static \u0275fac=function(o){return new(o||r)(li(Wg),li(Ua))};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})();var tR=/^\)\]\}',?\n/;function iR(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}var HE=(()=>{class r{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new xr(-2800,!1);let o=this.xhrFactory;return(o.\u0275loadImpl?ho(o.\u0275loadImpl()):ti(null)).pipe(po(()=>new $l(s=>{let _=o.build();if(_.open(e.method,e.urlWithParams),e.withCredentials&&(_.withCredentials=!0),e.headers.forEach((G,pe)=>_.setRequestHeader(G,pe.join(","))),e.headers.has("Accept")||_.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let G=e.detectContentTypeHeader();G!==null&&_.setRequestHeader("Content-Type",G)}if(e.responseType){let G=e.responseType.toLowerCase();_.responseType=G!=="json"?G:"text"}let w=e.serializeBody(),E=null,M=()=>{if(E!==null)return E;let G=_.statusText||"OK",pe=new Ha(_.getAllResponseHeaders()),le=iR(_)||e.url;return E=new Zg({headers:pe,status:_.status,statusText:G,url:le}),E},I=()=>{let{headers:G,status:pe,statusText:le,url:ne}=M(),re=null;pe!==GD&&(re=typeof _.response>"u"?_.responseText:_.response),pe===0&&(pe=re?GE:0);let ue=pe>=200&&pe<300;if(e.responseType==="json"&&typeof re=="string"){let oe=re;re=re.replace(tR,"");try{re=re!==""?JSON.parse(re):null}catch(Ve){re=oe,ue&&(ue=!1,re={error:Ve,text:re})}}ue?(s.next(new vf({body:re,headers:G,status:pe,statusText:le,url:ne||void 0})),s.complete()):s.error(new Yc({error:re,headers:G,status:pe,statusText:le,url:ne||void 0}))},A=G=>{let{url:pe}=M(),le=new Yc({error:G,status:_.status||0,statusText:_.statusText||"Unknown Error",url:pe||void 0});s.error(le)},R=!1,$=G=>{R||(s.next(M()),R=!0);let pe={type:Kc.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(pe.total=G.total),e.responseType==="text"&&_.responseText&&(pe.partialText=_.responseText),s.next(pe)},W=G=>{let pe={type:Kc.UploadProgress,loaded:G.loaded};G.lengthComputable&&(pe.total=G.total),s.next(pe)};return _.addEventListener("load",I),_.addEventListener("error",A),_.addEventListener("timeout",A),_.addEventListener("abort",A),e.reportProgress&&(_.addEventListener("progress",$),w!==null&&_.upload&&_.upload.addEventListener("progress",W)),_.send(w),s.next({type:Kc.Sent}),()=>{_.removeEventListener("error",A),_.removeEventListener("abort",A),_.removeEventListener("load",I),_.removeEventListener("timeout",A),e.reportProgress&&(_.removeEventListener("progress",$),w!==null&&_.upload&&_.upload.removeEventListener("progress",W)),_.readyState!==_.DONE&&_.abort()}})))}static \u0275fac=function(o){return new(o||r)(li(bh))};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})(),XE=new Ft(""),rR="XSRF-TOKEN",nR=new Ft("",{providedIn:"root",factory:()=>rR}),oR="X-XSRF-TOKEN",sR=new Ft("",{providedIn:"root",factory:()=>oR}),Xg=class{},aR=(()=>{class r{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,o,a){this.doc=e,this.platform=o,this.cookieName=a}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fg(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(o){return new(o||r)(li(Ii),li(ja),li(nR))};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})();function lR(r,t){let e=r.url.toLowerCase();if(!Oe(XE)||r.method==="GET"||r.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(r);let o=Oe(Xg).getToken(),a=Oe(sR);return o!=null&&!r.headers.has(a)&&(r=r.clone({headers:r.headers.set(a,o)})),t(r)}var YE=function(r){return r[r.Interceptors=0]="Interceptors",r[r.LegacyInterceptors=1]="LegacyInterceptors",r[r.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",r[r.NoXsrfProtection=3]="NoXsrfProtection",r[r.JsonpSupport=4]="JsonpSupport",r[r.RequestsMadeViaParent=5]="RequestsMadeViaParent",r[r.Fetch=6]="Fetch",r}(YE||{});function cR(r,t){return{\u0275kind:r,\u0275providers:t}}function Ky(...r){let t=[$a,HE,qE,{provide:bf,useExisting:qE},{provide:Wg,useFactory:()=>Oe(XD,{optional:!0})??Oe(HE)},{provide:Xy,useValue:lR,multi:!0},{provide:XE,useValue:!0},{provide:Xg,useClass:aR}];for(let e of r)t.push(...e.\u0275providers);return Va(t)}var $E=new Ft("");function uR(){return cR(YE.LegacyInterceptors,[{provide:$E,useFactory:eR},{provide:Xy,useExisting:$E,multi:!0}])}var Qc=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({providers:[Ky(uR())]})}return r})();var Jy=class extends wE{supportsDOMEvents=!0},vh=class r extends Jy{static makeCurrent(){Ng(new r)}onAndCancel(t,e,o){return t.addEventListener(e,o),()=>{t.removeEventListener(e,o)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=hR();return e==null?null:pR(e)}resetBaseElement(){Cf=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Fg(document.cookie,t)}},Cf=null;function hR(){return Cf=Cf||document.querySelector("base"),Cf?Cf.getAttribute("href"):null}function pR(r){return new URL(r,document.baseURI).pathname}var fR=(()=>{class r{build(){return new XMLHttpRequest}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})(),Ef=new Ft(""),tS=(()=>{class r{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,o){this._zone=o,e.forEach(a=>{a.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,o,a){return this._findPluginFor(o).addEventListener(e,o,a)}getZone(){return this._zone}_findPluginFor(e){let o=this._eventNameToPlugin.get(e);if(o)return o;if(o=this._plugins.find(s=>s.supports(e)),!o)throw new xr(5101,!1);return this._eventNameToPlugin.set(e,o),o}static \u0275fac=function(o){return new(o||r)(li(Ef),li(Xi))};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})(),xh=class{_doc;constructor(t){this._doc=t}manager},ev="ng-app-id";function KE(r){for(let t of r)t.remove()}function QE(r,t){let e=t.createElement("style");return e.textContent=r,e}function mR(r,t,e){let o=r.head?.querySelectorAll(`style[${ev}="${t}"]`);if(o)for(let a of o)a.textContent&&(a.removeAttribute(ev),e.set(a.textContent,{usage:0,elements:[a]}))}function tv(r,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",r),e}var iS=(()=>{class r{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,o,a,s={}){this.doc=e,this.appId=o,this.nonce=a,this.isServer=Ug(s),mR(e,o,this.inline),this.hosts.add(e.head)}addStyles(e,o){for(let a of e)this.addUsage(a,this.inline,QE);o?.forEach(a=>this.addUsage(a,this.external,tv))}removeStyles(e,o){for(let a of e)this.removeUsage(a,this.inline);o?.forEach(a=>this.removeUsage(a,this.external))}addUsage(e,o,a){let s=o.get(e);s?s.usage++:o.set(e,{usage:1,elements:[...this.hosts].map(_=>this.addElement(_,a(e,this.doc)))})}removeUsage(e,o){let a=o.get(e);a&&(a.usage--,a.usage<=0&&(KE(a.elements),o.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])KE(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[o,{elements:a}]of this.inline)a.push(this.addElement(e,QE(o,this.doc)));for(let[o,{elements:a}]of this.external)a.push(this.addElement(e,tv(o,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,o){return this.nonce&&o.setAttribute("nonce",this.nonce),this.isServer&&o.setAttribute(ev,this.appId),e.appendChild(o)}static \u0275fac=function(o){return new(o||r)(li(Ii),li($c),li(Yu,8),li(ja))};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})(),Qy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},rv=/%COMP%/g,rS="%COMP%",gR=`_nghost-${rS}`,_R=`_ngcontent-${rS}`,bR=!0,yR=new Ft("",{providedIn:"root",factory:()=>bR});function vR(r){return _R.replace(rv,r)}function xR(r){return gR.replace(rv,r)}function nS(r,t){return t.map(e=>e.replace(rv,r))}var wh=(()=>{class r{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,o,a,s,_,w,E,M=null){this.eventManager=e,this.sharedStylesHost=o,this.appId=a,this.removeStylesOnCompDestroy=s,this.doc=_,this.platformId=w,this.ngZone=E,this.nonce=M,this.platformIsServer=Ug(w),this.defaultRenderer=new Sf(e,_,E,this.platformIsServer)}createRenderer(e,o){if(!e||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===cf.ShadowDom&&(o=si(ft({},o),{encapsulation:cf.Emulated}));let a=this.getOrCreateRenderer(e,o);return a instanceof Yg?a.applyToHost(e):a instanceof Tf&&a.applyStyles(),a}getOrCreateRenderer(e,o){let a=this.rendererByCompId,s=a.get(o.id);if(!s){let _=this.doc,w=this.ngZone,E=this.eventManager,M=this.sharedStylesHost,I=this.removeStylesOnCompDestroy,A=this.platformIsServer;switch(o.encapsulation){case cf.Emulated:s=new Yg(E,M,o,this.appId,I,_,w,A);break;case cf.ShadowDom:return new iv(E,M,e,o,_,w,this.nonce,A);default:s=new Tf(E,M,o,I,_,w,A);break}a.set(o.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(o){return new(o||r)(li(tS),li(iS),li($c),li(yR),li(Ii),li(ja),li(Xi),li(Yu))};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})(),Sf=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,o,a){this.eventManager=t,this.doc=e,this.ngZone=o,this.platformIsServer=a}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Qy[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(JE(t)?t.content:t).appendChild(e)}insertBefore(t,e,o){t&&(JE(t)?t.content:t).insertBefore(e,o)}removeChild(t,e){e.remove()}selectRootElement(t,e){let o=typeof t=="string"?this.doc.querySelector(t):t;if(!o)throw new xr(-5104,!1);return e||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,o,a){if(a){e=a+":"+e;let s=Qy[a];s?t.setAttributeNS(s,e,o):t.setAttribute(e,o)}else t.setAttribute(e,o)}removeAttribute(t,e,o){if(o){let a=Qy[o];a?t.removeAttributeNS(a,e):t.removeAttribute(`${o}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,o,a){a&(uf.DashCase|uf.Important)?t.style.setProperty(e,o,a&uf.Important?"important":""):t.style[e]=o}removeStyle(t,e,o){o&uf.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,o){t!=null&&(t[e]=o)}setValue(t,e){t.nodeValue=e}listen(t,e,o){if(typeof t=="string"&&(t=yl().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(o))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function JE(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var iv=class extends Sf{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,o,a,s,_,w,E){super(t,s,_,E),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let M=nS(a.id,a.styles);for(let A of M){let R=document.createElement("style");w&&R.setAttribute("nonce",w),R.textContent=A,this.shadowRoot.appendChild(R)}let I=a.getExternalStyles?.();if(I)for(let A of I){let R=tv(A,s);w&&R.setAttribute("nonce",w),this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,o){return super.insertBefore(this.nodeOrShadowRoot(t),e,o)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Tf=class extends Sf{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,o,a,s,_,w,E){super(t,s,_,w),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=a,this.styles=E?nS(E,o.styles):o.styles,this.styleUrls=o.getExternalStyles?.(E)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Yg=class extends Tf{contentAttr;hostAttr;constructor(t,e,o,a,s,_,w,E){let M=a+"-"+o.id;super(t,e,o,s,_,w,E,M),this.contentAttr=vR(M),this.hostAttr=xR(M)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let o=super.createElement(t,e);return super.setAttribute(o,this.contentAttr,""),o}},wR=(()=>{class r extends xh{constructor(e){super(e)}supports(e){return!0}addEventListener(e,o,a){return e.addEventListener(o,a,!1),()=>this.removeEventListener(e,o,a)}removeEventListener(e,o,a){return e.removeEventListener(o,a)}static \u0275fac=function(o){return new(o||r)(li(Ii))};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})(),eS=["alt","control","meta","shift"],CR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ER={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},SR=(()=>{class r extends xh{constructor(e){super(e)}supports(e){return r.parseEventName(e)!=null}addEventListener(e,o,a){let s=r.parseEventName(o),_=r.eventCallback(s.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>yl().onAndCancel(e,s.domEventName,_))}static parseEventName(e){let o=e.toLowerCase().split("."),a=o.shift();if(o.length===0||!(a==="keydown"||a==="keyup"))return null;let s=r._normalizeKey(o.pop()),_="",w=o.indexOf("code");if(w>-1&&(o.splice(w,1),_="code."),eS.forEach(M=>{let I=o.indexOf(M);I>-1&&(o.splice(I,1),_+=M+".")}),_+=s,o.length!=0||s.length===0)return null;let E={};return E.domEventName=a,E.fullKey=_,E}static matchEventFullKeyCode(e,o){let a=CR[e.key]||e.key,s="";return o.indexOf("code.")>-1&&(a=e.code,s="code."),a==null||!a?!1:(a=a.toLowerCase(),a===" "?a="space":a==="."&&(a="dot"),eS.forEach(_=>{if(_!==a){let w=ER[_];w(e)&&(s+=_+".")}}),s+=a,s===o)}static eventCallback(e,o,a){return s=>{r.matchEventFullKeyCode(s,e)&&a.runGuarded(()=>o(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(o){return new(o||r)(li(Ii))};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})();function oS(r,t){return fE(ft({rootComponent:r},TR(t)))}function TR(r){return{appProviders:[...PR,...r?.providers??[]],platformProviders:kR}}function MR(){vh.makeCurrent()}function IR(){return new Xu}function AR(){return Eg(document),document}var kR=[{provide:ja,useValue:IE},{provide:Sg,useValue:MR,multi:!0},{provide:Ii,useFactory:AR,deps:[]}];var PR=[{provide:ZC,useValue:"root"},{provide:Xu,useFactory:IR,deps:[]},{provide:Ef,useClass:wR,multi:!0,deps:[Ii,Xi,ja]},{provide:Ef,useClass:SR,multi:!0,deps:[Ii]},wh,iS,tS,{provide:mh,useExisting:wh},{provide:bh,useClass:fR,deps:[]},[]];var sS=(()=>{class r{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(o){return new(o||r)(li(Ii))};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var nv=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:function(o){let a=null;return o?a=new(o||r):a=li(DR),a},providedIn:"root"})}return r})(),DR=(()=>{class r extends nv{_doc;constructor(e){super(),this._doc=e}sanitize(e,o){if(o==null)return null;switch(e){case Is.NONE:return o;case Is.HTML:return fh(o,"HTML")?ph(o):sE(this._doc,String(o)).toString();case Is.STYLE:return fh(o,"Style")?ph(o):o;case Is.SCRIPT:if(fh(o,"Script"))return ph(o);throw new xr(5200,!1);case Is.URL:return fh(o,"URL")?ph(o):oE(String(o));case Is.RESOURCE_URL:if(fh(o,"ResourceURL"))return ph(o);throw new xr(5201,!1);default:throw new xr(5202,!1)}}bypassSecurityTrustHtml(e){return eE(e)}bypassSecurityTrustStyle(e){return tE(e)}bypassSecurityTrustScript(e){return iE(e)}bypassSecurityTrustUrl(e){return rE(e)}bypassSecurityTrustResourceUrl(e){return nE(e)}static \u0275fac=function(o){return new(o||r)(li(Ii))};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var OR=(()=>{class r extends $g{constructor(e,o,a){super(e,o,a)}ngOnDestroy(){this.flush()}static \u0275fac=function(o){return new(o||r)(li(Ii),li(gf),li(Hg))};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})();function LR(){return new LE}function NR(r,t,e){return new FE(r,t,e)}var lS=[{provide:Hg,useFactory:LR},{provide:$g,useClass:OR},{provide:mh,useFactory:NR,deps:[wh,$g,Xi]}],nU=[{provide:gf,useFactory:()=>new NE},{provide:Io,useValue:"BrowserAnimations"},...lS],FR=[{provide:gf,useClass:OE},{provide:Io,useValue:"NoopAnimations"},...lS];function cS(){return[...FR]}var zR=Object.getOwnPropertyNames,ci=(r,t)=>function(){return t||(0,r[zR(r)[0]])((t={exports:{}}).exports,t),t.exports},Mf=ci({"external/npm/node_modules/domino/lib/Event.js"(r,t){"use strict";t.exports=e,e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3;function e(o,a){if(this.type="",this.target=null,this.currentTarget=null,this.eventPhase=e.AT_TARGET,this.bubbles=!1,this.cancelable=!1,this.isTrusted=!1,this.defaultPrevented=!1,this.timeStamp=Date.now(),this._propagationStopped=!1,this._immediatePropagationStopped=!1,this._initialized=!0,this._dispatching=!1,o&&(this.type=o),a)for(var s in a)this[s]=a[s]}e.prototype=Object.create(Object.prototype,{constructor:{value:e},stopPropagation:{value:function(){this._propagationStopped=!0}},stopImmediatePropagation:{value:function(){this._propagationStopped=!0,this._immediatePropagationStopped=!0}},preventDefault:{value:function(){this.cancelable&&(this.defaultPrevented=!0)}},initEvent:{value:function(a,s,_){this._initialized=!0,!this._dispatching&&(this._propagationStopped=!1,this._immediatePropagationStopped=!1,this.defaultPrevented=!1,this.isTrusted=!1,this.target=null,this.type=a,this.bubbles=s,this.cancelable=_)}}})}}),pS=ci({"external/npm/node_modules/domino/lib/UIEvent.js"(r,t){"use strict";var e=Mf();t.exports=o;function o(){e.call(this),this.view=null,this.detail=0}o.prototype=Object.create(e.prototype,{constructor:{value:o},initUIEvent:{value:function(a,s,_,w,E){this.initEvent(a,s,_),this.view=w,this.detail=E}}})}}),fS=ci({"external/npm/node_modules/domino/lib/MouseEvent.js"(r,t){"use strict";var e=pS();t.exports=o;function o(){e.call(this),this.screenX=this.screenY=this.clientX=this.clientY=0,this.ctrlKey=this.altKey=this.shiftKey=this.metaKey=!1,this.button=0,this.buttons=1,this.relatedTarget=null}o.prototype=Object.create(e.prototype,{constructor:{value:o},initMouseEvent:{value:function(a,s,_,w,E,M,I,A,R,$,W,G,pe,le,ne){switch(this.initEvent(a,s,_,w,E),this.screenX=M,this.screenY=I,this.clientX=A,this.clientY=R,this.ctrlKey=$,this.altKey=W,this.shiftKey=G,this.metaKey=pe,this.button=le,le){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2;break;default:this.buttons=0;break}this.relatedTarget=ne}},getModifierState:{value:function(a){switch(a){case"Alt":return this.altKey;case"Control":return this.ctrlKey;case"Shift":return this.shiftKey;case"Meta":return this.metaKey;default:return!1}}}})}}),ov=ci({"external/npm/node_modules/domino/lib/DOMException.js"(r,t){"use strict";t.exports=ve;var e=1,o=3,a=4,s=5,_=7,w=8,E=9,M=11,I=12,A=13,R=14,$=15,W=17,G=18,pe=19,le=20,ne=21,re=22,ue=23,oe=24,Ve=25,tt=[null,"INDEX_SIZE_ERR",null,"HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR",null,"NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR",null,"TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR"],ct=[null,"INDEX_SIZE_ERR (1): the index is not in the allowed range",null,"HIERARCHY_REQUEST_ERR (3): the operation would yield an incorrect nodes model","WRONG_DOCUMENT_ERR (4): the object is in the wrong Document, a call to importNode is required","INVALID_CHARACTER_ERR (5): the string contains invalid characters",null,"NO_MODIFICATION_ALLOWED_ERR (7): the object can not be modified","NOT_FOUND_ERR (8): the object can not be found here","NOT_SUPPORTED_ERR (9): this operation is not supported","INUSE_ATTRIBUTE_ERR (10): setAttributeNode called on owned Attribute","INVALID_STATE_ERR (11): the object is in an invalid state","SYNTAX_ERR (12): the string did not match the expected pattern","INVALID_MODIFICATION_ERR (13): the object can not be modified in this way","NAMESPACE_ERR (14): the operation is not allowed by Namespaces in XML","INVALID_ACCESS_ERR (15): the object does not support the operation or argument",null,"TYPE_MISMATCH_ERR (17): the type of the object does not match the expected type","SECURITY_ERR (18): the operation is insecure","NETWORK_ERR (19): a network error occurred","ABORT_ERR (20): the user aborted an operation","URL_MISMATCH_ERR (21): the given URL does not match another URL","QUOTA_EXCEEDED_ERR (22): the quota has been exceeded","TIMEOUT_ERR (23): a timeout occurred","INVALID_NODE_TYPE_ERR (24): the supplied node is invalid or has an invalid ancestor for this operation","DATA_CLONE_ERR (25): the object can not be cloned."],Qe={INDEX_SIZE_ERR:e,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:o,WRONG_DOCUMENT_ERR:a,INVALID_CHARACTER_ERR:s,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:_,NOT_FOUND_ERR:w,NOT_SUPPORTED_ERR:E,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:M,SYNTAX_ERR:I,INVALID_MODIFICATION_ERR:A,NAMESPACE_ERR:R,INVALID_ACCESS_ERR:$,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:W,SECURITY_ERR:G,NETWORK_ERR:pe,ABORT_ERR:le,URL_MISMATCH_ERR:ne,QUOTA_EXCEEDED_ERR:re,TIMEOUT_ERR:ue,INVALID_NODE_TYPE_ERR:oe,DATA_CLONE_ERR:Ve};function ve(ae){Error.call(this),Error.captureStackTrace(this,this.constructor),this.code=ae,this.message=ct[ae],this.name=tt[ae]}ve.prototype.__proto__=Error.prototype;for(bt in Qe)Ge={value:Qe[bt]},Object.defineProperty(ve,bt,Ge),Object.defineProperty(ve.prototype,bt,Ge);var Ge,bt}}),sv=ci({"external/npm/node_modules/domino/lib/config.js"(r){r.isApiWritable=!globalThis.__domino_frozen__}}),fn=ci({"external/npm/node_modules/domino/lib/utils.js"(r){"use strict";var t=ov(),e=t,o=sv().isApiWritable;r.NAMESPACE={HTML:"http://www.w3.org/1999/xhtml",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink"},r.IndexSizeError=function(){throw new t(e.INDEX_SIZE_ERR)},r.HierarchyRequestError=function(){throw new t(e.HIERARCHY_REQUEST_ERR)},r.WrongDocumentError=function(){throw new t(e.WRONG_DOCUMENT_ERR)},r.InvalidCharacterError=function(){throw new t(e.INVALID_CHARACTER_ERR)},r.NoModificationAllowedError=function(){throw new t(e.NO_MODIFICATION_ALLOWED_ERR)},r.NotFoundError=function(){throw new t(e.NOT_FOUND_ERR)},r.NotSupportedError=function(){throw new t(e.NOT_SUPPORTED_ERR)},r.InvalidStateError=function(){throw new t(e.INVALID_STATE_ERR)},r.SyntaxError=function(){throw new t(e.SYNTAX_ERR)},r.InvalidModificationError=function(){throw new t(e.INVALID_MODIFICATION_ERR)},r.NamespaceError=function(){throw new t(e.NAMESPACE_ERR)},r.InvalidAccessError=function(){throw new t(e.INVALID_ACCESS_ERR)},r.TypeMismatchError=function(){throw new t(e.TYPE_MISMATCH_ERR)},r.SecurityError=function(){throw new t(e.SECURITY_ERR)},r.NetworkError=function(){throw new t(e.NETWORK_ERR)},r.AbortError=function(){throw new t(e.ABORT_ERR)},r.UrlMismatchError=function(){throw new t(e.URL_MISMATCH_ERR)},r.QuotaExceededError=function(){throw new t(e.QUOTA_EXCEEDED_ERR)},r.TimeoutError=function(){throw new t(e.TIMEOUT_ERR)},r.InvalidNodeTypeError=function(){throw new t(e.INVALID_NODE_TYPE_ERR)},r.DataCloneError=function(){throw new t(e.DATA_CLONE_ERR)},r.nyi=function(){throw new Error("NotYetImplemented")},r.shouldOverride=function(){throw new Error("Abstract function; should be overriding in subclass.")},r.assert=function(a,s){if(!a)throw new Error("Assertion failed: "+(s||"")+`
`+new Error().stack)},r.expose=function(a,s){for(var _ in a)Object.defineProperty(s.prototype,_,{value:a[_],writable:o})},r.merge=function(a,s){for(var _ in s)a[_]=s[_]},r.documentOrder=function(a,s){return 3-(a.compareDocumentPosition(s)&6)},r.toASCIILowerCase=function(a){return a.replace(/[A-Z]+/g,function(s){return s.toLowerCase()})},r.toASCIIUpperCase=function(a){return a.replace(/[a-z]+/g,function(s){return s.toUpperCase()})}}}),mS=ci({"external/npm/node_modules/domino/lib/EventTarget.js"(r,t){"use strict";var e=Mf(),o=fS(),a=fn();t.exports=s;function s(){}s.prototype={addEventListener:function(w,E,M){if(E){M===void 0&&(M=!1),this._listeners||(this._listeners=Object.create(null)),this._listeners[w]||(this._listeners[w]=[]);for(var I=this._listeners[w],A=0,R=I.length;A<R;A++){var $=I[A];if($.listener===E&&$.capture===M)return}var W={listener:E,capture:M};typeof E=="function"&&(W.f=E),I.push(W)}},removeEventListener:function(w,E,M){if(M===void 0&&(M=!1),this._listeners){var I=this._listeners[w];if(I)for(var A=0,R=I.length;A<R;A++){var $=I[A];if($.listener===E&&$.capture===M){I.length===1?this._listeners[w]=void 0:I.splice(A,1);return}}}},dispatchEvent:function(w){return this._dispatchEvent(w,!1)},_dispatchEvent:function(w,E){typeof E!="boolean"&&(E=!1);function M(G,pe){var le=pe.type,ne=pe.eventPhase;if(pe.currentTarget=G,ne!==e.CAPTURING_PHASE&&G._handlers&&G._handlers[le]){var re=G._handlers[le],ue;if(typeof re=="function")ue=re.call(pe.currentTarget,pe);else{var oe=re.handleEvent;if(typeof oe!="function")throw new TypeError("handleEvent property of event handler object isnot a function.");ue=oe.call(re,pe)}switch(pe.type){case"mouseover":ue===!0&&pe.preventDefault();break;case"beforeunload":default:ue===!1&&pe.preventDefault();break}}var Ve=G._listeners&&G._listeners[le];if(Ve){Ve=Ve.slice();for(var tt=0,ct=Ve.length;tt<ct;tt++){if(pe._immediatePropagationStopped)return;var Qe=Ve[tt];if(!(ne===e.CAPTURING_PHASE&&!Qe.capture||ne===e.BUBBLING_PHASE&&Qe.capture))if(Qe.f)Qe.f.call(pe.currentTarget,pe);else{var ve=Qe.listener.handleEvent;if(typeof ve!="function")throw new TypeError("handleEvent property of event listener object is not a function.");ve.call(Qe.listener,pe)}}}}(!w._initialized||w._dispatching)&&a.InvalidStateError(),w.isTrusted=E,w._dispatching=!0,w.target=this;for(var I=[],A=this.parentNode;A;A=A.parentNode)I.push(A);w.eventPhase=e.CAPTURING_PHASE;for(var R=I.length-1;R>=0&&(M(I[R],w),!w._propagationStopped);R--);if(w._propagationStopped||(w.eventPhase=e.AT_TARGET,M(this,w)),w.bubbles&&!w._propagationStopped){w.eventPhase=e.BUBBLING_PHASE;for(var $=0,W=I.length;$<W&&(M(I[$],w),!w._propagationStopped);$++);}if(w._dispatching=!1,w.eventPhase=e.AT_TARGET,w.currentTarget=null,E&&!w.defaultPrevented&&w instanceof o)switch(w.type){case"mousedown":this._armed={x:w.clientX,y:w.clientY,t:w.timeStamp};break;case"mouseout":case"mouseover":this._armed=null;break;case"mouseup":this._isClick(w)&&this._doClick(w),this._armed=null;break}return!w.defaultPrevented},_isClick:function(_){return this._armed!==null&&_.type==="mouseup"&&_.isTrusted&&_.button===0&&_.timeStamp-this._armed.t<1e3&&Math.abs(_.clientX-this._armed.x)<10&&Math.abs(_.clientY-this._armed.Y)<10},_doClick:function(_){if(!this._click_in_progress){this._click_in_progress=!0;for(var w=this;w&&!w._post_click_activation_steps;)w=w.parentNode;w&&w._pre_click_activation_steps&&w._pre_click_activation_steps();var E=this.ownerDocument.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,this.ownerDocument.defaultView,1,_.screenX,_.screenY,_.clientX,_.clientY,_.ctrlKey,_.altKey,_.shiftKey,_.metaKey,_.button,null);var M=this._dispatchEvent(E,!0);w&&(M?w._post_click_activation_steps&&w._post_click_activation_steps(E):w._cancelled_activation_steps&&w._cancelled_activation_steps())}},_setEventHandler:function(w,E){this._handlers||(this._handlers=Object.create(null)),this._handlers[w]=E},_getEventHandler:function(w){return this._handlers&&this._handlers[w]||null}}}}),gS=ci({"external/npm/node_modules/domino/lib/LinkedList.js"(r,t){"use strict";var e=fn(),o=t.exports={valid:function(a){return e.assert(a,"list falsy"),e.assert(a._previousSibling,"previous falsy"),e.assert(a._nextSibling,"next falsy"),!0},insertBefore:function(a,s){e.assert(o.valid(a)&&o.valid(s));var _=a,w=a._previousSibling,E=s,M=s._previousSibling;_._previousSibling=M,w._nextSibling=E,M._nextSibling=_,E._previousSibling=w,e.assert(o.valid(a)&&o.valid(s))},replace:function(a,s){e.assert(o.valid(a)&&(s===null||o.valid(s))),s!==null&&o.insertBefore(s,a),o.remove(a),e.assert(o.valid(a)&&(s===null||o.valid(s)))},remove:function(a){e.assert(o.valid(a));var s=a._previousSibling;if(s!==a){var _=a._nextSibling;s._nextSibling=_,_._previousSibling=s,a._previousSibling=a._nextSibling=a,e.assert(o.valid(a))}}}}}),_S=ci({"external/npm/node_modules/domino/lib/NodeUtils.js"(r,t){"use strict";t.exports={serializeOne:pe,\u0275escapeMatchingClosingTag:R,\u0275escapeClosingCommentTag:W,\u0275escapeProcessingInstructionContent:G};var e=fn(),o=e.NAMESPACE,a={STYLE:!0,SCRIPT:!0,XMP:!0,IFRAME:!0,NOEMBED:!0,NOFRAMES:!0,PLAINTEXT:!0},s={area:!0,base:!0,basefont:!0,bgsound:!0,br:!0,col:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},_={},w=/[&<>\u00A0]/g,E=/[&"<>\u00A0]/g;function M(le){return w.test(le)?le.replace(w,ne=>{switch(ne){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case"\xA0":return"&nbsp;"}}):le}function I(le){return E.test(le)?le.replace(E,ne=>{switch(ne){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;";case"\xA0":return"&nbsp;"}}):le}function A(le){var ne=le.namespaceURI;return ne?ne===o.XML?"xml:"+le.localName:ne===o.XLINK?"xlink:"+le.localName:ne===o.XMLNS?le.localName==="xmlns"?"xmlns":"xmlns:"+le.localName:le.name:le.localName}function R(le,ne){let re="</"+ne;if(!le.toLowerCase().includes(re))return le;let ue=[...le],oe=le.matchAll(new RegExp(re,"ig"));for(let Ve of oe)ue[Ve.index]="&lt;";return ue.join("")}var $=/--!?>/;function W(le){return $.test(le)?le.replace(/(--\!?)>/g,"$1&gt;"):le}function G(le){return le.includes(">")?le.replaceAll(">","&gt;"):le}function pe(le,ne){var re="";switch(le.nodeType){case 1:var ue=le.namespaceURI,oe=ue===o.HTML,Ve=oe||ue===o.SVG||ue===o.MATHML?le.localName:le.tagName;re+="<"+Ve;for(var tt=0,ct=le._numattrs;tt<ct;tt++){var Qe=le._attr(tt);re+=" "+A(Qe),Qe.value!==void 0&&(re+='="'+I(Qe.value)+'"')}if(re+=">",!(oe&&s[Ve])){var ve=le.serialize();a[Ve.toUpperCase()]&&(ve=R(ve,Ve)),oe&&_[Ve]&&ve.charAt(0)===`
`&&(re+=`
`),re+=ve,re+="</"+Ve+">"}break;case 3:case 4:var Ge;ne.nodeType===1&&ne.namespaceURI===o.HTML?Ge=ne.tagName:Ge="",a[Ge]||Ge==="NOSCRIPT"&&ne.ownerDocument._scripting_enabled?re+=le.data:re+=M(le.data);break;case 8:re+="<!--"+W(le.data)+"-->";break;case 7:let bt=G(le.data);re+="<?"+le.target+" "+bt+"?>";break;case 10:re+="<!DOCTYPE "+le.name,re+=">";break;default:e.InvalidStateError()}return re}}}),ko=ci({"external/npm/node_modules/domino/lib/Node.js"(r,t){"use strict";t.exports=_;var e=mS(),o=gS(),a=_S(),s=fn();function _(){e.call(this),this.parentNode=null,this._nextSibling=this._previousSibling=this,this._index=void 0}var w=_.ELEMENT_NODE=1,E=_.ATTRIBUTE_NODE=2,M=_.TEXT_NODE=3,I=_.CDATA_SECTION_NODE=4,A=_.ENTITY_REFERENCE_NODE=5,R=_.ENTITY_NODE=6,$=_.PROCESSING_INSTRUCTION_NODE=7,W=_.COMMENT_NODE=8,G=_.DOCUMENT_NODE=9,pe=_.DOCUMENT_TYPE_NODE=10,le=_.DOCUMENT_FRAGMENT_NODE=11,ne=_.NOTATION_NODE=12,re=_.DOCUMENT_POSITION_DISCONNECTED=1,ue=_.DOCUMENT_POSITION_PRECEDING=2,oe=_.DOCUMENT_POSITION_FOLLOWING=4,Ve=_.DOCUMENT_POSITION_CONTAINS=8,tt=_.DOCUMENT_POSITION_CONTAINED_BY=16,ct=_.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;_.prototype=Object.create(e.prototype,{baseURI:{get:s.nyi},parentElement:{get:function(){return this.parentNode&&this.parentNode.nodeType===w?this.parentNode:null}},hasChildNodes:{value:s.shouldOverride},firstChild:{get:s.shouldOverride},lastChild:{get:s.shouldOverride},isConnected:{get:function(){let Qe=this;for(;Qe!=null;){if(Qe.nodeType===_.DOCUMENT_NODE)return!0;Qe=Qe.parentNode,Qe!=null&&Qe.nodeType===_.DOCUMENT_FRAGMENT_NODE&&(Qe=Qe.host)}return!1}},previousSibling:{get:function(){var Qe=this.parentNode;return!Qe||this===Qe.firstChild?null:this._previousSibling}},nextSibling:{get:function(){var Qe=this.parentNode,ve=this._nextSibling;return!Qe||ve===Qe.firstChild?null:ve}},textContent:{get:function(){return null},set:function(Qe){}},innerText:{get:function(){return null},set:function(Qe){}},_countChildrenOfType:{value:function(Qe){for(var ve=0,Ge=this.firstChild;Ge!==null;Ge=Ge.nextSibling)Ge.nodeType===Qe&&ve++;return ve}},_ensureInsertValid:{value:function(ve,Ge,bt){var ae=this,ee,B;if(!ve.nodeType)throw new TypeError("not a node");switch(ae.nodeType){case G:case le:case w:break;default:s.HierarchyRequestError()}switch(ve.isAncestor(ae)&&s.HierarchyRequestError(),(Ge!==null||!bt)&&Ge.parentNode!==ae&&s.NotFoundError(),ve.nodeType){case le:case pe:case w:case M:case $:case W:break;default:s.HierarchyRequestError()}if(ae.nodeType===G)switch(ve.nodeType){case M:s.HierarchyRequestError();break;case le:switch(ve._countChildrenOfType(M)>0&&s.HierarchyRequestError(),ve._countChildrenOfType(w)){case 0:break;case 1:if(Ge!==null)for(bt&&Ge.nodeType===pe&&s.HierarchyRequestError(),B=Ge.nextSibling;B!==null;B=B.nextSibling)B.nodeType===pe&&s.HierarchyRequestError();ee=ae._countChildrenOfType(w),bt?ee>0&&s.HierarchyRequestError():(ee>1||ee===1&&Ge.nodeType!==w)&&s.HierarchyRequestError();break;default:s.HierarchyRequestError()}break;case w:if(Ge!==null)for(bt&&Ge.nodeType===pe&&s.HierarchyRequestError(),B=Ge.nextSibling;B!==null;B=B.nextSibling)B.nodeType===pe&&s.HierarchyRequestError();ee=ae._countChildrenOfType(w),bt?ee>0&&s.HierarchyRequestError():(ee>1||ee===1&&Ge.nodeType!==w)&&s.HierarchyRequestError();break;case pe:if(Ge===null)ae._countChildrenOfType(w)&&s.HierarchyRequestError();else for(B=ae.firstChild;B!==null&&B!==Ge;B=B.nextSibling)B.nodeType===w&&s.HierarchyRequestError();ee=ae._countChildrenOfType(pe),bt?ee>0&&s.HierarchyRequestError():(ee>1||ee===1&&Ge.nodeType!==pe)&&s.HierarchyRequestError();break}else ve.nodeType===pe&&s.HierarchyRequestError()}},insertBefore:{value:function(ve,Ge){var bt=this;bt._ensureInsertValid(ve,Ge,!0);var ae=Ge;return ae===ve&&(ae=ve.nextSibling),bt.doc.adoptNode(ve),ve._insertOrReplace(bt,ae,!1),ve}},appendChild:{value:function(Qe){return this.insertBefore(Qe,null)}},_appendChild:{value:function(Qe){Qe._insertOrReplace(this,null,!1)}},removeChild:{value:function(ve){var Ge=this;if(!ve.nodeType)throw new TypeError("not a node");return ve.parentNode!==Ge&&s.NotFoundError(),ve.remove(),ve}},replaceChild:{value:function(ve,Ge){var bt=this;return bt._ensureInsertValid(ve,Ge,!1),ve.doc!==bt.doc&&bt.doc.adoptNode(ve),ve._insertOrReplace(bt,Ge,!0),Ge}},contains:{value:function(ve){return ve===null?!1:this===ve?!0:(this.compareDocumentPosition(ve)&tt)!==0}},compareDocumentPosition:{value:function(ve){if(this===ve)return 0;if(this.doc!==ve.doc||this.rooted!==ve.rooted)return re+ct;for(var Ge=[],bt=[],ae=this;ae!==null;ae=ae.parentNode)Ge.push(ae);for(ae=ve;ae!==null;ae=ae.parentNode)bt.push(ae);if(Ge.reverse(),bt.reverse(),Ge[0]!==bt[0])return re+ct;ae=Math.min(Ge.length,bt.length);for(var ee=1;ee<ae;ee++)if(Ge[ee]!==bt[ee])return Ge[ee].index<bt[ee].index?oe:ue;return Ge.length<bt.length?oe+tt:ue+Ve}},isSameNode:{value:function(ve){return this===ve}},isEqualNode:{value:function(ve){if(!ve||ve.nodeType!==this.nodeType||!this.isEqual(ve))return!1;for(var Ge=this.firstChild,bt=ve.firstChild;Ge&&bt;Ge=Ge.nextSibling,bt=bt.nextSibling)if(!Ge.isEqualNode(bt))return!1;return Ge===null&&bt===null}},cloneNode:{value:function(Qe){var ve=this.clone();if(Qe)for(var Ge=this.firstChild;Ge!==null;Ge=Ge.nextSibling)ve._appendChild(Ge.cloneNode(!0));return ve}},lookupPrefix:{value:function(ve){var Ge;if(ve===""||ve===null||ve===void 0)return null;switch(this.nodeType){case w:return this._lookupNamespacePrefix(ve,this);case G:return Ge=this.documentElement,Ge?Ge.lookupPrefix(ve):null;case R:case ne:case le:case pe:return null;case E:return Ge=this.ownerElement,Ge?Ge.lookupPrefix(ve):null;default:return Ge=this.parentElement,Ge?Ge.lookupPrefix(ve):null}}},lookupNamespaceURI:{value:function(ve){(ve===""||ve===void 0)&&(ve=null);var Ge;switch(this.nodeType){case w:return s.shouldOverride();case G:return Ge=this.documentElement,Ge?Ge.lookupNamespaceURI(ve):null;case R:case ne:case pe:case le:return null;case E:return Ge=this.ownerElement,Ge?Ge.lookupNamespaceURI(ve):null;default:return Ge=this.parentElement,Ge?Ge.lookupNamespaceURI(ve):null}}},isDefaultNamespace:{value:function(ve){(ve===""||ve===void 0)&&(ve=null);var Ge=this.lookupNamespaceURI(null);return Ge===ve}},index:{get:function(){var Qe=this.parentNode;if(this===Qe.firstChild)return 0;var ve=Qe.childNodes;if(this._index===void 0||ve[this._index]!==this){for(var Ge=0;Ge<ve.length;Ge++)ve[Ge]._index=Ge;s.assert(ve[this._index]===this)}return this._index}},isAncestor:{value:function(Qe){if(this.doc!==Qe.doc||this.rooted!==Qe.rooted)return!1;for(var ve=Qe;ve;ve=ve.parentNode)if(ve===this)return!0;return!1}},ensureSameDoc:{value:function(Qe){Qe.ownerDocument===null?Qe.ownerDocument=this.doc:Qe.ownerDocument!==this.doc&&s.WrongDocumentError()}},removeChildren:{value:s.shouldOverride},_insertOrReplace:{value:function(ve,Ge,bt){var ae=this,ee,B;if(ae.nodeType===le&&ae.rooted&&s.HierarchyRequestError(),ve._childNodes&&(ee=Ge===null?ve._childNodes.length:Ge.index,ae.parentNode===ve)){var fe=ae.index;fe<ee&&ee--}bt&&(Ge.rooted&&Ge.doc.mutateRemove(Ge),Ge.parentNode=null);var Ue=Ge;Ue===null&&(Ue=ve.firstChild);var ot=ae.rooted&&ve.rooted;if(ae.nodeType===le){for(var Pt=[0,bt?1:0],Bt,Di=ae.firstChild;Di!==null;Di=Bt)Bt=Di.nextSibling,Pt.push(Di),Di.parentNode=ve;var Ie=Pt.length;if(bt?o.replace(Ue,Ie>2?Pt[2]:null):Ie>2&&Ue!==null&&o.insertBefore(Pt[2],Ue),ve._childNodes)for(Pt[0]=Ge===null?ve._childNodes.length:Ge._index,ve._childNodes.splice.apply(ve._childNodes,Pt),B=2;B<Ie;B++)Pt[B]._index=Pt[0]+(B-2);else ve._firstChild===Ge&&(Ie>2?ve._firstChild=Pt[2]:bt&&(ve._firstChild=null));if(ae._childNodes?ae._childNodes.length=0:ae._firstChild=null,ve.rooted)for(ve.modify(),B=2;B<Ie;B++)ve.doc.mutateInsert(Pt[B])}else{if(Ge===ae)return;ot?ae._remove():ae.parentNode&&ae.remove(),ae.parentNode=ve,bt?(o.replace(Ue,ae),ve._childNodes?(ae._index=ee,ve._childNodes[ee]=ae):ve._firstChild===Ge&&(ve._firstChild=ae)):(Ue!==null&&o.insertBefore(ae,Ue),ve._childNodes?(ae._index=ee,ve._childNodes.splice(ee,0,ae)):ve._firstChild===Ge&&(ve._firstChild=ae)),ot?(ve.modify(),ve.doc.mutateMove(ae)):ve.rooted&&(ve.modify(),ve.doc.mutateInsert(ae))}}},lastModTime:{get:function(){return this._lastModTime||(this._lastModTime=this.doc.modclock),this._lastModTime}},modify:{value:function(){if(this.doc.modclock)for(var Qe=++this.doc.modclock,ve=this;ve;ve=ve.parentElement)ve._lastModTime&&(ve._lastModTime=Qe)}},doc:{get:function(){return this.ownerDocument||this}},rooted:{get:function(){return!!this._nid}},normalize:{value:function(){for(var Qe,ve=this.firstChild;ve!==null;ve=Qe)if(Qe=ve.nextSibling,ve.normalize&&ve.normalize(),ve.nodeType===_.TEXT_NODE){if(ve.nodeValue===""){this.removeChild(ve);continue}var Ge=ve.previousSibling;Ge!==null&&Ge.nodeType===_.TEXT_NODE&&(Ge.appendData(ve.nodeValue),this.removeChild(ve))}}},serialize:{value:function(){if(this._innerHTML)return this._innerHTML;for(var Qe="",ve=this.firstChild;ve!==null;ve=ve.nextSibling)Qe+=a.serializeOne(ve,this);return Qe}},outerHTML:{get:function(){return a.serializeOne(this,{nodeType:0})},set:s.nyi},ELEMENT_NODE:{value:w},ATTRIBUTE_NODE:{value:E},TEXT_NODE:{value:M},CDATA_SECTION_NODE:{value:I},ENTITY_REFERENCE_NODE:{value:A},ENTITY_NODE:{value:R},PROCESSING_INSTRUCTION_NODE:{value:$},COMMENT_NODE:{value:W},DOCUMENT_NODE:{value:G},DOCUMENT_TYPE_NODE:{value:pe},DOCUMENT_FRAGMENT_NODE:{value:le},NOTATION_NODE:{value:ne},DOCUMENT_POSITION_DISCONNECTED:{value:re},DOCUMENT_POSITION_PRECEDING:{value:ue},DOCUMENT_POSITION_FOLLOWING:{value:oe},DOCUMENT_POSITION_CONTAINS:{value:Ve},DOCUMENT_POSITION_CONTAINED_BY:{value:tt},DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:{value:ct}})}}),BR=ci({"external/npm/node_modules/domino/lib/NodeList.es6.js"(r,t){"use strict";t.exports=class extends Array{constructor(o){if(super(o&&o.length||0),o)for(var a in o)this[a]=o[a]}item(o){return this[o]||null}}}}),VR=ci({"external/npm/node_modules/domino/lib/NodeList.es5.js"(r,t){"use strict";function e(a){return this[a]||null}function o(a){return a||(a=[]),a.item=e,a}t.exports=o}}),Ch=ci({"external/npm/node_modules/domino/lib/NodeList.js"(r,t){"use strict";var e;try{e=BR()}catch{e=VR()}t.exports=e}}),av=ci({"external/npm/node_modules/domino/lib/ContainerNode.js"(r,t){"use strict";t.exports=a;var e=ko(),o=Ch();function a(){e.call(this),this._firstChild=this._childNodes=null}a.prototype=Object.create(e.prototype,{hasChildNodes:{value:function(){return this._childNodes?this._childNodes.length>0:this._firstChild!==null}},childNodes:{get:function(){return this._ensureChildNodes(),this._childNodes}},firstChild:{get:function(){return this._childNodes?this._childNodes.length===0?null:this._childNodes[0]:this._firstChild}},lastChild:{get:function(){var s=this._childNodes,_;return s?s.length===0?null:s[s.length-1]:(_=this._firstChild,_===null?null:_._previousSibling)}},_ensureChildNodes:{value:function(){if(!this._childNodes){var s=this._firstChild,_=s,w=this._childNodes=new o;if(s)do w.push(_),_=_._nextSibling;while(_!==s);this._firstChild=null}}},removeChildren:{value:function(){for(var _=this.rooted?this.ownerDocument:null,w=this.firstChild,E;w!==null;)E=w,w=E.nextSibling,_&&_.mutateRemove(E),E.parentNode=null;this._childNodes?this._childNodes.length=0:this._firstChild=null,this.modify()}}})}}),lv=ci({"external/npm/node_modules/domino/lib/xmlnames.js"(r){"use strict";r.isValidName=G,r.isValidQName=pe;var t=/^[_:A-Za-z][-.:\w]+$/,e=/^([_A-Za-z][-.\w]+|[_A-Za-z][-.\w]+:[_A-Za-z][-.\w]+)$/,o="_A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",a="-._A-Za-z0-9\xB7\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0300-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",s="["+o+"]["+a+"]*",_=o+":",w=a+":",E=new RegExp("^["+_+"]["+w+"]*$"),M=new RegExp("^("+s+"|"+s+":"+s+")$"),I=/[\uD800-\uDB7F\uDC00-\uDFFF]/,A=/[\uD800-\uDB7F\uDC00-\uDFFF]/g,R=/[\uD800-\uDB7F][\uDC00-\uDFFF]/g;o+="\uD800-\u{EFC00}-\uDFFF",a+="\uD800-\u{EFC00}-\uDFFF",s="["+o+"]["+a+"]*",_=o+":",w=a+":";var $=new RegExp("^["+_+"]["+w+"]*$"),W=new RegExp("^("+s+"|"+s+":"+s+")$");function G(le){if(t.test(le)||E.test(le))return!0;if(!I.test(le)||!$.test(le))return!1;var ne=le.match(A),re=le.match(R);return re!==null&&2*re.length===ne.length}function pe(le){if(e.test(le)||M.test(le))return!0;if(!I.test(le)||!W.test(le))return!1;var ne=le.match(A),re=le.match(R);return re!==null&&2*re.length===ne.length}}}),bS=ci({"external/npm/node_modules/domino/lib/attributes.js"(r){"use strict";var t=fn();r.property=function(o){if(Array.isArray(o.type)){var a=Object.create(null);o.type.forEach(function(w){a[w.value||w]=w.alias||w});var s=o.missing;s===void 0&&(s=null);var _=o.invalid;return _===void 0&&(_=s),{get:function(){var w=this._getattr(o.name);return w===null?s:(w=a[w.toLowerCase()],w!==void 0?w:_!==null?_:w)},set:function(w){this._setattr(o.name,w)}}}else{if(o.type===Boolean)return{get:function(){return this.hasAttribute(o.name)},set:function(w){w?this._setattr(o.name,""):this.removeAttribute(o.name)}};if(o.type===Number||o.type==="long"||o.type==="unsigned long"||o.type==="limited unsigned long with fallback")return e(o);if(!o.type||o.type===String)return{get:function(){return this._getattr(o.name)||""},set:function(w){o.treatNullAsEmptyString&&w===null&&(w=""),this._setattr(o.name,w)}};if(typeof o.type=="function")return o.type(o.name,o)}throw new Error("Invalid attribute definition")};function e(o){var a;typeof o.default=="function"?a=o.default:typeof o.default=="number"?a=function(){return o.default}:a=function(){t.assert(!1,typeof o.default)};var s=o.type==="unsigned long",_=o.type==="long",w=o.type==="limited unsigned long with fallback",E=o.min,M=o.max,I=o.setmin;return E===void 0&&(s&&(E=0),_&&(E=-2147483648),w&&(E=1)),M===void 0&&(s||_||w)&&(M=2147483647),{get:function(){var A=this._getattr(o.name),R=o.float?parseFloat(A):parseInt(A,10);if(A===null||!isFinite(R)||E!==void 0&&R<E||M!==void 0&&R>M)return a.call(this);if(s||_||w){if(!/^[ \t\n\f\r]*[-+]?[0-9]/.test(A))return a.call(this);R=R|0}return R},set:function(A){o.float||(A=Math.floor(A)),I!==void 0&&A<I&&t.IndexSizeError(o.name+" set to "+A),s?A=A<0||A>2147483647?a.call(this):A|0:w?A=A<1||A>2147483647?a.call(this):A|0:_&&(A=A<-2147483648||A>2147483647?a.call(this):A|0),this._setattr(o.name,String(A))}}}r.registerChangeHandler=function(o,a,s){var _=o.prototype;Object.prototype.hasOwnProperty.call(_,"_attributeChangeHandlers")||(_._attributeChangeHandlers=Object.create(_._attributeChangeHandlers||null)),_._attributeChangeHandlers[a]=s}}}),UR=ci({"external/npm/node_modules/domino/lib/FilteredElementList.js"(r,t){"use strict";t.exports=o;var e=ko();function o(a,s){this.root=a,this.filter=s,this.lastModTime=a.lastModTime,this.done=!1,this.cache=[],this.traverse()}o.prototype=Object.create(Object.prototype,{length:{get:function(){return this.checkcache(),this.done||this.traverse(),this.cache.length}},item:{value:function(a){return this.checkcache(),!this.done&&a>=this.cache.length&&this.traverse(),this.cache[a]}},checkcache:{value:function(){if(this.lastModTime!==this.root.lastModTime){for(var a=this.cache.length-1;a>=0;a--)this[a]=void 0;this.cache.length=0,this.done=!1,this.lastModTime=this.root.lastModTime}}},traverse:{value:function(a){a!==void 0&&a++;for(var s;(s=this.next())!==null;)if(this[this.cache.length]=s,this.cache.push(s),a&&this.cache.length===a)return;this.done=!0}},next:{value:function(){var a=this.cache.length===0?this.root:this.cache[this.cache.length-1],s;for(a.nodeType===e.DOCUMENT_NODE?s=a.documentElement:s=a.nextElement(this.root);s;){if(this.filter(s))return s;s=s.nextElement(this.root)}return null}}})}}),yS=ci({"external/npm/node_modules/domino/lib/DOMTokenList.js"(r,t){"use strict";var e=fn();t.exports=o;function o(E,M){this._getString=E,this._setString=M,this._length=0,this._lastStringValue="",this._update()}Object.defineProperties(o.prototype,{length:{get:function(){return this._length}},item:{value:function(E){var M=w(this);return E<0||E>=M.length?null:M[E]}},contains:{value:function(E){E=String(E);var M=w(this);return M.indexOf(E)>-1}},add:{value:function(){for(var E=w(this),M=0,I=arguments.length;M<I;M++){var A=s(arguments[M]);E.indexOf(A)<0&&E.push(A)}this._update(E)}},remove:{value:function(){for(var E=w(this),M=0,I=arguments.length;M<I;M++){var A=s(arguments[M]),R=E.indexOf(A);R>-1&&E.splice(R,1)}this._update(E)}},toggle:{value:function(M,I){return M=s(M),this.contains(M)?I===void 0||I===!1?(this.remove(M),!1):!0:I===void 0||I===!0?(this.add(M),!0):!1}},replace:{value:function(M,I){String(I)===""&&e.SyntaxError(),M=s(M),I=s(I);var A=w(this),R=A.indexOf(M);if(R<0)return!1;var $=A.indexOf(I);return $<0?A[R]=I:R<$?(A[R]=I,A.splice($,1)):A.splice(R,1),this._update(A),!0}},toString:{value:function(){return this._getString()}},value:{get:function(){return this._getString()},set:function(E){this._setString(E),this._update()}},_update:{value:function(E){E?(a(this,E),this._setString(E.join(" ").trim())):a(this,w(this)),this._lastStringValue=this._getString()}}});function a(E,M){var I=E._length,A;for(E._length=M.length,A=0;A<M.length;A++)E[A]=M[A];for(;A<I;A++)E[A]=void 0}function s(E){return E=String(E),E===""&&e.SyntaxError(),/[ \t\r\n\f]/.test(E)&&e.InvalidCharacterError(),E}function _(E){for(var M=E._length,I=Array(M),A=0;A<M;A++)I[A]=E[A];return I}function w(E){var M=E._getString();if(M===E._lastStringValue)return _(E);var I=M.replace(/(^[ \t\r\n\f]+)|([ \t\r\n\f]+$)/g,"");if(I==="")return[];var A=Object.create(null);return I.split(/[ \t\r\n\f]+/g).filter(function(R){var $="$"+R;return A[$]?!1:(A[$]=!0,!0)})}}}),cv=ci({"external/npm/node_modules/domino/lib/select.js"(r,t){"use strict";var e=Object.create(null,{location:{get:function(){throw new Error("window.location is not supported.")}}}),o=function(ae,ee){return ae.compareDocumentPosition(ee)},a=function(ae,ee){return o(ae,ee)&2?1:-1},s=function(ae){for(;(ae=ae.nextSibling)&&ae.nodeType!==1;);return ae},_=function(ae){for(;(ae=ae.previousSibling)&&ae.nodeType!==1;);return ae},w=function(ae){if(ae=ae.firstChild)for(;ae.nodeType!==1&&(ae=ae.nextSibling););return ae},E=function(ae){if(ae=ae.lastChild)for(;ae.nodeType!==1&&(ae=ae.previousSibling););return ae},M=function(ae){if(!ae.parentNode)return!1;var ee=ae.parentNode.nodeType;return ee===1||ee===9},I=function(ae){if(!ae)return ae;var ee=ae[0];return ee==='"'||ee==="'"?(ae[ae.length-1]===ee?ae=ae.slice(1,-1):ae=ae.slice(1),ae.replace(oe.str_escape,function(B){var fe=/^\\(?:([0-9A-Fa-f]+)|([\r\n\f]+))/.exec(B);if(!fe)return B.slice(1);if(fe[2])return"";var Ue=parseInt(fe[1],16);return String.fromCodePoint?String.fromCodePoint(Ue):String.fromCharCode(Ue)})):oe.ident.test(ae)?A(ae):ae},A=function(ae){return ae.replace(oe.escape,function(ee){var B=/^\\([0-9A-Fa-f]+)/.exec(ee);if(!B)return ee[1];var fe=parseInt(B[1],16);return String.fromCodePoint?String.fromCodePoint(fe):String.fromCharCode(fe)})},R=function(){return Array.prototype.indexOf?Array.prototype.indexOf:function(ae,ee){for(var B=this.length;B--;)if(this[B]===ee)return B;return-1}}(),$=function(ae,ee){var B=oe.inside.source.replace(/</g,ae).replace(/>/g,ee);return new RegExp(B)},W=function(ae,ee,B){return ae=ae.source,ae=ae.replace(ee,B.source||B),new RegExp(ae)},G=function(ae,ee){return ae.replace(/^(?:\w+:\/\/|\/+)/,"").replace(/(?:\/+|\/*#.*?)$/,"").split("/",ee).join("/")},pe=function(ae,ee){var B=ae.replace(/\s+/g,""),fe;return B==="even"?B="2n+0":B==="odd"?B="2n+1":B.indexOf("n")===-1&&(B="0n"+B),fe=/^([+-])?(\d+)?n([+-])?(\d+)?$/.exec(B),{group:fe[1]==="-"?-(fe[2]||1):+(fe[2]||1),offset:fe[4]?fe[3]==="-"?-fe[4]:+fe[4]:0}},le=function(ae,ee,B){var fe=pe(ae),Ue=fe.group,ot=fe.offset,Pt=B?E:w,Bt=B?_:s;return function(Di){if(M(Di))for(var Ie=Pt(Di.parentNode),Le=0;Ie;){if(ee(Ie,Di)&&Le++,Ie===Di)return Le-=ot,Ue&&Le?Le%Ue===0&&Le<0==Ue<0:!Le;Ie=Bt(Ie)}}},ne={"*":function(){return function(){return!0}}(),type:function(ae){return ae=ae.toLowerCase(),function(ee){return ee.nodeName.toLowerCase()===ae}},attr:function(ae,ee,B,fe){return ee=re[ee],function(Ue){var ot;switch(ae){case"for":ot=Ue.htmlFor;break;case"class":ot=Ue.className,ot===""&&Ue.getAttribute("class")==null&&(ot=null);break;case"href":case"src":ot=Ue.getAttribute(ae,2);break;case"title":ot=Ue.getAttribute("title")||null;break;case"id":case"lang":case"dir":case"accessKey":case"hidden":case"tabIndex":case"style":if(Ue.getAttribute){ot=Ue.getAttribute(ae);break}default:if(Ue.hasAttribute&&!Ue.hasAttribute(ae))break;ot=Ue[ae]!=null?Ue[ae]:Ue.getAttribute&&Ue.getAttribute(ae);break}if(ot!=null)return ot=ot+"",fe&&(ot=ot.toLowerCase(),B=B.toLowerCase()),ee(ot,B)}},":first-child":function(ae){return!_(ae)&&M(ae)},":last-child":function(ae){return!s(ae)&&M(ae)},":only-child":function(ae){return!_(ae)&&!s(ae)&&M(ae)},":nth-child":function(ae,ee){return le(ae,function(){return!0},ee)},":nth-last-child":function(ae){return ne[":nth-child"](ae,!0)},":root":function(ae){return ae.ownerDocument.documentElement===ae},":empty":function(ae){return!ae.firstChild},":not":function(ae){var ee=Ge(ae);return function(B){return!ee(B)}},":first-of-type":function(ae){if(M(ae)){for(var ee=ae.nodeName;ae=_(ae);)if(ae.nodeName===ee)return;return!0}},":last-of-type":function(ae){if(M(ae)){for(var ee=ae.nodeName;ae=s(ae);)if(ae.nodeName===ee)return;return!0}},":only-of-type":function(ae){return ne[":first-of-type"](ae)&&ne[":last-of-type"](ae)},":nth-of-type":function(ae,ee){return le(ae,function(B,fe){return B.nodeName===fe.nodeName},ee)},":nth-last-of-type":function(ae){return ne[":nth-of-type"](ae,!0)},":checked":function(ae){return!!(ae.checked||ae.selected)},":indeterminate":function(ae){return!ne[":checked"](ae)},":enabled":function(ae){return!ae.disabled&&ae.type!=="hidden"},":disabled":function(ae){return!!ae.disabled},":target":function(ae){return ae.id===e.location.hash.substring(1)},":focus":function(ae){return ae===ae.ownerDocument.activeElement},":is":function(ae){return Ge(ae)},":matches":function(ae){return ne[":is"](ae)},":nth-match":function(ae,ee){var B=ae.split(/\s*,\s*/),fe=B.shift(),Ue=Ge(B.join(","));return le(fe,Ue,ee)},":nth-last-match":function(ae){return ne[":nth-match"](ae,!0)},":links-here":function(ae){return ae+""==e.location+""},":lang":function(ae){return function(ee){for(;ee;){if(ee.lang)return ee.lang.indexOf(ae)===0;ee=ee.parentNode}}},":dir":function(ae){return function(ee){for(;ee;){if(ee.dir)return ee.dir===ae;ee=ee.parentNode}}},":scope":function(ae,ee){var B=ee||ae.ownerDocument;return B.nodeType===9?ae===B.documentElement:ae===B},":any-link":function(ae){return typeof ae.href=="string"},":local-link":function(ae){if(ae.nodeName)return ae.href&&ae.host===e.location.host;var ee=+ae+1;return function(B){if(B.href){var fe=e.location+"",Ue=B+"";return G(fe,ee)===G(Ue,ee)}}},":default":function(ae){return!!ae.defaultSelected},":valid":function(ae){return ae.willValidate||ae.validity&&ae.validity.valid},":invalid":function(ae){return!ne[":valid"](ae)},":in-range":function(ae){return ae.value>ae.min&&ae.value<=ae.max},":out-of-range":function(ae){return!ne[":in-range"](ae)},":required":function(ae){return!!ae.required},":optional":function(ae){return!ae.required},":read-only":function(ae){if(ae.readOnly)return!0;var ee=ae.getAttribute("contenteditable"),B=ae.contentEditable,fe=ae.nodeName.toLowerCase();return fe=fe!=="input"&&fe!=="textarea",(fe||ae.disabled)&&ee==null&&B!=="true"},":read-write":function(ae){return!ne[":read-only"](ae)},":hover":function(){throw new Error(":hover is not supported.")},":active":function(){throw new Error(":active is not supported.")},":link":function(){throw new Error(":link is not supported.")},":visited":function(){throw new Error(":visited is not supported.")},":column":function(){throw new Error(":column is not supported.")},":nth-column":function(){throw new Error(":nth-column is not supported.")},":nth-last-column":function(){throw new Error(":nth-last-column is not supported.")},":current":function(){throw new Error(":current is not supported.")},":past":function(){throw new Error(":past is not supported.")},":future":function(){throw new Error(":future is not supported.")},":contains":function(ae){return function(ee){var B=ee.innerText||ee.textContent||ee.value||"";return B.indexOf(ae)!==-1}},":has":function(ae){return function(ee){return bt(ae,ee).length>0}}},re={"-":function(){return!0},"=":function(ae,ee){return ae===ee},"*=":function(ae,ee){return ae.indexOf(ee)!==-1},"~=":function(ae,ee){var B,fe,Ue,ot;for(fe=0;;fe=B+1){if(B=ae.indexOf(ee,fe),B===-1)return!1;if(Ue=ae[B-1],ot=ae[B+ee.length],(!Ue||Ue===" ")&&(!ot||ot===" "))return!0}},"|=":function(ae,ee){var B=ae.indexOf(ee),fe;if(B===0)return fe=ae[B+ee.length],fe==="-"||!fe},"^=":function(ae,ee){return ae.indexOf(ee)===0},"$=":function(ae,ee){var B=ae.lastIndexOf(ee);return B!==-1&&B+ee.length===ae.length},"!=":function(ae,ee){return ae!==ee}},ue={" ":function(ae){return function(ee){for(;ee=ee.parentNode;)if(ae(ee))return ee}},">":function(ae){return function(ee){if(ee=ee.parentNode)return ae(ee)&&ee}},"+":function(ae){return function(ee){if(ee=_(ee))return ae(ee)&&ee}},"~":function(ae){return function(ee){for(;ee=_(ee);)if(ae(ee))return ee}},noop:function(ae){return function(ee){return ae(ee)&&ee}},ref:function(ae,ee){var B;function fe(Ue){for(var ot=Ue.ownerDocument,Pt=ot.getElementsByTagName("*"),Bt=Pt.length;Bt--;)if(B=Pt[Bt],fe.test(Ue))return B=null,!0;B=null}return fe.combinator=function(Ue){if(!(!B||!B.getAttribute)){var ot=B.getAttribute(ee)||"";if(ot[0]==="#"&&(ot=ot.substring(1)),ot===Ue.id&&ae(B))return B}},fe}},oe={escape:/\\(?:[^0-9A-Fa-f\r\n]|[0-9A-Fa-f]{1,6}[\r\n\t ]?)/g,str_escape:/(escape)|\\(\n|\r\n?|\f)/g,nonascii:/[\u00A0-\uFFFF]/,cssid:/(?:(?!-?[0-9])(?:escape|nonascii|[-_a-zA-Z0-9])+)/,qname:/^ *(cssid|\*)/,simple:/^(?:([.#]cssid)|pseudo|attr)/,ref:/^ *\/(cssid)\/ */,combinator:/^(?: +([^ \w*.#\\]) +|( )+|([^ \w*.#\\]))(?! *$)/,attr:/^\[(cssid)(?:([^\w]?=)(inside))?\]/,pseudo:/^(:cssid)(?:\((inside)\))?/,inside:/(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|<[^"'>]*>|\\["'>]|[^"'>])*/,ident:/^(cssid)$/};oe.cssid=W(oe.cssid,"nonascii",oe.nonascii),oe.cssid=W(oe.cssid,"escape",oe.escape),oe.qname=W(oe.qname,"cssid",oe.cssid),oe.simple=W(oe.simple,"cssid",oe.cssid),oe.ref=W(oe.ref,"cssid",oe.cssid),oe.attr=W(oe.attr,"cssid",oe.cssid),oe.pseudo=W(oe.pseudo,"cssid",oe.cssid),oe.inside=W(oe.inside,`[^"'>]*`,oe.inside),oe.attr=W(oe.attr,"inside",$("\\[","\\]")),oe.pseudo=W(oe.pseudo,"inside",$("\\(","\\)")),oe.simple=W(oe.simple,"pseudo",oe.pseudo),oe.simple=W(oe.simple,"attr",oe.attr),oe.ident=W(oe.ident,"cssid",oe.cssid),oe.str_escape=W(oe.str_escape,"escape",oe.escape);var Ve=function(ae){for(var ee=ae.replace(/^\s+|\s+$/g,""),B,fe=[],Ue=[],ot,Pt,Bt,Di,Ie;ee;){if(Bt=oe.qname.exec(ee))ee=ee.substring(Bt[0].length),Pt=A(Bt[1]),Ue.push(tt(Pt,!0));else if(Bt=oe.simple.exec(ee))ee=ee.substring(Bt[0].length),Pt="*",Ue.push(tt(Pt,!0)),Ue.push(tt(Bt));else throw new SyntaxError("Invalid selector.");for(;Bt=oe.simple.exec(ee);)ee=ee.substring(Bt[0].length),Ue.push(tt(Bt));if(ee[0]==="!"&&(ee=ee.substring(1),ot=ve(),ot.qname=Pt,Ue.push(ot.simple)),Bt=oe.ref.exec(ee)){ee=ee.substring(Bt[0].length),Ie=ue.ref(ct(Ue),A(Bt[1])),fe.push(Ie.combinator),Ue=[];continue}if(Bt=oe.combinator.exec(ee)){if(ee=ee.substring(Bt[0].length),Di=Bt[1]||Bt[2]||Bt[3],Di===","){fe.push(ue.noop(ct(Ue)));break}}else Di="noop";if(!ue[Di])throw new SyntaxError("Bad combinator.");fe.push(ue[Di](ct(Ue))),Ue=[]}return B=Qe(fe),B.qname=Pt,B.sel=ee,ot&&(ot.lname=B.qname,ot.test=B,ot.qname=ot.qname,ot.sel=B.sel,B=ot),Ie&&(Ie.test=B,Ie.qname=B.qname,Ie.sel=B.sel,B=Ie),B},tt=function(ae,ee){if(ee)return ae==="*"?ne["*"]:ne.type(ae);if(ae[1])return ae[1][0]==="."?ne.attr("class","~=",A(ae[1].substring(1)),!1):ne.attr("id","=",A(ae[1].substring(1)),!1);if(ae[2])return ae[3]?ne[A(ae[2])](I(ae[3])):ne[A(ae[2])];if(ae[4]){var B=ae[6],fe=/["'\s]\s*I$/i.test(B);return fe&&(B=B.replace(/\s*I$/i,"")),ne.attr(A(ae[4]),ae[5]||"-",I(B),fe)}throw new SyntaxError("Unknown Selector.")},ct=function(ae){var ee=ae.length,B;return ee<2?ae[0]:function(fe){if(fe){for(B=0;B<ee;B++)if(!ae[B](fe))return;return!0}}},Qe=function(ae){return ae.length<2?function(ee){return!!ae[0](ee)}:function(ee){for(var B=ae.length;B--;)if(!(ee=ae[B](ee)))return;return!0}},ve=function(){var ae;function ee(B){for(var fe=B.ownerDocument,Ue=fe.getElementsByTagName(ee.lname),ot=Ue.length;ot--;)if(ee.test(Ue[ot])&&ae===B)return ae=null,!0;ae=null}return ee.simple=function(B){return ae=B,!0},ee},Ge=function(ae){for(var ee=Ve(ae),B=[ee];ee.sel;)ee=Ve(ee.sel),B.push(ee);return B.length<2?ee:function(fe){for(var Ue=B.length,ot=0;ot<Ue;ot++)if(B[ot](fe))return!0}},bt=function(ae,ee){for(var B=[],fe=Ve(ae),Ue=ee.getElementsByTagName(fe.qname),ot=0,Pt;Pt=Ue[ot++];)fe(Pt)&&B.push(Pt);if(fe.sel){for(;fe.sel;)for(fe=Ve(fe.sel),Ue=ee.getElementsByTagName(fe.qname),ot=0;Pt=Ue[ot++];)fe(Pt)&&R.call(B,Pt)===-1&&B.push(Pt);B.sort(a)}return B};t.exports=r=function(ae,ee){var B,fe;if(ee.nodeType!==11&&ae.indexOf(" ")===-1){if(ae[0]==="#"&&ee.rooted&&/^#[A-Z_][-A-Z0-9_]*$/i.test(ae)&&ee.doc._hasMultipleElementsWithId&&(B=ae.substring(1),!ee.doc._hasMultipleElementsWithId(B)))return fe=ee.doc.getElementById(B),fe?[fe]:[];if(ae[0]==="."&&/^\.\w+$/.test(ae))return ee.getElementsByClassName(ae.substring(1));if(/^\w+$/.test(ae))return ee.getElementsByTagName(ae)}return bt(ae,ee)},r.selectors=ne,r.operators=re,r.combinators=ue,r.matches=function(ae,ee){var B={sel:ee};do if(B=Ve(B.sel),B(ae))return!0;while(B.sel);return!1}}}),uv=ci({"external/npm/node_modules/domino/lib/ChildNode.js"(r,t){"use strict";var e=ko(),o=gS(),a=function(_,w){for(var E=_.createDocumentFragment(),M=0;M<w.length;M++){var I=w[M],A=I instanceof e;E.appendChild(A?I:_.createTextNode(String(I)))}return E},s={after:{value:function(){var w=Array.prototype.slice.call(arguments),E=this.parentNode,M=this.nextSibling;if(E!==null){for(;M&&w.some(function(A){return A===M});)M=M.nextSibling;var I=a(this.doc,w);E.insertBefore(I,M)}}},before:{value:function(){var w=Array.prototype.slice.call(arguments),E=this.parentNode,M=this.previousSibling;if(E!==null){for(;M&&w.some(function(R){return R===M});)M=M.previousSibling;var I=a(this.doc,w),A=M?M.nextSibling:E.firstChild;E.insertBefore(I,A)}}},remove:{value:function(){this.parentNode!==null&&(this.doc&&(this.doc._preremoveNodeIterators(this),this.rooted&&this.doc.mutateRemove(this)),this._remove(),this.parentNode=null)}},_remove:{value:function(){var w=this.parentNode;w!==null&&(w._childNodes?w._childNodes.splice(this.index,1):w._firstChild===this&&(this._nextSibling===this?w._firstChild=null:w._firstChild=this._nextSibling),o.remove(this),w.modify())}},replaceWith:{value:function(){var w=Array.prototype.slice.call(arguments),E=this.parentNode,M=this.nextSibling;if(E!==null){for(;M&&w.some(function(A){return A===M});)M=M.nextSibling;var I=a(this.doc,w);this.parentNode===E?E.replaceChild(I,this):E.insertBefore(I,M)}}}};t.exports=s}}),vS=ci({"external/npm/node_modules/domino/lib/NonDocumentTypeChildNode.js"(r,t){"use strict";var e=ko(),o={nextElementSibling:{get:function(){if(this.parentNode){for(var a=this.nextSibling;a!==null;a=a.nextSibling)if(a.nodeType===e.ELEMENT_NODE)return a}return null}},previousElementSibling:{get:function(){if(this.parentNode){for(var a=this.previousSibling;a!==null;a=a.previousSibling)if(a.nodeType===e.ELEMENT_NODE)return a}return null}}};t.exports=o}}),xS=ci({"external/npm/node_modules/domino/lib/NamedNodeMap.js"(r,t){"use strict";t.exports=o;var e=fn();function o(a){this.element=a}Object.defineProperties(o.prototype,{length:{get:e.shouldOverride},item:{value:e.shouldOverride},getNamedItem:{value:function(s){return this.element.getAttributeNode(s)}},getNamedItemNS:{value:function(s,_){return this.element.getAttributeNodeNS(s,_)}},setNamedItem:{value:e.nyi},setNamedItemNS:{value:e.nyi},removeNamedItem:{value:function(s){var _=this.element.getAttributeNode(s);if(_)return this.element.removeAttribute(s),_;e.NotFoundError()}},removeNamedItemNS:{value:function(s,_){var w=this.element.getAttributeNodeNS(s,_);if(w)return this.element.removeAttributeNS(s,_),w;e.NotFoundError()}}})}}),If=ci({"external/npm/node_modules/domino/lib/Element.js"(r,t){"use strict";t.exports=ne;var e=lv(),o=fn(),a=o.NAMESPACE,s=bS(),_=ko(),w=Ch(),E=_S(),M=UR(),I=ov(),A=yS(),R=cv(),$=av(),W=uv(),G=vS(),pe=xS(),le=Object.create(null);function ne(ee,B,fe,Ue){$.call(this),this.nodeType=_.ELEMENT_NODE,this.ownerDocument=ee,this.localName=B,this.namespaceURI=fe,this.prefix=Ue,this._tagName=void 0,this._attrsByQName=Object.create(null),this._attrsByLName=Object.create(null),this._attrKeys=[]}function re(ee,B){if(ee.nodeType===_.TEXT_NODE)B.push(ee._data);else for(var fe=0,Ue=ee.childNodes.length;fe<Ue;fe++)re(ee.childNodes[fe],B)}ne.prototype=Object.create($.prototype,{isHTML:{get:function(){return this.namespaceURI===a.HTML&&this.ownerDocument.isHTML}},tagName:{get:function(){if(this._tagName===void 0){var B;if(this.prefix===null?B=this.localName:B=this.prefix+":"+this.localName,this.isHTML){var fe=le[B];fe||(le[B]=fe=o.toASCIIUpperCase(B)),B=fe}this._tagName=B}return this._tagName}},nodeName:{get:function(){return this.tagName}},nodeValue:{get:function(){return null},set:function(){}},textContent:{get:function(){var ee=[];return re(this,ee),ee.join("")},set:function(ee){this.removeChildren(),ee!=null&&ee!==""&&this._appendChild(this.ownerDocument.createTextNode(ee))}},innerText:{get:function(){var ee=[];return re(this,ee),ee.join("").replace(/[ \t\n\f\r]+/g," ").trim()},set:function(ee){this.removeChildren(),ee!=null&&ee!==""&&this._appendChild(this.ownerDocument.createTextNode(ee))}},innerHTML:{get:function(){return this.serialize()},set:o.nyi},outerHTML:{get:function(){return E.serializeOne(this,{nodeType:0})},set:function(ee){var B=this.ownerDocument,fe=this.parentNode;if(fe!==null){fe.nodeType===_.DOCUMENT_NODE&&o.NoModificationAllowedError(),fe.nodeType===_.DOCUMENT_FRAGMENT_NODE&&(fe=fe.ownerDocument.createElement("body"));var Ue=B.implementation.mozHTMLParser(B._address,fe);Ue.parse(ee===null?"":String(ee),!0),this.replaceWith(Ue._asDocumentFragment())}}},_insertAdjacent:{value:function(B,fe){var Ue=!1;switch(B){case"beforebegin":Ue=!0;case"afterend":var ot=this.parentNode;return ot===null?null:ot.insertBefore(fe,Ue?this:this.nextSibling);case"afterbegin":Ue=!0;case"beforeend":return this.insertBefore(fe,Ue?this.firstChild:null);default:return o.SyntaxError()}}},insertAdjacentElement:{value:function(B,fe){if(fe.nodeType!==_.ELEMENT_NODE)throw new TypeError("not an element");return B=o.toASCIILowerCase(String(B)),this._insertAdjacent(B,fe)}},insertAdjacentText:{value:function(B,fe){var Ue=this.ownerDocument.createTextNode(fe);B=o.toASCIILowerCase(String(B)),this._insertAdjacent(B,Ue)}},insertAdjacentHTML:{value:function(B,fe){B=o.toASCIILowerCase(String(B)),fe=String(fe);var Ue;switch(B){case"beforebegin":case"afterend":Ue=this.parentNode,(Ue===null||Ue.nodeType===_.DOCUMENT_NODE)&&o.NoModificationAllowedError();break;case"afterbegin":case"beforeend":Ue=this;break;default:o.SyntaxError()}(!(Ue instanceof ne)||Ue.ownerDocument.isHTML&&Ue.localName==="html"&&Ue.namespaceURI===a.HTML)&&(Ue=Ue.ownerDocument.createElementNS(a.HTML,"body"));var ot=this.ownerDocument.implementation.mozHTMLParser(this.ownerDocument._address,Ue);ot.parse(fe,!0),this._insertAdjacent(B,ot._asDocumentFragment())}},children:{get:function(){return this._children||(this._children=new tt(this)),this._children}},attributes:{get:function(){return this._attributes||(this._attributes=new oe(this)),this._attributes}},firstElementChild:{get:function(){for(var ee=this.firstChild;ee!==null;ee=ee.nextSibling)if(ee.nodeType===_.ELEMENT_NODE)return ee;return null}},lastElementChild:{get:function(){for(var ee=this.lastChild;ee!==null;ee=ee.previousSibling)if(ee.nodeType===_.ELEMENT_NODE)return ee;return null}},childElementCount:{get:function(){return this.children.length}},nextElement:{value:function(ee){ee||(ee=this.ownerDocument.documentElement);var B=this.firstElementChild;if(!B){if(this===ee)return null;B=this.nextElementSibling}if(B)return B;for(var fe=this.parentElement;fe&&fe!==ee;fe=fe.parentElement)if(B=fe.nextElementSibling,B)return B;return null}},getElementsByTagName:{value:function(B){var fe;return B?(B==="*"?fe=function(){return!0}:this.isHTML?fe=Qe(B):fe=ct(B),new M(this,fe)):new w}},getElementsByTagNameNS:{value:function(B,fe){var Ue;return B==="*"&&fe==="*"?Ue=function(){return!0}:B==="*"?Ue=ct(fe):fe==="*"?Ue=ve(B):Ue=Ge(B,fe),new M(this,Ue)}},getElementsByClassName:{value:function(B){if(B=String(B).trim(),B===""){var fe=new w;return fe}return B=B.split(/[ \t\r\n\f]+/),new M(this,bt(B))}},getElementsByName:{value:function(B){return new M(this,ae(String(B)))}},clone:{value:function(){var B;this.namespaceURI!==a.HTML||this.prefix||!this.ownerDocument.isHTML?B=this.ownerDocument.createElementNS(this.namespaceURI,this.prefix!==null?this.prefix+":"+this.localName:this.localName):B=this.ownerDocument.createElement(this.localName);for(var fe=0,Ue=this._attrKeys.length;fe<Ue;fe++){var ot=this._attrKeys[fe],Pt=this._attrsByLName[ot],Bt=Pt.cloneNode();Bt._setOwnerElement(B),B._attrsByLName[ot]=Bt,B._addQName(Bt)}return B._attrKeys=this._attrKeys.concat(),B}},isEqual:{value:function(B){if(this.localName!==B.localName||this.namespaceURI!==B.namespaceURI||this.prefix!==B.prefix||this._numattrs!==B._numattrs)return!1;for(var fe=0,Ue=this._numattrs;fe<Ue;fe++){var ot=this._attr(fe);if(!B.hasAttributeNS(ot.namespaceURI,ot.localName)||B.getAttributeNS(ot.namespaceURI,ot.localName)!==ot.value)return!1}return!0}},_lookupNamespacePrefix:{value:function(B,fe){if(this.namespaceURI&&this.namespaceURI===B&&this.prefix!==null&&fe.lookupNamespaceURI(this.prefix)===B)return this.prefix;for(var Ue=0,ot=this._numattrs;Ue<ot;Ue++){var Pt=this._attr(Ue);if(Pt.prefix==="xmlns"&&Pt.value===B&&fe.lookupNamespaceURI(Pt.localName)===B)return Pt.localName}var Bt=this.parentElement;return Bt?Bt._lookupNamespacePrefix(B,fe):null}},lookupNamespaceURI:{value:function(B){if((B===""||B===void 0)&&(B=null),this.namespaceURI!==null&&this.prefix===B)return this.namespaceURI;for(var fe=0,Ue=this._numattrs;fe<Ue;fe++){var ot=this._attr(fe);if(ot.namespaceURI===a.XMLNS&&(ot.prefix==="xmlns"&&ot.localName===B||B===null&&ot.prefix===null&&ot.localName==="xmlns"))return ot.value||null}var Pt=this.parentElement;return Pt?Pt.lookupNamespaceURI(B):null}},getAttribute:{value:function(B){var fe=this.getAttributeNode(B);return fe?fe.value:null}},getAttributeNS:{value:function(B,fe){var Ue=this.getAttributeNodeNS(B,fe);return Ue?Ue.value:null}},getAttributeNode:{value:function(B){B=String(B),/[A-Z]/.test(B)&&this.isHTML&&(B=o.toASCIILowerCase(B));var fe=this._attrsByQName[B];return fe?(Array.isArray(fe)&&(fe=fe[0]),fe):null}},getAttributeNodeNS:{value:function(B,fe){B=B==null?"":String(B),fe=String(fe);var Ue=this._attrsByLName[B+"|"+fe];return Ue||null}},hasAttribute:{value:function(B){return B=String(B),/[A-Z]/.test(B)&&this.isHTML&&(B=o.toASCIILowerCase(B)),this._attrsByQName[B]!==void 0}},hasAttributeNS:{value:function(B,fe){B=B==null?"":String(B),fe=String(fe);var Ue=B+"|"+fe;return this._attrsByLName[Ue]!==void 0}},hasAttributes:{value:function(){return this._numattrs>0}},toggleAttribute:{value:function(B,fe){B=String(B),e.isValidName(B)||o.InvalidCharacterError(),/[A-Z]/.test(B)&&this.isHTML&&(B=o.toASCIILowerCase(B));var Ue=this._attrsByQName[B];return Ue===void 0?fe===void 0||fe===!0?(this._setAttribute(B,""),!0):!1:fe===void 0||fe===!1?(this.removeAttribute(B),!1):!0}},_setAttribute:{value:function(B,fe){var Ue=this._attrsByQName[B],ot;Ue?Array.isArray(Ue)&&(Ue=Ue[0]):(Ue=this._newattr(B),ot=!0),Ue.value=fe,this._attributes&&(this._attributes[B]=Ue),ot&&this._newattrhook&&this._newattrhook(B,fe)}},setAttribute:{value:function(B,fe){B=String(B),e.isValidName(B)||o.InvalidCharacterError(),/[A-Z]/.test(B)&&this.isHTML&&(B=o.toASCIILowerCase(B)),this._setAttribute(B,String(fe))}},_setAttributeNS:{value:function(B,fe,Ue){var ot=fe.indexOf(":"),Pt,Bt;ot<0?(Pt=null,Bt=fe):(Pt=fe.substring(0,ot),Bt=fe.substring(ot+1)),(B===""||B===void 0)&&(B=null);var Di=(B===null?"":B)+"|"+Bt,Ie=this._attrsByLName[Di],Le;Ie||(Ie=new ue(this,Bt,Pt,B),Le=!0,this._attrsByLName[Di]=Ie,this._attributes&&(this._attributes[this._attrKeys.length]=Ie),this._attrKeys.push(Di),this._addQName(Ie)),Ie.value=Ue,Le&&this._newattrhook&&this._newattrhook(fe,Ue)}},setAttributeNS:{value:function(B,fe,Ue){B=B==null||B===""?null:String(B),fe=String(fe),e.isValidQName(fe)||o.InvalidCharacterError();var ot=fe.indexOf(":"),Pt=ot<0?null:fe.substring(0,ot);(Pt!==null&&B===null||Pt==="xml"&&B!==a.XML||(fe==="xmlns"||Pt==="xmlns")&&B!==a.XMLNS||B===a.XMLNS&&!(fe==="xmlns"||Pt==="xmlns"))&&o.NamespaceError(),this._setAttributeNS(B,fe,String(Ue))}},setAttributeNode:{value:function(B){if(B.ownerElement!==null&&B.ownerElement!==this)throw new I(I.INUSE_ATTRIBUTE_ERR);var fe=null,Ue=this._attrsByQName[B.name];if(Ue){if(Array.isArray(Ue)||(Ue=[Ue]),Ue.some(function(ot){return ot===B}))return B;if(B.ownerElement!==null)throw new I(I.INUSE_ATTRIBUTE_ERR);Ue.forEach(function(ot){this.removeAttributeNode(ot)},this),fe=Ue[0]}return this.setAttributeNodeNS(B),fe}},setAttributeNodeNS:{value:function(B){if(B.ownerElement!==null)throw new I(I.INUSE_ATTRIBUTE_ERR);var fe=B.namespaceURI,Ue=(fe===null?"":fe)+"|"+B.localName,ot=this._attrsByLName[Ue];return ot&&this.removeAttributeNode(ot),B._setOwnerElement(this),this._attrsByLName[Ue]=B,this._attributes&&(this._attributes[this._attrKeys.length]=B),this._attrKeys.push(Ue),this._addQName(B),this._newattrhook&&this._newattrhook(B.name,B.value),ot||null}},removeAttribute:{value:function(B){B=String(B),/[A-Z]/.test(B)&&this.isHTML&&(B=o.toASCIILowerCase(B));var fe=this._attrsByQName[B];if(fe){Array.isArray(fe)?fe.length>2?fe=fe.shift():(this._attrsByQName[B]=fe[1],fe=fe[0]):this._attrsByQName[B]=void 0;var Ue=fe.namespaceURI,ot=(Ue===null?"":Ue)+"|"+fe.localName;this._attrsByLName[ot]=void 0;var Pt=this._attrKeys.indexOf(ot);this._attributes&&(Array.prototype.splice.call(this._attributes,Pt,1),this._attributes[B]=void 0),this._attrKeys.splice(Pt,1);var Bt=fe.onchange;fe._setOwnerElement(null),Bt&&Bt.call(fe,this,fe.localName,fe.value,null),this.rooted&&this.ownerDocument.mutateRemoveAttr(fe)}}},removeAttributeNS:{value:function(B,fe){B=B==null?"":String(B),fe=String(fe);var Ue=B+"|"+fe,ot=this._attrsByLName[Ue];if(ot){this._attrsByLName[Ue]=void 0;var Pt=this._attrKeys.indexOf(Ue);this._attributes&&Array.prototype.splice.call(this._attributes,Pt,1),this._attrKeys.splice(Pt,1),this._removeQName(ot);var Bt=ot.onchange;ot._setOwnerElement(null),Bt&&Bt.call(ot,this,ot.localName,ot.value,null),this.rooted&&this.ownerDocument.mutateRemoveAttr(ot)}}},removeAttributeNode:{value:function(B){var fe=B.namespaceURI,Ue=(fe===null?"":fe)+"|"+B.localName;return this._attrsByLName[Ue]!==B&&o.NotFoundError(),this.removeAttributeNS(fe,B.localName),B}},getAttributeNames:{value:function(){var B=this;return this._attrKeys.map(function(fe){return B._attrsByLName[fe].name})}},_getattr:{value:function(B){var fe=this._attrsByQName[B];return fe?fe.value:null}},_setattr:{value:function(B,fe){var Ue=this._attrsByQName[B],ot;Ue||(Ue=this._newattr(B),ot=!0),Ue.value=String(fe),this._attributes&&(this._attributes[B]=Ue),ot&&this._newattrhook&&this._newattrhook(B,fe)}},_newattr:{value:function(B){var fe=new ue(this,B,null,null),Ue="|"+B;return this._attrsByQName[B]=fe,this._attrsByLName[Ue]=fe,this._attributes&&(this._attributes[this._attrKeys.length]=fe),this._attrKeys.push(Ue),fe}},_addQName:{value:function(ee){var B=ee.name,fe=this._attrsByQName[B];fe?Array.isArray(fe)?fe.push(ee):this._attrsByQName[B]=[fe,ee]:this._attrsByQName[B]=ee,this._attributes&&(this._attributes[B]=ee)}},_removeQName:{value:function(ee){var B=ee.name,fe=this._attrsByQName[B];if(Array.isArray(fe)){var Ue=fe.indexOf(ee);o.assert(Ue!==-1),fe.length===2?(this._attrsByQName[B]=fe[1-Ue],this._attributes&&(this._attributes[B]=this._attrsByQName[B])):(fe.splice(Ue,1),this._attributes&&this._attributes[B]===ee&&(this._attributes[B]=fe[0]))}else o.assert(fe===ee),this._attrsByQName[B]=void 0,this._attributes&&(this._attributes[B]=void 0)}},_numattrs:{get:function(){return this._attrKeys.length}},_attr:{value:function(ee){return this._attrsByLName[this._attrKeys[ee]]}},id:s.property({name:"id"}),className:s.property({name:"class"}),classList:{get:function(){var ee=this;if(this._classList)return this._classList;var B=new A(function(){return ee.className||""},function(fe){ee.className=fe});return this._classList=B,B},set:function(ee){this.className=ee}},matches:{value:function(ee){return R.matches(this,ee)}},closest:{value:function(ee){var B=this;do{if(B.matches&&B.matches(ee))return B;B=B.parentElement||B.parentNode}while(B!==null&&B.nodeType===_.ELEMENT_NODE);return null}},querySelector:{value:function(ee){return R(ee,this)[0]}},querySelectorAll:{value:function(ee){var B=R(ee,this);return B.item?B:new w(B)}}}),Object.defineProperties(ne.prototype,W),Object.defineProperties(ne.prototype,G),s.registerChangeHandler(ne,"id",function(ee,B,fe,Ue){ee.rooted&&(fe&&ee.ownerDocument.delId(fe,ee),Ue&&ee.ownerDocument.addId(Ue,ee))}),s.registerChangeHandler(ne,"class",function(ee,B,fe,Ue){ee._classList&&ee._classList._update()});function ue(ee,B,fe,Ue,ot){this.localName=B,this.prefix=fe===null||fe===""?null:""+fe,this.namespaceURI=Ue===null||Ue===""?null:""+Ue,this.data=ot,this._setOwnerElement(ee)}ue.prototype=Object.create(Object.prototype,{ownerElement:{get:function(){return this._ownerElement}},_setOwnerElement:{value:function(B){this._ownerElement=B,this.prefix===null&&this.namespaceURI===null&&B?this.onchange=B._attributeChangeHandlers[this.localName]:this.onchange=null}},name:{get:function(){return this.prefix?this.prefix+":"+this.localName:this.localName}},specified:{get:function(){return!0}},value:{get:function(){return this.data},set:function(ee){var B=this.data;ee=ee===void 0?"":ee+"",ee!==B&&(this.data=ee,this.ownerElement&&(this.onchange&&this.onchange(this.ownerElement,this.localName,B,ee),this.ownerElement.rooted&&this.ownerElement.ownerDocument.mutateAttr(this,B)))}},cloneNode:{value:function(B){return new ue(null,this.localName,this.prefix,this.namespaceURI,this.data)}},nodeType:{get:function(){return _.ATTRIBUTE_NODE}},nodeName:{get:function(){return this.name}},nodeValue:{get:function(){return this.value},set:function(ee){this.value=ee}},textContent:{get:function(){return this.value},set:function(ee){ee==null&&(ee=""),this.value=ee}},innerText:{get:function(){return this.value},set:function(ee){ee==null&&(ee=""),this.value=ee}}}),ne._Attr=ue;function oe(ee){pe.call(this,ee);for(var B in ee._attrsByQName)this[B]=ee._attrsByQName[B];for(var fe=0;fe<ee._attrKeys.length;fe++)this[fe]=ee._attrsByLName[ee._attrKeys[fe]]}oe.prototype=Object.create(pe.prototype,{length:{get:function(){return this.element._attrKeys.length},set:function(){}},item:{value:function(ee){return ee=ee>>>0,ee>=this.length?null:this.element._attrsByLName[this.element._attrKeys[ee]]}}});var Ve;(Ve=globalThis.Symbol)!=null&&Ve.iterator&&(oe.prototype[globalThis.Symbol.iterator]=function(){var ee=0,B=this.length,fe=this;return{next:function(){return ee<B?{value:fe.item(ee++)}:{done:!0}}}});function tt(ee){this.element=ee,this.updateCache()}tt.prototype=Object.create(Object.prototype,{length:{get:function(){return this.updateCache(),this.childrenByNumber.length}},item:{value:function(B){return this.updateCache(),this.childrenByNumber[B]||null}},namedItem:{value:function(B){return this.updateCache(),this.childrenByName[B]||null}},namedItems:{get:function(){return this.updateCache(),this.childrenByName}},updateCache:{value:function(){var B=/^(a|applet|area|embed|form|frame|frameset|iframe|img|object)$/;if(this.lastModTime!==this.element.lastModTime){this.lastModTime=this.element.lastModTime;for(var fe=this.childrenByNumber&&this.childrenByNumber.length||0,Ue=0;Ue<fe;Ue++)this[Ue]=void 0;this.childrenByNumber=[],this.childrenByName=Object.create(null);for(var ot=this.element.firstChild;ot!==null;ot=ot.nextSibling)if(ot.nodeType===_.ELEMENT_NODE){this[this.childrenByNumber.length]=ot,this.childrenByNumber.push(ot);var Pt=ot.getAttribute("id");Pt&&!this.childrenByName[Pt]&&(this.childrenByName[Pt]=ot);var Bt=ot.getAttribute("name");Bt&&this.element.namespaceURI===a.HTML&&B.test(this.element.localName)&&!this.childrenByName[Bt]&&(this.childrenByName[Pt]=ot)}}}}});function ct(ee){return function(B){return B.localName===ee}}function Qe(ee){var B=o.toASCIILowerCase(ee);return B===ee?ct(ee):function(fe){return fe.isHTML?fe.localName===B:fe.localName===ee}}function ve(ee){return function(B){return B.namespaceURI===ee}}function Ge(ee,B){return function(fe){return fe.namespaceURI===ee&&fe.localName===B}}function bt(ee){return function(B){return ee.every(function(fe){return B.classList.contains(fe)})}}function ae(ee){return function(B){return B.namespaceURI!==a.HTML?!1:B.getAttribute("name")===ee}}}}),wS=ci({"external/npm/node_modules/domino/lib/Leaf.js"(r,t){"use strict";t.exports=w;var e=ko(),o=Ch(),a=fn(),s=a.HierarchyRequestError,_=a.NotFoundError;function w(){e.call(this)}w.prototype=Object.create(e.prototype,{hasChildNodes:{value:function(){return!1}},firstChild:{value:null},lastChild:{value:null},insertBefore:{value:function(E,M){if(!E.nodeType)throw new TypeError("not a node");s()}},replaceChild:{value:function(E,M){if(!E.nodeType)throw new TypeError("not a node");s()}},removeChild:{value:function(E){if(!E.nodeType)throw new TypeError("not a node");_()}},removeChildren:{value:function(){}},childNodes:{get:function(){return this._childNodes||(this._childNodes=new o),this._childNodes}}})}}),Jg=ci({"external/npm/node_modules/domino/lib/CharacterData.js"(r,t){"use strict";t.exports=_;var e=wS(),o=fn(),a=uv(),s=vS();function _(){e.call(this)}_.prototype=Object.create(e.prototype,{substringData:{value:function(E,M){if(arguments.length<2)throw new TypeError("Not enough arguments");return E=E>>>0,M=M>>>0,(E>this.data.length||E<0||M<0)&&o.IndexSizeError(),this.data.substring(E,E+M)}},appendData:{value:function(E){if(arguments.length<1)throw new TypeError("Not enough arguments");this.data+=String(E)}},insertData:{value:function(E,M){return this.replaceData(E,0,M)}},deleteData:{value:function(E,M){return this.replaceData(E,M,"")}},replaceData:{value:function(E,M,I){var A=this.data,R=A.length;E=E>>>0,M=M>>>0,I=String(I),(E>R||E<0)&&o.IndexSizeError(),E+M>R&&(M=R-E);var $=A.substring(0,E),W=A.substring(E+M);this.data=$+I+W}},isEqual:{value:function(E){return this._data===E._data}},length:{get:function(){return this.data.length}}}),Object.defineProperties(_.prototype,a),Object.defineProperties(_.prototype,s)}}),CS=ci({"external/npm/node_modules/domino/lib/Text.js"(r,t){"use strict";t.exports=s;var e=fn(),o=ko(),a=Jg();function s(w,E){a.call(this),this.nodeType=o.TEXT_NODE,this.ownerDocument=w,this._data=E,this._index=void 0}var _={get:function(){return this._data},set:function(w){w==null?w="":w=String(w),w!==this._data&&(this._data=w,this.rooted&&this.ownerDocument.mutateValue(this),this.parentNode&&this.parentNode._textchangehook&&this.parentNode._textchangehook(this))}};s.prototype=Object.create(a.prototype,{nodeName:{value:"#text"},nodeValue:_,textContent:_,innerText:_,data:{get:_.get,set:function(w){_.set.call(this,w===null?"":String(w))}},splitText:{value:function(E){(E>this._data.length||E<0)&&e.IndexSizeError();var M=this._data.substring(E),I=this.ownerDocument.createTextNode(M);this.data=this.data.substring(0,E);var A=this.parentNode;return A!==null&&A.insertBefore(I,this.nextSibling),I}},wholeText:{get:function(){for(var E=this.textContent,M=this.nextSibling;M&&M.nodeType===o.TEXT_NODE;M=M.nextSibling)E+=M.textContent;return E}},replaceWholeText:{value:e.nyi},clone:{value:function(){return new s(this.ownerDocument,this._data)}}})}}),ES=ci({"external/npm/node_modules/domino/lib/Comment.js"(r,t){"use strict";t.exports=a;var e=ko(),o=Jg();function a(_,w){o.call(this),this.nodeType=e.COMMENT_NODE,this.ownerDocument=_,this._data=w}var s={get:function(){return this._data},set:function(_){_==null?_="":_=String(_),this._data=_,this.rooted&&this.ownerDocument.mutateValue(this)}};a.prototype=Object.create(o.prototype,{nodeName:{value:"#comment"},nodeValue:s,textContent:s,innerText:s,data:{get:s.get,set:function(_){s.set.call(this,_===null?"":String(_))}},clone:{value:function(){return new a(this.ownerDocument,this._data)}}})}}),SS=ci({"external/npm/node_modules/domino/lib/DocumentFragment.js"(r,t){"use strict";t.exports=E;var e=ko(),o=Ch(),a=av(),s=If(),_=cv(),w=fn();function E(M){a.call(this),this.nodeType=e.DOCUMENT_FRAGMENT_NODE,this.ownerDocument=M}E.prototype=Object.create(a.prototype,{nodeName:{value:"#document-fragment"},nodeValue:{get:function(){return null},set:function(){}},textContent:Object.getOwnPropertyDescriptor(s.prototype,"textContent"),innerText:Object.getOwnPropertyDescriptor(s.prototype,"innerText"),querySelector:{value:function(M){var I=this.querySelectorAll(M);return I.length?I[0]:null}},querySelectorAll:{value:function(M){var I=Object.create(this);I.isHTML=!0,I.getElementsByTagName=s.prototype.getElementsByTagName,I.nextElement=Object.getOwnPropertyDescriptor(s.prototype,"firstElementChild").get;var A=_(M,I);return A.item?A:new o(A)}},clone:{value:function(){return new E(this.ownerDocument)}},isEqual:{value:function(I){return!0}},innerHTML:{get:function(){return this.serialize()},set:w.nyi},outerHTML:{get:function(){return this.serialize()},set:w.nyi}})}}),TS=ci({"external/npm/node_modules/domino/lib/ProcessingInstruction.js"(r,t){"use strict";t.exports=a;var e=ko(),o=Jg();function a(_,w,E){o.call(this),this.nodeType=e.PROCESSING_INSTRUCTION_NODE,this.ownerDocument=_,this.target=w,this._data=E}var s={get:function(){return this._data},set:function(_){_==null?_="":_=String(_),this._data=_,this.rooted&&this.ownerDocument.mutateValue(this)}};a.prototype=Object.create(o.prototype,{nodeName:{get:function(){return this.target}},nodeValue:s,textContent:s,innerText:s,data:{get:s.get,set:function(_){s.set.call(this,_===null?"":String(_))}},clone:{value:function(){return new a(this.ownerDocument,this.target,this._data)}},isEqual:{value:function(w){return this.target===w.target&&this._data===w._data}}})}}),e0=ci({"external/npm/node_modules/domino/lib/NodeFilter.js"(r,t){"use strict";var e={FILTER_ACCEPT:1,FILTER_REJECT:2,FILTER_SKIP:3,SHOW_ALL:4294967295,SHOW_ELEMENT:1,SHOW_ATTRIBUTE:2,SHOW_TEXT:4,SHOW_CDATA_SECTION:8,SHOW_ENTITY_REFERENCE:16,SHOW_ENTITY:32,SHOW_PROCESSING_INSTRUCTION:64,SHOW_COMMENT:128,SHOW_DOCUMENT:256,SHOW_DOCUMENT_TYPE:512,SHOW_DOCUMENT_FRAGMENT:1024,SHOW_NOTATION:2048};t.exports=e.constructor=e.prototype=e}}),MS=ci({"external/npm/node_modules/domino/lib/NodeTraversal.js"(r,t){"use strict";var e=t.exports={nextSkippingChildren:o,nextAncestorSibling:a,next:s,previous:w,deepLastChild:_};function o(E,M){return E===M?null:E.nextSibling!==null?E.nextSibling:a(E,M)}function a(E,M){for(E=E.parentNode;E!==null;E=E.parentNode){if(E===M)return null;if(E.nextSibling!==null)return E.nextSibling}return null}function s(E,M){var I;return I=E.firstChild,I!==null?I:E===M?null:(I=E.nextSibling,I!==null?I:a(E,M))}function _(E){for(;E.lastChild;)E=E.lastChild;return E}function w(E,M){var I;return I=E.previousSibling,I!==null?_(I):(I=E.parentNode,I===M?null:I)}}}),jR=ci({"external/npm/node_modules/domino/lib/TreeWalker.js"(r,t){"use strict";t.exports=I;var e=ko(),o=e0(),a=MS(),s=fn(),_={first:"firstChild",last:"lastChild",next:"firstChild",previous:"lastChild"},w={first:"nextSibling",last:"previousSibling",next:"nextSibling",previous:"previousSibling"};function E(A,R){var $,W,G,pe,le;for(W=A._currentNode[_[R]];W!==null;){if(pe=A._internalFilter(W),pe===o.FILTER_ACCEPT)return A._currentNode=W,W;if(pe===o.FILTER_SKIP&&($=W[_[R]],$!==null)){W=$;continue}for(;W!==null;){if(le=W[w[R]],le!==null){W=le;break}if(G=W.parentNode,G===null||G===A.root||G===A._currentNode)return null;W=G}}return null}function M(A,R){var $,W,G;if($=A._currentNode,$===A.root)return null;for(;;){for(G=$[w[R]];G!==null;){if($=G,W=A._internalFilter($),W===o.FILTER_ACCEPT)return A._currentNode=$,$;G=$[_[R]],(W===o.FILTER_REJECT||G===null)&&(G=$[w[R]])}if($=$.parentNode,$===null||$===A.root||A._internalFilter($)===o.FILTER_ACCEPT)return null}}function I(A,R,$){(!A||!A.nodeType)&&s.NotSupportedError(),this._root=A,this._whatToShow=Number(R)||0,this._filter=$||null,this._active=!1,this._currentNode=A}Object.defineProperties(I.prototype,{root:{get:function(){return this._root}},whatToShow:{get:function(){return this._whatToShow}},filter:{get:function(){return this._filter}},currentNode:{get:function(){return this._currentNode},set:function(R){if(!(R instanceof e))throw new TypeError("Not a Node");this._currentNode=R}},_internalFilter:{value:function(R){var $,W;if(this._active&&s.InvalidStateError(),!(1<<R.nodeType-1&this._whatToShow))return o.FILTER_SKIP;if(W=this._filter,W===null)$=o.FILTER_ACCEPT;else{this._active=!0;try{typeof W=="function"?$=W(R):$=W.acceptNode(R)}finally{this._active=!1}}return+$}},parentNode:{value:function(){for(var R=this._currentNode;R!==this.root;){if(R=R.parentNode,R===null)return null;if(this._internalFilter(R)===o.FILTER_ACCEPT)return this._currentNode=R,R}return null}},firstChild:{value:function(){return E(this,"first")}},lastChild:{value:function(){return E(this,"last")}},previousSibling:{value:function(){return M(this,"previous")}},nextSibling:{value:function(){return M(this,"next")}},previousNode:{value:function(){var R,$,W,G;for(R=this._currentNode;R!==this._root;){for(W=R.previousSibling;W;W=R.previousSibling)if(R=W,$=this._internalFilter(R),$!==o.FILTER_REJECT){for(G=R.lastChild;G&&(R=G,$=this._internalFilter(R),$!==o.FILTER_REJECT);G=R.lastChild);if($===o.FILTER_ACCEPT)return this._currentNode=R,R}if(R===this.root||R.parentNode===null)return null;if(R=R.parentNode,this._internalFilter(R)===o.FILTER_ACCEPT)return this._currentNode=R,R}return null}},nextNode:{value:function(){var R,$,W,G;R=this._currentNode,$=o.FILTER_ACCEPT;e:for(;;){for(W=R.firstChild;W;W=R.firstChild){if(R=W,$=this._internalFilter(R),$===o.FILTER_ACCEPT)return this._currentNode=R,R;if($===o.FILTER_REJECT)break}for(G=a.nextSkippingChildren(R,this.root);G;G=a.nextSkippingChildren(R,this.root)){if(R=G,$=this._internalFilter(R),$===o.FILTER_ACCEPT)return this._currentNode=R,R;if($===o.FILTER_SKIP)continue e}return null}}},toString:{value:function(){return"[object TreeWalker]"}}})}}),qR=ci({"external/npm/node_modules/domino/lib/NodeIterator.js"(r,t){"use strict";t.exports=E;var e=e0(),o=MS(),a=fn();function s(M,I,A){return A?o.next(M,I):M===I?null:o.previous(M,null)}function _(M,I){for(;I;I=I.parentNode)if(M===I)return!0;return!1}function w(M,I){var A,R;for(A=M._referenceNode,R=M._pointerBeforeReferenceNode;;){if(R===I)R=!R;else if(A=s(A,M._root,I),A===null)return null;var $=M._internalFilter(A);if($===e.FILTER_ACCEPT)break}return M._referenceNode=A,M._pointerBeforeReferenceNode=R,A}function E(M,I,A){(!M||!M.nodeType)&&a.NotSupportedError(),this._root=M,this._referenceNode=M,this._pointerBeforeReferenceNode=!0,this._whatToShow=Number(I)||0,this._filter=A||null,this._active=!1,M.doc._attachNodeIterator(this)}Object.defineProperties(E.prototype,{root:{get:function(){return this._root}},referenceNode:{get:function(){return this._referenceNode}},pointerBeforeReferenceNode:{get:function(){return this._pointerBeforeReferenceNode}},whatToShow:{get:function(){return this._whatToShow}},filter:{get:function(){return this._filter}},_internalFilter:{value:function(I){var A,R;if(this._active&&a.InvalidStateError(),!(1<<I.nodeType-1&this._whatToShow))return e.FILTER_SKIP;if(R=this._filter,R===null)A=e.FILTER_ACCEPT;else{this._active=!0;try{typeof R=="function"?A=R(I):A=R.acceptNode(I)}finally{this._active=!1}}return+A}},_preremove:{value:function(I){if(!_(I,this._root)&&_(I,this._referenceNode)){if(this._pointerBeforeReferenceNode){for(var A=I;A.lastChild;)A=A.lastChild;if(A=o.next(A,this.root),A){this._referenceNode=A;return}this._pointerBeforeReferenceNode=!1}if(I.previousSibling===null)this._referenceNode=I.parentNode;else{this._referenceNode=I.previousSibling;var R;for(R=this._referenceNode.lastChild;R;R=this._referenceNode.lastChild)this._referenceNode=R}}}},nextNode:{value:function(){return w(this,!0)}},previousNode:{value:function(){return w(this,!1)}},detach:{value:function(){}},toString:{value:function(){return"[object NodeIterator]"}}})}}),dv=ci({"external/npm/node_modules/domino/lib/URL.js"(r,t){"use strict";t.exports=e;function e(o){if(!o)return Object.create(e.prototype);this.url=o.replace(/^[ \t\n\r\f]+|[ \t\n\r\f]+$/g,"");var a=e.pattern.exec(this.url);if(a){if(a[2]&&(this.scheme=a[2]),a[4]){var s=a[4].match(e.userinfoPattern);if(s&&(this.username=s[1],this.password=s[3],a[4]=a[4].substring(s[0].length)),a[4].match(e.portPattern)){var _=a[4].lastIndexOf(":");this.host=a[4].substring(0,_),this.port=a[4].substring(_+1)}else this.host=a[4]}a[5]&&(this.path=a[5]),a[6]&&(this.query=a[7]),a[8]&&(this.fragment=a[9])}}e.pattern=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,e.userinfoPattern=/^([^@:]*)(:([^@]*))?@/,e.portPattern=/:\d+$/,e.authorityPattern=/^[^:\/?#]+:\/\//,e.hierarchyPattern=/^[^:\/?#]+:\//,e.percentEncode=function(a){var s=a.charCodeAt(0);if(s<256)return"%"+s.toString(16);throw Error("can't percent-encode codepoints > 255 yet")},e.prototype={constructor:e,isAbsolute:function(){return!!this.scheme},isAuthorityBased:function(){return e.authorityPattern.test(this.url)},isHierarchical:function(){return e.hierarchyPattern.test(this.url)},toString:function(){var o="";return this.scheme!==void 0&&(o+=this.scheme+":"),this.isAbsolute()&&(o+="//",(this.username||this.password)&&(o+=this.username||"",this.password&&(o+=":"+this.password),o+="@"),this.host&&(o+=this.host)),this.port!==void 0&&(o+=":"+this.port),this.path!==void 0&&(o+=this.path),this.query!==void 0&&(o+="?"+this.query),this.fragment!==void 0&&(o+="#"+this.fragment),o},resolve:function(o){var a=this,s=new e(o),_=new e;return s.scheme!==void 0?(_.scheme=s.scheme,_.username=s.username,_.password=s.password,_.host=s.host,_.port=s.port,_.path=E(s.path),_.query=s.query):(_.scheme=a.scheme,s.host!==void 0?(_.username=s.username,_.password=s.password,_.host=s.host,_.port=s.port,_.path=E(s.path),_.query=s.query):(_.username=a.username,_.password=a.password,_.host=a.host,_.port=a.port,s.path?(s.path.charAt(0)==="/"?_.path=E(s.path):(_.path=w(a.path,s.path),_.path=E(_.path)),_.query=s.query):(_.path=a.path,s.query!==void 0?_.query=s.query:_.query=a.query))),_.fragment=s.fragment,_.toString();function w(M,I){if(a.host!==void 0&&!a.path)return"/"+I;var A=M.lastIndexOf("/");return A===-1?I:M.substring(0,A+1)+I}function E(M){if(!M)return M;for(var I="";M.length>0;){if(M==="."||M===".."){M="";break}var A=M.substring(0,2),R=M.substring(0,3),$=M.substring(0,4);if(R==="../")M=M.substring(3);else if(A==="./")M=M.substring(2);else if(R==="/./")M="/"+M.substring(3);else if(A==="/."&&M.length===2)M="/";else if($==="/../"||R==="/.."&&M.length===3)M="/"+M.substring(4),I=I.replace(/\/?[^\/]*$/,"");else{var W=M.match(/(\/?([^\/]*))/)[0];I+=W,M=M.substring(W.length)}}return I}}}}}),HR=ci({"external/npm/node_modules/domino/lib/CustomEvent.js"(r,t){"use strict";t.exports=o;var e=Mf();function o(a,s){e.call(this,a,s)}o.prototype=Object.create(e.prototype,{constructor:{value:o}})}}),IS=ci({"external/npm/node_modules/domino/lib/events.js"(r,t){"use strict";t.exports={Event:Mf(),UIEvent:pS(),MouseEvent:fS(),CustomEvent:HR()}}}),$R=ci({"external/npm/node_modules/domino/lib/style_parser.js"(r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hyphenate=r.parse=void 0;function t(o){let a=[],s=0,_=0,w=0,E=0,M=0,I=null;for(;s<o.length;)switch(o.charCodeAt(s++)){case 40:_++;break;case 41:_--;break;case 39:w===0?w=39:w===39&&o.charCodeAt(s-1)!==92&&(w=0);break;case 34:w===0?w=34:w===34&&o.charCodeAt(s-1)!==92&&(w=0);break;case 58:!I&&_===0&&w===0&&(I=e(o.substring(M,s-1).trim()),E=s);break;case 59:if(I&&E>0&&_===0&&w===0){let R=o.substring(E,s-1).trim();a.push(I,R),M=s,E=0,I=null}break}if(I&&E){let A=o.slice(E).trim();a.push(I,A)}return a}r.parse=t;function e(o){return o.replace(/[a-z][A-Z]/g,a=>a.charAt(0)+"-"+a.charAt(1)).toLowerCase()}r.hyphenate=e}}),hv=ci({"external/npm/node_modules/domino/lib/CSSStyleDeclaration.js"(r,t){"use strict";var{parse:e}=$R();t.exports=function(E){let M=new a(E),I={get:function(A,R){return R in A?A[R]:A.getPropertyValue(o(R))},has:function(A,R){return!0},set:function(A,R,$){return R in A?A[R]=$:A.setProperty(o(R),$??void 0),!0}};return new Proxy(M,I)};function o(E){return E.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function a(E){this._element=E}var s="!important";function _(E){let M={property:{},priority:{}};if(!E)return M;let I=e(E);if(I.length<2)return M;for(let A=0;A<I.length;A+=2){let R=I[A],$=I[A+1];$.endsWith(s)&&(M.priority[R]="important",$=$.slice(0,-s.length).trim()),M.property[R]=$}return M}var w={};a.prototype=Object.create(Object.prototype,{_parsed:{get:function(){if(!this._parsedStyles||this.cssText!==this._lastParsedText){var E=this.cssText;this._parsedStyles=_(E),this._lastParsedText=E,delete this._names}return this._parsedStyles}},_serialize:{value:function(){var E=this._parsed,M="";for(var I in E.property)M&&(M+=" "),M+=I+": "+E.property[I],E.priority[I]&&(M+=" !"+E.priority[I]),M+=";";this.cssText=M,this._lastParsedText=M,delete this._names}},cssText:{get:function(){return this._element.getAttribute("style")},set:function(E){this._element.setAttribute("style",E)}},length:{get:function(){return this._names||(this._names=Object.getOwnPropertyNames(this._parsed.property)),this._names.length}},item:{value:function(E){return this._names||(this._names=Object.getOwnPropertyNames(this._parsed.property)),this._names[E]}},getPropertyValue:{value:function(E){return E=E.toLowerCase(),this._parsed.property[E]||""}},getPropertyPriority:{value:function(E){return E=E.toLowerCase(),this._parsed.priority[E]||""}},setProperty:{value:function(E,M,I){if(E=E.toLowerCase(),M==null&&(M=""),I==null&&(I=""),M!==w&&(M=""+M),M=M.trim(),M===""){this.removeProperty(E);return}if(!(I!==""&&I!==w&&!/^important$/i.test(I))){var A=this._parsed;if(M===w){if(!A.property[E])return;I!==""?A.priority[E]="important":delete A.priority[E]}else{if(M.includes(";")&&!M.includes("data:"))return;var R=_(E+":"+M);if(Object.getOwnPropertyNames(R.property).length===0||Object.getOwnPropertyNames(R.priority).length!==0)return;for(var $ in R.property)A.property[$]=R.property[$],I!==w&&(I!==""?A.priority[$]="important":A.priority[$]&&delete A.priority[$])}this._serialize()}}},setPropertyValue:{value:function(E,M){return this.setProperty(E,M,w)}},setPropertyPriority:{value:function(E,M){return this.setProperty(E,w,M)}},removeProperty:{value:function(E){E=E.toLowerCase();var M=this._parsed;E in M.property&&(delete M.property[E],delete M.priority[E],this._serialize())}}})}}),AS=ci({"external/npm/node_modules/domino/lib/URLUtils.js"(r,t){"use strict";var e=dv();t.exports=o;function o(){}o.prototype=Object.create(Object.prototype,{_url:{get:function(){return new e(this.href)}},protocol:{get:function(){var a=this._url;return a&&a.scheme?a.scheme+":":":"},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&(a=a.replace(/:+$/,""),a=a.replace(/[^-+\.a-zA-Z0-9]/g,e.percentEncode),a.length>0&&(_.scheme=a,s=_.toString())),this.href=s}},host:{get:function(){var a=this._url;return a.isAbsolute()&&a.isAuthorityBased()?a.host+(a.port?":"+a.port:""):""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&_.isAuthorityBased()&&(a=a.replace(/[^-+\._~!$&'()*,;:=a-zA-Z0-9]/g,e.percentEncode),a.length>0&&(_.host=a,delete _.port,s=_.toString())),this.href=s}},hostname:{get:function(){var a=this._url;return a.isAbsolute()&&a.isAuthorityBased()?a.host:""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&_.isAuthorityBased()&&(a=a.replace(/^\/+/,""),a=a.replace(/[^-+\._~!$&'()*,;:=a-zA-Z0-9]/g,e.percentEncode),a.length>0&&(_.host=a,s=_.toString())),this.href=s}},port:{get:function(){var a=this._url;return a.isAbsolute()&&a.isAuthorityBased()&&a.port!==void 0?a.port:""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&_.isAuthorityBased()&&(a=""+a,a=a.replace(/[^0-9].*$/,""),a=a.replace(/^0+/,""),a.length===0&&(a="0"),parseInt(a,10)<=65535&&(_.port=a,s=_.toString())),this.href=s}},pathname:{get:function(){var a=this._url;return a.isAbsolute()&&a.isHierarchical()?a.path:""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&_.isHierarchical()&&(a.charAt(0)!=="/"&&(a="/"+a),a=a.replace(/[^-+\._~!$&'()*,;:=@\/a-zA-Z0-9]/g,e.percentEncode),_.path=a,s=_.toString()),this.href=s}},search:{get:function(){var a=this._url;return a.isAbsolute()&&a.isHierarchical()&&a.query!==void 0?"?"+a.query:""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&_.isHierarchical()&&(a.charAt(0)==="?"&&(a=a.substring(1)),a=a.replace(/[^-+\._~!$&'()*,;:=@\/?a-zA-Z0-9]/g,e.percentEncode),_.query=a,s=_.toString()),this.href=s}},hash:{get:function(){var a=this._url;return a==null||a.fragment==null||a.fragment===""?"":"#"+a.fragment},set:function(a){var s=this.href,_=new e(s);a.charAt(0)==="#"&&(a=a.substring(1)),a=a.replace(/[^-+\._~!$&'()*,;:=@\/?a-zA-Z0-9]/g,e.percentEncode),_.fragment=a,s=_.toString(),this.href=s}},username:{get:function(){var a=this._url;return a.username||""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&(a=a.replace(/[\x00-\x1F\x7F-\uFFFF "#<>?`\/@\\:]/g,e.percentEncode),_.username=a,s=_.toString()),this.href=s}},password:{get:function(){var a=this._url;return a.password||""},set:function(a){var s=this.href,_=new e(s);_.isAbsolute()&&(a===""?_.password=null:(a=a.replace(/[\x00-\x1F\x7F-\uFFFF "#<>?`\/@\\]/g,e.percentEncode),_.password=a),s=_.toString()),this.href=s}},origin:{get:function(){var a=this._url;if(a==null)return"";var s=function(_){var w=[a.scheme,a.host,+a.port||_];return w[0]+"://"+w[1]+(w[2]===_?"":":"+w[2])};switch(a.scheme){case"ftp":return s(21);case"gopher":return s(70);case"http":case"ws":return s(80);case"https":case"wss":return s(443);default:return a.scheme+"://"}}}}),o._inherit=function(a){Object.getOwnPropertyNames(o.prototype).forEach(function(s){if(!(s==="constructor"||s==="href")){var _=Object.getOwnPropertyDescriptor(o.prototype,s);Object.defineProperty(a,s,_)}})}}}),kS=ci({"external/npm/node_modules/domino/lib/defineElement.js"(r,t){"use strict";var e=bS(),o=sv().isApiWritable;t.exports=function(w,E,M,I){var A=w.ctor;if(A){var R=w.props||{};if(w.attributes)for(var $ in w.attributes){var W=w.attributes[$];(typeof W!="object"||Array.isArray(W))&&(W={type:W}),W.name||(W.name=$.toLowerCase()),R[$]=e.property(W)}R.constructor={value:A,writable:o},A.prototype=Object.create((w.superclass||E).prototype,R),w.events&&_(A,w.events),M[w.name]=A}else A=E;return(w.tags||w.tag&&[w.tag]||[]).forEach(function(G){I[G]=A}),A};function a(w,E,M,I){this.body=w,this.document=E,this.form=M,this.element=I}a.prototype.build=function(){return()=>{}};function s(w,E,M,I){var A=w.ownerDocument||Object.create(null),R=w.form||Object.create(null);w[E]=new a(I,A,R,w).build()}function _(w,E){var M=w.prototype;E.forEach(function(I){Object.defineProperty(M,"on"+I,{get:function(){return this._getEventHandler(I)},set:function(A){this._setEventHandler(I,A)}}),e.registerChangeHandler(w,"on"+I,s)})}}}),pv=ci({"external/npm/node_modules/domino/lib/htmlelts.js"(r){"use strict";var t=ko(),e=If(),o=hv(),a=fn(),s=AS(),_=kS(),w=r.elements={},E=Object.create(null);r.createElement=function(ne,re,ue){var oe=E[re]||pe;return new oe(ne,re,ue)};function M(ne){return _(ne,G,w,E)}function I(ne){return{get:function(){var re=this._getattr(ne);if(re===null)return"";var ue=this.doc._resolve(re);return ue===null?re:ue},set:function(re){this._setattr(ne,re)}}}function A(ne){return{get:function(){var re=this._getattr(ne);return re===null?null:re.toLowerCase()==="use-credentials"?"use-credentials":"anonymous"},set:function(re){re==null?this.removeAttribute(ne):this._setattr(ne,re)}}}var R={type:["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],missing:""},$={A:!0,LINK:!0,BUTTON:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0,COMMAND:!0},W=function(ne,re,ue){G.call(this,ne,re,ue),this._form=null},G=r.HTMLElement=M({superclass:e,name:"HTMLElement",ctor:function(re,ue,oe){e.call(this,re,ue,a.NAMESPACE.HTML,oe)},props:{dangerouslySetInnerHTML:{set:function(ne){this._innerHTML=ne}},innerHTML:{get:function(){return this.serialize()},set:function(ne){var re=this.ownerDocument.implementation.mozHTMLParser(this.ownerDocument._address,this);re.parse(ne===null?"":String(ne),!0);for(var ue=this instanceof E.template?this.content:this;ue.hasChildNodes();)ue.removeChild(ue.firstChild);ue.appendChild(re._asDocumentFragment())}},style:{get:function(){return this._style||(this._style=new o(this)),this._style},set:function(ne){ne==null&&(ne=""),this._setattr("style",String(ne))}},blur:{value:function(){}},focus:{value:function(){}},forceSpellCheck:{value:function(){}},click:{value:function(){if(!this._click_in_progress){this._click_in_progress=!0;try{this._pre_click_activation_steps&&this._pre_click_activation_steps();var ne=this.ownerDocument.createEvent("MouseEvent");ne.initMouseEvent("click",!0,!0,this.ownerDocument.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null);var re=this.dispatchEvent(ne);re?this._post_click_activation_steps&&this._post_click_activation_steps(ne):this._cancelled_activation_steps&&this._cancelled_activation_steps()}finally{this._click_in_progress=!1}}}},submit:{value:a.nyi}},attributes:{title:String,lang:String,dir:{type:["ltr","rtl","auto"],missing:""},draggable:{type:["true","false"],treatNullAsEmptyString:!0},spellcheck:{type:["true","false"],missing:""},enterKeyHint:{type:["enter","done","go","next","previous","search","send"],missing:""},autoCapitalize:{type:["off","on","none","sentences","words","characters"],missing:""},autoFocus:Boolean,accessKey:String,nonce:String,hidden:Boolean,translate:{type:["no","yes"],missing:""},tabIndex:{type:"long",default:function(){return this.tagName in $||this.contentEditable?0:-1}}},events:["abort","canplay","canplaythrough","change","click","contextmenu","cuechange","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","input","invalid","keydown","keypress","keyup","loadeddata","loadedmetadata","loadstart","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","pause","play","playing","progress","ratechange","readystatechange","reset","seeked","seeking","select","show","stalled","submit","suspend","timeupdate","volumechange","waiting","blur","error","focus","load","scroll"]}),pe=M({name:"HTMLUnknownElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)}}),le={form:{get:function(){return this._form}}};M({tag:"a",name:"HTMLAnchorElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},props:{_post_click_activation_steps:{value:function(ne){this.href&&(this.ownerDocument.defaultView.location=this.href)}}},attributes:{href:I,ping:String,download:String,target:String,rel:String,media:String,hreflang:String,type:String,referrerPolicy:R,coords:String,charset:String,name:String,rev:String,shape:String}}),s._inherit(E.a.prototype),M({tag:"area",name:"HTMLAreaElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{alt:String,target:String,download:String,rel:String,media:String,href:I,hreflang:String,type:String,shape:String,coords:String,ping:String,referrerPolicy:R,noHref:Boolean}}),s._inherit(E.area.prototype),M({tag:"br",name:"HTMLBRElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{clear:String}}),M({tag:"base",name:"HTMLBaseElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{target:String}}),M({tag:"body",name:"HTMLBodyElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},events:["afterprint","beforeprint","beforeunload","blur","error","focus","hashchange","load","message","offline","online","pagehide","pageshow","popstate","resize","scroll","storage","unload"],attributes:{text:{type:String,treatNullAsEmptyString:!0},link:{type:String,treatNullAsEmptyString:!0},vLink:{type:String,treatNullAsEmptyString:!0},aLink:{type:String,treatNullAsEmptyString:!0},bgColor:{type:String,treatNullAsEmptyString:!0},background:String}}),M({tag:"button",name:"HTMLButtonElement",ctor:function(re,ue,oe){W.call(this,re,ue,oe)},props:le,attributes:{name:String,value:String,disabled:Boolean,autofocus:Boolean,type:{type:["submit","reset","button","menu"],missing:"submit"},formTarget:String,formAction:I,formNoValidate:Boolean,formMethod:{type:["get","post","dialog"],invalid:"get",missing:""},formEnctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:""}}}),M({tag:"dl",name:"HTMLDListElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{compact:Boolean}}),M({tag:"data",name:"HTMLDataElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{value:String}}),M({tag:"datalist",name:"HTMLDataListElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)}}),M({tag:"details",name:"HTMLDetailsElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{open:Boolean}}),M({tag:"div",name:"HTMLDivElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{align:String}}),M({tag:"embed",name:"HTMLEmbedElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{src:I,type:String,width:String,height:String,align:String,name:String}}),M({tag:"fieldset",name:"HTMLFieldSetElement",ctor:function(re,ue,oe){W.call(this,re,ue,oe)},props:le,attributes:{disabled:Boolean,name:String}}),M({tag:"form",name:"HTMLFormElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{action:String,autocomplete:{type:["on","off"],missing:"on"},name:String,acceptCharset:{name:"accept-charset"},target:String,noValidate:Boolean,method:{type:["get","post","dialog"],invalid:"get",missing:"get"},enctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:"application/x-www-form-urlencoded"},encoding:{name:"enctype",type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:"application/x-www-form-urlencoded"}}}),M({tag:"hr",name:"HTMLHRElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{align:String,color:String,noShade:Boolean,size:String,width:String}}),M({tag:"head",name:"HTMLHeadElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)}}),M({tags:["h1","h2","h3","h4","h5","h6"],name:"HTMLHeadingElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{align:String}}),M({tag:"html",name:"HTMLHtmlElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{xmlns:I,version:String}}),M({tag:"iframe",name:"HTMLIFrameElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{src:I,srcdoc:String,name:String,width:String,height:String,seamless:Boolean,allow:Boolean,allowFullscreen:Boolean,allowUserMedia:Boolean,allowPaymentRequest:Boolean,referrerPolicy:R,loading:{type:["eager","lazy"],treatNullAsEmptyString:!0},align:String,scrolling:String,frameBorder:String,longDesc:I,marginHeight:{type:String,treatNullAsEmptyString:!0},marginWidth:{type:String,treatNullAsEmptyString:!0}}}),M({tag:"img",name:"HTMLImageElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{alt:String,src:I,srcset:String,crossOrigin:A,useMap:String,isMap:Boolean,sizes:String,height:{type:"unsigned long",default:0},width:{type:"unsigned long",default:0},referrerPolicy:R,loading:{type:["eager","lazy"],missing:""},name:String,lowsrc:I,align:String,hspace:{type:"unsigned long",default:0},vspace:{type:"unsigned long",default:0},longDesc:I,border:{type:String,treatNullAsEmptyString:!0}}}),M({tag:"input",name:"HTMLInputElement",ctor:function(re,ue,oe){W.call(this,re,ue,oe)},props:{form:le.form,_post_click_activation_steps:{value:function(ne){if(this.type==="checkbox")this.checked=!this.checked;else if(this.type==="radio")for(var re=this.form.getElementsByName(this.name),ue=re.length-1;ue>=0;ue--){var oe=re[ue];oe.checked=oe===this}}}},attributes:{name:String,disabled:Boolean,autofocus:Boolean,accept:String,alt:String,max:String,min:String,pattern:String,placeholder:String,step:String,dirName:String,defaultValue:{name:"value"},multiple:Boolean,required:Boolean,readOnly:Boolean,checked:Boolean,value:String,src:I,defaultChecked:{name:"checked",type:Boolean},size:{type:"unsigned long",default:20,min:1,setmin:1},width:{type:"unsigned long",min:0,setmin:0,default:0},height:{type:"unsigned long",min:0,setmin:0,default:0},minLength:{type:"unsigned long",min:0,setmin:0,default:-1},maxLength:{type:"unsigned long",min:0,setmin:0,default:-1},autocomplete:String,type:{type:["text","hidden","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"],missing:"text"},formTarget:String,formNoValidate:Boolean,formMethod:{type:["get","post"],invalid:"get",missing:""},formEnctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:""},inputMode:{type:["verbatim","latin","latin-name","latin-prose","full-width-latin","kana","kana-name","katakana","numeric","tel","email","url"],missing:""},align:String,useMap:String}}),M({tag:"keygen",name:"HTMLKeygenElement",ctor:function(re,ue,oe){W.call(this,re,ue,oe)},props:le,attributes:{name:String,disabled:Boolean,autofocus:Boolean,challenge:String,keytype:{type:["rsa"],missing:""}}}),M({tag:"li",name:"HTMLLIElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{value:{type:"long",default:0},type:String}}),M({tag:"label",name:"HTMLLabelElement",ctor:function(re,ue,oe){W.call(this,re,ue,oe)},props:le,attributes:{htmlFor:{name:"for",type:String}}}),M({tag:"legend",name:"HTMLLegendElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{align:String}}),M({tag:"link",name:"HTMLLinkElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{href:I,rel:String,media:String,hreflang:String,type:String,crossOrigin:A,nonce:String,integrity:String,referrerPolicy:R,imageSizes:String,imageSrcset:String,charset:String,rev:String,target:String}}),M({tag:"map",name:"HTMLMapElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{name:String}}),M({tag:"menu",name:"HTMLMenuElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{type:{type:["context","popup","toolbar"],missing:"toolbar"},label:String,compact:Boolean}}),M({tag:"meta",name:"HTMLMetaElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{name:String,content:String,httpEquiv:{name:"http-equiv",type:String},scheme:String}}),M({tag:"meter",name:"HTMLMeterElement",ctor:function(re,ue,oe){W.call(this,re,ue,oe)},props:le}),M({tags:["ins","del"],name:"HTMLModElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{cite:I,dateTime:String}}),M({tag:"ol",name:"HTMLOListElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},props:{_numitems:{get:function(){var ne=0;return this.childNodes.forEach(function(re){re.nodeType===t.ELEMENT_NODE&&re.tagName==="LI"&&ne++}),ne}}},attributes:{type:String,reversed:Boolean,start:{type:"long",default:function(){return this.reversed?this._numitems:1}},compact:Boolean}}),M({tag:"object",name:"HTMLObjectElement",ctor:function(re,ue,oe){W.call(this,re,ue,oe)},props:le,attributes:{data:I,type:String,name:String,useMap:String,typeMustMatch:Boolean,width:String,height:String,align:String,archive:String,code:String,declare:Boolean,hspace:{type:"unsigned long",default:0},standby:String,vspace:{type:"unsigned long",default:0},codeBase:I,codeType:String,border:{type:String,treatNullAsEmptyString:!0}}}),M({tag:"optgroup",name:"HTMLOptGroupElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{disabled:Boolean,label:String}}),M({tag:"option",name:"HTMLOptionElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},props:{form:{get:function(){for(var ne=this.parentNode;ne&&ne.nodeType===t.ELEMENT_NODE;){if(ne.localName==="select")return ne.form;ne=ne.parentNode}}},value:{get:function(){return this._getattr("value")||this.text},set:function(ne){this._setattr("value",ne)}},text:{get:function(){return this.textContent.replace(/[ \t\n\f\r]+/g," ").trim()},set:function(ne){this.textContent=ne}}},attributes:{disabled:Boolean,defaultSelected:{name:"selected",type:Boolean},label:String}}),M({tag:"output",name:"HTMLOutputElement",ctor:function(re,ue,oe){W.call(this,re,ue,oe)},props:le,attributes:{name:String}}),M({tag:"p",name:"HTMLParagraphElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{align:String}}),M({tag:"param",name:"HTMLParamElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{name:String,value:String,type:String,valueType:String}}),M({tags:["pre","listing","xmp"],name:"HTMLPreElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{width:{type:"long",default:0}}}),M({tag:"progress",name:"HTMLProgressElement",ctor:function(re,ue,oe){W.call(this,re,ue,oe)},props:le,attributes:{max:{type:Number,float:!0,default:1,min:0}}}),M({tags:["q","blockquote"],name:"HTMLQuoteElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{cite:I}}),M({tag:"script",name:"HTMLScriptElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},props:{text:{get:function(){for(var ne="",re=0,ue=this.childNodes.length;re<ue;re++){var oe=this.childNodes[re];oe.nodeType===t.TEXT_NODE&&(ne+=oe._data)}return ne},set:function(ne){this.removeChildren(),ne!==null&&ne!==""&&this.appendChild(this.ownerDocument.createTextNode(ne))}}},attributes:{src:I,type:String,charset:String,referrerPolicy:R,defer:Boolean,async:Boolean,nomodule:Boolean,crossOrigin:A,nonce:String,integrity:String}}),M({tag:"select",name:"HTMLSelectElement",ctor:function(re,ue,oe){W.call(this,re,ue,oe)},props:{form:le.form,options:{get:function(){return this.getElementsByTagName("option")}}},attributes:{autocomplete:String,name:String,disabled:Boolean,autofocus:Boolean,multiple:Boolean,required:Boolean,size:{type:"unsigned long",default:0}}}),M({tag:"span",name:"HTMLSpanElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)}}),M({tag:"style",name:"HTMLStyleElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{media:String,type:String,scoped:Boolean}}),M({tag:"caption",name:"HTMLTableCaptionElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{align:String}}),M({name:"HTMLTableCellElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{colSpan:{type:"unsigned long",default:1},rowSpan:{type:"unsigned long",default:1},scope:{type:["row","col","rowgroup","colgroup"],missing:""},abbr:String,align:String,axis:String,height:String,width:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},noWrap:Boolean,vAlign:String,bgColor:{type:String,treatNullAsEmptyString:!0}}}),M({tags:["col","colgroup"],name:"HTMLTableColElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{span:{type:"limited unsigned long with fallback",default:1,min:1},align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String,width:String}}),M({tag:"table",name:"HTMLTableElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},props:{rows:{get:function(){return this.getElementsByTagName("tr")}}},attributes:{align:String,border:String,frame:String,rules:String,summary:String,width:String,bgColor:{type:String,treatNullAsEmptyString:!0},cellPadding:{type:String,treatNullAsEmptyString:!0},cellSpacing:{type:String,treatNullAsEmptyString:!0}}}),M({tag:"template",name:"HTMLTemplateElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe),this._contentFragment=re._templateDoc.createDocumentFragment()},props:{content:{get:function(){return this._contentFragment}},serialize:{value:function(){return this.content.serialize()}}}}),M({tag:"tr",name:"HTMLTableRowElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},props:{cells:{get:function(){return this.querySelectorAll("td,th")}}},attributes:{align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String,bgColor:{type:String,treatNullAsEmptyString:!0}}}),M({tags:["thead","tfoot","tbody"],name:"HTMLTableSectionElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},props:{rows:{get:function(){return this.getElementsByTagName("tr")}}},attributes:{align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String}}),M({tag:"textarea",name:"HTMLTextAreaElement",ctor:function(re,ue,oe){W.call(this,re,ue,oe)},props:{form:le.form,type:{get:function(){return"textarea"}},defaultValue:{get:function(){return this.textContent},set:function(ne){this.textContent=ne}},value:{get:function(){return this.defaultValue},set:function(ne){this.defaultValue=ne}},textLength:{get:function(){return this.value.length}}},attributes:{autocomplete:String,name:String,disabled:Boolean,autofocus:Boolean,placeholder:String,wrap:String,dirName:String,required:Boolean,readOnly:Boolean,rows:{type:"limited unsigned long with fallback",default:2},cols:{type:"limited unsigned long with fallback",default:20},maxLength:{type:"unsigned long",min:0,setmin:0,default:-1},minLength:{type:"unsigned long",min:0,setmin:0,default:-1},inputMode:{type:["verbatim","latin","latin-name","latin-prose","full-width-latin","kana","kana-name","katakana","numeric","tel","email","url"],missing:""}}}),M({tag:"time",name:"HTMLTimeElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{dateTime:String,pubDate:Boolean}}),M({tag:"title",name:"HTMLTitleElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},props:{text:{get:function(){return this.textContent}}}}),M({tag:"ul",name:"HTMLUListElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{type:String,compact:Boolean}}),M({name:"HTMLMediaElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{src:I,crossOrigin:A,preload:{type:["metadata","none","auto",{value:"",alias:"auto"}],missing:"auto"},loop:Boolean,autoplay:Boolean,mediaGroup:String,controls:Boolean,defaultMuted:{name:"muted",type:Boolean}}}),M({name:"HTMLAudioElement",tag:"audio",superclass:w.HTMLMediaElement,ctor:function(re,ue,oe){w.HTMLMediaElement.call(this,re,ue,oe)}}),M({name:"HTMLVideoElement",tag:"video",superclass:w.HTMLMediaElement,ctor:function(re,ue,oe){w.HTMLMediaElement.call(this,re,ue,oe)},attributes:{poster:I,width:{type:"unsigned long",min:0,default:0},height:{type:"unsigned long",min:0,default:0}}}),M({tag:"td",name:"HTMLTableDataCellElement",superclass:w.HTMLTableCellElement,ctor:function(re,ue,oe){w.HTMLTableCellElement.call(this,re,ue,oe)}}),M({tag:"th",name:"HTMLTableHeaderCellElement",superclass:w.HTMLTableCellElement,ctor:function(re,ue,oe){w.HTMLTableCellElement.call(this,re,ue,oe)}}),M({tag:"frameset",name:"HTMLFrameSetElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)}}),M({tag:"frame",name:"HTMLFrameElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)}}),M({tag:"canvas",name:"HTMLCanvasElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},props:{getContext:{value:a.nyi},probablySupportsContext:{value:a.nyi},setContext:{value:a.nyi},transferControlToProxy:{value:a.nyi},toDataURL:{value:a.nyi},toBlob:{value:a.nyi}},attributes:{width:{type:"unsigned long",default:300},height:{type:"unsigned long",default:150}}}),M({tag:"dialog",name:"HTMLDialogElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},props:{show:{value:a.nyi},showModal:{value:a.nyi},close:{value:a.nyi}},attributes:{open:Boolean,returnValue:String}}),M({tag:"menuitem",name:"HTMLMenuItemElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},props:{_label:{get:function(){var ne=this._getattr("label");return ne!==null&&ne!==""?ne:(ne=this.textContent,ne.replace(/[ \t\n\f\r]+/g," ").trim())}},label:{get:function(){var ne=this._getattr("label");return ne!==null?ne:this._label},set:function(ne){this._setattr("label",ne)}}},attributes:{type:{type:["command","checkbox","radio"],missing:"command"},icon:I,disabled:Boolean,checked:Boolean,radiogroup:String,default:Boolean}}),M({tag:"source",name:"HTMLSourceElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{srcset:String,sizes:String,media:String,src:I,type:String,width:String,height:String}}),M({tag:"track",name:"HTMLTrackElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{src:I,srclang:String,label:String,default:Boolean,kind:{type:["subtitles","captions","descriptions","chapters","metadata"],missing:"subtitles",invalid:"metadata"}},props:{NONE:{get:function(){return 0}},LOADING:{get:function(){return 1}},LOADED:{get:function(){return 2}},ERROR:{get:function(){return 3}},readyState:{get:a.nyi},track:{get:a.nyi}}}),M({tag:"font",name:"HTMLFontElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{color:{type:String,treatNullAsEmptyString:!0},face:{type:String},size:{type:String}}}),M({tag:"dir",name:"HTMLDirectoryElement",ctor:function(re,ue,oe){G.call(this,re,ue,oe)},attributes:{compact:Boolean}}),M({tags:["abbr","address","article","aside","b","bdi","bdo","cite","content","code","dd","dfn","dt","em","figcaption","figure","footer","header","hgroup","i","kbd","main","mark","nav","noscript","rb","rp","rt","rtc","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr","acronym","basefont","big","center","nobr","noembed","noframes","plaintext","strike","tt"]})}}),PS=ci({"external/npm/node_modules/domino/lib/svg.js"(r){"use strict";var t=If(),e=kS(),o=fn(),a=hv(),s=r.elements={},_=Object.create(null);r.createElement=function(M,I,A){var R=_[I]||E;return new R(M,I,A)};function w(M){return e(M,E,s,_)}var E=w({superclass:t,name:"SVGElement",ctor:function(I,A,R){t.call(this,I,A,o.NAMESPACE.SVG,R)},props:{style:{get:function(){return this._style||(this._style=new a(this)),this._style}}}});w({name:"SVGSVGElement",ctor:function(I,A,R){E.call(this,I,A,R)},tag:"svg",props:{createSVGRect:{value:function(){return r.createElement(this.ownerDocument,"rect",null)}}}}),w({tags:["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]})}}),GR=ci({"external/npm/node_modules/domino/lib/MutationConstants.js"(r,t){"use strict";t.exports={VALUE:1,ATTR:2,REMOVE_ATTR:3,REMOVE:4,MOVE:5,INSERT:6}}}),fv=ci({"external/npm/node_modules/domino/lib/Document.js"(r,t){"use strict";t.exports=Qe;var e=ko(),o=Ch(),a=av(),s=If(),_=CS(),w=ES(),E=Mf(),M=SS(),I=TS(),A=t0(),R=jR(),$=qR(),W=e0(),G=dv(),pe=cv(),le=IS(),ne=lv(),re=pv(),ue=PS(),oe=fn(),Ve=GR(),tt=oe.NAMESPACE,ct=sv().isApiWritable;function Qe(Ie,Le){a.call(this),this.nodeType=e.DOCUMENT_NODE,this.isHTML=Ie,this._address=Le||"about:blank",this.readyState="loading",this.implementation=new A(this),this.ownerDocument=null,this._contentType=Ie?"text/html":"application/xml",this.doctype=null,this.documentElement=null,this._templateDocCache=null,this._nodeIterators=null,this._nid=1,this._nextnid=2,this._nodes=[null,this],this.byId=Object.create(null),this.modclock=0}var ve={event:"Event",customevent:"CustomEvent",uievent:"UIEvent",mouseevent:"MouseEvent"},Ge={events:"event",htmlevents:"event",mouseevents:"mouseevent",mutationevents:"mutationevent",uievents:"uievent"},bt=function(Ie,Le,kt){return{get:function(){var ai=Ie.call(this);return ai?ai[Le]:kt},set:function(ai){var Ur=Ie.call(this);Ur&&(Ur[Le]=ai)}}};function ae(Ie,Le){var kt,ai,Ur;return Ie===""&&(Ie=null),ne.isValidQName(Le)||oe.InvalidCharacterError(),kt=null,ai=Le,Ur=Le.indexOf(":"),Ur>=0&&(kt=Le.substring(0,Ur),ai=Le.substring(Ur+1)),kt!==null&&Ie===null&&oe.NamespaceError(),kt==="xml"&&Ie!==tt.XML&&oe.NamespaceError(),(kt==="xmlns"||Le==="xmlns")&&Ie!==tt.XMLNS&&oe.NamespaceError(),Ie===tt.XMLNS&&!(kt==="xmlns"||Le==="xmlns")&&oe.NamespaceError(),{namespace:Ie,prefix:kt,localName:ai}}Qe.prototype=Object.create(a.prototype,{_setMutationHandler:{value:function(Ie){this.mutationHandler=Ie}},_dispatchRendererEvent:{value:function(Ie,Le,kt){var ai=this._nodes[Ie];ai&&ai._dispatchEvent(new E(Le,kt),!0)}},nodeName:{value:"#document"},nodeValue:{get:function(){return null},set:function(){}},documentURI:{get:function(){return this._address},set:oe.nyi},compatMode:{get:function(){return this._quirks?"BackCompat":"CSS1Compat"}},createTextNode:{value:function(Ie){return new _(this,String(Ie))}},createComment:{value:function(Ie){return new w(this,Ie)}},createDocumentFragment:{value:function(){return new M(this)}},createProcessingInstruction:{value:function(Ie,Le){return(!ne.isValidName(Ie)||Le.indexOf("?>")!==-1)&&oe.InvalidCharacterError(),new I(this,Ie,Le)}},createAttribute:{value:function(Ie){return Ie=String(Ie),ne.isValidName(Ie)||oe.InvalidCharacterError(),this.isHTML&&(Ie=oe.toASCIILowerCase(Ie)),new s._Attr(null,Ie,null,null,"")}},createAttributeNS:{value:function(Ie,Le){Ie=Ie==null||Ie===""?null:String(Ie),Le=String(Le);var kt=ae(Ie,Le);return new s._Attr(null,kt.localName,kt.prefix,kt.namespace,"")}},createElement:{value:function(Ie){return Ie=String(Ie),ne.isValidName(Ie)||oe.InvalidCharacterError(),this.isHTML?(/[A-Z]/.test(Ie)&&(Ie=oe.toASCIILowerCase(Ie)),re.createElement(this,Ie,null)):this.contentType==="application/xhtml+xml"?re.createElement(this,Ie,null):new s(this,Ie,null,null)},writable:ct},createElementNS:{value:function(Ie,Le){Ie=Ie==null||Ie===""?null:String(Ie),Le=String(Le);var kt=ae(Ie,Le);return this._createElementNS(kt.localName,kt.namespace,kt.prefix)},writable:ct},_createElementNS:{value:function(Ie,Le,kt){return Le===tt.HTML?re.createElement(this,Ie,kt):Le===tt.SVG?ue.createElement(this,Ie,kt):new s(this,Ie,Le,kt)}},createEvent:{value:function(Le){Le=Le.toLowerCase();var kt=Ge[Le]||Le,ai=le[ve[kt]];if(ai){var Ur=new ai;return Ur._initialized=!1,Ur}else oe.NotSupportedError()}},createTreeWalker:{value:function(Ie,Le,kt){if(!Ie)throw new TypeError("root argument is required");if(!(Ie instanceof e))throw new TypeError("root not a node");return Le=Le===void 0?W.SHOW_ALL:+Le,kt=kt===void 0?null:kt,new R(Ie,Le,kt)}},createNodeIterator:{value:function(Ie,Le,kt){if(!Ie)throw new TypeError("root argument is required");if(!(Ie instanceof e))throw new TypeError("root not a node");return Le=Le===void 0?W.SHOW_ALL:+Le,kt=kt===void 0?null:kt,new $(Ie,Le,kt)}},_attachNodeIterator:{value:function(Ie){this._nodeIterators||(this._nodeIterators=[]),this._nodeIterators.push(Ie)}},_detachNodeIterator:{value:function(Ie){var Le=this._nodeIterators.indexOf(Ie);this._nodeIterators.splice(Le,1)}},_preremoveNodeIterators:{value:function(Ie){this._nodeIterators&&this._nodeIterators.forEach(function(Le){Le._preremove(Ie)})}},_updateDocTypeElement:{value:function(){this.doctype=this.documentElement=null;for(var Le=this.firstChild;Le!==null;Le=Le.nextSibling)Le.nodeType===e.DOCUMENT_TYPE_NODE?this.doctype=Le:Le.nodeType===e.ELEMENT_NODE&&(this.documentElement=Le)}},insertBefore:{value:function(Le,kt){return e.prototype.insertBefore.call(this,Le,kt),this._updateDocTypeElement(),Le}},replaceChild:{value:function(Le,kt){return e.prototype.replaceChild.call(this,Le,kt),this._updateDocTypeElement(),kt}},removeChild:{value:function(Le){return e.prototype.removeChild.call(this,Le),this._updateDocTypeElement(),Le}},getElementById:{value:function(Ie){var Le=this.byId[Ie];return Le?Le instanceof Di?Le.getFirst():Le:null}},_hasMultipleElementsWithId:{value:function(Ie){return this.byId[Ie]instanceof Di}},getElementsByName:{value:s.prototype.getElementsByName},getElementsByTagName:{value:s.prototype.getElementsByTagName},getElementsByTagNameNS:{value:s.prototype.getElementsByTagNameNS},getElementsByClassName:{value:s.prototype.getElementsByClassName},adoptNode:{value:function(Le){return Le.nodeType===e.DOCUMENT_NODE&&oe.NotSupportedError(),Le.nodeType===e.ATTRIBUTE_NODE||(Le.parentNode&&Le.parentNode.removeChild(Le),Le.ownerDocument!==this&&Bt(Le,this)),Le}},importNode:{value:function(Le,kt){return this.adoptNode(Le.cloneNode(kt))},writable:ct},origin:{get:function(){return null}},characterSet:{get:function(){return"UTF-8"}},contentType:{get:function(){return this._contentType}},URL:{get:function(){return this._address}},domain:{get:oe.nyi,set:oe.nyi},referrer:{get:oe.nyi},cookie:{get:oe.nyi,set:oe.nyi},lastModified:{get:oe.nyi},location:{get:function(){return this.defaultView?this.defaultView.location:null},set:oe.nyi},_titleElement:{get:function(){return this.getElementsByTagName("title").item(0)||null}},title:{get:function(){var Ie=this._titleElement,Le=Ie?Ie.textContent:"";return Le.replace(/[ \t\n\r\f]+/g," ").replace(/(^ )|( $)/g,"")},set:function(Ie){var Le=this._titleElement,kt=this.head;!Le&&!kt||(Le||(Le=this.createElement("title"),kt.appendChild(Le)),Le.textContent=Ie)}},dir:bt(function(){var Ie=this.documentElement;if(Ie&&Ie.tagName==="HTML")return Ie},"dir",""),fgColor:bt(function(){return this.body},"text",""),linkColor:bt(function(){return this.body},"link",""),vlinkColor:bt(function(){return this.body},"vLink",""),alinkColor:bt(function(){return this.body},"aLink",""),bgColor:bt(function(){return this.body},"bgColor",""),charset:{get:function(){return this.characterSet}},inputEncoding:{get:function(){return this.characterSet}},scrollingElement:{get:function(){return this._quirks?this.body:this.documentElement}},body:{get:function(){return B(this.documentElement,"body")},set:oe.nyi},head:{get:function(){return B(this.documentElement,"head")}},images:{get:oe.nyi},embeds:{get:oe.nyi},plugins:{get:oe.nyi},links:{get:oe.nyi},forms:{get:oe.nyi},scripts:{get:oe.nyi},applets:{get:function(){return[]}},activeElement:{get:function(){return null}},innerHTML:{get:function(){return this.serialize()},set:oe.nyi},outerHTML:{get:function(){return this.serialize()},set:oe.nyi},write:{value:function(Ie){if(this.isHTML||oe.InvalidStateError(),!!this._parser){this._parser;var Le=arguments.join("");this._parser.parse(Le)}}},writeln:{value:function(Le){this.write(Array.prototype.join.call(arguments,"")+`
`)}},open:{value:function(){this.documentElement=null}},close:{value:function(){this.readyState="interactive",this._dispatchEvent(new E("readystatechange"),!0),this._dispatchEvent(new E("DOMContentLoaded"),!0),this.readyState="complete",this._dispatchEvent(new E("readystatechange"),!0),this.defaultView&&this.defaultView._dispatchEvent(new E("load"),!0)}},clone:{value:function(){var Le=new Qe(this.isHTML,this._address);return Le._quirks=this._quirks,Le._contentType=this._contentType,Le}},cloneNode:{value:function(Le){var kt=e.prototype.cloneNode.call(this,!1);if(Le)for(var ai=this.firstChild;ai!==null;ai=ai.nextSibling)kt._appendChild(kt.importNode(ai,!0));return kt._updateDocTypeElement(),kt}},isEqual:{value:function(Le){return!0}},mutateValue:{value:function(Ie){this.mutationHandler&&this.mutationHandler({type:Ve.VALUE,target:Ie,data:Ie.data})}},mutateAttr:{value:function(Ie,Le){this.mutationHandler&&this.mutationHandler({type:Ve.ATTR,target:Ie.ownerElement,attr:Ie})}},mutateRemoveAttr:{value:function(Ie){this.mutationHandler&&this.mutationHandler({type:Ve.REMOVE_ATTR,target:Ie.ownerElement,attr:Ie})}},mutateRemove:{value:function(Ie){this.mutationHandler&&this.mutationHandler({type:Ve.REMOVE,target:Ie.parentNode,node:Ie}),Pt(Ie)}},mutateInsert:{value:function(Ie){ot(Ie),this.mutationHandler&&this.mutationHandler({type:Ve.INSERT,target:Ie.parentNode,node:Ie})}},mutateMove:{value:function(Ie){this.mutationHandler&&this.mutationHandler({type:Ve.MOVE,target:Ie})}},addId:{value:function(Le,kt){var ai=this.byId[Le];ai?(ai instanceof Di||(ai=new Di(ai),this.byId[Le]=ai),ai.add(kt)):this.byId[Le]=kt}},delId:{value:function(Le,kt){var ai=this.byId[Le];oe.assert(ai),ai instanceof Di?(ai.del(kt),ai.length===1&&(this.byId[Le]=ai.downgrade())):this.byId[Le]=void 0}},_resolve:{value:function(Ie){return new G(this._documentBaseURL).resolve(Ie)}},_documentBaseURL:{get:function(){var Ie=this._address;Ie==="about:blank"&&(Ie="/");var Le=this.querySelector("base[href]");return Le?new G(Ie).resolve(Le.getAttribute("href")):Ie}},_templateDoc:{get:function(){if(!this._templateDocCache){var Ie=new Qe(this.isHTML,this._address);this._templateDocCache=Ie._templateDocCache=Ie}return this._templateDocCache}},querySelector:{value:function(Ie){return pe(Ie,this)[0]}},querySelectorAll:{value:function(Ie){var Le=pe(Ie,this);return Le.item?Le:new o(Le)}}});var ee=["abort","canplay","canplaythrough","change","click","contextmenu","cuechange","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","input","invalid","keydown","keypress","keyup","loadeddata","loadedmetadata","loadstart","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","pause","play","playing","progress","ratechange","readystatechange","reset","seeked","seeking","select","show","stalled","submit","suspend","timeupdate","volumechange","waiting","blur","error","focus","load","scroll"];ee.forEach(function(Ie){Object.defineProperty(Qe.prototype,"on"+Ie,{get:function(){return this._getEventHandler(Ie)},set:function(Le){this._setEventHandler(Ie,Le)}})});function B(Ie,Le){if(Ie&&Ie.isHTML){for(var kt=Ie.firstChild;kt!==null;kt=kt.nextSibling)if(kt.nodeType===e.ELEMENT_NODE&&kt.localName===Le&&kt.namespaceURI===tt.HTML)return kt}return null}function fe(Ie){if(Ie._nid=Ie.ownerDocument._nextnid++,Ie.ownerDocument._nodes[Ie._nid]=Ie,Ie.nodeType===e.ELEMENT_NODE){var Le=Ie.getAttribute("id");Le&&Ie.ownerDocument.addId(Le,Ie),Ie._roothook&&Ie._roothook()}}function Ue(Ie){if(Ie.nodeType===e.ELEMENT_NODE){var Le=Ie.getAttribute("id");Le&&Ie.ownerDocument.delId(Le,Ie)}Ie.ownerDocument._nodes[Ie._nid]=void 0,Ie._nid=void 0}function ot(Ie){if(fe(Ie),Ie.nodeType===e.ELEMENT_NODE)for(var Le=Ie.firstChild;Le!==null;Le=Le.nextSibling)ot(Le)}function Pt(Ie){Ue(Ie);for(var Le=Ie.firstChild;Le!==null;Le=Le.nextSibling)Pt(Le)}function Bt(Ie,Le){Ie.ownerDocument=Le,Ie._lastModTime=void 0,Object.prototype.hasOwnProperty.call(Ie,"_tagName")&&(Ie._tagName=void 0);for(var kt=Ie.firstChild;kt!==null;kt=kt.nextSibling)Bt(kt,Le)}function Di(Ie){this.nodes=Object.create(null),this.nodes[Ie._nid]=Ie,this.length=1,this.firstNode=void 0}Di.prototype.add=function(Ie){this.nodes[Ie._nid]||(this.nodes[Ie._nid]=Ie,this.length++,this.firstNode=void 0)},Di.prototype.del=function(Ie){this.nodes[Ie._nid]&&(delete this.nodes[Ie._nid],this.length--,this.firstNode=void 0)},Di.prototype.getFirst=function(){if(!this.firstNode){var Ie;for(Ie in this.nodes)(this.firstNode===void 0||this.firstNode.compareDocumentPosition(this.nodes[Ie])&e.DOCUMENT_POSITION_PRECEDING)&&(this.firstNode=this.nodes[Ie])}return this.firstNode},Di.prototype.downgrade=function(){if(this.length===1){var Ie;for(Ie in this.nodes)return this.nodes[Ie]}return this}}}),mv=ci({"external/npm/node_modules/domino/lib/DocumentType.js"(r,t){"use strict";t.exports=s;var e=ko(),o=wS(),a=uv();function s(_,w,E,M){o.call(this),this.nodeType=e.DOCUMENT_TYPE_NODE,this.ownerDocument=_||null,this.name=w,this.publicId=E||"",this.systemId=M||""}s.prototype=Object.create(o.prototype,{nodeName:{get:function(){return this.name}},nodeValue:{get:function(){return null},set:function(){}},clone:{value:function(){return new s(this.ownerDocument,this.name,this.publicId,this.systemId)}},isEqual:{value:function(w){return this.name===w.name&&this.publicId===w.publicId&&this.systemId===w.systemId}}}),Object.defineProperties(s.prototype,a)}}),gv=ci({"external/npm/node_modules/domino/lib/HTMLParser.js"(r,t){"use strict";t.exports=Q;var e=fv(),o=mv(),a=ko(),s=fn().NAMESPACE,_=pv(),w=_.elements,E=Function.prototype.apply.bind(Array.prototype.push),M=-1,I=1,A=2,R=3,$=4,W=5,G=[],pe=/^HTML$|^-\/\/W3O\/\/DTD W3 HTML Strict 3\.0\/\/EN\/\/$|^-\/W3C\/DTD HTML 4\.0 Transitional\/EN$|^\+\/\/Silmaril\/\/dtd html Pro v0r11 19970101\/\/|^-\/\/AdvaSoft Ltd\/\/DTD HTML 3\.0 asWedit \+ extensions\/\/|^-\/\/AS\/\/DTD HTML 3\.0 asWedit \+ extensions\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Level 1\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Level 2\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict Level 1\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict Level 2\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict\/\/|^-\/\/IETF\/\/DTD HTML 2\.0\/\/|^-\/\/IETF\/\/DTD HTML 2\.1E\/\/|^-\/\/IETF\/\/DTD HTML 3\.0\/\/|^-\/\/IETF\/\/DTD HTML 3\.2 Final\/\/|^-\/\/IETF\/\/DTD HTML 3\.2\/\/|^-\/\/IETF\/\/DTD HTML 3\/\/|^-\/\/IETF\/\/DTD HTML Level 0\/\/|^-\/\/IETF\/\/DTD HTML Level 1\/\/|^-\/\/IETF\/\/DTD HTML Level 2\/\/|^-\/\/IETF\/\/DTD HTML Level 3\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 0\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 1\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 2\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 3\/\/|^-\/\/IETF\/\/DTD HTML Strict\/\/|^-\/\/IETF\/\/DTD HTML\/\/|^-\/\/Metrius\/\/DTD Metrius Presentational\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 HTML Strict\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 HTML\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 Tables\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 HTML Strict\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 HTML\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 Tables\/\/|^-\/\/Netscape Comm\. Corp\.\/\/DTD HTML\/\/|^-\/\/Netscape Comm\. Corp\.\/\/DTD Strict HTML\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML 2\.0\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML Extended 1\.0\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML Extended Relaxed 1\.0\/\/|^-\/\/SoftQuad Software\/\/DTD HoTMetaL PRO 6\.0::19990601::extensions to HTML 4\.0\/\/|^-\/\/SoftQuad\/\/DTD HoTMetaL PRO 4\.0::19971010::extensions to HTML 4\.0\/\/|^-\/\/Spyglass\/\/DTD HTML 2\.0 Extended\/\/|^-\/\/SQ\/\/DTD HTML 2\.0 HoTMetaL \+ extensions\/\/|^-\/\/Sun Microsystems Corp\.\/\/DTD HotJava HTML\/\/|^-\/\/Sun Microsystems Corp\.\/\/DTD HotJava Strict HTML\/\/|^-\/\/W3C\/\/DTD HTML 3 1995-03-24\/\/|^-\/\/W3C\/\/DTD HTML 3\.2 Draft\/\/|^-\/\/W3C\/\/DTD HTML 3\.2 Final\/\/|^-\/\/W3C\/\/DTD HTML 3\.2\/\/|^-\/\/W3C\/\/DTD HTML 3\.2S Draft\/\/|^-\/\/W3C\/\/DTD HTML 4\.0 Frameset\/\/|^-\/\/W3C\/\/DTD HTML 4\.0 Transitional\/\/|^-\/\/W3C\/\/DTD HTML Experimental 19960712\/\/|^-\/\/W3C\/\/DTD HTML Experimental 970421\/\/|^-\/\/W3C\/\/DTD W3 HTML\/\/|^-\/\/W3O\/\/DTD W3 HTML 3\.0\/\/|^-\/\/WebTechs\/\/DTD Mozilla HTML 2\.0\/\/|^-\/\/WebTechs\/\/DTD Mozilla HTML\/\//i,le="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",ne=/^-\/\/W3C\/\/DTD HTML 4\.01 Frameset\/\/|^-\/\/W3C\/\/DTD HTML 4\.01 Transitional\/\//i,re=/^-\/\/W3C\/\/DTD XHTML 1\.0 Frameset\/\/|^-\/\/W3C\/\/DTD XHTML 1\.0 Transitional\/\//i,ue=Object.create(null);ue[s.HTML]={__proto__:null,address:!0,applet:!0,area:!0,article:!0,aside:!0,base:!0,basefont:!0,bgsound:!0,blockquote:!0,body:!0,br:!0,button:!0,caption:!0,center:!0,col:!0,colgroup:!0,dd:!0,details:!0,dir:!0,div:!0,dl:!0,dt:!0,embed:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,frame:!0,frameset:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,head:!0,header:!0,hgroup:!0,hr:!0,html:!0,iframe:!0,img:!0,input:!0,li:!0,link:!0,listing:!0,main:!0,marquee:!0,menu:!0,meta:!0,nav:!0,noembed:!0,noframes:!0,noscript:!0,object:!0,ol:!0,p:!0,param:!0,plaintext:!0,pre:!0,script:!0,section:!0,select:!0,source:!0,style:!0,summary:!0,table:!0,tbody:!0,td:!0,template:!0,textarea:!0,tfoot:!0,th:!0,thead:!0,title:!0,tr:!0,track:!0,ul:!0,wbr:!0,xmp:!0},ue[s.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0},ue[s.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0};var oe=Object.create(null);oe[s.HTML]={__proto__:null,address:!0,div:!0,p:!0};var Ve=Object.create(null);Ve[s.HTML]={__proto__:null,dd:!0,dt:!0};var tt=Object.create(null);tt[s.HTML]={__proto__:null,table:!0,thead:!0,tbody:!0,tfoot:!0,tr:!0};var ct=Object.create(null);ct[s.HTML]={__proto__:null,dd:!0,dt:!0,li:!0,menuitem:!0,optgroup:!0,option:!0,p:!0,rb:!0,rp:!0,rt:!0,rtc:!0};var Qe=Object.create(null);Qe[s.HTML]={__proto__:null,caption:!0,colgroup:!0,dd:!0,dt:!0,li:!0,optgroup:!0,option:!0,p:!0,rb:!0,rp:!0,rt:!0,rtc:!0,tbody:!0,td:!0,tfoot:!0,th:!0,thead:!0,tr:!0};var ve=Object.create(null);ve[s.HTML]={__proto__:null,table:!0,template:!0,html:!0};var Ge=Object.create(null);Ge[s.HTML]={__proto__:null,tbody:!0,tfoot:!0,thead:!0,template:!0,html:!0};var bt=Object.create(null);bt[s.HTML]={__proto__:null,tr:!0,template:!0,html:!0};var ae=Object.create(null);ae[s.HTML]={__proto__:null,button:!0,fieldset:!0,input:!0,keygen:!0,object:!0,output:!0,select:!0,textarea:!0,img:!0};var ee=Object.create(null);ee[s.HTML]={__proto__:null,applet:!0,caption:!0,html:!0,table:!0,td:!0,th:!0,marquee:!0,object:!0,template:!0},ee[s.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0},ee[s.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0};var B=Object.create(ee);B[s.HTML]=Object.create(ee[s.HTML]),B[s.HTML].ol=!0,B[s.HTML].ul=!0;var fe=Object.create(ee);fe[s.HTML]=Object.create(ee[s.HTML]),fe[s.HTML].button=!0;var Ue=Object.create(null);Ue[s.HTML]={__proto__:null,html:!0,table:!0,template:!0};var ot=Object.create(null);ot[s.HTML]={__proto__:null,optgroup:!0,option:!0};var Pt=Object.create(null);Pt[s.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0};var Bt=Object.create(null);Bt[s.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0};var Di={__proto__:null,"xlink:actuate":s.XLINK,"xlink:arcrole":s.XLINK,"xlink:href":s.XLINK,"xlink:role":s.XLINK,"xlink:show":s.XLINK,"xlink:title":s.XLINK,"xlink:type":s.XLINK,"xml:base":s.XML,"xml:lang":s.XML,"xml:space":s.XML,xmlns:s.XMLNS,"xmlns:xlink":s.XMLNS},Ie={__proto__:null,attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},Le={__proto__:null,altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},kt={__proto__:null,0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},ai={__proto__:null,AElig:198,"AElig;":198,AMP:38,"AMP;":38,Aacute:193,"Aacute;":193,"Abreve;":258,Acirc:194,"Acirc;":194,"Acy;":1040,"Afr;":[55349,56580],Agrave:192,"Agrave;":192,"Alpha;":913,"Amacr;":256,"And;":10835,"Aogon;":260,"Aopf;":[55349,56632],"ApplyFunction;":8289,Aring:197,"Aring;":197,"Ascr;":[55349,56476],"Assign;":8788,Atilde:195,"Atilde;":195,Auml:196,"Auml;":196,"Backslash;":8726,"Barv;":10983,"Barwed;":8966,"Bcy;":1041,"Because;":8757,"Bernoullis;":8492,"Beta;":914,"Bfr;":[55349,56581],"Bopf;":[55349,56633],"Breve;":728,"Bscr;":8492,"Bumpeq;":8782,"CHcy;":1063,COPY:169,"COPY;":169,"Cacute;":262,"Cap;":8914,"CapitalDifferentialD;":8517,"Cayleys;":8493,"Ccaron;":268,Ccedil:199,"Ccedil;":199,"Ccirc;":264,"Cconint;":8752,"Cdot;":266,"Cedilla;":184,"CenterDot;":183,"Cfr;":8493,"Chi;":935,"CircleDot;":8857,"CircleMinus;":8854,"CirclePlus;":8853,"CircleTimes;":8855,"ClockwiseContourIntegral;":8754,"CloseCurlyDoubleQuote;":8221,"CloseCurlyQuote;":8217,"Colon;":8759,"Colone;":10868,"Congruent;":8801,"Conint;":8751,"ContourIntegral;":8750,"Copf;":8450,"Coproduct;":8720,"CounterClockwiseContourIntegral;":8755,"Cross;":10799,"Cscr;":[55349,56478],"Cup;":8915,"CupCap;":8781,"DD;":8517,"DDotrahd;":10513,"DJcy;":1026,"DScy;":1029,"DZcy;":1039,"Dagger;":8225,"Darr;":8609,"Dashv;":10980,"Dcaron;":270,"Dcy;":1044,"Del;":8711,"Delta;":916,"Dfr;":[55349,56583],"DiacriticalAcute;":180,"DiacriticalDot;":729,"DiacriticalDoubleAcute;":733,"DiacriticalGrave;":96,"DiacriticalTilde;":732,"Diamond;":8900,"DifferentialD;":8518,"Dopf;":[55349,56635],"Dot;":168,"DotDot;":8412,"DotEqual;":8784,"DoubleContourIntegral;":8751,"DoubleDot;":168,"DoubleDownArrow;":8659,"DoubleLeftArrow;":8656,"DoubleLeftRightArrow;":8660,"DoubleLeftTee;":10980,"DoubleLongLeftArrow;":10232,"DoubleLongLeftRightArrow;":10234,"DoubleLongRightArrow;":10233,"DoubleRightArrow;":8658,"DoubleRightTee;":8872,"DoubleUpArrow;":8657,"DoubleUpDownArrow;":8661,"DoubleVerticalBar;":8741,"DownArrow;":8595,"DownArrowBar;":10515,"DownArrowUpArrow;":8693,"DownBreve;":785,"DownLeftRightVector;":10576,"DownLeftTeeVector;":10590,"DownLeftVector;":8637,"DownLeftVectorBar;":10582,"DownRightTeeVector;":10591,"DownRightVector;":8641,"DownRightVectorBar;":10583,"DownTee;":8868,"DownTeeArrow;":8615,"Downarrow;":8659,"Dscr;":[55349,56479],"Dstrok;":272,"ENG;":330,ETH:208,"ETH;":208,Eacute:201,"Eacute;":201,"Ecaron;":282,Ecirc:202,"Ecirc;":202,"Ecy;":1069,"Edot;":278,"Efr;":[55349,56584],Egrave:200,"Egrave;":200,"Element;":8712,"Emacr;":274,"EmptySmallSquare;":9723,"EmptyVerySmallSquare;":9643,"Eogon;":280,"Eopf;":[55349,56636],"Epsilon;":917,"Equal;":10869,"EqualTilde;":8770,"Equilibrium;":8652,"Escr;":8496,"Esim;":10867,"Eta;":919,Euml:203,"Euml;":203,"Exists;":8707,"ExponentialE;":8519,"Fcy;":1060,"Ffr;":[55349,56585],"FilledSmallSquare;":9724,"FilledVerySmallSquare;":9642,"Fopf;":[55349,56637],"ForAll;":8704,"Fouriertrf;":8497,"Fscr;":8497,"GJcy;":1027,GT:62,"GT;":62,"Gamma;":915,"Gammad;":988,"Gbreve;":286,"Gcedil;":290,"Gcirc;":284,"Gcy;":1043,"Gdot;":288,"Gfr;":[55349,56586],"Gg;":8921,"Gopf;":[55349,56638],"GreaterEqual;":8805,"GreaterEqualLess;":8923,"GreaterFullEqual;":8807,"GreaterGreater;":10914,"GreaterLess;":8823,"GreaterSlantEqual;":10878,"GreaterTilde;":8819,"Gscr;":[55349,56482],"Gt;":8811,"HARDcy;":1066,"Hacek;":711,"Hat;":94,"Hcirc;":292,"Hfr;":8460,"HilbertSpace;":8459,"Hopf;":8461,"HorizontalLine;":9472,"Hscr;":8459,"Hstrok;":294,"HumpDownHump;":8782,"HumpEqual;":8783,"IEcy;":1045,"IJlig;":306,"IOcy;":1025,Iacute:205,"Iacute;":205,Icirc:206,"Icirc;":206,"Icy;":1048,"Idot;":304,"Ifr;":8465,Igrave:204,"Igrave;":204,"Im;":8465,"Imacr;":298,"ImaginaryI;":8520,"Implies;":8658,"Int;":8748,"Integral;":8747,"Intersection;":8898,"InvisibleComma;":8291,"InvisibleTimes;":8290,"Iogon;":302,"Iopf;":[55349,56640],"Iota;":921,"Iscr;":8464,"Itilde;":296,"Iukcy;":1030,Iuml:207,"Iuml;":207,"Jcirc;":308,"Jcy;":1049,"Jfr;":[55349,56589],"Jopf;":[55349,56641],"Jscr;":[55349,56485],"Jsercy;":1032,"Jukcy;":1028,"KHcy;":1061,"KJcy;":1036,"Kappa;":922,"Kcedil;":310,"Kcy;":1050,"Kfr;":[55349,56590],"Kopf;":[55349,56642],"Kscr;":[55349,56486],"LJcy;":1033,LT:60,"LT;":60,"Lacute;":313,"Lambda;":923,"Lang;":10218,"Laplacetrf;":8466,"Larr;":8606,"Lcaron;":317,"Lcedil;":315,"Lcy;":1051,"LeftAngleBracket;":10216,"LeftArrow;":8592,"LeftArrowBar;":8676,"LeftArrowRightArrow;":8646,"LeftCeiling;":8968,"LeftDoubleBracket;":10214,"LeftDownTeeVector;":10593,"LeftDownVector;":8643,"LeftDownVectorBar;":10585,"LeftFloor;":8970,"LeftRightArrow;":8596,"LeftRightVector;":10574,"LeftTee;":8867,"LeftTeeArrow;":8612,"LeftTeeVector;":10586,"LeftTriangle;":8882,"LeftTriangleBar;":10703,"LeftTriangleEqual;":8884,"LeftUpDownVector;":10577,"LeftUpTeeVector;":10592,"LeftUpVector;":8639,"LeftUpVectorBar;":10584,"LeftVector;":8636,"LeftVectorBar;":10578,"Leftarrow;":8656,"Leftrightarrow;":8660,"LessEqualGreater;":8922,"LessFullEqual;":8806,"LessGreater;":8822,"LessLess;":10913,"LessSlantEqual;":10877,"LessTilde;":8818,"Lfr;":[55349,56591],"Ll;":8920,"Lleftarrow;":8666,"Lmidot;":319,"LongLeftArrow;":10229,"LongLeftRightArrow;":10231,"LongRightArrow;":10230,"Longleftarrow;":10232,"Longleftrightarrow;":10234,"Longrightarrow;":10233,"Lopf;":[55349,56643],"LowerLeftArrow;":8601,"LowerRightArrow;":8600,"Lscr;":8466,"Lsh;":8624,"Lstrok;":321,"Lt;":8810,"Map;":10501,"Mcy;":1052,"MediumSpace;":8287,"Mellintrf;":8499,"Mfr;":[55349,56592],"MinusPlus;":8723,"Mopf;":[55349,56644],"Mscr;":8499,"Mu;":924,"NJcy;":1034,"Nacute;":323,"Ncaron;":327,"Ncedil;":325,"Ncy;":1053,"NegativeMediumSpace;":8203,"NegativeThickSpace;":8203,"NegativeThinSpace;":8203,"NegativeVeryThinSpace;":8203,"NestedGreaterGreater;":8811,"NestedLessLess;":8810,"NewLine;":10,"Nfr;":[55349,56593],"NoBreak;":8288,"NonBreakingSpace;":160,"Nopf;":8469,"Not;":10988,"NotCongruent;":8802,"NotCupCap;":8813,"NotDoubleVerticalBar;":8742,"NotElement;":8713,"NotEqual;":8800,"NotEqualTilde;":[8770,824],"NotExists;":8708,"NotGreater;":8815,"NotGreaterEqual;":8817,"NotGreaterFullEqual;":[8807,824],"NotGreaterGreater;":[8811,824],"NotGreaterLess;":8825,"NotGreaterSlantEqual;":[10878,824],"NotGreaterTilde;":8821,"NotHumpDownHump;":[8782,824],"NotHumpEqual;":[8783,824],"NotLeftTriangle;":8938,"NotLeftTriangleBar;":[10703,824],"NotLeftTriangleEqual;":8940,"NotLess;":8814,"NotLessEqual;":8816,"NotLessGreater;":8824,"NotLessLess;":[8810,824],"NotLessSlantEqual;":[10877,824],"NotLessTilde;":8820,"NotNestedGreaterGreater;":[10914,824],"NotNestedLessLess;":[10913,824],"NotPrecedes;":8832,"NotPrecedesEqual;":[10927,824],"NotPrecedesSlantEqual;":8928,"NotReverseElement;":8716,"NotRightTriangle;":8939,"NotRightTriangleBar;":[10704,824],"NotRightTriangleEqual;":8941,"NotSquareSubset;":[8847,824],"NotSquareSubsetEqual;":8930,"NotSquareSuperset;":[8848,824],"NotSquareSupersetEqual;":8931,"NotSubset;":[8834,8402],"NotSubsetEqual;":8840,"NotSucceeds;":8833,"NotSucceedsEqual;":[10928,824],"NotSucceedsSlantEqual;":8929,"NotSucceedsTilde;":[8831,824],"NotSuperset;":[8835,8402],"NotSupersetEqual;":8841,"NotTilde;":8769,"NotTildeEqual;":8772,"NotTildeFullEqual;":8775,"NotTildeTilde;":8777,"NotVerticalBar;":8740,"Nscr;":[55349,56489],Ntilde:209,"Ntilde;":209,"Nu;":925,"OElig;":338,Oacute:211,"Oacute;":211,Ocirc:212,"Ocirc;":212,"Ocy;":1054,"Odblac;":336,"Ofr;":[55349,56594],Ograve:210,"Ograve;":210,"Omacr;":332,"Omega;":937,"Omicron;":927,"Oopf;":[55349,56646],"OpenCurlyDoubleQuote;":8220,"OpenCurlyQuote;":8216,"Or;":10836,"Oscr;":[55349,56490],Oslash:216,"Oslash;":216,Otilde:213,"Otilde;":213,"Otimes;":10807,Ouml:214,"Ouml;":214,"OverBar;":8254,"OverBrace;":9182,"OverBracket;":9140,"OverParenthesis;":9180,"PartialD;":8706,"Pcy;":1055,"Pfr;":[55349,56595],"Phi;":934,"Pi;":928,"PlusMinus;":177,"Poincareplane;":8460,"Popf;":8473,"Pr;":10939,"Precedes;":8826,"PrecedesEqual;":10927,"PrecedesSlantEqual;":8828,"PrecedesTilde;":8830,"Prime;":8243,"Product;":8719,"Proportion;":8759,"Proportional;":8733,"Pscr;":[55349,56491],"Psi;":936,QUOT:34,"QUOT;":34,"Qfr;":[55349,56596],"Qopf;":8474,"Qscr;":[55349,56492],"RBarr;":10512,REG:174,"REG;":174,"Racute;":340,"Rang;":10219,"Rarr;":8608,"Rarrtl;":10518,"Rcaron;":344,"Rcedil;":342,"Rcy;":1056,"Re;":8476,"ReverseElement;":8715,"ReverseEquilibrium;":8651,"ReverseUpEquilibrium;":10607,"Rfr;":8476,"Rho;":929,"RightAngleBracket;":10217,"RightArrow;":8594,"RightArrowBar;":8677,"RightArrowLeftArrow;":8644,"RightCeiling;":8969,"RightDoubleBracket;":10215,"RightDownTeeVector;":10589,"RightDownVector;":8642,"RightDownVectorBar;":10581,"RightFloor;":8971,"RightTee;":8866,"RightTeeArrow;":8614,"RightTeeVector;":10587,"RightTriangle;":8883,"RightTriangleBar;":10704,"RightTriangleEqual;":8885,"RightUpDownVector;":10575,"RightUpTeeVector;":10588,"RightUpVector;":8638,"RightUpVectorBar;":10580,"RightVector;":8640,"RightVectorBar;":10579,"Rightarrow;":8658,"Ropf;":8477,"RoundImplies;":10608,"Rrightarrow;":8667,"Rscr;":8475,"Rsh;":8625,"RuleDelayed;":10740,"SHCHcy;":1065,"SHcy;":1064,"SOFTcy;":1068,"Sacute;":346,"Sc;":10940,"Scaron;":352,"Scedil;":350,"Scirc;":348,"Scy;":1057,"Sfr;":[55349,56598],"ShortDownArrow;":8595,"ShortLeftArrow;":8592,"ShortRightArrow;":8594,"ShortUpArrow;":8593,"Sigma;":931,"SmallCircle;":8728,"Sopf;":[55349,56650],"Sqrt;":8730,"Square;":9633,"SquareIntersection;":8851,"SquareSubset;":8847,"SquareSubsetEqual;":8849,"SquareSuperset;":8848,"SquareSupersetEqual;":8850,"SquareUnion;":8852,"Sscr;":[55349,56494],"Star;":8902,"Sub;":8912,"Subset;":8912,"SubsetEqual;":8838,"Succeeds;":8827,"SucceedsEqual;":10928,"SucceedsSlantEqual;":8829,"SucceedsTilde;":8831,"SuchThat;":8715,"Sum;":8721,"Sup;":8913,"Superset;":8835,"SupersetEqual;":8839,"Supset;":8913,THORN:222,"THORN;":222,"TRADE;":8482,"TSHcy;":1035,"TScy;":1062,"Tab;":9,"Tau;":932,"Tcaron;":356,"Tcedil;":354,"Tcy;":1058,"Tfr;":[55349,56599],"Therefore;":8756,"Theta;":920,"ThickSpace;":[8287,8202],"ThinSpace;":8201,"Tilde;":8764,"TildeEqual;":8771,"TildeFullEqual;":8773,"TildeTilde;":8776,"Topf;":[55349,56651],"TripleDot;":8411,"Tscr;":[55349,56495],"Tstrok;":358,Uacute:218,"Uacute;":218,"Uarr;":8607,"Uarrocir;":10569,"Ubrcy;":1038,"Ubreve;":364,Ucirc:219,"Ucirc;":219,"Ucy;":1059,"Udblac;":368,"Ufr;":[55349,56600],Ugrave:217,"Ugrave;":217,"Umacr;":362,"UnderBar;":95,"UnderBrace;":9183,"UnderBracket;":9141,"UnderParenthesis;":9181,"Union;":8899,"UnionPlus;":8846,"Uogon;":370,"Uopf;":[55349,56652],"UpArrow;":8593,"UpArrowBar;":10514,"UpArrowDownArrow;":8645,"UpDownArrow;":8597,"UpEquilibrium;":10606,"UpTee;":8869,"UpTeeArrow;":8613,"Uparrow;":8657,"Updownarrow;":8661,"UpperLeftArrow;":8598,"UpperRightArrow;":8599,"Upsi;":978,"Upsilon;":933,"Uring;":366,"Uscr;":[55349,56496],"Utilde;":360,Uuml:220,"Uuml;":220,"VDash;":8875,"Vbar;":10987,"Vcy;":1042,"Vdash;":8873,"Vdashl;":10982,"Vee;":8897,"Verbar;":8214,"Vert;":8214,"VerticalBar;":8739,"VerticalLine;":124,"VerticalSeparator;":10072,"VerticalTilde;":8768,"VeryThinSpace;":8202,"Vfr;":[55349,56601],"Vopf;":[55349,56653],"Vscr;":[55349,56497],"Vvdash;":8874,"Wcirc;":372,"Wedge;":8896,"Wfr;":[55349,56602],"Wopf;":[55349,56654],"Wscr;":[55349,56498],"Xfr;":[55349,56603],"Xi;":926,"Xopf;":[55349,56655],"Xscr;":[55349,56499],"YAcy;":1071,"YIcy;":1031,"YUcy;":1070,Yacute:221,"Yacute;":221,"Ycirc;":374,"Ycy;":1067,"Yfr;":[55349,56604],"Yopf;":[55349,56656],"Yscr;":[55349,56500],"Yuml;":376,"ZHcy;":1046,"Zacute;":377,"Zcaron;":381,"Zcy;":1047,"Zdot;":379,"ZeroWidthSpace;":8203,"Zeta;":918,"Zfr;":8488,"Zopf;":8484,"Zscr;":[55349,56501],aacute:225,"aacute;":225,"abreve;":259,"ac;":8766,"acE;":[8766,819],"acd;":8767,acirc:226,"acirc;":226,acute:180,"acute;":180,"acy;":1072,aelig:230,"aelig;":230,"af;":8289,"afr;":[55349,56606],agrave:224,"agrave;":224,"alefsym;":8501,"aleph;":8501,"alpha;":945,"amacr;":257,"amalg;":10815,amp:38,"amp;":38,"and;":8743,"andand;":10837,"andd;":10844,"andslope;":10840,"andv;":10842,"ang;":8736,"ange;":10660,"angle;":8736,"angmsd;":8737,"angmsdaa;":10664,"angmsdab;":10665,"angmsdac;":10666,"angmsdad;":10667,"angmsdae;":10668,"angmsdaf;":10669,"angmsdag;":10670,"angmsdah;":10671,"angrt;":8735,"angrtvb;":8894,"angrtvbd;":10653,"angsph;":8738,"angst;":197,"angzarr;":9084,"aogon;":261,"aopf;":[55349,56658],"ap;":8776,"apE;":10864,"apacir;":10863,"ape;":8778,"apid;":8779,"apos;":39,"approx;":8776,"approxeq;":8778,aring:229,"aring;":229,"ascr;":[55349,56502],"ast;":42,"asymp;":8776,"asympeq;":8781,atilde:227,"atilde;":227,auml:228,"auml;":228,"awconint;":8755,"awint;":10769,"bNot;":10989,"backcong;":8780,"backepsilon;":1014,"backprime;":8245,"backsim;":8765,"backsimeq;":8909,"barvee;":8893,"barwed;":8965,"barwedge;":8965,"bbrk;":9141,"bbrktbrk;":9142,"bcong;":8780,"bcy;":1073,"bdquo;":8222,"becaus;":8757,"because;":8757,"bemptyv;":10672,"bepsi;":1014,"bernou;":8492,"beta;":946,"beth;":8502,"between;":8812,"bfr;":[55349,56607],"bigcap;":8898,"bigcirc;":9711,"bigcup;":8899,"bigodot;":10752,"bigoplus;":10753,"bigotimes;":10754,"bigsqcup;":10758,"bigstar;":9733,"bigtriangledown;":9661,"bigtriangleup;":9651,"biguplus;":10756,"bigvee;":8897,"bigwedge;":8896,"bkarow;":10509,"blacklozenge;":10731,"blacksquare;":9642,"blacktriangle;":9652,"blacktriangledown;":9662,"blacktriangleleft;":9666,"blacktriangleright;":9656,"blank;":9251,"blk12;":9618,"blk14;":9617,"blk34;":9619,"block;":9608,"bne;":[61,8421],"bnequiv;":[8801,8421],"bnot;":8976,"bopf;":[55349,56659],"bot;":8869,"bottom;":8869,"bowtie;":8904,"boxDL;":9559,"boxDR;":9556,"boxDl;":9558,"boxDr;":9555,"boxH;":9552,"boxHD;":9574,"boxHU;":9577,"boxHd;":9572,"boxHu;":9575,"boxUL;":9565,"boxUR;":9562,"boxUl;":9564,"boxUr;":9561,"boxV;":9553,"boxVH;":9580,"boxVL;":9571,"boxVR;":9568,"boxVh;":9579,"boxVl;":9570,"boxVr;":9567,"boxbox;":10697,"boxdL;":9557,"boxdR;":9554,"boxdl;":9488,"boxdr;":9484,"boxh;":9472,"boxhD;":9573,"boxhU;":9576,"boxhd;":9516,"boxhu;":9524,"boxminus;":8863,"boxplus;":8862,"boxtimes;":8864,"boxuL;":9563,"boxuR;":9560,"boxul;":9496,"boxur;":9492,"boxv;":9474,"boxvH;":9578,"boxvL;":9569,"boxvR;":9566,"boxvh;":9532,"boxvl;":9508,"boxvr;":9500,"bprime;":8245,"breve;":728,brvbar:166,"brvbar;":166,"bscr;":[55349,56503],"bsemi;":8271,"bsim;":8765,"bsime;":8909,"bsol;":92,"bsolb;":10693,"bsolhsub;":10184,"bull;":8226,"bullet;":8226,"bump;":8782,"bumpE;":10926,"bumpe;":8783,"bumpeq;":8783,"cacute;":263,"cap;":8745,"capand;":10820,"capbrcup;":10825,"capcap;":10827,"capcup;":10823,"capdot;":10816,"caps;":[8745,65024],"caret;":8257,"caron;":711,"ccaps;":10829,"ccaron;":269,ccedil:231,"ccedil;":231,"ccirc;":265,"ccups;":10828,"ccupssm;":10832,"cdot;":267,cedil:184,"cedil;":184,"cemptyv;":10674,cent:162,"cent;":162,"centerdot;":183,"cfr;":[55349,56608],"chcy;":1095,"check;":10003,"checkmark;":10003,"chi;":967,"cir;":9675,"cirE;":10691,"circ;":710,"circeq;":8791,"circlearrowleft;":8634,"circlearrowright;":8635,"circledR;":174,"circledS;":9416,"circledast;":8859,"circledcirc;":8858,"circleddash;":8861,"cire;":8791,"cirfnint;":10768,"cirmid;":10991,"cirscir;":10690,"clubs;":9827,"clubsuit;":9827,"colon;":58,"colone;":8788,"coloneq;":8788,"comma;":44,"commat;":64,"comp;":8705,"compfn;":8728,"complement;":8705,"complexes;":8450,"cong;":8773,"congdot;":10861,"conint;":8750,"copf;":[55349,56660],"coprod;":8720,copy:169,"copy;":169,"copysr;":8471,"crarr;":8629,"cross;":10007,"cscr;":[55349,56504],"csub;":10959,"csube;":10961,"csup;":10960,"csupe;":10962,"ctdot;":8943,"cudarrl;":10552,"cudarrr;":10549,"cuepr;":8926,"cuesc;":8927,"cularr;":8630,"cularrp;":10557,"cup;":8746,"cupbrcap;":10824,"cupcap;":10822,"cupcup;":10826,"cupdot;":8845,"cupor;":10821,"cups;":[8746,65024],"curarr;":8631,"curarrm;":10556,"curlyeqprec;":8926,"curlyeqsucc;":8927,"curlyvee;":8910,"curlywedge;":8911,curren:164,"curren;":164,"curvearrowleft;":8630,"curvearrowright;":8631,"cuvee;":8910,"cuwed;":8911,"cwconint;":8754,"cwint;":8753,"cylcty;":9005,"dArr;":8659,"dHar;":10597,"dagger;":8224,"daleth;":8504,"darr;":8595,"dash;":8208,"dashv;":8867,"dbkarow;":10511,"dblac;":733,"dcaron;":271,"dcy;":1076,"dd;":8518,"ddagger;":8225,"ddarr;":8650,"ddotseq;":10871,deg:176,"deg;":176,"delta;":948,"demptyv;":10673,"dfisht;":10623,"dfr;":[55349,56609],"dharl;":8643,"dharr;":8642,"diam;":8900,"diamond;":8900,"diamondsuit;":9830,"diams;":9830,"die;":168,"digamma;":989,"disin;":8946,"div;":247,divide:247,"divide;":247,"divideontimes;":8903,"divonx;":8903,"djcy;":1106,"dlcorn;":8990,"dlcrop;":8973,"dollar;":36,"dopf;":[55349,56661],"dot;":729,"doteq;":8784,"doteqdot;":8785,"dotminus;":8760,"dotplus;":8724,"dotsquare;":8865,"doublebarwedge;":8966,"downarrow;":8595,"downdownarrows;":8650,"downharpoonleft;":8643,"downharpoonright;":8642,"drbkarow;":10512,"drcorn;":8991,"drcrop;":8972,"dscr;":[55349,56505],"dscy;":1109,"dsol;":10742,"dstrok;":273,"dtdot;":8945,"dtri;":9663,"dtrif;":9662,"duarr;":8693,"duhar;":10607,"dwangle;":10662,"dzcy;":1119,"dzigrarr;":10239,"eDDot;":10871,"eDot;":8785,eacute:233,"eacute;":233,"easter;":10862,"ecaron;":283,"ecir;":8790,ecirc:234,"ecirc;":234,"ecolon;":8789,"ecy;":1101,"edot;":279,"ee;":8519,"efDot;":8786,"efr;":[55349,56610],"eg;":10906,egrave:232,"egrave;":232,"egs;":10902,"egsdot;":10904,"el;":10905,"elinters;":9191,"ell;":8467,"els;":10901,"elsdot;":10903,"emacr;":275,"empty;":8709,"emptyset;":8709,"emptyv;":8709,"emsp13;":8196,"emsp14;":8197,"emsp;":8195,"eng;":331,"ensp;":8194,"eogon;":281,"eopf;":[55349,56662],"epar;":8917,"eparsl;":10723,"eplus;":10865,"epsi;":949,"epsilon;":949,"epsiv;":1013,"eqcirc;":8790,"eqcolon;":8789,"eqsim;":8770,"eqslantgtr;":10902,"eqslantless;":10901,"equals;":61,"equest;":8799,"equiv;":8801,"equivDD;":10872,"eqvparsl;":10725,"erDot;":8787,"erarr;":10609,"escr;":8495,"esdot;":8784,"esim;":8770,"eta;":951,eth:240,"eth;":240,euml:235,"euml;":235,"euro;":8364,"excl;":33,"exist;":8707,"expectation;":8496,"exponentiale;":8519,"fallingdotseq;":8786,"fcy;":1092,"female;":9792,"ffilig;":64259,"fflig;":64256,"ffllig;":64260,"ffr;":[55349,56611],"filig;":64257,"fjlig;":[102,106],"flat;":9837,"fllig;":64258,"fltns;":9649,"fnof;":402,"fopf;":[55349,56663],"forall;":8704,"fork;":8916,"forkv;":10969,"fpartint;":10765,frac12:189,"frac12;":189,"frac13;":8531,frac14:188,"frac14;":188,"frac15;":8533,"frac16;":8537,"frac18;":8539,"frac23;":8532,"frac25;":8534,frac34:190,"frac34;":190,"frac35;":8535,"frac38;":8540,"frac45;":8536,"frac56;":8538,"frac58;":8541,"frac78;":8542,"frasl;":8260,"frown;":8994,"fscr;":[55349,56507],"gE;":8807,"gEl;":10892,"gacute;":501,"gamma;":947,"gammad;":989,"gap;":10886,"gbreve;":287,"gcirc;":285,"gcy;":1075,"gdot;":289,"ge;":8805,"gel;":8923,"geq;":8805,"geqq;":8807,"geqslant;":10878,"ges;":10878,"gescc;":10921,"gesdot;":10880,"gesdoto;":10882,"gesdotol;":10884,"gesl;":[8923,65024],"gesles;":10900,"gfr;":[55349,56612],"gg;":8811,"ggg;":8921,"gimel;":8503,"gjcy;":1107,"gl;":8823,"glE;":10898,"gla;":10917,"glj;":10916,"gnE;":8809,"gnap;":10890,"gnapprox;":10890,"gne;":10888,"gneq;":10888,"gneqq;":8809,"gnsim;":8935,"gopf;":[55349,56664],"grave;":96,"gscr;":8458,"gsim;":8819,"gsime;":10894,"gsiml;":10896,gt:62,"gt;":62,"gtcc;":10919,"gtcir;":10874,"gtdot;":8919,"gtlPar;":10645,"gtquest;":10876,"gtrapprox;":10886,"gtrarr;":10616,"gtrdot;":8919,"gtreqless;":8923,"gtreqqless;":10892,"gtrless;":8823,"gtrsim;":8819,"gvertneqq;":[8809,65024],"gvnE;":[8809,65024],"hArr;":8660,"hairsp;":8202,"half;":189,"hamilt;":8459,"hardcy;":1098,"harr;":8596,"harrcir;":10568,"harrw;":8621,"hbar;":8463,"hcirc;":293,"hearts;":9829,"heartsuit;":9829,"hellip;":8230,"hercon;":8889,"hfr;":[55349,56613],"hksearow;":10533,"hkswarow;":10534,"hoarr;":8703,"homtht;":8763,"hookleftarrow;":8617,"hookrightarrow;":8618,"hopf;":[55349,56665],"horbar;":8213,"hscr;":[55349,56509],"hslash;":8463,"hstrok;":295,"hybull;":8259,"hyphen;":8208,iacute:237,"iacute;":237,"ic;":8291,icirc:238,"icirc;":238,"icy;":1080,"iecy;":1077,iexcl:161,"iexcl;":161,"iff;":8660,"ifr;":[55349,56614],igrave:236,"igrave;":236,"ii;":8520,"iiiint;":10764,"iiint;":8749,"iinfin;":10716,"iiota;":8489,"ijlig;":307,"imacr;":299,"image;":8465,"imagline;":8464,"imagpart;":8465,"imath;":305,"imof;":8887,"imped;":437,"in;":8712,"incare;":8453,"infin;":8734,"infintie;":10717,"inodot;":305,"int;":8747,"intcal;":8890,"integers;":8484,"intercal;":8890,"intlarhk;":10775,"intprod;":10812,"iocy;":1105,"iogon;":303,"iopf;":[55349,56666],"iota;":953,"iprod;":10812,iquest:191,"iquest;":191,"iscr;":[55349,56510],"isin;":8712,"isinE;":8953,"isindot;":8949,"isins;":8948,"isinsv;":8947,"isinv;":8712,"it;":8290,"itilde;":297,"iukcy;":1110,iuml:239,"iuml;":239,"jcirc;":309,"jcy;":1081,"jfr;":[55349,56615],"jmath;":567,"jopf;":[55349,56667],"jscr;":[55349,56511],"jsercy;":1112,"jukcy;":1108,"kappa;":954,"kappav;":1008,"kcedil;":311,"kcy;":1082,"kfr;":[55349,56616],"kgreen;":312,"khcy;":1093,"kjcy;":1116,"kopf;":[55349,56668],"kscr;":[55349,56512],"lAarr;":8666,"lArr;":8656,"lAtail;":10523,"lBarr;":10510,"lE;":8806,"lEg;":10891,"lHar;":10594,"lacute;":314,"laemptyv;":10676,"lagran;":8466,"lambda;":955,"lang;":10216,"langd;":10641,"langle;":10216,"lap;":10885,laquo:171,"laquo;":171,"larr;":8592,"larrb;":8676,"larrbfs;":10527,"larrfs;":10525,"larrhk;":8617,"larrlp;":8619,"larrpl;":10553,"larrsim;":10611,"larrtl;":8610,"lat;":10923,"latail;":10521,"late;":10925,"lates;":[10925,65024],"lbarr;":10508,"lbbrk;":10098,"lbrace;":123,"lbrack;":91,"lbrke;":10635,"lbrksld;":10639,"lbrkslu;":10637,"lcaron;":318,"lcedil;":316,"lceil;":8968,"lcub;":123,"lcy;":1083,"ldca;":10550,"ldquo;":8220,"ldquor;":8222,"ldrdhar;":10599,"ldrushar;":10571,"ldsh;":8626,"le;":8804,"leftarrow;":8592,"leftarrowtail;":8610,"leftharpoondown;":8637,"leftharpoonup;":8636,"leftleftarrows;":8647,"leftrightarrow;":8596,"leftrightarrows;":8646,"leftrightharpoons;":8651,"leftrightsquigarrow;":8621,"leftthreetimes;":8907,"leg;":8922,"leq;":8804,"leqq;":8806,"leqslant;":10877,"les;":10877,"lescc;":10920,"lesdot;":10879,"lesdoto;":10881,"lesdotor;":10883,"lesg;":[8922,65024],"lesges;":10899,"lessapprox;":10885,"lessdot;":8918,"lesseqgtr;":8922,"lesseqqgtr;":10891,"lessgtr;":8822,"lesssim;":8818,"lfisht;":10620,"lfloor;":8970,"lfr;":[55349,56617],"lg;":8822,"lgE;":10897,"lhard;":8637,"lharu;":8636,"lharul;":10602,"lhblk;":9604,"ljcy;":1113,"ll;":8810,"llarr;":8647,"llcorner;":8990,"llhard;":10603,"lltri;":9722,"lmidot;":320,"lmoust;":9136,"lmoustache;":9136,"lnE;":8808,"lnap;":10889,"lnapprox;":10889,"lne;":10887,"lneq;":10887,"lneqq;":8808,"lnsim;":8934,"loang;":10220,"loarr;":8701,"lobrk;":10214,"longleftarrow;":10229,"longleftrightarrow;":10231,"longmapsto;":10236,"longrightarrow;":10230,"looparrowleft;":8619,"looparrowright;":8620,"lopar;":10629,"lopf;":[55349,56669],"loplus;":10797,"lotimes;":10804,"lowast;":8727,"lowbar;":95,"loz;":9674,"lozenge;":9674,"lozf;":10731,"lpar;":40,"lparlt;":10643,"lrarr;":8646,"lrcorner;":8991,"lrhar;":8651,"lrhard;":10605,"lrm;":8206,"lrtri;":8895,"lsaquo;":8249,"lscr;":[55349,56513],"lsh;":8624,"lsim;":8818,"lsime;":10893,"lsimg;":10895,"lsqb;":91,"lsquo;":8216,"lsquor;":8218,"lstrok;":322,lt:60,"lt;":60,"ltcc;":10918,"ltcir;":10873,"ltdot;":8918,"lthree;":8907,"ltimes;":8905,"ltlarr;":10614,"ltquest;":10875,"ltrPar;":10646,"ltri;":9667,"ltrie;":8884,"ltrif;":9666,"lurdshar;":10570,"luruhar;":10598,"lvertneqq;":[8808,65024],"lvnE;":[8808,65024],"mDDot;":8762,macr:175,"macr;":175,"male;":9794,"malt;":10016,"maltese;":10016,"map;":8614,"mapsto;":8614,"mapstodown;":8615,"mapstoleft;":8612,"mapstoup;":8613,"marker;":9646,"mcomma;":10793,"mcy;":1084,"mdash;":8212,"measuredangle;":8737,"mfr;":[55349,56618],"mho;":8487,micro:181,"micro;":181,"mid;":8739,"midast;":42,"midcir;":10992,middot:183,"middot;":183,"minus;":8722,"minusb;":8863,"minusd;":8760,"minusdu;":10794,"mlcp;":10971,"mldr;":8230,"mnplus;":8723,"models;":8871,"mopf;":[55349,56670],"mp;":8723,"mscr;":[55349,56514],"mstpos;":8766,"mu;":956,"multimap;":8888,"mumap;":8888,"nGg;":[8921,824],"nGt;":[8811,8402],"nGtv;":[8811,824],"nLeftarrow;":8653,"nLeftrightarrow;":8654,"nLl;":[8920,824],"nLt;":[8810,8402],"nLtv;":[8810,824],"nRightarrow;":8655,"nVDash;":8879,"nVdash;":8878,"nabla;":8711,"nacute;":324,"nang;":[8736,8402],"nap;":8777,"napE;":[10864,824],"napid;":[8779,824],"napos;":329,"napprox;":8777,"natur;":9838,"natural;":9838,"naturals;":8469,nbsp:160,"nbsp;":160,"nbump;":[8782,824],"nbumpe;":[8783,824],"ncap;":10819,"ncaron;":328,"ncedil;":326,"ncong;":8775,"ncongdot;":[10861,824],"ncup;":10818,"ncy;":1085,"ndash;":8211,"ne;":8800,"neArr;":8663,"nearhk;":10532,"nearr;":8599,"nearrow;":8599,"nedot;":[8784,824],"nequiv;":8802,"nesear;":10536,"nesim;":[8770,824],"nexist;":8708,"nexists;":8708,"nfr;":[55349,56619],"ngE;":[8807,824],"nge;":8817,"ngeq;":8817,"ngeqq;":[8807,824],"ngeqslant;":[10878,824],"nges;":[10878,824],"ngsim;":8821,"ngt;":8815,"ngtr;":8815,"nhArr;":8654,"nharr;":8622,"nhpar;":10994,"ni;":8715,"nis;":8956,"nisd;":8954,"niv;":8715,"njcy;":1114,"nlArr;":8653,"nlE;":[8806,824],"nlarr;":8602,"nldr;":8229,"nle;":8816,"nleftarrow;":8602,"nleftrightarrow;":8622,"nleq;":8816,"nleqq;":[8806,824],"nleqslant;":[10877,824],"nles;":[10877,824],"nless;":8814,"nlsim;":8820,"nlt;":8814,"nltri;":8938,"nltrie;":8940,"nmid;":8740,"nopf;":[55349,56671],not:172,"not;":172,"notin;":8713,"notinE;":[8953,824],"notindot;":[8949,824],"notinva;":8713,"notinvb;":8951,"notinvc;":8950,"notni;":8716,"notniva;":8716,"notnivb;":8958,"notnivc;":8957,"npar;":8742,"nparallel;":8742,"nparsl;":[11005,8421],"npart;":[8706,824],"npolint;":10772,"npr;":8832,"nprcue;":8928,"npre;":[10927,824],"nprec;":8832,"npreceq;":[10927,824],"nrArr;":8655,"nrarr;":8603,"nrarrc;":[10547,824],"nrarrw;":[8605,824],"nrightarrow;":8603,"nrtri;":8939,"nrtrie;":8941,"nsc;":8833,"nsccue;":8929,"nsce;":[10928,824],"nscr;":[55349,56515],"nshortmid;":8740,"nshortparallel;":8742,"nsim;":8769,"nsime;":8772,"nsimeq;":8772,"nsmid;":8740,"nspar;":8742,"nsqsube;":8930,"nsqsupe;":8931,"nsub;":8836,"nsubE;":[10949,824],"nsube;":8840,"nsubset;":[8834,8402],"nsubseteq;":8840,"nsubseteqq;":[10949,824],"nsucc;":8833,"nsucceq;":[10928,824],"nsup;":8837,"nsupE;":[10950,824],"nsupe;":8841,"nsupset;":[8835,8402],"nsupseteq;":8841,"nsupseteqq;":[10950,824],"ntgl;":8825,ntilde:241,"ntilde;":241,"ntlg;":8824,"ntriangleleft;":8938,"ntrianglelefteq;":8940,"ntriangleright;":8939,"ntrianglerighteq;":8941,"nu;":957,"num;":35,"numero;":8470,"numsp;":8199,"nvDash;":8877,"nvHarr;":10500,"nvap;":[8781,8402],"nvdash;":8876,"nvge;":[8805,8402],"nvgt;":[62,8402],"nvinfin;":10718,"nvlArr;":10498,"nvle;":[8804,8402],"nvlt;":[60,8402],"nvltrie;":[8884,8402],"nvrArr;":10499,"nvrtrie;":[8885,8402],"nvsim;":[8764,8402],"nwArr;":8662,"nwarhk;":10531,"nwarr;":8598,"nwarrow;":8598,"nwnear;":10535,"oS;":9416,oacute:243,"oacute;":243,"oast;":8859,"ocir;":8858,ocirc:244,"ocirc;":244,"ocy;":1086,"odash;":8861,"odblac;":337,"odiv;":10808,"odot;":8857,"odsold;":10684,"oelig;":339,"ofcir;":10687,"ofr;":[55349,56620],"ogon;":731,ograve:242,"ograve;":242,"ogt;":10689,"ohbar;":10677,"ohm;":937,"oint;":8750,"olarr;":8634,"olcir;":10686,"olcross;":10683,"oline;":8254,"olt;":10688,"omacr;":333,"omega;":969,"omicron;":959,"omid;":10678,"ominus;":8854,"oopf;":[55349,56672],"opar;":10679,"operp;":10681,"oplus;":8853,"or;":8744,"orarr;":8635,"ord;":10845,"order;":8500,"orderof;":8500,ordf:170,"ordf;":170,ordm:186,"ordm;":186,"origof;":8886,"oror;":10838,"orslope;":10839,"orv;":10843,"oscr;":8500,oslash:248,"oslash;":248,"osol;":8856,otilde:245,"otilde;":245,"otimes;":8855,"otimesas;":10806,ouml:246,"ouml;":246,"ovbar;":9021,"par;":8741,para:182,"para;":182,"parallel;":8741,"parsim;":10995,"parsl;":11005,"part;":8706,"pcy;":1087,"percnt;":37,"period;":46,"permil;":8240,"perp;":8869,"pertenk;":8241,"pfr;":[55349,56621],"phi;":966,"phiv;":981,"phmmat;":8499,"phone;":9742,"pi;":960,"pitchfork;":8916,"piv;":982,"planck;":8463,"planckh;":8462,"plankv;":8463,"plus;":43,"plusacir;":10787,"plusb;":8862,"pluscir;":10786,"plusdo;":8724,"plusdu;":10789,"pluse;":10866,plusmn:177,"plusmn;":177,"plussim;":10790,"plustwo;":10791,"pm;":177,"pointint;":10773,"popf;":[55349,56673],pound:163,"pound;":163,"pr;":8826,"prE;":10931,"prap;":10935,"prcue;":8828,"pre;":10927,"prec;":8826,"precapprox;":10935,"preccurlyeq;":8828,"preceq;":10927,"precnapprox;":10937,"precneqq;":10933,"precnsim;":8936,"precsim;":8830,"prime;":8242,"primes;":8473,"prnE;":10933,"prnap;":10937,"prnsim;":8936,"prod;":8719,"profalar;":9006,"profline;":8978,"profsurf;":8979,"prop;":8733,"propto;":8733,"prsim;":8830,"prurel;":8880,"pscr;":[55349,56517],"psi;":968,"puncsp;":8200,"qfr;":[55349,56622],"qint;":10764,"qopf;":[55349,56674],"qprime;":8279,"qscr;":[55349,56518],"quaternions;":8461,"quatint;":10774,"quest;":63,"questeq;":8799,quot:34,"quot;":34,"rAarr;":8667,"rArr;":8658,"rAtail;":10524,"rBarr;":10511,"rHar;":10596,"race;":[8765,817],"racute;":341,"radic;":8730,"raemptyv;":10675,"rang;":10217,"rangd;":10642,"range;":10661,"rangle;":10217,raquo:187,"raquo;":187,"rarr;":8594,"rarrap;":10613,"rarrb;":8677,"rarrbfs;":10528,"rarrc;":10547,"rarrfs;":10526,"rarrhk;":8618,"rarrlp;":8620,"rarrpl;":10565,"rarrsim;":10612,"rarrtl;":8611,"rarrw;":8605,"ratail;":10522,"ratio;":8758,"rationals;":8474,"rbarr;":10509,"rbbrk;":10099,"rbrace;":125,"rbrack;":93,"rbrke;":10636,"rbrksld;":10638,"rbrkslu;":10640,"rcaron;":345,"rcedil;":343,"rceil;":8969,"rcub;":125,"rcy;":1088,"rdca;":10551,"rdldhar;":10601,"rdquo;":8221,"rdquor;":8221,"rdsh;":8627,"real;":8476,"realine;":8475,"realpart;":8476,"reals;":8477,"rect;":9645,reg:174,"reg;":174,"rfisht;":10621,"rfloor;":8971,"rfr;":[55349,56623],"rhard;":8641,"rharu;":8640,"rharul;":10604,"rho;":961,"rhov;":1009,"rightarrow;":8594,"rightarrowtail;":8611,"rightharpoondown;":8641,"rightharpoonup;":8640,"rightleftarrows;":8644,"rightleftharpoons;":8652,"rightrightarrows;":8649,"rightsquigarrow;":8605,"rightthreetimes;":8908,"ring;":730,"risingdotseq;":8787,"rlarr;":8644,"rlhar;":8652,"rlm;":8207,"rmoust;":9137,"rmoustache;":9137,"rnmid;":10990,"roang;":10221,"roarr;":8702,"robrk;":10215,"ropar;":10630,"ropf;":[55349,56675],"roplus;":10798,"rotimes;":10805,"rpar;":41,"rpargt;":10644,"rppolint;":10770,"rrarr;":8649,"rsaquo;":8250,"rscr;":[55349,56519],"rsh;":8625,"rsqb;":93,"rsquo;":8217,"rsquor;":8217,"rthree;":8908,"rtimes;":8906,"rtri;":9657,"rtrie;":8885,"rtrif;":9656,"rtriltri;":10702,"ruluhar;":10600,"rx;":8478,"sacute;":347,"sbquo;":8218,"sc;":8827,"scE;":10932,"scap;":10936,"scaron;":353,"sccue;":8829,"sce;":10928,"scedil;":351,"scirc;":349,"scnE;":10934,"scnap;":10938,"scnsim;":8937,"scpolint;":10771,"scsim;":8831,"scy;":1089,"sdot;":8901,"sdotb;":8865,"sdote;":10854,"seArr;":8664,"searhk;":10533,"searr;":8600,"searrow;":8600,sect:167,"sect;":167,"semi;":59,"seswar;":10537,"setminus;":8726,"setmn;":8726,"sext;":10038,"sfr;":[55349,56624],"sfrown;":8994,"sharp;":9839,"shchcy;":1097,"shcy;":1096,"shortmid;":8739,"shortparallel;":8741,shy:173,"shy;":173,"sigma;":963,"sigmaf;":962,"sigmav;":962,"sim;":8764,"simdot;":10858,"sime;":8771,"simeq;":8771,"simg;":10910,"simgE;":10912,"siml;":10909,"simlE;":10911,"simne;":8774,"simplus;":10788,"simrarr;":10610,"slarr;":8592,"smallsetminus;":8726,"smashp;":10803,"smeparsl;":10724,"smid;":8739,"smile;":8995,"smt;":10922,"smte;":10924,"smtes;":[10924,65024],"softcy;":1100,"sol;":47,"solb;":10692,"solbar;":9023,"sopf;":[55349,56676],"spades;":9824,"spadesuit;":9824,"spar;":8741,"sqcap;":8851,"sqcaps;":[8851,65024],"sqcup;":8852,"sqcups;":[8852,65024],"sqsub;":8847,"sqsube;":8849,"sqsubset;":8847,"sqsubseteq;":8849,"sqsup;":8848,"sqsupe;":8850,"sqsupset;":8848,"sqsupseteq;":8850,"squ;":9633,"square;":9633,"squarf;":9642,"squf;":9642,"srarr;":8594,"sscr;":[55349,56520],"ssetmn;":8726,"ssmile;":8995,"sstarf;":8902,"star;":9734,"starf;":9733,"straightepsilon;":1013,"straightphi;":981,"strns;":175,"sub;":8834,"subE;":10949,"subdot;":10941,"sube;":8838,"subedot;":10947,"submult;":10945,"subnE;":10955,"subne;":8842,"subplus;":10943,"subrarr;":10617,"subset;":8834,"subseteq;":8838,"subseteqq;":10949,"subsetneq;":8842,"subsetneqq;":10955,"subsim;":10951,"subsub;":10965,"subsup;":10963,"succ;":8827,"succapprox;":10936,"succcurlyeq;":8829,"succeq;":10928,"succnapprox;":10938,"succneqq;":10934,"succnsim;":8937,"succsim;":8831,"sum;":8721,"sung;":9834,sup1:185,"sup1;":185,sup2:178,"sup2;":178,sup3:179,"sup3;":179,"sup;":8835,"supE;":10950,"supdot;":10942,"supdsub;":10968,"supe;":8839,"supedot;":10948,"suphsol;":10185,"suphsub;":10967,"suplarr;":10619,"supmult;":10946,"supnE;":10956,"supne;":8843,"supplus;":10944,"supset;":8835,"supseteq;":8839,"supseteqq;":10950,"supsetneq;":8843,"supsetneqq;":10956,"supsim;":10952,"supsub;":10964,"supsup;":10966,"swArr;":8665,"swarhk;":10534,"swarr;":8601,"swarrow;":8601,"swnwar;":10538,szlig:223,"szlig;":223,"target;":8982,"tau;":964,"tbrk;":9140,"tcaron;":357,"tcedil;":355,"tcy;":1090,"tdot;":8411,"telrec;":8981,"tfr;":[55349,56625],"there4;":8756,"therefore;":8756,"theta;":952,"thetasym;":977,"thetav;":977,"thickapprox;":8776,"thicksim;":8764,"thinsp;":8201,"thkap;":8776,"thksim;":8764,thorn:254,"thorn;":254,"tilde;":732,times:215,"times;":215,"timesb;":8864,"timesbar;":10801,"timesd;":10800,"tint;":8749,"toea;":10536,"top;":8868,"topbot;":9014,"topcir;":10993,"topf;":[55349,56677],"topfork;":10970,"tosa;":10537,"tprime;":8244,"trade;":8482,"triangle;":9653,"triangledown;":9663,"triangleleft;":9667,"trianglelefteq;":8884,"triangleq;":8796,"triangleright;":9657,"trianglerighteq;":8885,"tridot;":9708,"trie;":8796,"triminus;":10810,"triplus;":10809,"trisb;":10701,"tritime;":10811,"trpezium;":9186,"tscr;":[55349,56521],"tscy;":1094,"tshcy;":1115,"tstrok;":359,"twixt;":8812,"twoheadleftarrow;":8606,"twoheadrightarrow;":8608,"uArr;":8657,"uHar;":10595,uacute:250,"uacute;":250,"uarr;":8593,"ubrcy;":1118,"ubreve;":365,ucirc:251,"ucirc;":251,"ucy;":1091,"udarr;":8645,"udblac;":369,"udhar;":10606,"ufisht;":10622,"ufr;":[55349,56626],ugrave:249,"ugrave;":249,"uharl;":8639,"uharr;":8638,"uhblk;":9600,"ulcorn;":8988,"ulcorner;":8988,"ulcrop;":8975,"ultri;":9720,"umacr;":363,uml:168,"uml;":168,"uogon;":371,"uopf;":[55349,56678],"uparrow;":8593,"updownarrow;":8597,"upharpoonleft;":8639,"upharpoonright;":8638,"uplus;":8846,"upsi;":965,"upsih;":978,"upsilon;":965,"upuparrows;":8648,"urcorn;":8989,"urcorner;":8989,"urcrop;":8974,"uring;":367,"urtri;":9721,"uscr;":[55349,56522],"utdot;":8944,"utilde;":361,"utri;":9653,"utrif;":9652,"uuarr;":8648,uuml:252,"uuml;":252,"uwangle;":10663,"vArr;":8661,"vBar;":10984,"vBarv;":10985,"vDash;":8872,"vangrt;":10652,"varepsilon;":1013,"varkappa;":1008,"varnothing;":8709,"varphi;":981,"varpi;":982,"varpropto;":8733,"varr;":8597,"varrho;":1009,"varsigma;":962,"varsubsetneq;":[8842,65024],"varsubsetneqq;":[10955,65024],"varsupsetneq;":[8843,65024],"varsupsetneqq;":[10956,65024],"vartheta;":977,"vartriangleleft;":8882,"vartriangleright;":8883,"vcy;":1074,"vdash;":8866,"vee;":8744,"veebar;":8891,"veeeq;":8794,"vellip;":8942,"verbar;":124,"vert;":124,"vfr;":[55349,56627],"vltri;":8882,"vnsub;":[8834,8402],"vnsup;":[8835,8402],"vopf;":[55349,56679],"vprop;":8733,"vrtri;":8883,"vscr;":[55349,56523],"vsubnE;":[10955,65024],"vsubne;":[8842,65024],"vsupnE;":[10956,65024],"vsupne;":[8843,65024],"vzigzag;":10650,"wcirc;":373,"wedbar;":10847,"wedge;":8743,"wedgeq;":8793,"weierp;":8472,"wfr;":[55349,56628],"wopf;":[55349,56680],"wp;":8472,"wr;":8768,"wreath;":8768,"wscr;":[55349,56524],"xcap;":8898,"xcirc;":9711,"xcup;":8899,"xdtri;":9661,"xfr;":[55349,56629],"xhArr;":10234,"xharr;":10231,"xi;":958,"xlArr;":10232,"xlarr;":10229,"xmap;":10236,"xnis;":8955,"xodot;":10752,"xopf;":[55349,56681],"xoplus;":10753,"xotime;":10754,"xrArr;":10233,"xrarr;":10230,"xscr;":[55349,56525],"xsqcup;":10758,"xuplus;":10756,"xutri;":9651,"xvee;":8897,"xwedge;":8896,yacute:253,"yacute;":253,"yacy;":1103,"ycirc;":375,"ycy;":1099,yen:165,"yen;":165,"yfr;":[55349,56630],"yicy;":1111,"yopf;":[55349,56682],"yscr;":[55349,56526],"yucy;":1102,yuml:255,"yuml;":255,"zacute;":378,"zcaron;":382,"zcy;":1079,"zdot;":380,"zeetrf;":8488,"zeta;":950,"zfr;":[55349,56631],"zhcy;":1078,"zigrarr;":8669,"zopf;":[55349,56683],"zscr;":[55349,56527],"zwj;":8205,"zwnj;":8204},Ur=/(A(?:Elig;?|MP;?|acute;?|breve;|c(?:irc;?|y;)|fr;|grave;?|lpha;|macr;|nd;|o(?:gon;|pf;)|pplyFunction;|ring;?|s(?:cr;|sign;)|tilde;?|uml;?)|B(?:a(?:ckslash;|r(?:v;|wed;))|cy;|e(?:cause;|rnoullis;|ta;)|fr;|opf;|reve;|scr;|umpeq;)|C(?:Hcy;|OPY;?|a(?:cute;|p(?:;|italDifferentialD;)|yleys;)|c(?:aron;|edil;?|irc;|onint;)|dot;|e(?:dilla;|nterDot;)|fr;|hi;|ircle(?:Dot;|Minus;|Plus;|Times;)|lo(?:ckwiseContourIntegral;|seCurly(?:DoubleQuote;|Quote;))|o(?:lon(?:;|e;)|n(?:gruent;|int;|tourIntegral;)|p(?:f;|roduct;)|unterClockwiseContourIntegral;)|ross;|scr;|up(?:;|Cap;))|D(?:D(?:;|otrahd;)|Jcy;|Scy;|Zcy;|a(?:gger;|rr;|shv;)|c(?:aron;|y;)|el(?:;|ta;)|fr;|i(?:a(?:critical(?:Acute;|Do(?:t;|ubleAcute;)|Grave;|Tilde;)|mond;)|fferentialD;)|o(?:pf;|t(?:;|Dot;|Equal;)|uble(?:ContourIntegral;|Do(?:t;|wnArrow;)|L(?:eft(?:Arrow;|RightArrow;|Tee;)|ong(?:Left(?:Arrow;|RightArrow;)|RightArrow;))|Right(?:Arrow;|Tee;)|Up(?:Arrow;|DownArrow;)|VerticalBar;)|wn(?:Arrow(?:;|Bar;|UpArrow;)|Breve;|Left(?:RightVector;|TeeVector;|Vector(?:;|Bar;))|Right(?:TeeVector;|Vector(?:;|Bar;))|Tee(?:;|Arrow;)|arrow;))|s(?:cr;|trok;))|E(?:NG;|TH;?|acute;?|c(?:aron;|irc;?|y;)|dot;|fr;|grave;?|lement;|m(?:acr;|pty(?:SmallSquare;|VerySmallSquare;))|o(?:gon;|pf;)|psilon;|qu(?:al(?:;|Tilde;)|ilibrium;)|s(?:cr;|im;)|ta;|uml;?|x(?:ists;|ponentialE;))|F(?:cy;|fr;|illed(?:SmallSquare;|VerySmallSquare;)|o(?:pf;|rAll;|uriertrf;)|scr;)|G(?:Jcy;|T;?|amma(?:;|d;)|breve;|c(?:edil;|irc;|y;)|dot;|fr;|g;|opf;|reater(?:Equal(?:;|Less;)|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;)|scr;|t;)|H(?:ARDcy;|a(?:cek;|t;)|circ;|fr;|ilbertSpace;|o(?:pf;|rizontalLine;)|s(?:cr;|trok;)|ump(?:DownHump;|Equal;))|I(?:Ecy;|Jlig;|Ocy;|acute;?|c(?:irc;?|y;)|dot;|fr;|grave;?|m(?:;|a(?:cr;|ginaryI;)|plies;)|n(?:t(?:;|e(?:gral;|rsection;))|visible(?:Comma;|Times;))|o(?:gon;|pf;|ta;)|scr;|tilde;|u(?:kcy;|ml;?))|J(?:c(?:irc;|y;)|fr;|opf;|s(?:cr;|ercy;)|ukcy;)|K(?:Hcy;|Jcy;|appa;|c(?:edil;|y;)|fr;|opf;|scr;)|L(?:Jcy;|T;?|a(?:cute;|mbda;|ng;|placetrf;|rr;)|c(?:aron;|edil;|y;)|e(?:ft(?:A(?:ngleBracket;|rrow(?:;|Bar;|RightArrow;))|Ceiling;|Do(?:ubleBracket;|wn(?:TeeVector;|Vector(?:;|Bar;)))|Floor;|Right(?:Arrow;|Vector;)|T(?:ee(?:;|Arrow;|Vector;)|riangle(?:;|Bar;|Equal;))|Up(?:DownVector;|TeeVector;|Vector(?:;|Bar;))|Vector(?:;|Bar;)|arrow;|rightarrow;)|ss(?:EqualGreater;|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;))|fr;|l(?:;|eftarrow;)|midot;|o(?:ng(?:Left(?:Arrow;|RightArrow;)|RightArrow;|left(?:arrow;|rightarrow;)|rightarrow;)|pf;|wer(?:LeftArrow;|RightArrow;))|s(?:cr;|h;|trok;)|t;)|M(?:ap;|cy;|e(?:diumSpace;|llintrf;)|fr;|inusPlus;|opf;|scr;|u;)|N(?:Jcy;|acute;|c(?:aron;|edil;|y;)|e(?:gative(?:MediumSpace;|Thi(?:ckSpace;|nSpace;)|VeryThinSpace;)|sted(?:GreaterGreater;|LessLess;)|wLine;)|fr;|o(?:Break;|nBreakingSpace;|pf;|t(?:;|C(?:ongruent;|upCap;)|DoubleVerticalBar;|E(?:lement;|qual(?:;|Tilde;)|xists;)|Greater(?:;|Equal;|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;)|Hump(?:DownHump;|Equal;)|Le(?:ftTriangle(?:;|Bar;|Equal;)|ss(?:;|Equal;|Greater;|Less;|SlantEqual;|Tilde;))|Nested(?:GreaterGreater;|LessLess;)|Precedes(?:;|Equal;|SlantEqual;)|R(?:everseElement;|ightTriangle(?:;|Bar;|Equal;))|S(?:quareSu(?:bset(?:;|Equal;)|perset(?:;|Equal;))|u(?:bset(?:;|Equal;)|cceeds(?:;|Equal;|SlantEqual;|Tilde;)|perset(?:;|Equal;)))|Tilde(?:;|Equal;|FullEqual;|Tilde;)|VerticalBar;))|scr;|tilde;?|u;)|O(?:Elig;|acute;?|c(?:irc;?|y;)|dblac;|fr;|grave;?|m(?:acr;|ega;|icron;)|opf;|penCurly(?:DoubleQuote;|Quote;)|r;|s(?:cr;|lash;?)|ti(?:lde;?|mes;)|uml;?|ver(?:B(?:ar;|rac(?:e;|ket;))|Parenthesis;))|P(?:artialD;|cy;|fr;|hi;|i;|lusMinus;|o(?:incareplane;|pf;)|r(?:;|ecedes(?:;|Equal;|SlantEqual;|Tilde;)|ime;|o(?:duct;|portion(?:;|al;)))|s(?:cr;|i;))|Q(?:UOT;?|fr;|opf;|scr;)|R(?:Barr;|EG;?|a(?:cute;|ng;|rr(?:;|tl;))|c(?:aron;|edil;|y;)|e(?:;|verse(?:E(?:lement;|quilibrium;)|UpEquilibrium;))|fr;|ho;|ight(?:A(?:ngleBracket;|rrow(?:;|Bar;|LeftArrow;))|Ceiling;|Do(?:ubleBracket;|wn(?:TeeVector;|Vector(?:;|Bar;)))|Floor;|T(?:ee(?:;|Arrow;|Vector;)|riangle(?:;|Bar;|Equal;))|Up(?:DownVector;|TeeVector;|Vector(?:;|Bar;))|Vector(?:;|Bar;)|arrow;)|o(?:pf;|undImplies;)|rightarrow;|s(?:cr;|h;)|uleDelayed;)|S(?:H(?:CHcy;|cy;)|OFTcy;|acute;|c(?:;|aron;|edil;|irc;|y;)|fr;|hort(?:DownArrow;|LeftArrow;|RightArrow;|UpArrow;)|igma;|mallCircle;|opf;|q(?:rt;|uare(?:;|Intersection;|Su(?:bset(?:;|Equal;)|perset(?:;|Equal;))|Union;))|scr;|tar;|u(?:b(?:;|set(?:;|Equal;))|c(?:ceeds(?:;|Equal;|SlantEqual;|Tilde;)|hThat;)|m;|p(?:;|erset(?:;|Equal;)|set;)))|T(?:HORN;?|RADE;|S(?:Hcy;|cy;)|a(?:b;|u;)|c(?:aron;|edil;|y;)|fr;|h(?:e(?:refore;|ta;)|i(?:ckSpace;|nSpace;))|ilde(?:;|Equal;|FullEqual;|Tilde;)|opf;|ripleDot;|s(?:cr;|trok;))|U(?:a(?:cute;?|rr(?:;|ocir;))|br(?:cy;|eve;)|c(?:irc;?|y;)|dblac;|fr;|grave;?|macr;|n(?:der(?:B(?:ar;|rac(?:e;|ket;))|Parenthesis;)|ion(?:;|Plus;))|o(?:gon;|pf;)|p(?:Arrow(?:;|Bar;|DownArrow;)|DownArrow;|Equilibrium;|Tee(?:;|Arrow;)|arrow;|downarrow;|per(?:LeftArrow;|RightArrow;)|si(?:;|lon;))|ring;|scr;|tilde;|uml;?)|V(?:Dash;|bar;|cy;|dash(?:;|l;)|e(?:e;|r(?:bar;|t(?:;|ical(?:Bar;|Line;|Separator;|Tilde;))|yThinSpace;))|fr;|opf;|scr;|vdash;)|W(?:circ;|edge;|fr;|opf;|scr;)|X(?:fr;|i;|opf;|scr;)|Y(?:Acy;|Icy;|Ucy;|acute;?|c(?:irc;|y;)|fr;|opf;|scr;|uml;)|Z(?:Hcy;|acute;|c(?:aron;|y;)|dot;|e(?:roWidthSpace;|ta;)|fr;|opf;|scr;)|a(?:acute;?|breve;|c(?:;|E;|d;|irc;?|ute;?|y;)|elig;?|f(?:;|r;)|grave;?|l(?:e(?:fsym;|ph;)|pha;)|m(?:a(?:cr;|lg;)|p;?)|n(?:d(?:;|and;|d;|slope;|v;)|g(?:;|e;|le;|msd(?:;|a(?:a;|b;|c;|d;|e;|f;|g;|h;))|rt(?:;|vb(?:;|d;))|s(?:ph;|t;)|zarr;))|o(?:gon;|pf;)|p(?:;|E;|acir;|e;|id;|os;|prox(?:;|eq;))|ring;?|s(?:cr;|t;|ymp(?:;|eq;))|tilde;?|uml;?|w(?:conint;|int;))|b(?:Not;|a(?:ck(?:cong;|epsilon;|prime;|sim(?:;|eq;))|r(?:vee;|wed(?:;|ge;)))|brk(?:;|tbrk;)|c(?:ong;|y;)|dquo;|e(?:caus(?:;|e;)|mptyv;|psi;|rnou;|t(?:a;|h;|ween;))|fr;|ig(?:c(?:ap;|irc;|up;)|o(?:dot;|plus;|times;)|s(?:qcup;|tar;)|triangle(?:down;|up;)|uplus;|vee;|wedge;)|karow;|l(?:a(?:ck(?:lozenge;|square;|triangle(?:;|down;|left;|right;))|nk;)|k(?:1(?:2;|4;)|34;)|ock;)|n(?:e(?:;|quiv;)|ot;)|o(?:pf;|t(?:;|tom;)|wtie;|x(?:D(?:L;|R;|l;|r;)|H(?:;|D;|U;|d;|u;)|U(?:L;|R;|l;|r;)|V(?:;|H;|L;|R;|h;|l;|r;)|box;|d(?:L;|R;|l;|r;)|h(?:;|D;|U;|d;|u;)|minus;|plus;|times;|u(?:L;|R;|l;|r;)|v(?:;|H;|L;|R;|h;|l;|r;)))|prime;|r(?:eve;|vbar;?)|s(?:cr;|emi;|im(?:;|e;)|ol(?:;|b;|hsub;))|u(?:ll(?:;|et;)|mp(?:;|E;|e(?:;|q;))))|c(?:a(?:cute;|p(?:;|and;|brcup;|c(?:ap;|up;)|dot;|s;)|r(?:et;|on;))|c(?:a(?:ps;|ron;)|edil;?|irc;|ups(?:;|sm;))|dot;|e(?:dil;?|mptyv;|nt(?:;|erdot;|))|fr;|h(?:cy;|eck(?:;|mark;)|i;)|ir(?:;|E;|c(?:;|eq;|le(?:arrow(?:left;|right;)|d(?:R;|S;|ast;|circ;|dash;)))|e;|fnint;|mid;|scir;)|lubs(?:;|uit;)|o(?:lon(?:;|e(?:;|q;))|m(?:ma(?:;|t;)|p(?:;|fn;|le(?:ment;|xes;)))|n(?:g(?:;|dot;)|int;)|p(?:f;|rod;|y(?:;|sr;|)))|r(?:arr;|oss;)|s(?:cr;|u(?:b(?:;|e;)|p(?:;|e;)))|tdot;|u(?:darr(?:l;|r;)|e(?:pr;|sc;)|larr(?:;|p;)|p(?:;|brcap;|c(?:ap;|up;)|dot;|or;|s;)|r(?:arr(?:;|m;)|ly(?:eq(?:prec;|succ;)|vee;|wedge;)|ren;?|vearrow(?:left;|right;))|vee;|wed;)|w(?:conint;|int;)|ylcty;)|d(?:Arr;|Har;|a(?:gger;|leth;|rr;|sh(?:;|v;))|b(?:karow;|lac;)|c(?:aron;|y;)|d(?:;|a(?:gger;|rr;)|otseq;)|e(?:g;?|lta;|mptyv;)|f(?:isht;|r;)|har(?:l;|r;)|i(?:am(?:;|ond(?:;|suit;)|s;)|e;|gamma;|sin;|v(?:;|ide(?:;|ontimes;|)|onx;))|jcy;|lc(?:orn;|rop;)|o(?:llar;|pf;|t(?:;|eq(?:;|dot;)|minus;|plus;|square;)|ublebarwedge;|wn(?:arrow;|downarrows;|harpoon(?:left;|right;)))|r(?:bkarow;|c(?:orn;|rop;))|s(?:c(?:r;|y;)|ol;|trok;)|t(?:dot;|ri(?:;|f;))|u(?:arr;|har;)|wangle;|z(?:cy;|igrarr;))|e(?:D(?:Dot;|ot;)|a(?:cute;?|ster;)|c(?:aron;|ir(?:;|c;?)|olon;|y;)|dot;|e;|f(?:Dot;|r;)|g(?:;|rave;?|s(?:;|dot;))|l(?:;|inters;|l;|s(?:;|dot;))|m(?:acr;|pty(?:;|set;|v;)|sp(?:1(?:3;|4;)|;))|n(?:g;|sp;)|o(?:gon;|pf;)|p(?:ar(?:;|sl;)|lus;|si(?:;|lon;|v;))|q(?:c(?:irc;|olon;)|s(?:im;|lant(?:gtr;|less;))|u(?:als;|est;|iv(?:;|DD;))|vparsl;)|r(?:Dot;|arr;)|s(?:cr;|dot;|im;)|t(?:a;|h;?)|u(?:ml;?|ro;)|x(?:cl;|ist;|p(?:ectation;|onentiale;)))|f(?:allingdotseq;|cy;|emale;|f(?:ilig;|l(?:ig;|lig;)|r;)|ilig;|jlig;|l(?:at;|lig;|tns;)|nof;|o(?:pf;|r(?:all;|k(?:;|v;)))|partint;|r(?:a(?:c(?:1(?:2;?|3;|4;?|5;|6;|8;)|2(?:3;|5;)|3(?:4;?|5;|8;)|45;|5(?:6;|8;)|78;)|sl;)|own;)|scr;)|g(?:E(?:;|l;)|a(?:cute;|mma(?:;|d;)|p;)|breve;|c(?:irc;|y;)|dot;|e(?:;|l;|q(?:;|q;|slant;)|s(?:;|cc;|dot(?:;|o(?:;|l;))|l(?:;|es;)))|fr;|g(?:;|g;)|imel;|jcy;|l(?:;|E;|a;|j;)|n(?:E;|ap(?:;|prox;)|e(?:;|q(?:;|q;))|sim;)|opf;|rave;|s(?:cr;|im(?:;|e;|l;))|t(?:;|c(?:c;|ir;)|dot;|lPar;|quest;|r(?:a(?:pprox;|rr;)|dot;|eq(?:less;|qless;)|less;|sim;)|)|v(?:ertneqq;|nE;))|h(?:Arr;|a(?:irsp;|lf;|milt;|r(?:dcy;|r(?:;|cir;|w;)))|bar;|circ;|e(?:arts(?:;|uit;)|llip;|rcon;)|fr;|ks(?:earow;|warow;)|o(?:arr;|mtht;|ok(?:leftarrow;|rightarrow;)|pf;|rbar;)|s(?:cr;|lash;|trok;)|y(?:bull;|phen;))|i(?:acute;?|c(?:;|irc;?|y;)|e(?:cy;|xcl;?)|f(?:f;|r;)|grave;?|i(?:;|i(?:int;|nt;)|nfin;|ota;)|jlig;|m(?:a(?:cr;|g(?:e;|line;|part;)|th;)|of;|ped;)|n(?:;|care;|fin(?:;|tie;)|odot;|t(?:;|cal;|e(?:gers;|rcal;)|larhk;|prod;))|o(?:cy;|gon;|pf;|ta;)|prod;|quest;?|s(?:cr;|in(?:;|E;|dot;|s(?:;|v;)|v;))|t(?:;|ilde;)|u(?:kcy;|ml;?))|j(?:c(?:irc;|y;)|fr;|math;|opf;|s(?:cr;|ercy;)|ukcy;)|k(?:appa(?:;|v;)|c(?:edil;|y;)|fr;|green;|hcy;|jcy;|opf;|scr;)|l(?:A(?:arr;|rr;|tail;)|Barr;|E(?:;|g;)|Har;|a(?:cute;|emptyv;|gran;|mbda;|ng(?:;|d;|le;)|p;|quo;?|rr(?:;|b(?:;|fs;)|fs;|hk;|lp;|pl;|sim;|tl;)|t(?:;|ail;|e(?:;|s;)))|b(?:arr;|brk;|r(?:ac(?:e;|k;)|k(?:e;|sl(?:d;|u;))))|c(?:aron;|e(?:dil;|il;)|ub;|y;)|d(?:ca;|quo(?:;|r;)|r(?:dhar;|ushar;)|sh;)|e(?:;|ft(?:arrow(?:;|tail;)|harpoon(?:down;|up;)|leftarrows;|right(?:arrow(?:;|s;)|harpoons;|squigarrow;)|threetimes;)|g;|q(?:;|q;|slant;)|s(?:;|cc;|dot(?:;|o(?:;|r;))|g(?:;|es;)|s(?:approx;|dot;|eq(?:gtr;|qgtr;)|gtr;|sim;)))|f(?:isht;|loor;|r;)|g(?:;|E;)|h(?:ar(?:d;|u(?:;|l;))|blk;)|jcy;|l(?:;|arr;|corner;|hard;|tri;)|m(?:idot;|oust(?:;|ache;))|n(?:E;|ap(?:;|prox;)|e(?:;|q(?:;|q;))|sim;)|o(?:a(?:ng;|rr;)|brk;|ng(?:left(?:arrow;|rightarrow;)|mapsto;|rightarrow;)|oparrow(?:left;|right;)|p(?:ar;|f;|lus;)|times;|w(?:ast;|bar;)|z(?:;|enge;|f;))|par(?:;|lt;)|r(?:arr;|corner;|har(?:;|d;)|m;|tri;)|s(?:aquo;|cr;|h;|im(?:;|e;|g;)|q(?:b;|uo(?:;|r;))|trok;)|t(?:;|c(?:c;|ir;)|dot;|hree;|imes;|larr;|quest;|r(?:Par;|i(?:;|e;|f;))|)|ur(?:dshar;|uhar;)|v(?:ertneqq;|nE;))|m(?:DDot;|a(?:cr;?|l(?:e;|t(?:;|ese;))|p(?:;|sto(?:;|down;|left;|up;))|rker;)|c(?:omma;|y;)|dash;|easuredangle;|fr;|ho;|i(?:cro;?|d(?:;|ast;|cir;|dot;?)|nus(?:;|b;|d(?:;|u;)))|l(?:cp;|dr;)|nplus;|o(?:dels;|pf;)|p;|s(?:cr;|tpos;)|u(?:;|ltimap;|map;))|n(?:G(?:g;|t(?:;|v;))|L(?:eft(?:arrow;|rightarrow;)|l;|t(?:;|v;))|Rightarrow;|V(?:Dash;|dash;)|a(?:bla;|cute;|ng;|p(?:;|E;|id;|os;|prox;)|tur(?:;|al(?:;|s;)))|b(?:sp;?|ump(?:;|e;))|c(?:a(?:p;|ron;)|edil;|ong(?:;|dot;)|up;|y;)|dash;|e(?:;|Arr;|ar(?:hk;|r(?:;|ow;))|dot;|quiv;|s(?:ear;|im;)|xist(?:;|s;))|fr;|g(?:E;|e(?:;|q(?:;|q;|slant;)|s;)|sim;|t(?:;|r;))|h(?:Arr;|arr;|par;)|i(?:;|s(?:;|d;)|v;)|jcy;|l(?:Arr;|E;|arr;|dr;|e(?:;|ft(?:arrow;|rightarrow;)|q(?:;|q;|slant;)|s(?:;|s;))|sim;|t(?:;|ri(?:;|e;)))|mid;|o(?:pf;|t(?:;|in(?:;|E;|dot;|v(?:a;|b;|c;))|ni(?:;|v(?:a;|b;|c;))|))|p(?:ar(?:;|allel;|sl;|t;)|olint;|r(?:;|cue;|e(?:;|c(?:;|eq;))))|r(?:Arr;|arr(?:;|c;|w;)|ightarrow;|tri(?:;|e;))|s(?:c(?:;|cue;|e;|r;)|hort(?:mid;|parallel;)|im(?:;|e(?:;|q;))|mid;|par;|qsu(?:be;|pe;)|u(?:b(?:;|E;|e;|set(?:;|eq(?:;|q;)))|cc(?:;|eq;)|p(?:;|E;|e;|set(?:;|eq(?:;|q;)))))|t(?:gl;|ilde;?|lg;|riangle(?:left(?:;|eq;)|right(?:;|eq;)))|u(?:;|m(?:;|ero;|sp;))|v(?:Dash;|Harr;|ap;|dash;|g(?:e;|t;)|infin;|l(?:Arr;|e;|t(?:;|rie;))|r(?:Arr;|trie;)|sim;)|w(?:Arr;|ar(?:hk;|r(?:;|ow;))|near;))|o(?:S;|a(?:cute;?|st;)|c(?:ir(?:;|c;?)|y;)|d(?:ash;|blac;|iv;|ot;|sold;)|elig;|f(?:cir;|r;)|g(?:on;|rave;?|t;)|h(?:bar;|m;)|int;|l(?:arr;|c(?:ir;|ross;)|ine;|t;)|m(?:acr;|ega;|i(?:cron;|d;|nus;))|opf;|p(?:ar;|erp;|lus;)|r(?:;|arr;|d(?:;|er(?:;|of;)|f;?|m;?)|igof;|or;|slope;|v;)|s(?:cr;|lash;?|ol;)|ti(?:lde;?|mes(?:;|as;))|uml;?|vbar;)|p(?:ar(?:;|a(?:;|llel;|)|s(?:im;|l;)|t;)|cy;|er(?:cnt;|iod;|mil;|p;|tenk;)|fr;|h(?:i(?:;|v;)|mmat;|one;)|i(?:;|tchfork;|v;)|l(?:an(?:ck(?:;|h;)|kv;)|us(?:;|acir;|b;|cir;|d(?:o;|u;)|e;|mn;?|sim;|two;))|m;|o(?:intint;|pf;|und;?)|r(?:;|E;|ap;|cue;|e(?:;|c(?:;|approx;|curlyeq;|eq;|n(?:approx;|eqq;|sim;)|sim;))|ime(?:;|s;)|n(?:E;|ap;|sim;)|o(?:d;|f(?:alar;|line;|surf;)|p(?:;|to;))|sim;|urel;)|s(?:cr;|i;)|uncsp;)|q(?:fr;|int;|opf;|prime;|scr;|u(?:at(?:ernions;|int;)|est(?:;|eq;)|ot;?))|r(?:A(?:arr;|rr;|tail;)|Barr;|Har;|a(?:c(?:e;|ute;)|dic;|emptyv;|ng(?:;|d;|e;|le;)|quo;?|rr(?:;|ap;|b(?:;|fs;)|c;|fs;|hk;|lp;|pl;|sim;|tl;|w;)|t(?:ail;|io(?:;|nals;)))|b(?:arr;|brk;|r(?:ac(?:e;|k;)|k(?:e;|sl(?:d;|u;))))|c(?:aron;|e(?:dil;|il;)|ub;|y;)|d(?:ca;|ldhar;|quo(?:;|r;)|sh;)|e(?:al(?:;|ine;|part;|s;)|ct;|g;?)|f(?:isht;|loor;|r;)|h(?:ar(?:d;|u(?:;|l;))|o(?:;|v;))|i(?:ght(?:arrow(?:;|tail;)|harpoon(?:down;|up;)|left(?:arrows;|harpoons;)|rightarrows;|squigarrow;|threetimes;)|ng;|singdotseq;)|l(?:arr;|har;|m;)|moust(?:;|ache;)|nmid;|o(?:a(?:ng;|rr;)|brk;|p(?:ar;|f;|lus;)|times;)|p(?:ar(?:;|gt;)|polint;)|rarr;|s(?:aquo;|cr;|h;|q(?:b;|uo(?:;|r;)))|t(?:hree;|imes;|ri(?:;|e;|f;|ltri;))|uluhar;|x;)|s(?:acute;|bquo;|c(?:;|E;|a(?:p;|ron;)|cue;|e(?:;|dil;)|irc;|n(?:E;|ap;|sim;)|polint;|sim;|y;)|dot(?:;|b;|e;)|e(?:Arr;|ar(?:hk;|r(?:;|ow;))|ct;?|mi;|swar;|tm(?:inus;|n;)|xt;)|fr(?:;|own;)|h(?:arp;|c(?:hcy;|y;)|ort(?:mid;|parallel;)|y;?)|i(?:gma(?:;|f;|v;)|m(?:;|dot;|e(?:;|q;)|g(?:;|E;)|l(?:;|E;)|ne;|plus;|rarr;))|larr;|m(?:a(?:llsetminus;|shp;)|eparsl;|i(?:d;|le;)|t(?:;|e(?:;|s;)))|o(?:ftcy;|l(?:;|b(?:;|ar;))|pf;)|pa(?:des(?:;|uit;)|r;)|q(?:c(?:ap(?:;|s;)|up(?:;|s;))|su(?:b(?:;|e;|set(?:;|eq;))|p(?:;|e;|set(?:;|eq;)))|u(?:;|ar(?:e;|f;)|f;))|rarr;|s(?:cr;|etmn;|mile;|tarf;)|t(?:ar(?:;|f;)|r(?:aight(?:epsilon;|phi;)|ns;))|u(?:b(?:;|E;|dot;|e(?:;|dot;)|mult;|n(?:E;|e;)|plus;|rarr;|s(?:et(?:;|eq(?:;|q;)|neq(?:;|q;))|im;|u(?:b;|p;)))|cc(?:;|approx;|curlyeq;|eq;|n(?:approx;|eqq;|sim;)|sim;)|m;|ng;|p(?:1;?|2;?|3;?|;|E;|d(?:ot;|sub;)|e(?:;|dot;)|hs(?:ol;|ub;)|larr;|mult;|n(?:E;|e;)|plus;|s(?:et(?:;|eq(?:;|q;)|neq(?:;|q;))|im;|u(?:b;|p;))))|w(?:Arr;|ar(?:hk;|r(?:;|ow;))|nwar;)|zlig;?)|t(?:a(?:rget;|u;)|brk;|c(?:aron;|edil;|y;)|dot;|elrec;|fr;|h(?:e(?:re(?:4;|fore;)|ta(?:;|sym;|v;))|i(?:ck(?:approx;|sim;)|nsp;)|k(?:ap;|sim;)|orn;?)|i(?:lde;|mes(?:;|b(?:;|ar;)|d;|)|nt;)|o(?:ea;|p(?:;|bot;|cir;|f(?:;|ork;))|sa;)|prime;|r(?:ade;|i(?:angle(?:;|down;|left(?:;|eq;)|q;|right(?:;|eq;))|dot;|e;|minus;|plus;|sb;|time;)|pezium;)|s(?:c(?:r;|y;)|hcy;|trok;)|w(?:ixt;|ohead(?:leftarrow;|rightarrow;)))|u(?:Arr;|Har;|a(?:cute;?|rr;)|br(?:cy;|eve;)|c(?:irc;?|y;)|d(?:arr;|blac;|har;)|f(?:isht;|r;)|grave;?|h(?:ar(?:l;|r;)|blk;)|l(?:c(?:orn(?:;|er;)|rop;)|tri;)|m(?:acr;|l;?)|o(?:gon;|pf;)|p(?:arrow;|downarrow;|harpoon(?:left;|right;)|lus;|si(?:;|h;|lon;)|uparrows;)|r(?:c(?:orn(?:;|er;)|rop;)|ing;|tri;)|scr;|t(?:dot;|ilde;|ri(?:;|f;))|u(?:arr;|ml;?)|wangle;)|v(?:Arr;|Bar(?:;|v;)|Dash;|a(?:ngrt;|r(?:epsilon;|kappa;|nothing;|p(?:hi;|i;|ropto;)|r(?:;|ho;)|s(?:igma;|u(?:bsetneq(?:;|q;)|psetneq(?:;|q;)))|t(?:heta;|riangle(?:left;|right;))))|cy;|dash;|e(?:e(?:;|bar;|eq;)|llip;|r(?:bar;|t;))|fr;|ltri;|nsu(?:b;|p;)|opf;|prop;|rtri;|s(?:cr;|u(?:bn(?:E;|e;)|pn(?:E;|e;)))|zigzag;)|w(?:circ;|e(?:d(?:bar;|ge(?:;|q;))|ierp;)|fr;|opf;|p;|r(?:;|eath;)|scr;)|x(?:c(?:ap;|irc;|up;)|dtri;|fr;|h(?:Arr;|arr;)|i;|l(?:Arr;|arr;)|map;|nis;|o(?:dot;|p(?:f;|lus;)|time;)|r(?:Arr;|arr;)|s(?:cr;|qcup;)|u(?:plus;|tri;)|vee;|wedge;)|y(?:ac(?:ute;?|y;)|c(?:irc;|y;)|en;?|fr;|icy;|opf;|scr;|u(?:cy;|ml;?))|z(?:acute;|c(?:aron;|y;)|dot;|e(?:etrf;|ta;)|fr;|hcy;|igrarr;|opf;|scr;|w(?:j;|nj;)))|[\s\S]/g,Ro=32,ba=/[^\r"&\u0000]+/g,Pn=/[^\r'&\u0000]+/g,Dn=/[^\r\t\n\f &>\u0000]+/g,Ar=/[^\r\t\n\f \/>A-Z\u0000]+/g,Ki=/[^\r\t\n\f \/=>A-Z\u0000]+/g,Jn=/[^\]\r\u0000\uffff]*/g,Vs=/[^&<\r\u0000\uffff]*/g,eo=/[^<\r\u0000\uffff]*/g,Tl=/[^\r\u0000\uffff]*/g,Ya=/(?:(\/)?([a-z]+)>)|[\s\S]/g,qn=/(?:([-a-z]+)[ \t\n\f]*=[ \t\n\f]*('[^'&\r\u0000]*'|"[^"&\r\u0000]*"|[^\t\n\r\f "&'\u0000>][^&> \t\n\r\f\u0000]*[ \t\n\f]))|[\s\S]/g,to=/[^\x09\x0A\x0C\x0D\x20]/,ps=/[^\x09\x0A\x0C\x0D\x20]/g,ya=/[^\x00\x09\x0A\x0C\x0D\x20]/,Rn=/^[\x09\x0A\x0C\x0D\x20]+/,fs=/\x00/g;function Nr(U){var Y=16384;if(U.length<Y)return String.fromCharCode.apply(String,U);for(var he="",ye=0;ye<U.length;ye+=Y)he+=String.fromCharCode.apply(String,U.slice(ye,ye+Y));return he}function Ka(U){for(var Y=[],he=0;he<U.length;he++)Y[he]=U.charCodeAt(he);return Y}function Li(U,Y){if(typeof Y=="string")return U.namespaceURI===s.HTML&&U.localName===Y;var he=Y[U.namespaceURI];return he&&he[U.localName]}function Yo(U){return Li(U,Pt)}function ms(U){if(Li(U,Bt))return!0;if(U.namespaceURI===s.MATHML&&U.localName==="annotation-xml"){var Y=U.getAttribute("encoding");if(Y&&(Y=Y.toLowerCase()),Y==="text/html"||Y==="application/xhtml+xml")return!0}return!1}function Qa(U){return U in Le?Le[U]:U}function io(U){for(var Y=0,he=U.length;Y<he;Y++)U[Y][0]in Ie&&(U[Y][0]=Ie[U[Y][0]])}function On(U){for(var Y=0,he=U.length;Y<he;Y++)if(U[Y][0]==="definitionurl"){U[Y][0]="definitionURL";break}}function yo(U){for(var Y=0,he=U.length;Y<he;Y++)U[Y][0]in Di&&U[Y].push(Di[U[Y][0]])}function qe(U,Y){for(var he=0,ye=U.length;he<ye;he++){var se=U[he][0],Pe=U[he][1];Y.hasAttribute(se)||Y._setAttribute(se,Pe)}}Q.ElementStack=function(){this.elements=[],this.top=null},Q.ElementStack.prototype.push=function(U){this.elements.push(U),this.top=U},Q.ElementStack.prototype.pop=function(U){this.elements.pop(),this.top=this.elements[this.elements.length-1]},Q.ElementStack.prototype.popTag=function(U){for(var Y=this.elements.length-1;Y>0;Y--){var he=this.elements[Y];if(Li(he,U))break}this.elements.length=Y,this.top=this.elements[Y-1]},Q.ElementStack.prototype.popElementType=function(U){for(var Y=this.elements.length-1;Y>0&&!(this.elements[Y]instanceof U);Y--);this.elements.length=Y,this.top=this.elements[Y-1]},Q.ElementStack.prototype.popElement=function(U){for(var Y=this.elements.length-1;Y>0&&this.elements[Y]!==U;Y--);this.elements.length=Y,this.top=this.elements[Y-1]},Q.ElementStack.prototype.removeElement=function(U){if(this.top===U)this.pop();else{var Y=this.elements.lastIndexOf(U);Y!==-1&&this.elements.splice(Y,1)}},Q.ElementStack.prototype.clearToContext=function(U){for(var Y=this.elements.length-1;Y>0&&!Li(this.elements[Y],U);Y--);this.elements.length=Y+1,this.top=this.elements[Y]},Q.ElementStack.prototype.contains=function(U){return this.inSpecificScope(U,Object.create(null))},Q.ElementStack.prototype.inSpecificScope=function(U,Y){for(var he=this.elements.length-1;he>=0;he--){var ye=this.elements[he];if(Li(ye,U))return!0;if(Li(ye,Y))return!1}return!1},Q.ElementStack.prototype.elementInSpecificScope=function(U,Y){for(var he=this.elements.length-1;he>=0;he--){var ye=this.elements[he];if(ye===U)return!0;if(Li(ye,Y))return!1}return!1},Q.ElementStack.prototype.elementTypeInSpecificScope=function(U,Y){for(var he=this.elements.length-1;he>=0;he--){var ye=this.elements[he];if(ye instanceof U)return!0;if(Li(ye,Y))return!1}return!1},Q.ElementStack.prototype.inScope=function(U){return this.inSpecificScope(U,ee)},Q.ElementStack.prototype.elementInScope=function(U){return this.elementInSpecificScope(U,ee)},Q.ElementStack.prototype.elementTypeInScope=function(U){return this.elementTypeInSpecificScope(U,ee)},Q.ElementStack.prototype.inButtonScope=function(U){return this.inSpecificScope(U,fe)},Q.ElementStack.prototype.inListItemScope=function(U){return this.inSpecificScope(U,B)},Q.ElementStack.prototype.inTableScope=function(U){return this.inSpecificScope(U,Ue)},Q.ElementStack.prototype.inSelectScope=function(U){for(var Y=this.elements.length-1;Y>=0;Y--){var he=this.elements[Y];if(he.namespaceURI!==s.HTML)return!1;var ye=he.localName;if(ye===U)return!0;if(ye!=="optgroup"&&ye!=="option")return!1}return!1},Q.ElementStack.prototype.generateImpliedEndTags=function(U,Y){for(var he=Y?Qe:ct,ye=this.elements.length-1;ye>=0;ye--){var se=this.elements[ye];if(U&&Li(se,U)||!Li(this.elements[ye],he))break}this.elements.length=ye+1,this.top=this.elements[ye]},Q.ActiveFormattingElements=function(){this.list=[],this.attrs=[]},Q.ActiveFormattingElements.prototype.MARKER={localName:"|"},Q.ActiveFormattingElements.prototype.insertMarker=function(){this.list.push(this.MARKER),this.attrs.push(this.MARKER)},Q.ActiveFormattingElements.prototype.push=function(U,Y){for(var he=0,ye=this.list.length-1;ye>=0&&this.list[ye]!==this.MARKER;ye--)if(ze(U,this.list[ye],this.attrs[ye])&&(he++,he===3)){this.list.splice(ye,1),this.attrs.splice(ye,1);break}this.list.push(U);for(var se=[],Pe=0;Pe<Y.length;Pe++)se[Pe]=Y[Pe];this.attrs.push(se);function ze(He,Xe,je){if(He.localName!==Xe.localName||He._numattrs!==je.length)return!1;for(var dt=0,Ct=je.length;dt<Ct;dt++){var Tt=je[dt][0],Ae=je[dt][1];if(!He.hasAttribute(Tt)||He.getAttribute(Tt)!==Ae)return!1}return!0}},Q.ActiveFormattingElements.prototype.clearToMarker=function(){for(var U=this.list.length-1;U>=0&&this.list[U]!==this.MARKER;U--);U<0&&(U=0),this.list.length=U,this.attrs.length=U},Q.ActiveFormattingElements.prototype.findElementByTag=function(U){for(var Y=this.list.length-1;Y>=0;Y--){var he=this.list[Y];if(he===this.MARKER)break;if(he.localName===U)return he}return null},Q.ActiveFormattingElements.prototype.indexOf=function(U){return this.list.lastIndexOf(U)},Q.ActiveFormattingElements.prototype.remove=function(U){var Y=this.list.lastIndexOf(U);Y!==-1&&(this.list.splice(Y,1),this.attrs.splice(Y,1))},Q.ActiveFormattingElements.prototype.replace=function(U,Y,he){var ye=this.list.lastIndexOf(U);ye!==-1&&(this.list[ye]=Y,this.attrs[ye]=he)},Q.ActiveFormattingElements.prototype.insertAfter=function(U,Y){var he=this.list.lastIndexOf(U);he!==-1&&(this.list.splice(he,0,Y),this.attrs.splice(he,0,Y))};function Q(U,Y,he){var ye=null,se=0,Pe=0,ze=!1,He=!1,Xe=0,je=[],dt="",Ct=!0,Tt=0,Ae=vi,ni,Lt,$e="",$i="",Ut=[],hi="",jt="",nt=[],Gt=[],oi=[],tr=[],Wi=[],an=!1,it=vc,Hn=null,ro=[],Ne=new Q.ElementStack,yi=new Q.ActiveFormattingElements,Ln=Y!==void 0,Ko=null,sr=null,_n=!0;Y&&(_n=Y.ownerDocument._scripting_enabled),he&&he.scripting_enabled===!1&&(_n=!1);var pi=!0,va=!1,gs,Ml,It=[],bn=!1,Us=!1,Ja={document:function(){return Zi},_asDocumentFragment:function(){for(var z=Zi.createDocumentFragment(),j=Zi.firstChild;j.hasChildNodes();)z.appendChild(j.firstChild);return z},pause:function(){Tt++},resume:function(){Tt--,this.parse("")},parse:function(z,j,Ce){var Ye;return Tt>0?(dt+=z,!0):(Xe===0?(dt&&(z=dt+z,dt=""),j&&(z+="\uFFFF",ze=!0),ye=z,se=z.length,Pe=0,Ct&&(Ct=!1,ye.charCodeAt(0)===65279&&(Pe=1)),Xe++,Ye=Cd(Ce),dt=ye.substring(Pe,se),Xe--):(Xe++,je.push(ye,se,Pe),ye=z,se=z.length,Pe=0,Cd(),Ye=!1,dt=ye.substring(Pe,se),Pe=je.pop(),se=je.pop(),ye=je.pop(),dt&&(ye=dt+ye.substring(Pe),se=ye.length,Pe=0,dt=""),Xe--),Ye)}},Zi=new e(!0,U);if(Zi._parser=Ja,Zi._scripting_enabled=_n,Y){if(Y.ownerDocument._quirks&&(Zi._quirks=!0),Y.ownerDocument._limitedQuirks&&(Zi._limitedQuirks=!0),Y.namespaceURI===s.HTML)switch(Y.localName){case"title":case"textarea":Ae=xo;break;case"style":case"xmp":case"iframe":case"noembed":case"noframes":case"script":case"plaintext":Ae=Ta;break}var xa=Zi.createElement("html");Zi._appendChild(xa),Ne.push(xa),Y instanceof w.HTMLTemplateElement&&ro.push(oa),dr();for(var el=Y;el!==null;el=el.parentElement)if(el instanceof w.HTMLFormElement){sr=el;break}}function Cd(z){for(var j,Ce,Ye,ht;Pe<se;){if(Tt>0||z&&z())return!0;switch(typeof Ae.lookahead){case"undefined":if(j=ye.charCodeAt(Pe++),He&&(He=!1,j===10)){Pe++;continue}switch(j){case 13:Pe<se?ye.charCodeAt(Pe)===10&&Pe++:He=!0,Ae(10);break;case 65535:if(ze&&Pe===se){Ae(M);break}default:Ae(j);break}break;case"number":j=ye.charCodeAt(Pe);var Nt=Ae.lookahead,ri=!0;if(Nt<0&&(ri=!1,Nt=-Nt),Nt<se-Pe)Ce=ri?ye.substring(Pe,Pe+Nt):null,ht=!1;else if(ze)Ce=ri?ye.substring(Pe,se):null,ht=!0,j===65535&&Pe===se-1&&(j=M);else return!0;Ae(j,Ce,ht);break;case"string":j=ye.charCodeAt(Pe),Ye=Ae.lookahead;var Ti=ye.indexOf(Ye,Pe);if(Ti!==-1)Ce=ye.substring(Pe,Ti+Ye.length),ht=!1;else{if(!ze)return!0;Ce=ye.substring(Pe,se),j===65535&&Pe===se-1&&(j=M),ht=!0}Ae(j,Ce,ht);break}}return!1}function js(z,j){for(var Ce=0;Ce<Wi.length;Ce++)if(Wi[Ce][0]===z)return;j!==void 0?Wi.push([z,j]):Wi.push([z])}function ap(){qn.lastIndex=Pe-1;var z=qn.exec(ye);if(!z)throw new Error("should never happen");var j=z[1];if(!j)return!1;var Ce=z[2],Ye=Ce.length;switch(Ce[0]){case'"':case"'":Ce=Ce.substring(1,Ye-1),Pe+=z[0].length-1,Ae=yu;break;default:Ae=oo,Pe+=z[0].length-1,Ce=Ce.substring(0,Ye-1);break}for(var ht=0;ht<Wi.length;ht++)if(Wi[ht][0]===j)return!0;return Wi.push([j,Ce]),!0}function Ed(){an=!1,$e="",Wi.length=0}function wa(){an=!0,$e="",Wi.length=0}function Nn(){Ut.length=0}function Il(){hi=""}function lc(){jt=""}function qs(){nt.length=0}function Hs(){Gt.length=0,oi=null,tr=null}function cc(){oi=[]}function vo(){tr=[]}function Gi(){va=!0}function mu(){return Ne.top&&Ne.top.namespaceURI!=="http://www.w3.org/1999/xhtml"}function pr(z){return $i===z}function Ei(){if(It.length>0){var z=Nr(It);if(It.length=0,Us&&(Us=!1,z[0]===`
`&&(z=z.substring(1)),z.length===0))return;Bi(I,z),bn=!1}Us=!1}function Qo(z){z.lastIndex=Pe-1;var j=z.exec(ye);if(j&&j.index===Pe-1)return j=j[0],Pe+=j.length-1,ze&&Pe===se&&(j=j.slice(0,-1),Pe--),j;throw new Error("should never happen")}function Wr(z){z.lastIndex=Pe-1;var j=z.exec(ye)[0];return j?(Ca(j),Pe+=j.length-1,!0):!1}function Ca(z){It.length>0&&Ei(),!(Us&&(Us=!1,z[0]===`
`&&(z=z.substring(1)),z.length===0))&&Bi(I,z)}function fi(){if(an)Bi(R,$e);else{var z=$e;$e="",$i=z,Bi(A,z,Wi)}}function Al(){if(Pe===se)return!1;Ya.lastIndex=Pe;var z=Ya.exec(ye);if(!z)throw new Error("should never happen");var j=z[2];if(!j)return!1;var Ce=z[1];return Ce?(Pe+=j.length+2,Bi(R,j)):(Pe+=j.length+1,$i=j,Bi(A,j,G)),!0}function kl(){an?Bi(R,$e,null,!0):Bi(A,$e,Wi,!0)}function ji(){Bi(W,Nr(Gt),oi?Nr(oi):void 0,tr?Nr(tr):void 0)}function ii(){Ei(),it(M),Zi.modclock=1}var Bi=Ja.insertToken=function(j,Ce,Ye,ht){Ei();var Nt=Ne.top;!Nt||Nt.namespaceURI===s.HTML?it(j,Ce,Ye,ht):j!==A&&j!==I?zl(j,Ce,Ye,ht):Yo(Nt)&&(j===I||j===A&&Ce!=="mglyph"&&Ce!=="malignmark")||j===A&&Ce==="svg"&&Nt.namespaceURI===s.MATHML&&Nt.localName==="annotation-xml"||ms(Nt)?(Ml=!0,it(j,Ce,Ye,ht),Ml=!1):zl(j,Ce,Ye,ht)};function ir(z){var j=Ne.top;no&&Li(j,tt)?Yi(function(Ce){return Ce.createComment(z)}):(j instanceof w.HTMLTemplateElement&&(j=j.content),j._appendChild(j.ownerDocument.createComment(z)))}function fr(z){var j=Ne.top;if(no&&Li(j,tt))Yi(function(Ye){return Ye.createTextNode(z)});else{j instanceof w.HTMLTemplateElement&&(j=j.content);var Ce=j.lastChild;Ce&&Ce.nodeType===a.TEXT_NODE?Ce.appendData(z):j._appendChild(j.ownerDocument.createTextNode(z))}}function rr(z,j,Ce){var Ye=_.createElement(z,j,null);if(Ce)for(var ht=0,Nt=Ce.length;ht<Nt;ht++)Ye._setAttribute(Ce[ht][0],Ce[ht][1]);return Ye}var no=!1;function Zt(z,j){var Ce=yn(function(Ye){return rr(Ye,z,j)});return Li(Ce,ae)&&(Ce._form=sr),Ce}function yn(z){var j;return no&&Li(Ne.top,tt)?j=Yi(z):Ne.top instanceof w.HTMLTemplateElement?(j=z(Ne.top.content.ownerDocument),Ne.top.content._appendChild(j)):(j=z(Ne.top.ownerDocument),Ne.top._appendChild(j)),Ne.push(j),j}function vn(z,j,Ce){return yn(function(Ye){var ht=Ye._createElementNS(z,Ce,null);if(j)for(var Nt=0,ri=j.length;Nt<ri;Nt++){var Ti=j[Nt];Ti.length===2?ht._setAttribute(Ti[0],Ti[1]):ht._setAttributeNS(Ti[2],Ti[0],Ti[1])}return ht})}function tl(z){for(var j=Ne.elements.length-1;j>=0;j--)if(Ne.elements[j]instanceof z)return j;return-1}function Yi(z){var j,Ce,Ye=-1,ht=-1,Nt;if(Ye=tl(w.HTMLTableElement),ht=tl(w.HTMLTemplateElement),ht>=0&&(Ye<0||ht>Ye)?j=Ne.elements[ht]:Ye>=0&&(j=Ne.elements[Ye].parentNode,j?Ce=Ne.elements[Ye]:j=Ne.elements[Ye-1]),j||(j=Ne.elements[0]),j instanceof w.HTMLTemplateElement&&(j=j.content),Nt=z(j.ownerDocument),Nt.nodeType===a.TEXT_NODE){var ri;if(Ce?ri=Ce.previousSibling:ri=j.lastChild,ri&&ri.nodeType===a.TEXT_NODE)return ri.appendData(Nt.data),Nt}return Ce?j.insertBefore(Nt,Ce):j._appendChild(Nt),Nt}function dr(){for(var z=!1,j=Ne.elements.length-1;j>=0;j--){var Ce=Ne.elements[j];if(j===0&&(z=!0,Ln&&(Ce=Y)),Ce.namespaceURI===s.HTML){var Ye=Ce.localName;switch(Ye){case"select":for(var ht=j;ht>0;){var Nt=Ne.elements[--ht];if(Nt instanceof w.HTMLTemplateElement)break;if(Nt instanceof w.HTMLTableElement){it=Pa;return}}it=Eo;return;case"tr":it=na;return;case"tbody":case"tfoot":case"thead":it=rs;return;case"caption":it=Fl;return;case"colgroup":it=is;return;case"table":it=so;return;case"template":it=ro[ro.length-1];return;case"body":it=Jt;return;case"frameset":it=xc;return;case"html":Ko===null?it=ka:it=sl;return;default:if(!z){if(Ye==="head"){it=wr;return}if(Ye==="td"||Ye==="th"){it=ns;return}}}}if(z){it=Jt;return}}}function Si(z,j){Zt(z,j),Ae=Sa,Hn=it,it=Fn}function ui(z,j){Zt(z,j),Ae=xo,Hn=it,it=Fn}function $s(z,j){return{elt:rr(z,yi.list[j].localName,yi.attrs[j]),attrs:yi.attrs[j]}}function Yt(){if(yi.list.length!==0){var z=yi.list[yi.list.length-1];if(z!==yi.MARKER&&Ne.elements.lastIndexOf(z)===-1){for(var j=yi.list.length-2;j>=0&&(z=yi.list[j],!(z===yi.MARKER||Ne.elements.lastIndexOf(z)!==-1));j--);for(j=j+1;j<yi.list.length;j++){var Ce=yn(function(Ye){return $s(Ye,j).elt});yi.list[j]=Ce}}}}var Ea={localName:"BM"};function xn(z){if(Li(Ne.top,z)&&yi.indexOf(Ne.top)===-1)return Ne.pop(),!0;for(var j=0;j<8;){j++;var Ce=yi.findElementByTag(z);if(!Ce)return!1;var Ye=Ne.elements.lastIndexOf(Ce);if(Ye===-1)return yi.remove(Ce),!0;if(!Ne.elementInScope(Ce))return!0;for(var ht=null,Nt,ri=Ye+1;ri<Ne.elements.length;ri++)if(Li(Ne.elements[ri],ue)){ht=Ne.elements[ri],Nt=ri;break}if(ht){var Ti=Ne.elements[Ye-1];yi.insertAfter(Ce,Ea);for(var mr=ht,Zr=ht,zn=Nt,ao,Fo=0;Fo++,mr=Ne.elements[--zn],mr!==Ce;){if(ao=yi.indexOf(mr),Fo>3&&ao!==-1&&(yi.remove(mr),ao=-1),ao===-1){Ne.removeElement(mr);continue}var So=$s(Ti.ownerDocument,ao);yi.replace(mr,So.elt,So.attrs),Ne.elements[zn]=So.elt,mr=So.elt,Zr===ht&&(yi.remove(Ea),yi.insertAfter(So.elt,Ea)),mr._appendChild(Zr),Zr=mr}no&&Li(Ti,tt)?Yi(function(){return Zr}):Ti instanceof w.HTMLTemplateElement?Ti.content._appendChild(Zr):Ti._appendChild(Zr);for(var bs=$s(ht.ownerDocument,yi.indexOf(Ce));ht.hasChildNodes();)bs.elt._appendChild(ht.firstChild);ht._appendChild(bs.elt),yi.remove(Ce),yi.replace(Ea,bs.elt,bs.attrs),Ne.removeElement(Ce);var Su=Ne.elements.lastIndexOf(ht);Ne.elements.splice(Su+1,0,bs.elt)}else return Ne.popElement(Ce),yi.remove(Ce),!0}return!0}function gu(){Ne.pop(),it=Hn}function _s(){delete Zi._parser,Ne.elements.length=0,Zi.defaultView&&Zi.defaultView.dispatchEvent(new w.Event("load",{}))}function Wt(z,j){Ae=j,Pe--}function vi(z){switch(z){case 38:ni=vi,Ae=No;break;case 60:if(Al())break;Ae=Ma;break;case 0:It.push(z),bn=!0;break;case-1:ii();break;default:Wr(Vs)||It.push(z);break}}function xo(z){switch(z){case 38:ni=xo,Ae=No;break;case 60:Ae=Pl;break;case 0:It.push(65533),bn=!0;break;case-1:ii();break;default:It.push(z);break}}function Sa(z){switch(z){case 60:Ae=uc;break;case 0:It.push(65533);break;case-1:ii();break;default:Wr(eo)||It.push(z);break}}function Oo(z){switch(z){case 60:Ae=lp;break;case 0:It.push(65533);break;case-1:ii();break;default:Wr(eo)||It.push(z);break}}function Ta(z){switch(z){case 0:It.push(65533);break;case-1:ii();break;default:Wr(Tl)||It.push(z);break}}function Ma(z){switch(z){case 33:Ae=Js;break;case 47:Ae=Jr;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ed(),Wt(z,Gs);break;case 63:Wt(z,Rl);break;default:It.push(60),Wt(z,vi);break}}function Jr(z){switch(z){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:wa(),Wt(z,Gs);break;case 62:Ae=vi;break;case-1:It.push(60),It.push(47),ii();break;default:Wt(z,Rl);break}}function Gs(z){switch(z){case 9:case 10:case 12:case 32:Ae=oo;break;case 47:Ae=Lo;break;case 62:Ae=vi,fi();break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:$e+=String.fromCharCode(z+32);break;case 0:$e+="\uFFFD";break;case-1:ii();break;default:$e+=Qo(Ar);break}}function Pl(z){z===47?(Nn(),Ae=Ws):(It.push(60),Wt(z,xo))}function Ws(z){switch(z){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:wa(),Wt(z,en);break;default:It.push(60),It.push(47),Wt(z,xo);break}}function en(z){switch(z){case 9:case 10:case 12:case 32:if(pr($e)){Ae=oo;return}break;case 47:if(pr($e)){Ae=Lo;return}break;case 62:if(pr($e)){Ae=vi,fi();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:$e+=String.fromCharCode(z+32),Ut.push(z);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:$e+=String.fromCharCode(z),Ut.push(z);return;default:break}It.push(60),It.push(47),E(It,Ut),Wt(z,xo)}function uc(z){z===47?(Nn(),Ae=dc):(It.push(60),Wt(z,Sa))}function dc(z){switch(z){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:wa(),Wt(z,Sd);break;default:It.push(60),It.push(47),Wt(z,Sa);break}}function Sd(z){switch(z){case 9:case 10:case 12:case 32:if(pr($e)){Ae=oo;return}break;case 47:if(pr($e)){Ae=Lo;return}break;case 62:if(pr($e)){Ae=vi,fi();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:$e+=String.fromCharCode(z+32),Ut.push(z);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:$e+=String.fromCharCode(z),Ut.push(z);return;default:break}It.push(60),It.push(47),E(It,Ut),Wt(z,Sa)}function lp(z){switch(z){case 47:Nn(),Ae=wn;break;case 33:Ae=Jo,It.push(60),It.push(33);break;default:It.push(60),Wt(z,Oo);break}}function wn(z){switch(z){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:wa(),Wt(z,Dl);break;default:It.push(60),It.push(47),Wt(z,Oo);break}}function Dl(z){switch(z){case 9:case 10:case 12:case 32:if(pr($e)){Ae=oo;return}break;case 47:if(pr($e)){Ae=Lo;return}break;case 62:if(pr($e)){Ae=vi,fi();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:$e+=String.fromCharCode(z+32),Ut.push(z);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:$e+=String.fromCharCode(z),Ut.push(z);return;default:break}It.push(60),It.push(47),E(It,Ut),Wt(z,Oo)}function Jo(z){z===45?(Ae=Ia,It.push(45)):Wt(z,Oo)}function Ia(z){z===45?(Ae=Zs,It.push(45)):Wt(z,Oo)}function $n(z){switch(z){case 45:Ae=wo,It.push(45);break;case 60:Ae=il;break;case 0:It.push(65533);break;case-1:ii();break;default:It.push(z);break}}function wo(z){switch(z){case 45:Ae=Zs,It.push(45);break;case 60:Ae=il;break;case 0:Ae=$n,It.push(65533);break;case-1:ii();break;default:Ae=$n,It.push(z);break}}function Zs(z){switch(z){case 45:It.push(45);break;case 60:Ae=il;break;case 62:Ae=Oo,It.push(62);break;case 0:Ae=$n,It.push(65533);break;case-1:ii();break;default:Ae=$n,It.push(z);break}}function il(z){switch(z){case 47:Nn(),Ae=cp;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Nn(),It.push(60),Wt(z,up);break;default:It.push(60),Wt(z,$n);break}}function cp(z){switch(z){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:wa(),Wt(z,_u);break;default:It.push(60),It.push(47),Wt(z,$n);break}}function _u(z){switch(z){case 9:case 10:case 12:case 32:if(pr($e)){Ae=oo;return}break;case 47:if(pr($e)){Ae=Lo;return}break;case 62:if(pr($e)){Ae=vi,fi();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:$e+=String.fromCharCode(z+32),Ut.push(z);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:$e+=String.fromCharCode(z),Ut.push(z);return;default:break}It.push(60),It.push(47),E(It,Ut),Wt(z,$n)}function up(z){switch(z){case 9:case 10:case 12:case 32:case 47:case 62:Nr(Ut)==="script"?Ae=Xs:Ae=$n,It.push(z);break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:Ut.push(z+32),It.push(z);break;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ut.push(z),It.push(z);break;default:Wt(z,$n);break}}function Xs(z){switch(z){case 45:Ae=dp,It.push(45);break;case 60:Ae=Ys,It.push(60);break;case 0:It.push(65533);break;case-1:ii();break;default:It.push(z);break}}function dp(z){switch(z){case 45:Ae=hc,It.push(45);break;case 60:Ae=Ys,It.push(60);break;case 0:Ae=Xs,It.push(65533);break;case-1:ii();break;default:Ae=Xs,It.push(z);break}}function hc(z){switch(z){case 45:It.push(45);break;case 60:Ae=Ys,It.push(60);break;case 62:Ae=Oo,It.push(62);break;case 0:Ae=Xs,It.push(65533);break;case-1:ii();break;default:Ae=Xs,It.push(z);break}}function Ys(z){z===47?(Nn(),Ae=pc,It.push(47)):Wt(z,Xs)}function pc(z){switch(z){case 9:case 10:case 12:case 32:case 47:case 62:Nr(Ut)==="script"?Ae=$n:Ae=Xs,It.push(z);break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:Ut.push(z+32),It.push(z);break;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:Ut.push(z),It.push(z);break;default:Wt(z,Xs);break}}function oo(z){switch(z){case 9:case 10:case 12:case 32:break;case 47:Ae=Lo;break;case 62:Ae=vi,fi();break;case-1:ii();break;case 61:Il(),hi+=String.fromCharCode(z),Ae=rl;break;default:if(ap())break;Il(),Wt(z,rl);break}}function rl(z){switch(z){case 9:case 10:case 12:case 32:case 47:case 62:case-1:Wt(z,es);break;case 61:Ae=bu;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:hi+=String.fromCharCode(z+32);break;case 0:hi+="\uFFFD";break;case 34:case 39:case 60:default:hi+=Qo(Ki);break}}function es(z){switch(z){case 9:case 10:case 12:case 32:break;case 47:js(hi),Ae=Lo;break;case 61:Ae=bu;break;case 62:Ae=vi,js(hi),fi();break;case-1:js(hi),ii();break;default:js(hi),Il(),Wt(z,rl);break}}function bu(z){switch(z){case 9:case 10:case 12:case 32:break;case 34:lc(),Ae=nl;break;case 39:lc(),Ae=Ks;break;case 62:default:lc(),Wt(z,Qs);break}}function nl(z){switch(z){case 34:js(hi,jt),Ae=yu;break;case 38:ni=nl,Ae=No;break;case 0:jt+="\uFFFD";break;case-1:ii();break;case 10:jt+=String.fromCharCode(z);break;default:jt+=Qo(ba);break}}function Ks(z){switch(z){case 39:js(hi,jt),Ae=yu;break;case 38:ni=Ks,Ae=No;break;case 0:jt+="\uFFFD";break;case-1:ii();break;case 10:jt+=String.fromCharCode(z);break;default:jt+=Qo(Pn);break}}function Qs(z){switch(z){case 9:case 10:case 12:case 32:js(hi,jt),Ae=oo;break;case 38:ni=Qs,Ae=No;break;case 62:js(hi,jt),Ae=vi,fi();break;case 0:jt+="\uFFFD";break;case-1:Pe--,Ae=vi;break;case 34:case 39:case 60:case 61:case 96:default:jt+=Qo(Dn);break}}function yu(z){switch(z){case 9:case 10:case 12:case 32:Ae=oo;break;case 47:Ae=Lo;break;case 62:Ae=vi,fi();break;case-1:ii();break;default:Wt(z,oo);break}}function Lo(z){switch(z){case 62:Ae=vi,kl(!0);break;case-1:ii();break;default:Wt(z,oo);break}}function Rl(z,j,Ce){var Ye=j.length;Ce?Pe+=Ye-1:Pe+=Ye;var ht=j.substring(0,Ye-1);ht=ht.replace(/\u0000/g,"\uFFFD"),ht=ht.replace(/\u000D\u000A/g,`
`),ht=ht.replace(/\u000D/g,`
`),Bi($,ht),Ae=vi}Rl.lookahead=">";function Js(z,j,Ce){if(j[0]==="-"&&j[1]==="-"){Pe+=2,qs(),Ae=Td;return}j.toUpperCase()==="DOCTYPE"?(Pe+=7,Ae=Pd):j==="[CDATA["&&mu()?(Pe+=7,Ae=Ll):Ae=Rl}Js.lookahead=7;function Td(z){switch(qs(),z){case 45:Ae=Md;break;case 62:Ae=vi,Bi($,Nr(nt));break;default:Wt(z,Aa);break}}function Md(z){switch(z){case 45:Ae=ol;break;case 62:Ae=vi,Bi($,Nr(nt));break;case-1:Bi($,Nr(nt)),ii();break;default:nt.push(45),Wt(z,Aa);break}}function Aa(z){switch(z){case 60:nt.push(z),Ae=Id;break;case 45:Ae=fc;break;case 0:nt.push(65533);break;case-1:Bi($,Nr(nt)),ii();break;default:nt.push(z);break}}function Id(z){switch(z){case 33:nt.push(z),Ae=Ol;break;case 60:nt.push(z);break;default:Wt(z,Aa);break}}function Ol(z){switch(z){case 45:Ae=Ad;break;default:Wt(z,Aa);break}}function Ad(z){switch(z){case 45:Ae=kd;break;default:Wt(z,fc);break}}function kd(z){switch(z){case 62:case-1:Wt(z,ol);break;default:Wt(z,ol);break}}function fc(z){switch(z){case 45:Ae=ol;break;case-1:Bi($,Nr(nt)),ii();break;default:nt.push(45),Wt(z,Aa);break}}function ol(z){switch(z){case 62:Ae=vi,Bi($,Nr(nt));break;case 33:Ae=ea;break;case 45:nt.push(45);break;case-1:Bi($,Nr(nt)),ii();break;default:nt.push(45),nt.push(45),Wt(z,Aa);break}}function ea(z){switch(z){case 45:nt.push(45),nt.push(45),nt.push(33),Ae=fc;break;case 62:Ae=vi,Bi($,Nr(nt));break;case-1:Bi($,Nr(nt)),ii();break;default:nt.push(45),nt.push(45),nt.push(33),Wt(z,Aa);break}}function Pd(z){switch(z){case 9:case 10:case 12:case 32:Ae=vu;break;case-1:Hs(),Gi(),ji(),ii();break;default:Wt(z,vu);break}}function vu(z){switch(z){case 9:case 10:case 12:case 32:break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:Hs(),Gt.push(z+32),Ae=ta;break;case 0:Hs(),Gt.push(65533),Ae=ta;break;case 62:Hs(),Gi(),Ae=vi,ji();break;case-1:Hs(),Gi(),ji(),ii();break;default:Hs(),Gt.push(z),Ae=ta;break}}function ta(z){switch(z){case 9:case 10:case 12:case 32:Ae=xu;break;case 62:Ae=vi,ji();break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:Gt.push(z+32);break;case 0:Gt.push(65533);break;case-1:Gi(),ji(),ii();break;default:Gt.push(z);break}}function xu(z,j,Ce){switch(z){case 9:case 10:case 12:case 32:Pe+=1;break;case 62:Ae=vi,Pe+=1,ji();break;case-1:Gi(),ji(),ii();break;default:j=j.toUpperCase(),j==="PUBLIC"?(Pe+=6,Ae=mc):j==="SYSTEM"?(Pe+=6,Ae=Cu):(Gi(),Ae=ts);break}}xu.lookahead=6;function mc(z){switch(z){case 9:case 10:case 12:case 32:Ae=hp;break;case 34:cc(),Ae=Dd;break;case 39:cc(),Ae=gc;break;case 62:Gi(),Ae=vi,ji();break;case-1:Gi(),ji(),ii();break;default:Gi(),Ae=ts;break}}function hp(z){switch(z){case 9:case 10:case 12:case 32:break;case 34:cc(),Ae=Dd;break;case 39:cc(),Ae=gc;break;case 62:Gi(),Ae=vi,ji();break;case-1:Gi(),ji(),ii();break;default:Gi(),Ae=ts;break}}function Dd(z){switch(z){case 34:Ae=wu;break;case 0:oi.push(65533);break;case 62:Gi(),Ae=vi,ji();break;case-1:Gi(),ji(),ii();break;default:oi.push(z);break}}function gc(z){switch(z){case 39:Ae=wu;break;case 0:oi.push(65533);break;case 62:Gi(),Ae=vi,ji();break;case-1:Gi(),ji(),ii();break;default:oi.push(z);break}}function wu(z){switch(z){case 9:case 10:case 12:case 32:Ae=Rd;break;case 62:Ae=vi,ji();break;case 34:vo(),Ae=Ni;break;case 39:vo(),Ae=Co;break;case-1:Gi(),ji(),ii();break;default:Gi(),Ae=ts;break}}function Rd(z){switch(z){case 9:case 10:case 12:case 32:break;case 62:Ae=vi,ji();break;case 34:vo(),Ae=Ni;break;case 39:vo(),Ae=Co;break;case-1:Gi(),ji(),ii();break;default:Gi(),Ae=ts;break}}function Cu(z){switch(z){case 9:case 10:case 12:case 32:Ae=Od;break;case 34:vo(),Ae=Ni;break;case 39:vo(),Ae=Co;break;case 62:Gi(),Ae=vi,ji();break;case-1:Gi(),ji(),ii();break;default:Gi(),Ae=ts;break}}function Od(z){switch(z){case 9:case 10:case 12:case 32:break;case 34:vo(),Ae=Ni;break;case 39:vo(),Ae=Co;break;case 62:Gi(),Ae=vi,ji();break;case-1:Gi(),ji(),ii();break;default:Gi(),Ae=ts;break}}function Ni(z){switch(z){case 34:Ae=_c;break;case 0:tr.push(65533);break;case 62:Gi(),Ae=vi,ji();break;case-1:Gi(),ji(),ii();break;default:tr.push(z);break}}function Co(z){switch(z){case 39:Ae=_c;break;case 0:tr.push(65533);break;case 62:Gi(),Ae=vi,ji();break;case-1:Gi(),ji(),ii();break;default:tr.push(z);break}}function _c(z){switch(z){case 9:case 10:case 12:case 32:break;case 62:Ae=vi,ji();break;case-1:Gi(),ji(),ii();break;default:Ae=ts;break}}function ts(z){switch(z){case 62:Ae=vi,ji();break;case-1:ji(),ii();break;default:break}}function Ll(z){switch(z){case 93:Ae=Ld;break;case-1:ii();break;case 0:bn=!0;default:Wr(Jn)||It.push(z);break}}function Ld(z){switch(z){case 93:Ae=Eu;break;default:It.push(93),Wt(z,Ll);break}}function Eu(z){switch(z){case 93:It.push(93);break;case 62:Ei(),Ae=vi;break;default:It.push(93),It.push(93),Wt(z,Ll);break}}function No(z){switch(Nn(),Ut.push(38),z){case 9:case 10:case 12:case 32:case 60:case 38:case-1:Wt(z,ia);break;case 35:Ut.push(z),Ae=pp;break;default:Wt(z,bc);break}}function bc(z){Ur.lastIndex=Pe;var j=Ur.exec(ye);if(!j)throw new Error("should never happen");var Ce=j[1];if(!Ce){Ae=ia;return}switch(Pe+=Ce.length,E(Ut,Ka(Ce)),ni){case nl:case Ks:case Qs:if(Ce[Ce.length-1]!==";"&&/[=A-Za-z0-9]/.test(ye[Pe])){Ae=ia;return}break;default:break}Nn();var Ye=ai[Ce];typeof Ye=="number"?Ut.push(Ye):E(Ut,Ye),Ae=ia}bc.lookahead=-Ro;function pp(z){switch(Lt=0,z){case 120:case 88:Ut.push(z),Ae=fp;break;default:Wt(z,mp);break}}function fp(z){switch(z){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 66:case 67:case 68:case 69:case 70:case 97:case 98:case 99:case 100:case 101:case 102:Wt(z,gp);break;default:Wt(z,ia);break}}function mp(z){switch(z){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:Wt(z,Nd);break;default:Wt(z,ia);break}}function gp(z){switch(z){case 65:case 66:case 67:case 68:case 69:case 70:Lt*=16,Lt+=z-55;break;case 97:case 98:case 99:case 100:case 101:case 102:Lt*=16,Lt+=z-87;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:Lt*=16,Lt+=z-48;break;case 59:Ae=yc;break;default:Wt(z,yc);break}}function Nd(z){switch(z){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:Lt*=10,Lt+=z-48;break;case 59:Ae=yc;break;default:Wt(z,yc);break}}function yc(z){Lt in kt?Lt=kt[Lt]:(Lt>1114111||Lt>=55296&&Lt<57344)&&(Lt=65533),Nn(),Lt<=65535?Ut.push(Lt):(Lt=Lt-65536,Ut.push(55296+(Lt>>10)),Ut.push(56320+(Lt&1023))),Wt(z,ia)}function ia(z){switch(ni){case nl:case Ks:case Qs:jt+=Nr(Ut);break;default:E(It,Ut);break}Wt(z,ni)}function vc(z,j,Ce,Ye){switch(z){case 1:if(j=j.replace(Rn,""),j.length===0)return;break;case 4:Zi._appendChild(Zi.createComment(j));return;case 5:var ht=j,Nt=Ce,ri=Ye;Zi.appendChild(new o(Zi,ht,Nt,ri)),va||ht.toLowerCase()!=="html"||pe.test(Nt)||ri&&ri.toLowerCase()===le||ri===void 0&&ne.test(Nt)?Zi._quirks=!0:(re.test(Nt)||ri!==void 0&&ne.test(Nt))&&(Zi._limitedQuirks=!0),it=Nl;return}Zi._quirks=!0,it=Nl,it(z,j,Ce,Ye)}function Nl(z,j,Ce,Ye){var ht;switch(z){case 1:if(j=j.replace(Rn,""),j.length===0)return;break;case 5:return;case 4:Zi._appendChild(Zi.createComment(j));return;case 2:if(j==="html"){ht=rr(Zi,j,Ce),Ne.push(ht),Zi.appendChild(ht),it=ka;return}break;case 3:switch(j){case"html":case"head":case"body":case"br":break;default:return}}ht=rr(Zi,"html",null),Ne.push(ht),Zi.appendChild(ht),it=ka,it(z,j,Ce,Ye)}function ka(z,j,Ce,Ye){switch(z){case 1:if(j=j.replace(Rn,""),j.length===0)return;break;case 5:return;case 4:ir(j);return;case 2:switch(j){case"html":Jt(z,j,Ce,Ye);return;case"head":var ht=Zt(j,Ce);Ko=ht,it=wr;return}break;case 3:switch(j){case"html":case"head":case"body":case"br":break;default:return}}ka(A,"head",null),it(z,j,Ce,Ye)}function wr(z,j,Ce,Ye){switch(z){case 1:var ht=j.match(Rn);if(ht&&(fr(ht[0]),j=j.substring(ht[0].length)),j.length===0)return;break;case 4:ir(j);return;case 5:return;case 2:switch(j){case"html":Jt(z,j,Ce,Ye);return;case"meta":case"base":case"basefont":case"bgsound":case"link":Zt(j,Ce),Ne.pop();return;case"title":ui(j,Ce);return;case"noscript":if(!_n){Zt(j,Ce),it=ra;return}case"noframes":case"style":Si(j,Ce);return;case"script":yn(function(Nt){var ri=rr(Nt,j,Ce);return ri._parser_inserted=!0,ri._force_async=!1,Ln&&(ri._already_started=!0),Ei(),ri}),Ae=Oo,Hn=it,it=Fn;return;case"template":Zt(j,Ce),yi.insertMarker(),pi=!1,it=oa,ro.push(it);return;case"head":return}break;case 3:switch(j){case"head":Ne.pop(),it=sl;return;case"body":case"html":case"br":break;case"template":if(!Ne.contains("template"))return;Ne.generateImpliedEndTags(null,"thorough"),Ne.popTag("template"),yi.clearToMarker(),ro.pop(),dr();return;default:return}break}wr(R,"head",null),it(z,j,Ce,Ye)}function ra(z,j,Ce,Ye){switch(z){case 5:return;case 4:wr(z,j);return;case 1:var ht=j.match(Rn);if(ht&&(wr(z,ht[0]),j=j.substring(ht[0].length)),j.length===0)return;break;case 2:switch(j){case"html":Jt(z,j,Ce,Ye);return;case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"style":wr(z,j,Ce);return;case"head":case"noscript":return}break;case 3:switch(j){case"noscript":Ne.pop(),it=wr;return;case"br":break;default:return}break}ra(R,"noscript",null),it(z,j,Ce,Ye)}function sl(z,j,Ce,Ye){switch(z){case 1:var ht=j.match(Rn);if(ht&&(fr(ht[0]),j=j.substring(ht[0].length)),j.length===0)return;break;case 4:ir(j);return;case 5:return;case 2:switch(j){case"html":Jt(z,j,Ce,Ye);return;case"body":Zt(j,Ce),pi=!1,it=Jt;return;case"frameset":Zt(j,Ce),it=xc;return;case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":Ne.push(Ko),wr(A,j,Ce),Ne.removeElement(Ko);return;case"head":return}break;case 3:switch(j){case"template":return wr(z,j,Ce,Ye);case"body":case"html":case"br":break;default:return}break}sl(A,"body",null),pi=!0,it(z,j,Ce,Ye)}function Jt(z,j,Ce,Ye){var ht,Nt,ri,Ti;switch(z){case 1:if(bn&&(j=j.replace(fs,""),j.length===0))return;pi&&to.test(j)&&(pi=!1),Yt(),fr(j);return;case 5:return;case 4:ir(j);return;case-1:if(ro.length)return oa(z);_s();return;case 2:switch(j){case"html":if(Ne.contains("template"))return;qe(Ce,Ne.elements[0]);return;case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":wr(A,j,Ce);return;case"body":if(ht=Ne.elements[1],!ht||!(ht instanceof w.HTMLBodyElement)||Ne.contains("template"))return;pi=!1,qe(Ce,ht);return;case"frameset":if(!pi||(ht=Ne.elements[1],!ht||!(ht instanceof w.HTMLBodyElement)))return;for(ht.parentNode&&ht.parentNode.removeChild(ht);!(Ne.top instanceof w.HTMLHtmlElement);)Ne.pop();Zt(j,Ce),it=xc;return;case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"nav":case"ol":case"p":case"section":case"summary":case"ul":Ne.inButtonScope("p")&&Jt(R,"p"),Zt(j,Ce);return;case"menu":Ne.inButtonScope("p")&&Jt(R,"p"),Li(Ne.top,"menuitem")&&Ne.pop(),Zt(j,Ce);return;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":Ne.inButtonScope("p")&&Jt(R,"p"),Ne.top instanceof w.HTMLHeadingElement&&Ne.pop(),Zt(j,Ce);return;case"pre":case"listing":Ne.inButtonScope("p")&&Jt(R,"p"),Zt(j,Ce),Us=!0,pi=!1;return;case"form":if(sr&&!Ne.contains("template"))return;Ne.inButtonScope("p")&&Jt(R,"p"),Ti=Zt(j,Ce),Ne.contains("template")||(sr=Ti);return;case"li":for(pi=!1,Nt=Ne.elements.length-1;Nt>=0;Nt--){if(ri=Ne.elements[Nt],ri instanceof w.HTMLLIElement){Jt(R,"li");break}if(Li(ri,ue)&&!Li(ri,oe))break}Ne.inButtonScope("p")&&Jt(R,"p"),Zt(j,Ce);return;case"dd":case"dt":for(pi=!1,Nt=Ne.elements.length-1;Nt>=0;Nt--){if(ri=Ne.elements[Nt],Li(ri,Ve)){Jt(R,ri.localName);break}if(Li(ri,ue)&&!Li(ri,oe))break}Ne.inButtonScope("p")&&Jt(R,"p"),Zt(j,Ce);return;case"plaintext":Ne.inButtonScope("p")&&Jt(R,"p"),Zt(j,Ce),Ae=Ta;return;case"button":Ne.inScope("button")?(Jt(R,"button"),it(z,j,Ce,Ye)):(Yt(),Zt(j,Ce),pi=!1);return;case"a":var mr=yi.findElementByTag("a");mr&&(Jt(R,j),yi.remove(mr),Ne.removeElement(mr));case"b":case"big":case"code":case"em":case"font":case"i":case"s":case"small":case"strike":case"strong":case"tt":case"u":Yt(),yi.push(Zt(j,Ce),Ce);return;case"nobr":Yt(),Ne.inScope(j)&&(Jt(R,j),Yt()),yi.push(Zt(j,Ce),Ce);return;case"applet":case"marquee":case"object":Yt(),Zt(j,Ce),yi.insertMarker(),pi=!1;return;case"table":!Zi._quirks&&Ne.inButtonScope("p")&&Jt(R,"p"),Zt(j,Ce),pi=!1,it=so;return;case"area":case"br":case"embed":case"img":case"keygen":case"wbr":Yt(),Zt(j,Ce),Ne.pop(),pi=!1;return;case"input":Yt(),Ti=Zt(j,Ce),Ne.pop();var Zr=Ti.getAttribute("type");(!Zr||Zr.toLowerCase()!=="hidden")&&(pi=!1);return;case"param":case"source":case"track":Zt(j,Ce),Ne.pop();return;case"hr":Ne.inButtonScope("p")&&Jt(R,"p"),Li(Ne.top,"menuitem")&&Ne.pop(),Zt(j,Ce),Ne.pop(),pi=!1;return;case"image":Jt(A,"img",Ce,Ye);return;case"textarea":Zt(j,Ce),Us=!0,pi=!1,Ae=xo,Hn=it,it=Fn;return;case"xmp":Ne.inButtonScope("p")&&Jt(R,"p"),Yt(),pi=!1,Si(j,Ce);return;case"iframe":pi=!1,Si(j,Ce);return;case"noembed":Si(j,Ce);return;case"select":Yt(),Zt(j,Ce),pi=!1,it===so||it===Fl||it===rs||it===na||it===ns?it=Pa:it=Eo;return;case"optgroup":case"option":Ne.top instanceof w.HTMLOptionElement&&Jt(R,"option"),Yt(),Zt(j,Ce);return;case"menuitem":Li(Ne.top,"menuitem")&&Ne.pop(),Yt(),Zt(j,Ce);return;case"rb":case"rtc":Ne.inScope("ruby")&&Ne.generateImpliedEndTags(),Zt(j,Ce);return;case"rp":case"rt":Ne.inScope("ruby")&&Ne.generateImpliedEndTags("rtc"),Zt(j,Ce);return;case"math":Yt(),On(Ce),yo(Ce),vn(j,Ce,s.MATHML),Ye&&Ne.pop();return;case"svg":Yt(),io(Ce),yo(Ce),vn(j,Ce,s.SVG),Ye&&Ne.pop();return;case"caption":case"col":case"colgroup":case"frame":case"head":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return}Yt(),Zt(j,Ce);return;case 3:switch(j){case"template":wr(R,j,Ce);return;case"body":if(!Ne.inScope("body"))return;it=Da;return;case"html":if(!Ne.inScope("body"))return;it=Da,it(z,j,Ce);return;case"address":case"article":case"aside":case"blockquote":case"button":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"listing":case"main":case"menu":case"nav":case"ol":case"pre":case"section":case"summary":case"ul":if(!Ne.inScope(j))return;Ne.generateImpliedEndTags(),Ne.popTag(j);return;case"form":if(Ne.contains("template")){if(!Ne.inScope("form"))return;Ne.generateImpliedEndTags(),Ne.popTag("form")}else{var zn=sr;if(sr=null,!zn||!Ne.elementInScope(zn))return;Ne.generateImpliedEndTags(),Ne.removeElement(zn)}return;case"p":Ne.inButtonScope(j)?(Ne.generateImpliedEndTags(j),Ne.popTag(j)):(Jt(A,j,null),it(z,j,Ce,Ye));return;case"li":if(!Ne.inListItemScope(j))return;Ne.generateImpliedEndTags(j),Ne.popTag(j);return;case"dd":case"dt":if(!Ne.inScope(j))return;Ne.generateImpliedEndTags(j),Ne.popTag(j);return;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":if(!Ne.elementTypeInScope(w.HTMLHeadingElement))return;Ne.generateImpliedEndTags(),Ne.popElementType(w.HTMLHeadingElement);return;case"sarcasm":break;case"a":case"b":case"big":case"code":case"em":case"font":case"i":case"nobr":case"s":case"small":case"strike":case"strong":case"tt":case"u":var ao=xn(j);if(ao)return;break;case"applet":case"marquee":case"object":if(!Ne.inScope(j))return;Ne.generateImpliedEndTags(),Ne.popTag(j),yi.clearToMarker();return;case"br":Jt(A,j,null);return}for(Nt=Ne.elements.length-1;Nt>=0;Nt--)if(ri=Ne.elements[Nt],Li(ri,j)){Ne.generateImpliedEndTags(j),Ne.popElement(ri);break}else if(Li(ri,ue))return;return}}function Fn(z,j,Ce,Ye){switch(z){case 1:fr(j);return;case-1:Ne.top instanceof w.HTMLScriptElement&&(Ne.top._already_started=!0),Ne.pop(),it=Hn,it(z);return;case 3:j==="script"?gu():(Ne.pop(),it=Hn);return;default:return}}function so(z,j,Ce,Ye){function ht(ri){for(var Ti=0,mr=ri.length;Ti<mr;Ti++)if(ri[Ti][0]==="type")return ri[Ti][1].toLowerCase();return null}switch(z){case 1:if(Ml){Jt(z,j,Ce,Ye);return}else if(Li(Ne.top,tt)){gs=[],Hn=it,it=Fd,it(z,j,Ce,Ye);return}break;case 4:ir(j);return;case 5:return;case 2:switch(j){case"caption":Ne.clearToContext(ve),yi.insertMarker(),Zt(j,Ce),it=Fl;return;case"colgroup":Ne.clearToContext(ve),Zt(j,Ce),it=is;return;case"col":so(A,"colgroup",null),it(z,j,Ce,Ye);return;case"tbody":case"tfoot":case"thead":Ne.clearToContext(ve),Zt(j,Ce),it=rs;return;case"td":case"th":case"tr":so(A,"tbody",null),it(z,j,Ce,Ye);return;case"table":if(!Ne.inTableScope(j))return;so(R,j),it(z,j,Ce,Ye);return;case"style":case"script":case"template":wr(z,j,Ce,Ye);return;case"input":var Nt=ht(Ce);if(Nt!=="hidden")break;Zt(j,Ce),Ne.pop();return;case"form":if(sr||Ne.contains("template"))return;sr=Zt(j,Ce),Ne.popElement(sr);return}break;case 3:switch(j){case"table":if(!Ne.inTableScope(j))return;Ne.popTag(j),dr();return;case"body":case"caption":case"col":case"colgroup":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return;case"template":wr(z,j,Ce,Ye);return}break;case-1:Jt(z,j,Ce,Ye);return}no=!0,Jt(z,j,Ce,Ye),no=!1}function Fd(z,j,Ce,Ye){if(z===I){if(bn&&(j=j.replace(fs,""),j.length===0))return;gs.push(j)}else{var ht=gs.join("");gs.length=0,to.test(ht)?(no=!0,Jt(I,ht),no=!1):fr(ht),it=Hn,it(z,j,Ce,Ye)}}function Fl(z,j,Ce,Ye){function ht(){return Ne.inTableScope("caption")?(Ne.generateImpliedEndTags(),Ne.popTag("caption"),yi.clearToMarker(),it=so,!0):!1}switch(z){case 2:switch(j){case"caption":case"col":case"colgroup":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":ht()&&it(z,j,Ce,Ye);return}break;case 3:switch(j){case"caption":ht();return;case"table":ht()&&it(z,j,Ce,Ye);return;case"body":case"col":case"colgroup":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return}break}Jt(z,j,Ce,Ye)}function is(z,j,Ce,Ye){switch(z){case 1:var ht=j.match(Rn);if(ht&&(fr(ht[0]),j=j.substring(ht[0].length)),j.length===0)return;break;case 4:ir(j);return;case 5:return;case 2:switch(j){case"html":Jt(z,j,Ce,Ye);return;case"col":Zt(j,Ce),Ne.pop();return;case"template":wr(z,j,Ce,Ye);return}break;case 3:switch(j){case"colgroup":if(!Li(Ne.top,"colgroup"))return;Ne.pop(),it=so;return;case"col":return;case"template":wr(z,j,Ce,Ye);return}break;case-1:Jt(z,j,Ce,Ye);return}Li(Ne.top,"colgroup")&&(is(R,"colgroup"),it(z,j,Ce,Ye))}function rs(z,j,Ce,Ye){function ht(){!Ne.inTableScope("tbody")&&!Ne.inTableScope("thead")&&!Ne.inTableScope("tfoot")||(Ne.clearToContext(Ge),rs(R,Ne.top.localName,null),it(z,j,Ce,Ye))}switch(z){case 2:switch(j){case"tr":Ne.clearToContext(Ge),Zt(j,Ce),it=na;return;case"th":case"td":rs(A,"tr",null),it(z,j,Ce,Ye);return;case"caption":case"col":case"colgroup":case"tbody":case"tfoot":case"thead":ht();return}break;case 3:switch(j){case"table":ht();return;case"tbody":case"tfoot":case"thead":Ne.inTableScope(j)&&(Ne.clearToContext(Ge),Ne.pop(),it=so);return;case"body":case"caption":case"col":case"colgroup":case"html":case"td":case"th":case"tr":return}break}so(z,j,Ce,Ye)}function na(z,j,Ce,Ye){function ht(){return Ne.inTableScope("tr")?(Ne.clearToContext(bt),Ne.pop(),it=rs,!0):!1}switch(z){case 2:switch(j){case"th":case"td":Ne.clearToContext(bt),Zt(j,Ce),it=ns,yi.insertMarker();return;case"caption":case"col":case"colgroup":case"tbody":case"tfoot":case"thead":case"tr":ht()&&it(z,j,Ce,Ye);return}break;case 3:switch(j){case"tr":ht();return;case"table":ht()&&it(z,j,Ce,Ye);return;case"tbody":case"tfoot":case"thead":Ne.inTableScope(j)&&ht()&&it(z,j,Ce,Ye);return;case"body":case"caption":case"col":case"colgroup":case"html":case"td":case"th":return}break}so(z,j,Ce,Ye)}function ns(z,j,Ce,Ye){switch(z){case 2:switch(j){case"caption":case"col":case"colgroup":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":Ne.inTableScope("td")?(ns(R,"td"),it(z,j,Ce,Ye)):Ne.inTableScope("th")&&(ns(R,"th"),it(z,j,Ce,Ye));return}break;case 3:switch(j){case"td":case"th":if(!Ne.inTableScope(j))return;Ne.generateImpliedEndTags(),Ne.popTag(j),yi.clearToMarker(),it=na;return;case"body":case"caption":case"col":case"colgroup":case"html":return;case"table":case"tbody":case"tfoot":case"thead":case"tr":if(!Ne.inTableScope(j))return;ns(R,Ne.inTableScope("td")?"td":"th"),it(z,j,Ce,Ye);return}break}Jt(z,j,Ce,Ye)}function Eo(z,j,Ce,Ye){switch(z){case 1:if(bn&&(j=j.replace(fs,""),j.length===0))return;fr(j);return;case 4:ir(j);return;case 5:return;case-1:Jt(z,j,Ce,Ye);return;case 2:switch(j){case"html":Jt(z,j,Ce,Ye);return;case"option":Ne.top instanceof w.HTMLOptionElement&&Eo(R,j),Zt(j,Ce);return;case"optgroup":Ne.top instanceof w.HTMLOptionElement&&Eo(R,"option"),Ne.top instanceof w.HTMLOptGroupElement&&Eo(R,j),Zt(j,Ce);return;case"select":Eo(R,j);return;case"input":case"keygen":case"textarea":if(!Ne.inSelectScope("select"))return;Eo(R,"select"),it(z,j,Ce,Ye);return;case"script":case"template":wr(z,j,Ce,Ye);return}break;case 3:switch(j){case"optgroup":Ne.top instanceof w.HTMLOptionElement&&Ne.elements[Ne.elements.length-2]instanceof w.HTMLOptGroupElement&&Eo(R,"option"),Ne.top instanceof w.HTMLOptGroupElement&&Ne.pop();return;case"option":Ne.top instanceof w.HTMLOptionElement&&Ne.pop();return;case"select":if(!Ne.inSelectScope(j))return;Ne.popTag(j),dr();return;case"template":wr(z,j,Ce,Ye);return}break}}function Pa(z,j,Ce,Ye){switch(j){case"caption":case"table":case"tbody":case"tfoot":case"thead":case"tr":case"td":case"th":switch(z){case 2:Pa(R,"select"),it(z,j,Ce,Ye);return;case 3:Ne.inTableScope(j)&&(Pa(R,"select"),it(z,j,Ce,Ye));return}}Eo(z,j,Ce,Ye)}function oa(z,j,Ce,Ye){function ht(Nt){it=Nt,ro[ro.length-1]=it,it(z,j,Ce,Ye)}switch(z){case 1:case 4:case 5:Jt(z,j,Ce,Ye);return;case-1:Ne.contains("template")?(Ne.popTag("template"),yi.clearToMarker(),ro.pop(),dr(),it(z,j,Ce,Ye)):_s();return;case 2:switch(j){case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":wr(z,j,Ce,Ye);return;case"caption":case"colgroup":case"tbody":case"tfoot":case"thead":ht(so);return;case"col":ht(is);return;case"tr":ht(rs);return;case"td":case"th":ht(na);return}ht(Jt);return;case 3:switch(j){case"template":wr(z,j,Ce,Ye);return;default:return}}}function Da(z,j,Ce,Ye){switch(z){case 1:if(to.test(j))break;Jt(z,j);return;case 4:Ne.elements[0]._appendChild(Zi.createComment(j));return;case 5:return;case-1:_s();return;case 2:if(j==="html"){Jt(z,j,Ce,Ye);return}break;case 3:if(j==="html"){if(Ln)return;it=Ai;return}break}it=Jt,it(z,j,Ce,Ye)}function xc(z,j,Ce,Ye){switch(z){case 1:j=j.replace(ps,""),j.length>0&&fr(j);return;case 4:ir(j);return;case 5:return;case-1:_s();return;case 2:switch(j){case"html":Jt(z,j,Ce,Ye);return;case"frameset":Zt(j,Ce);return;case"frame":Zt(j,Ce),Ne.pop();return;case"noframes":wr(z,j,Ce,Ye);return}break;case 3:if(j==="frameset"){if(Ln&&Ne.top instanceof w.HTMLHtmlElement)return;Ne.pop(),!Ln&&!(Ne.top instanceof w.HTMLFrameSetElement)&&(it=wc);return}break}}function wc(z,j,Ce,Ye){switch(z){case 1:j=j.replace(ps,""),j.length>0&&fr(j);return;case 4:ir(j);return;case 5:return;case-1:_s();return;case 2:switch(j){case"html":Jt(z,j,Ce,Ye);return;case"noframes":wr(z,j,Ce,Ye);return}break;case 3:if(j==="html"){it=Cc;return}break}}function Ai(z,j,Ce,Ye){switch(z){case 1:if(to.test(j))break;Jt(z,j,Ce,Ye);return;case 4:Zi._appendChild(Zi.createComment(j));return;case 5:Jt(z,j,Ce,Ye);return;case-1:_s();return;case 2:if(j==="html"){Jt(z,j,Ce,Ye);return}break}it=Jt,it(z,j,Ce,Ye)}function Cc(z,j,Ce,Ye){switch(z){case 1:j=j.replace(ps,""),j.length>0&&Jt(z,j,Ce,Ye);return;case 4:Zi._appendChild(Zi.createComment(j));return;case 5:Jt(z,j,Ce,Ye);return;case-1:_s();return;case 2:switch(j){case"html":Jt(z,j,Ce,Ye);return;case"noframes":wr(z,j,Ce,Ye);return}break}}function zl(z,j,Ce,Ye){function ht(mr){for(var Zr=0,zn=mr.length;Zr<zn;Zr++)switch(mr[Zr][0]){case"color":case"face":case"size":return!0}return!1}var Nt;switch(z){case 1:pi&&ya.test(j)&&(pi=!1),bn&&(j=j.replace(fs,"\uFFFD")),fr(j);return;case 4:ir(j);return;case 5:return;case 2:switch(j){case"font":if(!ht(Ce))break;case"b":case"big":case"blockquote":case"body":case"br":case"center":case"code":case"dd":case"div":case"dl":case"dt":case"em":case"embed":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"head":case"hr":case"i":case"img":case"li":case"listing":case"menu":case"meta":case"nobr":case"ol":case"p":case"pre":case"ruby":case"s":case"small":case"span":case"strong":case"strike":case"sub":case"sup":case"table":case"tt":case"u":case"ul":case"var":if(Ln)break;do Ne.pop(),Nt=Ne.top;while(Nt.namespaceURI!==s.HTML&&!Yo(Nt)&&!ms(Nt));Bi(z,j,Ce,Ye);return}Nt=Ne.elements.length===1&&Ln?Y:Ne.top,Nt.namespaceURI===s.MATHML?On(Ce):Nt.namespaceURI===s.SVG&&(j=Qa(j),io(Ce)),yo(Ce),vn(j,Ce,Nt.namespaceURI),Ye&&(j==="script"&&(Nt.namespaceURI,s.SVG),Ne.pop());return;case 3:if(Nt=Ne.top,j==="script"&&Nt.namespaceURI===s.SVG&&Nt.localName==="script")Ne.pop();else for(var ri=Ne.elements.length-1,Ti=Ne.elements[ri];;){if(Ti.localName.toLowerCase()===j){Ne.popElement(Ti);break}if(Ti=Ne.elements[--ri],Ti.namespaceURI===s.HTML){it(z,j,Ce,Ye);break}}return}}return Ja.testTokenizer=function(z,j,Ce,Ye){var ht=[];switch(j){case"PCDATA state":Ae=vi;break;case"RCDATA state":Ae=xo;break;case"RAWTEXT state":Ae=Sa;break;case"PLAINTEXT state":Ae=Ta;break}if(Ce&&($i=Ce),Bi=function(ri,Ti,mr,Zr){switch(Ei(),ri){case 1:ht.length>0&&ht[ht.length-1][0]==="Character"?ht[ht.length-1][1]+=Ti:ht.push(["Character",Ti]);break;case 4:ht.push(["Comment",Ti]);break;case 5:ht.push(["DOCTYPE",Ti,mr===void 0?null:mr,Zr===void 0?null:Zr,!va]);break;case 2:for(var zn=Object.create(null),ao=0;ao<mr.length;ao++){var Fo=mr[ao];Fo.length===1?zn[Fo[0]]="":zn[Fo[0]]=Fo[1]}var So=["StartTag",Ti,zn];Zr&&So.push(!0),ht.push(So);break;case 3:ht.push(["EndTag",Ti]);break;case-1:break}},!Ye)this.parse(z,!0);else{for(var Nt=0;Nt<z.length;Nt++)this.parse(z[Nt]);this.parse("",!0)}return ht},Ja}}}),t0=ci({"external/npm/node_modules/domino/lib/DOMImplementation.js"(r,t){"use strict";t.exports=w;var e=fv(),o=mv(),a=gv(),s=fn(),_=lv();function w(M){this.contextObject=M}var E={xml:{"":!0,"1.0":!0,"2.0":!0},core:{"":!0,"2.0":!0},html:{"":!0,"1.0":!0,"2.0":!0},xhtml:{"":!0,"1.0":!0,"2.0":!0}};w.prototype={hasFeature:function(I,A){var R=E[(I||"").toLowerCase()];return R&&R[A||""]||!1},createDocumentType:function(I,A,R){return _.isValidQName(I)||s.InvalidCharacterError(),new o(this.contextObject,I,A,R)},createDocument:function(I,A,R){var $=new e(!1,null),W;return A?W=$.createElementNS(I,A):W=null,R&&$.appendChild(R),W&&$.appendChild(W),I===s.NAMESPACE.HTML?$._contentType="application/xhtml+xml":I===s.NAMESPACE.SVG?$._contentType="image/svg+xml":$._contentType="application/xml",$},createHTMLDocument:function(I){var A=new e(!0,null);A.appendChild(new o(A,"html"));var R=A.createElement("html");A.appendChild(R);var $=A.createElement("head");if(R.appendChild($),I!==void 0){var W=A.createElement("title");$.appendChild(W),W.appendChild(A.createTextNode(I))}return R.appendChild(A.createElement("body")),A.modclock=1,A},mozSetOutputMutationHandler:function(M,I){M.mutationHandler=I},mozGetInputMutationHandler:function(M){s.nyi()},mozHTMLParser:a}}}),WR=ci({"external/npm/node_modules/domino/lib/Location.js"(r,t){"use strict";var e=dv(),o=AS();t.exports=a;function a(s,_){this._window=s,this._href=_}a.prototype=Object.create(o.prototype,{constructor:{value:a},href:{get:function(){return this._href},set:function(s){this.assign(s)}},assign:{value:function(s){var _=new e(this._href),w=_.resolve(s);this._href=w}},replace:{value:function(s){this.assign(s)}},reload:{value:function(){this.assign(this.href)}},toString:{value:function(){return this.href}}})}}),ZR=ci({"external/npm/node_modules/domino/lib/NavigatorID.js"(r,t){"use strict";var e=Object.create(null,{appCodeName:{value:"Mozilla"},appName:{value:"Netscape"},appVersion:{value:"4.0"},platform:{value:""},product:{value:"Gecko"},productSub:{value:"20100101"},userAgent:{value:""},vendor:{value:""},vendorSub:{value:""},taintEnabled:{value:function(){return!1}}});t.exports=e}}),XR=ci({"external/npm/node_modules/domino/lib/WindowTimers.js"(r,t){"use strict";var e={setTimeout,clearTimeout,setInterval,clearInterval};t.exports=e}}),DS=ci({"external/npm/node_modules/domino/lib/impl.js"(r,t){"use strict";var e=fn();r=t.exports={CSSStyleDeclaration:hv(),CharacterData:Jg(),Comment:ES(),DOMException:ov(),DOMImplementation:t0(),DOMTokenList:yS(),Document:fv(),DocumentFragment:SS(),DocumentType:mv(),Element:If(),HTMLParser:gv(),NamedNodeMap:xS(),Node:ko(),NodeList:Ch(),NodeFilter:e0(),ProcessingInstruction:TS(),Text:CS(),Window:RS()},e.merge(r,IS()),e.merge(r,pv().elements),e.merge(r,PS().elements)}}),RS=ci({"external/npm/node_modules/domino/lib/Window.js"(r,t){"use strict";var e=t0(),o=mS(),a=WR(),s=fn();t.exports=_;function _(w){this.document=w||new e(null).createHTMLDocument(""),this.document._scripting_enabled=!0,this.document.defaultView=this,this.location=new a(this,this.document._address||"about:blank")}_.prototype=Object.create(o.prototype,{console:{value:console},history:{value:{back:s.nyi,forward:s.nyi,go:s.nyi}},navigator:{value:ZR()},window:{get:function(){return this}},self:{get:function(){return this}},frames:{get:function(){return this}},parent:{get:function(){return this}},top:{get:function(){return this}},length:{value:0},frameElement:{value:null},opener:{value:null},onload:{get:function(){return this._getEventHandler("load")},set:function(w){this._setEventHandler("load",w)}},getComputedStyle:{value:function(E){return E.style}}}),s.expose(XR(),_),s.expose(DS(),_)}}),YR=ci({"external/npm/node_modules/domino/lib/index.js"(r){var t=t0(),e=gv(),o=RS(),a=DS();r.createDOMImplementation=function(){return new t(null)},r.createDocument=function(s,_){if(s||_){var w=new e;return w.parse(s||"",!0),w.document()}return new t(null).createHTMLDocument("")},r.createIncrementalHTMLParser=function(){var s=new e;return{write:function(_){_.length>0&&s.parse(_,!1,function(){return!0})},end:function(_){s.parse(_||"",!0,function(){return!0})},process:function(_){return s.parse("",!1,_)},document:function(){return s.document()}}},r.createWindow=function(s,_){var w=r.createDocument(s);return _!==void 0&&(w._address=_),new a.Window(w)},r.impl=a}}),Qg=YR();function KR(){Object.assign(globalThis,Qg.impl),globalThis.KeyboardEvent=Qg.impl.Event}function OS(r,t="/"){return Qg.createWindow(r,t).document}function QR(r){return r.serialize()}var JR=(()=>{class r extends vh{static makeCurrent(){KR(),Ng(new r)}supportsDOMEvents=!1;static defaultDoc;createHtmlDocument(){return OS("<html><head><title>fakeTitle</title></head><body></body></html>")}getDefaultDocument(){return r.defaultDoc||(r.defaultDoc=Qg.createDocument()),r.defaultDoc}isElementNode(e){return e?e.nodeType===r.defaultDoc.ELEMENT_NODE:!1}isShadowRoot(e){return e.shadowRoot==e}getGlobalEventTarget(e,o){return o==="window"?e.defaultView:o==="document"?e:o==="body"?e.body:null}getBaseHref(e){return e.documentElement.querySelector("base")?.getAttribute("href")||""}dispatchEvent(e,o){e.dispatchEvent(o);let s=(e.ownerDocument||e).defaultView;s&&s.dispatchEvent(o)}getUserAgent(){return"Fake user agent"}getCookie(e){throw new Error("getCookie has not been implemented")}}return r})(),Eh=new Ft("Server.INITIAL_CONFIG"),LS=new Ft("Server.RENDER_MODULE_HOOK"),e5=new Ft("ENABLE_DOM_EMULATION"),NS=(()=>{class r{_doc;_enableDomEmulation=_v(Oe(In));constructor(e){this._doc=e}renderToString(){let e="renderToString";_l(e);let o=this._enableDomEmulation?QR(this._doc):this._doc.documentElement.outerHTML;return bl(e),o}getDocument(){return this._doc}static \u0275fac=function(o){return new(o||r)(li(Ii))};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})();function _v(r){return r.get(e5,!0)}var t5=(()=>{class r{xhrImpl;\u0275loadImpl(){return vr(this,null,function*(){if(!this.xhrImpl){let{default:e}=yield import("./chunk-FE3ZEMPP.mjs");this.xhrImpl=e}})}build(){let e=this.xhrImpl;if(!e)throw new Error("Unexpected state in ServerXhr: XHR implementation is not loaded.");return new e.XMLHttpRequest}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})();function i5(r,t){let e=Oe(pf),{href:o,protocol:a,hostname:s,port:_}=e;if(!a.startsWith("http"))return t(r);let w=`${a}//${s}`;_&&(w+=`:${_}`);let E=e.getBaseHrefFromDOM()||o,M=new URL(E,w),I=new URL(r.url,M).toString();return t(r.clone({url:I}))}var r5=[{provide:bh,useClass:t5},{provide:Yy,useValue:i5,multi:!0}],uS="resolve:";function dS(r){let{hostname:t,protocol:e,port:o,pathname:a,search:s,hash:_}=new URL(r,uS+"//");return{hostname:t,protocol:e===uS?"":e,port:o,pathname:a,search:s,hash:_}}var n5=(()=>{class r{_doc;href="/";hostname="/";protocol="/";port="/";pathname="/";search="";hash="";_hashUpdate=new Mi;constructor(e,o){this._doc=e;let a=o;if(a&&a.url){let s=dS(a.url);this.protocol=s.protocol,this.hostname=s.hostname,this.port=s.port,this.pathname=s.pathname,this.search=s.search,this.hash=s.hash,this.href=e.location.href}}getBaseHrefFromDOM(){return yl().getBaseHref(this._doc)}onPopState(e){return()=>{}}onHashChange(e){let o=this._hashUpdate.subscribe(e);return()=>o.unsubscribe()}get url(){return`${this.pathname}${this.search}${this.hash}`}setHash(e,o){if(this.hash===e)return;this.hash=e;let a=this.url;queueMicrotask(()=>this._hashUpdate.next({type:"hashchange",state:null,oldUrl:o,newUrl:a}))}replaceState(e,o,a){let s=this.url,_=dS(a);this.pathname=_.pathname,this.search=_.search,this.setHash(_.hash,s)}pushState(e,o,a){this.replaceState(e,o,a)}forward(){throw new Error("Not implemented")}back(){throw new Error("Not implemented")}getState(){}static \u0275fac=function(o){return new(o||r)(li(Ii),li(Eh,8))};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})(),o5=(()=>{class r extends xh{doc;constructor(e){super(e),this.doc=e}supports(e){return!0}addEventListener(e,o,a){return yl().onAndCancel(e,o,a)}static \u0275fac=function(o){return new(o||r)(li(Ii))};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})(),s5=[{provide:LS,useFactory:a5,deps:[Ii,$c,Dy],multi:!0}];function FS(r,t,e){let o=r.createElement("script");return o.textContent=t,e&&o.setAttribute("nonce",e),o}function a5(r,t,e){return()=>{let o="serializeTransferStateFactory";_l(o);let a=e.toJson();if(e.isEmpty)return;let s=FS(r,a,null);s.id=t+"-state",s.setAttribute("type","application/json"),r.body.appendChild(s),bl(o)}}var l5=[{provide:Ii,useFactory:h5,deps:[In]},{provide:ja,useValue:AE},{provide:Sg,useFactory:c5,multi:!0,deps:[In]},{provide:pf,useClass:n5,deps:[Ii,[Wu,Eh]]},{provide:NS,deps:[Ii]},{provide:pE,useValue:!0}];function c5(r){let t=_v(r);return()=>{t?JR.makeCurrent():vh.makeCurrent()}}var u5=[{provide:Ef,multi:!0,useClass:o5}],d5=[s5,u5,r5,{provide:Ly,useValue:null},{provide:Oy,useValue:null},{provide:jg,useClass:PE}];function h5(r){let t=r.get(Eh,null),e=_v(r),o;return t&&t.document?o=typeof t.document=="string"?e?OS(t.document,t.url):window.document:t.document:o=yl().createHtmlDocument(),Eg(o),o}function bv(r){let t=Uy(jy,"server",l5)(r);return t.onDestroy(()=>{globalThis.ngServerMode=void 0}),t}function zS(){return Va([cS(),...d5])}var p5="ng-event-dispatch-contract";function BS(r){let t=r.platformProviders??[],e="createServerPlatform";_l(e);let o=bv([{provide:Eh,useValue:{document:r.document,url:r.url}},t]);return bl(e),o}function VS(r){return r.getElementById(p5)}function hS(r){VS(r)?.remove()}function f5(r,t){let e="prepareForHydration";_l(e);let o=t.injector,a=r.getDocument();if(!o.get(QC,!1)){hS(a);return}m5(a);let s=mE(t,a);s.regular.size||s.capture.size?_5(o.get($c),a,s,o.get(Yu,null)):hS(a),bl(e)}function m5(r){let t=r.createComment(JC);r.body.firstChild?r.body.insertBefore(t,r.body.firstChild):r.body.append(t)}function g5(r){let t=r.injector,e=b5(t.get(yv,qS));r.components.forEach(o=>{let a=o.injector.get(Gc),s=o.location.nativeElement;s&&a.setAttribute(s,"ng-server-context",e)})}function _5(r,t,e,o){let a="insertEventRecordScript";_l(a);let{regular:s,capture:_}=e,w=VS(t);if(w){let E=`window.__jsaction_bootstrap(document.body,"${r}",${JSON.stringify(Array.from(s))},${JSON.stringify(Array.from(_))});`,M=FS(t,E,o);w.after(M)}bl(a)}function US(r,t){return vr(this,null,function*(){let e="whenStable";_l(e),yield t.whenStable(),bl(e);let o=r.injector.get(NS);f5(o,t);let s=t.injector.get(LS,null);if(s){let _=[];for(let w of s)try{let E=w();E&&_.push(E)}catch(E){console.warn("Ignoring BEFORE_APP_SERIALIZED Exception: ",E)}if(_.length)for(let w of yield Promise.allSettled(_))w.status==="rejected"&&console.warn("Ignoring BEFORE_APP_SERIALIZED Exception: ",w.reason)}return g5(t),o.renderToString()})}function jS(r){return new Promise(t=>{setTimeout(()=>{r.destroy(),t()},0)})}var qS="other",yv=new Ft("SERVER_CONTEXT");function b5(r){let t=r.replace(/[^a-zA-Z0-9\-]/g,"");return t.length>0?t:qS}function HS(r,t){return vr(this,null,function*(){let{document:e,url:o,extraProviders:a}=t,s=BS({document:e,url:o,platformProviders:a});try{let w=(yield s.bootstrapModule(r)).injector.get(pa);return yield US(s,w)}finally{yield jS(s)}})}function $S(r,t){return vr(this,null,function*(){let e="renderApplication",o="bootstrap",a="_render";_l(e);let s=BS(t);try{_l(o);let _=yield r();bl(o),_l(a);let w=yield US(s,_);return bl(a),w}finally{yield jS(s),bl(e)}})}var Ui="primary",Hf=Symbol("RouteTitle"),Ev=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function kh(r){return new Ev(r)}function y5(r,t,e){let o=e.path.split("/");if(o.length>r.length||e.pathMatch==="full"&&(t.hasChildren()||o.length<r.length))return null;let a={};for(let s=0;s<o.length;s++){let _=o[s],w=r[s];if(_[0]===":")a[_.substring(1)]=w;else if(_!==w.path)return null}return{consumed:r.slice(0,o.length),posParams:a}}function v5(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!wl(r[e],t[e]))return!1;return!0}function wl(r,t){let e=r?Sv(r):void 0,o=t?Sv(t):void 0;if(!e||!o||e.length!=o.length)return!1;let a;for(let s=0;s<e.length;s++)if(a=e[s],!iT(r[a],t[a]))return!1;return!0}function Sv(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function iT(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;let e=[...r].sort(),o=[...t].sort();return e.every((a,s)=>o[s]===a)}else return r===t}function rT(r){return r.length>0?r[r.length-1]:null}function eu(r){return nf(r)?r:kg(r)?ho(Promise.resolve(r)):ti(r)}var x5={exact:oT,subset:sT},nT={exact:w5,subset:C5,ignored:()=>!0};function GS(r,t,e){return x5[e.paths](r.root,t.root,e.matrixParams)&&nT[e.queryParams](r.queryParams,t.queryParams)&&!(e.fragment==="exact"&&r.fragment!==t.fragment)}function w5(r,t){return wl(r,t)}function oT(r,t,e){if(!id(r.segments,t.segments)||!n0(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(let o in t.children)if(!r.children[o]||!oT(r.children[o],t.children[o],e))return!1;return!0}function C5(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>iT(r[e],t[e]))}function sT(r,t,e){return aT(r,t,t.segments,e)}function aT(r,t,e,o){if(r.segments.length>e.length){let a=r.segments.slice(0,e.length);return!(!id(a,e)||t.hasChildren()||!n0(a,e,o))}else if(r.segments.length===e.length){if(!id(r.segments,e)||!n0(r.segments,e,o))return!1;for(let a in t.children)if(!r.children[a]||!sT(r.children[a],t.children[a],o))return!1;return!0}else{let a=e.slice(0,r.segments.length),s=e.slice(r.segments.length);return!id(r.segments,a)||!n0(r.segments,a,o)||!r.children[Ui]?!1:aT(r.children[Ui],t,s,o)}}function n0(r,t,e){return t.every((o,a)=>nT[e](r[a].parameters,o.parameters))}var Yl=class{root;queryParams;fragment;_queryParamMap;constructor(t=new _r([],{}),e={},o=null){this.root=t,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap??=kh(this.queryParams),this._queryParamMap}toString(){return T5.serialize(this)}},_r=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(o=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return o0(this)}},td=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=kh(this.parameters),this._parameterMap}toString(){return cT(this)}};function E5(r,t){return id(r,t)&&r.every((e,o)=>wl(e.parameters,t[o].parameters))}function id(r,t){return r.length!==t.length?!1:r.every((e,o)=>e.path===t[o].path)}function S5(r,t){let e=[];return Object.entries(r.children).forEach(([o,a])=>{o===Ui&&(e=e.concat(t(a,o)))}),Object.entries(r.children).forEach(([o,a])=>{o!==Ui&&(e=e.concat(t(a,o)))}),e}var $f=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:()=>new Ph,providedIn:"root"})}return r})(),Ph=class{parse(t){let e=new Mv(t);return new Yl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Af(t.root,!0)}`,o=A5(t.queryParams),a=typeof t.fragment=="string"?`#${M5(t.fragment)}`:"";return`${e}${o}${a}`}},T5=new Ph;function o0(r){return r.segments.map(t=>cT(t)).join("/")}function Af(r,t){if(!r.hasChildren())return o0(r);if(t){let e=r.children[Ui]?Af(r.children[Ui],!1):"",o=[];return Object.entries(r.children).forEach(([a,s])=>{a!==Ui&&o.push(`${a}:${Af(s,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}else{let e=S5(r,(o,a)=>a===Ui?[Af(r.children[Ui],!1)]:[`${a}:${Af(o,!1)}`]);return Object.keys(r.children).length===1&&r.children[Ui]!=null?`${o0(r)}/${e[0]}`:`${o0(r)}/(${e.join("//")})`}}function lT(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function i0(r){return lT(r).replace(/%3B/gi,";")}function M5(r){return encodeURI(r)}function Tv(r){return lT(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function s0(r){return decodeURIComponent(r)}function WS(r){return s0(r.replace(/\+/g,"%20"))}function cT(r){return`${Tv(r.path)}${I5(r.parameters)}`}function I5(r){return Object.entries(r).map(([t,e])=>`;${Tv(t)}=${Tv(e)}`).join("")}function A5(r){let t=Object.entries(r).map(([e,o])=>Array.isArray(o)?o.map(a=>`${i0(e)}=${i0(a)}`).join("&"):`${i0(e)}=${i0(o)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var k5=/^[^\/()?;#]+/;function vv(r){let t=r.match(k5);return t?t[0]:""}var P5=/^[^\/()?;=#]+/;function D5(r){let t=r.match(P5);return t?t[0]:""}var R5=/^[^=?&#]+/;function O5(r){let t=r.match(R5);return t?t[0]:""}var L5=/^[^&#]+/;function N5(r){let t=r.match(L5);return t?t[0]:""}var Mv=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _r([],{}):new _r([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(o[Ui]=new _r(t,e)),o}parseSegment(){let t=vv(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new xr(4009,!1);return this.capture(t),new td(s0(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=D5(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){let a=vv(this.remaining);a&&(o=a,this.capture(o))}t[s0(e)]=s0(o)}parseQueryParam(t){let e=O5(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){let _=N5(this.remaining);_&&(o=_,this.capture(o))}let a=WS(e),s=WS(o);if(t.hasOwnProperty(a)){let _=t[a];Array.isArray(_)||(_=[_],t[a]=_),_.push(s)}else t[a]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let o=vv(this.remaining),a=this.remaining[o.length];if(a!=="/"&&a!==")"&&a!==";")throw new xr(4010,!1);let s;o.indexOf(":")>-1?(s=o.slice(0,o.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Ui);let _=this.parseChildren();e[s]=Object.keys(_).length===1?_[Ui]:new _r([],_),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new xr(4011,!1)}};function uT(r){return r.segments.length>0?new _r([],{[Ui]:r}):r}function dT(r){let t={};for(let[o,a]of Object.entries(r.children)){let s=dT(a);if(o===Ui&&s.segments.length===0&&s.hasChildren())for(let[_,w]of Object.entries(s.children))t[_]=w;else(s.segments.length>0||s.hasChildren())&&(t[o]=s)}let e=new _r(r.segments,t);return F5(e)}function F5(r){if(r.numberOfChildren===1&&r.children[Ui]){let t=r.children[Ui];return new _r(r.segments.concat(t.segments),t.children)}return r}function Lf(r){return r instanceof Yl}function z5(r,t,e=null,o=null){let a=hT(r);return pT(a,t,e,o)}function hT(r){let t;function e(s){let _={};for(let E of s.children){let M=e(E);_[E.outlet]=M}let w=new _r(s.url,_);return s===r&&(t=w),w}let o=e(r.root),a=uT(o);return t??a}function pT(r,t,e,o){let a=r;for(;a.parent;)a=a.parent;if(t.length===0)return xv(a,a,a,e,o);let s=B5(t);if(s.toRoot())return xv(a,a,new _r([],{}),e,o);let _=V5(s,a,r),w=_.processChildren?Df(_.segmentGroup,_.index,s.commands):mT(_.segmentGroup,_.index,s.commands);return xv(a,_.segmentGroup,w,e,o)}function a0(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function Nf(r){return typeof r=="object"&&r!=null&&r.outlets}function xv(r,t,e,o,a){let s={};o&&Object.entries(o).forEach(([E,M])=>{s[E]=Array.isArray(M)?M.map(I=>`${I}`):`${M}`});let _;r===t?_=e:_=fT(r,t,e);let w=uT(dT(_));return new Yl(w,s,a)}function fT(r,t,e){let o={};return Object.entries(r.children).forEach(([a,s])=>{s===t?o[a]=e:o[a]=fT(s,t,e)}),new _r(r.segments,o)}var l0=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,o){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=o,t&&o.length>0&&a0(o[0]))throw new xr(4003,!1);let a=o.find(Nf);if(a&&a!==rT(o))throw new xr(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function B5(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new l0(!0,0,r);let t=0,e=!1,o=r.reduce((a,s,_)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let w={};return Object.entries(s.outlets).forEach(([E,M])=>{w[E]=typeof M=="string"?M.split("/"):M}),[...a,{outlets:w}]}if(s.segmentPath)return[...a,s.segmentPath]}return typeof s!="string"?[...a,s]:_===0?(s.split("/").forEach((w,E)=>{E==0&&w==="."||(E==0&&w===""?e=!0:w===".."?t++:w!=""&&a.push(w))}),a):[...a,s]},[]);return new l0(e,t,o)}var Mh=class{segmentGroup;processChildren;index;constructor(t,e,o){this.segmentGroup=t,this.processChildren=e,this.index=o}};function V5(r,t,e){if(r.isAbsolute)return new Mh(t,!0,0);if(!e)return new Mh(t,!1,NaN);if(e.parent===null)return new Mh(e,!0,0);let o=a0(r.commands[0])?0:1,a=e.segments.length-1+o;return U5(e,a,r.numberOfDoubleDots)}function U5(r,t,e){let o=r,a=t,s=e;for(;s>a;){if(s-=a,o=o.parent,!o)throw new xr(4005,!1);a=o.segments.length}return new Mh(o,!1,a-s)}function j5(r){return Nf(r[0])?r[0].outlets:{[Ui]:r}}function mT(r,t,e){if(r??=new _r([],{}),r.segments.length===0&&r.hasChildren())return Df(r,t,e);let o=q5(r,t,e),a=e.slice(o.commandIndex);if(o.match&&o.pathIndex<r.segments.length){let s=new _r(r.segments.slice(0,o.pathIndex),{});return s.children[Ui]=new _r(r.segments.slice(o.pathIndex),r.children),Df(s,0,a)}else return o.match&&a.length===0?new _r(r.segments,{}):o.match&&!r.hasChildren()?Iv(r,t,e):o.match?Df(r,0,a):Iv(r,t,e)}function Df(r,t,e){if(e.length===0)return new _r(r.segments,{});{let o=j5(e),a={};if(Object.keys(o).some(s=>s!==Ui)&&r.children[Ui]&&r.numberOfChildren===1&&r.children[Ui].segments.length===0){let s=Df(r.children[Ui],t,e);return new _r(r.segments,s.children)}return Object.entries(o).forEach(([s,_])=>{typeof _=="string"&&(_=[_]),_!==null&&(a[s]=mT(r.children[s],t,_))}),Object.entries(r.children).forEach(([s,_])=>{o[s]===void 0&&(a[s]=_)}),new _r(r.segments,a)}}function q5(r,t,e){let o=0,a=t,s={match:!1,pathIndex:0,commandIndex:0};for(;a<r.segments.length;){if(o>=e.length)return s;let _=r.segments[a],w=e[o];if(Nf(w))break;let E=`${w}`,M=o<e.length-1?e[o+1]:null;if(a>0&&E===void 0)break;if(E&&M&&typeof M=="object"&&M.outlets===void 0){if(!XS(E,M,_))return s;o+=2}else{if(!XS(E,{},_))return s;o++}a++}return{match:!0,pathIndex:a,commandIndex:o}}function Iv(r,t,e){let o=r.segments.slice(0,t),a=0;for(;a<e.length;){let s=e[a];if(Nf(s)){let E=H5(s.outlets);return new _r(o,E)}if(a===0&&a0(e[0])){let E=r.segments[t];o.push(new td(E.path,ZS(e[0]))),a++;continue}let _=Nf(s)?s.outlets[Ui]:`${s}`,w=a<e.length-1?e[a+1]:null;_&&w&&a0(w)?(o.push(new td(_,ZS(w))),a+=2):(o.push(new td(_,{})),a++)}return new _r(o,{})}function H5(r){let t={};return Object.entries(r).forEach(([e,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(t[e]=Iv(new _r([],{}),0,o))}),t}function ZS(r){let t={};return Object.entries(r).forEach(([e,o])=>t[e]=`${o}`),t}function XS(r,t,e){return r==e.path&&wl(t,e.parameters)}var Rf="imperative",Yn=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(Yn||{}),fa=class{id;url;constructor(t,e){this.id=t,this.url=e}},Dh=class extends fa{type=Yn.NavigationStart;navigationTrigger;restoredState;constructor(t,e,o="imperative",a=null){super(t,e),this.navigationTrigger=o,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Kl=class extends fa{urlAfterRedirects;type=Yn.NavigationEnd;constructor(t,e,o){super(t,e),this.urlAfterRedirects=o}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Rs=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(Rs||{}),c0=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(c0||{}),Xl=class extends fa{reason;code;type=Yn.NavigationCancel;constructor(t,e,o,a){super(t,e),this.reason=o,this.code=a}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Jc=class extends fa{reason;code;type=Yn.NavigationSkipped;constructor(t,e,o,a){super(t,e),this.reason=o,this.code=a}},Ff=class extends fa{error;target;type=Yn.NavigationError;constructor(t,e,o,a){super(t,e),this.error=o,this.target=a}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},u0=class extends fa{urlAfterRedirects;state;type=Yn.RoutesRecognized;constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Av=class extends fa{urlAfterRedirects;state;type=Yn.GuardsCheckStart;constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kv=class extends fa{urlAfterRedirects;state;shouldActivate;type=Yn.GuardsCheckEnd;constructor(t,e,o,a,s){super(t,e),this.urlAfterRedirects=o,this.state=a,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Pv=class extends fa{urlAfterRedirects;state;type=Yn.ResolveStart;constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dv=class extends fa{urlAfterRedirects;state;type=Yn.ResolveEnd;constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rv=class{route;type=Yn.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ov=class{route;type=Yn.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Lv=class{snapshot;type=Yn.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nv=class{snapshot;type=Yn.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fv=class{snapshot;type=Yn.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zv=class{snapshot;type=Yn.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},d0=class{routerEvent;position;anchor;type=Yn.Scroll;constructor(t,e,o){this.routerEvent=t,this.position=e,this.anchor=o}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},zf=class{},Rh=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function $5(r,t){return r.providers&&!r._injector&&(r._injector=Ry(r.providers,t,`Route: ${r.path}`)),r._injector??t}function Ga(r){return r.outlet||Ui}function G5(r,t){let e=r.filter(o=>Ga(o)===t);return e.push(...r.filter(o=>Ga(o)!==t)),e}function Gf(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let t=r.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Bv=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Gf(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Wf(this.rootInjector)}},Wf=(()=>{class r{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,o){let a=this.getOrCreateContext(e);a.outlet=o,this.contexts.set(e,a)}onChildOutletDestroyed(e){let o=this.getContext(e);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let o=this.getContext(e);return o||(o=new Bv(this.rootInjector),this.contexts.set(e,o)),o}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(o){return new(o||r)(li(Ua))};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),h0=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Vv(t,this._root);return e?e.children.map(o=>o.value):[]}firstChild(t){let e=Vv(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Uv(t,this._root);return e.length<2?[]:e[e.length-2].children.map(a=>a.value).filter(a=>a!==t)}pathFromRoot(t){return Uv(t,this._root).map(e=>e.value)}};function Vv(r,t){if(r===t.value)return t;for(let e of t.children){let o=Vv(r,e);if(o)return o}return null}function Uv(r,t){if(r===t.value)return[t];for(let e of t.children){let o=Uv(r,e);if(o.length)return o.unshift(t),o}return[]}var Ds=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Th(r){let t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}var p0=class extends h0{snapshot;constructor(t,e){super(t),this.snapshot=e,Yv(this,t)}toString(){return this.snapshot.toString()}};function gT(r){let t=W5(r),e=new ls([new td("",{})]),o=new ls({}),a=new ls({}),s=new ls({}),_=new ls(""),w=new rd(e,o,s,_,a,Ui,r,t.root);return w.snapshot=t.root,new p0(new Ds(w,[]),t)}function W5(r){let t={},e={},o={},a="",s=new Ih([],t,o,a,e,Ui,r,null,{});return new m0("",new Ds(s,[]))}var rd=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,o,a,s,_,w,E){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=o,this.fragmentSubject=a,this.dataSubject=s,this.outlet=_,this.component=w,this._futureSnapshot=E,this.title=this.dataSubject?.pipe(gi(M=>M[Hf]))??ti(void 0),this.url=t,this.params=e,this.queryParams=o,this.fragment=a,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(gi(t=>kh(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(gi(t=>kh(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function f0(r,t,e="emptyOnly"){let o,{routeConfig:a}=r;return t!==null&&(e==="always"||a?.path===""||!t.component&&!t.routeConfig?.loadComponent)?o={params:ft(ft({},t.params),r.params),data:ft(ft({},t.data),r.data),resolve:ft(ft(ft(ft({},r.data),t.data),a?.data),r._resolvedData)}:o={params:ft({},r.params),data:ft({},r.data),resolve:ft(ft({},r.data),r._resolvedData??{})},a&&bT(a)&&(o.resolve[Hf]=a.title),o}var Ih=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Hf]}constructor(t,e,o,a,s,_,w,E,M){this.url=t,this.params=e,this.queryParams=o,this.fragment=a,this.data=s,this.outlet=_,this.component=w,this.routeConfig=E,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=kh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=kh(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(o=>o.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},m0=class extends h0{url;constructor(t,e){super(e),this.url=t,Yv(this,e)}toString(){return _T(this._root)}};function Yv(r,t){t.value._routerState=r,t.children.forEach(e=>Yv(r,e))}function _T(r){let t=r.children.length>0?` { ${r.children.map(_T).join(", ")} } `:"";return`${r.value}${t}`}function wv(r){if(r.snapshot){let t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,wl(t.queryParams,e.queryParams)||r.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&r.fragmentSubject.next(e.fragment),wl(t.params,e.params)||r.paramsSubject.next(e.params),v5(t.url,e.url)||r.urlSubject.next(e.url),wl(t.data,e.data)||r.dataSubject.next(e.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function jv(r,t){let e=wl(r.params,t.params)&&E5(r.url,t.url),o=!r.parent!=!t.parent;return e&&!o&&(!r.parent||jv(r.parent,t.parent))}function bT(r){return typeof r.title=="string"||r.title===null}var Z5=new Ft(""),Zf=(()=>{class r{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ui;activateEvents=new ar;deactivateEvents=new ar;attachEvents=new ar;detachEvents=new ar;routerOutletData=KC(void 0);parentContexts=Oe(Wf);location=Oe(gh);changeDetector=Oe(Go);inputBinder=Oe(y0,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:o,previousValue:a}=e.name;if(o)return;this.isTrackedInParentContexts(a)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(a)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new xr(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new xr(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new xr(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,o){this.activated=e,this._activatedRoute=o,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,o){if(this.isActivated)throw new xr(4013,!1);this._activatedRoute=e;let a=this.location,_=e.snapshot.component,w=this.parentContexts.getOrCreateContext(this.name).children,E=new qv(e,w,a.injector,this.routerOutletData);this.activated=a.createComponent(_,{index:a.length,injector:E,environmentInjector:o}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[da]})}return r})(),qv=class r{route;childContexts;parent;outletData;__ngOutletInjector(t){return new r(this.route,this.childContexts,t,this.outletData)}constructor(t,e,o,a){this.route=t,this.childContexts=e,this.parent=o,this.outletData=a}get(t,e){return t===rd?this.route:t===Wf?this.childContexts:t===Z5?this.outletData:this.parent.get(t,e)}},y0=new Ft(""),YS=(()=>{class r{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:o}=e,a=dh([o.queryParams,o.params,o.data]).pipe(po(([s,_,w],E)=>(w=ft(ft(ft({},s),_),w),E===0?ti(w):Promise.resolve(w)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==o||o.component===null){this.unsubscribeFromRouteData(e);return}let _=_E(o.component);if(!_){this.unsubscribeFromRouteData(e);return}for(let{templateName:w}of _.inputs)e.activatedComponentRef.setInput(w,s[w])});this.outletDataSubscriptions.set(e,a)}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})();function X5(r,t,e){let o=Bf(r,t._root,e?e._root:void 0);return new p0(o,t)}function Bf(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){let o=e.value;o._futureSnapshot=t.value;let a=Y5(r,t,e);return new Ds(o,a)}else{if(r.shouldAttach(t.value)){let s=r.retrieve(t.value);if(s!==null){let _=s.route;return _.value._futureSnapshot=t.value,_.children=t.children.map(w=>Bf(r,w)),_}}let o=K5(t.value),a=t.children.map(s=>Bf(r,s));return new Ds(o,a)}}function Y5(r,t,e){return t.children.map(o=>{for(let a of e.children)if(r.shouldReuseRoute(o.value,a.value.snapshot))return Bf(r,o,a);return Bf(r,o)})}function K5(r){return new rd(new ls(r.url),new ls(r.params),new ls(r.queryParams),new ls(r.fragment),new ls(r.data),r.outlet,r.component,r)}var Vf=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},yT="ngNavigationCancelingError";function g0(r,t){let{redirectTo:e,navigationBehaviorOptions:o}=Lf(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,a=vT(!1,Rs.Redirect);return a.url=e,a.navigationBehaviorOptions=o,a}function vT(r,t){let e=new Error(`NavigationCancelingError: ${r||""}`);return e[yT]=!0,e.cancellationCode=t,e}function Q5(r){return xT(r)&&Lf(r.url)}function xT(r){return!!r&&r[yT]}var J5=(r,t,e,o)=>gi(a=>(new Hv(t,a.targetRouterState,a.currentRouterState,e,o).activate(r),a)),Hv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,o,a,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=o,this.forwardEvent=a,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,t),wv(this.futureState.root),this.activateChildRoutes(e,o,t)}deactivateChildRoutes(t,e,o){let a=Th(e);t.children.forEach(s=>{let _=s.value.outlet;this.deactivateRoutes(s,a[_],o),delete a[_]}),Object.values(a).forEach(s=>{this.deactivateRouteAndItsChildren(s,o)})}deactivateRoutes(t,e,o){let a=t.value,s=e?e.value:null;if(a===s)if(a.component){let _=o.getContext(a.outlet);_&&this.deactivateChildRoutes(t,e,_.children)}else this.deactivateChildRoutes(t,e,o);else s&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let o=e.getContext(t.value.outlet),a=o&&t.value.component?o.children:e,s=Th(t);for(let _ of Object.values(s))this.deactivateRouteAndItsChildren(_,a);if(o&&o.outlet){let _=o.outlet.detach(),w=o.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:_,route:t,contexts:w})}}deactivateRouteAndOutlet(t,e){let o=e.getContext(t.value.outlet),a=o&&t.value.component?o.children:e,s=Th(t);for(let _ of Object.values(s))this.deactivateRouteAndItsChildren(_,a);o&&(o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated()),o.attachRef=null,o.route=null)}activateChildRoutes(t,e,o){let a=Th(e);t.children.forEach(s=>{this.activateRoutes(s,a[s.value.outlet],o),this.forwardEvent(new zv(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Nv(t.value.snapshot))}activateRoutes(t,e,o){let a=t.value,s=e?e.value:null;if(wv(a),a===s)if(a.component){let _=o.getOrCreateContext(a.outlet);this.activateChildRoutes(t,e,_.children)}else this.activateChildRoutes(t,e,o);else if(a.component){let _=o.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){let w=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),_.children.onOutletReAttached(w.contexts),_.attachRef=w.componentRef,_.route=w.route.value,_.outlet&&_.outlet.attach(w.componentRef,w.route.value),wv(w.route.value),this.activateChildRoutes(t,null,_.children)}else _.attachRef=null,_.route=a,_.outlet&&_.outlet.activateWith(a,_.injector),this.activateChildRoutes(t,null,_.children)}else this.activateChildRoutes(t,null,o)}},_0=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ah=class{component;route;constructor(t,e){this.component=t,this.route=e}};function e8(r,t,e){let o=r._root,a=t?t._root:null;return kf(o,a,e,[o.value])}function t8(r){let t=r.routeConfig?r.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:r,guards:t}}function Lh(r,t){let e=Symbol(),o=t.get(r,e);return o===e?typeof r=="function"&&!WC(r)?r:t.get(r):o}function kf(r,t,e,o,a={canDeactivateChecks:[],canActivateChecks:[]}){let s=Th(t);return r.children.forEach(_=>{i8(_,s[_.value.outlet],e,o.concat([_.value]),a),delete s[_.value.outlet]}),Object.entries(s).forEach(([_,w])=>Of(w,e.getContext(_),a)),a}function i8(r,t,e,o,a={canDeactivateChecks:[],canActivateChecks:[]}){let s=r.value,_=t?t.value:null,w=e?e.getContext(r.value.outlet):null;if(_&&s.routeConfig===_.routeConfig){let E=r8(_,s,s.routeConfig.runGuardsAndResolvers);E?a.canActivateChecks.push(new _0(o)):(s.data=_.data,s._resolvedData=_._resolvedData),s.component?kf(r,t,w?w.children:null,o,a):kf(r,t,e,o,a),E&&w&&w.outlet&&w.outlet.isActivated&&a.canDeactivateChecks.push(new Ah(w.outlet.component,_))}else _&&Of(t,w,a),a.canActivateChecks.push(new _0(o)),s.component?kf(r,null,w?w.children:null,o,a):kf(r,null,e,o,a);return a}function r8(r,t,e){if(typeof e=="function")return e(r,t);switch(e){case"pathParamsChange":return!id(r.url,t.url);case"pathParamsOrQueryParamsChange":return!id(r.url,t.url)||!wl(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jv(r,t)||!wl(r.queryParams,t.queryParams);case"paramsChange":default:return!jv(r,t)}}function Of(r,t,e){let o=Th(r),a=r.value;Object.entries(o).forEach(([s,_])=>{a.component?t?Of(_,t.children.getContext(s),e):Of(_,null,e):Of(_,t,e)}),a.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Ah(t.outlet.component,a)):e.canDeactivateChecks.push(new Ah(null,a)):e.canDeactivateChecks.push(new Ah(null,a))}function Xf(r){return typeof r=="function"}function n8(r){return typeof r=="boolean"}function o8(r){return r&&Xf(r.canLoad)}function s8(r){return r&&Xf(r.canActivate)}function a8(r){return r&&Xf(r.canActivateChild)}function l8(r){return r&&Xf(r.canDeactivate)}function c8(r){return r&&Xf(r.canMatch)}function wT(r){return r instanceof VC||r?.name==="EmptyError"}var r0=Symbol("INITIAL_VALUE");function Oh(){return po(r=>dh(r.map(t=>t.pipe(Ms(1),gl(r0)))).pipe(gi(t=>{for(let e of t)if(e!==!0){if(e===r0)return r0;if(e===!1||u8(e))return e}return!0}),sn(t=>t!==r0),Ms(1)))}function u8(r){return Lf(r)||r instanceof Vf}function d8(r,t){return Ts(e=>{let{targetSnapshot:o,currentSnapshot:a,guards:{canActivateChecks:s,canDeactivateChecks:_}}=e;return _.length===0&&s.length===0?ti(si(ft({},e),{guardsResult:!0})):h8(_,o,a,r).pipe(Ts(w=>w&&n8(w)?p8(o,s,r,t):ti(w)),gi(w=>si(ft({},e),{guardsResult:w})))})}function h8(r,t,e,o){return ho(r).pipe(Ts(a=>b8(a.component,a.route,e,t,o)),Hc(a=>a!==!0,!0))}function p8(r,t,e,o){return ho(t).pipe(qc(a=>vg(m8(a.route.parent,o),f8(a.route,o),_8(r,a.path,e),g8(r,a.route,e))),Hc(a=>a!==!0,!0))}function f8(r,t){return r!==null&&t&&t(new Fv(r)),ti(!0)}function m8(r,t){return r!==null&&t&&t(new Lv(r)),ti(!0)}function g8(r,t,e){let o=t.routeConfig?t.routeConfig.canActivate:null;if(!o||o.length===0)return ti(!0);let a=o.map(s=>of(()=>{let _=Gf(t)??e,w=Lh(s,_),E=s8(w)?w.canActivate(t,r):cs(_,()=>w(t,r));return eu(E).pipe(Hc())}));return ti(a).pipe(Oh())}function _8(r,t,e){let o=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(_=>t8(_)).filter(_=>_!==null).map(_=>of(()=>{let w=_.guards.map(E=>{let M=Gf(_.node)??e,I=Lh(E,M),A=a8(I)?I.canActivateChild(o,r):cs(M,()=>I(o,r));return eu(A).pipe(Hc())});return ti(w).pipe(Oh())}));return ti(s).pipe(Oh())}function b8(r,t,e,o,a){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return ti(!0);let _=s.map(w=>{let E=Gf(t)??a,M=Lh(w,E),I=l8(M)?M.canDeactivate(r,t,e,o):cs(E,()=>M(r,t,e,o));return eu(I).pipe(Hc())});return ti(_).pipe(Oh())}function y8(r,t,e,o){let a=t.canLoad;if(a===void 0||a.length===0)return ti(!0);let s=a.map(_=>{let w=Lh(_,r),E=o8(w)?w.canLoad(t,e):cs(r,()=>w(t,e));return eu(E)});return ti(s).pipe(Oh(),CT(o))}function CT(r){return BC(Br(t=>{if(typeof t!="boolean")throw g0(r,t)}),gi(t=>t===!0))}function v8(r,t,e,o){let a=t.canMatch;if(!a||a.length===0)return ti(!0);let s=a.map(_=>{let w=Lh(_,r),E=c8(w)?w.canMatch(t,e):cs(r,()=>w(t,e));return eu(E)});return ti(s).pipe(Oh(),CT(o))}var Uf=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},jf=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Sh(r){return Gu(new Uf(r))}function x8(r){return Gu(new xr(4e3,!1))}function w8(r){return Gu(vT(!1,Rs.GuardRejected))}var $v=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let o=[],a=e.root;for(;;){if(o=o.concat(a.segments),a.numberOfChildren===0)return ti(o);if(a.numberOfChildren>1||!a.children[Ui])return x8(`${t.redirectTo}`);a=a.children[Ui]}}applyRedirectCommands(t,e,o,a,s){if(typeof e!="string"){let w=e,{queryParams:E,fragment:M,routeConfig:I,url:A,outlet:R,params:$,data:W,title:G}=a,pe=cs(s,()=>w({params:$,data:W,queryParams:E,fragment:M,routeConfig:I,url:A,outlet:R,title:G}));if(pe instanceof Yl)throw new jf(pe);e=pe}let _=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,o);if(e[0]==="/")throw new jf(_);return _}applyRedirectCreateUrlTree(t,e,o,a){let s=this.createSegmentGroup(t,e.root,o,a);return new Yl(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let o={};return Object.entries(t).forEach(([a,s])=>{if(typeof s=="string"&&s[0]===":"){let w=s.substring(1);o[a]=e[w]}else o[a]=s}),o}createSegmentGroup(t,e,o,a){let s=this.createSegments(t,e.segments,o,a),_={};return Object.entries(e.children).forEach(([w,E])=>{_[w]=this.createSegmentGroup(t,E,o,a)}),new _r(s,_)}createSegments(t,e,o,a){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,a):this.findOrReturn(s,o))}findPosParam(t,e,o){let a=o[e.path.substring(1)];if(!a)throw new xr(4001,!1);return a}findOrReturn(t,e){let o=0;for(let a of e){if(a.path===t.path)return e.splice(o),a;o++}return t}},Gv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function C8(r,t,e,o,a){let s=ET(r,t,e);return s.matched?(o=$5(t,o),v8(o,t,e,a).pipe(gi(_=>_===!0?s:ft({},Gv)))):ti(s)}function ET(r,t,e){if(t.path==="**")return E8(e);if(t.path==="")return t.pathMatch==="full"&&(r.hasChildren()||e.length>0)?ft({},Gv):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let a=(t.matcher||y5)(e,r,t);if(!a)return ft({},Gv);let s={};Object.entries(a.posParams??{}).forEach(([w,E])=>{s[w]=E.path});let _=a.consumed.length>0?ft(ft({},s),a.consumed[a.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:a.consumed,remainingSegments:e.slice(a.consumed.length),parameters:_,positionalParamSegments:a.posParams??{}}}function E8(r){return{matched:!0,parameters:r.length>0?rT(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function KS(r,t,e,o){return e.length>0&&M8(r,e,o)?{segmentGroup:new _r(t,T8(o,new _r(e,r.children))),slicedSegments:[]}:e.length===0&&I8(r,e,o)?{segmentGroup:new _r(r.segments,S8(r,e,o,r.children)),slicedSegments:e}:{segmentGroup:new _r(r.segments,r.children),slicedSegments:e}}function S8(r,t,e,o){let a={};for(let s of e)if(v0(r,t,s)&&!o[Ga(s)]){let _=new _r([],{});a[Ga(s)]=_}return ft(ft({},o),a)}function T8(r,t){let e={};e[Ui]=t;for(let o of r)if(o.path===""&&Ga(o)!==Ui){let a=new _r([],{});e[Ga(o)]=a}return e}function M8(r,t,e){return e.some(o=>v0(r,t,o)&&Ga(o)!==Ui)}function I8(r,t,e){return e.some(o=>v0(r,t,o))}function v0(r,t,e){return(r.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function A8(r,t,e){return t.length===0&&!r.children[e]}var Wv=class{};function k8(r,t,e,o,a,s,_="emptyOnly"){return new Zv(r,t,e,o,a,_,s).recognize()}var P8=31,Zv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,o,a,s,_,w){this.injector=t,this.configLoader=e,this.rootComponentType=o,this.config=a,this.urlTree=s,this.paramsInheritanceStrategy=_,this.urlSerializer=w,this.applyRedirects=new $v(this.urlSerializer,this.urlTree)}noMatchError(t){return new xr(4002,`'${t.segmentGroup}'`)}recognize(){let t=KS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(gi(({children:e,rootSnapshot:o})=>{let a=new Ds(o,e),s=new m0("",a),_=z5(o,[],this.urlTree.queryParams,this.urlTree.fragment);return _.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(_),{state:s,tree:_}}))}match(t){let e=new Ih([],Object.freeze({}),Object.freeze(ft({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ui,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,Ui,e).pipe(gi(o=>({children:o,rootSnapshot:e})),jc(o=>{if(o instanceof jf)return this.urlTree=o.urlTree,this.match(o.urlTree.root);throw o instanceof Uf?this.noMatchError(o):o}))}processSegmentGroup(t,e,o,a,s){return o.segments.length===0&&o.hasChildren()?this.processChildren(t,e,o,s):this.processSegment(t,e,o,o.segments,a,!0,s).pipe(gi(_=>_ instanceof Ds?[_]:[]))}processChildren(t,e,o,a){let s=[];for(let _ of Object.keys(o.children))_==="primary"?s.unshift(_):s.push(_);return ho(s).pipe(qc(_=>{let w=o.children[_],E=G5(e,_);return this.processSegmentGroup(t,E,w,_,a)}),HC((_,w)=>(_.push(...w),_)),Sy(null),qC(),Ts(_=>{if(_===null)return Sh(o);let w=ST(_);return D8(w),ti(w)}))}processSegment(t,e,o,a,s,_,w){return ho(e).pipe(qc(E=>this.processSegmentAgainstRoute(E._injector??t,e,E,o,a,s,_,w).pipe(jc(M=>{if(M instanceof Uf)return ti(null);throw M}))),Hc(E=>!!E),jc(E=>{if(wT(E))return A8(o,a,s)?ti(new Wv):Sh(o);throw E}))}processSegmentAgainstRoute(t,e,o,a,s,_,w,E){return Ga(o)!==_&&(_===Ui||!v0(a,s,o))?Sh(a):o.redirectTo===void 0?this.matchSegmentAgainstRoute(t,a,o,s,_,E):this.allowRedirects&&w?this.expandSegmentAgainstRouteUsingRedirect(t,a,e,o,s,_,E):Sh(a)}expandSegmentAgainstRouteUsingRedirect(t,e,o,a,s,_,w){let{matched:E,parameters:M,consumedSegments:I,positionalParamSegments:A,remainingSegments:R}=ET(e,a,s);if(!E)return Sh(e);typeof a.redirectTo=="string"&&a.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>P8&&(this.allowRedirects=!1));let $=new Ih(s,M,Object.freeze(ft({},this.urlTree.queryParams)),this.urlTree.fragment,QS(a),Ga(a),a.component??a._loadedComponent??null,a,JS(a)),W=f0($,w,this.paramsInheritanceStrategy);$.params=Object.freeze(W.params),$.data=Object.freeze(W.data);let G=this.applyRedirects.applyRedirectCommands(I,a.redirectTo,A,$,t);return this.applyRedirects.lineralizeSegments(a,G).pipe(Ts(pe=>this.processSegment(t,o,e,pe.concat(R),_,!1,w)))}matchSegmentAgainstRoute(t,e,o,a,s,_){let w=C8(e,o,a,t,this.urlSerializer);return o.path==="**"&&(e.children={}),w.pipe(po(E=>E.matched?(t=o._injector??t,this.getChildConfig(t,o,a).pipe(po(({routes:M})=>{let I=o._loadedInjector??t,{parameters:A,consumedSegments:R,remainingSegments:$}=E,W=new Ih(R,A,Object.freeze(ft({},this.urlTree.queryParams)),this.urlTree.fragment,QS(o),Ga(o),o.component??o._loadedComponent??null,o,JS(o)),G=f0(W,_,this.paramsInheritanceStrategy);W.params=Object.freeze(G.params),W.data=Object.freeze(G.data);let{segmentGroup:pe,slicedSegments:le}=KS(e,R,$,M);if(le.length===0&&pe.hasChildren())return this.processChildren(I,M,pe,W).pipe(gi(re=>new Ds(W,re)));if(M.length===0&&le.length===0)return ti(new Ds(W,[]));let ne=Ga(o)===s;return this.processSegment(I,M,pe,le,ne?Ui:s,!0,W).pipe(gi(re=>new Ds(W,re instanceof Ds?[re]:[])))}))):Sh(e)))}getChildConfig(t,e,o){return e.children?ti({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?ti({routes:e._loadedRoutes,injector:e._loadedInjector}):y8(t,e,o,this.urlSerializer).pipe(Ts(a=>a?this.configLoader.loadChildren(t,e).pipe(Br(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):w8(e))):ti({routes:[],injector:t})}};function D8(r){r.sort((t,e)=>t.value.outlet===Ui?-1:e.value.outlet===Ui?1:t.value.outlet.localeCompare(e.value.outlet))}function R8(r){let t=r.value.routeConfig;return t&&t.path===""}function ST(r){let t=[],e=new Set;for(let o of r){if(!R8(o)){t.push(o);continue}let a=t.find(s=>o.value.routeConfig===s.value.routeConfig);a!==void 0?(a.children.push(...o.children),e.add(a)):t.push(o)}for(let o of e){let a=ST(o.children);t.push(new Ds(o.value,a))}return t.filter(o=>!e.has(o))}function QS(r){return r.data||{}}function JS(r){return r.resolve||{}}function O8(r,t,e,o,a,s){return Ts(_=>k8(r,t,e,o,_.extractedUrl,a,s).pipe(gi(({state:w,tree:E})=>si(ft({},_),{targetSnapshot:w,urlAfterRedirects:E}))))}function L8(r,t){return Ts(e=>{let{targetSnapshot:o,guards:{canActivateChecks:a}}=e;if(!a.length)return ti(e);let s=new Set(a.map(E=>E.route)),_=new Set;for(let E of s)if(!_.has(E))for(let M of TT(E))_.add(M);let w=0;return ho(_).pipe(qc(E=>s.has(E)?N8(E,o,r,t):(E.data=f0(E,E.parent,r).resolve,ti(void 0))),Br(()=>w++),Ty(1),Ts(E=>w===_.size?ti(e):Vc))})}function TT(r){let t=r.children.map(e=>TT(e)).flat();return[r,...t]}function N8(r,t,e,o){let a=r.routeConfig,s=r._resolve;return a?.title!==void 0&&!bT(a)&&(s[Hf]=a.title),F8(s,r,t,o).pipe(gi(_=>(r._resolvedData=_,r.data=f0(r,r.parent,e).resolve,null)))}function F8(r,t,e,o){let a=Sv(r);if(a.length===0)return ti({});let s={};return ho(a).pipe(Ts(_=>z8(r[_],t,e,o).pipe(Hc(),Br(w=>{if(w instanceof Vf)throw g0(new Ph,w);s[_]=w}))),Ty(1),jC(s),jc(_=>wT(_)?Vc:Gu(_)))}function z8(r,t,e,o){let a=Gf(t)??o,s=Lh(r,a),_=s.resolve?s.resolve(t,e):cs(a,()=>s(t,e));return eu(_)}function Cv(r){return po(t=>{let e=r(t);return e?ho(e).pipe(gi(()=>t)):ti(t)})}var MT=(()=>{class r{buildTitle(e){let o,a=e.root;for(;a!==void 0;)o=this.getResolvedTitleForRoute(a)??o,a=a.children.find(s=>s.outlet===Ui);return o}getResolvedTitleForRoute(e){return e.data[Hf]}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:()=>Oe(B8),providedIn:"root"})}return r})(),B8=(()=>{class r extends MT{title;constructor(e){super(),this.title=e}updateTitle(e){let o=this.buildTitle(e);o!==void 0&&this.title.setTitle(o)}static \u0275fac=function(o){return new(o||r)(li(sS))};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Yf=new Ft("",{providedIn:"root",factory:()=>({})}),V8=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(o,a){o&1&&Je(0,"router-outlet")},dependencies:[Zf],encapsulation:2})}return r})();function Kv(r){let t=r.children&&r.children.map(Kv),e=t?si(ft({},r),{children:t}):ft({},r);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Ui&&(e.component=V8),e}var qf=new Ft(""),Qv=(()=>{class r{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Oe(_h);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ti(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let o=eu(e.loadComponent()).pipe(gi(IT),Br(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Gl(()=>{this.componentLoaders.delete(e)})),a=new yg(o,()=>new Mi).pipe(wy());return this.componentLoaders.set(e,a),a}loadChildren(e,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return ti({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);let s=Jv(o,this.compiler,e,this.onLoadEndListener).pipe(Gl(()=>{this.childrenLoaders.delete(o)})),_=new yg(s,()=>new Mi).pipe(wy());return this.childrenLoaders.set(o,_),_}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Jv(r,t,e,o){return eu(r.loadChildren()).pipe(gi(IT),Ts(a=>a instanceof cE||Array.isArray(a)?ti(a):ho(t.compileModuleAsync(a))),gi(a=>{o&&o(r);let s,_,w=!1;return Array.isArray(a)?(_=a,w=!0):(s=a.create(e).injector,_=s.get(qf,[],{optional:!0,self:!0}).flat()),{routes:_.map(Kv),injector:s}}))}function U8(r){return r&&typeof r=="object"&&"default"in r}function IT(r){return U8(r)?r.default:r}var e1=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:()=>Oe(j8),providedIn:"root"})}return r})(),j8=(()=>{class r{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,o){return e}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),AT=new Ft(""),kT=new Ft("");function q8(r,t,e){let o=r.get(kT),a=r.get(Ii);return r.get(Xi).runOutsideAngular(()=>{if(!a.startViewTransition||o.skipNextTransition)return o.skipNextTransition=!1,new Promise(M=>setTimeout(M));let s,_=new Promise(M=>{s=M}),w=a.startViewTransition(()=>(s(),H8(r))),{onViewTransitionCreated:E}=o;return E&&cs(r,()=>E({transition:w,from:t,to:e})),_})}function H8(r){return new Promise(t=>{hh({read:()=>setTimeout(t)},{injector:r})})}var PT=new Ft(""),t1=(()=>{class r{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Mi;transitionAbortSubject=new Mi;configLoader=Oe(Qv);environmentInjector=Oe(Ua);urlSerializer=Oe($f);rootContexts=Oe(Wf);location=Oe(Ju);inputBindingEnabled=Oe(y0,{optional:!0})!==null;titleStrategy=Oe(MT);options=Oe(Yf,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Oe(e1);createViewTransition=Oe(AT,{optional:!0});navigationErrorHandler=Oe(PT,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ti(void 0);rootComponentType=null;constructor(){let e=a=>this.events.next(new Rv(a)),o=a=>this.events.next(new Ov(a));this.configLoader.onLoadEndListener=o,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let o=++this.navigationId;this.transitions?.next(si(ft(ft({},this.transitions.value),e),{id:o}))}setupNavigations(e,o,a){return this.transitions=new ls({id:0,currentUrlTree:o,currentRawUrl:o,extractedUrl:this.urlHandlingStrategy.extract(o),urlAfterRedirects:this.urlHandlingStrategy.extract(o),rawUrl:o,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Rf,restoredState:null,currentSnapshot:a.snapshot,targetSnapshot:null,currentRouterState:a,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(sn(s=>s.id!==0),gi(s=>si(ft({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),po(s=>{let _=!1,w=!1;return ti(s).pipe(po(E=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Rs.SupersededByNewNavigation),Vc;this.currentTransition=s,this.currentNavigation={id:E.id,initialUrl:E.rawUrl,extractedUrl:E.extractedUrl,targetBrowserUrl:typeof E.extras.browserUrl=="string"?this.urlSerializer.parse(E.extras.browserUrl):E.extras.browserUrl,trigger:E.source,extras:E.extras,previousNavigation:this.lastSuccessfulNavigation?si(ft({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let M=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),I=E.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!M&&I!=="reload"){let A="";return this.events.next(new Jc(E.id,this.urlSerializer.serialize(E.rawUrl),A,c0.IgnoredSameUrlNavigation)),E.resolve(!1),Vc}if(this.urlHandlingStrategy.shouldProcessUrl(E.rawUrl))return ti(E).pipe(po(A=>{let R=this.transitions?.getValue();return this.events.next(new Dh(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),R!==this.transitions?.getValue()?Vc:Promise.resolve(A)}),O8(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Br(A=>{s.targetSnapshot=A.targetSnapshot,s.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation=si(ft({},this.currentNavigation),{finalUrl:A.urlAfterRedirects});let R=new u0(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(R)}));if(M&&this.urlHandlingStrategy.shouldProcessUrl(E.currentRawUrl)){let{id:A,extractedUrl:R,source:$,restoredState:W,extras:G}=E,pe=new Dh(A,this.urlSerializer.serialize(R),$,W);this.events.next(pe);let le=gT(this.rootComponentType).snapshot;return this.currentTransition=s=si(ft({},E),{targetSnapshot:le,urlAfterRedirects:R,extras:si(ft({},G),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=R,ti(s)}else{let A="";return this.events.next(new Jc(E.id,this.urlSerializer.serialize(E.extractedUrl),A,c0.IgnoredByUrlHandlingStrategy)),E.resolve(!1),Vc}}),Br(E=>{let M=new Av(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(M)}),gi(E=>(this.currentTransition=s=si(ft({},E),{guards:e8(E.targetSnapshot,E.currentSnapshot,this.rootContexts)}),s)),d8(this.environmentInjector,E=>this.events.next(E)),Br(E=>{if(s.guardsResult=E.guardsResult,E.guardsResult&&typeof E.guardsResult!="boolean")throw g0(this.urlSerializer,E.guardsResult);let M=new kv(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot,!!E.guardsResult);this.events.next(M)}),sn(E=>E.guardsResult?!0:(this.cancelNavigationTransition(E,"",Rs.GuardRejected),!1)),Cv(E=>{if(E.guards.canActivateChecks.length)return ti(E).pipe(Br(M=>{let I=new Pv(M.id,this.urlSerializer.serialize(M.extractedUrl),this.urlSerializer.serialize(M.urlAfterRedirects),M.targetSnapshot);this.events.next(I)}),po(M=>{let I=!1;return ti(M).pipe(L8(this.paramsInheritanceStrategy,this.environmentInjector),Br({next:()=>I=!0,complete:()=>{I||this.cancelNavigationTransition(M,"",Rs.NoDataFromResolver)}}))}),Br(M=>{let I=new Dv(M.id,this.urlSerializer.serialize(M.extractedUrl),this.urlSerializer.serialize(M.urlAfterRedirects),M.targetSnapshot);this.events.next(I)}))}),Cv(E=>{let M=I=>{let A=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(I.routeConfig).pipe(Br(R=>{I.component=R}),gi(()=>{})));for(let R of I.children)A.push(...M(R));return A};return dh(M(E.targetSnapshot.root)).pipe(Sy(null),Ms(1))}),Cv(()=>this.afterPreactivation()),po(()=>{let{currentSnapshot:E,targetSnapshot:M}=s,I=this.createViewTransition?.(this.environmentInjector,E.root,M.root);return I?ho(I).pipe(gi(()=>s)):ti(s)}),gi(E=>{let M=X5(e.routeReuseStrategy,E.targetSnapshot,E.currentRouterState);return this.currentTransition=s=si(ft({},E),{targetRouterState:M}),this.currentNavigation.targetRouterState=M,s}),Br(()=>{this.events.next(new zf)}),J5(this.rootContexts,e.routeReuseStrategy,E=>this.events.next(E),this.inputBindingEnabled),Ms(1),Br({next:E=>{_=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Kl(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects))),this.titleStrategy?.updateTitle(E.targetRouterState.snapshot),E.resolve(!0)},complete:()=>{_=!0}}),pn(this.transitionAbortSubject.pipe(Br(E=>{throw E}))),Gl(()=>{!_&&!w&&this.cancelNavigationTransition(s,"",Rs.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),jc(E=>{if(w=!0,xT(E))this.events.next(new Xl(s.id,this.urlSerializer.serialize(s.extractedUrl),E.message,E.cancellationCode)),Q5(E)?this.events.next(new Rh(E.url,E.navigationBehaviorOptions)):s.resolve(!1);else{let M=new Ff(s.id,this.urlSerializer.serialize(s.extractedUrl),E,s.targetSnapshot??void 0);try{let I=cs(this.environmentInjector,()=>this.navigationErrorHandler?.(M));if(I instanceof Vf){let{message:A,cancellationCode:R}=g0(this.urlSerializer,I);this.events.next(new Xl(s.id,this.urlSerializer.serialize(s.extractedUrl),A,R)),this.events.next(new Rh(I.redirectTo,I.navigationBehaviorOptions))}else throw this.events.next(M),E}catch(I){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(I)}}return Vc}))}))}cancelNavigationTransition(e,o,a){let s=new Xl(e.id,this.urlSerializer.serialize(e.extractedUrl),o,a);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),o=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==o?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function $8(r){return r!==Rf}var G8=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:()=>Oe(W8),providedIn:"root"})}return r})(),Xv=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},W8=(()=>{class r extends Xv{static \u0275fac=(()=>{let e;return function(a){return(e||(e=ha(r)))(a||r)}})();static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),DT=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:()=>Oe(Z8),providedIn:"root"})}return r})(),Z8=(()=>{class r extends DT{location=Oe(Ju);urlSerializer=Oe($f);options=Oe(Yf,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=Oe(e1);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Yl;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=gT(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(o=>{o.type==="popstate"&&e(o.url,o.state)})}handleRouterEvent(e,o){if(e instanceof Dh)this.stateMemento=this.createStateMemento();else if(e instanceof Jc)this.rawUrlTree=o.initialUrl;else if(e instanceof u0){if(this.urlUpdateStrategy==="eager"&&!o.extras.skipLocationChange){let a=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl);this.setBrowserUrl(o.targetBrowserUrl??a,o)}}else e instanceof zf?(this.currentUrlTree=o.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl),this.routerState=o.targetRouterState,this.urlUpdateStrategy==="deferred"&&!o.extras.skipLocationChange&&this.setBrowserUrl(o.targetBrowserUrl??this.rawUrlTree,o)):e instanceof Xl&&(e.code===Rs.GuardRejected||e.code===Rs.NoDataFromResolver)?this.restoreHistory(o):e instanceof Ff?this.restoreHistory(o,!0):e instanceof Kl&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,o){let a=e instanceof Yl?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(a)||o.extras.replaceUrl){let s=this.browserPageId,_=ft(ft({},o.extras.state),this.generateNgRouterState(o.id,s));this.location.replaceState(a,"",_)}else{let s=ft(ft({},o.extras.state),this.generateNgRouterState(o.id,this.browserPageId+1));this.location.go(a,"",s)}}restoreHistory(e,o=!1){if(this.canceledNavigationResolution==="computed"){let a=this.browserPageId,s=this.currentPageId-a;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(o&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,o){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:o}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(a){return(e||(e=ha(r)))(a||r)}})();static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Pf=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(Pf||{});function RT(r,t){r.events.pipe(sn(e=>e instanceof Kl||e instanceof Xl||e instanceof Ff||e instanceof Jc),gi(e=>e instanceof Kl||e instanceof Jc?Pf.COMPLETE:(e instanceof Xl?e.code===Rs.Redirect||e.code===Rs.SupersededByNewNavigation:!1)?Pf.REDIRECTING:Pf.FAILED),sn(e=>e!==Pf.REDIRECTING),Ms(1)).subscribe(()=>{t()})}var X8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Y8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Po=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Oe(Zc);stateManager=Oe(DT);options=Oe(Yf,{optional:!0})||{};pendingTasks=Oe(lf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Oe(t1);urlSerializer=Oe($f);location=Oe(Ju);urlHandlingStrategy=Oe(e1);_events=new Mi;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Oe(G8);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Oe(qf,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Oe(y0,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Mo;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(o=>{try{let a=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(a!==null&&s!==null){if(this.stateManager.handleRouterEvent(o,s),o instanceof Xl&&o.code!==Rs.Redirect&&o.code!==Rs.SupersededByNewNavigation)this.navigated=!0;else if(o instanceof Kl)this.navigated=!0;else if(o instanceof Rh){let _=o.navigationBehaviorOptions,w=this.urlHandlingStrategy.merge(o.url,a.currentRawUrl),E=ft({browserUrl:a.extras.browserUrl,info:a.extras.info,skipLocationChange:a.extras.skipLocationChange,replaceUrl:a.extras.replaceUrl||this.urlUpdateStrategy==="eager"||$8(a.source)},_);this.scheduleNavigation(w,Rf,null,E,{resolve:a.resolve,reject:a.reject,promise:a.promise})}}Q8(o)&&this._events.next(o)}catch(a){this.navigationTransitions.transitionAbortSubject.next(a)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Rf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",o)},0)})}navigateToSyncWithBrowser(e,o,a){let s={replaceUrl:!0},_=a?.navigationId?a:null;if(a){let E=ft({},a);delete E.navigationId,delete E.\u0275routerPageId,Object.keys(E).length!==0&&(s.state=E)}let w=this.parseUrl(e);this.scheduleNavigation(w,o,_,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Kv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,o={}){let{relativeTo:a,queryParams:s,fragment:_,queryParamsHandling:w,preserveFragment:E}=o,M=E?this.currentUrlTree.fragment:_,I=null;switch(w??this.options.defaultQueryParamsHandling){case"merge":I=ft(ft({},this.currentUrlTree.queryParams),s);break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}I!==null&&(I=this.removeEmptyProps(I));let A;try{let R=a?a.snapshot:this.routerState.snapshot.root;A=hT(R)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),A=this.currentUrlTree.root}return pT(A,e,I,M??null)}navigateByUrl(e,o={skipLocationChange:!1}){let a=Lf(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(s,Rf,null,o)}navigate(e,o={skipLocationChange:!1}){return K8(e),this.navigateByUrl(this.createUrlTree(e,o),o)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,o){let a;if(o===!0?a=ft({},X8):o===!1?a=ft({},Y8):a=o,Lf(e))return GS(this.currentUrlTree,e,a);let s=this.parseUrl(e);return GS(this.currentUrlTree,s,a)}removeEmptyProps(e){return Object.entries(e).reduce((o,[a,s])=>(s!=null&&(o[a]=s),o),{})}scheduleNavigation(e,o,a,s,_){if(this.disposed)return Promise.resolve(!1);let w,E,M;_?(w=_.resolve,E=_.reject,M=_.promise):M=new Promise((A,R)=>{w=A,E=R});let I=this.pendingTasks.add();return RT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(I))}),this.navigationTransitions.handleNavigationRequest({source:o,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:w,reject:E,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(A=>Promise.reject(A))}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function K8(r){for(let t=0;t<r.length;t++)if(r[t]==null)throw new xr(4008,!1)}function Q8(r){return!(r instanceof zf)&&!(r instanceof Rh)}var b0=class{};var J8=(()=>{class r{router;injector;preloadingStrategy;loader;subscription;constructor(e,o,a,s,_){this.router=e,this.injector=a,this.preloadingStrategy=s,this.loader=_}setUpPreloading(){this.subscription=this.router.events.pipe(sn(e=>e instanceof Kl),qc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,o){let a=[];for(let s of o){s.providers&&!s._injector&&(s._injector=Ry(s.providers,e,`Route: ${s.path}`));let _=s._injector??e,w=s._loadedInjector??_;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&a.push(this.preloadConfig(_,s)),(s.children||s._loadedRoutes)&&a.push(this.processRoutes(w,s.children??s._loadedRoutes))}return ho(a).pipe(Cy())}preloadConfig(e,o){return this.preloadingStrategy.preload(o,()=>{let a;o.loadChildren&&o.canLoad===void 0?a=this.loader.loadChildren(e,o):a=ti(null);let s=a.pipe(Ts(_=>_===null?ti(void 0):(o._loadedRoutes=_.routes,o._loadedInjector=_.injector,this.processRoutes(_.injector??e,_.routes))));if(o.loadComponent&&!o._loadedComponent){let _=this.loader.loadComponent(o);return ho([s,_]).pipe(Cy())}else return s})}static \u0275fac=function(o){return new(o||r)(li(Po),li(_h),li(Ua),li(b0),li(Qv))};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),OT=new Ft(""),e6=(()=>{class r{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,o,a,s,_={}){this.urlSerializer=e,this.transitions=o,this.viewportScroller=a,this.zone=s,this.options=_,_.scrollPositionRestoration||="disabled",_.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Dh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Kl?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Jc&&e.code===c0.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof d0&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,o){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new d0(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,o))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(o){Ig()};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})();function LT(r,...t){return Va([{provide:qf,multi:!0,useValue:r},[],{provide:rd,useFactory:NT,deps:[Po]},{provide:Pg,multi:!0,useFactory:FT},t.map(e=>e.\u0275providers)])}function NT(r){return r.routerState.root}function Kf(r,t){return{\u0275kind:r,\u0275providers:t}}function FT(){let r=Oe(In);return t=>{let e=r.get(pa);if(t!==e.components[0])return;let o=r.get(Po),a=r.get(zT);r.get(i1)===1&&o.initialNavigation(),r.get(BT,null,Ay.Optional)?.setUpPreloading(),r.get(OT,null,Ay.Optional)?.init(),o.resetRootComponentType(e.componentTypes[0]),a.closed||(a.next(),a.complete(),a.unsubscribe())}}var zT=new Ft("",{factory:()=>new Mi}),i1=new Ft("",{providedIn:"root",factory:()=>1});function t6(){return Kf(2,[{provide:i1,useValue:0},{provide:Ny,multi:!0,deps:[In],useFactory:t=>{let e=t.get(CE,Promise.resolve());return()=>e.then(()=>new Promise(o=>{let a=t.get(Po),s=t.get(zT);RT(a,()=>{o(!0)}),t.get(t1).afterPreactivation=()=>(o(!0),s.closed?ti(void 0):s),a.initialNavigation()}))}}])}function i6(){return Kf(3,[{provide:Ny,multi:!0,useFactory:()=>{let t=Oe(Po);return()=>{t.setUpLocationChangeListener()}}},{provide:i1,useValue:2}])}var BT=new Ft("");function r6(r){return Kf(0,[{provide:BT,useExisting:J8},{provide:b0,useExisting:r}])}function n6(){return Kf(8,[YS,{provide:y0,useExisting:YS}])}function o6(r){let t=[{provide:AT,useValue:q8},{provide:kT,useValue:ft({skipNextTransition:!!r?.skipInitialTransition},r)}];return Kf(9,t)}var eT=new Ft("ROUTER_FORROOT_GUARD"),s6=[Ju,{provide:$f,useClass:Ph},Po,Wf,{provide:rd,useFactory:NT,deps:[Po]},Qv,[]],tu=(()=>{class r{constructor(e){}static forRoot(e,o){return{ngModule:r,providers:[s6,[],{provide:qf,multi:!0,useValue:e},{provide:eT,useFactory:u6,deps:[[Po,new Wu,new ky]]},o?.errorHandler?{provide:PT,useValue:o.errorHandler}:[],{provide:Yf,useValue:o||{}},o?.useHash?l6():c6(),a6(),o?.preloadingStrategy?r6(o.preloadingStrategy).\u0275providers:[],o?.initialNavigation?d6(o):[],o?.bindToComponentInputs?n6().\u0275providers:[],o?.enableViewTransitions?o6().\u0275providers:[],h6()]}}static forChild(e){return{ngModule:r,providers:[{provide:qf,multi:!0,useValue:e}]}}static \u0275fac=function(o){return new(o||r)(li(eT,8))};static \u0275mod=Pi({type:r});static \u0275inj=ki({})}return r})();function a6(){return{provide:OT,useFactory:()=>{let r=Oe(jg),t=Oe(Xi),e=Oe(Yf),o=Oe(t1),a=Oe($f);return e.scrollOffset&&r.setOffset(e.scrollOffset),new e6(a,o,r,t,e)}}}function l6(){return{provide:qy,useClass:TE}}function c6(){return{provide:qy,useClass:SE}}function u6(r){return"guarded"}function d6(r){return[r.initialNavigation==="disabled"?i6().\u0275providers:[],r.initialNavigation==="enabledBlocking"?t6().\u0275providers:[]]}var tT=new Ft("");function h6(){return[{provide:tT,useFactory:FT},{provide:Pg,multi:!0,useExisting:tT}]}function p6(r){throw new Error(`[unenv] ${r} is not implemented yet!`)}function f6(r){return Object.assign(()=>{throw p6(r)},{__unenv__:!0})}var m6=f6("fs.readFile");function g6(r){let t=function(...e){let o=e.pop();r().catch(a=>o(a)).then(a=>o(void 0,a))};return t.__promisify__=r,t.native=t,t}var _6=g6(m6),b6=/^[A-Za-z]:\//;function nu(r=""){return r&&r.replace(/\\/g,"/").replace(b6,t=>t.toUpperCase())}var y6=/^[/\\]{2}/,v6=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,UM=/^[A-Za-z]:$/,VT=/^\/([A-Za-z]:)?$/,jM="/",qM=":",Q1=function(r){if(r.length===0)return".";r=nu(r);let t=r.match(y6),e=sd(r),o=r[r.length-1]==="/";return r=F0(r,!e),r.length===0?e?"/":o?"./":".":(o&&(r+="/"),UM.test(r)&&(r+="/"),t?e?`//${r}`:`//./${r}`:e&&!sd(r)?`/${r}`:r)},HM=function(...r){if(r.length===0)return".";let t;for(let e of r)e&&e.length>0&&(t===void 0?t=e:t+=`/${e}`);return t===void 0?".":Q1(t.replace(/\/\/+/g,"/"))};function x6(){return typeof process<"u"&&typeof process.cwd=="function"?process.cwd().replace(/\\/g,"/"):"/"}var im=function(...r){r=r.map(o=>nu(o));let t="",e=!1;for(let o=r.length-1;o>=-1&&!e;o--){let a=o>=0?r[o]:x6();!a||a.length===0||(t=`${a}/${t}`,e=sd(a))}return t=F0(t,!e),e&&!sd(t)?`/${t}`:t.length>0?t:"."};function F0(r,t){let e="",o=0,a=-1,s=0,_=null;for(let w=0;w<=r.length;++w){if(w<r.length)_=r[w];else{if(_==="/")break;_="/"}if(_==="/"){if(!(a===w-1||s===1))if(s===2){if(e.length<2||o!==2||e[e.length-1]!=="."||e[e.length-2]!=="."){if(e.length>2){let E=e.lastIndexOf("/");E===-1?(e="",o=0):(e=e.slice(0,E),o=e.length-1-e.lastIndexOf("/")),a=w,s=0;continue}else if(e.length>0){e="",o=0,a=w,s=0;continue}}t&&(e+=e.length>0?"/..":"..",o=2)}else e.length>0?e+=`/${r.slice(a+1,w)}`:e=r.slice(a+1,w),o=w-a-1;a=w,s=0}else _==="."&&s!==-1?++s:s=-1}return e}var sd=function(r){return v6.test(r)},$M=function(r){return nu(r)},w6=/.(\.[^./]+)$/,J1=function(r){let t=w6.exec(nu(r));return t&&t[1]||""},GM=function(r,t){let e=im(r).replace(VT,"$1").split("/"),o=im(t).replace(VT,"$1").split("/");if(o[0][1]===":"&&e[0][1]===":"&&e[0]!==o[0])return o.join("/");let a=[...e];for(let s of a){if(o[0]!==s)break;e.shift(),o.shift()}return[...e.map(()=>".."),...o].join("/")},ex=function(r){let t=nu(r).replace(/\/$/,"").split("/").slice(0,-1);return t.length===1&&UM.test(t[0])&&(t[0]+="/"),t.join("/")||(sd(r)?"/":".")},WM=function(r){let t=[r.root,r.dir,r.base??r.name+r.ext].filter(Boolean);return nu(r.root?im(...t):t.join("/"))},tx=function(r,t){let e=nu(r).split("/").pop();return t&&e.endsWith(t)?e.slice(0,-t.length):e},ZM=function(r){let t=nu(r).split("/").shift()||"/",e=tx(r),o=J1(e);return{root:t,dir:ex(r),base:e,ext:o,name:e.slice(0,e.length-o.length)}},C6={__proto__:null,basename:tx,delimiter:qM,dirname:ex,extname:J1,format:WM,isAbsolute:sd,join:HM,normalize:Q1,normalizeString:F0,parse:ZM,relative:GM,resolve:im,sep:jM,toNamespacedPath:$M},E6=Object.freeze({__proto__:null,basename:tx,default:C6,delimiter:qM,dirname:ex,extname:J1,format:WM,isAbsolute:sd,join:HM,normalize:Q1,normalizeString:F0,parse:ZM,relative:GM,resolve:im,sep:jM,toNamespacedPath:$M}),zh=si(ft({},E6),{platform:"posix",posix:void 0,win32:void 0});zh.posix=zh;zh.win32=zh;function z0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function S6(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var a=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:function(){return r[o]}})}),e}var x0={exports:{}},UT;function XM(){if(UT)return x0.exports;UT=1;var r=String,t=function(){return{isColorSupported:!1,reset:r,bold:r,dim:r,italic:r,underline:r,inverse:r,hidden:r,strikethrough:r,black:r,red:r,green:r,yellow:r,blue:r,magenta:r,cyan:r,white:r,gray:r,bgBlack:r,bgRed:r,bgGreen:r,bgYellow:r,bgBlue:r,bgMagenta:r,bgCyan:r,bgWhite:r,blackBright:r,redBright:r,greenBright:r,yellowBright:r,blueBright:r,magentaBright:r,cyanBright:r,whiteBright:r,bgBlackBright:r,bgRedBright:r,bgGreenBright:r,bgYellowBright:r,bgBlueBright:r,bgMagentaBright:r,bgCyanBright:r,bgWhiteBright:r}};return x0.exports=t(),x0.exports.createColors=t,x0.exports}var T6={},M6=Object.freeze({__proto__:null,default:T6}),Za=S6(M6),r1,jT;function ix(){if(jT)return r1;jT=1;let r=XM(),t=Za;class e extends Error{constructor(a,s,_,w,E,M){super(a),this.name="CssSyntaxError",this.reason=a,E&&(this.file=E),w&&(this.source=w),M&&(this.plugin=M),typeof s<"u"&&typeof _<"u"&&(typeof s=="number"?(this.line=s,this.column=_):(this.line=s.line,this.column=s.column,this.endLine=_.line,this.endColumn=_.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(a){if(!this.source)return"";let s=this.source;a==null&&(a=r.isColorSupported);let _=$=>$,w=$=>$,E=$=>$;if(a){let{bold:$,gray:W,red:G}=r.createColors(!0);w=pe=>$(G(pe)),_=pe=>W(pe),t&&(E=pe=>t(pe))}let M=s.split(/\r?\n/),I=Math.max(this.line-3,0),A=Math.min(this.line+2,M.length),R=String(A).length;return M.slice(I,A).map(($,W)=>{let G=I+1+W,pe=" "+(" "+G).slice(-R)+" | ";if(G===this.line){if($.length>160){let ne=20,re=Math.max(0,this.column-ne),ue=Math.max(this.column+ne,this.endColumn+ne),oe=$.slice(re,ue),Ve=_(pe.replace(/\d/g," "))+$.slice(0,Math.min(this.column-1,ne-1)).replace(/[^\t]/g," ");return w(">")+_(pe)+E(oe)+`
 `+Ve+w("^")}let le=_(pe.replace(/\d/g," "))+$.slice(0,this.column-1).replace(/[^\t]/g," ");return w(">")+_(pe)+E($)+`
 `+le+w("^")}return" "+_(pe)+E($)}).join(`
`)}toString(){let a=this.showSourceCode();return a&&(a=`

`+a+`
`),this.name+": "+this.message+a}}return r1=e,e.default=e,r1}var n1,qT;function YM(){if(qT)return n1;qT=1;let r={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function t(o){return o[0].toUpperCase()+o.slice(1)}class e{constructor(a){this.builder=a}atrule(a,s){let _="@"+a.name,w=a.params?this.rawValue(a,"params"):"";if(typeof a.raws.afterName<"u"?_+=a.raws.afterName:w&&(_+=" "),a.nodes)this.block(a,_+w);else{let E=(a.raws.between||"")+(s?";":"");this.builder(_+w+E,a)}}beforeAfter(a,s){let _;a.type==="decl"?_=this.raw(a,null,"beforeDecl"):a.type==="comment"?_=this.raw(a,null,"beforeComment"):s==="before"?_=this.raw(a,null,"beforeRule"):_=this.raw(a,null,"beforeClose");let w=a.parent,E=0;for(;w&&w.type!=="root";)E+=1,w=w.parent;if(_.includes(`
`)){let M=this.raw(a,null,"indent");if(M.length)for(let I=0;I<E;I++)_+=M}return _}block(a,s){let _=this.raw(a,"between","beforeOpen");this.builder(s+_+"{",a,"start");let w;a.nodes&&a.nodes.length?(this.body(a),w=this.raw(a,"after")):w=this.raw(a,"after","emptyBody"),w&&this.builder(w),this.builder("}",a,"end")}body(a){let s=a.nodes.length-1;for(;s>0&&a.nodes[s].type==="comment";)s-=1;let _=this.raw(a,"semicolon");for(let w=0;w<a.nodes.length;w++){let E=a.nodes[w],M=this.raw(E,"before");M&&this.builder(M),this.stringify(E,s!==w||_)}}comment(a){let s=this.raw(a,"left","commentLeft"),_=this.raw(a,"right","commentRight");this.builder("/*"+s+a.text+_+"*/",a)}decl(a,s){let _=this.raw(a,"between","colon"),w=a.prop+_+this.rawValue(a,"value");a.important&&(w+=a.raws.important||" !important"),s&&(w+=";"),this.builder(w,a)}document(a){this.body(a)}raw(a,s,_){let w;if(_||(_=s),s&&(w=a.raws[s],typeof w<"u"))return w;let E=a.parent;if(_==="before"&&(!E||E.type==="root"&&E.first===a||E&&E.type==="document"))return"";if(!E)return r[_];let M=a.root();if(M.rawCache||(M.rawCache={}),typeof M.rawCache[_]<"u")return M.rawCache[_];if(_==="before"||_==="after")return this.beforeAfter(a,_);{let I="raw"+t(_);this[I]?w=this[I](M,a):M.walk(A=>{if(w=A.raws[s],typeof w<"u")return!1})}return typeof w>"u"&&(w=r[_]),M.rawCache[_]=w,w}rawBeforeClose(a){let s;return a.walk(_=>{if(_.nodes&&_.nodes.length>0&&typeof _.raws.after<"u")return s=_.raws.after,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),s&&(s=s.replace(/\S/g,"")),s}rawBeforeComment(a,s){let _;return a.walkComments(w=>{if(typeof w.raws.before<"u")return _=w.raws.before,_.includes(`
`)&&(_=_.replace(/[^\n]+$/,"")),!1}),typeof _>"u"?_=this.raw(s,null,"beforeDecl"):_&&(_=_.replace(/\S/g,"")),_}rawBeforeDecl(a,s){let _;return a.walkDecls(w=>{if(typeof w.raws.before<"u")return _=w.raws.before,_.includes(`
`)&&(_=_.replace(/[^\n]+$/,"")),!1}),typeof _>"u"?_=this.raw(s,null,"beforeRule"):_&&(_=_.replace(/\S/g,"")),_}rawBeforeOpen(a){let s;return a.walk(_=>{if(_.type!=="decl"&&(s=_.raws.between,typeof s<"u"))return!1}),s}rawBeforeRule(a){let s;return a.walk(_=>{if(_.nodes&&(_.parent!==a||a.first!==_)&&typeof _.raws.before<"u")return s=_.raws.before,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),s&&(s=s.replace(/\S/g,"")),s}rawColon(a){let s;return a.walkDecls(_=>{if(typeof _.raws.between<"u")return s=_.raws.between.replace(/[^\s:]/g,""),!1}),s}rawEmptyBody(a){let s;return a.walk(_=>{if(_.nodes&&_.nodes.length===0&&(s=_.raws.after,typeof s<"u"))return!1}),s}rawIndent(a){if(a.raws.indent)return a.raws.indent;let s;return a.walk(_=>{let w=_.parent;if(w&&w!==a&&w.parent&&w.parent===a&&typeof _.raws.before<"u"){let E=_.raws.before.split(`
`);return s=E[E.length-1],s=s.replace(/\S/g,""),!1}}),s}rawSemicolon(a){let s;return a.walk(_=>{if(_.nodes&&_.nodes.length&&_.last.type==="decl"&&(s=_.raws.semicolon,typeof s<"u"))return!1}),s}rawValue(a,s){let _=a[s],w=a.raws[s];return w&&w.value===_?w.raw:_}root(a){this.body(a),a.raws.after&&this.builder(a.raws.after)}rule(a){this.block(a,this.rawValue(a,"selector")),a.raws.ownSemicolon&&this.builder(a.raws.ownSemicolon,a,"end")}stringify(a,s){if(!this[a.type])throw new Error("Unknown AST node type "+a.type+". Maybe you need to change PostCSS stringifier.");this[a.type](a,s)}}return n1=e,e.default=e,n1}var o1,HT;function B0(){if(HT)return o1;HT=1;let r=YM();function t(e,o){new r(o).stringify(e)}return o1=t,t.default=t,o1}var w0={},$T;function rx(){return $T||($T=1,w0.isClean=Symbol("isClean"),w0.my=Symbol("my")),w0}var s1,GT;function V0(){if(GT)return s1;GT=1;let r=ix(),t=YM(),e=B0(),{isClean:o,my:a}=rx();function s(E,M){let I=new E.constructor;for(let A in E){if(!Object.prototype.hasOwnProperty.call(E,A)||A==="proxyCache")continue;let R=E[A],$=typeof R;A==="parent"&&$==="object"?M&&(I[A]=M):A==="source"?I[A]=R:Array.isArray(R)?I[A]=R.map(W=>s(W,I)):($==="object"&&R!==null&&(R=s(R)),I[A]=R)}return I}function _(E,M){if(M&&typeof M.offset<"u")return M.offset;let I=1,A=1,R=0;for(let $=0;$<E.length;$++){if(A===M.line&&I===M.column){R=$;break}E[$]===`
`?(I=1,A+=1):I+=1}return R}class w{constructor(M={}){this.raws={},this[o]=!1,this[a]=!0;for(let I in M)if(I==="nodes"){this.nodes=[];for(let A of M[I])typeof A.clone=="function"?this.append(A.clone()):this.append(A)}else this[I]=M[I]}addToError(M){if(M.postcssNode=this,M.stack&&this.source&&/\n\s{4}at /.test(M.stack)){let I=this.source;M.stack=M.stack.replace(/\n\s{4}at /,`$&${I.input.from}:${I.start.line}:${I.start.column}$&`)}return M}after(M){return this.parent.insertAfter(this,M),this}assign(M={}){for(let I in M)this[I]=M[I];return this}before(M){return this.parent.insertBefore(this,M),this}cleanRaws(M){delete this.raws.before,delete this.raws.after,M||delete this.raws.between}clone(M={}){let I=s(this);for(let A in M)I[A]=M[A];return I}cloneAfter(M={}){let I=this.clone(M);return this.parent.insertAfter(this,I),I}cloneBefore(M={}){let I=this.clone(M);return this.parent.insertBefore(this,I),I}error(M,I={}){if(this.source){let{end:A,start:R}=this.rangeBy(I);return this.source.input.error(M,{column:R.column,line:R.line},{column:A.column,line:A.line},I)}return new r(M)}getProxyProcessor(){return{get(M,I){return I==="proxyOf"?M:I==="root"?()=>M.root().toProxy():M[I]},set(M,I,A){return M[I]===A||(M[I]=A,(I==="prop"||I==="value"||I==="name"||I==="params"||I==="important"||I==="text")&&M.markDirty()),!0}}}markClean(){this[o]=!0}markDirty(){if(this[o]){this[o]=!1;let M=this;for(;M=M.parent;)M[o]=!1}}next(){if(!this.parent)return;let M=this.parent.index(this);return this.parent.nodes[M+1]}positionBy(M){let I=this.source.start;if(M.index)I=this.positionInside(M.index);else if(M.word){let R=this.source.input.css.slice(_(this.source.input.css,this.source.start),_(this.source.input.css,this.source.end)).indexOf(M.word);R!==-1&&(I=this.positionInside(R))}return I}positionInside(M){let I=this.source.start.column,A=this.source.start.line,R=_(this.source.input.css,this.source.start),$=R+M;for(let W=R;W<$;W++)this.source.input.css[W]===`
`?(I=1,A+=1):I+=1;return{column:I,line:A}}prev(){if(!this.parent)return;let M=this.parent.index(this);return this.parent.nodes[M-1]}rangeBy(M){let I={column:this.source.start.column,line:this.source.start.line},A=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:I.column+1,line:I.line};if(M.word){let $=this.source.input.css.slice(_(this.source.input.css,this.source.start),_(this.source.input.css,this.source.end)).indexOf(M.word);$!==-1&&(I=this.positionInside($),A=this.positionInside($+M.word.length))}else M.start?I={column:M.start.column,line:M.start.line}:M.index&&(I=this.positionInside(M.index)),M.end?A={column:M.end.column,line:M.end.line}:typeof M.endIndex=="number"?A=this.positionInside(M.endIndex):M.index&&(A=this.positionInside(M.index+1));return(A.line<I.line||A.line===I.line&&A.column<=I.column)&&(A={column:I.column+1,line:I.line}),{end:A,start:I}}raw(M,I){return new t().raw(this,M,I)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...M){if(this.parent){let I=this,A=!1;for(let R of M)R===this?A=!0:A?(this.parent.insertAfter(I,R),I=R):this.parent.insertBefore(I,R);A||this.remove()}return this}root(){let M=this;for(;M.parent&&M.parent.type!=="document";)M=M.parent;return M}toJSON(M,I){let A={},R=I==null;I=I||new Map;let $=0;for(let W in this){if(!Object.prototype.hasOwnProperty.call(this,W)||W==="parent"||W==="proxyCache")continue;let G=this[W];if(Array.isArray(G))A[W]=G.map(pe=>typeof pe=="object"&&pe.toJSON?pe.toJSON(null,I):pe);else if(typeof G=="object"&&G.toJSON)A[W]=G.toJSON(null,I);else if(W==="source"){let pe=I.get(G.input);pe==null&&(pe=$,I.set(G.input,$),$++),A[W]={end:G.end,inputId:pe,start:G.start}}else A[W]=G}return R&&(A.inputs=[...I.keys()].map(W=>W.toJSON())),A}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(M=e){M.stringify&&(M=M.stringify);let I="";return M(this,A=>{I+=A}),I}warn(M,I,A){let R={node:this};for(let $ in A)R[$]=A[$];return M.warn(I,R)}get proxyOf(){return this}}return s1=w,w.default=w,s1}var a1,WT;function U0(){if(WT)return a1;WT=1;let r=V0();class t extends r{constructor(o){super(o),this.type="comment"}}return a1=t,t.default=t,a1}var l1,ZT;function j0(){if(ZT)return l1;ZT=1;let r=V0();class t extends r{constructor(o){o&&typeof o.value<"u"&&typeof o.value!="string"&&(o=si(ft({},o),{value:String(o.value)})),super(o),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}}return l1=t,t.default=t,l1}var c1,XT;function ud(){if(XT)return c1;XT=1;let r=U0(),t=j0(),e=V0(),{isClean:o,my:a}=rx(),s,_,w,E;function M(R){return R.map($=>($.nodes&&($.nodes=M($.nodes)),delete $.source,$))}function I(R){if(R[o]=!1,R.proxyOf.nodes)for(let $ of R.proxyOf.nodes)I($)}let A=(()=>{class R extends e{append(...W){for(let G of W){let pe=this.normalize(G,this.last);for(let le of pe)this.proxyOf.nodes.push(le)}return this.markDirty(),this}cleanRaws(W){if(super.cleanRaws(W),this.nodes)for(let G of this.nodes)G.cleanRaws(W)}each(W){if(!this.proxyOf.nodes)return;let G=this.getIterator(),pe,le;for(;this.indexes[G]<this.proxyOf.nodes.length&&(pe=this.indexes[G],le=W(this.proxyOf.nodes[pe],pe),le!==!1);)this.indexes[G]+=1;return delete this.indexes[G],le}every(W){return this.nodes.every(W)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let W=this.lastEach;return this.indexes[W]=0,W}getProxyProcessor(){return{get(W,G){return G==="proxyOf"?W:W[G]?G==="each"||typeof G=="string"&&G.startsWith("walk")?(...pe)=>W[G](...pe.map(le=>typeof le=="function"?(ne,re)=>le(ne.toProxy(),re):le)):G==="every"||G==="some"?pe=>W[G]((le,...ne)=>pe(le.toProxy(),...ne)):G==="root"?()=>W.root().toProxy():G==="nodes"?W.nodes.map(pe=>pe.toProxy()):G==="first"||G==="last"?W[G].toProxy():W[G]:W[G]},set(W,G,pe){return W[G]===pe||(W[G]=pe,(G==="name"||G==="params"||G==="selector")&&W.markDirty()),!0}}}index(W){return typeof W=="number"?W:(W.proxyOf&&(W=W.proxyOf),this.proxyOf.nodes.indexOf(W))}insertAfter(W,G){let pe=this.index(W),le=this.normalize(G,this.proxyOf.nodes[pe]).reverse();pe=this.index(W);for(let re of le)this.proxyOf.nodes.splice(pe+1,0,re);let ne;for(let re in this.indexes)ne=this.indexes[re],pe<ne&&(this.indexes[re]=ne+le.length);return this.markDirty(),this}insertBefore(W,G){let pe=this.index(W),le=pe===0?"prepend":!1,ne=this.normalize(G,this.proxyOf.nodes[pe],le).reverse();pe=this.index(W);for(let ue of ne)this.proxyOf.nodes.splice(pe,0,ue);let re;for(let ue in this.indexes)re=this.indexes[ue],pe<=re&&(this.indexes[ue]=re+ne.length);return this.markDirty(),this}normalize(W,G){if(typeof W=="string")W=M(_(W).nodes);else if(typeof W>"u")W=[];else if(Array.isArray(W)){W=W.slice(0);for(let le of W)le.parent&&le.parent.removeChild(le,"ignore")}else if(W.type==="root"&&this.type!=="document"){W=W.nodes.slice(0);for(let le of W)le.parent&&le.parent.removeChild(le,"ignore")}else if(W.type)W=[W];else if(W.prop){if(typeof W.value>"u")throw new Error("Value field is missed in node creation");typeof W.value!="string"&&(W.value=String(W.value)),W=[new t(W)]}else if(W.selector||W.selectors)W=[new E(W)];else if(W.name)W=[new s(W)];else if(W.text)W=[new r(W)];else throw new Error("Unknown node type in node creation");return W.map(le=>(le[a]||R.rebuild(le),le=le.proxyOf,le.parent&&le.parent.removeChild(le),le[o]&&I(le),le.raws||(le.raws={}),typeof le.raws.before>"u"&&G&&typeof G.raws.before<"u"&&(le.raws.before=G.raws.before.replace(/\S/g,"")),le.parent=this.proxyOf,le))}prepend(...W){W=W.reverse();for(let G of W){let pe=this.normalize(G,this.first,"prepend").reverse();for(let le of pe)this.proxyOf.nodes.unshift(le);for(let le in this.indexes)this.indexes[le]=this.indexes[le]+pe.length}return this.markDirty(),this}push(W){return W.parent=this,this.proxyOf.nodes.push(W),this}removeAll(){for(let W of this.proxyOf.nodes)W.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(W){W=this.index(W),this.proxyOf.nodes[W].parent=void 0,this.proxyOf.nodes.splice(W,1);let G;for(let pe in this.indexes)G=this.indexes[pe],G>=W&&(this.indexes[pe]=G-1);return this.markDirty(),this}replaceValues(W,G,pe){return pe||(pe=G,G={}),this.walkDecls(le=>{G.props&&!G.props.includes(le.prop)||G.fast&&!le.value.includes(G.fast)||(le.value=le.value.replace(W,pe))}),this.markDirty(),this}some(W){return this.nodes.some(W)}walk(W){return this.each((G,pe)=>{let le;try{le=W(G,pe)}catch(ne){throw G.addToError(ne)}return le!==!1&&G.walk&&(le=G.walk(W)),le})}walkAtRules(W,G){return G?W instanceof RegExp?this.walk((pe,le)=>{if(pe.type==="atrule"&&W.test(pe.name))return G(pe,le)}):this.walk((pe,le)=>{if(pe.type==="atrule"&&pe.name===W)return G(pe,le)}):(G=W,this.walk((pe,le)=>{if(pe.type==="atrule")return G(pe,le)}))}walkComments(W){return this.walk((G,pe)=>{if(G.type==="comment")return W(G,pe)})}walkDecls(W,G){return G?W instanceof RegExp?this.walk((pe,le)=>{if(pe.type==="decl"&&W.test(pe.prop))return G(pe,le)}):this.walk((pe,le)=>{if(pe.type==="decl"&&pe.prop===W)return G(pe,le)}):(G=W,this.walk((pe,le)=>{if(pe.type==="decl")return G(pe,le)}))}walkRules(W,G){return G?W instanceof RegExp?this.walk((pe,le)=>{if(pe.type==="rule"&&W.test(pe.selector))return G(pe,le)}):this.walk((pe,le)=>{if(pe.type==="rule"&&pe.selector===W)return G(pe,le)}):(G=W,this.walk((pe,le)=>{if(pe.type==="rule")return G(pe,le)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}return R.registerParse=$=>{_=$},R.registerRule=$=>{E=$},R.registerAtRule=$=>{s=$},R.registerRoot=$=>{w=$},R})();return c1=A,A.default=A,A.rebuild=R=>{R.type==="atrule"?Object.setPrototypeOf(R,s.prototype):R.type==="rule"?Object.setPrototypeOf(R,E.prototype):R.type==="decl"?Object.setPrototypeOf(R,t.prototype):R.type==="comment"?Object.setPrototypeOf(R,r.prototype):R.type==="root"&&Object.setPrototypeOf(R,w.prototype),R[a]=!0,R.nodes&&R.nodes.forEach($=>{A.rebuild($)})},c1}var u1,YT;function nx(){if(YT)return u1;YT=1;let r=ud();class t extends r{constructor(o){super(o),this.type="atrule"}append(...o){return this.proxyOf.nodes||(this.nodes=[]),super.append(...o)}prepend(...o){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...o)}}return u1=t,t.default=t,r.registerAtRule(t),u1}var d1,KT;function ox(){if(KT)return d1;KT=1;let r=ud(),t,e,o=(()=>{class a extends r{constructor(_){super(ft({type:"document"},_)),this.nodes||(this.nodes=[])}toResult(_={}){return new t(new e,this,_).stringify()}}return a.registerLazyResult=s=>{t=s},a.registerProcessor=s=>{e=s},a})();return d1=o,o.default=o,d1}var h1,QT;function I6(){if(QT)return h1;QT=1;let r="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";return h1={nanoid:(o=21)=>{let a="",s=o;for(;s--;)a+=r[Math.random()*64|0];return a},customAlphabet:(o,a=21)=>(s=a)=>{let _="",w=s;for(;w--;)_+=o[Math.random()*o.length|0];return _}},h1}var p1,JT;function KM(){if(JT)return p1;JT=1;let{existsSync:r,readFileSync:t}=Za,{dirname:e,join:o}=Za,{SourceMapConsumer:a,SourceMapGenerator:s}=Za;function _(E){return Buffer?Buffer.from(E,"base64").toString():window.atob(E)}class w{constructor(M,I){if(I.map===!1)return;this.loadAnnotation(M),this.inline=this.startWith(this.annotation,"data:");let A=I.map?I.map.prev:void 0,R=this.loadMap(I.from,A);!this.mapFile&&I.from&&(this.mapFile=I.from),this.mapFile&&(this.root=e(this.mapFile)),R&&(this.text=R)}consumer(){return this.consumerCache||(this.consumerCache=new a(this.text)),this.consumerCache}decodeInline(M){let I=/^data:application\/json;charset=utf-?8;base64,/,A=/^data:application\/json;base64,/,R=/^data:application\/json;charset=utf-?8,/,$=/^data:application\/json,/,W=M.match(R)||M.match($);if(W)return decodeURIComponent(M.substr(W[0].length));let G=M.match(I)||M.match(A);if(G)return _(M.substr(G[0].length));let pe=M.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+pe)}getAnnotationURL(M){return M.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(M){return typeof M!="object"?!1:typeof M.mappings=="string"||typeof M._mappings=="string"||Array.isArray(M.sections)}loadAnnotation(M){let I=M.match(/\/\*\s*# sourceMappingURL=/g);if(!I)return;let A=M.lastIndexOf(I.pop()),R=M.indexOf("*/",A);A>-1&&R>-1&&(this.annotation=this.getAnnotationURL(M.substring(A,R)))}loadFile(M){if(this.root=e(M),r(M))return this.mapFile=M,t(M,"utf-8").toString().trim()}loadMap(M,I){if(I===!1)return!1;if(I){if(typeof I=="string")return I;if(typeof I=="function"){let A=I(M);if(A){let R=this.loadFile(A);if(!R)throw new Error("Unable to load previous source map: "+A.toString());return R}}else{if(I instanceof a)return s.fromSourceMap(I).toString();if(I instanceof s)return I.toString();if(this.isMap(I))return JSON.stringify(I);throw new Error("Unsupported previous source map format: "+I.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let A=this.annotation;return M&&(A=o(e(M),A)),this.loadFile(A)}}}startWith(M,I){return M?M.substr(0,I.length)===I:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}return p1=w,w.default=w,p1}var f1,eM;function q0(){if(eM)return f1;eM=1;let{nanoid:r}=I6(),{isAbsolute:t,resolve:e}=Za,{SourceMapConsumer:o,SourceMapGenerator:a}=Za,{fileURLToPath:s,pathToFileURL:_}=Za,w=ix(),E=KM(),M=Za,I=Symbol("fromOffsetCache"),A=!!(o&&a),R=!!(e&&t);class ${constructor(G,pe={}){if(G===null||typeof G>"u"||typeof G=="object"&&!G.toString)throw new Error(`PostCSS received ${G} instead of CSS string`);if(this.css=G.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,pe.from&&(!R||/^\w+:\/\//.test(pe.from)||t(pe.from)?this.file=pe.from:this.file=e(pe.from)),R&&A){let le=new E(this.css,pe);if(le.text){this.map=le;let ne=le.consumer().file;!this.file&&ne&&(this.file=this.mapResolve(ne))}}this.file||(this.id="<input css "+r(6)+">"),this.map&&(this.map.file=this.from)}error(G,pe,le,ne={}){let re,ue,oe;if(pe&&typeof pe=="object"){let tt=pe,ct=le;if(typeof tt.offset=="number"){let Qe=this.fromOffset(tt.offset);pe=Qe.line,le=Qe.col}else pe=tt.line,le=tt.column;if(typeof ct.offset=="number"){let Qe=this.fromOffset(ct.offset);ue=Qe.line,re=Qe.col}else ue=ct.line,re=ct.column}else if(!le){let tt=this.fromOffset(pe);pe=tt.line,le=tt.col}let Ve=this.origin(pe,le,ue,re);return Ve?oe=new w(G,Ve.endLine===void 0?Ve.line:{column:Ve.column,line:Ve.line},Ve.endLine===void 0?Ve.column:{column:Ve.endColumn,line:Ve.endLine},Ve.source,Ve.file,ne.plugin):oe=new w(G,ue===void 0?pe:{column:le,line:pe},ue===void 0?le:{column:re,line:ue},this.css,this.file,ne.plugin),oe.input={column:le,endColumn:re,endLine:ue,line:pe,source:this.css},this.file&&(_&&(oe.input.url=_(this.file).toString()),oe.input.file=this.file),oe}fromOffset(G){let pe,le;if(this[I])le=this[I];else{let re=this.css.split(`
`);le=new Array(re.length);let ue=0;for(let oe=0,Ve=re.length;oe<Ve;oe++)le[oe]=ue,ue+=re[oe].length+1;this[I]=le}pe=le[le.length-1];let ne=0;if(G>=pe)ne=le.length-1;else{let re=le.length-2,ue;for(;ne<re;)if(ue=ne+(re-ne>>1),G<le[ue])re=ue-1;else if(G>=le[ue+1])ne=ue+1;else{ne=ue;break}}return{col:G-le[ne]+1,line:ne+1}}mapResolve(G){return/^\w+:\/\//.test(G)?G:e(this.map.consumer().sourceRoot||this.map.root||".",G)}origin(G,pe,le,ne){if(!this.map)return!1;let re=this.map.consumer(),ue=re.originalPositionFor({column:pe,line:G});if(!ue.source)return!1;let oe;typeof le=="number"&&(oe=re.originalPositionFor({column:ne,line:le}));let Ve;t(ue.source)?Ve=_(ue.source):Ve=new URL(ue.source,this.map.consumer().sourceRoot||_(this.map.mapFile));let tt={column:ue.column,endColumn:oe&&oe.column,endLine:oe&&oe.line,line:ue.line,url:Ve.toString()};if(Ve.protocol==="file:")if(s)tt.file=s(Ve);else throw new Error("file: protocol is not available in this PostCSS build");let ct=re.sourceContentFor(ue.source);return ct&&(tt.source=ct),tt}toJSON(){let G={};for(let pe of["hasBOM","css","file","id"])this[pe]!=null&&(G[pe]=this[pe]);return this.map&&(G.map=ft({},this.map),G.map.consumerCache&&(G.map.consumerCache=void 0)),G}get from(){return this.file||this.id}}return f1=$,$.default=$,M&&M.registerInput&&M.registerInput($),f1}var m1,tM;function sm(){if(tM)return m1;tM=1;let r=ud(),t,e,o=(()=>{class a extends r{constructor(_){super(_),this.type="root",this.nodes||(this.nodes=[])}normalize(_,w,E){let M=super.normalize(_);if(w){if(E==="prepend")this.nodes.length>1?w.raws.before=this.nodes[1].raws.before:delete w.raws.before;else if(this.first!==w)for(let I of M)I.raws.before=w.raws.before}return M}removeChild(_,w){let E=this.index(_);return!w&&E===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[E].raws.before),super.removeChild(_)}toResult(_={}){return new t(new e,this,_).stringify()}}return a.registerLazyResult=s=>{t=s},a.registerProcessor=s=>{e=s},a})();return m1=o,o.default=o,r.registerRoot(o),m1}var g1,iM;function QM(){if(iM)return g1;iM=1;let r={comma(t){return r.split(t,[","],!0)},space(t){let e=[" ",`
`,"	"];return r.split(t,e)},split(t,e,o){let a=[],s="",_=!1,w=0,E=!1,M="",I=!1;for(let A of t)I?I=!1:A==="\\"?I=!0:E?A===M&&(E=!1):A==='"'||A==="'"?(E=!0,M=A):A==="("?w+=1:A===")"?w>0&&(w-=1):w===0&&e.includes(A)&&(_=!0),_?(s!==""&&a.push(s.trim()),s="",_=!1):s+=A;return(o||s!=="")&&a.push(s.trim()),a}};return g1=r,r.default=r,g1}var _1,rM;function sx(){if(rM)return _1;rM=1;let r=ud(),t=QM();class e extends r{constructor(a){super(a),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return t.comma(this.selector)}set selectors(a){let s=this.selector?this.selector.match(/,\s*/):null,_=s?s[0]:","+this.raw("between","beforeOpen");this.selector=a.join(_)}}return _1=e,e.default=e,r.registerRule(e),_1}var b1,nM;function A6(){if(nM)return b1;nM=1;let r=nx(),t=U0(),e=j0(),o=q0(),a=KM(),s=sm(),_=sx();function w(E,M){if(Array.isArray(E))return E.map(W=>w(W));let R=E,{inputs:I}=R,A=Hl(R,["inputs"]);if(I){M=[];for(let W of I){let G=si(ft({},W),{__proto__:o.prototype});G.map&&(G.map=si(ft({},G.map),{__proto__:a.prototype})),M.push(G)}}if(A.nodes&&(A.nodes=E.nodes.map(W=>w(W,M))),A.source){let $=A.source,{inputId:W}=$,G=Hl($,["inputId"]);A.source=G,W!=null&&(A.source.input=M[W])}if(A.type==="root")return new s(A);if(A.type==="decl")return new e(A);if(A.type==="rule")return new _(A);if(A.type==="comment")return new t(A);if(A.type==="atrule")return new r(A);throw new Error("Unknown node type: "+E.type)}return b1=w,w.default=w,b1}var y1,oM;function JM(){if(oM)return y1;oM=1;let{dirname:r,relative:t,resolve:e,sep:o}=Za,{SourceMapConsumer:a,SourceMapGenerator:s}=Za,{pathToFileURL:_}=Za,w=q0(),E=!!(a&&s),M=!!(r&&e&&t&&o);class I{constructor(R,$,W,G){this.stringify=R,this.mapOpts=W.map||{},this.root=$,this.opts=W,this.css=G,this.originalCSS=G,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let R;this.isInline()?R="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?R=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?R=this.mapOpts.annotation(this.opts.to,this.root):R=this.outputFile()+".map";let $=`
`;this.css.includes(`\r
`)&&($=`\r
`),this.css+=$+"/*# sourceMappingURL="+R+" */"}applyPrevMaps(){for(let R of this.previous()){let $=this.toUrl(this.path(R.file)),W=R.root||r(R.file),G;this.mapOpts.sourcesContent===!1?(G=new a(R.text),G.sourcesContent&&(G.sourcesContent=null)):G=R.consumer(),this.map.applySourceMap(G,$,this.toUrl(this.path(W)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let R;for(let $=this.root.nodes.length-1;$>=0;$--)R=this.root.nodes[$],R.type==="comment"&&R.text.startsWith("# sourceMappingURL=")&&this.root.removeChild($)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),M&&E&&this.isMap())return this.generateMap();{let R="";return this.stringify(this.root,$=>{R+=$}),[R]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let R=this.previous()[0].consumer();R.file=this.outputFile(),this.map=s.fromSourceMap(R,{ignoreInvalidMapping:!0})}else this.map=new s({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new s({file:this.outputFile(),ignoreInvalidMapping:!0});let R=1,$=1,W="<no source>",G={generated:{column:0,line:0},original:{column:0,line:0},source:""},pe,le;this.stringify(this.root,(ne,re,ue)=>{if(this.css+=ne,re&&ue!=="end"&&(G.generated.line=R,G.generated.column=$-1,re.source&&re.source.start?(G.source=this.sourcePath(re),G.original.line=re.source.start.line,G.original.column=re.source.start.column-1,this.map.addMapping(G)):(G.source=W,G.original.line=1,G.original.column=0,this.map.addMapping(G))),le=ne.match(/\n/g),le?(R+=le.length,pe=ne.lastIndexOf(`
`),$=ne.length-pe):$+=ne.length,re&&ue!=="start"){let oe=re.parent||{raws:{}};(!(re.type==="decl"||re.type==="atrule"&&!re.nodes)||re!==oe.last||oe.raws.semicolon)&&(re.source&&re.source.end?(G.source=this.sourcePath(re),G.original.line=re.source.end.line,G.original.column=re.source.end.column-1,G.generated.line=R,G.generated.column=$-2,this.map.addMapping(G)):(G.source=W,G.original.line=1,G.original.column=0,G.generated.line=R,G.generated.column=$-1,this.map.addMapping(G)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(R=>R.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let R=this.mapOpts.annotation;return typeof R<"u"&&R!==!0?!1:this.previous().length?this.previous().some($=>$.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(R=>R.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(R){if(this.mapOpts.absolute||R.charCodeAt(0)===60||/^\w+:\/\//.test(R))return R;let $=this.memoizedPaths.get(R);if($)return $;let W=this.opts.to?r(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(W=r(e(W,this.mapOpts.annotation)));let G=t(W,R);return this.memoizedPaths.set(R,G),G}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(R=>{if(R.source&&R.source.input.map){let $=R.source.input.map;this.previousMaps.includes($)||this.previousMaps.push($)}});else{let R=new w(this.originalCSS,this.opts);R.map&&this.previousMaps.push(R.map)}return this.previousMaps}setSourcesContent(){let R={};if(this.root)this.root.walk($=>{if($.source){let W=$.source.input.from;if(W&&!R[W]){R[W]=!0;let G=this.usesFileUrls?this.toFileUrl(W):this.toUrl(this.path(W));this.map.setSourceContent(G,$.source.input.css)}}});else if(this.css){let $=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent($,this.css)}}sourcePath(R){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(R.source.input.from):this.toUrl(this.path(R.source.input.from))}toBase64(R){return Buffer?Buffer.from(R).toString("base64"):window.btoa(unescape(encodeURIComponent(R)))}toFileUrl(R){let $=this.memoizedFileURLs.get(R);if($)return $;if(_){let W=_(R).toString();return this.memoizedFileURLs.set(R,W),W}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(R){let $=this.memoizedURLs.get(R);if($)return $;o==="\\"&&(R=R.replace(/\\/g,"/"));let W=encodeURI(R).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(R,W),W}}return y1=I,y1}var v1,sM;function k6(){if(sM)return v1;sM=1;let r=39,t=34,e=92,o=47,a=10,s=32,_=12,w=9,E=13,M=91,I=93,A=40,R=41,$=123,W=125,G=59,pe=42,le=58,ne=64,re=/[\t\n\f\r "#'()/;[\\\]{}]/g,ue=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,oe=/.[\r\n"'(/\\]/,Ve=/[\da-f]/i;return v1=function(ct,Qe={}){let ve=ct.css.valueOf(),Ge=Qe.ignoreErrors,bt,ae,ee,B,fe,Ue,ot,Pt,Bt,Di,Ie=ve.length,Le=0,kt=[],ai=[];function Ur(){return Le}function Ro(Ar){throw ct.error("Unclosed "+Ar,Le)}function ba(){return ai.length===0&&Le>=Ie}function Pn(Ar){if(ai.length)return ai.pop();if(Le>=Ie)return;let Ki=Ar?Ar.ignoreUnclosed:!1;switch(bt=ve.charCodeAt(Le),bt){case a:case s:case w:case E:case _:{B=Le;do B+=1,bt=ve.charCodeAt(B);while(bt===s||bt===a||bt===w||bt===E||bt===_);Ue=["space",ve.slice(Le,B)],Le=B-1;break}case M:case I:case $:case W:case le:case G:case R:{let Jn=String.fromCharCode(bt);Ue=[Jn,Jn,Le];break}case A:{if(Di=kt.length?kt.pop()[1]:"",Bt=ve.charCodeAt(Le+1),Di==="url"&&Bt!==r&&Bt!==t&&Bt!==s&&Bt!==a&&Bt!==w&&Bt!==_&&Bt!==E){B=Le;do{if(ot=!1,B=ve.indexOf(")",B+1),B===-1)if(Ge||Ki){B=Le;break}else Ro("bracket");for(Pt=B;ve.charCodeAt(Pt-1)===e;)Pt-=1,ot=!ot}while(ot);Ue=["brackets",ve.slice(Le,B+1),Le,B],Le=B}else B=ve.indexOf(")",Le+1),ae=ve.slice(Le,B+1),B===-1||oe.test(ae)?Ue=["(","(",Le]:(Ue=["brackets",ae,Le,B],Le=B);break}case r:case t:{fe=bt===r?"'":'"',B=Le;do{if(ot=!1,B=ve.indexOf(fe,B+1),B===-1)if(Ge||Ki){B=Le+1;break}else Ro("string");for(Pt=B;ve.charCodeAt(Pt-1)===e;)Pt-=1,ot=!ot}while(ot);Ue=["string",ve.slice(Le,B+1),Le,B],Le=B;break}case ne:{re.lastIndex=Le+1,re.test(ve),re.lastIndex===0?B=ve.length-1:B=re.lastIndex-2,Ue=["at-word",ve.slice(Le,B+1),Le,B],Le=B;break}case e:{for(B=Le,ee=!0;ve.charCodeAt(B+1)===e;)B+=1,ee=!ee;if(bt=ve.charCodeAt(B+1),ee&&bt!==o&&bt!==s&&bt!==a&&bt!==w&&bt!==E&&bt!==_&&(B+=1,Ve.test(ve.charAt(B)))){for(;Ve.test(ve.charAt(B+1));)B+=1;ve.charCodeAt(B+1)===s&&(B+=1)}Ue=["word",ve.slice(Le,B+1),Le,B],Le=B;break}default:{bt===o&&ve.charCodeAt(Le+1)===pe?(B=ve.indexOf("*/",Le+2)+1,B===0&&(Ge||Ki?B=ve.length:Ro("comment")),Ue=["comment",ve.slice(Le,B+1),Le,B],Le=B):(ue.lastIndex=Le+1,ue.test(ve),ue.lastIndex===0?B=ve.length-1:B=ue.lastIndex-2,Ue=["word",ve.slice(Le,B+1),Le,B],kt.push(Ue),Le=B);break}}return Le++,Ue}function Dn(Ar){ai.push(Ar)}return{back:Dn,endOfFile:ba,nextToken:Pn,position:Ur}},v1}var x1,aM;function P6(){if(aM)return x1;aM=1;let r=nx(),t=U0(),e=j0(),o=sm(),a=sx(),s=k6(),_={empty:!0,space:!0};function w(M){for(let I=M.length-1;I>=0;I--){let A=M[I],R=A[3]||A[2];if(R)return R}}class E{constructor(I){this.input=I,this.root=new o,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:I,start:{column:1,line:1,offset:0}}}atrule(I){let A=new r;A.name=I[1].slice(1),A.name===""&&this.unnamedAtrule(A,I),this.init(A,I[2]);let R,$,W,G=!1,pe=!1,le=[],ne=[];for(;!this.tokenizer.endOfFile();){if(I=this.tokenizer.nextToken(),R=I[0],R==="("||R==="["?ne.push(R==="("?")":"]"):R==="{"&&ne.length>0?ne.push("}"):R===ne[ne.length-1]&&ne.pop(),ne.length===0)if(R===";"){A.source.end=this.getPosition(I[2]),A.source.end.offset++,this.semicolon=!0;break}else if(R==="{"){pe=!0;break}else if(R==="}"){if(le.length>0){for(W=le.length-1,$=le[W];$&&$[0]==="space";)$=le[--W];$&&(A.source.end=this.getPosition($[3]||$[2]),A.source.end.offset++)}this.end(I);break}else le.push(I);else le.push(I);if(this.tokenizer.endOfFile()){G=!0;break}}A.raws.between=this.spacesAndCommentsFromEnd(le),le.length?(A.raws.afterName=this.spacesAndCommentsFromStart(le),this.raw(A,"params",le),G&&(I=le[le.length-1],A.source.end=this.getPosition(I[3]||I[2]),A.source.end.offset++,this.spaces=A.raws.between,A.raws.between="")):(A.raws.afterName="",A.params=""),pe&&(A.nodes=[],this.current=A)}checkMissedSemicolon(I){let A=this.colon(I);if(A===!1)return;let R=0,$;for(let W=A-1;W>=0&&($=I[W],!($[0]!=="space"&&(R+=1,R===2)));W--);throw this.input.error("Missed semicolon",$[0]==="word"?$[3]+1:$[2])}colon(I){let A=0,R,$,W;for(let[G,pe]of I.entries()){if($=pe,W=$[0],W==="("&&(A+=1),W===")"&&(A-=1),A===0&&W===":")if(!R)this.doubleColon($);else{if(R[0]==="word"&&R[1]==="progid")continue;return G}R=$}return!1}comment(I){let A=new t;this.init(A,I[2]),A.source.end=this.getPosition(I[3]||I[2]),A.source.end.offset++;let R=I[1].slice(2,-2);if(/^\s*$/.test(R))A.text="",A.raws.left=R,A.raws.right="";else{let $=R.match(/^(\s*)([^]*\S)(\s*)$/);A.text=$[2],A.raws.left=$[1],A.raws.right=$[3]}}createTokenizer(){this.tokenizer=s(this.input)}decl(I,A){let R=new e;this.init(R,I[0][2]);let $=I[I.length-1];for($[0]===";"&&(this.semicolon=!0,I.pop()),R.source.end=this.getPosition($[3]||$[2]||w(I)),R.source.end.offset++;I[0][0]!=="word";)I.length===1&&this.unknownWord(I),R.raws.before+=I.shift()[1];for(R.source.start=this.getPosition(I[0][2]),R.prop="";I.length;){let ne=I[0][0];if(ne===":"||ne==="space"||ne==="comment")break;R.prop+=I.shift()[1]}R.raws.between="";let W;for(;I.length;)if(W=I.shift(),W[0]===":"){R.raws.between+=W[1];break}else W[0]==="word"&&/\w/.test(W[1])&&this.unknownWord([W]),R.raws.between+=W[1];(R.prop[0]==="_"||R.prop[0]==="*")&&(R.raws.before+=R.prop[0],R.prop=R.prop.slice(1));let G=[],pe;for(;I.length&&(pe=I[0][0],!(pe!=="space"&&pe!=="comment"));)G.push(I.shift());this.precheckMissedSemicolon(I);for(let ne=I.length-1;ne>=0;ne--){if(W=I[ne],W[1].toLowerCase()==="!important"){R.important=!0;let re=this.stringFrom(I,ne);re=this.spacesFromEnd(I)+re,re!==" !important"&&(R.raws.important=re);break}else if(W[1].toLowerCase()==="important"){let re=I.slice(0),ue="";for(let oe=ne;oe>0;oe--){let Ve=re[oe][0];if(ue.trim().startsWith("!")&&Ve!=="space")break;ue=re.pop()[1]+ue}ue.trim().startsWith("!")&&(R.important=!0,R.raws.important=ue,I=re)}if(W[0]!=="space"&&W[0]!=="comment")break}I.some(ne=>ne[0]!=="space"&&ne[0]!=="comment")&&(R.raws.between+=G.map(ne=>ne[1]).join(""),G=[]),this.raw(R,"value",G.concat(I),A),R.value.includes(":")&&!A&&this.checkMissedSemicolon(I)}doubleColon(I){throw this.input.error("Double colon",{offset:I[2]},{offset:I[2]+I[1].length})}emptyRule(I){let A=new a;this.init(A,I[2]),A.selector="",A.raws.between="",this.current=A}end(I){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(I[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(I)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(I){if(this.spaces+=I[1],this.current.nodes){let A=this.current.nodes[this.current.nodes.length-1];A&&A.type==="rule"&&!A.raws.ownSemicolon&&(A.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(I){let A=this.input.fromOffset(I);return{column:A.col,line:A.line,offset:I}}init(I,A){this.current.push(I),I.source={input:this.input,start:this.getPosition(A)},I.raws.before=this.spaces,this.spaces="",I.type!=="comment"&&(this.semicolon=!1)}other(I){let A=!1,R=null,$=!1,W=null,G=[],pe=I[1].startsWith("--"),le=[],ne=I;for(;ne;){if(R=ne[0],le.push(ne),R==="("||R==="[")W||(W=ne),G.push(R==="("?")":"]");else if(pe&&$&&R==="{")W||(W=ne),G.push("}");else if(G.length===0)if(R===";")if($){this.decl(le,pe);return}else break;else if(R==="{"){this.rule(le);return}else if(R==="}"){this.tokenizer.back(le.pop()),A=!0;break}else R===":"&&($=!0);else R===G[G.length-1]&&(G.pop(),G.length===0&&(W=null));ne=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(A=!0),G.length>0&&this.unclosedBracket(W),A&&$){if(!pe)for(;le.length&&(ne=le[le.length-1][0],!(ne!=="space"&&ne!=="comment"));)this.tokenizer.back(le.pop());this.decl(le,pe)}else this.unknownWord(le)}parse(){let I;for(;!this.tokenizer.endOfFile();)switch(I=this.tokenizer.nextToken(),I[0]){case"space":this.spaces+=I[1];break;case";":this.freeSemicolon(I);break;case"}":this.end(I);break;case"comment":this.comment(I);break;case"at-word":this.atrule(I);break;case"{":this.emptyRule(I);break;default:this.other(I);break}this.endFile()}precheckMissedSemicolon(){}raw(I,A,R,$){let W,G,pe=R.length,le="",ne=!0,re,ue;for(let oe=0;oe<pe;oe+=1)W=R[oe],G=W[0],G==="space"&&oe===pe-1&&!$?ne=!1:G==="comment"?(ue=R[oe-1]?R[oe-1][0]:"empty",re=R[oe+1]?R[oe+1][0]:"empty",!_[ue]&&!_[re]?le.slice(-1)===","?ne=!1:le+=W[1]:ne=!1):le+=W[1];if(!ne){let oe=R.reduce((Ve,tt)=>Ve+tt[1],"");I.raws[A]={raw:oe,value:le}}I[A]=le}rule(I){I.pop();let A=new a;this.init(A,I[0][2]),A.raws.between=this.spacesAndCommentsFromEnd(I),this.raw(A,"selector",I),this.current=A}spacesAndCommentsFromEnd(I){let A,R="";for(;I.length&&(A=I[I.length-1][0],!(A!=="space"&&A!=="comment"));)R=I.pop()[1]+R;return R}spacesAndCommentsFromStart(I){let A,R="";for(;I.length&&(A=I[0][0],!(A!=="space"&&A!=="comment"));)R+=I.shift()[1];return R}spacesFromEnd(I){let A,R="";for(;I.length&&(A=I[I.length-1][0],A==="space");)R=I.pop()[1]+R;return R}stringFrom(I,A){let R="";for(let $=A;$<I.length;$++)R+=I[$][1];return I.splice(A,I.length-A),R}unclosedBlock(){let I=this.current.source.start;throw this.input.error("Unclosed block",I.line,I.column)}unclosedBracket(I){throw this.input.error("Unclosed bracket",{offset:I[2]},{offset:I[2]+1})}unexpectedClose(I){throw this.input.error("Unexpected }",{offset:I[2]},{offset:I[2]+1})}unknownWord(I){throw this.input.error("Unknown word",{offset:I[0][2]},{offset:I[0][2]+I[0][1].length})}unnamedAtrule(I,A){throw this.input.error("At-rule without name",{offset:A[2]},{offset:A[2]+A[1].length})}}return x1=E,x1}var w1,lM;function ax(){if(lM)return w1;lM=1;let r=ud(),t=q0(),e=P6();function o(a,s){let _=new t(a,s),w=new e(_);try{w.parse()}catch(E){throw process.env.NODE_ENV!=="production"&&E.name==="CssSyntaxError"&&s&&s.from&&(/\.scss$/i.test(s.from)?E.message+=`
You tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser`:/\.sass/i.test(s.from)?E.message+=`
You tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser`:/\.less$/i.test(s.from)&&(E.message+=`
You tried to parse Less with the standard CSS parser; try again with the postcss-less parser`)),E}return w.root}return w1=o,o.default=o,r.registerParse(o),w1}var C1,cM;function eI(){if(cM)return C1;cM=1;class r{constructor(e,o={}){if(this.type="warning",this.text=e,o.node&&o.node.source){let a=o.node.rangeBy(o);this.line=a.start.line,this.column=a.start.column,this.endLine=a.end.line,this.endColumn=a.end.column}for(let a in o)this[a]=o[a]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}return C1=r,r.default=r,C1}var E1,uM;function lx(){if(uM)return E1;uM=1;let r=eI();class t{constructor(o,a,s){this.processor=o,this.messages=[],this.root=a,this.opts=s,this.css=void 0,this.map=void 0}toString(){return this.css}warn(o,a={}){a.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(a.plugin=this.lastPlugin.postcssPlugin);let s=new r(o,a);return this.messages.push(s),s}warnings(){return this.messages.filter(o=>o.type==="warning")}get content(){return this.css}}return E1=t,t.default=t,E1}var S1,dM;function tI(){if(dM)return S1;dM=1;let r={};return S1=function(e){r[e]||(r[e]=!0,typeof console<"u"&&console.warn&&console.warn(e))},S1}var T1,hM;function iI(){if(hM)return T1;hM=1;let r=ud(),t=ox(),e=JM(),o=ax(),a=lx(),s=sm(),_=B0(),{isClean:w,my:E}=rx(),M=tI(),I={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},A={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},R={Once:!0,postcssPlugin:!0,prepare:!0},$=0;function W(ue){return typeof ue=="object"&&typeof ue.then=="function"}function G(ue){let oe=!1,Ve=I[ue.type];return ue.type==="decl"?oe=ue.prop.toLowerCase():ue.type==="atrule"&&(oe=ue.name.toLowerCase()),oe&&ue.append?[Ve,Ve+"-"+oe,$,Ve+"Exit",Ve+"Exit-"+oe]:oe?[Ve,Ve+"-"+oe,Ve+"Exit",Ve+"Exit-"+oe]:ue.append?[Ve,$,Ve+"Exit"]:[Ve,Ve+"Exit"]}function pe(ue){let oe;return ue.type==="document"?oe=["Document",$,"DocumentExit"]:ue.type==="root"?oe=["Root",$,"RootExit"]:oe=G(ue),{eventIndex:0,events:oe,iterator:0,node:ue,visitorIndex:0,visitors:[]}}function le(ue){return ue[w]=!1,ue.nodes&&ue.nodes.forEach(oe=>le(oe)),ue}let ne={},re=(()=>{class ue{constructor(Ve,tt,ct){this.stringified=!1,this.processed=!1;let Qe;if(typeof tt=="object"&&tt!==null&&(tt.type==="root"||tt.type==="document"))Qe=le(tt);else if(tt instanceof ue||tt instanceof a)Qe=le(tt.root),tt.map&&(typeof ct.map>"u"&&(ct.map={}),ct.map.inline||(ct.map.inline=!1),ct.map.prev=tt.map);else{let ve=o;ct.syntax&&(ve=ct.syntax.parse),ct.parser&&(ve=ct.parser),ve.parse&&(ve=ve.parse);try{Qe=ve(tt,ct)}catch(Ge){this.processed=!0,this.error=Ge}Qe&&!Qe[E]&&r.rebuild(Qe)}this.result=new a(Ve,Qe,ct),this.helpers=si(ft({},ne),{postcss:ne,result:this.result}),this.plugins=this.processor.plugins.map(ve=>typeof ve=="object"&&ve.prepare?ft(ft({},ve),ve.prepare(this.result)):ve)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(Ve){return this.async().catch(Ve)}finally(Ve){return this.async().then(Ve,Ve)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(Ve,tt){let ct=this.result.lastPlugin;try{if(tt&&tt.addToError(Ve),this.error=Ve,Ve.name==="CssSyntaxError"&&!Ve.plugin)Ve.plugin=ct.postcssPlugin,Ve.setMessage();else if(ct.postcssVersion&&process.env.NODE_ENV!=="production"){let Qe=ct.postcssPlugin,ve=ct.postcssVersion,Ge=this.result.processor.version,bt=ve.split("."),ae=Ge.split(".");(bt[0]!==ae[0]||parseInt(bt[1])>parseInt(ae[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+Ge+", but "+Qe+" uses "+ve+". Perhaps this is the source of the error below.")}}catch(Qe){console&&console.error&&console.error(Qe)}return Ve}prepareVisitors(){this.listeners={};let Ve=(tt,ct,Qe)=>{this.listeners[ct]||(this.listeners[ct]=[]),this.listeners[ct].push([tt,Qe])};for(let tt of this.plugins)if(typeof tt=="object")for(let ct in tt){if(!A[ct]&&/^[A-Z]/.test(ct))throw new Error(`Unknown event ${ct} in ${tt.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!R[ct])if(typeof tt[ct]=="object")for(let Qe in tt[ct])Qe==="*"?Ve(tt,ct,tt[ct][Qe]):Ve(tt,ct+"-"+Qe.toLowerCase(),tt[ct][Qe]);else typeof tt[ct]=="function"&&Ve(tt,ct,tt[ct])}this.hasListener=Object.keys(this.listeners).length>0}runAsync(){return vr(this,null,function*(){this.plugin=0;for(let Ve=0;Ve<this.plugins.length;Ve++){let tt=this.plugins[Ve],ct=this.runOnRoot(tt);if(W(ct))try{yield ct}catch(Qe){throw this.handleError(Qe)}}if(this.prepareVisitors(),this.hasListener){let Ve=this.result.root;for(;!Ve[w];){Ve[w]=!0;let tt=[pe(Ve)];for(;tt.length>0;){let ct=this.visitTick(tt);if(W(ct))try{yield ct}catch(Qe){let ve=tt[tt.length-1].node;throw this.handleError(Qe,ve)}}}if(this.listeners.OnceExit)for(let[tt,ct]of this.listeners.OnceExit){this.result.lastPlugin=tt;try{if(Ve.type==="document"){let Qe=Ve.nodes.map(ve=>ct(ve,this.helpers));yield Promise.all(Qe)}else yield ct(Ve,this.helpers)}catch(Qe){throw this.handleError(Qe)}}}return this.processed=!0,this.stringify()})}runOnRoot(Ve){this.result.lastPlugin=Ve;try{if(typeof Ve=="object"&&Ve.Once){if(this.result.root.type==="document"){let tt=this.result.root.nodes.map(ct=>Ve.Once(ct,this.helpers));return W(tt[0])?Promise.all(tt):tt}return Ve.Once(this.result.root,this.helpers)}else if(typeof Ve=="function")return Ve(this.result.root,this.result)}catch(tt){throw this.handleError(tt)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let Ve=this.result.opts,tt=_;Ve.syntax&&(tt=Ve.syntax.stringify),Ve.stringifier&&(tt=Ve.stringifier),tt.stringify&&(tt=tt.stringify);let Qe=new e(tt,this.result.root,this.result.opts).generate();return this.result.css=Qe[0],this.result.map=Qe[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let Ve of this.plugins){let tt=this.runOnRoot(Ve);if(W(tt))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let Ve=this.result.root;for(;!Ve[w];)Ve[w]=!0,this.walkSync(Ve);if(this.listeners.OnceExit)if(Ve.type==="document")for(let tt of Ve.nodes)this.visitSync(this.listeners.OnceExit,tt);else this.visitSync(this.listeners.OnceExit,Ve)}return this.result}then(Ve,tt){return process.env.NODE_ENV!=="production"&&("from"in this.opts||M("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(Ve,tt)}toString(){return this.css}visitSync(Ve,tt){for(let[ct,Qe]of Ve){this.result.lastPlugin=ct;let ve;try{ve=Qe(tt,this.helpers)}catch(Ge){throw this.handleError(Ge,tt.proxyOf)}if(tt.type!=="root"&&tt.type!=="document"&&!tt.parent)return!0;if(W(ve))throw this.getAsyncError()}}visitTick(Ve){let tt=Ve[Ve.length-1],{node:ct,visitors:Qe}=tt;if(ct.type!=="root"&&ct.type!=="document"&&!ct.parent){Ve.pop();return}if(Qe.length>0&&tt.visitorIndex<Qe.length){let[Ge,bt]=Qe[tt.visitorIndex];tt.visitorIndex+=1,tt.visitorIndex===Qe.length&&(tt.visitors=[],tt.visitorIndex=0),this.result.lastPlugin=Ge;try{return bt(ct.toProxy(),this.helpers)}catch(ae){throw this.handleError(ae,ct)}}if(tt.iterator!==0){let Ge=tt.iterator,bt;for(;bt=ct.nodes[ct.indexes[Ge]];)if(ct.indexes[Ge]+=1,!bt[w]){bt[w]=!0,Ve.push(pe(bt));return}tt.iterator=0,delete ct.indexes[Ge]}let ve=tt.events;for(;tt.eventIndex<ve.length;){let Ge=ve[tt.eventIndex];if(tt.eventIndex+=1,Ge===$){ct.nodes&&ct.nodes.length&&(ct[w]=!0,tt.iterator=ct.getIterator());return}else if(this.listeners[Ge]){tt.visitors=this.listeners[Ge];return}}Ve.pop()}walkSync(Ve){Ve[w]=!0;let tt=G(Ve);for(let ct of tt)if(ct===$)Ve.nodes&&Ve.each(Qe=>{Qe[w]||this.walkSync(Qe)});else{let Qe=this.listeners[ct];if(Qe&&this.visitSync(Qe,Ve.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}}return ue.registerPostcss=oe=>{ne=oe},ue})();return T1=re,re.default=re,s.registerLazyResult(re),t.registerLazyResult(re),T1}var M1,pM;function D6(){if(pM)return M1;pM=1;let r=JM(),t=ax(),e=lx(),o=B0(),a=tI();class s{constructor(w,E,M){E=E.toString(),this.stringified=!1,this._processor=w,this._css=E,this._opts=M,this._map=void 0;let I,A=o;this.result=new e(this._processor,I,this._opts),this.result.css=E;let R=this;Object.defineProperty(this.result,"root",{get(){return R.root}});let $=new r(A,I,this._opts,E);if($.isMap()){let[W,G]=$.generate();W&&(this.result.css=W),G&&(this.result.map=G)}else $.clearAnnotation(),this.result.css=$.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(w){return this.async().catch(w)}finally(w){return this.async().then(w,w)}sync(){if(this.error)throw this.error;return this.result}then(w,E){return process.env.NODE_ENV!=="production"&&("from"in this._opts||a("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(w,E)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let w,E=t;try{w=E(this._css,this._opts)}catch(M){this.error=M}if(this.error)throw this.error;return this._root=w,w}get[Symbol.toStringTag](){return"NoWorkResult"}}return M1=s,s.default=s,M1}var I1,fM;function R6(){if(fM)return I1;fM=1;let r=ox(),t=iI(),e=D6(),o=sm();class a{constructor(_=[]){this.version="8.4.49",this.plugins=this.normalize(_)}normalize(_){let w=[];for(let E of _)if(E.postcss===!0?E=E():E.postcss&&(E=E.postcss),typeof E=="object"&&Array.isArray(E.plugins))w=w.concat(E.plugins);else if(typeof E=="object"&&E.postcssPlugin)w.push(E);else if(typeof E=="function")w.push(E);else if(typeof E=="object"&&(E.parse||E.stringify)){if(process.env.NODE_ENV!=="production")throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}else throw new Error(E+" is not a PostCSS plugin");return w}process(_,w={}){return!this.plugins.length&&!w.parser&&!w.stringifier&&!w.syntax?new e(this,_,w):new t(this,_,w)}use(_){return this.plugins=this.plugins.concat(this.normalize([_])),this}}return I1=a,a.default=a,o.registerProcessor(a),r.registerProcessor(a),I1}var A1,mM;function O6(){if(mM)return A1;mM=1;let r=nx(),t=U0(),e=ud(),o=ix(),a=j0(),s=ox(),_=A6(),w=q0(),E=iI(),M=QM(),I=V0(),A=ax(),R=R6(),$=lx(),W=sm(),G=sx(),pe=B0(),le=eI();function ne(...re){return re.length===1&&Array.isArray(re[0])&&(re=re[0]),new R(re)}return ne.plugin=function(ue,oe){let Ve=!1;function tt(...Qe){console&&console.warn&&!Ve&&(Ve=!0,console.warn(ue+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(ue+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let ve=oe(...Qe);return ve.postcssPlugin=ue,ve.postcssVersion=new R().version,ve}let ct;return Object.defineProperty(tt,"postcss",{get(){return ct||(ct=tt()),ct}}),tt.process=function(Qe,ve,Ge){return ne([tt(Ge)]).process(Qe,ve)},tt},ne.stringify=pe,ne.parse=A,ne.fromJSON=_,ne.list=M,ne.comment=re=>new t(re),ne.atRule=re=>new r(re),ne.decl=re=>new a(re),ne.rule=re=>new G(re),ne.root=re=>new W(re),ne.document=re=>new s(re),ne.CssSyntaxError=o,ne.Declaration=a,ne.Container=e,ne.Processor=R,ne.Document=s,ne.Comment=t,ne.Warning=le,ne.AtRule=r,ne.Result=$,ne.Input=w,ne.Rule=G,ne.Root=W,ne.Node=I,E.registerPostcss(ne),A1=ne,ne.default=ne,A1}var L6=O6(),Gr=z0(L6),N6=Gr.stringify;Gr.fromJSON;Gr.plugin;var F6=Gr.parse;Gr.list;Gr.document;Gr.comment;Gr.atRule;Gr.rule;Gr.decl;Gr.root;Gr.CssSyntaxError;Gr.Declaration;Gr.Container;Gr.Processor;Gr.Document;Gr.Comment;Gr.Warning;Gr.AtRule;Gr.Result;Gr.Input;Gr.Rule;Gr.Root;Gr.Node;var C0={},E0={},S0={},gM;function rI(){if(gM)return S0;gM=1,Object.defineProperty(S0,"__esModule",{value:!0});function r(t){this.after=t.after,this.before=t.before,this.type=t.type,this.value=t.value,this.sourceIndex=t.sourceIndex}return S0.default=r,S0}var _M;function nI(){if(_M)return E0;_M=1,Object.defineProperty(E0,"__esModule",{value:!0});var r=rI(),t=e(r);function e(a){return a&&a.__esModule?a:{default:a}}function o(a){var s=this;this.constructor(a),this.nodes=a.nodes,this.after===void 0&&(this.after=this.nodes.length>0?this.nodes[this.nodes.length-1].after:""),this.before===void 0&&(this.before=this.nodes.length>0?this.nodes[0].before:""),this.sourceIndex===void 0&&(this.sourceIndex=this.before.length),this.nodes.forEach(function(_){_.parent=s})}return o.prototype=Object.create(t.default.prototype),o.constructor=t.default,o.prototype.walk=function(s,_){for(var w=typeof s=="string"||s instanceof RegExp,E=w?_:s,M=typeof s=="string"?new RegExp(s):s,I=0;I<this.nodes.length;I++){var A=this.nodes[I],R=w?M.test(A.type):!0;if(R&&E&&E(A,I,this.nodes)===!1||A.nodes&&A.walk(s,_)===!1)return!1}return!0},o.prototype.each=function(){for(var s=arguments.length<=0||arguments[0]===void 0?function(){}:arguments[0],_=0;_<this.nodes.length;_++){var w=this.nodes[_];if(s(w,_,this.nodes)===!1)return!1}return!0},E0.default=o,E0}var Nh={},bM;function z6(){if(bM)return Nh;bM=1,Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.parseMediaFeature=s,Nh.parseMediaQuery=_,Nh.parseMediaList=w;var r=rI(),t=a(r),e=nI(),o=a(e);function a(E){return E&&E.__esModule?E:{default:E}}function s(E){var M=arguments.length<=1||arguments[1]===void 0?0:arguments[1],I=[{mode:"normal",character:null}],A=[],R=0,$="",W=null,G=null,pe=M,le=E;E[0]==="("&&E[E.length-1]===")"&&(le=E.substring(1,E.length-1),pe++);for(var ne=0;ne<le.length;ne++){var re=le[ne];if((re==="'"||re==='"')&&(I[R].isCalculationEnabled===!0?(I.push({mode:"string",isCalculationEnabled:!1,character:re}),R++):I[R].mode==="string"&&I[R].character===re&&le[ne-1]!=="\\"&&(I.pop(),R--)),re==="{"?(I.push({mode:"interpolation",isCalculationEnabled:!0}),R++):re==="}"&&(I.pop(),R--),I[R].mode==="normal"&&re===":"){var ue=le.substring(ne+1);G={type:"value",before:/^(\s*)/.exec(ue)[1],after:/(\s*)$/.exec(ue)[1],value:ue.trim()},G.sourceIndex=G.before.length+ne+1+pe,W={type:"colon",sourceIndex:ne+pe,after:G.before,value:":"};break}$+=re}return $={type:"media-feature",before:/^(\s*)/.exec($)[1],after:/(\s*)$/.exec($)[1],value:$.trim()},$.sourceIndex=$.before.length+pe,A.push($),W!==null&&(W.before=$.after,A.push(W)),G!==null&&A.push(G),A}function _(E){var M=arguments.length<=1||arguments[1]===void 0?0:arguments[1],I=[],A=0,R=!1,$=void 0;function W(){return{before:"",after:"",value:""}}$=W();for(var G=0;G<E.length;G++){var pe=E[G];R?($.value+=pe,(pe==="{"||pe==="(")&&A++,(pe===")"||pe==="}")&&A--):pe.search(/\s/)!==-1?$.before+=pe:(pe==="("&&($.type="media-feature-expression",A++),$.value=pe,$.sourceIndex=M+G,R=!0),R&&A===0&&(pe===")"||G===E.length-1||E[G+1].search(/\s/)!==-1)&&(["not","only","and"].indexOf($.value)!==-1&&($.type="keyword"),$.type==="media-feature-expression"&&($.nodes=s($.value,$.sourceIndex)),I.push(Array.isArray($.nodes)?new o.default($):new t.default($)),$=W(),R=!1)}for(var le=0;le<I.length;le++)if($=I[le],le>0&&(I[le-1].after=$.before),$.type===void 0){if(le>0){if(I[le-1].type==="media-feature-expression"){$.type="keyword";continue}if(I[le-1].value==="not"||I[le-1].value==="only"){$.type="media-type";continue}if(I[le-1].value==="and"){$.type="media-feature-expression";continue}I[le-1].type==="media-type"&&(I[le+1]?$.type=I[le+1].type==="media-feature-expression"?"keyword":"media-feature-expression":$.type="media-feature-expression")}if(le===0){if(!I[le+1]){$.type="media-type";continue}if(I[le+1]&&(I[le+1].type==="media-feature-expression"||I[le+1].type==="keyword")){$.type="media-type";continue}if(I[le+2]){if(I[le+2].type==="media-feature-expression"){$.type="media-type",I[le+1].type="keyword";continue}if(I[le+2].type==="keyword"){$.type="keyword",I[le+1].type="media-type";continue}}if(I[le+3]&&I[le+3].type==="media-feature-expression"){$.type="keyword",I[le+1].type="media-type",I[le+2].type="keyword";continue}}}return I}function w(E){var M=[],I=0,A=0,R=/^(\s*)url\s*\(/.exec(E);if(R!==null){for(var $=R[0].length,W=1;W>0;){var G=E[$];G==="("&&W++,G===")"&&W--,$++}M.unshift(new t.default({type:"url",value:E.substring(0,$).trim(),sourceIndex:R[1].length,before:R[1],after:/^(\s*)/.exec(E.substring($))[1]})),I=$}for(var pe=I;pe<E.length;pe++){var le=E[pe];if(le==="("&&A++,le===")"&&A--,A===0&&le===","){var ne=E.substring(I,pe),re=/^(\s*)/.exec(ne)[1];M.push(new o.default({type:"media-query",value:ne.trim(),sourceIndex:I+re.length,nodes:_(ne,I),before:re,after:/(\s*)$/.exec(ne)[1]})),I=pe+1}}var ue=E.substring(I),oe=/^(\s*)/.exec(ue)[1];return M.push(new o.default({type:"media-query",value:ue.trim(),sourceIndex:I+oe.length,nodes:_(ue,I),before:oe,after:/(\s*)$/.exec(ue)[1]})),M}return Nh}var yM;function B6(){if(yM)return C0;yM=1,Object.defineProperty(C0,"__esModule",{value:!0}),C0.default=a;var r=nI(),t=o(r),e=z6();function o(s){return s&&s.__esModule?s:{default:s}}function a(s){return new t.default({nodes:(0,e.parseMediaList)(s),type:"media-query-list",value:s.trim()})}return C0}var V6=B6(),k1=z0(V6),br=function(r){return r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype",r}(br||{});function U6(r){return r.type===br.Tag||r.type===br.Script||r.type===br.Style}var j6=br.Root,q6=br.Text,H6=br.Directive,$6=br.Comment,G6=br.Script,W6=br.Style,Z6=br.Tag,X6=br.CDATA,Y6=br.Doctype,A0=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(t){this.parent=t}get previousSibling(){return this.prev}set previousSibling(t){this.prev=t}get nextSibling(){return this.next}set nextSibling(t){this.next=t}cloneNode(t=!1){return sI(this,t)}},rm=class extends A0{constructor(t){super(),this.data=t}get nodeValue(){return this.data}set nodeValue(t){this.data=t}},ad=class extends rm{constructor(){super(...arguments),this.type=br.Text}get nodeType(){return 3}},k0=class extends rm{constructor(){super(...arguments),this.type=br.Comment}get nodeType(){return 8}},P0=class extends rm{constructor(t,e){super(e),this.name=t,this.type=br.Directive}get nodeType(){return 1}},nm=class extends A0{constructor(t){super(),this.children=t}get firstChild(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(t){this.children=t}},D0=class extends nm{constructor(){super(...arguments),this.type=br.CDATA}get nodeType(){return 4}},om=class extends nm{constructor(){super(...arguments),this.type=br.Root}get nodeType(){return 9}},Bh=class extends nm{constructor(t,e,o=[],a=t==="script"?br.Script:t==="style"?br.Style:br.Tag){super(o),this.name=t,this.attribs=e,this.type=a}get nodeType(){return 1}get tagName(){return this.name}set tagName(t){this.name=t}get attributes(){return Object.keys(this.attribs).map(t=>{var e,o;return{name:t,value:this.attribs[t],namespace:(e=this["x-attribsNamespace"])===null||e===void 0?void 0:e[t],prefix:(o=this["x-attribsPrefix"])===null||o===void 0?void 0:o[t]}})}};function Os(r){return U6(r)}function H0(r){return r.type===br.CDATA}function ld(r){return r.type===br.Text}function cx(r){return r.type===br.Comment}function K6(r){return r.type===br.Directive}function oI(r){return r.type===br.Root}function ru(r){return Object.prototype.hasOwnProperty.call(r,"children")}function sI(r,t=!1){let e;if(ld(r))e=new ad(r.data);else if(cx(r))e=new k0(r.data);else if(Os(r)){let o=t?P1(r.children):[],a=new Bh(r.name,ft({},r.attribs),o);o.forEach(s=>s.parent=a),r.namespace!=null&&(a.namespace=r.namespace),r["x-attribsNamespace"]&&(a["x-attribsNamespace"]=ft({},r["x-attribsNamespace"])),r["x-attribsPrefix"]&&(a["x-attribsPrefix"]=ft({},r["x-attribsPrefix"])),e=a}else if(H0(r)){let o=t?P1(r.children):[],a=new D0(o);o.forEach(s=>s.parent=a),e=a}else if(oI(r)){let o=t?P1(r.children):[],a=new om(o);o.forEach(s=>s.parent=a),r["x-mode"]&&(a["x-mode"]=r["x-mode"]),e=a}else if(K6(r)){let o=new P0(r.name,r.data);r["x-name"]!=null&&(o["x-name"]=r["x-name"],o["x-publicId"]=r["x-publicId"],o["x-systemId"]=r["x-systemId"]),e=o}else throw new Error(`Not implemented yet: ${r.type}`);return e.startIndex=r.startIndex,e.endIndex=r.endIndex,r.sourceCodeLocation!=null&&(e.sourceCodeLocation=r.sourceCodeLocation),e}function P1(r){let t=r.map(e=>sI(e,!0));for(let e=1;e<t.length;e++)t[e].prev=t[e-1],t[e-1].next=t[e];return t}var vM={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},U1=class{constructor(t,e,o){this.dom=[],this.root=new om(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof e=="function"&&(o=e,e=vM),typeof t=="object"&&(e=t,t=void 0),this.callback=t??null,this.options=e??vM,this.elementCB=o??null}onparserinit(t){this.parser=t}onreset(){this.dom=[],this.root=new om(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(t){this.handleCallback(t)}onclosetag(){this.lastNode=null;let t=this.tagStack.pop();this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(t)}onopentag(t,e){let o=this.options.xmlMode?br.Tag:void 0,a=new Bh(t,e,void 0,o);this.addNode(a),this.tagStack.push(a)}ontext(t){let{lastNode:e}=this;if(e&&e.type===br.Text)e.data+=t,this.options.withEndIndices&&(e.endIndex=this.parser.endIndex);else{let o=new ad(t);this.addNode(o),this.lastNode=o}}oncomment(t){if(this.lastNode&&this.lastNode.type===br.Comment){this.lastNode.data+=t;return}let e=new k0(t);this.addNode(e),this.lastNode=e}oncommentend(){this.lastNode=null}oncdatastart(){let t=new ad(""),e=new D0([t]);this.addNode(e),t.parent=e,this.lastNode=t}oncdataend(){this.lastNode=null}onprocessinginstruction(t,e){let o=new P0(t,e);this.addNode(o)}handleCallback(t){if(typeof this.callback=="function")this.callback(t,this.dom);else if(t)throw t}addNode(t){let e=this.tagStack[this.tagStack.length-1],o=e.children[e.children.length-1];this.options.withStartIndices&&(t.startIndex=this.parser.startIndex),this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),e.children.push(t),o&&(t.prev=o,o.next=t),t.parent=e,this.lastNode=null}},Q6=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(r=>r.charCodeAt(0))),J6=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(r=>r.charCodeAt(0))),D1,e4=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),xM=(D1=String.fromCodePoint)!==null&&D1!==void 0?D1:function(r){let t="";return r>65535&&(r-=65536,t+=String.fromCharCode(r>>>10&1023|55296),r=56320|r&1023),t+=String.fromCharCode(r),t};function t4(r){var t;return r>=55296&&r<=57343||r>1114111?65533:(t=e4.get(r))!==null&&t!==void 0?t:r}var _o=function(r){return r[r.NUM=35]="NUM",r[r.SEMI=59]="SEMI",r[r.EQUALS=61]="EQUALS",r[r.ZERO=48]="ZERO",r[r.NINE=57]="NINE",r[r.LOWER_A=97]="LOWER_A",r[r.LOWER_F=102]="LOWER_F",r[r.LOWER_X=120]="LOWER_X",r[r.LOWER_Z=122]="LOWER_Z",r[r.UPPER_A=65]="UPPER_A",r[r.UPPER_F=70]="UPPER_F",r[r.UPPER_Z=90]="UPPER_Z",r}(_o||{}),i4=32,od=function(r){return r[r.VALUE_LENGTH=49152]="VALUE_LENGTH",r[r.BRANCH_LENGTH=16256]="BRANCH_LENGTH",r[r.JUMP_TABLE=127]="JUMP_TABLE",r}(od||{});function j1(r){return r>=_o.ZERO&&r<=_o.NINE}function r4(r){return r>=_o.UPPER_A&&r<=_o.UPPER_F||r>=_o.LOWER_A&&r<=_o.LOWER_F}function n4(r){return r>=_o.UPPER_A&&r<=_o.UPPER_Z||r>=_o.LOWER_A&&r<=_o.LOWER_Z||j1(r)}function o4(r){return r===_o.EQUALS||n4(r)}var go=function(r){return r[r.EntityStart=0]="EntityStart",r[r.NumericStart=1]="NumericStart",r[r.NumericDecimal=2]="NumericDecimal",r[r.NumericHex=3]="NumericHex",r[r.NamedEntity=4]="NamedEntity",r}(go||{}),Jl=function(r){return r[r.Legacy=0]="Legacy",r[r.Strict=1]="Strict",r[r.Attribute=2]="Attribute",r}(Jl||{}),q1=class{constructor(t,e,o){this.decodeTree=t,this.emitCodePoint=e,this.errors=o,this.state=go.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Jl.Strict}startEntity(t){this.decodeMode=t,this.state=go.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,e){switch(this.state){case go.EntityStart:return t.charCodeAt(e)===_o.NUM?(this.state=go.NumericStart,this.consumed+=1,this.stateNumericStart(t,e+1)):(this.state=go.NamedEntity,this.stateNamedEntity(t,e));case go.NumericStart:return this.stateNumericStart(t,e);case go.NumericDecimal:return this.stateNumericDecimal(t,e);case go.NumericHex:return this.stateNumericHex(t,e);case go.NamedEntity:return this.stateNamedEntity(t,e)}}stateNumericStart(t,e){return e>=t.length?-1:(t.charCodeAt(e)|i4)===_o.LOWER_X?(this.state=go.NumericHex,this.consumed+=1,this.stateNumericHex(t,e+1)):(this.state=go.NumericDecimal,this.stateNumericDecimal(t,e))}addToNumericResult(t,e,o,a){if(e!==o){let s=o-e;this.result=this.result*Math.pow(a,s)+parseInt(t.substr(e,s),a),this.consumed+=s}}stateNumericHex(t,e){let o=e;for(;e<t.length;){let a=t.charCodeAt(e);if(j1(a)||r4(a))e+=1;else return this.addToNumericResult(t,o,e,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,o,e,16),-1}stateNumericDecimal(t,e){let o=e;for(;e<t.length;){let a=t.charCodeAt(e);if(j1(a))e+=1;else return this.addToNumericResult(t,o,e,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,o,e,10),-1}emitNumericEntity(t,e){var o;if(this.consumed<=e)return(o=this.errors)===null||o===void 0||o.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===_o.SEMI)this.consumed+=1;else if(this.decodeMode===Jl.Strict)return 0;return this.emitCodePoint(t4(this.result),this.consumed),this.errors&&(t!==_o.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,e){let{decodeTree:o}=this,a=o[this.treeIndex],s=(a&od.VALUE_LENGTH)>>14;for(;e<t.length;e++,this.excess++){let _=t.charCodeAt(e);if(this.treeIndex=s4(o,a,this.treeIndex+Math.max(1,s),_),this.treeIndex<0)return this.result===0||this.decodeMode===Jl.Attribute&&(s===0||o4(_))?0:this.emitNotTerminatedNamedEntity();if(a=o[this.treeIndex],s=(a&od.VALUE_LENGTH)>>14,s!==0){if(_===_o.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Jl.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;let{result:e,decodeTree:o}=this,a=(o[e]&od.VALUE_LENGTH)>>14;return this.emitNamedEntityData(e,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,e,o){let{decodeTree:a}=this;return this.emitCodePoint(e===1?a[t]&~od.VALUE_LENGTH:a[t+1],o),e===3&&this.emitCodePoint(a[t+2],o),o}end(){var t;switch(this.state){case go.NamedEntity:return this.result!==0&&(this.decodeMode!==Jl.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case go.NumericDecimal:return this.emitNumericEntity(0,2);case go.NumericHex:return this.emitNumericEntity(0,3);case go.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case go.EntityStart:return 0}}};function s4(r,t,e,o){let a=(t&od.BRANCH_LENGTH)>>7,s=t&od.JUMP_TABLE;if(a===0)return s!==0&&o===s?e:-1;if(s){let E=o-s;return E<0||E>=a?-1:r[e+E]-1}let _=e,w=_+a-1;for(;_<=w;){let E=_+w>>>1,M=r[E];if(M<o)_=E+1;else if(M>o)w=E-1;else return r[E+a]}return-1}var wM=/["&'<>$\x80-\uFFFF]/g,a4=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),l4=String.prototype.codePointAt!=null?(r,t)=>r.codePointAt(t):(r,t)=>(r.charCodeAt(t)&64512)===55296?(r.charCodeAt(t)-55296)*1024+r.charCodeAt(t+1)-56320+65536:r.charCodeAt(t);function aI(r){let t="",e=0,o;for(;(o=wM.exec(r))!==null;){let a=o.index,s=r.charCodeAt(a),_=a4.get(s);_!==void 0?(t+=r.substring(e,a)+_,e=a+1):(t+=`${r.substring(e,a)}&#x${l4(r,a).toString(16)};`,e=wM.lastIndex+=+((s&64512)===55296))}return t+r.substr(e)}function lI(r,t){return function(o){let a,s=0,_="";for(;a=r.exec(o);)s!==a.index&&(_+=o.substring(s,a.index)),_+=t.get(a[0].charCodeAt(0)),s=a.index+1;return _+o.substring(s)}}var c4=lI(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),u4=lI(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]));var d4=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(r=>[r.toLowerCase(),r])),h4=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(r=>[r.toLowerCase(),r])),p4=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function f4(r){return r.replace(/"/g,"&quot;")}function m4(r,t){var e;if(!r)return;let o=((e=t.encodeEntities)!==null&&e!==void 0?e:t.decodeEntities)===!1?f4:t.xmlMode||t.encodeEntities!=="utf8"?aI:c4;return Object.keys(r).map(a=>{var s,_;let w=(s=r[a])!==null&&s!==void 0?s:"";return t.xmlMode==="foreign"&&(a=(_=h4.get(a))!==null&&_!==void 0?_:a),!t.emptyAttrs&&!t.xmlMode&&w===""?a:`${a}="${o(w)}"`}).join(" ")}var CM=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function $0(r,t={}){let e="length"in r?r:[r],o="";for(let a=0;a<e.length;a++)o+=g4(e[a],t);return o}function g4(r,t){switch(r.type){case j6:return $0(r.children,t);case Y6:case H6:return v4(r);case $6:return C4(r);case X6:return w4(r);case G6:case W6:case Z6:return y4(r,t);case q6:return x4(r,t)}}var _4=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),b4=new Set(["svg","math"]);function y4(r,t){var e;t.xmlMode==="foreign"&&(r.name=(e=d4.get(r.name))!==null&&e!==void 0?e:r.name,r.parent&&_4.has(r.parent.name)&&(t=si(ft({},t),{xmlMode:!1}))),!t.xmlMode&&b4.has(r.name)&&(t=si(ft({},t),{xmlMode:"foreign"}));let o=`<${r.name}`,a=m4(r.attribs,t);return a&&(o+=` ${a}`),r.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&CM.has(r.name))?(t.xmlMode||(o+=" "),o+="/>"):(o+=">",r.children.length>0&&(o+=$0(r.children,t)),(t.xmlMode||!CM.has(r.name))&&(o+=`</${r.name}>`)),o}function v4(r){return`<${r.data}>`}function x4(r,t){var e;let o=r.data||"";return((e=t.encodeEntities)!==null&&e!==void 0?e:t.decodeEntities)!==!1&&!(!t.xmlMode&&r.parent&&p4.has(r.parent.name))&&(o=t.xmlMode||t.encodeEntities!=="utf8"?aI(o):u4(o)),o}function w4(r){return`<![CDATA[${r.children[0].data}]]>`}function C4(r){return`<!--${r.data}-->`}function cI(r,t){return $0(r,t)}function E4(r,t){return ru(r)?r.children.map(e=>cI(e,t)).join(""):""}function tm(r){return Array.isArray(r)?r.map(tm).join(""):Os(r)?r.name==="br"?`
`:tm(r.children):H0(r)?tm(r.children):ld(r)?r.data:""}function R0(r){return Array.isArray(r)?r.map(R0).join(""):ru(r)&&!cx(r)?R0(r.children):ld(r)?r.data:""}function H1(r){return Array.isArray(r)?r.map(H1).join(""):ru(r)&&(r.type===br.Tag||H0(r))?H1(r.children):ld(r)?r.data:""}function uI(r){return ru(r)?r.children:[]}function dI(r){return r.parent||null}function S4(r){let t=dI(r);if(t!=null)return uI(t);let e=[r],{prev:o,next:a}=r;for(;o!=null;)e.unshift(o),{prev:o}=o;for(;a!=null;)e.push(a),{next:a}=a;return e}function T4(r,t){var e;return(e=r.attribs)===null||e===void 0?void 0:e[t]}function M4(r,t){return r.attribs!=null&&Object.prototype.hasOwnProperty.call(r.attribs,t)&&r.attribs[t]!=null}function I4(r){return r.name}function A4(r){let{next:t}=r;for(;t!==null&&!Os(t);)({next:t}=t);return t}function k4(r){let{prev:t}=r;for(;t!==null&&!Os(t);)({prev:t}=t);return t}function cd(r){if(r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),r.parent){let t=r.parent.children,e=t.lastIndexOf(r);e>=0&&t.splice(e,1)}r.next=null,r.prev=null,r.parent=null}function P4(r,t){let e=t.prev=r.prev;e&&(e.next=t);let o=t.next=r.next;o&&(o.prev=t);let a=t.parent=r.parent;if(a){let s=a.children;s[s.lastIndexOf(r)]=t,r.parent=null}}function $1(r,t){if(cd(t),t.next=null,t.parent=r,r.children.push(t)>1){let e=r.children[r.children.length-2];e.next=t,t.prev=e}else t.prev=null}function D4(r,t){cd(t);let{parent:e}=r,o=r.next;if(t.next=o,t.prev=r,r.next=t,t.parent=e,o){if(o.prev=t,e){let a=e.children;a.splice(a.lastIndexOf(o),0,t)}}else e&&e.children.push(t)}function R4(r,t){if(cd(t),t.parent=r,t.prev=null,r.children.unshift(t)!==1){let e=r.children[1];e.prev=t,t.next=e}else t.next=null}function hI(r,t){cd(t);let{parent:e}=r;if(e){let o=e.children;o.splice(o.indexOf(r),0,t)}r.prev&&(r.prev.next=t),t.parent=e,t.prev=r.prev,t.next=r,r.prev=t}function G0(r,t,e=!0,o=1/0){return pI(r,Array.isArray(t)?t:[t],e,o)}function pI(r,t,e,o){let a=[],s=[t],_=[0];for(;;){if(_[0]>=s[0].length){if(_.length===1)return a;s.shift(),_.shift();continue}let w=s[0][_[0]++];if(r(w)&&(a.push(w),--o<=0))return a;e&&ru(w)&&w.children.length>0&&(_.unshift(0),s.unshift(w.children))}}function O4(r,t){return t.find(r)}function ux(r,t,e=!0){let o=null;for(let a=0;a<t.length&&!o;a++){let s=t[a];if(Os(s))r(s)?o=s:e&&s.children.length>0&&(o=ux(r,s.children,!0));else continue}return o}function fI(r,t){return t.some(e=>Os(e)&&(r(e)||fI(r,e.children)))}function L4(r,t){let e=[],o=[t],a=[0];for(;;){if(a[0]>=o[0].length){if(o.length===1)return e;o.shift(),a.shift();continue}let s=o[0][a[0]++];Os(s)&&(r(s)&&e.push(s),s.children.length>0&&(a.unshift(0),o.unshift(s.children)))}}var O0={tag_name(r){return typeof r=="function"?t=>Os(t)&&r(t.name):r==="*"?Os:t=>Os(t)&&t.name===r},tag_type(r){return typeof r=="function"?t=>r(t.type):t=>t.type===r},tag_contains(r){return typeof r=="function"?t=>ld(t)&&r(t.data):t=>ld(t)&&t.data===r}};function mI(r,t){return typeof t=="function"?e=>Os(e)&&t(e.attribs[r]):e=>Os(e)&&e.attribs[r]===t}function N4(r,t){return e=>r(e)||t(e)}function gI(r){let t=Object.keys(r).map(e=>{let o=r[e];return Object.prototype.hasOwnProperty.call(O0,e)?O0[e](o):mI(e,o)});return t.length===0?null:t.reduce(N4)}function F4(r,t){let e=gI(r);return e?e(t):!0}function z4(r,t,e,o=1/0){let a=gI(r);return a?G0(a,t,e,o):[]}function B4(r,t,e=!0){return Array.isArray(t)||(t=[t]),ux(mI("id",r),t,e)}function Vh(r,t,e=!0,o=1/0){return G0(O0.tag_name(r),t,e,o)}function V4(r,t,e=!0,o=1/0){return G0(O0.tag_type(r),t,e,o)}function U4(r){let t=r.length;for(;--t>=0;){let e=r[t];if(t>0&&r.lastIndexOf(e,t-1)>=0){r.splice(t,1);continue}for(let o=e.parent;o;o=o.parent)if(r.includes(o)){r.splice(t,1);break}}return r}var Wa=function(r){return r[r.DISCONNECTED=1]="DISCONNECTED",r[r.PRECEDING=2]="PRECEDING",r[r.FOLLOWING=4]="FOLLOWING",r[r.CONTAINS=8]="CONTAINS",r[r.CONTAINED_BY=16]="CONTAINED_BY",r}(Wa||{});function _I(r,t){let e=[],o=[];if(r===t)return 0;let a=ru(r)?r:r.parent;for(;a;)e.unshift(a),a=a.parent;for(a=ru(t)?t:t.parent;a;)o.unshift(a),a=a.parent;let s=Math.min(e.length,o.length),_=0;for(;_<s&&e[_]===o[_];)_++;if(_===0)return Wa.DISCONNECTED;let w=e[_-1],E=w.children,M=e[_],I=o[_];return E.indexOf(M)>E.indexOf(I)?w===t?Wa.FOLLOWING|Wa.CONTAINED_BY:Wa.FOLLOWING:w===r?Wa.PRECEDING|Wa.CONTAINS:Wa.PRECEDING}function j4(r){return r=r.filter((t,e,o)=>!o.includes(t,e+1)),r.sort((t,e)=>{let o=_I(t,e);return o&Wa.PRECEDING?-1:o&Wa.FOLLOWING?1:0}),r}function q4(r){let t=L0(Z4,r);return t?t.name==="feed"?H4(t):$4(t):null}function H4(r){var t;let e=r.children,o={type:"atom",items:Vh("entry",e).map(_=>{var w;let{children:E}=_,M={media:bI(E)};ds(M,"id","id",E),ds(M,"title","title",E);let I=(w=L0("link",E))===null||w===void 0?void 0:w.attribs.href;I&&(M.link=I);let A=iu("summary",E)||iu("content",E);A&&(M.description=A);let R=iu("updated",E);return R&&(M.pubDate=new Date(R)),M})};ds(o,"id","id",e),ds(o,"title","title",e);let a=(t=L0("link",e))===null||t===void 0?void 0:t.attribs.href;a&&(o.link=a),ds(o,"description","subtitle",e);let s=iu("updated",e);return s&&(o.updated=new Date(s)),ds(o,"author","email",e,!0),o}function $4(r){var t,e;let o=(e=(t=L0("channel",r.children))===null||t===void 0?void 0:t.children)!==null&&e!==void 0?e:[],a={type:r.name.substr(0,3),id:"",items:Vh("item",r.children).map(_=>{let{children:w}=_,E={media:bI(w)};ds(E,"id","guid",w),ds(E,"title","title",w),ds(E,"link","link",w),ds(E,"description","description",w);let M=iu("pubDate",w)||iu("dc:date",w);return M&&(E.pubDate=new Date(M)),E})};ds(a,"title","title",o),ds(a,"link","link",o),ds(a,"description","description",o);let s=iu("lastBuildDate",o);return s&&(a.updated=new Date(s)),ds(a,"author","managingEditor",o,!0),a}var G4=["url","type","lang"],W4=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function bI(r){return Vh("media:content",r).map(t=>{let{attribs:e}=t,o={medium:e.medium,isDefault:!!e.isDefault};for(let a of G4)e[a]&&(o[a]=e[a]);for(let a of W4)e[a]&&(o[a]=parseInt(e[a],10));return e.expression&&(o.expression=e.expression),o})}function L0(r,t){return Vh(r,t,!0,1)[0]}function iu(r,t,e=!1){return R0(Vh(r,t,e,1)).trim()}function ds(r,t,e,o,a=!1){let s=iu(e,o,a);s&&(r[t]=s)}function Z4(r){return r==="rss"||r==="feed"||r==="rdf:RDF"}var yI=Object.freeze({__proto__:null,get DocumentPosition(){return Wa},append:D4,appendChild:$1,compareDocumentPosition:_I,existsOne:fI,filter:G0,find:pI,findAll:L4,findOne:ux,findOneChild:O4,getAttributeValue:T4,getChildren:uI,getElementById:B4,getElements:z4,getElementsByTagName:Vh,getElementsByTagType:V4,getFeed:q4,getInnerHTML:E4,getName:I4,getOuterHTML:cI,getParent:dI,getSiblings:S4,getText:tm,hasAttrib:M4,hasChildren:ru,innerText:H1,isCDATA:H0,isComment:cx,isDocument:oI,isTag:Os,isText:ld,nextElementSibling:A4,prepend:hI,prependChild:R4,prevElementSibling:k4,removeElement:cd,removeSubsets:U4,replaceElement:P4,testElement:F4,textContent:R0,uniqueSort:j4}),R1,EM;function X4(){return EM||(EM=1,R1={trueFunc:function(){return!0},falseFunc:function(){return!1}}),R1}var Y4=X4(),Hi=z0(Y4),bi=function(r){return r.Attribute="attribute",r.Pseudo="pseudo",r.PseudoElement="pseudo-element",r.Tag="tag",r.Universal="universal",r.Adjacent="adjacent",r.Child="child",r.Descendant="descendant",r.Parent="parent",r.Sibling="sibling",r.ColumnCombinator="column-combinator",r}(bi||{}),Kn=function(r){return r.Any="any",r.Element="element",r.End="end",r.Equals="equals",r.Exists="exists",r.Hyphen="hyphen",r.Not="not",r.Start="start",r}(Kn||{}),SM=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,K4=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,Q4=new Map([[126,Kn.Element],[94,Kn.Start],[36,Kn.End],[42,Kn.Any],[33,Kn.Not],[124,Kn.Hyphen]]),J4=new Set(["has","not","matches","is","where","host","host-context"]);function eO(r){switch(r.type){case bi.Adjacent:case bi.Child:case bi.Descendant:case bi.Parent:case bi.Sibling:case bi.ColumnCombinator:return!0;default:return!1}}var tO=new Set(["contains","icontains"]);function iO(r,t,e){let o=parseInt(t,16)-65536;return o!==o||e?t:o<0?String.fromCharCode(o+65536):String.fromCharCode(o>>10|55296,o&1023|56320)}function Jf(r){return r.replace(K4,iO)}function O1(r){return r===39||r===34}function TM(r){return r===32||r===9||r===10||r===12||r===13}function dx(r){let t=[],e=vI(t,`${r}`,0);if(e<r.length)throw new Error(`Unmatched selector: ${r.slice(e)}`);return t}function vI(r,t,e){let o=[];function a(R){let $=t.slice(e+R).match(SM);if(!$)throw new Error(`Expected name, found ${t.slice(e)}`);let[W]=$;return e+=R+W.length,Jf(W)}function s(R){for(e+=R;e<t.length&&TM(t.charCodeAt(e));)e++}function _(){e+=1;let R=e,$=1;for(;$>0&&e<t.length;e++)t.charCodeAt(e)===40&&!w(e)?$++:t.charCodeAt(e)===41&&!w(e)&&$--;if($)throw new Error("Parenthesis not matched");return Jf(t.slice(R,e-1))}function w(R){let $=0;for(;t.charCodeAt(--R)===92;)$++;return($&1)===1}function E(){if(o.length>0&&eO(o[o.length-1]))throw new Error("Did not expect successive traversals.")}function M(R){if(o.length>0&&o[o.length-1].type===bi.Descendant){o[o.length-1].type=R;return}E(),o.push({type:R})}function I(R,$){o.push({type:bi.Attribute,name:R,action:$,value:a(1),namespace:null,ignoreCase:"quirks"})}function A(){if(o.length&&o[o.length-1].type===bi.Descendant&&o.pop(),o.length===0)throw new Error("Empty sub-selector");r.push(o)}if(s(0),t.length===e)return e;e:for(;e<t.length;){let R=t.charCodeAt(e);switch(R){case 32:case 9:case 10:case 12:case 13:{(o.length===0||o[0].type!==bi.Descendant)&&(E(),o.push({type:bi.Descendant})),s(1);break}case 62:{M(bi.Child),s(1);break}case 60:{M(bi.Parent),s(1);break}case 126:{M(bi.Sibling),s(1);break}case 43:{M(bi.Adjacent),s(1);break}case 46:{I("class",Kn.Element);break}case 35:{I("id",Kn.Equals);break}case 91:{s(1);let $,W=null;t.charCodeAt(e)===124?$=a(1):t.startsWith("*|",e)?(W="*",$=a(2)):($=a(0),t.charCodeAt(e)===124&&t.charCodeAt(e+1)!==61&&(W=$,$=a(1))),s(0);let G=Kn.Exists,pe=Q4.get(t.charCodeAt(e));if(pe){if(G=pe,t.charCodeAt(e+1)!==61)throw new Error("Expected `=`");s(2)}else t.charCodeAt(e)===61&&(G=Kn.Equals,s(1));let le="",ne=null;if(G!=="exists"){if(O1(t.charCodeAt(e))){let oe=t.charCodeAt(e),Ve=e+1;for(;Ve<t.length&&(t.charCodeAt(Ve)!==oe||w(Ve));)Ve+=1;if(t.charCodeAt(Ve)!==oe)throw new Error("Attribute value didn't end");le=Jf(t.slice(e+1,Ve)),e=Ve+1}else{let oe=e;for(;e<t.length&&(!TM(t.charCodeAt(e))&&t.charCodeAt(e)!==93||w(e));)e+=1;le=Jf(t.slice(oe,e))}s(0);let ue=t.charCodeAt(e)|32;ue===115?(ne=!1,s(1)):ue===105&&(ne=!0,s(1))}if(t.charCodeAt(e)!==93)throw new Error("Attribute selector didn't terminate");e+=1;let re={type:bi.Attribute,name:$,action:G,value:le,namespace:W,ignoreCase:ne};o.push(re);break}case 58:{if(t.charCodeAt(e+1)===58){o.push({type:bi.PseudoElement,name:a(2).toLowerCase(),data:t.charCodeAt(e)===40?_():null});continue}let $=a(1).toLowerCase(),W=null;if(t.charCodeAt(e)===40)if(J4.has($)){if(O1(t.charCodeAt(e+1)))throw new Error(`Pseudo-selector ${$} cannot be quoted`);if(W=[],e=vI(W,t,e+1),t.charCodeAt(e)!==41)throw new Error(`Missing closing parenthesis in :${$} (${t})`);e+=1}else{if(W=_(),tO.has($)){let G=W.charCodeAt(0);G===W.charCodeAt(W.length-1)&&O1(G)&&(W=W.slice(1,-1))}W=Jf(W)}o.push({type:bi.Pseudo,name:$,data:W});break}case 44:{A(),o=[],s(1);break}default:{if(t.startsWith("/*",e)){let G=t.indexOf("*/",e+2);if(G<0)throw new Error("Comment was not terminated");e=G+2,o.length===0&&s(0);break}let $=null,W;if(R===42)e+=1,W="*";else if(R===124){if(W="",t.charCodeAt(e+1)===124){M(bi.ColumnCombinator),s(2);break}}else if(SM.test(t.slice(e)))W=a(0);else break e;t.charCodeAt(e)===124&&t.charCodeAt(e+1)!==124&&($=W,t.charCodeAt(e+1)===42?(W="*",e+=2):W=a(1)),o.push(W==="*"?{type:bi.Universal,namespace:$}:{type:bi.Tag,name:W,namespace:$})}}}return A(),e}var rO=["\\",'"'],VU=[...rO,"(",")"],xI=new Map([[bi.Universal,50],[bi.Tag,30],[bi.Attribute,1],[bi.Pseudo,0]]);function hx(r){return!xI.has(r.type)}var nO=new Map([[Kn.Exists,10],[Kn.Equals,8],[Kn.Not,7],[Kn.Start,6],[Kn.End,6],[Kn.Any,5]]);function oO(r){let t=r.map(wI);for(let e=1;e<r.length;e++){let o=t[e];if(!(o<0))for(let a=e-1;a>=0&&o<t[a];a--){let s=r[a+1];r[a+1]=r[a],r[a]=s,t[a+1]=t[a],t[a]=o}}}function wI(r){var t,e;let o=(t=xI.get(r.type))!==null&&t!==void 0?t:-1;return r.type===bi.Attribute?(o=(e=nO.get(r.action))!==null&&e!==void 0?e:4,r.action===Kn.Equals&&r.name==="id"&&(o=9),r.ignoreCase&&(o>>=1)):r.type===bi.Pseudo&&(r.data?r.name==="has"||r.name==="contains"?o=0:Array.isArray(r.data)?(o=Math.min(...r.data.map(a=>Math.min(...a.map(wI)))),o<0&&(o=0)):o=2:o=3),o}var sO=/[-[\]{}()*+?.,\\^$|#\s]/g;function MM(r){return r.replace(sO,"\\$&")}var aO=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function nd(r,t){return typeof r.ignoreCase=="boolean"?r.ignoreCase:r.ignoreCase==="quirks"?!!t.quirksMode:!t.xmlMode&&aO.has(r.name)}var lO={equals(r,t,e){let{adapter:o}=e,{name:a}=t,{value:s}=t;return nd(t,e)?(s=s.toLowerCase(),_=>{let w=o.getAttributeValue(_,a);return w!=null&&w.length===s.length&&w.toLowerCase()===s&&r(_)}):_=>o.getAttributeValue(_,a)===s&&r(_)},hyphen(r,t,e){let{adapter:o}=e,{name:a}=t,{value:s}=t,_=s.length;return nd(t,e)?(s=s.toLowerCase(),function(E){let M=o.getAttributeValue(E,a);return M!=null&&(M.length===_||M.charAt(_)==="-")&&M.substr(0,_).toLowerCase()===s&&r(E)}):function(E){let M=o.getAttributeValue(E,a);return M!=null&&(M.length===_||M.charAt(_)==="-")&&M.substr(0,_)===s&&r(E)}},element(r,t,e){let{adapter:o}=e,{name:a,value:s}=t;if(/\s/.test(s))return Hi.falseFunc;let _=new RegExp(`(?:^|\\s)${MM(s)}(?:$|\\s)`,nd(t,e)?"i":"");return function(E){let M=o.getAttributeValue(E,a);return M!=null&&M.length>=s.length&&_.test(M)&&r(E)}},exists(r,{name:t},{adapter:e}){return o=>e.hasAttrib(o,t)&&r(o)},start(r,t,e){let{adapter:o}=e,{name:a}=t,{value:s}=t,_=s.length;return _===0?Hi.falseFunc:nd(t,e)?(s=s.toLowerCase(),w=>{let E=o.getAttributeValue(w,a);return E!=null&&E.length>=_&&E.substr(0,_).toLowerCase()===s&&r(w)}):w=>{var E;return!!(!((E=o.getAttributeValue(w,a))===null||E===void 0)&&E.startsWith(s))&&r(w)}},end(r,t,e){let{adapter:o}=e,{name:a}=t,{value:s}=t,_=-s.length;return _===0?Hi.falseFunc:nd(t,e)?(s=s.toLowerCase(),w=>{var E;return((E=o.getAttributeValue(w,a))===null||E===void 0?void 0:E.substr(_).toLowerCase())===s&&r(w)}):w=>{var E;return!!(!((E=o.getAttributeValue(w,a))===null||E===void 0)&&E.endsWith(s))&&r(w)}},any(r,t,e){let{adapter:o}=e,{name:a,value:s}=t;if(s==="")return Hi.falseFunc;if(nd(t,e)){let _=new RegExp(MM(s),"i");return function(E){let M=o.getAttributeValue(E,a);return M!=null&&M.length>=s.length&&_.test(M)&&r(E)}}return _=>{var w;return!!(!((w=o.getAttributeValue(_,a))===null||w===void 0)&&w.includes(s))&&r(_)}},not(r,t,e){let{adapter:o}=e,{name:a}=t,{value:s}=t;return s===""?_=>!!o.getAttributeValue(_,a)&&r(_):nd(t,e)?(s=s.toLowerCase(),_=>{let w=o.getAttributeValue(_,a);return(w==null||w.length!==s.length||w.toLowerCase()!==s)&&r(_)}):_=>o.getAttributeValue(_,a)!==s&&r(_)}},cO=new Set([9,10,12,13,32]),IM=48,uO=57;function dO(r){if(r=r.trim().toLowerCase(),r==="even")return[2,0];if(r==="odd")return[2,1];let t=0,e=0,o=s(),a=_();if(t<r.length&&r.charAt(t)==="n"&&(t++,e=o*(a??1),w(),t<r.length?(o=s(),w(),a=_()):o=a=0),a===null||t<r.length)throw new Error(`n-th rule couldn't be parsed ('${r}')`);return[e,o*a];function s(){return r.charAt(t)==="-"?(t++,-1):(r.charAt(t)==="+"&&t++,1)}function _(){let E=t,M=0;for(;t<r.length&&r.charCodeAt(t)>=IM&&r.charCodeAt(t)<=uO;)M=M*10+(r.charCodeAt(t)-IM),t++;return t===E?null:M}function w(){for(;t<r.length&&cO.has(r.charCodeAt(t));)t++}}function hO(r){let t=r[0],e=r[1]-1;if(e<0&&t<=0)return Hi.falseFunc;if(t===-1)return s=>s<=e;if(t===0)return s=>s===e;if(t===1)return e<0?Hi.trueFunc:s=>s>=e;let o=Math.abs(t),a=(e%o+o)%o;return t>1?s=>s>=e&&s%o===a:s=>s<=e&&s%o===a}function T0(r){return hO(dO(r))}function M0(r,t){return e=>{let o=t.getParent(e);return o!=null&&t.isTag(o)&&r(e)}}var G1={contains(r,t,{adapter:e}){return function(a){return r(a)&&e.getText(a).includes(t)}},icontains(r,t,{adapter:e}){let o=t.toLowerCase();return function(s){return r(s)&&e.getText(s).toLowerCase().includes(o)}},"nth-child"(r,t,{adapter:e,equals:o}){let a=T0(t);return a===Hi.falseFunc?Hi.falseFunc:a===Hi.trueFunc?M0(r,e):function(_){let w=e.getSiblings(_),E=0;for(let M=0;M<w.length&&!o(_,w[M]);M++)e.isTag(w[M])&&E++;return a(E)&&r(_)}},"nth-last-child"(r,t,{adapter:e,equals:o}){let a=T0(t);return a===Hi.falseFunc?Hi.falseFunc:a===Hi.trueFunc?M0(r,e):function(_){let w=e.getSiblings(_),E=0;for(let M=w.length-1;M>=0&&!o(_,w[M]);M--)e.isTag(w[M])&&E++;return a(E)&&r(_)}},"nth-of-type"(r,t,{adapter:e,equals:o}){let a=T0(t);return a===Hi.falseFunc?Hi.falseFunc:a===Hi.trueFunc?M0(r,e):function(_){let w=e.getSiblings(_),E=0;for(let M=0;M<w.length;M++){let I=w[M];if(o(_,I))break;e.isTag(I)&&e.getName(I)===e.getName(_)&&E++}return a(E)&&r(_)}},"nth-last-of-type"(r,t,{adapter:e,equals:o}){let a=T0(t);return a===Hi.falseFunc?Hi.falseFunc:a===Hi.trueFunc?M0(r,e):function(_){let w=e.getSiblings(_),E=0;for(let M=w.length-1;M>=0;M--){let I=w[M];if(o(_,I))break;e.isTag(I)&&e.getName(I)===e.getName(_)&&E++}return a(E)&&r(_)}},root(r,t,{adapter:e}){return o=>{let a=e.getParent(o);return(a==null||!e.isTag(a))&&r(o)}},scope(r,t,e,o){let{equals:a}=e;return!o||o.length===0?G1.root(r,t,e):o.length===1?s=>a(o[0],s)&&r(s):s=>o.includes(s)&&r(s)},hover:L1("isHovered"),visited:L1("isVisited"),active:L1("isActive")};function L1(r){return function(e,o,{adapter:a}){let s=a[r];return typeof s!="function"?Hi.falseFunc:function(w){return s(w)&&e(w)}}}var AM={empty(r,{adapter:t}){return!t.getChildren(r).some(e=>t.isTag(e)||t.getText(e)!=="")},"first-child"(r,{adapter:t,equals:e}){if(t.prevElementSibling)return t.prevElementSibling(r)==null;let o=t.getSiblings(r).find(a=>t.isTag(a));return o!=null&&e(r,o)},"last-child"(r,{adapter:t,equals:e}){let o=t.getSiblings(r);for(let a=o.length-1;a>=0;a--){if(e(r,o[a]))return!0;if(t.isTag(o[a]))break}return!1},"first-of-type"(r,{adapter:t,equals:e}){let o=t.getSiblings(r),a=t.getName(r);for(let s=0;s<o.length;s++){let _=o[s];if(e(r,_))return!0;if(t.isTag(_)&&t.getName(_)===a)break}return!1},"last-of-type"(r,{adapter:t,equals:e}){let o=t.getSiblings(r),a=t.getName(r);for(let s=o.length-1;s>=0;s--){let _=o[s];if(e(r,_))return!0;if(t.isTag(_)&&t.getName(_)===a)break}return!1},"only-of-type"(r,{adapter:t,equals:e}){let o=t.getName(r);return t.getSiblings(r).every(a=>e(r,a)||!t.isTag(a)||t.getName(a)!==o)},"only-child"(r,{adapter:t,equals:e}){return t.getSiblings(r).every(o=>e(r,o)||!t.isTag(o))}};function kM(r,t,e,o){if(e===null){if(r.length>o)throw new Error(`Pseudo-class :${t} requires an argument`)}else if(r.length===o)throw new Error(`Pseudo-class :${t} doesn't have any arguments`)}var pO={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},CI={};function fO(r,t){return r===Hi.falseFunc?Hi.falseFunc:e=>t.isTag(e)&&r(e)}function EI(r,t){let e=t.getSiblings(r);if(e.length<=1)return[];let o=e.indexOf(r);return o<0||o===e.length-1?[]:e.slice(o+1).filter(t.isTag)}function W1(r){return{xmlMode:!!r.xmlMode,lowerCaseAttributeNames:!!r.lowerCaseAttributeNames,lowerCaseTags:!!r.lowerCaseTags,quirksMode:!!r.quirksMode,cacheResults:!!r.cacheResults,pseudos:r.pseudos,adapter:r.adapter,equals:r.equals}}var N1=(r,t,e,o,a)=>{let s=a(t,W1(e),o);return s===Hi.trueFunc?r:s===Hi.falseFunc?Hi.falseFunc:_=>s(_)&&r(_)},F1={is:N1,matches:N1,where:N1,not(r,t,e,o,a){let s=a(t,W1(e),o);return s===Hi.falseFunc?r:s===Hi.trueFunc?Hi.falseFunc:_=>!s(_)&&r(_)},has(r,t,e,o,a){let{adapter:s}=e,_=W1(e);_.relativeSelector=!0;let w=t.some(I=>I.some(hx))?[CI]:void 0,E=a(t,_,w);if(E===Hi.falseFunc)return Hi.falseFunc;let M=fO(E,s);if(w&&E!==Hi.trueFunc){let{shouldTestNextSiblings:I=!1}=E;return A=>{if(!r(A))return!1;w[0]=A;let R=s.getChildren(A),$=I?[...R,...EI(A,s)]:R;return s.existsOne(M,$)}}return I=>r(I)&&s.existsOne(M,s.getChildren(I))}};function mO(r,t,e,o,a){var s;let{name:_,data:w}=t;if(Array.isArray(w)){if(!(_ in F1))throw new Error(`Unknown pseudo-class :${_}(${w})`);return F1[_](r,w,e,o,a)}let E=(s=e.pseudos)===null||s===void 0?void 0:s[_],M=typeof E=="string"?E:pO[_];if(typeof M=="string"){if(w!=null)throw new Error(`Pseudo ${_} doesn't have any arguments`);let I=dx(M);return F1.is(r,I,e,o,a)}if(typeof E=="function")return kM(E,_,w,1),I=>E(I,w)&&r(I);if(_ in G1)return G1[_](r,w,e,o);if(_ in AM){let I=AM[_];return kM(I,_,w,2),A=>I(A,e,w)&&r(A)}throw new Error(`Unknown pseudo-class :${_}`)}function z1(r,t){let e=t.getParent(r);return e&&t.isTag(e)?e:null}function gO(r,t,e,o,a){let{adapter:s,equals:_}=e;switch(t.type){case bi.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case bi.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case bi.Attribute:{if(t.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!e.xmlMode||e.lowerCaseAttributeNames)&&(t.name=t.name.toLowerCase()),lO[t.action](r,t,e)}case bi.Pseudo:return mO(r,t,e,o,a);case bi.Tag:{if(t.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:w}=t;return(!e.xmlMode||e.lowerCaseTags)&&(w=w.toLowerCase()),function(M){return s.getName(M)===w&&r(M)}}case bi.Descendant:{if(e.cacheResults===!1||typeof WeakSet>"u")return function(M){let I=M;for(;I=z1(I,s);)if(r(I))return!0;return!1};let w=new WeakSet;return function(M){let I=M;for(;I=z1(I,s);)if(!w.has(I)){if(s.isTag(I)&&r(I))return!0;w.add(I)}return!1}}case"_flexibleDescendant":return function(E){let M=E;do if(r(M))return!0;while(M=z1(M,s));return!1};case bi.Parent:return function(E){return s.getChildren(E).some(M=>s.isTag(M)&&r(M))};case bi.Child:return function(E){let M=s.getParent(E);return M!=null&&s.isTag(M)&&r(M)};case bi.Sibling:return function(E){let M=s.getSiblings(E);for(let I=0;I<M.length;I++){let A=M[I];if(_(E,A))break;if(s.isTag(A)&&r(A))return!0}return!1};case bi.Adjacent:return s.prevElementSibling?function(E){let M=s.prevElementSibling(E);return M!=null&&r(M)}:function(E){let M=s.getSiblings(E),I;for(let A=0;A<M.length;A++){let R=M[A];if(_(E,R))break;s.isTag(R)&&(I=R)}return!!I&&r(I)};case bi.Universal:{if(t.namespace!=null&&t.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return r}}}function _O(r,t,e){let o=typeof r=="string"?dx(r):r;return TI(o,t,e)}function SI(r){return r.type===bi.Pseudo&&(r.name==="scope"||Array.isArray(r.data)&&r.data.some(t=>t.some(SI)))}var bO={type:bi.Descendant},yO={type:"_flexibleDescendant"},vO={type:bi.Pseudo,name:"scope",data:null};function xO(r,{adapter:t},e){let o=!!e?.every(a=>{let s=t.isTag(a)&&t.getParent(a);return a===CI||s&&t.isTag(s)});for(let a of r){if(!(a.length>0&&hx(a[0])&&a[0].type!==bi.Descendant))if(o&&!a.some(SI))a.unshift(bO);else continue;a.unshift(vO)}}function TI(r,t,e){var o;r.forEach(oO),e=(o=t.context)!==null&&o!==void 0?o:e;let a=Array.isArray(e),s=e&&(Array.isArray(e)?e:[e]);if(t.relativeSelector!==!1)xO(r,t,s);else if(r.some(E=>E.length>0&&hx(E[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let _=!1,w=r.map(E=>{if(E.length>=2){let[M,I]=E;M.type!==bi.Pseudo||M.name!=="scope"||(a&&I.type===bi.Descendant?E[1]=yO:(I.type===bi.Adjacent||I.type===bi.Sibling)&&(_=!0))}return wO(E,t,s)}).reduce(CO,Hi.falseFunc);return w.shouldTestNextSiblings=_,w}function wO(r,t,e){var o;return r.reduce((a,s)=>a===Hi.falseFunc?Hi.falseFunc:gO(a,s,t,e,TI),(o=t.rootFunc)!==null&&o!==void 0?o:Hi.trueFunc)}function CO(r,t){return t===Hi.falseFunc||r===Hi.trueFunc?r:r===Hi.falseFunc||t===Hi.trueFunc?t:function(o){return r(o)||t(o)}}var MI=(r,t)=>r===t,EO={adapter:yI,equals:MI};function SO(r){var t,e,o,a;let s=r??EO;return(t=s.adapter)!==null&&t!==void 0||(s.adapter=yI),(e=s.equals)!==null&&e!==void 0||(s.equals=(a=(o=s.adapter)===null||o===void 0?void 0:o.equals)!==null&&a!==void 0?a:MI),s}function II(r){return function(e,o,a){let s=SO(a);typeof e!="function"&&(e=_O(e,s,o));let _=TO(o,s.adapter,e.shouldTestNextSiblings);return r(e,_,s)}}function TO(r,t,e=!1){return e&&(r=MO(r,t)),Array.isArray(r)?t.removeSubsets(r):t.getChildren(r)}function MO(r,t){let e=Array.isArray(r)?r.slice(0):[r],o=e.length;for(let a=0;a<o;a++){let s=EI(e[a],t);e.push(...s)}return e}var AI=II((r,t,e)=>r===Hi.falseFunc||!t||t.length===0?[]:e.adapter.findAll(r,t)),px=II((r,t,e)=>r===Hi.falseFunc||!t||t.length===0?null:e.adapter.findOne(r,t)),mi=function(r){return r[r.Tab=9]="Tab",r[r.NewLine=10]="NewLine",r[r.FormFeed=12]="FormFeed",r[r.CarriageReturn=13]="CarriageReturn",r[r.Space=32]="Space",r[r.ExclamationMark=33]="ExclamationMark",r[r.Number=35]="Number",r[r.Amp=38]="Amp",r[r.SingleQuote=39]="SingleQuote",r[r.DoubleQuote=34]="DoubleQuote",r[r.Dash=45]="Dash",r[r.Slash=47]="Slash",r[r.Zero=48]="Zero",r[r.Nine=57]="Nine",r[r.Semi=59]="Semi",r[r.Lt=60]="Lt",r[r.Eq=61]="Eq",r[r.Gt=62]="Gt",r[r.Questionmark=63]="Questionmark",r[r.UpperA=65]="UpperA",r[r.LowerA=97]="LowerA",r[r.UpperF=70]="UpperF",r[r.LowerF=102]="LowerF",r[r.UpperZ=90]="UpperZ",r[r.LowerZ=122]="LowerZ",r[r.LowerX=120]="LowerX",r[r.OpeningSquareBracket=91]="OpeningSquareBracket",r}(mi||{}),St=function(r){return r[r.Text=1]="Text",r[r.BeforeTagName=2]="BeforeTagName",r[r.InTagName=3]="InTagName",r[r.InSelfClosingTag=4]="InSelfClosingTag",r[r.BeforeClosingTagName=5]="BeforeClosingTagName",r[r.InClosingTagName=6]="InClosingTagName",r[r.AfterClosingTagName=7]="AfterClosingTagName",r[r.BeforeAttributeName=8]="BeforeAttributeName",r[r.InAttributeName=9]="InAttributeName",r[r.AfterAttributeName=10]="AfterAttributeName",r[r.BeforeAttributeValue=11]="BeforeAttributeValue",r[r.InAttributeValueDq=12]="InAttributeValueDq",r[r.InAttributeValueSq=13]="InAttributeValueSq",r[r.InAttributeValueNq=14]="InAttributeValueNq",r[r.BeforeDeclaration=15]="BeforeDeclaration",r[r.InDeclaration=16]="InDeclaration",r[r.InProcessingInstruction=17]="InProcessingInstruction",r[r.BeforeComment=18]="BeforeComment",r[r.CDATASequence=19]="CDATASequence",r[r.InSpecialComment=20]="InSpecialComment",r[r.InCommentLike=21]="InCommentLike",r[r.BeforeSpecialS=22]="BeforeSpecialS",r[r.BeforeSpecialT=23]="BeforeSpecialT",r[r.SpecialStartSequence=24]="SpecialStartSequence",r[r.InSpecialTag=25]="InSpecialTag",r[r.InEntity=26]="InEntity",r}(St||{});function Ql(r){return r===mi.Space||r===mi.NewLine||r===mi.Tab||r===mi.FormFeed||r===mi.CarriageReturn}function I0(r){return r===mi.Slash||r===mi.Gt||Ql(r)}function IO(r){return r>=mi.LowerA&&r<=mi.LowerZ||r>=mi.UpperA&&r<=mi.UpperZ}var ec=function(r){return r[r.NoValue=0]="NoValue",r[r.Unquoted=1]="Unquoted",r[r.Single=2]="Single",r[r.Double=3]="Double",r}(ec||{}),mo={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])},Z1=class{constructor({xmlMode:t=!1,decodeEntities:e=!0},o){this.cbs=o,this.state=St.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=St.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=t,this.decodeEntities=e,this.entityDecoder=new q1(t?J6:Q6,(a,s)=>this.emitCodePoint(a,s))}reset(){this.state=St.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=St.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(t){this.offset+=this.buffer.length,this.buffer=t,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(t){t===mi.Lt||!this.decodeEntities&&this.fastForwardTo(mi.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=St.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&t===mi.Amp&&this.startEntity()}stateSpecialStartSequence(t){let e=this.sequenceIndex===this.currentSequence.length;if(!(e?I0(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!e){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=St.InTagName,this.stateInTagName(t)}stateInSpecialTag(t){if(this.sequenceIndex===this.currentSequence.length){if(t===mi.Gt||Ql(t)){let e=this.index-this.currentSequence.length;if(this.sectionStart<e){let o=this.index;this.index=e,this.cbs.ontext(this.sectionStart,e),this.index=o}this.isSpecial=!1,this.sectionStart=e+2,this.stateInClosingTagName(t);return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===mo.TitleEnd?this.decodeEntities&&t===mi.Amp&&this.startEntity():this.fastForwardTo(mi.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===mi.Lt)}stateCDATASequence(t){t===mo.Cdata[this.sequenceIndex]?++this.sequenceIndex===mo.Cdata.length&&(this.state=St.InCommentLike,this.currentSequence=mo.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=St.InDeclaration,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===t)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===mo.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=St.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(t){return this.xmlMode?!I0(t):IO(t)}startSpecial(t,e){this.isSpecial=!0,this.currentSequence=t,this.sequenceIndex=e,this.state=St.SpecialStartSequence}stateBeforeTagName(t){if(t===mi.ExclamationMark)this.state=St.BeforeDeclaration,this.sectionStart=this.index+1;else if(t===mi.Questionmark)this.state=St.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(t)){let e=t|32;this.sectionStart=this.index,this.xmlMode?this.state=St.InTagName:e===mo.ScriptEnd[2]?this.state=St.BeforeSpecialS:e===mo.TitleEnd[2]?this.state=St.BeforeSpecialT:this.state=St.InTagName}else t===mi.Slash?this.state=St.BeforeClosingTagName:(this.state=St.Text,this.stateText(t))}stateInTagName(t){I0(t)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=St.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateBeforeClosingTagName(t){Ql(t)||(t===mi.Gt?this.state=St.Text:(this.state=this.isTagStartChar(t)?St.InClosingTagName:St.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(t){(t===mi.Gt||Ql(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=St.AfterClosingTagName,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){(t===mi.Gt||this.fastForwardTo(mi.Gt))&&(this.state=St.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(t){t===mi.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=St.InSpecialTag,this.sequenceIndex=0):this.state=St.Text,this.sectionStart=this.index+1):t===mi.Slash?this.state=St.InSelfClosingTag:Ql(t)||(this.state=St.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===mi.Gt?(this.cbs.onselfclosingtag(this.index),this.state=St.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Ql(t)||(this.state=St.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateInAttributeName(t){(t===mi.Eq||I0(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=St.AfterAttributeName,this.stateAfterAttributeName(t))}stateAfterAttributeName(t){t===mi.Eq?this.state=St.BeforeAttributeValue:t===mi.Slash||t===mi.Gt?(this.cbs.onattribend(ec.NoValue,this.sectionStart),this.sectionStart=-1,this.state=St.BeforeAttributeName,this.stateBeforeAttributeName(t)):Ql(t)||(this.cbs.onattribend(ec.NoValue,this.sectionStart),this.state=St.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(t){t===mi.DoubleQuote?(this.state=St.InAttributeValueDq,this.sectionStart=this.index+1):t===mi.SingleQuote?(this.state=St.InAttributeValueSq,this.sectionStart=this.index+1):Ql(t)||(this.sectionStart=this.index,this.state=St.InAttributeValueNq,this.stateInAttributeValueNoQuotes(t))}handleInAttributeValue(t,e){t===e||!this.decodeEntities&&this.fastForwardTo(e)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(e===mi.DoubleQuote?ec.Double:ec.Single,this.index+1),this.state=St.BeforeAttributeName):this.decodeEntities&&t===mi.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(t){this.handleInAttributeValue(t,mi.DoubleQuote)}stateInAttributeValueSingleQuotes(t){this.handleInAttributeValue(t,mi.SingleQuote)}stateInAttributeValueNoQuotes(t){Ql(t)||t===mi.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(ec.Unquoted,this.index),this.state=St.BeforeAttributeName,this.stateBeforeAttributeName(t)):this.decodeEntities&&t===mi.Amp&&this.startEntity()}stateBeforeDeclaration(t){t===mi.OpeningSquareBracket?(this.state=St.CDATASequence,this.sequenceIndex=0):this.state=t===mi.Dash?St.BeforeComment:St.InDeclaration}stateInDeclaration(t){(t===mi.Gt||this.fastForwardTo(mi.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=St.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===mi.Gt||this.fastForwardTo(mi.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=St.Text,this.sectionStart=this.index+1)}stateBeforeComment(t){t===mi.Dash?(this.state=St.InCommentLike,this.currentSequence=mo.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=St.InDeclaration}stateInSpecialComment(t){(t===mi.Gt||this.fastForwardTo(mi.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=St.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){let e=t|32;e===mo.ScriptEnd[3]?this.startSpecial(mo.ScriptEnd,4):e===mo.StyleEnd[3]?this.startSpecial(mo.StyleEnd,4):(this.state=St.InTagName,this.stateInTagName(t))}stateBeforeSpecialT(t){let e=t|32;e===mo.TitleEnd[3]?this.startSpecial(mo.TitleEnd,4):e===mo.TextareaEnd[3]?this.startSpecial(mo.TextareaEnd,4):(this.state=St.InTagName,this.stateInTagName(t))}startEntity(){this.baseState=this.state,this.state=St.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?Jl.Strict:this.baseState===St.Text||this.baseState===St.InSpecialTag?Jl.Legacy:Jl.Attribute)}stateInEntity(){let t=this.entityDecoder.write(this.buffer,this.index-this.offset);t>=0?(this.state=this.baseState,t===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===St.Text||this.state===St.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===St.InAttributeValueDq||this.state===St.InAttributeValueSq||this.state===St.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){let t=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case St.Text:{this.stateText(t);break}case St.SpecialStartSequence:{this.stateSpecialStartSequence(t);break}case St.InSpecialTag:{this.stateInSpecialTag(t);break}case St.CDATASequence:{this.stateCDATASequence(t);break}case St.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(t);break}case St.InAttributeName:{this.stateInAttributeName(t);break}case St.InCommentLike:{this.stateInCommentLike(t);break}case St.InSpecialComment:{this.stateInSpecialComment(t);break}case St.BeforeAttributeName:{this.stateBeforeAttributeName(t);break}case St.InTagName:{this.stateInTagName(t);break}case St.InClosingTagName:{this.stateInClosingTagName(t);break}case St.BeforeTagName:{this.stateBeforeTagName(t);break}case St.AfterAttributeName:{this.stateAfterAttributeName(t);break}case St.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(t);break}case St.BeforeAttributeValue:{this.stateBeforeAttributeValue(t);break}case St.BeforeClosingTagName:{this.stateBeforeClosingTagName(t);break}case St.AfterClosingTagName:{this.stateAfterClosingTagName(t);break}case St.BeforeSpecialS:{this.stateBeforeSpecialS(t);break}case St.BeforeSpecialT:{this.stateBeforeSpecialT(t);break}case St.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(t);break}case St.InSelfClosingTag:{this.stateInSelfClosingTag(t);break}case St.InDeclaration:{this.stateInDeclaration(t);break}case St.BeforeDeclaration:{this.stateBeforeDeclaration(t);break}case St.BeforeComment:{this.stateBeforeComment(t);break}case St.InProcessingInstruction:{this.stateInProcessingInstruction(t);break}case St.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===St.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){let t=this.buffer.length+this.offset;this.sectionStart>=t||(this.state===St.InCommentLike?this.currentSequence===mo.CdataEnd?this.cbs.oncdata(this.sectionStart,t,0):this.cbs.oncomment(this.sectionStart,t,0):this.state===St.InTagName||this.state===St.BeforeAttributeName||this.state===St.BeforeAttributeValue||this.state===St.AfterAttributeName||this.state===St.InAttributeName||this.state===St.InAttributeValueSq||this.state===St.InAttributeValueDq||this.state===St.InAttributeValueNq||this.state===St.InClosingTagName||this.cbs.ontext(this.sectionStart,t))}emitCodePoint(t,e){this.baseState!==St.Text&&this.baseState!==St.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+e,this.index=this.sectionStart-1,this.cbs.onattribentity(t)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+e,this.index=this.sectionStart-1,this.cbs.ontextentity(t,this.sectionStart))}},Fh=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Ir=new Set(["p"]),PM=new Set(["thead","tbody"]),DM=new Set(["dd","dt"]),RM=new Set(["rt","rp"]),AO=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Ir],["h1",Ir],["h2",Ir],["h3",Ir],["h4",Ir],["h5",Ir],["h6",Ir],["select",Fh],["input",Fh],["output",Fh],["button",Fh],["datalist",Fh],["textarea",Fh],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",DM],["dt",DM],["address",Ir],["article",Ir],["aside",Ir],["blockquote",Ir],["details",Ir],["div",Ir],["dl",Ir],["fieldset",Ir],["figcaption",Ir],["figure",Ir],["footer",Ir],["form",Ir],["header",Ir],["hr",Ir],["main",Ir],["nav",Ir],["ol",Ir],["pre",Ir],["section",Ir],["table",Ir],["ul",Ir],["rt",RM],["rp",RM],["tbody",PM],["tfoot",PM]]),kO=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),OM=new Set(["math","svg"]),LM=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),PO=/\s|\//,X1=class{constructor(t,e={}){var o,a,s,_,w,E;this.options=e,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(o=e.lowerCaseTags)!==null&&o!==void 0?o:this.htmlMode,this.lowerCaseAttributeNames=(a=e.lowerCaseAttributeNames)!==null&&a!==void 0?a:this.htmlMode,this.recognizeSelfClosing=(s=e.recognizeSelfClosing)!==null&&s!==void 0?s:!this.htmlMode,this.tokenizer=new((_=e.Tokenizer)!==null&&_!==void 0?_:Z1)(this.options,this),this.foreignContext=[!this.htmlMode],(E=(w=this.cbs).onparserinit)===null||E===void 0||E.call(w,this)}ontext(t,e){var o,a;let s=this.getSlice(t,e);this.endIndex=e-1,(a=(o=this.cbs).ontext)===null||a===void 0||a.call(o,s),this.startIndex=e}ontextentity(t,e){var o,a;this.endIndex=e-1,(a=(o=this.cbs).ontext)===null||a===void 0||a.call(o,xM(t)),this.startIndex=e}isVoidElement(t){return this.htmlMode&&kO.has(t)}onopentagname(t,e){this.endIndex=e;let o=this.getSlice(t,e);this.lowerCaseTagNames&&(o=o.toLowerCase()),this.emitOpenTag(o)}emitOpenTag(t){var e,o,a,s;this.openTagStart=this.startIndex,this.tagname=t;let _=this.htmlMode&&AO.get(t);if(_)for(;this.stack.length>0&&_.has(this.stack[0]);){let w=this.stack.shift();(o=(e=this.cbs).onclosetag)===null||o===void 0||o.call(e,w,!0)}this.isVoidElement(t)||(this.stack.unshift(t),this.htmlMode&&(OM.has(t)?this.foreignContext.unshift(!0):LM.has(t)&&this.foreignContext.unshift(!1))),(s=(a=this.cbs).onopentagname)===null||s===void 0||s.call(a,t),this.cbs.onopentag&&(this.attribs={})}endOpenTag(t){var e,o;this.startIndex=this.openTagStart,this.attribs&&((o=(e=this.cbs).onopentag)===null||o===void 0||o.call(e,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1}onclosetag(t,e){var o,a,s,_,w,E,M,I;this.endIndex=e;let A=this.getSlice(t,e);if(this.lowerCaseTagNames&&(A=A.toLowerCase()),this.htmlMode&&(OM.has(A)||LM.has(A))&&this.foreignContext.shift(),this.isVoidElement(A))this.htmlMode&&A==="br"&&((_=(s=this.cbs).onopentagname)===null||_===void 0||_.call(s,"br"),(E=(w=this.cbs).onopentag)===null||E===void 0||E.call(w,"br",{},!0),(I=(M=this.cbs).onclosetag)===null||I===void 0||I.call(M,"br",!1));else{let R=this.stack.indexOf(A);if(R!==-1)for(let $=0;$<=R;$++){let W=this.stack.shift();(a=(o=this.cbs).onclosetag)===null||a===void 0||a.call(o,W,$!==R)}else this.htmlMode&&A==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=e+1}onselfclosingtag(t){this.endIndex=t,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)}closeCurrentTag(t){var e,o;let a=this.tagname;this.endOpenTag(t),this.stack[0]===a&&((o=(e=this.cbs).onclosetag)===null||o===void 0||o.call(e,a,!t),this.stack.shift())}onattribname(t,e){this.startIndex=t;let o=this.getSlice(t,e);this.attribname=this.lowerCaseAttributeNames?o.toLowerCase():o}onattribdata(t,e){this.attribvalue+=this.getSlice(t,e)}onattribentity(t){this.attribvalue+=xM(t)}onattribend(t,e){var o,a;this.endIndex=e,(a=(o=this.cbs).onattribute)===null||a===void 0||a.call(o,this.attribname,this.attribvalue,t===ec.Double?'"':t===ec.Single?"'":t===ec.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(t){let e=t.search(PO),o=e<0?t:t.substr(0,e);return this.lowerCaseTagNames&&(o=o.toLowerCase()),o}ondeclaration(t,e){this.endIndex=e;let o=this.getSlice(t,e);if(this.cbs.onprocessinginstruction){let a=this.getInstructionName(o);this.cbs.onprocessinginstruction(`!${a}`,`!${o}`)}this.startIndex=e+1}onprocessinginstruction(t,e){this.endIndex=e;let o=this.getSlice(t,e);if(this.cbs.onprocessinginstruction){let a=this.getInstructionName(o);this.cbs.onprocessinginstruction(`?${a}`,`?${o}`)}this.startIndex=e+1}oncomment(t,e,o){var a,s,_,w;this.endIndex=e,(s=(a=this.cbs).oncomment)===null||s===void 0||s.call(a,this.getSlice(t,e-o)),(w=(_=this.cbs).oncommentend)===null||w===void 0||w.call(_),this.startIndex=e+1}oncdata(t,e,o){var a,s,_,w,E,M,I,A,R,$;this.endIndex=e;let W=this.getSlice(t,e-o);!this.htmlMode||this.options.recognizeCDATA?((s=(a=this.cbs).oncdatastart)===null||s===void 0||s.call(a),(w=(_=this.cbs).ontext)===null||w===void 0||w.call(_,W),(M=(E=this.cbs).oncdataend)===null||M===void 0||M.call(E)):((A=(I=this.cbs).oncomment)===null||A===void 0||A.call(I,`[CDATA[${W}]]`),($=(R=this.cbs).oncommentend)===null||$===void 0||$.call(R)),this.startIndex=e+1}onend(){var t,e;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let o=0;o<this.stack.length;o++)this.cbs.onclosetag(this.stack[o],!0)}(e=(t=this.cbs).onend)===null||e===void 0||e.call(t)}reset(){var t,e,o,a;(e=(t=this.cbs).onreset)===null||e===void 0||e.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(a=(o=this.cbs).onparserinit)===null||a===void 0||a.call(o,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(t){this.reset(),this.end(t)}getSlice(t,e){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let o=this.buffers[0].slice(t-this.bufferOffset,e-this.bufferOffset);for(;e-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),o+=this.buffers[0].slice(0,e-this.bufferOffset);return o}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(t){var e,o;if(this.ended){(o=(e=this.cbs).onerror)===null||o===void 0||o.call(e,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)}end(t){var e,o;if(this.ended){(o=(e=this.cbs).onerror)===null||o===void 0||o.call(e,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(t){this.write(t)}done(t){this.end(t)}};function DO(r,t){let e=new U1(void 0,t);return new X1(e,t).end(r),e.root}var RO=XM(),em=z0(RO);function NM(r){return F6(r)}function FM(r,t){let e="";return N6(r,(o,a,s)=>{if(!(a?.type==="decl"&&a.value.includes("</style>"))){if(!t.compress){e+=o;return}if(a?.type!=="comment"){if(a?.type==="decl"){let _=a.prop+a.raws.between;e+=o.replace(_,_.trim());return}if(s==="start"){a?.type==="rule"&&a.selectors?e+=`${a.selectors.join(",")}{`:e+=o.replace(/\s\{$/,"{");return}s==="end"&&o==="}"&&a?.raws?.semicolon&&(e=e.slice(0,-1)),e+=o.trim()}}}),e}function OO(r){return t=>{let e="selectors"in t?t.selectors:void 0;r(t)===!1&&(t.$$remove=!0),"selectors"in t&&(t.$$markedSelectors=t.selectors,t.selectors=e),t._other&&(t._other.$$markedSelectors=t._other.selectors)}}function kI(r){r.$$markedSelectors&&(r.selectors=r.$$markedSelectors),r._other&&kI(r._other)}function fx(r,t){"nodes"in r&&(r.nodes=r.nodes?.filter(e=>(DI(e)&&fx(e,t),e._other=void 0,e.filterSelectors=OI,t(e)!==!1)))}function PI(r,t,e){if(!t)return fx(r,e);[r.nodes,t.nodes]=RI(r.nodes,t.nodes,(o,a,s,_)=>{let w=_?.[a];return DI(o)&&PI(o,w,e),o._other=w,o.filterSelectors=OI,e(o)!==!1})}function DI(r){return"nodes"in r&&!!r.nodes?.length&&(!("name"in r)||r.name!=="keyframes"&&r.name!=="-webkit-keyframes")&&r.nodes.some(t=>t.type==="rule"||t.type==="atrule")}function RI(r,t,e){let o=[],a=[];for(let s=0;s<r.length;s++){let _=r[s];e(_,s,r,t)?o.push(_):a.push(_)}return[o,a]}function OI(r){if(this._other){let[t,e]=RI(this.selectors,this._other.selectors,r);this.selectors=t,this._other.selectors=e}else this.selectors=this.selectors.filter(r)}var LO=new Set(["all","print","screen","speech"]),NO=new Set(["and","not",","]),FO=new Set(["width","aspect-ratio","color","color-index","grid","height","monochrome","orientation","resolution","scan"].flatMap(r=>[r,`min-${r}`,`max-${r}`]));function zO(r){let{type:t,value:e}=r;if(t==="media-type")return LO.has(e);if(t==="keyword")return NO.has(e);if(t==="media-feature")return FO.has(e)}function BO(r){let e=("default"in k1?k1.default:k1)(r),o=new Set(["media-type","keyword","media-feature"]),a=[e];for(;a.length>0;){let s=a.pop();if(o.has(s.type)&&!zO(s))return!1;s.nodes&&a.push(...s.nodes)}return!0}var Y1=null,K1=null;function VO(r){Y1=new Set,K1=new Set;let t=[r];for(;t.length;){let e=t.shift();if(e.hasAttribute?.("class")&&e.getAttribute("class").trim().split(" ").forEach(a=>{Y1.add(a)}),e.hasAttribute?.("id")){let o=e.getAttribute("id").trim();K1.add(o)}"children"in e&&t.push(...e.children.filter(o=>o.type==="tag"))}}function UO(r){let t=DO(r,{decodeEntities:!1});HO(t),qO(Bh.prototype);let e=t.querySelector("[data-beasties-container]");return e||(t.documentElement?.setAttribute("data-beasties-container",""),e=t.documentElement||t),t.beastiesContainer=e,VO(e),t}function jO(r){return $0(r,{decodeEntities:!1})}var zM=!1;function qO(r){zM||(zM=!0,Object.defineProperties(r,{nodeName:{get(){return this.tagName.toUpperCase()}},id:{get(){return this.getAttribute("id")},set(t){this.setAttribue("id",t)}},className:{get(){return this.getAttribute("class")},set(t){this.setAttribute("class",t)}},insertBefore:{value(t,e){return e?(hI(e,t),t):this.appendChild(t)}},appendChild:{value(t){return $1(this,t),t}},removeChild:{value(t){cd(t)}},remove:{value(){cd(this)}},textContent:{get(){return tm(this)},set(t){this.children=[],$1(this,new ad(t))}},setAttribute:{value(t,e){this.attribs==null&&(this.attribs={}),e==null&&(e=""),this.attribs[t]=e}},removeAttribute:{value(t){this.attribs!=null&&delete this.attribs[t]}},getAttribute:{value(t){return this.attribs!=null&&this.attribs[t]}},hasAttribute:{value(t){return this.attribs!=null&&this.attribs[t]!=null}},getAttributeNode:{value(t){let e=this.getAttribute(t);if(e!=null)return{specified:!0,value:e}}},exists:{value(t){return LI(t,this)}},querySelector:{value(t){return px(t,this)}},querySelectorAll:{value(t){return AI(t,this)}}}))}function HO(r){Object.defineProperties(r,{nodeType:{get(){return 9}},contentType:{get(){return"text/html"}},nodeName:{get(){return"#document"}},documentElement:{get(){return this.children.find(t=>"tagName"in t&&String(t.tagName).toLowerCase()==="html")}},head:{get(){return this.querySelector("head")}},body:{get(){return this.querySelector("body")}},createElement:{value(t){return new Bh(t,{})}},createTextNode:{value(t){return new ad(t)}},exists:{value(t){return LI(t,this)}},querySelector:{value(t){return px(t,this)}},querySelectorAll:{value(t){return t===":root"?this:AI(t,this)}}})}function LI(r,t){let e=dx(r);for(let o of e)if(o.length===1){let a=o[0];if(a.type==="attribute"&&a.name==="class")return Y1.has(a.value);if(a.type==="attribute"&&a.name==="id")return K1.has(a.value)}return!!px(r,t)}var BM=["trace","debug","info","warn","error","silent"],VM={trace(r){console.trace(r)},debug(r){console.debug(r)},warn(r){console.warn(em.yellow(r))},error(r){console.error(em.bold(em.red(r)))},info(r){console.info(em.bold(em.blue(r)))},silent(){}};function $O(r){let t=BM.indexOf(r);return BM.reduce((e,o,a)=>(a>=t?e[o]=VM[o]:e[o]=VM.silent,e),{})}function GO(r,t){return!zh.relative(r,t).startsWith("..")}var WO=Object.defineProperty,ZO=(r,t,e)=>t in r?WO(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,B1=(r,t,e)=>(ZO(r,typeof t!="symbol"?t+"":t,e),e),N0=class{constructor(t={}){B1(this,"options"),B1(this,"logger"),B1(this,"fs"),this.options=Object.assign({logLevel:"info",path:"",publicPath:"",reduceInlineStyles:!0,pruneSource:!1,additionalStylesheets:[],allowRules:[]},t),this.logger=this.options.logger||$O(this.options.logLevel)}readFile(t){let e=this.fs;return new Promise((o,a)=>{let s=(_,w)=>{_?a(_):o(w.toString())};e&&e.readFile?e.readFile(t,s):_6(t,"utf-8",s)})}process(t){return vr(this,null,function*(){let e=Date.now(),o=UO(t);if(this.options.additionalStylesheets.length>0&&this.embedAdditionalStylesheet(o),this.options.external!==!1){let w=[].slice.call(o.querySelectorAll('link[rel="stylesheet"]'));yield Promise.all(w.map(E=>this.embedLinkedStylesheet(E,o)))}let a=this.getAffectedStyleTags(o);yield Promise.all(a.map(w=>this.processStyle(w,o))),this.options.mergeStylesheets!==!1&&a.length!==0&&(yield this.mergeStylesheets(o));let s=jO(o),_=Date.now();return this.logger.info?.(`Time ${_-e}ms`),s})}getAffectedStyleTags(t){let e=[...t.querySelectorAll("style")];return this.options.reduceInlineStyles===!1?e.filter(o=>o.$$external):e}mergeStylesheets(t){return vr(this,null,function*(){let e=this.getAffectedStyleTags(t);if(e.length===0){this.logger.warn?.("Merging inline stylesheets into a single <style> tag skipped, no inline stylesheets to merge");return}let o=e[0],a=o.textContent;for(let s=1;s<e.length;s++){let _=e[s];a+=_.textContent,_.remove()}o.textContent=a})}getCssAsset(t,e){return vr(this,null,function*(){let o=this.options.path,a=this.options.publicPath,s=t.replace(/^\//,""),_=`${(a||"").replace(/(^\/|\/$)/g,"")}/`;if(s.startsWith(_)&&(s=s.substring(_.length).replace(/^\//,"")),/^https?:\/\//.test(s)||t.startsWith("//"))return;let w=zh.resolve(o,s);if(!GO(o,w))return;let E;try{E=yield this.readFile(w)}catch{this.logger.warn?.(`Unable to locate stylesheet: ${w}`)}return E})}checkInlineThreshold(t,e,o){if(this.options.inlineThreshold&&o.length<this.options.inlineThreshold){let a=e.$$name;return e.$$reduce=!1,this.logger.info?.(`\x1B[32mInlined all of ${a} (${o.length} was below the threshold of ${this.options.inlineThreshold})\x1B[39m`),t.remove(),!0}return!1}embedAdditionalStylesheet(t){return vr(this,null,function*(){let e=[],o=yield Promise.all(this.options.additionalStylesheets.map(a=>{if(e.includes(a))return[];e.push(a);let s=t.createElement("style");return s.$$external=!0,this.getCssAsset(a,s).then(_=>[_,s])}));for(let[a,s]of o)a&&(s.textContent=a,t.head.appendChild(s))})}embedLinkedStylesheet(t,e){return vr(this,null,function*(){let o=t.getAttribute("href"),a=t.getAttribute("media");a&&!BO(a)&&(a=void 0);let s=this.options.preload;if(!o?.endsWith(".css"))return;let _=e.createElement("style");_.$$external=!0;let w=yield this.getCssAsset(o,_);if(!w||(_.textContent=w,_.$$name=o,_.$$links=[t],t.parentNode?.insertBefore(_,t),this.checkInlineThreshold(t,_,w)))return;let E="function $loadcss(u,m,l){(l=document.createElement('link')).rel='stylesheet';l.href=u;document.head.appendChild(l)}";if(s==="js-lazy"&&(E=E.replace("l.href","l.media='print';l.onload=function(){l.media=m};l.href")),s===!1)return;let I=!1,A=!1,R=t.cloneNode(!1);if(s==="body")e.body.appendChild(t);else if(s==="js"||s==="js-lazy"){let $=e.createElement("script");$.setAttribute("data-href",o),$.setAttribute("data-media",a||"all");let W=`${E}$loadcss(document.currentScript.dataset.href,document.currentScript.dataset.media)`;$.textContent=W,t.parentNode.insertBefore($,t.nextSibling),_.$$links.push($),E="",I=!0,A=!0}else if(s==="media")t.setAttribute("media","print"),t.setAttribute("onload",`this.media='${a||"all"}'`),I=!0;else if(s==="swap-high")t.setAttribute("rel","alternate stylesheet preload"),t.setAttribute("title","styles"),t.setAttribute("onload","this.title='';this.rel='stylesheet'"),I=!0;else if(s==="swap")t.setAttribute("onload","this.rel='stylesheet'"),I=!0;else{let $=t.cloneNode(!1);$.removeAttribute("id"),e.body.appendChild($),A=!0}if(this.options.noscriptFallback!==!1&&I&&!o.includes("</noscript>")){let $=e.createElement("noscript");R.removeAttribute("id"),$.appendChild(R),t.parentNode.insertBefore($,t.nextSibling),_.$$links.push($)}A&&(t.setAttribute("rel","preload"),t.setAttribute("as","style"))})}pruneSource(t,e,o){let a=this.options.minimumExternalSize,s=t.$$name;if(a&&o.length<a){if(this.logger.info?.(`\x1B[32mInlined all of ${s} (non-critical external stylesheet would have been ${o.length}b, which was below the threshold of ${a})\x1B[39m`),t.textContent=e,t.$$links)for(let _ of t.$$links){let w=_.parentNode;w&&w.removeChild(_)}return!0}return!1}processStyle(t,e){return vr(this,null,function*(){if(t.$$reduce===!1)return;let o=t.$$name?t.$$name.replace(/^\//,""):"inline CSS",a=this.options,s=e.beastiesContainer,_=a.keyframes??"critical";_===!0&&(_="all"),_===!1&&(_="none");let w=t.textContent,E=w;if(!w)return;let M=NM(w),I=a.pruneSource?NM(w):null,A="",R=[],$=new Set,W=!1,G=!1,pe=!1,le=!1,ne=a.fonts===!0||a.preloadFonts===!0,re=a.fonts!==!1&&a.inlineFonts===!0;fx(M,OO(ct=>{if(ct.type==="comment"){let ve=ct.text.match(/^(?<!! )beasties:(.*)/),Ge=ve&&ve[1];if(Ge)switch(Ge){case"include":W=!0;break;case"exclude":pe=!0;break;case"include start":G=!0;break;case"include end":G=!1;break;case"exclude start":le=!0;break;case"exclude end":le=!1;break}}if(ct.type==="rule"){if(W)return W=!1,!0;if(pe)return pe=!1,!1;if(G)return!0;if(le||(ct.filterSelectors?.(ve=>{if(a.allowRules.some(bt=>bt instanceof RegExp?bt.test(ve):bt===ve)||ve===":root"||ve==="html"||ve==="body"||/^::?(?:before|after)$/.test(ve))return!0;if(ve=ve.replace(/(?<!\\)::?[a-z-]+(?![a-z-(])/gi,"").replace(/::?not\(\s*\)/g,"").replace(/\(\s*,/g,"(").replace(/,\s*\)/g,")").trim(),!ve)return!1;try{return s.exists(ve)}catch(bt){return R.push(`${ve} -> ${bt.message||bt.toString()}`),!1}}),!ct.selector))return!1;if(ct.nodes){for(let ve of ct.nodes)if("prop"in ve&&(re&&/\bfont(?:-family)?\b/i.test(ve.prop)&&(A+=` ${ve.value}`),ve.prop==="animation"||ve.prop==="animation-name"))for(let Ge of ve.value.split(/\s+/)){let bt=Ge.trim();bt&&$.add(bt)}}}if(ct.type==="atrule"&&ct.name==="font-face")return;let Qe="nodes"in ct?ct.nodes?.filter(ve=>!ve.$$remove):void 0;return!Qe||Qe.length!==0})),R.length!==0&&this.logger.warn?.(`${R.length} rules skipped due to selector errors:
  ${R.join(`
  `)}`);let ue=new Set;if(PI(M,I,ct=>{if(ct.$$remove===!0)return!1;if("selectors"in ct&&kI(ct),ct.type==="atrule"&&ct.name==="keyframes")return _==="none"?!1:_==="all"?!0:$.has(ct.params);if(ct.type==="atrule"&&ct.name==="font-face"){let Qe,ve;if(ct.nodes){for(let Ge of ct.nodes)"prop"in Ge&&(Ge.prop==="src"?ve=(Ge.value.match(/url\s*\(\s*(['"]?)(.+?)\1\s*\)/)||[])[2]:Ge.prop==="font-family"&&(Qe=Ge.value));if(ve&&ne&&!ue.has(ve)){ue.add(ve);let Ge=e.createElement("link");Ge.setAttribute("rel","preload"),Ge.setAttribute("as","font"),Ge.setAttribute("crossorigin","anonymous"),Ge.setAttribute("href",ve.trim()),e.head.appendChild(Ge)}}if(!re||!Qe||!ve||!A.includes(Qe))return!1}}),w=FM(M,{compress:this.options.compress!==!1}),w.trim().length===0){t.parentNode&&t.remove();return}let oe="",Ve=!1;if(a.pruneSource){let ct=FM(I,{compress:this.options.compress!==!1});Ve=this.pruneSource(t,E,ct),Ve&&(oe=`, reducing non-inlined size ${ct.length/E.length*100|0}% to ${V1(ct.length)}`)}Ve||(t.textContent=w);let tt=w.length/E.length*100|0;this.logger.info?.(`\x1B[32mInlined ${V1(w.length)} (${tt}% of original ${V1(E.length)}) of ${o}${oe}.\x1B[39m`)})}};function V1(r){if(r<=0)return"0 bytes";let t=["bytes","kB","MB","GB"],e=Math.floor(Math.log(r)/Math.log(1024)),o=r/1024**e,a=e===0?0:2;return`${o.toFixed(a)} ${t[e]}`}var W0=class{manifest;constructor(t){this.manifest=t}getServerAsset(t){let e=this.manifest.assets[t];if(!e)throw new Error(`Server asset '${t}' does not exist.`);return e}hasServerAsset(t){return!!this.manifest.assets[t]}getIndexServerHtml(){return this.getServerAsset("index.server.html")}},Z0=class extends Zc{ignoredLogs=new Set(["Angular is running in development mode."]);log(t){this.ignoredLogs.has(t)||super.log(t)}},mx;function BI(r){mx=r}function VI(){if(!mx)throw new Error("Angular app manifest is not set. Please ensure you are using the '@angular/build:application' builder to build your server application.");return mx}function XO(r){return r.length>1&&r[r.length-1]==="/"?r.slice(0,-1):r}function am(r){return r.length>1&&r[0]==="/"?r.slice(1):r}function YO(r){return r[0]==="/"?r:`/${r}`}function KO(r){return r[r.length-1]==="/"?r:`${r}/`}function Uh(...r){let t=[];for(let e of r){if(e==="")continue;let o=e;e[0]==="/"&&(o=o.slice(1)),e[e.length-1]==="/"&&(o=o.slice(0,-1)),o!==""&&t.push(o)}return YO(t.join("/"))}function UI(r){if(r.pathname.endsWith("/index.html")){let t=new URL(r);return t.pathname=t.pathname.slice(0,-11),t}return r}function QO(r,t){if(r[0]!=="/")throw new Error(`Invalid toPath: The string must start with a '/'. Received: '${r}'`);if(t[0]!=="/")throw new Error(`Invalid fromPath: The string must start with a '/'. Received: '${t}'`);if(!r.includes("/*"))return r;let e=t.split("/"),o=r.split("/"),a=o.map((s,_)=>o[_]==="*"?e[_]:s);return Uh(...a)}function JO(r,t,e,o,a){let s=[{provide:yv,useValue:a},{provide:Zc,useFactory:()=>new Z0},...o],_=UI(e).toString();return jI(t)?HS(t,{url:_,document:r,extraProviders:s}):$S(t,{url:_,document:r,platformProviders:s})}function jI(r){return"\u0275mod"in r}function qI(r,t,e){return new Promise((o,a)=>{let s=()=>{a(new DOMException(`${e} was aborted.
${t.reason}`,"AbortError"))};if(t.aborted){s();return}t.addEventListener("abort",s,{once:!0}),r.then(o).catch(a).finally(()=>{t.removeEventListener("abort",s)})})}var kn=function(r){return r[r.Server=0]="Server",r[r.Client=1]="Client",r[r.Prerender=2]="Prerender",r}(kn||{}),gx=function(r){return r[r.Server=0]="Server",r[r.Client=1]="Client",r[r.None=2]="None",r}(gx||{}),HI=new Ft("SERVER_ROUTES_CONFIG");function $I(r,t){return Va([{provide:HI,useValue:ft({routes:r},t)}])}var lm=class r{root=this.createEmptyRouteTreeNode("");insertionIndexCounter=0;insert(t,e){let o=this.root,a=this.getPathSegments(t),s=[];for(let _ of a){let w=_[0]===":"?"*":_,E=o.children.get(w);E||(E=this.createEmptyRouteTreeNode(w),o.children.set(w,E)),o=E,s.push(w)}o.metadata=si(ft({},e),{route:s.join("/")}),o.insertionIndex=this.insertionIndexCounter++}match(t){let e=this.getPathSegments(t);return this.traverseBySegments(e)?.metadata}toObject(){return Array.from(this.traverse())}static fromObject(t){let e=new r;for(let o of t){let a=o,{route:s}=a,_=Hl(a,["route"]);e.insert(s,_)}return e}*traverse(t=this.root){t.metadata&&(yield t.metadata);for(let e of t.children.values())yield*rf(this.traverse(e))}getPathSegments(t){return XO(t).split("/")}traverseBySegments(t,e=this.root){let{metadata:o,children:a}=e;if(!t?.length)return o?e:void 0;if(!a.size)return;let[s,..._]=t,w,E=e.children.get(s);w=this.getHigherPriorityNode(w,this.traverseBySegments(_,E));let M=e.children.get("*");w=this.getHigherPriorityNode(w,this.traverseBySegments(_,M));let I=e.children.get("**");return w=this.getHigherPriorityNode(w,I),w}getHigherPriorityNode(t,e){return e?t?e.insertionIndex<t.insertionIndex?e:t:e:t}createEmptyRouteTreeNode(t){return{segment:t,insertionIndex:-1,children:new Map}}},_x=/(?<!\\):([^/]+)/g,NI=new Set([301,302,303,307,308]);function bx(r){return xy(this,null,function*(){let{routes:t,compiler:e,parentInjector:o,parentRoute:a,serverConfigRouteTree:s,invokeGetPrerenderParams:_,includePrerenderFallbackRoutes:w}=r;for(let E of t)try{let{path:M="",redirectTo:I,loadChildren:A,children:R}=E,$=Uh(a,M),W;if(s){if(W=s.match($),!W){yield{error:`The '${am($)}' route does not match any route defined in the server routing configuration. Please ensure this route is added to the server routing configuration.`};continue}W.presentInClientRouter=!0}let G=si(ft({renderMode:kn.Prerender},W),{route:M===""?KO($):$});if(delete G.presentInClientRouter,G.renderMode===kn.Prerender)yield*rf(eL(typeof I=="string"?I:void 0,G,o,_,w));else if(typeof I=="string"){if(G.status&&!NI.has(G.status)){yield{error:`The '${G.status}' status code is not a valid redirect response code. Please use one of the following redirect response codes: ${[...NI.values()].join(", ")}.`};continue}yield si(ft({},G),{redirectTo:yx(G.route,I)})}else yield G;if(R?.length&&(yield*rf(bx(si(ft({},r),{routes:R,parentRoute:$})))),A){let pe=yield new vy(Jv(E,e,o).toPromise());if(pe){let{routes:le,injector:ne=o}=pe;yield*rf(bx(si(ft({},r),{routes:le,parentInjector:ne,parentRoute:$})))}}}catch(M){yield{error:`Error processing route '${am(E.path??"")}': ${M.message}`}}})}function eL(r,t,e,o,a){return xy(this,null,function*(){if(t.renderMode!==kn.Prerender)throw new Error("'handleSSGRoute' was called for a route which rendering mode is not prerender.");let M=t,{route:s,fallback:_}=M,w=Hl(M,["route","fallback"]),E="getPrerenderParams"in w?w.getPrerenderParams:void 0;if("getPrerenderParams"in w&&delete w.getPrerenderParams,r!==void 0&&(w.redirectTo=yx(s,r)),!_x.test(s)){yield si(ft({},w),{route:s});return}if(o){if(!E){yield{error:`The '${am(s)}' route uses prerendering and includes parameters, but 'getPrerenderParams' is missing. Please define 'getPrerenderParams' function for this route in your server routing configuration or specify a different 'renderMode'.`};return}let I=yield new vy(cs(e,()=>E()));try{for(let A of I){let R=s.replace(_x,$=>{let W=$.slice(1),G=A[W];if(typeof G!="string")throw new Error(`The 'getPrerenderParams' function defined for the '${am(s)}' route returned a non-string value for parameter '${W}'. Please make sure the 'getPrerenderParams' function returns values for all parameters specified in this route.`);return G});yield si(ft({},w),{route:R,redirectTo:r===void 0?void 0:yx(R,r)})}}catch(A){yield{error:`${A.message}`};return}}a&&(_!==gx.None||!o)&&(yield si(ft({},w),{route:s,renderMode:_===gx.Client?kn.Client:kn.Server}))})}function yx(r,t){if(t[0]==="/")return t;let e=r.replace(_x,"*").split("/");return e.pop(),Uh(...e,t)}function tL({routes:r,appShellRoute:t}){let e=[...r];t!==void 0&&e.unshift({path:t,renderMode:kn.Prerender});let o=new lm,a=[];for(let s of e){let _=s,{path:w}=_,E=Hl(_,["path"]);if(w[0]==="/"){a.push(`Invalid '${w}' route configuration: the path cannot start with a slash.`);continue}o.insert(w,E)}return{serverConfigRouteTree:o,errors:a}}function iL(r,t,e,o=!1,a=!0){return vr(this,null,function*(){let{protocol:s,host:_}=e,w=bv([{provide:Eh,useValue:{document:t,url:`${s}//${_}/`}},{provide:Zc,useFactory:()=>new Z0}]);try{let R;jI(r)?R=(yield w.bootstrapModule(r)).injector.get(pa):R=yield r(),yield R.whenStable();let $=R.injector,W=$.get(Po),G=[],pe=[],le=$.get(EE,null,{optional:!0})??$.get(pf).getBaseHrefFromDOM();le.startsWith("./")&&(le=le.slice(2));let ne=$.get(_h),re=$.get(HI,null,{optional:!0}),ue;if(re){let oe=tL(re);ue=oe.serverConfigRouteTree,pe.push(...oe.errors)}if(pe.length)return{baseHref:le,routes:G,errors:pe};if(W.config.length){let oe=bx({routes:W.config,compiler:ne,parentInjector:$,parentRoute:"",serverConfigRouteTree:ue,invokeGetPrerenderParams:o,includePrerenderFallbackRoutes:a});try{for(var E=zC(oe),M,I,A;M=!(I=yield E.next()).done;M=!1){let Ve=I.value;"error"in Ve?pe.push(Ve.error):G.push(Ve)}}catch{A=[I]}finally{try{M&&(I=E.return)&&(yield I.call(E))}finally{if(A)throw A[0]}}if(ue)for(let{route:Ve,presentInClientRouter:tt}of ue.traverse())tt||Ve==="**"||pe.push(`The '${Ve}' server route does not match any routes defined in the Angular routing configuration (typically provided as a part of the 'provideRouter' call). Please make sure that the mentioned server route is present in the Angular routing configuration.`)}else{let oe=ue?.match("")??{route:"",renderMode:kn.Prerender};G.push(si(ft({},oe),{route:""}))}return{baseHref:le,routes:G,errors:pe,appShellRoute:re?.appShellRoute}}finally{w.destroy()}})}function GI(r){let{url:t,manifest:e=VI(),invokeGetPrerenderParams:o=!1,includePrerenderFallbackRoutes:a=!0,signal:s}=r;function _(){return vr(this,null,function*(){let w=new lm,E=yield new W0(e).getIndexServerHtml().text(),M=yield e.bootstrap(),{baseHref:I,appShellRoute:A,routes:R,errors:$}=yield iL(M,E,t,o,a);for(let W of R){let G=W,{route:pe}=G,le=Hl(G,["route"]);le.redirectTo!==void 0&&(le.redirectTo=Uh(I,le.redirectTo));for(let[re,ue]of Object.entries(le))ue===void 0&&delete le[re];let ne=Uh(I,pe);w.insert(ne,le)}return{appShellRoute:A,routeTree:w,errors:$}})}return s?qI(_(),s,"Routes extraction"):_()}var vx=class{store=new Map;run(t,e){return vr(this,null,function*(){let o=this.store.get(t);switch(t){case"html:transform:pre":{if(!o)return e.html;let a=ft({},e);for(let s of o)a.html=yield s(a);return a.html}default:throw new Error(`Running hook "${t}" is not supported.`)}})}on(t,e){let o=this.store.get(t);o?o.push(e):this.store.set(t,[e])}has(t){return!!this.store.get(t)?.length}},xx=class r{routeTree;constructor(t){this.routeTree=t}static#e;static from(t,e){if(t.routes){let o=lm.fromObject(t.routes);return Promise.resolve(new r(o))}return r.#e??=GI({url:e,manifest:t}).then(({routeTree:o,errors:a})=>{if(a.length>0)throw new Error(`Error(s) occurred while extracting routes:
`+a.map(s=>`- ${s}`).join(`
`));return new r(o)}).finally(()=>{r.#e=void 0}),r.#e}match(t){let{pathname:e}=UI(t);return this.routeTree.match(decodeURIComponent(e))}};function rL(r){return vr(this,null,function*(){let t=new TextEncoder().encode(r),e=yield crypto.subtle.digest("SHA-256",t),o=[];for(let a of new Uint8Array(e))o.push(a.toString(16).padStart(2,"0"));return o.join("")})}var FI=/^this\.media=["'](.*)["'];?$/,WI="ngCspMedia",zI=`
(() => {
  const CSP_MEDIA_ATTR = '${WI}';
  const documentElement = document.documentElement;

  // Listener for load events on link tags.
  const listener = (e) => {
    const target = e.target;
    if (
      !target ||
      target.tagName !== 'LINK' ||
      !target.hasAttribute(CSP_MEDIA_ATTR)
    ) {
      return;
    }

    target.media = target.getAttribute(CSP_MEDIA_ATTR);
    target.removeAttribute(CSP_MEDIA_ATTR);

    if (!document.head.querySelector(\`link[\${CSP_MEDIA_ATTR}]\`)) {
      documentElement.removeEventListener('load', listener);
    }
  };

  documentElement.addEventListener('load', listener, true);
})();`,wx=class extends N0{},Cx=class r extends wx{readFile;outputPath;addedCspScriptsDocuments=new WeakSet;documentNonces=new WeakMap;constructor(t,e){super({logger:{warn:o=>console.warn(o),error:o=>console.error(o),info:()=>{}},logLevel:"warn",path:e,publicPath:void 0,compress:!1,pruneSource:!1,reduceInlineStyles:!1,mergeStylesheets:!1,preload:"media",noscriptFallback:!0,inlineFonts:!0}),this.readFile=t,this.outputPath=e}embedLinkedStylesheet(t,e){return vr(this,null,function*(){if(t.getAttribute("media")==="print"&&t.next?.name==="noscript"){let s=t.getAttribute("onload")?.match(FI);s&&(t.removeAttribute("onload"),t.setAttribute("media",s[1]),t?.next?.remove())}let o=yield FC(r.prototype,this,"embedLinkedStylesheet").call(this,t,e),a=this.findCspNonce(e);if(a){let s=t.getAttribute("onload")?.match(FI);s&&(t.removeAttribute("onload"),t.setAttribute(WI,s[1]),this.conditionallyInsertCspLoadingScript(e,a,t)),e.head.children.forEach(_=>{_.tagName==="style"&&!_.hasAttribute("nonce")&&_.setAttribute("nonce",a)})}return o})}findCspNonce(t){if(this.documentNonces.has(t))return this.documentNonces.get(t);let e=t.querySelector("[ngCspNonce], [ngcspnonce]"),o=e?.getAttribute("ngCspNonce")||e?.getAttribute("ngcspnonce")||null;return this.documentNonces.set(t,o),o}conditionallyInsertCspLoadingScript(t,e,o){if(this.addedCspScriptsDocuments.has(t))return;if(t.head.textContent.includes(zI)){this.addedCspScriptsDocuments.add(t);return}let a=t.createElement("script");a.setAttribute("nonce",e),a.textContent=zI,t.head.insertBefore(a,o),this.addedCspScriptsDocuments.add(t)}},Ex=class{capacity;cache=new Map;head;tail;constructor(t){this.capacity=t}get(t){let e=this.cache.get(t);if(e)return this.moveToHead(e),e.value}put(t,e){let o=this.cache.get(t);if(o){o.value=e,this.moveToHead(o);return}let a={key:t,value:e,prev:void 0,next:void 0};if(this.cache.set(t,a),this.addToHead(a),this.cache.size>this.capacity){let s=this.removeTail();s&&this.cache.delete(s.key)}}addToHead(t){t.next=this.head,t.prev=void 0,this.head&&(this.head.prev=t),this.head=t,this.tail||(this.tail=t)}removeNode(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev}moveToHead(t){this.removeNode(t),this.addToHead(t)}removeTail(){let t=this.tail;return t&&this.removeNode(t),t}},nL=50,oL={[kn.Prerender]:"ssg",[kn.Server]:"ssr",[kn.Client]:""},Sx=class{options;allowStaticRouteRender;hooks;constructor(t={}){this.options=t,this.allowStaticRouteRender=this.options.allowStaticRouteRender??!1,this.hooks=t.hooks??new vx}manifest=VI();assets=new W0(this.manifest);router;inlineCriticalCssProcessor;boostrap;criticalCssLRUCache=new Ex(nL);handle(t,e){return vr(this,null,function*(){let o=new URL(t.url);this.router??=yield xx.from(this.manifest,o);let a=this.router.match(o);if(!a)return null;let{redirectTo:s,status:_,renderMode:w}=a;if(s!==void 0)return Response.redirect(new URL(QO(s,o.pathname),o),_??302);if(w===kn.Prerender){let E=yield this.handleServe(t,a);if(E)return E}return qI(this.handleRendering(t,a,e),t.signal,`Request for: ${t.url}`)})}handleServe(t,e){return vr(this,null,function*(){let{headers:o,renderMode:a}=e;if(a!==kn.Prerender)return null;let{method:s}=t;if(s!=="GET"&&s!=="HEAD")return null;let _=this.buildServerAssetPathFromRequest(t);if(!this.assets.hasServerAsset(_))return null;let{text:w,hash:E,size:M}=this.assets.getServerAsset(_),I=`"${E}"`;return t.headers.get("if-none-match")===I?new Response(void 0,{status:304,statusText:"Not Modified"}):new Response(yield w(),{headers:ft({"Content-Length":M.toString(),ETag:I,"Content-Type":"text/html;charset=UTF-8"},o)})})}handleRendering(t,e,o){return vr(this,null,function*(){let{renderMode:a,headers:s,status:_}=e;if(!this.allowStaticRouteRender&&a===kn.Prerender)return null;let w=new URL(t.url),E=[],M={status:_,headers:new Headers(ft({"Content-Type":"text/html;charset=UTF-8"},s))};if(a===kn.Server)E.push({provide:yE,useValue:t},{provide:xE,useValue:o},{provide:vE,useValue:M});else if(a===kn.Client){let pe=yield this.assets.getServerAsset("index.csr.html").text();return pe=yield this.runTransformsOnHtml(pe,w),new Response(pe,M)}let{manifest:{bootstrap:I,inlineCriticalCss:A,locale:R},hooks:$,assets:W}=this;R!==void 0&&E.push({provide:Vy,useValue:R}),this.boostrap??=yield I();let G=yield W.getIndexServerHtml().text();if(G=yield this.runTransformsOnHtml(G,w),G=yield JO(G,this.boostrap,w,E,oL[a]),A)if(this.inlineCriticalCssProcessor??=new Cx(pe=>{let le=pe.split("/").pop()??pe;return this.assets.getServerAsset(le).text()}),a===kn.Server&&typeof crypto>"u"&&console.error("The global 'crypto' module is unavailable. If you are running on Node.js, please ensure you are using version 20 or later, which includes built-in support for the Web Crypto module."),a===kn.Server&&typeof crypto<"u"){let pe=yield rL(G),le=this.criticalCssLRUCache.get(pe);le===void 0&&(le=yield this.inlineCriticalCssProcessor.process(G),this.criticalCssLRUCache.put(pe,le)),G=le}else G=yield this.inlineCriticalCssProcessor.process(G);return new Response(G,M)})}buildServerAssetPathFromRequest(t){let{pathname:e}=new URL(t.url);e.endsWith("/index.html")||(e=Uh(e,"index.html"));let{baseHref:o}=this.manifest;return o.length>1&&e.startsWith(o)&&(e=e.slice(o.length)),am(e)}runTransformsOnHtml(t,e){return vr(this,null,function*(){return this.hooks.has("html:transform:pre")&&(t=yield this.hooks.run("html:transform:pre",{html:t,url:e})),t})}},ZI;function sL(r){return ZI??=new Sx(r)}function aL(){ZI=void 0}BI(lL);var X0=class r{title="mi-aplicacion";static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(e,o){e&1&&Je(0,"router-outlet")},dependencies:[Wo,tu,Zf],encapsulation:2})};var nA=(()=>{class r{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,o){this._renderer=e,this._elementRef=o}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(o){return new(o||r)(wi(Gc),wi(cr))};static \u0275dir=zi({type:r})}return r})(),n_=(()=>{class r extends nA{static \u0275fac=(()=>{let e;return function(a){return(e||(e=ha(r)))(a||r)}})();static \u0275dir=zi({type:r,features:[qo]})}return r})(),au=new Ft(""),cL={provide:au,useExisting:ua(()=>Px),multi:!0},Px=(()=>{class r extends n_{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(a){return(e||(e=ha(r)))(a||r)}})();static \u0275dir=zi({type:r,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(o,a){o&1&&Qt("change",function(_){return a.onChange(_.target.checked)})("blur",function(){return a.onTouched()})},standalone:!1,features:[An([cL]),qo]})}return r})(),uL={provide:au,useExisting:ua(()=>lu),multi:!0};function dL(){let r=yl()?yl().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var hL=new Ft(""),lu=(()=>{class r extends nA{_compositionMode;_composing=!1;constructor(e,o,a){super(e,o),this._compositionMode=a,this._compositionMode==null&&(this._compositionMode=!dL())}writeValue(e){let o=e??"";this.setProperty("value",o)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(o){return new(o||r)(wi(Gc),wi(cr),wi(hL,8))};static \u0275dir=zi({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,a){o&1&&Qt("input",function(_){return a._handleInput(_.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(_){return a._compositionEnd(_.target.value)})},standalone:!1,features:[An([uL]),qo]})}return r})();function ou(r){return r==null||(typeof r=="string"||Array.isArray(r))&&r.length===0}function oA(r){return r!=null&&typeof r.length=="number"}var o_=new Ft(""),s_=new Ft(""),pL=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ls=class{static min(t){return fL(t)}static max(t){return mL(t)}static required(t){return gL(t)}static requiredTrue(t){return _L(t)}static email(t){return bL(t)}static minLength(t){return yL(t)}static maxLength(t){return vL(t)}static pattern(t){return xL(t)}static nullValidator(t){return sA(t)}static compose(t){return hA(t)}static composeAsync(t){return pA(t)}};function fL(r){return t=>{if(ou(t.value)||ou(r))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<r?{min:{min:r,actual:t.value}}:null}}function mL(r){return t=>{if(ou(t.value)||ou(r))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>r?{max:{max:r,actual:t.value}}:null}}function gL(r){return ou(r.value)?{required:!0}:null}function _L(r){return r.value===!0?null:{required:!0}}function bL(r){return ou(r.value)||pL.test(r.value)?null:{email:!0}}function yL(r){return t=>ou(t.value)||!oA(t.value)?null:t.value.length<r?{minlength:{requiredLength:r,actualLength:t.value.length}}:null}function vL(r){return t=>oA(t.value)&&t.value.length>r?{maxlength:{requiredLength:r,actualLength:t.value.length}}:null}function xL(r){if(!r)return sA;let t,e;return typeof r=="string"?(e="",r.charAt(0)!=="^"&&(e+="^"),e+=r,r.charAt(r.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=r.toString(),t=r),o=>{if(ou(o.value))return null;let a=o.value;return t.test(a)?null:{pattern:{requiredPattern:e,actualValue:a}}}}function sA(r){return null}function aA(r){return r!=null}function lA(r){return kg(r)?ho(r):r}function cA(r){let t={};return r.forEach(e=>{t=e!=null?ft(ft({},t),e):t}),Object.keys(t).length===0?null:t}function uA(r,t){return t.map(e=>e(r))}function wL(r){return!r.validate}function dA(r){return r.map(t=>wL(t)?t:e=>t.validate(e))}function hA(r){if(!r)return null;let t=r.filter(aA);return t.length==0?null:function(e){return cA(uA(e,t))}}function Dx(r){return r!=null?hA(dA(r)):null}function pA(r){if(!r)return null;let t=r.filter(aA);return t.length==0?null:function(e){let o=uA(e,t).map(lA);return xg(o).pipe(gi(cA))}}function Rx(r){return r!=null?pA(dA(r)):null}function XI(r,t){return r===null?[t]:Array.isArray(r)?[...r,t]:[r,t]}function fA(r){return r._rawValidators}function mA(r){return r._rawAsyncValidators}function Tx(r){return r?Array.isArray(r)?r:[r]:[]}function K0(r,t){return Array.isArray(r)?r.includes(t):r===t}function YI(r,t){let e=Tx(t);return Tx(r).forEach(a=>{K0(e,a)||e.push(a)}),e}function KI(r,t){return Tx(t).filter(e=>!K0(r,e))}var Q0=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Dx(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Rx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},tc=class extends Q0{name;get formDirective(){return null}get path(){return null}},ic=class extends Q0{_parent=null;name=null;valueAccessor=null},J0=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},CL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},bj=si(ft({},CL),{"[class.ng-submitted]":"isSubmitted"}),cu=(()=>{class r extends J0{constructor(e){super(e)}static \u0275fac=function(o){return new(o||r)(wi(ic,2))};static \u0275dir=zi({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,a){o&2&&lr("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)},standalone:!1,features:[qo]})}return r})(),a_=(()=>{class r extends J0{constructor(e){super(e)}static \u0275fac=function(o){return new(o||r)(wi(tc,10))};static \u0275dir=zi({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(o,a){o&2&&lr("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)("ng-submitted",a.isSubmitted)},standalone:!1,features:[qo]})}return r})();var cm="VALID",Y0="INVALID",jh="PENDING",um="DISABLED",su=class{},e_=class extends su{value;source;constructor(t,e){super(),this.value=t,this.source=e}},hm=class extends su{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},pm=class extends su{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},qh=class extends su{status;source;constructor(t,e){super(),this.status=t,this.source=e}},Mx=class extends su{source;constructor(t){super(),this.source=t}},Ix=class extends su{source;constructor(t){super(),this.source=t}};function Ox(r){return(l_(r)?r.validators:r)||null}function EL(r){return Array.isArray(r)?Dx(r):r||null}function Lx(r,t){return(l_(t)?t.asyncValidators:r)||null}function SL(r){return Array.isArray(r)?Rx(r):r||null}function l_(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}function gA(r,t,e){let o=r.controls;if(!(t?Object.keys(o):o).length)throw new xr(1e3,"");if(!o[e])throw new xr(1001,"")}function _A(r,t,e){r._forEachChild((o,a)=>{if(e[a]===void 0)throw new xr(1002,"")})}var Hh=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return qa(this.statusReactive)}set status(t){qa(()=>this.statusReactive.set(t))}_status=Zl(()=>this.statusReactive());statusReactive=Wc(void 0);get valid(){return this.status===cm}get invalid(){return this.status===Y0}get pending(){return this.status==jh}get disabled(){return this.status===um}get enabled(){return this.status!==um}errors;get pristine(){return qa(this.pristineReactive)}set pristine(t){qa(()=>this.pristineReactive.set(t))}_pristine=Zl(()=>this.pristineReactive());pristineReactive=Wc(!0);get dirty(){return!this.pristine}get touched(){return qa(this.touchedReactive)}set touched(t){qa(()=>this.touchedReactive.set(t))}_touched=Zl(()=>this.touchedReactive());touchedReactive=Wc(!1);get untouched(){return!this.touched}_events=new Mi;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(YI(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(YI(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(KI(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(KI(t,this._rawAsyncValidators))}hasValidator(t){return K0(this._rawValidators,t)}hasAsyncValidator(t){return K0(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let o=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(si(ft({},t),{sourceControl:o})),e&&t.emitEvent!==!1&&this._events.next(new pm(!0,o))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let o=t.sourceControl??this;this._forEachChild(a=>{a.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:o})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,o),e&&t.emitEvent!==!1&&this._events.next(new pm(!1,o))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let o=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(si(ft({},t),{sourceControl:o})),e&&t.emitEvent!==!1&&this._events.next(new hm(!1,o))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let o=t.sourceControl??this;this._forEachChild(a=>{a.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,o),e&&t.emitEvent!==!1&&this._events.next(new hm(!0,o))}markAsPending(t={}){this.status=jh;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new qh(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(si(ft({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=um,this.errors=null,this._forEachChild(a=>{a.disable(si(ft({},t),{onlySelf:!0}))}),this._updateValue();let o=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new e_(this.value,o)),this._events.next(new qh(this.status,o)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(si(ft({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(a=>a(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=cm,this._forEachChild(o=>{o.enable(si(ft({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(si(ft({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let o=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cm||this.status===jh)&&this._runAsyncValidator(o,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new e_(this.value,e)),this._events.next(new qh(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(si(ft({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?um:cm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=jh,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let o=lA(this.asyncValidator(this));this._asyncValidationSubscription=o.subscribe(a=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(a,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((o,a)=>o&&o._find(a),this)}getError(t,e){let o=e?this.get(e):this;return o&&o.errors?o.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,o){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||o)&&this._events.next(new qh(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,o)}_initObservables(){this.valueChanges=new ar,this.statusChanges=new ar}_calculateStatus(){return this._allControlsDisabled()?um:this.errors?Y0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jh)?jh:this._anyControlsHaveStatus(Y0)?Y0:cm}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let o=!this._anyControlsDirty(),a=this.pristine!==o;this.pristine=o,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),a&&this._events.next(new hm(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new pm(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){l_(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=EL(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=SL(this._rawAsyncValidators)}},$h=class extends Hh{constructor(t,e,o){super(Ox(e),Lx(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,o={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){_A(this,!0,t),Object.keys(t).forEach(o=>{gA(this,!0,o),this.controls[o].setValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(o=>{let a=this.controls[o];a&&a.patchValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((o,a)=>{o.reset(t?t[a]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,o)=>(t[o]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,o)=>o._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let o=this.controls[e];o&&t(o,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,o]of Object.entries(this.controls))if(this.contains(e)&&t(o))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,o,a)=>((o.enabled||this.disabled)&&(e[a]=o.value),e))}_reduceChildren(t,e){let o=t;return this._forEachChild((a,s)=>{o=e(o,a,s)}),o}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Ax=class extends $h{};var mm=new Ft("CallSetDisabledState",{providedIn:"root",factory:()=>c_}),c_="always";function bA(r,t){return[...t.path,r]}function t_(r,t,e=c_){Nx(r,t),t.valueAccessor.writeValue(r.value),(r.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(r.disabled),ML(r,t),AL(r,t),IL(r,t),TL(r,t)}function QI(r,t,e=!0){let o=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(o),t.valueAccessor.registerOnTouched(o)),r_(r,t),r&&(t._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function i_(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function TL(r,t){if(t.valueAccessor.setDisabledState){let e=o=>{t.valueAccessor.setDisabledState(o)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}function Nx(r,t){let e=fA(r);t.validator!==null?r.setValidators(XI(e,t.validator)):typeof e=="function"&&r.setValidators([e]);let o=mA(r);t.asyncValidator!==null?r.setAsyncValidators(XI(o,t.asyncValidator)):typeof o=="function"&&r.setAsyncValidators([o]);let a=()=>r.updateValueAndValidity();i_(t._rawValidators,a),i_(t._rawAsyncValidators,a)}function r_(r,t){let e=!1;if(r!==null){if(t.validator!==null){let a=fA(r);if(Array.isArray(a)&&a.length>0){let s=a.filter(_=>_!==t.validator);s.length!==a.length&&(e=!0,r.setValidators(s))}}if(t.asyncValidator!==null){let a=mA(r);if(Array.isArray(a)&&a.length>0){let s=a.filter(_=>_!==t.asyncValidator);s.length!==a.length&&(e=!0,r.setAsyncValidators(s))}}}let o=()=>{};return i_(t._rawValidators,o),i_(t._rawAsyncValidators,o),e}function ML(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&yA(r,t)})}function IL(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&yA(r,t),r.updateOn!=="submit"&&r.markAsTouched()})}function yA(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function AL(r,t){let e=(o,a)=>{t.valueAccessor.writeValue(o),a&&t.viewToModelUpdate(o)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}function vA(r,t){r==null,Nx(r,t)}function kL(r,t){return r_(r,t)}function xA(r,t){if(!r.hasOwnProperty("model"))return!1;let e=r.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function PL(r){return Object.getPrototypeOf(r.constructor)===n_}function wA(r,t){r._syncPendingControls(),t.forEach(e=>{let o=e.control;o.updateOn==="submit"&&o._pendingChange&&(e.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}function CA(r,t){if(!t)return null;Array.isArray(t);let e,o,a;return t.forEach(s=>{s.constructor===lu?e=s:PL(s)?o=s:a=s}),a||o||e||null}function DL(r,t){let e=r.indexOf(t);e>-1&&r.splice(e,1)}var RL={provide:tc,useExisting:ua(()=>Fx)},dm=Promise.resolve(),Fx=(()=>{class r extends tc{callSetDisabledState;get submitted(){return qa(this.submittedReactive)}_submitted=Zl(()=>this.submittedReactive());submittedReactive=Wc(!1);_directives=new Set;form;ngSubmit=new ar;options;constructor(e,o,a){super(),this.callSetDisabledState=a,this.form=new $h({},Dx(e),Rx(o))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){dm.then(()=>{let o=this._findContainer(e.path);e.control=o.registerControl(e.name,e.control),t_(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){dm.then(()=>{let o=this._findContainer(e.path);o&&o.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){dm.then(()=>{let o=this._findContainer(e.path),a=new $h({});vA(a,e),o.registerControl(e.name,a),a.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){dm.then(()=>{let o=this._findContainer(e.path);o&&o.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,o){dm.then(()=>{this.form.get(e.path).setValue(o)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),wA(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(o){return new(o||r)(wi(o_,10),wi(s_,10),wi(mm,8))};static \u0275dir=zi({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(o,a){o&1&&Qt("submit",function(_){return a.onSubmit(_)})("reset",function(){return a.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[An([RL]),qo]})}return r})();function JI(r,t){let e=r.indexOf(t);e>-1&&r.splice(e,1)}function eA(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var fm=class extends Hh{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,o){super(Ox(e),Lx(o,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),l_(e)&&(e.nonNullable||e.initialValueIsDefault)&&(eA(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(o=>o(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){JI(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){JI(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){eA(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var OL=r=>r instanceof fm;var LL={provide:ic,useExisting:ua(()=>dd)},tA=Promise.resolve(),dd=(()=>{class r extends ic{_changeDetectorRef;callSetDisabledState;control=new fm;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ar;constructor(e,o,a,s,_,w){super(),this._changeDetectorRef=_,this.callSetDisabledState=w,this._parent=e,this._setValidators(o),this._setAsyncValidators(a),this.valueAccessor=CA(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let o=e.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),xA(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){t_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){tA.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let o=e.isDisabled.currentValue,a=o!==0&&er(o);tA.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?bA(e,this._parent):[e]}static \u0275fac=function(o){return new(o||r)(wi(tc,9),wi(o_,10),wi(s_,10),wi(au,10),wi(Go,8),wi(mm,8))};static \u0275dir=zi({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[An([LL]),qo,da]})}return r})(),u_=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return r})();var EA=new Ft("");var NL={provide:tc,useExisting:ua(()=>hd)},hd=(()=>{class r extends tc{callSetDisabledState;get submitted(){return qa(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=Zl(()=>this._submittedReactive());_submittedReactive=Wc(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new ar;constructor(e,o,a){super(),this.callSetDisabledState=a,this._setValidators(e),this._setAsyncValidators(o)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(r_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let o=this.form.get(e.path);return t_(o,e,this.callSetDisabledState),o.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),o}getControl(e){return this.form.get(e.path)}removeControl(e){QI(e.control||null,e,!1),DL(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,o){this.form.get(e.path).setValue(o)}onSubmit(e){return this._submittedReactive.set(!0),wA(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Mx(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new Ix(this.form))}_updateDomValue(){this.directives.forEach(e=>{let o=e.control,a=this.form.get(e.path);o!==a&&(QI(o||null,e),OL(a)&&(t_(a,e,this.callSetDisabledState),e.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let o=this.form.get(e.path);vA(o,e),o.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let o=this.form.get(e.path);o&&kL(o,e)&&o.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Nx(this.form,this),this._oldForm&&r_(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(o){return new(o||r)(wi(o_,10),wi(s_,10),wi(mm,8))};static \u0275dir=zi({type:r,selectors:[["","formGroup",""]],hostBindings:function(o,a){o&1&&Qt("submit",function(_){return a.onSubmit(_)})("reset",function(){return a.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[An([NL]),qo,da]})}return r})();var FL={provide:ic,useExisting:ua(()=>gm)},gm=(()=>{class r extends ic{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new ar;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,o,a,s,_){super(),this._ngModelWarningConfig=_,this._parent=e,this._setValidators(o),this._setAsyncValidators(a),this.valueAccessor=CA(this,s)}ngOnChanges(e){this._added||this._setUpControl(),xA(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return bA(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(o){return new(o||r)(wi(tc,13),wi(o_,10),wi(s_,10),wi(au,10),wi(EA,8))};static \u0275dir=zi({type:r,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[An([FL]),qo,da]})}return r})(),zL={provide:au,useExisting:ua(()=>Gh),multi:!0};function SA(r,t){return r==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${r}: ${t}`.slice(0,50))}function BL(r){return r.split(":")[0]}var Gh=(()=>{class r extends n_{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let o=this._getOptionId(e),a=SA(o,e);this.setProperty("value",a)}registerOnChange(e){this.onChange=o=>{this.value=this._getOptionValue(o),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o),e))return o;return null}_getOptionValue(e){let o=BL(e);return this._optionMap.has(o)?this._optionMap.get(o):e}static \u0275fac=(()=>{let e;return function(a){return(e||(e=ha(r)))(a||r)}})();static \u0275dir=zi({type:r,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(o,a){o&1&&Qt("change",function(_){return a.onChange(_.target.value)})("blur",function(){return a.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[An([zL]),qo]})}return r})(),d_=(()=>{class r{_element;_renderer;_select;id;constructor(e,o,a){this._element=e,this._renderer=o,this._select=a,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(SA(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(o){return new(o||r)(wi(cr),wi(Gc),wi(Gh,9))};static \u0275dir=zi({type:r,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return r})(),VL={provide:au,useExisting:ua(()=>TA),multi:!0};function iA(r,t){return r==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${r}: ${t}`.slice(0,50))}function UL(r){return r.split(":")[0]}var TA=(()=>{class r extends n_{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let o;if(Array.isArray(e)){let a=e.map(s=>this._getOptionId(s));o=(s,_)=>{s._setSelected(a.indexOf(_.toString())>-1)}}else o=(a,s)=>{a._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(e){this.onChange=o=>{let a=[],s=o.selectedOptions;if(s!==void 0){let _=s;for(let w=0;w<_.length;w++){let E=_[w],M=this._getOptionValue(E.value);a.push(M)}}else{let _=o.options;for(let w=0;w<_.length;w++){let E=_[w];if(E.selected){let M=this._getOptionValue(E.value);a.push(M)}}}this.value=a,e(a)}}_registerOption(e){let o=(this._idCounter++).toString();return this._optionMap.set(o,e),o}_getOptionId(e){for(let o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o)._value,e))return o;return null}_getOptionValue(e){let o=UL(e);return this._optionMap.has(o)?this._optionMap.get(o)._value:e}static \u0275fac=(()=>{let e;return function(a){return(e||(e=ha(r)))(a||r)}})();static \u0275dir=zi({type:r,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(o,a){o&1&&Qt("change",function(_){return a.onChange(_.target)})("blur",function(){return a.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[An([VL]),qo]})}return r})(),h_=(()=>{class r{_element;_renderer;_select;id;_value;constructor(e,o,a){this._element=e,this._renderer=o,this._select=a,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(iA(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(iA(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(o){return new(o||r)(wi(cr),wi(Gc),wi(TA,9))};static \u0275dir=zi({type:r,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return r})();var MA=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({})}return r})(),kx=class extends Hh{constructor(t,e,o){super(Ox(e),Lx(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,o={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(t,e={}){let o=this._adjustIndex(t);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,o={}){let a=this._adjustIndex(t);a<0&&(a=0),this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),this.controls.splice(a,1),e&&(this.controls.splice(a,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){_A(this,!1,t),t.forEach((o,a)=>{gA(this,!1,a),this.at(a).setValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((o,a)=>{this.at(a)&&this.at(a).patchValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((o,a)=>{o.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,o)=>o._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,o)=>{t(e,o)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function rA(r){return!!r&&(r.asyncValidators!==void 0||r.validators!==void 0||r.updateOn!==void 0)}var p_=(()=>{class r{useNonNullable=!1;get nonNullable(){let e=new r;return e.useNonNullable=!0,e}group(e,o=null){let a=this._reduceControls(e),s={};return rA(o)?s=o:o!==null&&(s.validators=o.validator,s.asyncValidators=o.asyncValidator),new $h(a,s)}record(e,o=null){let a=this._reduceControls(e);return new Ax(a,o)}control(e,o,a){let s={};return this.useNonNullable?(rA(o)?s=o:(s.validators=o,s.asyncValidators=a),new fm(e,si(ft({},s),{nonNullable:!0}))):new fm(e,o,a)}array(e,o,a){let s=e.map(_=>this._createControl(_));return new kx(s,o,a)}_reduceControls(e){let o={};return Object.keys(e).forEach(a=>{o[a]=this._createControl(e[a])}),o}_createControl(e){if(e instanceof fm)return e;if(e instanceof Hh)return e;if(Array.isArray(e)){let o=e[0],a=e.length>1?e[1]:null,s=e.length>2?e[2]:null;return this.control(o,a,s)}else return this.control(e)}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Wh=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:mm,useValue:e.callSetDisabledState??c_}]}}static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({imports:[MA]})}return r})(),f_=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:EA,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:mm,useValue:e.callSetDisabledState??c_}]}}static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({imports:[MA]})}return r})();var g_=class r{constructor(t,e){this.http=t;this.router=e}apiUrl="http://flask-fiware.apps.preprodalcaldia.medellin.gov.co/api/keycloak/login";login(t){return this.http.post(this.apiUrl,t).pipe(Br(e=>{localStorage.setItem("access_token",e.access_token),this.router.navigate(["/inicio"])}))}logout(){localStorage.removeItem("access_token"),this.router.navigate(["/login"])}isLoggedIn(){return!!localStorage.getItem("access_token")}static \u0275fac=function(e){return new(e||r)(li($a),li(Po))};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})};function qL(r,t){if(r&1&&(K(0,"p",9),Se(1),ie()),r&2){let e=At();Be(),Ci(e.errorMsg)}}var _m=class r{constructor(t,e){this.fb=t;this.auth=e;this.loginForm=this.fb.group({username:["",Ls.required],password:["",Ls.required]})}loginForm;errorMsg="";onSubmit(){this.loginForm.valid&&this.auth.login(this.loginForm.value).subscribe({next:()=>{},error:t=>{console.error(t),this.errorMsg="Usuario o contrase\xF1a incorrectos"}})}static \u0275fac=function(e){return new(e||r)(wi(p_),wi(g_))};static \u0275cmp=Vt({type:r,selectors:[["app-login"]],decls:14,vars:2,consts:[[1,"login-wrapper"],[1,"login-card"],[1,"logo"],["src","https://www.fiware.org/custom/brand-guide/img/logo/fiware/primary/jpg/logo-fiware.jpg?","alt","Logo Alcald\xEDa de Medell\xEDn",1,"login-logo"],[3,"ngSubmit","formGroup"],["type","text","formControlName","username","placeholder","Usuario"],["type","password","formControlName","password","placeholder","Contrase\xF1a"],["type","submit"],["class","error",4,"ngIf"],[1,"error"]],template:function(e,o){e&1&&(K(0,"div",0)(1,"div",1)(2,"h1",2),Se(3,"Medell\xEDn "),K(4,"span"),Se(5,"Inteligente"),ie()(),K(6,"div",2),Je(7,"img",3),ie(),K(8,"form",4),Qt("ngSubmit",function(){return o.onSubmit()}),Je(9,"input",5)(10,"input",6),K(11,"button",7),Se(12,"Iniciar Sesi\xF3n"),ie()(),Ot(13,qL,2,1,"p",8),ie()()),e&2&&(Be(8),yt("formGroup",o.loginForm),Be(5),yt("ngIf",o.errorMsg))},dependencies:[Wo,vl,f_,u_,lu,cu,a_,hd,gm,Qc,tu],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;height:100vh;width:100%;background:linear-gradient(135deg,#ffffffe6,#f5f5f5e6);display:flex;justify-content:center;align-items:center;perspective:1000px}.login-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:90%;max-width:400px;padding:2rem}.login-card[_ngcontent-%COMP%]{background:#ffffffbf;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border-radius:20px;padding:2rem;width:100%;box-shadow:0 15px 30px #0000001a,inset 0 0 60px #ffffff4d;transform-style:preserve-3d;transition:transform .6s cubic-bezier(.4,0,.2,1);border:1.5px solid rgba(200,200,200,.4);animation:_ngcontent-%COMP%_fadeInGlass 1.2s ease forwards}.login-card[_ngcontent-%COMP%]:hover{transform:rotateY(8deg) rotateX(8deg) translateZ(10px);box-shadow:0 25px 40px #00000026,inset 0 0 70px #fff6}.logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.login-logo[_ngcontent-%COMP%]{max-width:150px;height:auto;filter:drop-shadow(0 0 6px rgba(0,0,0,.12))}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.8rem;border:none;border-radius:12px;background:#ffffffd9;color:#334155;outline:none;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:inset 0 0 8px #fffc,0 4px 10px #0000000d;transition:background .3s ease,box-shadow .3s ease,color .3s ease}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#64748b}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#fff;color:#1e293b;box-shadow:0 0 12px 3px #38bdf880,inset 0 0 15px #ffffffe6;transform:translateZ(5px)}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.8rem;border-radius:12px;background:#fff3;border:2px solid rgba(128,128,128,.6);color:#334155;font-weight:700;cursor:pointer;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);box-shadow:0 6px 10px #0000001f,inset 0 0 15px #ffffff80;transition:transform .3s ease,box-shadow .3s ease,background .3s ease;transform-style:preserve-3d}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#fff6;border-color:#646464e6;box-shadow:0 10px 18px #00000040,inset 0 0 20px #ffffffb3;transform:scale(1.08) translateZ(8px)}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.97) translateZ(0);box-shadow:0 4px 6px #00000026,inset 0 0 12px #fff6}.error[_ngcontent-%COMP%]{color:#ef4444;text-align:center;margin-top:1rem;animation:_ngcontent-%COMP%_pulseRed 2s infinite}@keyframes _ngcontent-%COMP%_fadeInGlass{0%{opacity:0;transform:translateY(40px) scale(.85) rotateX(10deg)}to{opacity:1;transform:translateY(0) scale(1) rotateX(0)}}@keyframes _ngcontent-%COMP%_glow{0%{text-shadow:0 0 6px #38bdf8,0 0 12px #38bdf8}to{text-shadow:0 0 14px #a78bfa,0 0 28px #a78bfa}}@keyframes _ngcontent-%COMP%_pulseRed{0%,to{opacity:1}50%{opacity:.6}}@media (max-width: 600px){.login-card[_ngcontent-%COMP%]{padding:1.5rem;border-radius:16px}.logo[_ngcontent-%COMP%]{font-size:1.5rem}form[_ngcontent-%COMP%]{gap:.8rem}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.9rem}}']})};var Bx;try{Bx=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Bx=!1}var bo=(()=>{class r{_platformId=Oe(ja);isBrowser=this._platformId?kE(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Bx)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var bm;function HL(){if(bm==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>bm=!0}))}finally{bm=bm||!1}return bm}function Zh(r){return HL()?r:!!r.capture}var pd;function Vx(){if(pd==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return pd=!1,pd;if("scrollBehavior"in document.documentElement.style)pd=!0;else{let r=Element.prototype.scrollTo;r?pd=!/\{\s*\[native code\]\s*\}/.test(r.toString()):pd=!1}}return pd}var zx;function $L(){if(zx==null){let r=typeof document<"u"?document.head:null;zx=!!(r&&(r.createShadowRoot||r.attachShadow))}return zx}function IA(r){if($L()){let t=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function ma(r){return r.composedPath?r.composedPath()[0]:r.target}function Ux(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var __=new WeakMap,rc=(()=>{class r{_appRef;_injector=Oe(In);_environmentInjector=Oe(Ua);load(e){let o=this._appRef=this._appRef||this._injector.get(pa),a=__.get(o);a||(a={loaders:new Set,refs:[]},__.set(o,a),o.onDestroy(()=>{__.get(o)?.refs.forEach(s=>s.destroy()),__.delete(o)})),a.loaders.has(e)||(a.loaders.add(e),a.refs.push(Lg(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),AA=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(o,a){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return r})();function nc(r,...t){return t.length?t.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}function kA(r){return r!=null&&`${r}`!="false"}function Xh(r){return Array.isArray(r)?r:[r]}function mn(r){return r==null?"":typeof r=="string"?r:`${r}px`}function oc(r){return r instanceof cr?r.nativeElement:r}var GL=(()=>{class r{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var PA=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({providers:[GL]})}return r})();var DA=new Set,fd,WL=(()=>{class r{_platform=Oe(bo);_nonce=Oe(Yu,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):XL}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&ZL(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function ZL(r,t){if(!DA.has(r))try{fd||(fd=document.createElement("style"),t&&fd.setAttribute("nonce",t),fd.setAttribute("type","text/css"),document.head.appendChild(fd)),fd.sheet&&(fd.sheet.insertRule(`@media ${r} {body{ }}`,0),DA.add(r))}catch(e){console.error(e)}}function XL(r){return{matches:r==="all"||r==="",media:r,addListener:()=>{},removeListener:()=>{}}}var OA=(()=>{class r{_mediaMatcher=Oe(WL);_zone=Oe(Xi);_queries=new Map;_destroySubject=new Mi;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return RA(Xh(e)).some(a=>this._registerQuery(a).mql.matches)}observe(e){let a=RA(Xh(e)).map(_=>this._registerQuery(_).observable),s=dh(a);return s=vg(s.pipe(Ms(1)),s.pipe(Cg(1),wg(0))),s.pipe(gi(_=>{let w={matches:!1,breakpoints:{}};return _.forEach(({matches:E,query:M})=>{w.matches=w.matches||E,w.breakpoints[M]=E}),w}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let o=this._mediaMatcher.matchMedia(e),s={observable:new $l(_=>{let w=E=>this._zone.run(()=>_.next(E));return o.addListener(w),()=>{o.removeListener(w)}}).pipe(gl(o),gi(({matches:_})=>({query:e,matches:_})),pn(this._destroySubject)),mql:o};return this._queries.set(e,s),s}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function RA(r){return r.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var FA=" ";function zA(r,t,e){let o=BA(r,t);e=e.trim(),!o.some(a=>a.trim()===e)&&(o.push(e),r.setAttribute(t,o.join(FA)))}function Wx(r,t,e){let o=BA(r,t);e=e.trim();let a=o.filter(s=>s!==e);a.length?r.setAttribute(t,a.join(FA)):r.removeAttribute(t)}function BA(r,t){return r.getAttribute(t)?.match(/\S+/g)??[]}var cN=200,Hx=class{_letterKeyStream=new Mi;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new Mi;selectedItem=this._selectedItem;constructor(t,e){let o=typeof e?.debounceInterval=="number"?e.debounceInterval:cN;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(t),this._setupKeyHandler(o)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(t){this._selectedItemIndex=t}setItems(t){this._items=t}handleKey(t){let e=t.keyCode;t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(t){this._letterKeyStream.pipe(Br(e=>this._pressedLetters.push(e)),wg(t),sn(()=>this._pressedLetters.length>0),gi(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let o=1;o<this._items.length+1;o++){let a=(this._selectedItemIndex+o)%this._items.length,s=this._items[a];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}},$x=class{_items;_activeItemIndex=-1;_activeItem=Wc(null);_wrap=!1;_typeaheadSubscription=Mo.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=t=>t.disabled;constructor(t,e){this._items=t,t instanceof Py?this._itemChangesSubscription=t.changes.subscribe(o=>this._itemsChanged(o.toArray())):df(t)&&(this._effectRef=gE(()=>this._itemsChanged(t()),{injector:e}))}tabOut=new Mi;change=new Mi;skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new Hx(e,{debounceInterval:typeof t=="number"?t:void 0,skipPredicate:o=>this._skipPredicateFn(o)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(o=>{this.setActiveItem(o)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem();this.updateActiveItem(t),this._activeItem()!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,a=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&a){this.setNextItemActive();break}else return;case 38:if(this._vertical&&a){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&a){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&a){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&a){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&a){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&a){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&a){let s=this._activeItemIndex+this._pageUpAndDown.delta,_=this._getItemsArray().length;this._setActiveItemByIndex(s<_?s:_-1,-1);break}else return;default:(a||nc(t,"shiftKey"))&&this._typeahead?.handleKey(t);return}this._typeahead?.reset(),t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),o=typeof t=="number"?t:e.indexOf(t),a=e[o];this._activeItem.set(a??null),this._activeItemIndex=o,this._typeahead?.setCurrentSelectedItemIndex(o)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let o=1;o<=e.length;o++){let a=(this._activeItemIndex+t*o+e.length)%e.length,s=e[a];if(!this._skipPredicateFn(s)){this.setActiveItem(a);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let o=this._getItemsArray();if(o[t]){for(;this._skipPredicateFn(o[t]);)if(t+=e,!o[t])return;this.setActiveItem(t)}}_getItemsArray(){return df(this._items)?this._items():this._items instanceof Py?this._items.toArray():this._items}_itemsChanged(t){this._typeahead?.setItems(t);let e=this._activeItem();if(e){let o=t.indexOf(e);o>-1&&o!==this._activeItemIndex&&(this._activeItemIndex=o,this._typeahead?.setCurrentSelectedItemIndex(o))}}},v_=class extends $x{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}};function Zx(r){return r.buttons===0||r.detail===0}function Xx(r){let t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var uN=new Ft("cdk-input-modality-detector-options"),dN={ignoreKeys:[18,17,224,91,16]},VA=650,Yh=Zh({passive:!0,capture:!0}),hN=(()=>{class r{_platform=Oe(bo);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new ls(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(o=>o===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ma(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<VA||(this._modality.next(Zx(e)?"keyboard":"mouse"),this._mostRecentTarget=ma(e))};_onTouchstart=e=>{if(Xx(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ma(e)};constructor(){let e=Oe(Xi),o=Oe(Ii),a=Oe(uN,{optional:!0});this._options=ft(ft({},dN),a),this.modalityDetected=this._modality.pipe(Cg(1)),this.modalityChanged=this.modalityDetected.pipe(sf()),this._platform.isBrowser&&e.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Yh),o.addEventListener("mousedown",this._onMousedown,Yh),o.addEventListener("touchstart",this._onTouchstart,Yh)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Yh),document.removeEventListener("mousedown",this._onMousedown,Yh),document.removeEventListener("touchstart",this._onTouchstart,Yh))}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),pN=new Ft("liveAnnouncerElement",{providedIn:"root",factory:fN});function fN(){return null}var mN=new Ft("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),gN=0,UA=(()=>{class r{_ngZone=Oe(Xi);_defaultOptions=Oe(mN,{optional:!0});_liveElement;_document=Oe(Ii);_previousTimeout;_currentPromise;_currentResolve;constructor(){let e=Oe(pN,{optional:!0});this._liveElement=e||this._createLiveElement()}announce(e,...o){let a=this._defaultOptions,s,_;return o.length===1&&typeof o[0]=="number"?_=o[0]:[s,_]=o,this.clear(),clearTimeout(this._previousTimeout),s||(s=a&&a.politeness?a.politeness:"polite"),_==null&&a&&(_=a.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(w=>this._currentResolve=w)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof _=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),_)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",o=this._document.getElementsByClassName(e),a=this._document.createElement("div");for(let s=0;s<o.length;s++)o[s].remove();return a.classList.add(e),a.classList.add("cdk-visually-hidden"),a.setAttribute("aria-atomic","true"),a.setAttribute("aria-live","polite"),a.id=`cdk-live-announcer-${gN++}`,this._document.body.appendChild(a),a}_exposeAnnouncerToModals(e){let o=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let a=0;a<o.length;a++){let s=o[a],_=s.getAttribute("aria-owns");_?_.indexOf(e)===-1&&s.setAttribute("aria-owns",_+" "+e):s.setAttribute("aria-owns",e)}}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var y_=function(r){return r[r.IMMEDIATE=0]="IMMEDIATE",r[r.EVENTUAL=1]="EVENTUAL",r}(y_||{}),_N=new Ft("cdk-focus-monitor-default-options"),b_=Zh({passive:!0,capture:!0}),jA=(()=>{class r{_ngZone=Oe(Xi);_platform=Oe(bo);_inputModalityDetector=Oe(hN);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=Oe(Ii,{optional:!0});_stopInputModalityDetector=new Mi;constructor(){let e=Oe(_N,{optional:!0});this._detectionMode=e?.detectionMode||y_.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let o=ma(e);for(let a=o;a;a=a.parentElement)e.type==="focus"?this._onFocus(e,a):this._onBlur(e,a)};monitor(e,o=!1){let a=oc(e);if(!this._platform.isBrowser||a.nodeType!==1)return ti();let s=IA(a)||this._getDocument(),_=this._elementInfo.get(a);if(_)return o&&(_.checkChildren=!0),_.subject;let w={checkChildren:o,subject:new Mi,rootNode:s};return this._elementInfo.set(a,w),this._registerGlobalListeners(w),w.subject}stopMonitoring(e){let o=oc(e),a=this._elementInfo.get(o);a&&(a.subject.complete(),this._setClasses(o),this._elementInfo.delete(o),this._removeGlobalListeners(a))}focusVia(e,o,a){let s=oc(e),_=this._getDocument().activeElement;s===_?this._getClosestElementsInfo(s).forEach(([w,E])=>this._originChanged(w,o,E)):(this._setOrigin(o),typeof s.focus=="function"&&s.focus(a))}ngOnDestroy(){this._elementInfo.forEach((e,o)=>this.stopMonitoring(o))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===y_.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,o){e.classList.toggle("cdk-focused",!!o),e.classList.toggle("cdk-touch-focused",o==="touch"),e.classList.toggle("cdk-keyboard-focused",o==="keyboard"),e.classList.toggle("cdk-mouse-focused",o==="mouse"),e.classList.toggle("cdk-program-focused",o==="program")}_setOrigin(e,o=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&o,this._detectionMode===y_.IMMEDIATE){clearTimeout(this._originTimeoutId);let a=this._originFromTouchInteraction?VA:1;this._originTimeoutId=setTimeout(()=>this._origin=null,a)}})}_onFocus(e,o){let a=this._elementInfo.get(o),s=ma(e);!a||!a.checkChildren&&o!==s||this._originChanged(o,this._getFocusOrigin(s),a)}_onBlur(e,o){let a=this._elementInfo.get(o);!a||a.checkChildren&&e.relatedTarget instanceof Node&&o.contains(e.relatedTarget)||(this._setClasses(o),this._emitOrigin(a,null))}_emitOrigin(e,o){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(o))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let o=e.rootNode,a=this._rootNodeFocusListenerCount.get(o)||0;a||this._ngZone.runOutsideAngular(()=>{o.addEventListener("focus",this._rootNodeFocusAndBlurListener,b_),o.addEventListener("blur",this._rootNodeFocusAndBlurListener,b_)}),this._rootNodeFocusListenerCount.set(o,a+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(pn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){let o=e.rootNode;if(this._rootNodeFocusListenerCount.has(o)){let a=this._rootNodeFocusListenerCount.get(o);a>1?this._rootNodeFocusListenerCount.set(o,a-1):(o.removeEventListener("focus",this._rootNodeFocusAndBlurListener,b_),o.removeEventListener("blur",this._rootNodeFocusAndBlurListener,b_),this._rootNodeFocusListenerCount.delete(o))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,o,a){this._setClasses(e,o),this._emitOrigin(a,o),this._lastFocusOrigin=o}_getClosestElementsInfo(e){let o=[];return this._elementInfo.forEach((a,s)=>{(s===e||a.checkChildren&&s.contains(e))&&o.push([s,a])}),o}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:o,mostRecentModality:a}=this._inputModalityDetector;if(a!=="mouse"||!o||o===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let s=e.labels;if(s){for(let _=0;_<s.length;_++)if(s[_].contains(o))return!0}return!1}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var md=function(r){return r[r.NONE=0]="NONE",r[r.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",r[r.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",r}(md||{}),LA="cdk-high-contrast-black-on-white",NA="cdk-high-contrast-white-on-black",jx="cdk-high-contrast-active",qA=(()=>{class r{_platform=Oe(bo);_hasCheckedHighContrastMode;_document=Oe(Ii);_breakpointSubscription;constructor(){this._breakpointSubscription=Oe(OA).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return md.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let o=this._document.defaultView||window,a=o&&o.getComputedStyle?o.getComputedStyle(e):null,s=(a&&a.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return md.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return md.BLACK_ON_WHITE}return md.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(jx,LA,NA),this._hasCheckedHighContrastMode=!0;let o=this.getHighContrastMode();o===md.BLACK_ON_WHITE?e.add(jx,LA):o===md.WHITE_ON_BLACK&&e.add(jx,NA)}}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var qx={},ga=(()=>{class r{_appId=Oe($c);getId(e){return this._appId!=="ng"&&(e+=this._appId),qx.hasOwnProperty(e)||(qx[e]=0),`${e}${qx[e]++}`}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var bN=new Ft("cdk-dir-doc",{providedIn:"root",factory:yN});function yN(){return Oe(Ii)}var vN=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function xN(r){let t=r?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?vN.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Cl=(()=>{class r{value="ltr";change=new ar;constructor(){let e=Oe(bN,{optional:!0});if(e){let o=e.body?e.body.dir:null,a=e.documentElement?e.documentElement.dir:null;this.value=xN(o||a||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var uu=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({})}return r})();var wN=["text"],CN=[[["mat-icon"]],"*"],EN=["mat-icon","*"];function SN(r,t){if(r&1&&Je(0,"mat-pseudo-checkbox",1),r&2){let e=At();yt("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function TN(r,t){if(r&1&&Je(0,"mat-pseudo-checkbox",3),r&2){let e=At();yt("disabled",e.disabled)}}function MN(r,t){if(r&1&&(K(0,"span",4),Se(1),ie()),r&2){let e=At();Be(),$r("(",e.group.label,")")}}var Kr=(()=>{class r{constructor(){Oe(qA)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({imports:[uu,uu]})}return r})(),C_=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(t,e,o,a,s){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=o,this._parentForm=a,this._stateChanges=s}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,o=this.matcher||this._defaultMatcher,a=this.ngControl?this.ngControl.control:null,s=o?.isErrorState(a,e)??!1;s!==t&&(this.errorState=s,this._stateChanges.next())}};var XA=(()=>{class r{isErrorState(e,o){return!!(e&&e.invalid&&(e.touched||o&&o.submitted))}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),E_=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["structural-styles"]],decls:0,vars:0,template:function(o,a){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return r})();var Ns=function(r){return r[r.FADING_IN=0]="FADING_IN",r[r.VISIBLE=1]="VISIBLE",r[r.FADING_OUT=2]="FADING_OUT",r[r.HIDDEN=3]="HIDDEN",r}(Ns||{}),Yx=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Ns.HIDDEN;constructor(t,e,o,a=!1){this._renderer=t,this.element=e,this.config=o,this._animationForciblyDisabledThroughCss=a}fadeOut(){this._renderer.fadeOutRipple(this)}},HA=Zh({passive:!0,capture:!0}),Kx=class{_events=new Map;addHandler(t,e,o,a){let s=this._events.get(e);if(s){let _=s.get(o);_?_.add(a):s.set(o,new Set([a]))}else this._events.set(e,new Map([[o,new Set([a])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,HA)})}removeHandler(t,e,o){let a=this._events.get(t);if(!a)return;let s=a.get(e);s&&(s.delete(o),s.size===0&&a.delete(e),a.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,HA)))}_delegateEventHandler=t=>{let e=ma(t);e&&this._events.get(t.type)?.forEach((o,a)=>{(a===e||a.contains(e))&&o.forEach(s=>s.handleEvent(t))})}},$A={enterDuration:225,exitDuration:150},IN=800,GA=Zh({passive:!0,capture:!0}),WA=["mousedown","touchstart"],ZA=["mouseup","mouseleave","touchend","touchcancel"],AN=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(o,a){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return r})(),Qx=class r{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new Kx;constructor(t,e,o,a,s){this._target=t,this._ngZone=e,this._platform=a,a.isBrowser&&(this._containerElement=oc(o)),s&&s.get(rc).load(AN)}fadeInRipple(t,e,o={}){let a=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=ft(ft({},$A),o.animation);o.centered&&(t=a.left+a.width/2,e=a.top+a.height/2);let _=o.radius||kN(t,e,a),w=t-a.left,E=e-a.top,M=s.enterDuration,I=document.createElement("div");I.classList.add("mat-ripple-element"),I.style.left=`${w-_}px`,I.style.top=`${E-_}px`,I.style.height=`${_*2}px`,I.style.width=`${_*2}px`,o.color!=null&&(I.style.backgroundColor=o.color),I.style.transitionDuration=`${M}ms`,this._containerElement.appendChild(I);let A=window.getComputedStyle(I),R=A.transitionProperty,$=A.transitionDuration,W=R==="none"||$==="0s"||$==="0s, 0s"||a.width===0&&a.height===0,G=new Yx(this,I,o,W);I.style.transform="scale3d(1, 1, 1)",G.state=Ns.FADING_IN,o.persistent||(this._mostRecentTransientRipple=G);let pe=null;return!W&&(M||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let le=()=>{pe&&(pe.fallbackTimer=null),clearTimeout(re),this._finishRippleTransition(G)},ne=()=>this._destroyRipple(G),re=setTimeout(ne,M+100);I.addEventListener("transitionend",le),I.addEventListener("transitioncancel",ne),pe={onTransitionEnd:le,onTransitionCancel:ne,fallbackTimer:re}}),this._activeRipples.set(G,pe),(W||!M)&&this._finishRippleTransition(G),G}fadeOutRipple(t){if(t.state===Ns.FADING_OUT||t.state===Ns.HIDDEN)return;let e=t.element,o=ft(ft({},$A),t.config.animation);e.style.transitionDuration=`${o.exitDuration}ms`,e.style.opacity="0",t.state=Ns.FADING_OUT,(t._animationForciblyDisabledThroughCss||!o.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=oc(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,WA.forEach(o=>{r._eventManager.addHandler(this._ngZone,o,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{ZA.forEach(e=>{this._triggerElement.addEventListener(e,this,GA)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Ns.FADING_IN?this._startFadeOutTransition(t):t.state===Ns.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:o}=t.config;t.state=Ns.VISIBLE,!o&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Ns.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=Zx(t),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+IN;!this._target.rippleDisabled&&!e&&!o&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Xx(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let o=0;o<e.length;o++)this.fadeInRipple(e[o].clientX,e[o].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===Ns.VISIBLE||t.config.terminateOnPointerUp&&t.state===Ns.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(WA.forEach(e=>r._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(ZA.forEach(e=>t.removeEventListener(e,this,GA)),this._pointerUpEventsRegistered=!1))}};function kN(r,t,e){let o=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),a=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(o*o+a*a)}var YA=new Ft("mat-ripple-global-options"),S_=(()=>{class r{_elementRef=Oe(cr);_animationMode=Oe(Io,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let e=Oe(Xi),o=Oe(bo),a=Oe(YA,{optional:!0}),s=Oe(In);this._globalOptions=a||{},this._rippleRenderer=new Qx(this,e,this._elementRef,o,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ft(ft(ft({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,o=0,a){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,o,ft(ft({},this.rippleConfig),a)):this._rippleRenderer.fadeInRipple(0,0,ft(ft({},this.rippleConfig),e))}static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(o,a){o&2&&lr("mat-ripple-unbounded",a.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return r})(),Cm=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({imports:[Kr,Kr]})}return r})(),ew=(()=>{class r{_animationMode=Oe(Io,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(o,a){o&2&&lr("mat-pseudo-checkbox-indeterminate",a.state==="indeterminate")("mat-pseudo-checkbox-checked",a.state==="checked")("mat-pseudo-checkbox-disabled",a.disabled)("mat-pseudo-checkbox-minimal",a.appearance==="minimal")("mat-pseudo-checkbox-full",a.appearance==="full")("_mat-animation-noopable",a._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(o,a){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return r})(),PN=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({imports:[Kr]})}return r})(),tw=new Ft("MAT_OPTION_PARENT_COMPONENT"),iw=new Ft("MatOptgroup");var Jx=class{source;isUserInput;constructor(t,e=!1){this.source=t,this.isUserInput=e}},T_=(()=>{class r{_element=Oe(cr);_changeDetectorRef=Oe(Go);_parent=Oe(tw,{optional:!0});group=Oe(iw,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=Oe(ga).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new ar;_text;_stateChanges=new Mi;constructor(){Oe(rc).load(E_),Oe(rc).load(AA),this._signalDisableRipple=!!this._parent&&df(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,o){let a=this._getHostElement();typeof a.focus=="function"&&a.focus(o)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!nc(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new Jx(this,e))}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["mat-option"]],viewQuery:function(o,a){if(o&1&&Hr(wN,7),o&2){let s;nr(s=or())&&(a._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(o,a){o&1&&Qt("click",function(){return a._selectViaInteraction()})("keydown",function(_){return a._handleKeydown(_)}),o&2&&(Rg("id",a.id),Vr("aria-selected",a.selected)("aria-disabled",a.disabled.toString()),lr("mdc-list-item--selected",a.selected)("mat-mdc-option-multiple",a.multiple)("mat-mdc-option-active",a.active)("mdc-list-item--disabled",a.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",er]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],features:[Xn],ngContentSelectors:EN,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(o,a){o&1&&(Ao(CN),Ot(0,SN,1,2,"mat-pseudo-checkbox",1),Mr(1),K(2,"span",2,0),Mr(4,1),ie(),Ot(5,TN,1,1,"mat-pseudo-checkbox",3)(6,MN,2,1,"span",4),Je(7,"div",5)),o&2&&(qr(a.multiple?0:-1),Be(5),qr(!a.multiple&&a.selected&&!a.hideSingleSelectionIndicator?5:-1),Be(),qr(a.group&&a.group._inert?6:-1),Be(),yt("matRippleTrigger",a._getHostElement())("matRippleDisabled",a.disabled||a.disableRipple))},dependencies:[ew,S_],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return r})();function KA(r,t,e){if(e.length){let o=t.toArray(),a=e.toArray(),s=0;for(let _=0;_<r+1;_++)o[_].group&&o[_].group===a[s]&&s++;return s}return 0}function QA(r,t,e,o){return r<e?r:r+t>e+o?Math.max(0,r-o+t):e}var rw=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({imports:[Cm,Kr,PN]})}return r})();var RN=["*"],M_;function ON(){if(M_===void 0&&(M_=null,typeof window<"u")){let r=window;r.trustedTypes!==void 0&&(M_=r.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return M_}function Em(r){return ON()?.createHTML(r)||r}function JA(r){return Error(`Unable to find icon with the name "${r}"`)}function LN(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function ek(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function tk(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}var sc=class{url;svgText;options;svgElement;constructor(t,e,o){this.url=t,this.svgText=e,this.options=o}},NN=(()=>{class r{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,o,a,s){this._httpClient=e,this._sanitizer=o,this._errorHandler=s,this._document=a}addSvgIcon(e,o,a){return this.addSvgIconInNamespace("",e,o,a)}addSvgIconLiteral(e,o,a){return this.addSvgIconLiteralInNamespace("",e,o,a)}addSvgIconInNamespace(e,o,a,s){return this._addSvgIconConfig(e,o,new sc(a,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,o,a,s){let _=this._sanitizer.sanitize(Is.HTML,a);if(!_)throw tk(a);let w=Em(_);return this._addSvgIconConfig(e,o,new sc("",w,s))}addSvgIconSet(e,o){return this.addSvgIconSetInNamespace("",e,o)}addSvgIconSetLiteral(e,o){return this.addSvgIconSetLiteralInNamespace("",e,o)}addSvgIconSetInNamespace(e,o,a){return this._addSvgIconSetConfig(e,new sc(o,null,a))}addSvgIconSetLiteralInNamespace(e,o,a){let s=this._sanitizer.sanitize(Is.HTML,o);if(!s)throw tk(o);let _=Em(s);return this._addSvgIconSetConfig(e,new sc("",_,a))}registerFontClassAlias(e,o=e){return this._fontCssClassesByAlias.set(e,o),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let o=this._sanitizer.sanitize(Is.RESOURCE_URL,e);if(!o)throw ek(e);let a=this._cachedIconsByUrl.get(o);return a?ti(I_(a)):this._loadSvgIconFromConfig(new sc(e,null)).pipe(Br(s=>this._cachedIconsByUrl.set(o,s)),gi(s=>I_(s)))}getNamedSvgIcon(e,o=""){let a=ik(o,e),s=this._svgIconConfigs.get(a);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(o,e),s)return this._svgIconConfigs.set(a,s),this._getSvgFromConfig(s);let _=this._iconSetConfigs.get(o);return _?this._getSvgFromIconSetConfigs(e,_):Gu(JA(a))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ti(I_(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(gi(o=>I_(o)))}_getSvgFromIconSetConfigs(e,o){let a=this._extractIconWithNameFromAnySet(e,o);if(a)return ti(a);let s=o.filter(_=>!_.svgText).map(_=>this._loadSvgIconSetFromConfig(_).pipe(jc(w=>{let M=`Loading icon set URL: ${this._sanitizer.sanitize(Is.RESOURCE_URL,_.url)} failed: ${w.message}`;return this._errorHandler.handleError(new Error(M)),ti(null)})));return xg(s).pipe(gi(()=>{let _=this._extractIconWithNameFromAnySet(e,o);if(!_)throw JA(e);return _}))}_extractIconWithNameFromAnySet(e,o){for(let a=o.length-1;a>=0;a--){let s=o[a];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){let _=this._svgElementFromConfig(s),w=this._extractSvgIconFromSet(_,e,s.options);if(w)return w}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Br(o=>e.svgText=o),gi(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ti(null):this._fetchIcon(e).pipe(Br(o=>e.svgText=o))}_extractSvgIconFromSet(e,o,a){let s=e.querySelector(`[id="${o}"]`);if(!s)return null;let _=s.cloneNode(!0);if(_.removeAttribute("id"),_.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(_,a);if(_.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(_),a);let w=this._svgElementFromString(Em("<svg></svg>"));return w.appendChild(_),this._setSvgAttributes(w,a)}_svgElementFromString(e){let o=this._document.createElement("DIV");o.innerHTML=e;let a=o.querySelector("svg");if(!a)throw Error("<svg> tag not found");return a}_toSvgElement(e){let o=this._svgElementFromString(Em("<svg></svg>")),a=e.attributes;for(let s=0;s<a.length;s++){let{name:_,value:w}=a[s];_!=="id"&&o.setAttribute(_,w)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&o.appendChild(e.childNodes[s].cloneNode(!0));return o}_setSvgAttributes(e,o){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),o&&o.viewBox&&e.setAttribute("viewBox",o.viewBox),e}_fetchIcon(e){let{url:o,options:a}=e,s=a?.withCredentials??!1;if(!this._httpClient)throw LN();if(o==null)throw Error(`Cannot fetch icon from URL "${o}".`);let _=this._sanitizer.sanitize(Is.RESOURCE_URL,o);if(!_)throw ek(o);let w=this._inProgressUrlFetches.get(_);if(w)return w;let E=this._httpClient.get(_,{responseType:"text",withCredentials:s}).pipe(gi(M=>Em(M)),Gl(()=>this._inProgressUrlFetches.delete(_)),$C());return this._inProgressUrlFetches.set(_,E),E}_addSvgIconConfig(e,o,a){return this._svgIconConfigs.set(ik(e,o),a),this}_addSvgIconSetConfig(e,o){let a=this._iconSetConfigs.get(e);return a?a.push(o):this._iconSetConfigs.set(e,[o]),this}_svgElementFromConfig(e){if(!e.svgElement){let o=this._svgElementFromString(e.svgText);this._setSvgAttributes(o,e.options),e.svgElement=o}return e.svgElement}_getIconConfigFromResolvers(e,o){for(let a=0;a<this._resolvers.length;a++){let s=this._resolvers[a](o,e);if(s)return FN(s)?new sc(s.url,null,s.options):new sc(s,null)}}static \u0275fac=function(o){return new(o||r)(li($a,8),li(nv),li(Ii,8),li(Xu))};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function I_(r){return r.cloneNode(!0)}function ik(r,t){return r+":"+t}function FN(r){return!!(r.url&&r.options)}var zN=new Ft("MAT_ICON_DEFAULT_OPTIONS"),BN=new Ft("mat-icon-location",{providedIn:"root",factory:VN});function VN(){let r=Oe(Ii),t=r?r.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var rk=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],UN=rk.map(r=>`[${r}]`).join(", "),jN=/^url\(['"]?#(.*?)['"]?\)$/,du=(()=>{class r{_elementRef=Oe(cr);_iconRegistry=Oe(NN);_location=Oe(BN);_errorHandler=Oe(Xu);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let o=this._cleanupFontValue(e);o!==this._fontSet&&(this._fontSet=o,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let o=this._cleanupFontValue(e);o!==this._fontIcon&&(this._fontIcon=o,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Mo.EMPTY;constructor(){let e=Oe(new Zu("aria-hidden"),{optional:!0}),o=Oe(zN,{optional:!0});o&&(o.color&&(this.color=this._defaultColor=o.color),o.fontSet&&(this.fontSet=o.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let o=e.split(":");switch(o.length){case 1:return["",o[0]];case 2:return o;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let o=this._location.getPathname();o!==this._previousPath&&(this._previousPath=o,this._prependPathToReferences(o))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let o=this._location.getPathname();this._previousPath=o,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(o),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,o=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();o--;){let a=e.childNodes[o];(a.nodeType!==1||a.nodeName.toLowerCase()==="svg")&&a.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,o=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(a=>a.length>0);this._previousFontSetClass.forEach(a=>e.classList.remove(a)),o.forEach(a=>e.classList.add(a)),this._previousFontSetClass=o,this.fontIcon!==this._previousFontIconClass&&!o.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let o=this._elementsWithExternalReferences;o&&o.forEach((a,s)=>{a.forEach(_=>{s.setAttribute(_.name,`url('${e}#${_.value}')`)})})}_cacheChildrenWithExternalReferences(e){let o=e.querySelectorAll(UN),a=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<o.length;s++)rk.forEach(_=>{let w=o[s],E=w.getAttribute(_),M=E?E.match(jN):null;if(M){let I=a.get(w);I||(I=[],a.set(w,I)),I.push({name:_,value:M[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[o,a]=this._splitIconName(e);o&&(this._svgNamespace=o),a&&(this._svgName=a),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(a,o).pipe(Ms(1)).subscribe(s=>this._setSvgElement(s),s=>{let _=`Error retrieving icon ${o}:${a}! ${s.message}`;this._errorHandler.handleError(new Error(_))})}}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(o,a){o&2&&(Vr("data-mat-icon-type",a._usingFontIcon()?"font":"svg")("data-mat-icon-name",a._svgName||a.fontIcon)("data-mat-icon-namespace",a._svgNamespace||a.fontSet)("fontIcon",a._usingFontIcon()?a.fontIcon:null),hf(a.color?"mat-"+a.color:""),lr("mat-icon-inline",a.inline)("mat-icon-no-color",a.color!=="primary"&&a.color!=="accent"&&a.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",er],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Xn],ngContentSelectors:RN,decls:1,vars:0,template:function(o,a){o&1&&(Ao(),Mr(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return r})(),hu=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({imports:[Kr,Kr]})}return r})();function qN(r,t){if(r&1&&(K(0,"mat-icon"),Se(1),ie()),r&2){let e=At().$implicit,o=At();Be(),Ci(o.isAbierto(e)?"expand_less":"expand_more")}}function HN(r,t){if(r&1&&(K(0,"mat-icon"),Se(1),ie()),r&2){let e=At().$implicit,o=At(3);Be(),Ci(o.isAbierto(e)?"expand_less":"expand_more")}}function $N(r,t){if(r&1){let e=Tr();K(0,"li")(1,"a",9),Qt("click",function(){let a=Ri(e).$implicit,s=At(5);return Oi(s.navegar(a.ruta))}),K(2,"mat-icon"),Se(3),ie(),K(4,"span"),Se(5),ie()()()}if(r&2){let e=t.$implicit;Be(3),Ci(e.icono),Be(2),Ci(e.texto)}}function GN(r,t){if(r&1&&(K(0,"ul",8),Ot(1,$N,6,2,"li",4),ie()),r&2){let e=At().$implicit;Be(),yt("ngForOf",e.hijos)}}function WN(r,t){if(r&1){let e=Tr();Fy(0),K(1,"li")(2,"a",5),Qt("click",function(){let a=Ri(e).$implicit,s=At(3);return Oi(a.hijos?s.toggle(a):s.navegar(a.ruta))}),K(3,"mat-icon"),Se(4),ie(),K(5,"span"),Se(6),ie(),Ot(7,HN,2,1,"mat-icon",6),ie(),Ot(8,GN,2,1,"ul",7),ie(),zy()}if(r&2){let e=t.$implicit,o=At(3);Be(4),Ci(e.icono),Be(2),Ci(e.texto),Be(),yt("ngIf",e.hijos),Be(),yt("ngIf",e.hijos&&o.isAbierto(e))}}function ZN(r,t){if(r&1&&(K(0,"ul",8),Ot(1,WN,9,4,"ng-container",4),ie()),r&2){let e=At().$implicit;Be(),yt("ngForOf",e.hijos)}}function XN(r,t){if(r&1){let e=Tr();Fy(0),K(1,"li")(2,"a",5),Qt("click",function(){let a=Ri(e).$implicit,s=At();return Oi(a.hijos?s.toggle(a):s.navegar(a.ruta))}),K(3,"mat-icon"),Se(4),ie(),K(5,"span"),Se(6),ie(),Ot(7,qN,2,1,"mat-icon",6),ie(),Ot(8,ZN,2,1,"ul",7),ie(),zy()}if(r&2){let e=t.$implicit,o=At();Be(4),Ci(e.icono),Be(2),Ci(e.texto),Be(),yt("ngIf",e.hijos),Be(),yt("ngIf",e.hijos&&o.isAbierto(e))}}var Kh=class r{constructor(t){this.router=t}menu=[{icono:"eco",texto:"Ambiente",hijos:[{icono:"recycling",texto:"Gesti\xF3n de Recursos",ruta:"/ambiente/recursos"},{icono:"cloud",texto:"Calidad Ambiental",hijos:[{icono:"dashboard",texto:"Tablero de Control Sensores Ruido",ruta:"/ambiente/calidad/ruido/dashboard"},{icono:"map",texto:"Mapa Sensores Ruido",ruta:"/ambiente/calidad/ruido/mapa"},{icono:"dashboard_customize",texto:"Tablero de Control SIATA",ruta:"/ambiente/calidad/siata/dashboard"},{icono:"map",texto:"Mapa SIATA",ruta:"/ambiente/calidad/siata/mapa"}]},{icono:"warning",texto:"Gesti\xF3n del Riesgo",ruta:"/ambiente/riesgo"},{icono:"delete",texto:"Gesti\xF3n de Residuos",hijos:[{icono:"dashboard",texto:"Tablero de Control Camiones EMVARIAS",ruta:"/ambiente/residuos/camiones/dashboard"},{icono:"map",texto:"Mapa Camiones EMVARIAS",ruta:"/ambiente/residuos/camiones/mapa"}]},{icono:"public",texto:"Cambio Clim\xE1tico",ruta:"/ambiente/cambioclimatico"}]},{icono:"home_work",texto:"H\xE1bitat",hijos:[{icono:"domain",texto:"Infraestructura",ruta:"/habitat/infraestructura"},{icono:"commute",texto:"Movilidad Inteligente",hijos:[{icono:"dashboard",texto:"Tablero de Control Movilidad",ruta:"/habitat/movilidad/dashboard"},{icono:"map",texto:"Mapa Movilidad",ruta:"/habitat/movilidad/mapa"},{icono:"dashboard_customize",texto:"Tablero de Control VamosMED",ruta:"/habitat/movilidad/vamosmed/dashboard"},{icono:"map",texto:"Mapa VamosMED",ruta:"/habitat/movilidad/vamosmed/mapa"}]},{icono:"build",texto:"Servicios P\xFAblicos",ruta:"/habitat/servicios-publicos"}]},{icono:"trending_up",texto:"Desarrollo Econ\xF3mico",hijos:[{icono:"lightbulb",texto:"Emprendimiento e Innovaci\xF3n",ruta:"/economico/emprendimiento"},{icono:"school",texto:"Econom\xEDa del conocimiento",ruta:"/economico/conocimiento"},{icono:"business",texto:"Entorno Productivo y Competitivo",ruta:"/economico/entorno"},{icono:"engineering",texto:"Empleo",ruta:"/economico/empleo"},{icono:"wifi",texto:"Transformaci\xF3n Digital",hijos:[{icono:"dashboard",texto:"Tablero de Control Puntos WiFi",ruta:"/economico/digital/wifi/dashboard"},{icono:"map",texto:"Mapa Puntos WiFi",ruta:"/economico/digital/wifi/mapa"}]},{icono:"recycle",texto:"Econom\xEDa Circular",ruta:"/economico/circular"},{icono:"agriculture",texto:"Agricultura",ruta:"/economico/agricultura"}]},{icono:"groups",texto:"Ciudadan\xEDa",hijos:[{icono:"school",texto:"Educaci\xF3n",ruta:"/ciudadania/educacion"},{icono:"diversity_1",texto:"Equidad",ruta:"/ciudadania/equidad"},{icono:"accessible",texto:"Sociedad Incluyente",ruta:"/ciudadania/incluyente"},{icono:"emoji_people",texto:"Cultura Ciudadana",ruta:"/ciudadania/cultura"},{icono:"diversity_3",texto:"Cohesi\xF3n social",ruta:"/ciudadania/cohesion"}]},{icono:"health_and_safety",texto:"Calidad de Vida",hijos:[{icono:"sentiment_satisfied",texto:"Bienestar",ruta:"/calidad/bienestar"},{icono:"security",texto:"Seguridad",ruta:"/calidad/seguridad"},{icono:"healing",texto:"Salud",ruta:"/calidad/salud"},{icono:"map",texto:"Ocio y Turismo",hijos:[{icono:"dashboard",texto:"Tablero de Control Turismo",ruta:"/calidad/turismo/dashboard"},{icono:"map",texto:"Mapa Turismo",ruta:"/calidad/turismo/mapa"}]}]},{icono:"gavel",texto:"Gobernanza",hijos:[{icono:"how_to_vote",texto:"Participaci\xF3n Ciudadana",hijos:[{icono:"dashboard",texto:"Tablero de Control ReportesMED",ruta:"/gobernanza/participacion/reportesmed/dashboard"},{icono:"map",texto:"Mapa Reportes MED",ruta:"/gobernanza/participacion/reportesmed/mapa"},{icono:"dashboard_customize",texto:"Tablero de Control PQRS",ruta:"/gobernanza/participacion/pqrs/dashboard"},{icono:"map",texto:"Mapa PQRS",ruta:"/gobernanza/participacion/pqrs/mapa"}]},{icono:"account_balance",texto:"Gobernanza",ruta:"/gobernanza/gobernanza"},{icono:"public",texto:"Colaboraci\xF3n entre Ciudades y Territorios",ruta:"/gobernanza/colaboracion"},{icono:"computer",texto:"Gobierno Digital",ruta:"/gobernanza/digital"}]}];nivelesAbiertos={};navegar(t){t&&this.router.navigateByUrl(t)}toggle(t){let e=t.texto;this.nivelesAbiertos[e]=!this.nivelesAbiertos[e]}isAbierto(t){return this.nivelesAbiertos[t.texto]}static \u0275fac=function(e){return new(e||r)(wi(Po))};static \u0275cmp=Vt({type:r,selectors:[["app-menu-opciones"]],decls:5,vars:1,consts:[[1,"menu-container"],["src","https://i.ibb.co/Ksh0J2w/alcaldia-Medellin.png","alt","Logo Alcald\xEDa de Medell\xEDn",1,"menu-logo"],["src","https://www.fiware.org/custom/brand-guide/img/logo/fiware/primary/png/logo-fiware-blue.png?","alt","Logo FIWARE",1,"menu-logon"],[1,"menu-list"],[4,"ngFor","ngForOf"],[1,"menu-item","submenu-toggle",3,"click"],[4,"ngIf"],["class","submenu",4,"ngIf"],[1,"submenu"],[1,"menu-item",3,"click"]],template:function(e,o){e&1&&(K(0,"div",0),Je(1,"img",1)(2,"img",2),K(3,"ul",3),Ot(4,XN,9,4,"ng-container",4),ie()()),e&2&&(Be(4),yt("ngForOf",o.menu))},dependencies:[Wo,Xc,vl,hu,du],styles:['@charset "UTF-8";.menu-container[_ngcontent-%COMP%]{position:fixed;top:0;left:-20px;width:260px;height:100vh;background:linear-gradient(145deg,#fffc,#f0f0f099);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);padding:20px;box-shadow:4px 0 20px #0006,inset -4px 0 15px #ffffff4d;border-right:1px solid rgba(255,255,255,.25);overflow-y:auto;z-index:1000;transition:transform .3s ease-in-out}.menu-logon[_ngcontent-%COMP%]{display:block;max-width:120px;height:auto;margin:0 auto 10px;border-radius:15px;box-shadow:0 4px 10px #0003,inset 0 2px 6px #fff6;transition:transform .3s ease,box-shadow .4s ease,filter .4s ease}.menu-logo[_ngcontent-%COMP%]{display:block;max-width:103%;margin:0 auto 20px;background-color:#fff;transition:transform .3s ease,box-shadow .4s ease,filter .4s ease}.menu-list[_ngcontent-%COMP%], .submenu[_ngcontent-%COMP%]{list-style-type:none}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none;color:#000;background:linear-gradient(145deg,#fffc,#e6e6e699);border:1px solid rgba(200,200,200,.4);border-radius:16px;padding:10px 18px;margin-bottom:10px;margin-left:-8px;box-shadow:0 8px 15px #0000004d,inset 0 3px 6px #fff6;transition:all .3s ease-in-out;transform:perspective(500px) rotateY(0)}.menu-item[_ngcontent-%COMP%]:hover{background:linear-gradient(145deg,#ffffffe6,#e6e6e6cc);transform:translateY(-5px) scale(1.08) rotateY(10deg);box-shadow:0 10px 20px #0006,inset 0 4px 10px #ffffff80;filter:brightness(1.1)}mat-icon[_ngcontent-%COMP%]{margin-right:15px;font-size:24px;color:#333;text-shadow:1px 1px 5px rgba(0,0,0,.3),0 0 10px rgba(0,255,255,.8);transition:color .3s ease,transform .3s ease,text-shadow .4s ease}.menu-item[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#000;transform:scale(1.3);text-shadow:0 0 15px rgba(0,255,255,.8),0 0 25px rgba(0,255,255,.6),0 0 30px rgba(0,255,255,.5)}']})};var k_=class r{constructor(t){this.router=t}irAPerfil(){this.router.navigate(["perfil/usuarios"])}static \u0275fac=function(e){return new(e||r)(wi(Po))};static \u0275cmp=Vt({type:r,selectors:[["app-header"]],decls:14,vars:0,consts:[[1,"header"],[1,"header-container"],[1,"logo"],["src","https://www.fiware.org/custom/brand-guide/img/logo/fiware/primary/jpg/logo-fiware.jpg?","alt","Logo Alcald\xEDa de Medell\xEDn",1,"menu-logo",2,"background-color","rgb(250, 250, 250)"],[1,"user-info"],[1,"profile-dropdown"],[1,"profile-button"],[1,"profile-icon"],[1,"dropdown-menu"],[3,"click"],["href","#"]],template:function(e,o){e&1&&(K(0,"header",0)(1,"div",1)(2,"div",2),Je(3,"img",3),ie(),K(4,"div",4)(5,"div",5)(6,"button",6)(7,"mat-icon",7),Se(8,"account_circle"),ie()(),K(9,"div",8)(10,"a",9),Qt("click",function(){return o.irAPerfil()}),Se(11,"Perfil"),ie(),K(12,"a",10),Se(13,"Cerrar sesi\xF3n"),ie()()()()()())},dependencies:[tu,hu,du],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{margin:0;font-family:Arial,sans-serif;background-color:#f8f9fa}.menu-logo[_ngcontent-%COMP%]{display:block;max-width:120px;height:auto;margin:0 auto 10px;transition:transform .3s ease,box-shadow .4s ease,filter .4s ease}.header[_ngcontent-%COMP%]{background:#fff;width:calc(100% - 390px);max-width:none;height:75px;padding:12px 25px;display:flex;justify-content:space-between;align-items:center;color:#333;border-radius:18px;box-shadow:0 4px 12px #0003;margin-left:330px;margin-top:20px;position:relative;z-index:1000;opacity:0;transform:translateY(-15px);animation:_ngcontent-%COMP%_fadeIn .4s ease-out forwards}.main[_ngcontent-%COMP%]{margin-top:120px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.header[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 20px #0000004d}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;align-items:center}.logo[_ngcontent-%COMP%]{font-size:26px;font-weight:700;color:#5d4037}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.profile-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.profile-button[_ngcontent-%COMP%]{background:none;border:none;color:#5d4037;font-size:16px;display:flex;align-items:center;cursor:pointer;transition:transform .2s ease-in-out}.profile-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.profile-icon[_ngcontent-%COMP%]{font-size:40px;transition:color .3s ease}.profile-button[_ngcontent-%COMP%]:hover   .profile-icon[_ngcontent-%COMP%]{color:#4a90e2}.dropdown-menu[_ngcontent-%COMP%]{display:none;position:absolute;right:0;background:#fff;box-shadow:0 5px 15px #00000026;border-radius:10px;overflow:hidden;min-width:160px;opacity:0;transform:translateY(10px);transition:all .3s ease-in-out}.profile-dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block;opacity:1;transform:translateY(0)}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:12px;color:#333;text-decoration:none;font-weight:500;transition:background .3s ease}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#f0f0f0}']})};var P_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-layout"]],decls:3,vars:0,template:function(e,o){e&1&&Je(0,"app-header")(1,"app-menu-opciones")(2,"router-outlet")},dependencies:[Wo,Kh,k_,tu,Zf],encapsulation:2})};var D_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-inicio"]],decls:12,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/inicio/home?orgId=1&from=1733868035919&to=1734472835919&viewPanel=73&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/inicio/home?orgId=1&from=1733890467754&to=1734495267754&viewPanel=74&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/inicio/home?orgId=1&from=1733891497815&to=1734496297815&viewPanel=75&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/inicio/home?orgId=1&from=1733891690672&to=1734496490672&viewPanel=76&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/inicio/home?orgId=1&from=1733891734324&to=1734496534324&viewPanel=79&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/inicio/home?orgId=1&from=1733892371283&to=1734497171283&viewPanel=80&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Inicio"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4),ie(),K(6,"div",2),Je(7,"iframe",5)(8,"iframe",6),ie(),K(9,"div",2),Je(10,"iframe",7)(11,"iframe",8),ie()())},styles:[".iframe-container[_ngcontent-%COMP%]{width:75%;height:50%;display:flex;margin-left:25%;justify-content:right}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border:none;width:60%;height:800px}","body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column;font-family:Arial,sans-serif;background-color:#f4f4f4}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}iframe[_ngcontent-%COMP%]{flex:1;height:300px;border:none;border-radius:8px;box-shadow:0 4px 12px #0000001a}iframe[_ngcontent-%COMP%]:hover{transform:scale(1.02)}"]})};var R_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-camiones"]],decls:11,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/em_ta/emvarias?orgId=1&from=1734455124927&to=1734498324927&viewPanel=16&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/em_ta/emvarias?orgId=1&from=1740352844880&to=1740396044880&viewPanel=10&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/em_ta/emvarias?orgId=1&from=1740352870706&to=1740396070706&viewPanel=13&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/em_ta/emvarias?orgId=1&from=1740352901739&to=1740396101739&viewPanel=9&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Camiones"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3),ie(),K(5,"div",2),Je(6,"iframe",4),ie(),K(7,"div",2),Je(8,"iframe",5),ie(),K(9,"div",2),Je(10,"iframe",6),ie()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}iframe[_ngcontent-%COMP%]{flex:1;height:400px;border:none}"]})};var O_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-sensores-ruido"]],decls:5,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/ce9a9bd3-6b1e-48bc-8fab-cc6a042f6f5b/ambience-dashboard?orgId=1&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Sensores de Ruido"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3),ie()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin-left:300px;margin-bottom:20px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px}.iframe-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:920px;border:none}"]})};var L_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-medicos"]],decls:10,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row","small-iframes"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/rm_ta/reportesmed?orgId=1&from=1734607826803&to=1735212626803&viewPanel=2&kiosk`],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/rm_ta/reportesmed?orgId=1&from=1734613212216&to=1735218012216&viewPanel=3&kiosk`],[1,"iframe-row","large-iframe"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/rm_ta/reportesmed?orgId=1&from=1734613644066&to=1735218444067&viewPanel=56&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/rm_ta/reportesmed?orgId=1&from=1734613814858&to=1735218614858&viewPanel=57&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Reportes M\xE9dicos"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4),ie(),K(6,"div",5),Je(7,"iframe",6),ie(),K(8,"div",5),Je(9,"iframe",7),ie()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-row[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.small-iframes[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;max-width:48%}.large-iframe[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:500px;max-width:80%}@media (max-width: 1200px){.small-iframes[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], .large-iframe[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{max-width:100%}}"]})};var N_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-medicos"]],decls:12,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732686476511&to=1735278476511&viewPanel=3&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732687115885&to=1735279115885&viewPanel=4&kiosk`,"allowfullscreen",""],[1,"iframe-column"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732711995953&to=1735303995953&viewPanel=33&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732712398666&to=1735304398666&viewPanel=34&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732712155294&to=1735304155295&viewPanel=6&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732712771842&to=1735304771842&viewPanel=8&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pw_ta/puntoswifi?orgId=1&from=1732712873380&to=1735304873380&viewPanel=20&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Puntos Wi-Fi"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4),ie(),K(6,"div",5),Je(7,"iframe",6)(8,"iframe",7)(9,"iframe",8)(10,"iframe",9)(11,"iframe",10),ie()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:space-between}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.iframe-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.iframe-column[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:600px;border:none}"]})};var F_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-medicos"]],decls:9,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/be4206a5-5095-46c2-8ad6-459879f8b397/evolucion-temporal?orgId=1&var-time_interval=week&var-modo_transporte=%27EnBici%27&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/c4aa4e46-0aeb-4e56-b272-bd96329b9f92/impacto-ambiental?orgId=1&kiosk`,"allowfullscreen",""],[1,"iframe-column"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/d57d13d8-5b6d-48e4-88fc-12d9d874e8dc/travels-kilometers?orgId=1&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/ba00627d-90a1-485c-a088-16a037d56c33/calories?orgId=1&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Vamos Medell\xEDn"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4),ie(),K(6,"div",5),Je(7,"iframe",6)(8,"iframe",7),ie()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:space-between}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:500px;border:none}.iframe-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.iframe-column[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:500px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var z_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-pqrsd"]],decls:25,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739793439047&to=1740398239047&viewPanel=55&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739793492783&to=1740398292783&viewPanel=56&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739793532582&to=1740398332582&viewPanel=57&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739793599303&to=1740398399303&viewPanel=75&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739793702223&to=1740398502223&viewPanel=76&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739793898080&to=1740398698081&viewPanel=67&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739794045244&to=1740398845245&viewPanel=69&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739794083995&to=1740398883995&viewPanel=64&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739794190362&to=1740398990362&viewPanel=72&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739794256564&to=1740399056565&viewPanel=65&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/pq_ta/pqrsd?orgId=1&from=1739794325102&to=1740399125102&viewPanel=68&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Ciudad Inteligente - PQRSD"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),ie(),K(7,"div",2),Je(8,"iframe",6),ie(),K(9,"div",2),Je(10,"iframe",7),ie(),K(11,"div",2),Je(12,"iframe",7),ie(),K(13,"div",2),Je(14,"iframe",8),ie(),K(15,"div",2),Je(16,"iframe",9),ie(),K(17,"div",2),Je(18,"iframe",10),ie(),K(19,"div",2),Je(20,"iframe",11),ie(),K(21,"div",2),Je(22,"iframe",12),ie(),K(23,"div",2),Je(24,"iframe",13),ie()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:space-between}.iframe-row[_ngcontent-%COMP%]:first-child   iframe[_ngcontent-%COMP%]{flex:1}iframe[_ngcontent-%COMP%]{width:100%;height:400px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var B_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-camiones"]],decls:7,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/wa_ta/whatsapp?orgId=1&from=1739548898783&to=1740153698783&viewPanel=5&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/wa_ta/whatsapp?orgId=1&from=1739548919606&to=1740153719607&viewPanel=8&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/wa_ta/whatsapp?orgId=1&from=1739542345631&to=1740147145631&viewPanel=6&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"WhatsApp"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),ie()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}iframe[_ngcontent-%COMP%]{flex:1;height:400px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var V_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-camiones"]],decls:17,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708535530544&to=1740157930544&theme=light&viewPanel=17&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708535597310&to=1740157997310&theme=light&viewPanel=18&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708535622443&to=1740158022443&viewPanel=19&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708536018076&to=1740158418076&viewPanel=22&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708536115554&to=1740158515554&viewPanel=5&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708536157330&to=1740158557330&viewPanel=13&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/tu_ta/turismo?orgId=1&var-menu=--Seleccionar--&from=1708536248147&to=1740158648147&viewPanel=14&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Turismo"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),ie()(),K(7,"div",1),Je(8,"iframe",6),ie(),K(9,"div",1),Je(10,"iframe",7),ie(),K(11,"div",1),Je(12,"iframe",6),ie(),K(13,"div",1),Je(14,"iframe",8),ie(),K(15,"div",1),Je(16,"iframe",9),ie())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:500px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var U_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-camiones"]],decls:22,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739554343770&to=1740159143771&viewPanel=3&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739554430452&to=1740159230452&viewPanel=4&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739554718561&to=1740159518561&viewPanel=48&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739567093188&to=1740171893188&theme=light&viewPanel=49&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739567465205&to=1740172265205&viewPanel=45&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739567516412&to=1740172316412&viewPanel=34&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739568570628&to=1740173370628&viewPanel=35&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739568941480&to=1740173741480&viewPanel=36&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739653662249&to=1740258462249&viewPanel=37&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ta/siata?orgId=1&from=1739655373761&to=1740260173761&viewPanel=38&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Siata"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4),ie()(),K(6,"div",1),Je(7,"iframe",5),ie(),K(8,"div",1),Je(9,"iframe",6),ie(),K(10,"div",1),Je(11,"iframe",7),ie(),K(12,"div",1),Je(13,"iframe",8),ie(),K(14,"div",1),Je(15,"iframe",9),ie(),K(16,"div",1),Je(17,"iframe",10),ie(),K(18,"div",1),Je(19,"iframe",11),ie(),K(20,"div",1),Je(21,"iframe",12),ie())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:500px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var j_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-camiones"]],decls:10,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/em_ma/emvarias-map?orgId=1&refresh=1m&var-barrios=--Seleccionar--&from=1740169770252&to=1740256170252&viewPanel=10&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/em_ma/emvarias-map?orgId=1&refresh=1m&var-barrios=--Seleccionar--&from=1740169943092&to=1740256343092&viewPanel=11&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/em_ma/emvarias-map?orgId=1&refresh=1m&var-barrios=--Seleccionar--&from=1740174676193&to=1740261076193&viewPanel=1&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/em_ma/emvarias-map?orgId=1&refresh=1m&var-barrios=--Seleccionar--&from=1740170890221&to=1740257290221&viewPanel=16&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Ciudad Inteligente - Camiones EMVARIAS"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4),ie()(),K(6,"div",1),Je(7,"iframe",5),ie(),K(8,"div",1),Je(9,"iframe",6),ie())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}iframe[_ngcontent-%COMP%]{flex:1;height:400px;border:none}"]})};var q_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-camiones"]],decls:11,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/rm_ma/reportesmed-map?orgId=1&var-comunas=--Seleccionar--&from=1739674305894&to=1740279105894&viewPanel=3&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/rm_ma/reportesmed-map?orgId=1&var-comunas=--Seleccionar--&from=1739674463402&to=1740279263402&viewPanel=4&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/rm_ma/reportesmed-map?orgId=1&var-comunas=--Seleccionar--&from=1739674645460&to=1740279445460&viewPanel=9&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/rm_ma/reportesmed-map?orgId=1&var-comunas=--Seleccionar--&from=1739674694900&to=1740279494900&viewPanel=1&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/rm_ma/reportesmed-map?orgId=1&var-comunas=--Seleccionar--&from=1739674790949&to=1740279590950&viewPanel=6&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Ciudad Inteligente - Camiones EMVARIAS"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),ie()(),K(7,"div",1),Je(8,"iframe",6),ie(),K(9,"div",1),Je(10,"iframe",7),ie())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}iframe[_ngcontent-%COMP%]{flex:1;height:400px;border:none}"]})};var YN=["*"];var KN=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],QN=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],JN=new Ft("MAT_CARD_CONFIG"),nk=(()=>{class r{appearance;constructor(){let e=Oe(JN,{optional:!0});this.appearance=e?.appearance||"raised"}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(o,a){o&2&&lr("mat-mdc-card-outlined",a.appearance==="outlined")("mdc-card--outlined",a.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:YN,decls:1,vars:0,template:function(o,a){o&1&&(Ao(),Mr(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return r})(),ok=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return r})();var sk=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return r})(),ak=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return r})();var lk=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:QN,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(o,a){o&1&&(Ao(KN),Mr(0),K(1,"div",0),Mr(2,1),ie(),Mr(3,2))},encapsulation:2,changeDetection:0})}return r})();var ck=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({imports:[Kr,Kr]})}return r})();var Qh=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new Mi;constructor(t=!1,e,o=!0,a){this._multiple=t,this._emitChanges=o,this.compareWith=a,e&&e.length&&(t?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(o=>this._markSelected(o));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(o=>this._unmarkSelected(o));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);let e=this.selected,o=new Set(t);t.forEach(s=>this._markSelected(s)),e.filter(s=>!o.has(this._getConcreteValue(s,o))).forEach(s=>this._unmarkSelected(s));let a=this._hasQueuedChanges();return this._emitChangeEvent(),a}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,e){if(this.compareWith){e=e??this._selection;for(let o of e)if(this.compareWith(t,o))return o;return t}else return t}};var tF=20,uk=(()=>{class r{_ngZone=Oe(Xi);_platform=Oe(bo);_document=Oe(Ii,{optional:!0});constructor(){}_scrolled=new Mi;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let o=this.scrollContainers.get(e);o&&(o.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=tF){return this._platform.isBrowser?new $l(o=>{this._globalSubscription||this._addGlobalListener();let a=e>0?this._scrolled.pipe(Ey(e)).subscribe(o):this._scrolled.subscribe(o);return this._scrolledCount++,()=>{a.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ti()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,o)=>this.deregister(o)),this._scrolled.complete()}ancestorScrolled(e,o){let a=this.getAncestorScrollContainers(e);return this.scrolled(o).pipe(sn(s=>!s||a.indexOf(s)>-1))}getAncestorScrollContainers(e){let o=[];return this.scrollContainers.forEach((a,s)=>{this._scrollableContainsElement(s,e)&&o.push(s)}),o}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,o){let a=oc(o),s=e.getElementRef().nativeElement;do if(a==s)return!0;while(a=a.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return UC(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var iF=20,Sm=(()=>{class r{_platform=Oe(bo);_viewportSize;_change=new Mi;_changeListener=e=>{this._change.next(e)};_document=Oe(Ii,{optional:!0});constructor(){Oe(Xi).runOutsideAngular(()=>{if(this._platform.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:o,height:a}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+a,right:e.left+o,height:a,width:o}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,o=this._getWindow(),a=e.documentElement,s=a.getBoundingClientRect(),_=-s.top||e.body.scrollTop||o.scrollY||a.scrollTop||0,w=-s.left||e.body.scrollLeft||o.scrollX||a.scrollLeft||0;return{top:_,left:w}}change(e=iF){return e>0?this._change.pipe(Ey(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var H_=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({})}return r})(),nw=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({imports:[uu,H_,uu,H_]})}return r})();var Tm=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},ow=class extends Tm{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(t,e,o,a,s){super(),this.component=t,this.viewContainerRef=e,this.injector=o,this.projectableNodes=s}},Mm=class extends Tm{templateRef;viewContainerRef;context;injector;constructor(t,e,o,a){super(),this.templateRef=t,this.viewContainerRef=e,this.context=o,this.injector=a}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},sw=class extends Tm{element;constructor(t){super(),this.element=t instanceof cr?t.nativeElement:t}},aw=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof ow)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Mm)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof sw)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var $_=class extends aw{outletElement;_appRef;_defaultInjector;_document;constructor(t,e,o,a,s){super(),this.outletElement=t,this._appRef=o,this._defaultInjector=a,this._document=s}attachComponentPortal(t){let e;if(t.viewContainerRef){let o=t.injector||t.viewContainerRef.injector,a=o.get(lE,null,{optional:!0})||void 0;e=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:o,ngModuleRef:a,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else e=Lg(t.component,{elementInjector:t.injector||this._defaultInjector||In.NULL,environmentInjector:this._appRef.injector,projectableNodes:t.projectableNodes||void 0}),this._appRef.attachView(e.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(e.hostView),e.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=t,e}attachTemplatePortal(t){let e=t.viewContainerRef,o=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return o.rootNodes.forEach(a=>this.outletElement.appendChild(a)),o.detectChanges(),this.setDisposeFn(()=>{let a=e.indexOf(o);a!==-1&&e.remove(a)}),this._attachedPortal=t,o}attachDomPortal=t=>{let e=t.element;e.parentNode;let o=this._document.createComment("dom-portal");e.parentNode.insertBefore(o,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(e,o)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var dk=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({})}return r})();var hk=Vx(),lw=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,e){this._viewportRuler=t,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=mn(-this._previousScrollPosition.left),t.style.top=mn(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,o=t.style,a=e.style,s=o.scrollBehavior||"",_=a.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),hk&&(o.scrollBehavior=a.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),hk&&(o.scrollBehavior=s,a.scrollBehavior=_)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,o=this._viewportRuler.getViewportSize();return e.scrollHeight>o.height||e.scrollWidth>o.width}};var cw=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,e,o,a){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=o,this._config=a}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(sn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},G_=class{enable(){}disable(){}attach(){}};function uw(r,t){return t.some(e=>{let o=r.bottom<e.top,a=r.top>e.bottom,s=r.right<e.left,_=r.left>e.right;return o||a||s||_})}function pk(r,t){return t.some(e=>{let o=r.top<e.top,a=r.bottom>e.bottom,s=r.left<e.left,_=r.right>e.right;return o||a||s||_})}var dw=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,e,o,a){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=o,this._config=a}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:a}=this._viewportRuler.getViewportSize();uw(e,[{width:o,height:a,bottom:a,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},nF=(()=>{class r{_scrollDispatcher=Oe(uk);_viewportRuler=Oe(Sm);_ngZone=Oe(Xi);_document=Oe(Ii);constructor(){}noop=()=>new G_;close=e=>new cw(this._scrollDispatcher,this._ngZone,this._viewportRuler,e);block=()=>new lw(this._viewportRuler,this._document);reposition=e=>new dw(this._scrollDispatcher,this._viewportRuler,this._ngZone,e);static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),W_=class{positionStrategy;scrollStrategy=new G_;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let e=Object.keys(t);for(let o of e)t[o]!==void 0&&(this[o]=t[o])}}};var hw=class{connectionPair;scrollableViewProperties;constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var yk=(()=>{class r{_attachedOverlays=[];_document=Oe(Ii);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let o=this._attachedOverlays.indexOf(e);o>-1&&this._attachedOverlays.splice(o,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),oF=(()=>{class r extends yk{_ngZone=Oe(Xi,{optional:!0});add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}_keydownListener=e=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let s=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>s.next(e)):s.next(e);break}};static \u0275fac=(()=>{let e;return function(a){return(e||(e=ha(r)))(a||r)}})();static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),sF=(()=>{class r extends yk{_platform=Oe(bo);_ngZone=Oe(Xi,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(e){if(super.add(e),!this._isAttached){let o=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(o)):this._addEventListeners(o),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=o.style.cursor,o.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=e=>{this._pointerDownEventTarget=ma(e)};_clickListener=e=>{let o=ma(e),a=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let s=this._attachedOverlays.slice();for(let _=s.length-1;_>-1;_--){let w=s[_];if(w._outsidePointerEvents.observers.length<1||!w.hasAttached())continue;if(fk(w.overlayElement,o)||fk(w.overlayElement,a))break;let E=w._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>E.next(e)):E.next(e)}};static \u0275fac=(()=>{let e;return function(a){return(e||(e=ha(r)))(a||r)}})();static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function fk(r,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,o=t;for(;o;){if(o===r)return!0;o=e&&o instanceof ShadowRoot?o.host:o.parentNode}return!1}var vk=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(o,a){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return r})(),xk=(()=>{class r{_platform=Oe(bo);_containerElement;_document=Oe(Ii);_styleLoader=Oe(rc);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||Ux()){let a=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<a.length;s++)a[s].remove()}let o=this._document.createElement("div");o.classList.add(e),Ux()?o.setAttribute("platform","test"):this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._containerElement=o}_loadStyles(){this._styleLoader.load(vk)}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),pw=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_backdropElement=null;_backdropTimeout;_backdropClick=new Mi;_attachments=new Mi;_detachments=new Mi;_positionStrategy;_scrollStrategy;_locationChanges=Mo.EMPTY;_backdropClickHandler=t=>this._backdropClick.next(t);_backdropTransitionendHandler=t=>{this._disposeBackdrop(t.target)};_previousHostParent;_keydownEvents=new Mi;_outsidePointerEvents=new Mi;_renders=new Mi;_afterRenderRef;_afterNextRenderRef;constructor(t,e,o,a,s,_,w,E,M,I=!1,A){this._portalOutlet=t,this._host=e,this._pane=o,this._config=a,this._ngZone=s,this._keyboardDispatcher=_,this._document=w,this._location=E,this._outsideClickDispatcher=M,this._animationsDisabled=I,this._injector=A,a.scrollStrategy&&(this._scrollStrategy=a.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=a.positionStrategy,this._afterRenderRef=qa(()=>Mg(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=hh(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=ft(ft({},this._config),t),this._updateElementSize()}setDirection(t){this._config=si(ft({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=mn(this._config.width),t.height=mn(this._config.height),t.minWidth=mn(this._config.minWidth),t.minHeight=mn(this._config.minHeight),t.maxWidth=mn(this._config.maxWidth),t.maxHeight=mn(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,o){let a=Xh(e||[]).filter(s=>!!s);a.length&&(o?t.classList.add(...a):t.classList.remove(...a))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(pn(Uc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},mk="cdk-overlay-connected-position-bounding-box",aF=/([A-Za-z%]+)$/,fw=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Mi;_resizeSubscription=Mo.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,e,o,a,s){this._viewportRuler=e,this._document=o,this._platform=a,this._overlayContainer=s,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(mk),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,o=this._viewportRect,a=this._containerRect,s=[],_;for(let w of this._preferredPositions){let E=this._getOriginPoint(t,a,w),M=this._getOverlayPoint(E,e,w),I=this._getOverlayFit(M,e,o,w);if(I.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(w,E);return}if(this._canFitWithFlexibleDimensions(I,M,o)){s.push({position:w,origin:E,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(E,w)});continue}(!_||_.overlayFit.visibleArea<I.visibleArea)&&(_={overlayFit:I,overlayPoint:M,originPoint:E,position:w,overlayRect:e})}if(s.length){let w=null,E=-1;for(let M of s){let I=M.boundingBoxRect.width*M.boundingBoxRect.height*(M.position.weight||1);I>E&&(E=I,w=M)}this._isPushed=!1,this._applyPosition(w.position,w.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(_.position,_.originPoint);return}this._applyPosition(_.position,_.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&gd(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(mk),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,o){let a;if(o.originX=="center")a=t.left+t.width/2;else{let _=this._isRtl()?t.right:t.left,w=this._isRtl()?t.left:t.right;a=o.originX=="start"?_:w}e.left<0&&(a-=e.left);let s;return o.originY=="center"?s=t.top+t.height/2:s=o.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:a,y:s}}_getOverlayPoint(t,e,o){let a;o.overlayX=="center"?a=-e.width/2:o.overlayX==="start"?a=this._isRtl()?-e.width:0:a=this._isRtl()?0:-e.width;let s;return o.overlayY=="center"?s=-e.height/2:s=o.overlayY=="top"?0:-e.height,{x:t.x+a,y:t.y+s}}_getOverlayFit(t,e,o,a){let s=_k(e),{x:_,y:w}=t,E=this._getOffset(a,"x"),M=this._getOffset(a,"y");E&&(_+=E),M&&(w+=M);let I=0-_,A=_+s.width-o.width,R=0-w,$=w+s.height-o.height,W=this._subtractOverflows(s.width,I,A),G=this._subtractOverflows(s.height,R,$),pe=W*G;return{visibleArea:pe,isCompletelyWithinViewport:s.width*s.height===pe,fitsInViewportVertically:G===s.height,fitsInViewportHorizontally:W==s.width}}_canFitWithFlexibleDimensions(t,e,o){if(this._hasFlexibleDimensions){let a=o.bottom-e.y,s=o.right-e.x,_=gk(this._overlayRef.getConfig().minHeight),w=gk(this._overlayRef.getConfig().minWidth),E=t.fitsInViewportVertically||_!=null&&_<=a,M=t.fitsInViewportHorizontally||w!=null&&w<=s;return E&&M}return!1}_pushOverlayOnScreen(t,e,o){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let a=_k(e),s=this._viewportRect,_=Math.max(t.x+a.width-s.width,0),w=Math.max(t.y+a.height-s.height,0),E=Math.max(s.top-o.top-t.y,0),M=Math.max(s.left-o.left-t.x,0),I=0,A=0;return a.width<=s.width?I=M||-_:I=t.x<this._viewportMargin?s.left-o.left-t.x:0,a.height<=s.height?A=E||-w:A=t.y<this._viewportMargin?s.top-o.top-t.y:0,this._previousPushAmount={x:I,y:A},{x:t.x+I,y:t.y+A}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let o=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!lF(this._lastScrollVisibility,o)){let a=new hw(t,o);this._positionChanges.next(a)}this._lastScrollVisibility=o}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),o,a=t.overlayY;t.overlayX==="center"?o="center":this._isRtl()?o=t.overlayX==="start"?"right":"left":o=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${o} ${a}`}_calculateBoundingBoxRect(t,e){let o=this._viewportRect,a=this._isRtl(),s,_,w;if(e.overlayY==="top")_=t.y,s=o.height-_+this._viewportMargin;else if(e.overlayY==="bottom")w=o.height-t.y+this._viewportMargin*2,s=o.height-w+this._viewportMargin;else{let $=Math.min(o.bottom-t.y+o.top,t.y),W=this._lastBoundingBoxSize.height;s=$*2,_=t.y-$,s>W&&!this._isInitialRender&&!this._growAfterOpen&&(_=t.y-W/2)}let E=e.overlayX==="start"&&!a||e.overlayX==="end"&&a,M=e.overlayX==="end"&&!a||e.overlayX==="start"&&a,I,A,R;if(M)R=o.width-t.x+this._viewportMargin*2,I=t.x-this._viewportMargin;else if(E)A=t.x,I=o.right-t.x;else{let $=Math.min(o.right-t.x+o.left,t.x),W=this._lastBoundingBoxSize.width;I=$*2,A=t.x-$,I>W&&!this._isInitialRender&&!this._growAfterOpen&&(A=t.x-W/2)}return{top:_,left:A,bottom:w,right:R,width:I,height:s}}_setBoundingBoxStyles(t,e){let o=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));let a={};if(this._hasExactPosition())a.top=a.left="0",a.bottom=a.right=a.maxHeight=a.maxWidth="",a.width=a.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,_=this._overlayRef.getConfig().maxWidth;a.height=mn(o.height),a.top=mn(o.top),a.bottom=mn(o.bottom),a.width=mn(o.width),a.left=mn(o.left),a.right=mn(o.right),e.overlayX==="center"?a.alignItems="center":a.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?a.justifyContent="center":a.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(a.maxHeight=mn(s)),_&&(a.maxWidth=mn(_))}this._lastBoundingBoxSize=o,gd(this._boundingBox.style,a)}_resetBoundingBoxStyles(){gd(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){gd(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let o={},a=this._hasExactPosition(),s=this._hasFlexibleDimensions,_=this._overlayRef.getConfig();if(a){let I=this._viewportRuler.getViewportScrollPosition();gd(o,this._getExactOverlayY(e,t,I)),gd(o,this._getExactOverlayX(e,t,I))}else o.position="static";let w="",E=this._getOffset(e,"x"),M=this._getOffset(e,"y");E&&(w+=`translateX(${E}px) `),M&&(w+=`translateY(${M}px)`),o.transform=w.trim(),_.maxHeight&&(a?o.maxHeight=mn(_.maxHeight):s&&(o.maxHeight="")),_.maxWidth&&(a?o.maxWidth=mn(_.maxWidth):s&&(o.maxWidth="")),gd(this._pane.style,o)}_getExactOverlayY(t,e,o){let a={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o)),t.overlayY==="bottom"){let _=this._document.documentElement.clientHeight;a.bottom=`${_-(s.y+this._overlayRect.height)}px`}else a.top=mn(s.y);return a}_getExactOverlayX(t,e,o){let a={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o));let _;if(this._isRtl()?_=t.overlayX==="end"?"left":"right":_=t.overlayX==="end"?"right":"left",_==="right"){let w=this._document.documentElement.clientWidth;a.right=`${w-(s.x+this._overlayRect.width)}px`}else a.left=mn(s.x);return a}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),o=this._scrollables.map(a=>a.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:pk(t,o),isOriginOutsideView:uw(t,o),isOverlayClipped:pk(e,o),isOverlayOutsideView:uw(e,o)}}_subtractOverflows(t,...e){return e.reduce((o,a)=>o-Math.max(a,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+t-this._viewportMargin,bottom:o.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Xh(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof cr)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,o=t.height||0;return{top:t.y,bottom:t.y+o,left:t.x,right:t.x+e,height:o,width:e}}};function gd(r,t){for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function gk(r){if(typeof r!="number"&&r!=null){let[t,e]=r.split(aF);return!e||e==="px"?parseFloat(t):null}return r||null}function _k(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}function lF(r,t){return r===t?!0:r.isOriginClipped===t.isOriginClipped&&r.isOriginOutsideView===t.isOriginOutsideView&&r.isOverlayClipped===t.isOverlayClipped&&r.isOverlayOutsideView===t.isOverlayOutsideView}var bk="cdk-global-overlay-wrapper",mw=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(bk),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:a,height:s,maxWidth:_,maxHeight:w}=o,E=(a==="100%"||a==="100vw")&&(!_||_==="100%"||_==="100vw"),M=(s==="100%"||s==="100vh")&&(!w||w==="100%"||w==="100vh"),I=this._xPosition,A=this._xOffset,R=this._overlayRef.getConfig().direction==="rtl",$="",W="",G="";E?G="flex-start":I==="center"?(G="center",R?W=A:$=A):R?I==="left"||I==="end"?(G="flex-end",$=A):(I==="right"||I==="start")&&(G="flex-start",W=A):I==="left"||I==="start"?(G="flex-start",$=A):(I==="right"||I==="end")&&(G="flex-end",W=A),t.position=this._cssPosition,t.marginLeft=E?"0":$,t.marginTop=M?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=E?"0":W,e.justifyContent=G,e.alignItems=M?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,o=e.style;e.classList.remove(bk),o.justifyContent=o.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},cF=(()=>{class r{_viewportRuler=Oe(Sm);_document=Oe(Ii);_platform=Oe(bo);_overlayContainer=Oe(xk);constructor(){}global(){return new mw}flexibleConnectedTo(e){return new fw(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),_d=(()=>{class r{scrollStrategies=Oe(nF);_overlayContainer=Oe(xk);_positionBuilder=Oe(cF);_keyboardDispatcher=Oe(oF);_injector=Oe(In);_ngZone=Oe(Xi);_document=Oe(Ii);_directionality=Oe(Cl);_location=Oe(Ju);_outsideClickDispatcher=Oe(sF);_animationsModuleType=Oe(Io,{optional:!0});_idGenerator=Oe(ga);_appRef;_styleLoader=Oe(rc);constructor(){}create(e){this._styleLoader.load(vk);let o=this._createHostElement(),a=this._createPaneElement(o),s=this._createPortalOutlet(a),_=new W_(e);return _.direction=_.direction||this._directionality.value,new pw(s,o,a,_,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Ua))}position(){return this._positionBuilder}_createPaneElement(e){let o=this._document.createElement("div");return o.id=this._idGenerator.getId("cdk-overlay-"),o.classList.add("cdk-overlay-pane"),e.appendChild(o),o}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(pa)),new $_(e,null,this._appRef,this._injector,this._document)}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),uF=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],wk=new Ft("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let r=Oe(_d);return()=>r.scrollStrategies.reposition()}}),Im=(()=>{class r{elementRef=Oe(cr);constructor(){}static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return r})(),gw=(()=>{class r{_overlay=Oe(_d);_dir=Oe(Cl,{optional:!0});_overlayRef;_templatePortal;_backdropSubscription=Mo.EMPTY;_attachSubscription=Mo.EMPTY;_detachSubscription=Mo.EMPTY;_positionSubscription=Mo.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=Oe(wk);_disposeOnNavigation=!1;_ngZone=Oe(Xi);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}backdropClick=new ar;positionChange=new ar;attach=new ar;detach=new ar;overlayKeydown=new ar;overlayOutsideClick=new ar;constructor(){let e=Oe(Ag),o=Oe(gh);this._templatePortal=new Mm(e,o),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=uF);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(o=>{this.overlayKeydown.next(o),o.keyCode===27&&!this.disableClose&&!nc(o)&&(o.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(o=>{let a=this._getOriginElement(),s=ma(o);(!a||a!==s&&!a.contains(s))&&this.overlayOutsideClick.next(o)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),o=new W_({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(o.width=this.width),(this.height||this.height===0)&&(o.height=this.height),(this.minWidth||this.minWidth===0)&&(o.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(o.minHeight=this.minHeight),this.backdropClass&&(o.backdropClass=this.backdropClass),this.panelClass&&(o.panelClass=this.panelClass),o}_updatePositionStrategy(e){let o=this.positions.map(a=>({originX:a.originX,originY:a.originY,overlayX:a.overlayX,overlayY:a.overlayY,offsetX:a.offsetX||this.offsetX,offsetY:a.offsetY||this.offsetY,panelClass:a.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(o).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof Im?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof Im?this.origin.elementRef.nativeElement:this.origin instanceof cr?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(GC(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",er],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",er],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",er],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",er],push:[2,"cdkConnectedOverlayPush","push",er],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",er]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Xn,da]})}return r})();function dF(r){return()=>r.scrollStrategies.reposition()}var hF={provide:wk,deps:[_d],useFactory:dF},Ck=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({providers:[_d,hF],imports:[uu,dk,nw,nw]})}return r})();var _w=class{_box;_destroyed=new Mi;_resizeSubject=new Mi;_resizeObserver;_elementObservables=new Map;constructor(t){this._box=t,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new $l(e=>{let o=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),o.unsubscribe(),this._elementObservables.delete(t)}}).pipe(sn(e=>e.some(o=>o.target===t)),Iy({bufferSize:1,refCount:!0}),pn(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},Ek=(()=>{class r{_observers=new Map;_ngZone=Oe(Xi);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(e,o){let a=o?.box||"content-box";return this._observers.has(a)||this._observers.set(a,new _w(a)),this._observers.get(a).observe(e)}static \u0275fac=function(o){return new(o||r)};static \u0275prov=Rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var pF=["notch"],fF=["matFormFieldNotchedOutline",""],mF=["*"],gF=["textField"],_F=["iconPrefixContainer"],bF=["textPrefixContainer"],yF=["iconSuffixContainer"],vF=["textSuffixContainer"],xF=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],wF=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function CF(r,t){r&1&&Je(0,"span",21)}function EF(r,t){if(r&1&&(K(0,"label",20),Mr(1,1),Ot(2,CF,1,0,"span",21),ie()),r&2){let e=At(2);yt("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),Vr("for",e._control.disableAutomaticLabeling?null:e._control.id),Be(2),qr(!e.hideRequiredMarker&&e._control.required?2:-1)}}function SF(r,t){if(r&1&&Ot(0,EF,3,5,"label",20),r&2){let e=At();qr(e._hasFloatingLabel()?0:-1)}}function TF(r,t){r&1&&Je(0,"div",7)}function MF(r,t){}function IF(r,t){if(r&1&&Ot(0,MF,0,0,"ng-template",13),r&2){At(2);let e=Wl(1);yt("ngTemplateOutlet",e)}}function AF(r,t){if(r&1&&(K(0,"div",9),Ot(1,IF,1,1,null,13),ie()),r&2){let e=At();yt("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),Be(),qr(e._forceDisplayInfixLabel()?-1:1)}}function kF(r,t){r&1&&(K(0,"div",10,2),Mr(2,2),ie())}function PF(r,t){r&1&&(K(0,"div",11,3),Mr(2,3),ie())}function DF(r,t){}function RF(r,t){if(r&1&&Ot(0,DF,0,0,"ng-template",13),r&2){At();let e=Wl(1);yt("ngTemplateOutlet",e)}}function OF(r,t){r&1&&(K(0,"div",14,4),Mr(2,4),ie())}function LF(r,t){r&1&&(K(0,"div",15,5),Mr(2,5),ie())}function NF(r,t){r&1&&Je(0,"div",16)}function FF(r,t){if(r&1&&(K(0,"div",18),Mr(1,6),ie()),r&2){let e=At();yt("@transitionMessages",e._subscriptAnimationState)}}function zF(r,t){if(r&1&&(K(0,"mat-hint",22),Se(1),ie()),r&2){let e=At(2);yt("id",e._hintLabelId),Be(),Ci(e.hintLabel)}}function BF(r,t){if(r&1&&(K(0,"div",19),Ot(1,zF,2,2,"mat-hint",22),Mr(2,7),Je(3,"div",23),Mr(4,8),ie()),r&2){let e=At();yt("@transitionMessages",e._subscriptAnimationState),Be(),qr(e.hintLabel?1:-1)}}var X_=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r,selectors:[["mat-label"]]})}return r})(),VF=new Ft("MatError");var Sk=(()=>{class r{align="start";id=Oe(ga).getId("mat-mdc-hint-");static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(o,a){o&2&&(Rg("id",a.id),Vr("align",null),lr("mat-mdc-form-field-hint-end",a.align==="end"))},inputs:{align:"align",id:"id"}})}return r})(),UF=new Ft("MatPrefix");var jF=new Ft("MatSuffix");var Dk=new Ft("FloatingLabelParent"),Tk=(()=>{class r{_elementRef=Oe(cr);get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=Oe(Ek);_ngZone=Oe(Xi);_parent=Oe(Dk);_resizeSubscription=new Mo;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return qF(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(o,a){o&2&&lr("mdc-floating-label--float-above",a.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return r})();function qF(r){let t=r;if(t.offsetParent!==null)return t.scrollWidth;let e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let o=e.scrollWidth;return e.remove(),o}var Mk="mdc-line-ripple--active",Z_="mdc-line-ripple--deactivating",Ik=(()=>{class r{_elementRef=Oe(cr);constructor(){Oe(Xi).runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(Z_),e.add(Mk)}deactivate(){this._elementRef.nativeElement.classList.add(Z_)}_handleTransitionEnd=e=>{let o=this._elementRef.nativeElement.classList,a=o.contains(Z_);e.propertyName==="opacity"&&a&&o.remove(Mk,Z_)};ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return r})(),Ak=(()=>{class r{_elementRef=Oe(cr);_ngZone=Oe(Xi);open=!1;_notch;constructor(){}ngAfterViewInit(){let e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){!this.open||!e?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(o,a){if(o&1&&Hr(pF,5),o&2){let s;nr(s=or())&&(a._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(o,a){o&2&&lr("mdc-notched-outline--notched",a.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:fF,ngContentSelectors:mF,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(o,a){o&1&&(Ao(),Je(0,"div",1),K(1,"div",2,0),Mr(3),ie(),Je(4,"div",3))},encapsulation:2,changeDetection:0})}return r})(),HF={transitionMessages:ff("transitionMessages",[qg("enter",ed({opacity:1,transform:"translateY(0%)"})),yh("void => enter",[ed({opacity:0,transform:"translateY(-5px)"}),mf("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},bw=(()=>{class r{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r})}return r})();var yw=new Ft("MatFormField"),$F=new Ft("MAT_FORM_FIELD_DEFAULT_OPTIONS"),kk="fill",GF="auto",Pk="fixed",WF="translateY(-50%)",Rk=(()=>{class r{_elementRef=Oe(cr);_changeDetectorRef=Oe(Go);_dir=Oe(Cl);_platform=Oe(bo);_idGenerator=Oe(ga);_defaults=Oe($F,{optional:!0});_animationMode=Oe(Io,{optional:!0});_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=aE(X_);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=kA(e)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||GF}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearance}set appearance(e){let o=this._appearance,a=e||this._defaults?.appearance||kk;this._appearance=a,this._appearance==="outline"&&this._appearance!==o&&(this._needsOutlineLabelOffsetUpdate=!0)}_appearance=kk;get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||Pk}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||Pk}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_subscriptAnimationState="";get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}_destroyed=new Mi;_isFocused=null;_explicitFormFieldControl;_needsOutlineLabelOffsetUpdate=!1;_previousControl=null;_stateChanges;_valueChanges;_describedByChanges;_injector=Oe(In);constructor(){let e=this._defaults;e&&(e.appearance&&(this.appearance=e.appearance),this._hideRequiredMarker=!!e?.hideRequiredMarker,e.color&&(this.color=e.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=Zl(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(e){let o=this._control,a="mat-mdc-form-field-type-";e&&this._elementRef.nativeElement.classList.remove(a+e.controlType),o.controlType&&this._elementRef.nativeElement.classList.add(a+o.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=o.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=o.stateChanges.pipe(gl([void 0,void 0]),gi(()=>[o.errorState,o.userAriaDescribedBy]),My(),sn(([[s,_],[w,E]])=>s!==w||_!==E)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),o.ngControl&&o.ngControl.valueChanges&&(this._valueChanges=o.ngControl.valueChanges.pipe(pn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Uc(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),Mg(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(pn(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=Zl(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(e){let o=this._control?this._control.ngControl:null;return o&&o[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let o=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,a=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;o?e.push(o.id):this._hintLabel&&e.push(this._hintLabelId),a&&e.push(a.id)}else this._errorChildren&&e.push(...this._errorChildren.map(o=>o.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let e=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){e.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let o=this._iconPrefixContainer?.nativeElement,a=this._textPrefixContainer?.nativeElement,s=this._iconSuffixContainer?.nativeElement,_=this._textSuffixContainer?.nativeElement,w=o?.getBoundingClientRect().width??0,E=a?.getBoundingClientRect().width??0,M=s?.getBoundingClientRect().width??0,I=_?.getBoundingClientRect().width??0,A=this._dir.value==="rtl"?"-1":"1",R=`${w+E}px`,W=`calc(${A} * (${R} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;e.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${WF} translateX(${W})
    )`;let G=w+E+M+I;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${G}px)`)}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let o=e.getRootNode();return o&&o!==e}return document.documentElement.contains(e)}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["mat-form-field"]],contentQueries:function(o,a,s){if(o&1&&(dE(s,a._labelChild,X_,5),us(s,bw,5),us(s,UF,5),us(s,jF,5),us(s,VF,5),us(s,Sk,5)),o&2){hE();let _;nr(_=or())&&(a._formFieldControl=_.first),nr(_=or())&&(a._prefixChildren=_),nr(_=or())&&(a._suffixChildren=_),nr(_=or())&&(a._errorChildren=_),nr(_=or())&&(a._hintChildren=_)}},viewQuery:function(o,a){if(o&1&&(Hr(gF,5),Hr(_F,5),Hr(bF,5),Hr(yF,5),Hr(vF,5),Hr(Tk,5),Hr(Ak,5),Hr(Ik,5)),o&2){let s;nr(s=or())&&(a._textField=s.first),nr(s=or())&&(a._iconPrefixContainer=s.first),nr(s=or())&&(a._textPrefixContainer=s.first),nr(s=or())&&(a._iconSuffixContainer=s.first),nr(s=or())&&(a._textSuffixContainer=s.first),nr(s=or())&&(a._floatingLabel=s.first),nr(s=or())&&(a._notchedOutline=s.first),nr(s=or())&&(a._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(o,a){o&2&&lr("mat-mdc-form-field-label-always-float",a._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",a._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",a._hasIconSuffix)("mat-form-field-invalid",a._control.errorState)("mat-form-field-disabled",a._control.disabled)("mat-form-field-autofilled",a._control.autofilled)("mat-form-field-no-animations",a._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",a.appearance=="fill")("mat-form-field-appearance-outline",a.appearance=="outline")("mat-form-field-hide-placeholder",a._hasFloatingLabel()&&!a._shouldLabelFloat())("mat-focused",a._control.focused)("mat-primary",a.color!=="accent"&&a.color!=="warn")("mat-accent",a.color==="accent")("mat-warn",a.color==="warn")("ng-untouched",a._shouldForward("untouched"))("ng-touched",a._shouldForward("touched"))("ng-pristine",a._shouldForward("pristine"))("ng-dirty",a._shouldForward("dirty"))("ng-valid",a._shouldForward("valid"))("ng-invalid",a._shouldForward("invalid"))("ng-pending",a._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[An([{provide:yw,useExisting:r},{provide:Dk,useExisting:r}])],ngContentSelectors:wF,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(o,a){if(o&1){let s=Tr();Ao(xF),Ot(0,SF,1,1,"ng-template",null,0,Og),K(2,"div",6,1),Qt("click",function(w){return Ri(s),Oi(a._control.onContainerClick(w))}),Ot(4,TF,1,0,"div",7),K(5,"div",8),Ot(6,AF,2,2,"div",9)(7,kF,3,0,"div",10)(8,PF,3,0,"div",11),K(9,"div",12),Ot(10,RF,1,1,null,13),Mr(11),ie(),Ot(12,OF,3,0,"div",14)(13,LF,3,0,"div",15),ie(),Ot(14,NF,1,0,"div",16),ie(),K(15,"div",17),Ot(16,FF,2,1,"div",18)(17,BF,5,2,"div",19),ie()}if(o&2){let s;Be(2),lr("mdc-text-field--filled",!a._hasOutline())("mdc-text-field--outlined",a._hasOutline())("mdc-text-field--no-label",!a._hasFloatingLabel())("mdc-text-field--disabled",a._control.disabled)("mdc-text-field--invalid",a._control.errorState),Be(2),qr(!a._hasOutline()&&!a._control.disabled?4:-1),Be(2),qr(a._hasOutline()?6:-1),Be(),qr(a._hasIconPrefix?7:-1),Be(),qr(a._hasTextPrefix?8:-1),Be(2),qr(!a._hasOutline()||a._forceDisplayInfixLabel()?10:-1),Be(2),qr(a._hasTextSuffix?12:-1),Be(),qr(a._hasIconSuffix?13:-1),Be(),qr(a._hasOutline()?-1:14),Be(),lr("mat-mdc-form-field-subscript-dynamic-size",a.subscriptSizing==="dynamic"),Be(),qr((s=a._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[Tk,Ak,zg,Ik,Sk],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-sys-outline));border-width:var(--mdc-outlined-text-field-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[HF.transitionMessages]},changeDetection:0})}return r})(),Ok=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({imports:[Kr,PA,Kr]})}return r})();var XF=["trigger"],YF=["panel"],KF=[[["mat-select-trigger"]],"*"],QF=["mat-select-trigger","*"];function JF(r,t){if(r&1&&(K(0,"span",4),Se(1),ie()),r&2){let e=At();Be(),Ci(e.placeholder)}}function e9(r,t){r&1&&Mr(0)}function t9(r,t){if(r&1&&(K(0,"span",11),Se(1),ie()),r&2){let e=At(2);Be(),Ci(e.triggerValue)}}function i9(r,t){if(r&1&&(K(0,"span",5),Ot(1,e9,1,0)(2,t9,2,1,"span",11),ie()),r&2){let e=At();Be(),qr(e.customTrigger?1:2)}}function r9(r,t){if(r&1){let e=Tr();K(0,"div",12,1),Qt("@transformPanel.done",function(a){Ri(e);let s=At();return Oi(s._panelDoneAnimatingStream.next(a.toState))})("keydown",function(a){Ri(e);let s=At();return Oi(s._handleKeydown(a))}),Mr(2,1),ie()}if(r&2){let e=At();uE("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),yt("ngClass",e.panelClass)("@transformPanel","showing"),Vr("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var n9={transformPanelWrap:ff("transformPanelWrap",[yh("* => void",RE("@transformPanel",[DE()],{optional:!0}))]),transformPanel:ff("transformPanel",[qg("void",ed({opacity:0,transform:"scale(1, 0.8)"})),yh("void => showing",mf("120ms cubic-bezier(0, 0, 0.2, 1)",ed({opacity:1,transform:"scale(1, 1)"}))),yh("* => void",mf("100ms linear",ed({opacity:0})))])};var Lk=new Ft("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let r=Oe(_d);return()=>r.scrollStrategies.reposition()}});function o9(r){return()=>r.scrollStrategies.reposition()}var s9=new Ft("MAT_SELECT_CONFIG"),a9={provide:Lk,deps:[_d],useFactory:o9},l9=new Ft("MatSelectTrigger"),vw=class{source;value;constructor(t,e){this.source=t,this.value=e}},Nk=(()=>{class r{_viewportRuler=Oe(Sm);_changeDetectorRef=Oe(Go);_elementRef=Oe(cr);_dir=Oe(Cl,{optional:!0});_idGenerator=Oe(ga);_parentFormField=Oe(yw,{optional:!0});ngControl=Oe(ic,{self:!0,optional:!0});_liveAnnouncer=Oe(UA);_defaultOptions=Oe(s9,{optional:!0});_initialized=new Mi;options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(e){let o=this.options.toArray()[e];if(o){let a=this.panel.nativeElement,s=KA(e,this.options,this.optionGroups),_=o._getHostElement();e===0&&s===1?a.scrollTop=0:a.scrollTop=QA(_.offsetTop,_.offsetHeight,a.scrollTop,a.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new vw(this,e)}_scrollStrategyFactory=Oe(Lk);_panelOpen=!1;_compareWith=(e,o)=>e===o;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new Mi;_errorStateTracker;stateChanges=new Mi;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_panelDoneAnimatingStream=new Mi;_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;disableRipple=!1;tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator(Ls.required)??!1}set required(e){this._required=e,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";canSelectNullableOptions=this._defaultOptions?.canSelectNullableOptions??!1;optionSelectionChanges=of(()=>{let e=this.options;return e?e.changes.pipe(gl(e),po(()=>Uc(...e.map(o=>o.onSelectionChange)))):this._initialized.pipe(po(()=>this.optionSelectionChanges))});openedChange=new ar;_openedStream=this.openedChange.pipe(sn(e=>e),gi(()=>{}));_closedStream=this.openedChange.pipe(sn(e=>!e),gi(()=>{}));selectionChange=new ar;valueChange=new ar;constructor(){let e=Oe(XA),o=Oe(Fx,{optional:!0}),a=Oe(hd,{optional:!0}),s=Oe(new Zu("tabindex"),{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),this._defaultOptions?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new C_(e,this.ngControl,a,o,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=s==null?0:parseInt(s)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Qh(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(sf(),pn(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(pn(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(pn(this._destroy)).subscribe(e=>{e.added.forEach(o=>o.select()),e.removed.forEach(o=>o.deselect())}),this.options.changes.pipe(gl(null),pn(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),o=this.ngControl;if(e!==this._triggerAriaLabelledBy){let a=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?a.setAttribute("aria-labelledby",e):a.removeAttribute("aria-labelledby")}o&&(this._previousControl!==o.control&&(this._previousControl!==void 0&&o.disabled!==null&&o.disabled!==this.disabled&&(this.disabled=o.disabled),this._previousControl=o.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_trackedModal=null;_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let o=`${this.id}-panel`;this._trackedModal&&Wx(this._trackedModal,"aria-owns",o),zA(e,"aria-owns",o),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;Wx(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(o=>o.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let o=e.keyCode,a=o===40||o===38||o===37||o===39,s=o===13||o===32,_=this._keyManager;if(!_.isTyping()&&s&&!nc(e)||(this.multiple||e.altKey)&&a)e.preventDefault(),this.open();else if(!this.multiple){let w=this.selected;_.onKeydown(e);let E=this.selected;E&&w!==E&&this._liveAnnouncer.announce(E.viewValue,1e4)}}_handleOpenKeydown(e){let o=this._keyManager,a=e.keyCode,s=a===40||a===38,_=o.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(!_&&(a===13||a===32)&&o.activeItem&&!nc(e))e.preventDefault(),o.activeItem._selectViaInteraction();else if(!_&&this._multiple&&a===65&&e.ctrlKey){e.preventDefault();let w=this.options.some(E=>!E.disabled&&!E.selected);this.options.forEach(E=>{E.disabled||(w?E.select():E.deselect())})}else{let w=o.activeItemIndex;o.onKeydown(e),this._multiple&&s&&e.shiftKey&&o.activeItem&&o.activeItemIndex!==w&&o.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Ms(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(o=>o.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(o=>this._selectOptionByValue(o)),this._sortValues();else{let o=this._selectOptionByValue(e);o?this._keyManager.updateActiveItem(o):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let o=this.options.find(a=>{if(this._selectionModel.isSelected(a))return!1;try{return(a.value!=null||this.canSelectNullableOptions)&&this._compareWith(a.value,e)}catch{return!1}});return o&&this._selectionModel.select(o),o}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_skipPredicate=e=>this.panelOpen?!1:e.disabled;_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof Im?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new v_(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=Uc(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(pn(e)).subscribe(o=>{this._onSelect(o.source,o.isUserInput),o.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Uc(...this.options.map(o=>o._stateChanges)).pipe(pn(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,o){let a=this._selectionModel.isSelected(e);!this.canSelectNullableOptions&&e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(a!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),o&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),o&&this.focus())),a!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((o,a)=>this.sortComparator?this.sortComparator(o,a,e):e.indexOf(o)-e.indexOf(a)),this.stateChanges.next()}}_propagateChanges(e){let o;this.multiple?o=this.selected.map(a=>a.value):o=this.selected?this.selected.value:e,this._value=o,this.valueChange.emit(o),this._onChange(o),this.selectionChange.emit(this._getChangeEvent(o)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let o=0;o<this.options.length;o++)if(!this.options.get(o).disabled){e=o;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||null,o=e?e+" ":"";return this.ariaLabelledby?o+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),o=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(o+=" "+this.ariaLabelledby),o}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["mat-select"]],contentQueries:function(o,a,s){if(o&1&&(us(s,l9,5),us(s,T_,5),us(s,iw,5)),o&2){let _;nr(_=or())&&(a.customTrigger=_.first),nr(_=or())&&(a.options=_),nr(_=or())&&(a.optionGroups=_)}},viewQuery:function(o,a){if(o&1&&(Hr(XF,5),Hr(YF,5),Hr(gw,5)),o&2){let s;nr(s=or())&&(a.trigger=s.first),nr(s=or())&&(a.panel=s.first),nr(s=or())&&(a._overlayDir=s.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(o,a){o&1&&Qt("keydown",function(_){return a._handleKeydown(_)})("focus",function(){return a._onFocus()})("blur",function(){return a._onBlur()}),o&2&&(Vr("id",a.id)("tabindex",a.disabled?-1:a.tabIndex)("aria-controls",a.panelOpen?a.id+"-panel":null)("aria-expanded",a.panelOpen)("aria-label",a.ariaLabel||null)("aria-required",a.required.toString())("aria-disabled",a.disabled.toString())("aria-invalid",a.errorState)("aria-activedescendant",a._getAriaActiveDescendant()),lr("mat-mdc-select-disabled",a.disabled)("mat-mdc-select-invalid",a.errorState)("mat-mdc-select-required",a.required)("mat-mdc-select-empty",a.empty)("mat-mdc-select-multiple",a.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",er],disableRipple:[2,"disableRipple","disableRipple",er],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Qu(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",er],placeholder:"placeholder",required:[2,"required","required",er],multiple:[2,"multiple","multiple",er],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",er],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",Qu],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth",canSelectNullableOptions:[2,"canSelectNullableOptions","canSelectNullableOptions",er]},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[An([{provide:bw,useExisting:r},{provide:tw,useExisting:r}]),Xn,da],ngContentSelectors:QF,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(o,a){if(o&1){let s=Tr();Ao(KF),K(0,"div",2,0),Qt("click",function(){return Ri(s),Oi(a.open())}),K(3,"div",3),Ot(4,JF,2,1,"span",4)(5,i9,3,1,"span",5),ie(),K(6,"div",6)(7,"div",7),af(),K(8,"svg",8),Je(9,"path",9),ie()()()(),Ot(10,r9,3,9,"ng-template",10),Qt("backdropClick",function(){return Ri(s),Oi(a.close())})("attach",function(){return Ri(s),Oi(a._onAttached())})("detach",function(){return Ri(s),Oi(a.close())})}if(o&2){let s=Wl(1);Be(3),Vr("id",a._valueId),Be(),qr(a.empty?4:5),Be(6),yt("cdkConnectedOverlayPanelClass",a._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",a._scrollStrategy)("cdkConnectedOverlayOrigin",a._preferredOverlayOrigin||s)("cdkConnectedOverlayOpen",a.panelOpen)("cdkConnectedOverlayPositions",a._positions)("cdkConnectedOverlayWidth",a._overlayWidth)}},dependencies:[Im,gw,ME],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}'],encapsulation:2,data:{animation:[n9.transformPanel]},changeDetection:0})}return r})();var Fk=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({providers:[a9],imports:[Ck,rw,Kr,H_,Ok,rw,Kr]})}return r})();var zk=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({imports:[Kr,Cm]})}return r})();var u9=["button"],d9=["*"];function h9(r,t){if(r&1&&(K(0,"div",2),Je(1,"mat-pseudo-checkbox",6),ie()),r&2){let e=At();Be(),yt("disabled",e.disabled)}}var Bk=new Ft("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:p9});function p9(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1}}var Vk=new Ft("MatButtonToggleGroup"),f9={provide:au,useExisting:ua(()=>xw),multi:!0},Y_=class{source;value;constructor(t,e){this.source=t,this.value=e}},xw=(()=>{class r{_changeDetector=Oe(Go);_dir=Oe(Cl,{optional:!0});_multiple=!1;_disabled=!1;_disabledInteractive=!1;_selectionModel;_rawValue;_controlValueAccessorChangeFn=()=>{};_onTouched=()=>{};_buttonToggles;appearance;get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}_name=Oe(ga).getId("mat-button-toggle-group-");vertical;get value(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(o=>o.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}valueChange=new ar;get selected(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=e,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markButtonsForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markButtonsForCheck()}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}change=new ar;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._markButtonsForCheck()}_hideSingleSelectionIndicator;get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(e){this._hideMultipleSelectionIndicator=e,this._markButtonsForCheck()}_hideMultipleSelectionIndicator;constructor(){let e=Oe(Bk,{optional:!0});this.appearance=e&&e.appearance?e.appearance:"standard",this.hideSingleSelectionIndicator=e?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=e?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new Qh(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked)),this.multiple||this._initializeTabIndex()}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_keydown(e){if(this.multiple||this.disabled)return;let a=e.target.id,s=this._buttonToggles.toArray().findIndex(w=>w.buttonId===a),_=null;switch(e.keyCode){case 32:case 13:_=this._buttonToggles.get(s)||null;break;case 38:_=this._getNextButton(s,-1);break;case 37:_=this._getNextButton(s,this.dir==="ltr"?-1:1);break;case 40:_=this._getNextButton(s,1);break;case 39:_=this._getNextButton(s,this.dir==="ltr"?1:-1);break;default:return}_&&(e.preventDefault(),_._onButtonClick(),_.focus())}_emitChangeEvent(e){let o=new Y_(e,this.value);this._rawValue=o.value,this._controlValueAccessorChangeFn(o.value),this.change.emit(o)}_syncButtonToggle(e,o,a=!1,s=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?o?this._selectionModel.select(e):this._selectionModel.deselect(e):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(e,a)):this._updateModelValue(e,a)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return typeof this._rawValue>"u"?!1:this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(o=>e.value!=null&&o===e.value):e.value===this._rawValue}_initializeTabIndex(){if(this._buttonToggles.forEach(e=>{e.tabIndex=-1}),this.selected)this.selected.tabIndex=0;else for(let e=0;e<this._buttonToggles.length;e++){let o=this._buttonToggles.get(e);if(!o.disabled){o.tabIndex=0;break}}this._markButtonsForCheck()}_getNextButton(e,o){let a=this._buttonToggles;for(let s=1;s<=a.length;s++){let _=(e+o*s+a.length)%a.length,w=a.get(_);if(w&&!w.disabled)return w}return null}_setSelectionByValue(e){if(this._rawValue=e,!this._buttonToggles)return;let o=this._buttonToggles.toArray();if(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(a=>this._selectValue(a,o))):(this._clearSelection(),this._selectValue(e,o)),!this.multiple&&o.every(a=>a.tabIndex===-1)){for(let a of o)if(!a.disabled){a.tabIndex=0;break}}}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>{e.checked=!1,this.multiple||(e.tabIndex=-1)})}_selectValue(e,o){for(let a of o)if(a.value!=null&&a.value===e){a.checked=!0,this._selectionModel.select(a),this.multiple||(a.tabIndex=0);break}}_updateModelValue(e,o){o&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}static \u0275fac=function(o){return new(o||r)};static \u0275dir=zi({type:r,selectors:[["mat-button-toggle-group"]],contentQueries:function(o,a,s){if(o&1&&us(s,K_,5),o&2){let _;nr(_=or())&&(a._buttonToggles=_)}},hostAttrs:[1,"mat-button-toggle-group"],hostVars:6,hostBindings:function(o,a){o&1&&Qt("keydown",function(_){return a._keydown(_)}),o&2&&(Vr("role",a.multiple?"group":"radiogroup")("aria-disabled",a.disabled),lr("mat-button-toggle-vertical",a.vertical)("mat-button-toggle-group-appearance-standard",a.appearance==="standard"))},inputs:{appearance:"appearance",name:"name",vertical:[2,"vertical","vertical",er],value:"value",multiple:[2,"multiple","multiple",er],disabled:[2,"disabled","disabled",er],disabledInteractive:[2,"disabledInteractive","disabledInteractive",er],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",er],hideMultipleSelectionIndicator:[2,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",er]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[An([f9,{provide:Vk,useExisting:r}]),Xn]})}return r})(),K_=(()=>{class r{_changeDetectorRef=Oe(Go);_elementRef=Oe(cr);_focusMonitor=Oe(jA);_idGenerator=Oe(ga);_animationMode=Oe(Io,{optional:!0});_checked=!1;ariaLabel;ariaLabelledby=null;_buttonElement;buttonToggleGroup;get buttonId(){return`${this.id}-button`}id;name;value;get tabIndex(){return this._tabIndex}set tabIndex(e){e!==this._tabIndex&&(this._tabIndex=e,this._markForCheck())}_tabIndex;disableRipple;get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}_appearance;get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}_disabled=!1;get disabledInteractive(){return this._disabledInteractive||this.buttonToggleGroup!==null&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new ar;constructor(){Oe(rc).load(E_);let e=Oe(Vk,{optional:!0}),o=Oe(new Zu("tabindex"),{optional:!0})||"",a=Oe(Bk,{optional:!0});this._tabIndex=parseInt(o)||0,this.buttonToggleGroup=e,this.appearance=a&&a.appearance?a.appearance:"standard",this.disabledInteractive=a?.disabledInteractive??!1}ngOnInit(){let e=this.buttonToggleGroup;this.id=this.id||this._idGenerator.getId("mat-button-toggle-"),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._animationMode!=="NoopAnimations"&&this._elementRef.nativeElement.classList.add("mat-button-toggle-animations-enabled"),this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){if(this.disabled)return;let e=this.isSingleSelector()?!0:!this._checked;if(e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){let o=this.buttonToggleGroup._buttonToggles.find(a=>a.tabIndex===0);o&&(o.tabIndex=-1),this.tabIndex=0}this.change.emit(new Y_(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["mat-button-toggle"]],viewQuery:function(o,a){if(o&1&&Hr(u9,5),o&2){let s;nr(s=or())&&(a._buttonElement=s.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(o,a){o&1&&Qt("focus",function(){return a.focus()}),o&2&&(Vr("aria-label",null)("aria-labelledby",null)("id",a.id)("name",null),lr("mat-button-toggle-standalone",!a.buttonToggleGroup)("mat-button-toggle-checked",a.checked)("mat-button-toggle-disabled",a.disabled)("mat-button-toggle-disabled-interactive",a.disabledInteractive)("mat-button-toggle-appearance-standard",a.appearance==="standard"))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",er],appearance:"appearance",checked:[2,"checked","checked",er],disabled:[2,"disabled","disabled",er],disabledInteractive:[2,"disabledInteractive","disabledInteractive",er]},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[Xn],ngContentSelectors:d9,decls:7,vars:13,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-checkbox-wrapper"],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"],["state","checked","aria-hidden","true","appearance","minimal",3,"disabled"]],template:function(o,a){if(o&1){let s=Tr();Ao(),K(0,"button",1,0),Qt("click",function(){return Ri(s),Oi(a._onButtonClick())}),Ot(2,h9,2,1,"div",2),K(3,"span",3),Mr(4),ie()(),Je(5,"span",4)(6,"span",5)}if(o&2){let s=Wl(1);yt("id",a.buttonId)("disabled",a.disabled&&!a.disabledInteractive||null),Vr("role",a.isSingleSelector()?"radio":"button")("tabindex",a.disabled&&!a.disabledInteractive?-1:a.tabIndex)("aria-pressed",a.isSingleSelector()?null:a.checked)("aria-checked",a.isSingleSelector()?a.checked:null)("name",a._getButtonName())("aria-label",a.ariaLabel)("aria-labelledby",a.ariaLabelledby)("aria-disabled",a.disabled&&a.disabledInteractive?"true":null),Be(2),qr(a.buttonToggleGroup&&(!a.buttonToggleGroup.multiple&&!a.buttonToggleGroup.hideSingleSelectionIndicator||a.buttonToggleGroup.multiple&&!a.buttonToggleGroup.hideMultipleSelectionIndicator)?2:-1),Be(4),yt("matRippleTrigger",s)("matRippleDisabled",a.disableRipple||a.disabled)}},dependencies:[S_,ew],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}@media(forced-colors: active){.mat-button-toggle-standalone,.mat-button-toggle-group{outline:solid 1px}}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}@media(forced-colors: active){.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{outline:0}}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-legacy-button-toggle-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle-checkbox-wrapper{display:inline-block;justify-content:flex-start;align-items:center;width:0;height:18px;line-height:18px;overflow:hidden;box-sizing:border-box;position:absolute;top:50%;left:16px;transform:translate3d(0, -50%, 0)}[dir=rtl] .mat-button-toggle-checkbox-wrapper{left:auto;right:16px}.mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:12px}[dir=rtl] .mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:auto;right:12px}.mat-button-toggle-checked .mat-button-toggle-checkbox-wrapper{width:18px}.mat-button-toggle-animations-enabled .mat-button-toggle-checkbox-wrapper{transition:width 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-checkbox-wrapper{transition:none}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-legacy-button-toggle-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color, var(--mat-sys-on-surface));background-color:var(--mat-standard-button-toggle-background-color, transparent);font-family:var(--mat-standard-button-toggle-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-standard-button-toggle-label-text-size, var(--mat-sys-label-large-size));line-height:var(--mat-standard-button-toggle-label-text-line-height, var(--mat-sys-label-large-line-height));font-weight:var(--mat-standard-button-toggle-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mat-standard-button-toggle-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-standard-button-toggle-selected-state-background-color, var(--mat-sys-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-state-background-color, transparent)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color, var(--mat-sys-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height, 40px)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}@media(forced-colors: active){.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-animations-enabled .mat-button-toggle-button{transition:padding 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-button{transition:none}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:30px}[dir=rtl] .mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:0;padding-right:30px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}"],encapsulation:2,changeDetection:0})}return r})(),Uk=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({imports:[Kr,Cm,K_,Kr]})}return r})();var g9=["determinateSpinner"];function _9(r,t){if(r&1&&(af(),K(0,"svg",11),Je(1,"circle",12),ie()),r&2){let e=At();Vr("viewBox",e._viewBox()),Be(),Ho("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),Vr("r",e._circleRadius())}}var b9=new Ft("mat-progress-spinner-default-options",{providedIn:"root",factory:y9});function y9(){return{diameter:jk}}var jk=100,v9=10,Q_=(()=>{class r{_elementRef=Oe(cr);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=Oe(Io,{optional:!0}),o=Oe(b9);this._noopAnimations=e==="NoopAnimations"&&!!o&&!o._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",o&&(o.color&&(this.color=this._defaultColor=o.color),o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=jk;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-v9)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=Vt({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(o,a){if(o&1&&Hr(g9,5),o&2){let s;nr(s=or())&&(a._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(o,a){o&2&&(Vr("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",a.mode==="determinate"?a.value:null)("mode",a.mode),hf("mat-"+a.color),Ho("width",a.diameter,"px")("height",a.diameter,"px")("--mdc-circular-progress-size",a.diameter+"px")("--mdc-circular-progress-active-indicator-width",a.diameter+"px"),lr("_mat-animation-noopable",a._noopAnimations)("mdc-circular-progress--indeterminate",a.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Qu],diameter:[2,"diameter","diameter",Qu],strokeWidth:[2,"strokeWidth","strokeWidth",Qu]},exportAs:["matProgressSpinner"],features:[Xn],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(o,a){if(o&1&&(Ot(0,_9,2,8,"ng-template",null,0,Og),K(2,"div",2,1),af(),K(4,"svg",3),Je(5,"circle",4),ie()(),XC(),K(6,"div",5)(7,"div",6)(8,"div",7),Dg(9,8),ie(),K(10,"div",9),Dg(11,8),ie(),K(12,"div",10),Dg(13,8),ie()()()),o&2){let s=Wl(1);Be(4),Vr("viewBox",a._viewBox()),Be(),Ho("stroke-dasharray",a._strokeCircumference(),"px")("stroke-dashoffset",a._strokeDashOffset(),"px")("stroke-width",a._circleStrokeWidth(),"%"),Vr("r",a._circleRadius()),Be(4),yt("ngTemplateOutlet",s),Be(2),yt("ngTemplateOutlet",s),Be(2),yt("ngTemplateOutlet",s)}},dependencies:[zg],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return r})();var J_=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=Pi({type:r});static \u0275inj=ki({imports:[Kr]})}return r})();var tb=NC(Ew());function x9(r,t){r&1&&(K(0,"div",42),Je(1,"mat-spinner"),K(2,"p"),Se(3,"Cargando datos..."),ie()())}function w9(r,t){if(r&1){let e=Tr();K(0,"div",43)(1,"mat-icon"),Se(2,"error_outline"),ie(),K(3,"p"),Se(4,"Error al cargar los datos. Intente nuevamente."),ie(),K(5,"button",44),Qt("click",function(){Ri(e);let a=At();return Oi(a.fetchData())}),Se(6,"Reintentar"),ie()()}}function C9(r,t){r&1&&(K(0,"div")(1,"div",45),Je(2,"span",46),K(3,"span"),Se(4,"0-30% acceso a internet"),ie()(),K(5,"div",45),Je(6,"span",47),K(7,"span"),Se(8,"30-70% acceso a internet"),ie()(),K(9,"div",45),Je(10,"span",48),K(11,"span"),Se(12,"70-100% acceso a internet"),ie()()())}function E9(r,t){r&1&&(K(0,"div")(1,"div",45),Je(2,"span",49),K(3,"span"),Se(4,"0-14 a\xF1os (bajo)"),ie()(),K(5,"div",45),Je(6,"span",50),K(7,"span"),Se(8,"0-14 a\xF1os (medio)"),ie()(),K(9,"div",45),Je(10,"span",51),K(11,"span"),Se(12,"0-14 a\xF1os (alto)"),ie()()())}function S9(r,t){r&1&&(K(0,"div")(1,"div",45),Je(2,"span",52),K(3,"span"),Se(4,"15-59 a\xF1os (bajo)"),ie()(),K(5,"div",45),Je(6,"span",53),K(7,"span"),Se(8,"15-59 a\xF1os (medio)"),ie()(),K(9,"div",45),Je(10,"span",54),K(11,"span"),Se(12,"15-59 a\xF1os (alto)"),ie()()())}function T9(r,t){r&1&&(K(0,"div")(1,"div",45),Je(2,"span",55),K(3,"span"),Se(4,"60+ a\xF1os (bajo)"),ie()(),K(5,"div",45),Je(6,"span",56),K(7,"span"),Se(8,"60+ a\xF1os (medio)"),ie()(),K(9,"div",45),Je(10,"span",57),K(11,"span"),Se(12,"60+ a\xF1os (alto)"),ie()()())}function M9(r,t){r&1&&(K(0,"div")(1,"div",45),Je(2,"span",58),K(3,"span"),Se(4,"Educaci\xF3n Primaria (bajo)"),ie()(),K(5,"div",45),Je(6,"span",59),K(7,"span"),Se(8,"Educaci\xF3n Primaria (medio)"),ie()(),K(9,"div",45),Je(10,"span",60),K(11,"span"),Se(12,"Educaci\xF3n Primaria (alto)"),ie()()())}function I9(r,t){r&1&&(K(0,"div")(1,"div",45),Je(2,"span",61),K(3,"span"),Se(4,"Educaci\xF3n Secundaria (bajo)"),ie()(),K(5,"div",45),Je(6,"span",62),K(7,"span"),Se(8,"Educaci\xF3n Secundaria (medio)"),ie()(),K(9,"div",45),Je(10,"span",63),K(11,"span"),Se(12,"Educaci\xF3n Secundaria (alto)"),ie()()())}function A9(r,t){r&1&&(K(0,"div")(1,"div",45),Je(2,"span",64),K(3,"span"),Se(4,"Educaci\xF3n Superior (bajo)"),ie()(),K(5,"div",45),Je(6,"span",65),K(7,"span"),Se(8,"Educaci\xF3n Superior (medio)"),ie()(),K(9,"div",45),Je(10,"span",66),K(11,"span"),Se(12,"Educaci\xF3n Superior (alto)"),ie()()())}function k9(r,t){if(r&1&&(K(0,"mat-option",67),Se(1),ie()),r&2){let e=t.$implicit;yt("value",e),Be(),Ci(e)}}function P9(r,t){if(r&1&&(K(0,"mat-button-toggle",67),Se(1),ie()),r&2){let e=t.$implicit;yt("value",e.value),Be(),Ci(e.label)}}function D9(r,t){if(r&1&&(K(0,"mat-button-toggle",67),Se(1),ie()),r&2){let e=t.$implicit;yt("value",e.value),Be(),Ci(e.label)}}function R9(r,t){if(r&1&&(K(0,"mat-card-subtitle"),Se(1),ie()),r&2){let e=At();Be(),$r("Comuna: ",e.selectedComuna,"")}}function O9(r,t){r&1&&(K(0,"mat-card-subtitle"),Se(1,"Todas las comunas"),ie())}function L9(r,t){if(r&1&&(K(0,"div",32),Je(1,"span",68),K(2,"span"),Se(3),fo(4,"number"),ie()()),r&2){let e=t.$implicit,o=At();Be(),Ho("background-color",o.getAgeColor(e.value)),Be(2),Ku("",e.label,": ",$o(4,4,o.ageDistribution[e.value],"1.1-1"),"%")}}var eb=class r{constructor(t){this.http=t}map;data=[];popup=null;selectedFeature=null;isLoading=!0;error=!1;selectedComuna="";selectedAgeGroup="";selectedEducationLevel="";internetAccessFilter="all";zoomLevel=9;comunas=[];ageGroups=[{value:"0-14",label:"0-14 a\xF1os"},{value:"15-59",label:"15-59 a\xF1os"},{value:"60+",label:"60+ a\xF1os"}];educationLevels=[{value:"primary",label:"Primaria"},{value:"secondary",label:"Secundaria"},{value:"higher",label:"Superior"}];ngOnInit(){this.fetchData()}ngOnDestroy(){this.map&&this.map.remove(),this.popup&&this.popup.remove(),this.selectedFeature=null}get filteredData(){let t=this.data;return this.selectedComuna&&(t=t.filter(e=>e.nmb_lc_cm===this.selectedComuna)),this.internetAccessFilter==="high"?t=t.filter(e=>e.tp19_inte1/(e.tvivienda||1)>.7):this.internetAccessFilter==="low"&&(t=t.filter(e=>e.tp19_inte1/(e.tvivienda||1)<=.3)),t}get totalPopulation(){return this.filteredData.reduce((t,e)=>t+(e.tp27_perso||0),0)}get totalHomes(){return this.filteredData.reduce((t,e)=>t+(e.tvivienda||0),0)}get internetAccessPercentage(){let t=this.filteredData.reduce((o,a)=>o+(a.tp19_inte1||0),0),e=this.totalHomes||1;return t/e*100}get waterAccessPercentage(){let t=this.filteredData.reduce((o,a)=>o+(a.tp19_acu_1||0),0),e=this.totalHomes||1;return t/e*100}get gasAccessPercentage(){let t=this.filteredData.reduce((o,a)=>o+(a.tp19_gas_1||0),0),e=this.totalHomes||1;return t/e*100}get ageDistribution(){let t={"0-14":0,"15-59":0,"60+":0};this.filteredData.forEach(o=>{t["0-14"]+=(o.tp34_1_eda||0)+(o.tp34_2_eda||0)+(o.tp34_3_eda||0),t["15-59"]+=(o.tp34_4_eda||0)+(o.tp34_5_eda||0)+(o.tp34_6_eda||0),t["60+"]+=(o.tp34_7_eda||0)+(o.tp34_8_eda||0)+(o.tp34_9_eda||0)});let e=t["0-14"]+t["15-59"]+t["60+"]||1;return{"0-14":t["0-14"]/e*100,"15-59":t["15-59"]/e*100,"60+":t["60+"]/e*100}}get educationDistribution(){let t={primary:0,secondary:0,higher:0,other:0};this.filteredData.forEach(o=>{t.primary+=o.tp51primar||0,t.secondary+=o.tp51secund||0,t.higher+=o.tp51superi||0,t.other+=o.tp51_99_ed||0});let e=t.primary+t.secondary+t.higher+t.other||1;return{primary:t.primary/e*100,secondary:t.secondary/e*100,higher:t.higher/e*100,other:t.other/e*100}}fetchData(){this.isLoading=!0,this.error=!1,this.http.get("http://flask-fiware.apps.preprodalcaldia.medellin.gov.co/api/wifi-dane/all").subscribe({next:t=>{this.data=t,this.processData(),this.initMap(),this.isLoading=!1},error:t=>{console.error("Error fetching data:",t),this.error=!0,this.isLoading=!1}})}processData(){let t=new Set;this.data.forEach(e=>t.add(e.nmb_lc_cm)),this.comunas=Array.from(t).sort()}initMap(){this.map=new tb.Map({container:"map",style:"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",center:[-75.5454,6.2512],zoom:this.zoomLevel}),this.map.on("load",()=>{this.addDataToMap()}),this.map.on("zoomend",()=>{this.zoomLevel=this.map.getZoom(),this.updateMapLayers()})}addDataToMap(){let t={type:"FeatureCollection",features:this.data.map((e,o)=>({type:"Feature",id:o,geometry:{type:"Point",coordinates:[e.longitud,e.latitud]},properties:si(ft({},e),{populationDensity:(e.tp27_perso||0)/(e.area||1),internetAccess:(e.tp19_inte1||0)/(e.tvivienda||1)*100,waterAccess:(e.tp19_acu_1||0)/(e.tvivienda||1)*100,gasAccess:(e.tp19_gas_1||0)/(e.tvivienda||1)*100,educationPrimary:(e.tp51primar||0)/(e.tp27_perso||1)*100,educationSecondary:(e.tp51secund||0)/(e.tp27_perso||1)*100,educationHigher:(e.tp51superi||0)/(e.tp27_perso||1)*100,elderlyPercentage:(e.tp34_7_eda+e.tp34_8_eda+e.tp34_9_eda||0)/(e.tp27_perso||1)*100})}))};this.map.addSource("wifi-data",{type:"geojson",data:t,generateId:!0}),this.map.addLayer({id:"wifi-points",type:"circle",source:"wifi-data",paint:{"circle-radius":["interpolate",["linear"],["zoom"],10,6,15,12],"circle-color":["case",["boolean",["feature-state","selected"],!1],"#ff00ff",["interpolate",["linear"],["get","internetAccess"],0,"#ff0000",50,"#ffff00",100,"#00ff00"]],"circle-opacity":.9,"circle-stroke-width":["case",["boolean",["feature-state","selected"],!1],3,1],"circle-stroke-color":"#ffffff"}}),this.map.on("click","wifi-points",e=>{e.features&&e.features.length>0&&this.showPopup(e.features[0])}),this.map.on("click",e=>{this.map.queryRenderedFeatures(e.point,{layers:["wifi-points"]}).length===0&&this.popup&&(this.clearSelectedFeature(),this.popup.remove(),this.popup=null)}),this.map.on("mouseenter","wifi-points",()=>{this.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave","wifi-points",()=>{this.map.getCanvas().style.cursor=""})}clearSelectedFeature(){this.selectedFeature&&(this.map.getLayer("wifi-points")&&this.map.setFeatureState({source:"wifi-data",id:this.selectedFeature.id},{selected:!1}),this.selectedFeature=null)}showPopup(t){if(this.clearSelectedFeature(),!t.geometry||!t.geometry.coordinates){console.error("Feature geometry is invalid:",t);return}this.selectedFeature=t,this.map.setFeatureState({source:"wifi-data",id:t.id},{selected:!0}),this.popup&&this.popup.remove();let e=t.properties||{},o=t.geometry.coordinates.slice(),a=`
  <style>
    .map-popup {
      position: relative;
      background: #fff;
      max-width: 300px;
      width: 100%;
      padding: 16px;
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
      font-family: 'Segoe UI', sans-serif;
      font-size: 14px;
      color: #333;
      animation: popupScaleIn 0.3s ease-out;
      transform-style: preserve-3d;
    }

    .map-popup h4 {
      margin: 0 0 10px 0;
      color: #1976d2;
      font-size: 18px;
      font-weight: 600;
      text-align: center;
    }

    .map-popup p {
      margin: 6px 0;
      text-align: center;
    }

    .map-popup strong {
      display: inline-block;
      margin-top: 4px;
    }

    .map-popup .close-btn {
      position: absolute;
      top: 8px;
      right: 12px;
      background: transparent;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: #666;
      transition: color 0.2s;
    }

    .map-popup .close-btn:hover {
      color: #000;
    }

    @keyframes popupScaleIn {
      0% {
        transform: scale(0.9) rotateX(-10deg);
        opacity: 0;
      }
      100% {
        transform: scale(1) rotateX(0deg);
        opacity: 1;
      }
    }
  </style>

  <div class="map-popup">
    <button class="close-btn" onclick="this.closest('.maplibregl-popup').remove()">\u274E</button>
    <h4>Manzana ${e.cod_dane_a||"N/A"}</h4>
    <p><strong>Comuna:</strong> ${e.nmb_lc_cm||"N/A"}</p>
    <p><strong>Poblaci\xF3n:</strong> ${e.tp27_perso||"0"}</p>
    <p><strong>Densidad:</strong> ${(e.populationDensity||0).toFixed(2)} pers/m\xB2</p>
    <p><strong>Acceso a internet:</strong> ${(e.internetAccess||0).toFixed(1)}%</p>
    <p><strong>Acceso a agua:</strong> ${(e.waterAccess||0).toFixed(1)}%</p>
    <p><strong>Acceso a gas:</strong> ${(e.gasAccess||0).toFixed(1)}%</p>
    <p><strong>Adultos mayores (60+):</strong> ${(e.elderlyPercentage||0).toFixed(1)}%</p>
    <strong>Educaci\xF3n:</strong><br>
    - Primaria: ${(e.educationPrimary||0).toFixed(1)}%<br>
    - Secundaria: ${(e.educationSecondary||0).toFixed(1)}%<br>
    - Superior: ${(e.educationHigher||0).toFixed(1)}%
  </div>
`;this.popup=new tb.Popup({closeButton:!0,closeOnClick:!1,anchor:"top",offset:25}).setLngLat(o).setHTML(a).addTo(this.map),this.popup.on("close",()=>{this.clearSelectedFeature(),this.popup=null})}updateMapLayers(){if(!this.map.getLayer("wifi-points"))return;let t=["interpolate",["linear"],["get","internetAccess"],0,"#ff0000",50,"#ffff00",100,"#00ff00"];this.selectedAgeGroup==="0-14"?t=["interpolate",["linear"],["/",["+",["get","tp34_1_eda"],["get","tp34_2_eda"],["get","tp34_3_eda"]],["get","tp27_perso"]],0,"#ffebee",.5,"#ffcdd2",1,"#ef9a9a"]:this.selectedAgeGroup==="15-59"?t=["interpolate",["linear"],["/",["+",["get","tp34_4_eda"],["get","tp34_5_eda"],["get","tp34_6_eda"]],["get","tp27_perso"]],0,"#e8f5e9",.5,"#c8e6c9",1,"#a5d6a7"]:this.selectedAgeGroup==="60+"?t=["interpolate",["linear"],["/",["+",["get","tp34_7_eda"],["get","tp34_8_eda"],["get","tp34_9_eda"]],["get","tp27_perso"]],0,"#e3f2fd",.5,"#bbdefb",1,"#90caf9"]:this.selectedEducationLevel==="primary"?t=["interpolate",["linear"],["get","educationPrimary"],0,"#fff3e0",50,"#ffe0b2",100,"#ffcc80"]:this.selectedEducationLevel==="secondary"?t=["interpolate",["linear"],["get","educationSecondary"],0,"#f3e5f5",50,"#e1bee7",100,"#ce93d8"]:this.selectedEducationLevel==="higher"&&(t=["interpolate",["linear"],["get","educationHigher"],0,"#e0f7fa",50,"#b2ebf2",100,"#80deea"]),this.map.setPaintProperty("wifi-points","circle-color",t),this.selectedComuna?this.map.setFilter("wifi-points",["==",["get","nmb_lc_cm"],this.selectedComuna]):this.map.setFilter("wifi-points",null),this.map.setPaintProperty("wifi-points","circle-radius",["interpolate",["linear"],["zoom"],10,3,15,8])}applyFilters(){this.updateMapLayers()}resetFilters(){this.selectedComuna="",this.selectedAgeGroup="",this.selectedEducationLevel="",this.internetAccessFilter="all",this.applyFilters()}getAgeColor(t){switch(t){case"0-14":return"#ef9a9a";case"15-59":return"#a5d6a7";case"60+":return"#90caf9";default:return"#bdbdbd"}}static \u0275fac=function(e){return new(e||r)(wi($a))};static \u0275cmp=Vt({type:r,selectors:[["app-wifi-maps"]],decls:143,vars:67,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],[1,"dashboard-container"],[1,"map-container"],["class","loading-overlay",4,"ngIf"],["class","error-overlay",4,"ngIf"],["id","map",1,"map"],[1,"map-legend"],[4,"ngIf"],[1,"controls-container"],[1,"filters-card"],[1,"filter-group"],["appearance","outline"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngModelChange","change","ngModel"],["value","all"],["value","high"],["value","low"],["mat-raised-button","","color","warn",3,"click"],[1,"stats-card"],[1,"stat-item"],[1,"charts-card"],[1,"chart-container"],[1,"chart-legend"],["class","chart-legend-item",4,"ngFor","ngForOf"],[1,"chart-bar"],[1,"chart-bar-segment",2,"background-color","#ef9a9a"],[1,"chart-bar-segment",2,"background-color","#a5d6a7"],[1,"chart-bar-segment",2,"background-color","#90caf9"],[1,"chart-legend-item"],[1,"chart-legend-color",2,"background-color","#ffcc80"],[1,"chart-legend-color",2,"background-color","#ce93d8"],[1,"chart-legend-color",2,"background-color","#80deea"],[1,"chart-legend-color",2,"background-color","#bdbdbd"],[1,"chart-bar-segment",2,"background-color","#ffcc80"],[1,"chart-bar-segment",2,"background-color","#ce93d8"],[1,"chart-bar-segment",2,"background-color","#80deea"],[1,"chart-bar-segment",2,"background-color","#bdbdbd"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/cd625ad1-09dd-4109-be18-34cffbf9ab79/medellin-dane-geomanzanas?orgId=1&kiosk`,"allowfullscreen","",1,"large-iframe"],[1,"loading-overlay"],[1,"error-overlay"],["mat-raised-button","","color","primary",3,"click"],[1,"legend-item"],[1,"legend-color",2,"background-color","#ff0000"],[1,"legend-color",2,"background-color","#ffff00"],[1,"legend-color",2,"background-color","#00ff00"],[1,"legend-color",2,"background-color","#ffebee"],[1,"legend-color",2,"background-color","#ffcdd2"],[1,"legend-color",2,"background-color","#ef9a9a"],[1,"legend-color",2,"background-color","#e8f5e9"],[1,"legend-color",2,"background-color","#c8e6c9"],[1,"legend-color",2,"background-color","#a5d6a7"],[1,"legend-color",2,"background-color","#e3f2fd"],[1,"legend-color",2,"background-color","#bbdefb"],[1,"legend-color",2,"background-color","#90caf9"],[1,"legend-color",2,"background-color","#fff3e0"],[1,"legend-color",2,"background-color","#ffe0b2"],[1,"legend-color",2,"background-color","#ffcc80"],[1,"legend-color",2,"background-color","#f3e5f5"],[1,"legend-color",2,"background-color","#e1bee7"],[1,"legend-color",2,"background-color","#ce93d8"],[1,"legend-color",2,"background-color","#e0f7fa"],[1,"legend-color",2,"background-color","#b2ebf2"],[1,"legend-color",2,"background-color","#80deea"],[3,"value"],[1,"chart-legend-color"]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Ciudad Inteligente - Puntos Wifi"),ie(),K(2,"div",1),Je(3,"div",2),ie(),Je(4,"div",1),K(5,"div",3)(6,"div",4),Ot(7,x9,4,0,"div",5)(8,w9,7,0,"div",6),Je(9,"div",7),K(10,"div",8)(11,"h4"),Se(12,"Leyenda"),ie(),Ot(13,C9,13,0,"div",9)(14,E9,13,0,"div",9)(15,S9,13,0,"div",9)(16,T9,13,0,"div",9)(17,M9,13,0,"div",9)(18,I9,13,0,"div",9)(19,A9,13,0,"div",9),ie()(),K(20,"div",10)(21,"mat-card",11)(22,"mat-card-header")(23,"mat-card-title"),Se(24,"Filtros"),ie()(),K(25,"mat-card-content")(26,"div",12)(27,"mat-form-field",13)(28,"mat-label"),Se(29,"Comuna"),ie(),K(30,"mat-select",14),Ps("ngModelChange",function(s){return ks(o.selectedComuna,s)||(o.selectedComuna=s),s}),Qt("selectionChange",function(){return o.applyFilters()}),K(31,"mat-option",15),Se(32,"Todas las comunas"),ie(),Ot(33,k9,2,2,"mat-option",16),ie()()(),K(34,"div",12)(35,"h4"),Se(36,"Grupo etario"),ie(),K(37,"mat-button-toggle-group",17),Ps("ngModelChange",function(s){return ks(o.selectedAgeGroup,s)||(o.selectedAgeGroup=s),s}),Qt("change",function(){return o.applyFilters()}),K(38,"mat-button-toggle",15),Se(39,"Todos"),ie(),Ot(40,P9,2,2,"mat-button-toggle",16),ie()(),K(41,"div",12)(42,"h4"),Se(43,"Nivel educativo"),ie(),K(44,"mat-button-toggle-group",17),Ps("ngModelChange",function(s){return ks(o.selectedEducationLevel,s)||(o.selectedEducationLevel=s),s}),Qt("change",function(){return o.applyFilters()}),K(45,"mat-button-toggle",15),Se(46,"Todos"),ie(),Ot(47,D9,2,2,"mat-button-toggle",16),ie()(),K(48,"div",12)(49,"h4"),Se(50,"Acceso a internet"),ie(),K(51,"mat-button-toggle-group",17),Ps("ngModelChange",function(s){return ks(o.internetAccessFilter,s)||(o.internetAccessFilter=s),s}),Qt("change",function(){return o.applyFilters()}),K(52,"mat-button-toggle",18),Se(53,"Todos"),ie(),K(54,"mat-button-toggle",19),Se(55,"Alto (>70%)"),ie(),K(56,"mat-button-toggle",20),Se(57,"Bajo (\u226430%)"),ie()()(),K(58,"div",12)(59,"button",21),Qt("click",function(){return o.resetFilters()}),Se(60,"Reiniciar filtros"),ie()()()(),K(61,"mat-card",22)(62,"mat-card-header")(63,"mat-card-title"),Se(64,"Estad\xEDsticas"),ie(),Ot(65,R9,2,1,"mat-card-subtitle",9)(66,O9,2,0,"mat-card-subtitle",9),ie(),K(67,"mat-card-content")(68,"div",23)(69,"h4"),Se(70,"Poblaci\xF3n total"),ie(),K(71,"p"),Se(72),fo(73,"number"),ie()(),K(74,"div",23)(75,"h4"),Se(76,"Viviendas totales"),ie(),K(77,"p"),Se(78),fo(79,"number"),ie()(),K(80,"div",23)(81,"h4"),Se(82,"Acceso a internet"),ie(),K(83,"p"),Se(84),fo(85,"number"),ie()(),K(86,"div",23)(87,"h4"),Se(88,"Acceso a agua potable"),ie(),K(89,"p"),Se(90),fo(91,"number"),ie()(),K(92,"div",23)(93,"h4"),Se(94,"Acceso a gas natural"),ie(),K(95,"p"),Se(96),fo(97,"number"),ie()()()(),K(98,"mat-card",24)(99,"mat-card-header")(100,"mat-card-title"),Se(101,"Distribuci\xF3n"),ie()(),K(102,"mat-card-content")(103,"div",25)(104,"h4"),Se(105,"Distribuci\xF3n por edad"),ie(),K(106,"div",26),Ot(107,L9,5,7,"div",27),ie(),K(108,"div",28),Je(109,"div",29)(110,"div",30)(111,"div",31),ie()(),K(112,"div",25)(113,"h4"),Se(114,"Nivel educativo"),ie(),K(115,"div",26)(116,"div",32),Je(117,"span",33),K(118,"span"),Se(119),fo(120,"number"),ie()(),K(121,"div",32),Je(122,"span",34),K(123,"span"),Se(124),fo(125,"number"),ie()(),K(126,"div",32),Je(127,"span",35),K(128,"span"),Se(129),fo(130,"number"),ie()(),K(131,"div",32),Je(132,"span",36),K(133,"span"),Se(134),fo(135,"number"),ie()()(),K(136,"div",28),Je(137,"div",37)(138,"div",38)(139,"div",39)(140,"div",40),ie()()()()()(),K(141,"div",1),Je(142,"iframe",41),ie()),e&2&&(Be(7),yt("ngIf",o.isLoading),Be(),yt("ngIf",o.error),Be(5),yt("ngIf",!o.selectedAgeGroup&&!o.selectedEducationLevel),Be(),yt("ngIf",o.selectedAgeGroup==="0-14"),Be(),yt("ngIf",o.selectedAgeGroup==="15-59"),Be(),yt("ngIf",o.selectedAgeGroup==="60+"),Be(),yt("ngIf",o.selectedEducationLevel==="primary"),Be(),yt("ngIf",o.selectedEducationLevel==="secondary"),Be(),yt("ngIf",o.selectedEducationLevel==="higher"),Be(11),As("ngModel",o.selectedComuna),Be(3),yt("ngForOf",o.comunas),Be(4),As("ngModel",o.selectedAgeGroup),Be(3),yt("ngForOf",o.ageGroups),Be(4),As("ngModel",o.selectedEducationLevel),Be(3),yt("ngForOf",o.educationLevels),Be(4),As("ngModel",o.internetAccessFilter),Be(14),yt("ngIf",o.selectedComuna),Be(),yt("ngIf",!o.selectedComuna),Be(6),Ci(By(73,42,o.totalPopulation)),Be(6),Ci(By(79,44,o.totalHomes)),Be(6),$r("",$o(85,46,o.internetAccessPercentage,"1.1-1"),"%"),Be(6),$r("",$o(91,49,o.waterAccessPercentage,"1.1-1"),"%"),Be(6),$r("",$o(97,52,o.gasAccessPercentage,"1.1-1"),"%"),Be(11),yt("ngForOf",o.ageGroups),Be(2),Ho("width",o.ageDistribution["0-14"],"%"),Be(),Ho("width",o.ageDistribution["15-59"],"%"),Be(),Ho("width",o.ageDistribution["60+"],"%"),Be(8),$r("Primaria: ",$o(120,55,o.educationDistribution.primary,"1.1-1"),"%"),Be(5),$r("Secundaria: ",$o(125,58,o.educationDistribution.secondary,"1.1-1"),"%"),Be(5),$r("Superior: ",$o(130,61,o.educationDistribution.higher,"1.1-1"),"%"),Be(5),$r("Otros: ",$o(135,64,o.educationDistribution.other,"1.1-1"),"%"),Be(3),Ho("width",o.educationDistribution.primary,"%"),Be(),Ho("width",o.educationDistribution.secondary,"%"),Be(),Ho("width",o.educationDistribution.higher,"%"),Be(),Ho("width",o.educationDistribution.other,"%"))},dependencies:[Wo,Xc,vl,Vg,Wh,cu,dd,ck,nk,sk,lk,ak,ok,Qc,Fk,Rk,X_,Nk,T_,zk,hu,du,Uk,xw,K_,J_,Q_],styles:[".dashboard-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:70vw;height:70vh;margin-left:25%;overflow:hidden}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]{width:444px;background:#f5f5f5;padding:16px;overflow-y:auto;max-height:100vh;z-index:10;box-shadow:2px 0 6px #0000001a;flex-shrink:0}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-bottom:16px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{margin-bottom:16px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:500}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{flex:1}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{margin-bottom:16px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-weight:500;color:#0009;font-size:14px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{margin-bottom:24px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:500}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]{margin-bottom:8px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .chart-legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:4px;font-size:12px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]   .chart-legend-item[_ngcontent-%COMP%]   .chart-legend-color[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;margin-right:8px;border-radius:2px}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-bar[_ngcontent-%COMP%]{height:20px;background:#e0e0e0;border-radius:4px;overflow:hidden;display:flex}.dashboard-container[_ngcontent-%COMP%]   .controls-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-bar[_ngcontent-%COMP%]   .chart-bar-segment[_ngcontent-%COMP%]{height:100%}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]{flex:1;position:relative;display:flex;align-items:stretch;justify-content:center}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:0}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{width:100%;height:100%;min-height:500px}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%], .dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .error-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffffff2;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .error-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:red;margin-bottom:16px}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:20px;background:#fff;padding:10px;border-radius:4px;box-shadow:0 2px 4px #0003;z-index:10;max-width:250px}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:4px}.dashboard-container[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-color[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;margin-right:8px;border-radius:50%;border:1px solid #ccc}","body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}.small-iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.large-iframe[_ngcontent-%COMP%]{height:700px;border:none}"]})};var ib=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-vamosmedmap"]],decls:9,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/vm_ma/vamosmed-map?orgId=1&from=1740220806985&to=1740393606985&viewPanel=3&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/vm_ma/vamosmed-map?orgId=1&from=1740220846838&to=1740393646839&viewPanel=4&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/vm_ma/vamosmed-map?orgId=1&from=1740220882021&to=1740393682021&viewPanel=26&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/vm_ma/vamosmed-map?orgId=1&from=1740221071260&to=1740393871260&viewPanel=27&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Ciudad Inteligente - VamosMed"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),ie()(),K(7,"div",1),Je(8,"iframe",6),ie())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:500px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var Sw=NC(Ew());var N9=["map"];function F9(r,t){r&1&&(K(0,"div",28),Se(1," Cargando sensores... "),ie())}function z9(r,t){if(r&1){let e=Tr();K(0,"div",29),Se(1),K(2,"button",30),Qt("click",function(){Ri(e);let a=At();return Oi(a.loadSensors())}),Se(3,"Reintentar"),ie()()}if(r&2){let e=At();Be(),$r(" ",e.errorMessage," ")}}function B9(r,t){if(r&1&&(K(0,"option",35),Se(1),ie()),r&2){let e=t.$implicit,o=At(2);yt("value",e.entity_id),Be(),Ku(" ",o.getShortId(e.entity_id)," - ",e.laeq_slow," dB ")}}function V9(r,t){if(r&1&&(K(0,"div",36),Se(1),ie()),r&2){let e=At(2);Be(),$r(" Sensor seleccionado: ",e.getShortId(e.selectedSensor)," ")}}function U9(r,t){if(r&1){let e=Tr();K(0,"div")(1,"select",31),Ps("ngModelChange",function(a){Ri(e);let s=At();return ks(s.selectedSensor,a)||(s.selectedSensor=a),Oi(a)}),Qt("change",function(){Ri(e);let a=At();return Oi(a.onSensorSelect())}),K(2,"option",32),Se(3,"Selecciona un sensor"),ie(),Ot(4,B9,2,3,"option",33),ie(),Ot(5,V9,2,1,"div",34),ie()}if(r&2){let e=At();Be(),As("ngModel",e.selectedSensor),Be(3),yt("ngForOf",e.sensors),Be(),yt("ngIf",e.selectedSensor)}}function j9(r,t){if(r&1&&(K(0,"div",29),Se(1),ie()),r&2){let e=At();Be(),$r(" ",e.errorHistoric," ")}}function q9(r,t){if(r&1&&(K(0,"div",37)(1,"h3"),Se(2),fo(3,"number"),ie(),Je(4,"div",38),ie()),r&2){let e=At();Be(2),$r("Resultados hist\xF3ricos (promedio: ",$o(3,1,e.historicAvg,"1.1-1")," dB)")}}function H9(r,t){r&1&&(K(0,"div",39),Je(1,"mat-spinner"),K(2,"p"),Se(3,"Cargando datos de sensores..."),ie()())}function $9(r,t){if(r&1){let e=Tr();K(0,"div",40)(1,"mat-icon"),Se(2,"error_outline"),ie(),K(3,"p"),Se(4,"Error al cargar los datos de los sensores"),ie(),K(5,"button",41),Qt("click",function(){Ri(e);let a=At();return Oi(a.loadSensorData())}),Se(6,"Reintentar"),ie()()}}function G9(r,t){if(r&1&&(K(0,"div",46)(1,"span",47),Se(2,"Promedio hist\xF3rico:"),ie(),K(3,"span",48),Se(4),fo(5,"number"),ie()()),r&2){let e=At(2);Be(4),$r("",$o(5,1,e.historicAvg,"1.1-1")," dB")}}function W9(r,t){if(r&1){let e=Tr();K(0,"div",42)(1,"div",43)(2,"h3"),Se(3,"Detalles del Sensor"),ie(),K(4,"button",44),Qt("click",function(){Ri(e);let a=At();return Oi(a.closeDetails())}),K(5,"mat-icon"),Se(6,"close"),ie()()(),K(7,"div",45)(8,"div",46)(9,"span",47),Se(10,"ID:"),ie(),K(11,"span",48),Se(12),ie()(),K(13,"div",46)(14,"span",47),Se(15,"Nivel de Ruido:"),ie(),K(16,"span",48),Se(17),ie()(),K(18,"div",46)(19,"span",47),Se(20,"\xDAltima actualizaci\xF3n:"),ie(),K(21,"span",48),Se(22),fo(23,"date"),ie()(),Ot(24,G9,6,4,"div",49),ie()()}if(r&2){let e=At();Be(12),Ci(e.getShortId(e.selectedSensorDetails.id)),Be(5),Ku("",e.selectedSensorDetails.laeq," dB (",e.selectedSensorDetails.levelName,")"),Be(5),Ci($o(23,5,e.selectedSensorDetails.lastUpdate,"medium")),Be(2),yt("ngIf",e.historicAvg)}}var rb=class r{constructor(t){this.http=t}mapContainer;map=null;apiUrl="http://flask-fiware.apps.preprodalcaldia.medellin.gov.co/api/sensores-ruido";sensors=[];selectedSensor="";selectedSensorDetails=null;historicData=[];historicAvg=0;desdeFecha="";hastaFecha="";loading=!0;isLoading=!0;loadingHistoric=!1;error=!1;errorMessage="";errorHistoric=null;ngOnInit(){this.loadSensors(),this.setDefaultDates()}ngAfterViewInit(){this.initMap()}initMap(){this.map=new Sw.default.Map({container:this.mapContainer.nativeElement,style:"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",center:[-75.573,6.244],zoom:14}),this.map.addControl(new Sw.default.NavigationControl),this.map.on("load",()=>this.addSensorsToMap())}loadSensors(){this.isLoading=!0,this.errorMessage="",this.http.get(this.apiUrl).subscribe({next:t=>{this.sensors=t.map(e=>si(ft({},e),{noiseLevel:this.getNoiseLevel(e.laeq_slow),levelName:this.translateLevel(this.getNoiseLevel(e.laeq_slow))})),this.isLoading=!1,this.loadSensorData()},error:t=>{this.errorMessage="Error al cargar los sensores. Por favor intenta nuevamente.",this.isLoading=!1,console.error("Error fetching sensors:",t)}})}loadSensorData(){this.loading=!0,this.error=!1,this.http.get(this.apiUrl).subscribe({next:t=>{this.sensors=t.map(e=>si(ft({},e),{noiseLevel:this.getNoiseLevel(e.laeq_slow),levelName:this.translateLevel(this.getNoiseLevel(e.laeq_slow))})),this.addSensorsToMap(),this.loading=!1},error:t=>{console.error("Error loading sensor data:",t),this.error=!0,this.loading=!1}})}setDefaultDates(){let t=new Date,e=new Date;e.setDate(t.getDate()-7),this.desdeFecha=this.formatDate(e),this.hastaFecha=this.formatDate(t)}formatDate(t){return t.toISOString().split("T")[0]}onSensorSelect(){if(!this.selectedSensor)return;let t=this.sensors.find(e=>e.entity_id===this.selectedSensor);t&&(this.selectedSensorDetails={id:t.entity_id,laeq:t.laeq_slow,levelName:t.levelName,lastUpdate:t.fecha_ultimo_registro},this.map&&this.map.flyTo({center:[parseFloat(t.longitud),parseFloat(t.latitud)],zoom:16}),this.historicData=[],this.historicAvg=0)}getHistoricData(){if(!this.selectedSensor||!this.desdeFecha||!this.hastaFecha){this.errorHistoric="Por favor selecciona un sensor y ambas fechas";return}this.loadingHistoric=!0,this.errorHistoric=null;let t=`${this.desdeFecha} 00:00:00`,e=`${this.hastaFecha} 23:59:59`;this.getHistoricoNoise(this.selectedSensor,t,e).subscribe({next:o=>{this.historicData=o,this.calculateHistoricAvg(),this.updateMapWithHistoricalData(),this.loadingHistoric=!1},error:o=>{this.errorHistoric="Error al cargar datos hist\xF3ricos",this.loadingHistoric=!1,console.error("Error fetching historic data:",o)}})}calculateHistoricAvg(){if(this.historicData.length===0){this.historicAvg=0;return}let t=this.historicData.reduce((e,o)=>e+o.laeq_slow,0);this.historicAvg=parseFloat((t/this.historicData.length).toFixed(1))}updateMapWithHistoricalData(){if(!this.map||!this.map.isStyleLoaded())return;let t=this.sensors.findIndex(e=>e.entity_id===this.selectedSensor);t!==-1&&(this.sensors[t]=si(ft({},this.sensors[t]),{laeq_slow:this.historicAvg,noiseLevel:this.getNoiseLevel(this.historicAvg),levelName:this.translateLevel(this.getNoiseLevel(this.historicAvg))}),this.addSensorsToMap(),this.selectedSensorDetails&&(this.selectedSensorDetails=si(ft({},this.selectedSensorDetails),{laeq:this.historicAvg,levelName:this.translateLevel(this.getNoiseLevel(this.historicAvg))})))}getHistoricoNoise(t,e,o){let a=new xl().set("desde",e).set("hasta",o),s=`${this.apiUrl}/${encodeURIComponent(t)}/historico`;return this.http.get(s,{params:a})}addSensorsToMap(){!this.map||!this.map.isStyleLoaded()||(this.map.getSource("sensors")&&(this.map.removeLayer("sensors-circle"),this.map.removeLayer("sensors-labels"),this.map.removeSource("sensors")),this.map.addSource("sensors",{type:"geojson",data:{type:"FeatureCollection",features:this.sensors.map(t=>({type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(t.longitud),parseFloat(t.latitud)]},properties:{id:t.entity_id,laeq:t.laeq_slow,level:t.noiseLevel,levelName:t.levelName,lastUpdate:t.fecha_ultimo_registro}}))}}),this.map.addLayer({id:"sensors-circle",type:"circle",source:"sensors",paint:{"circle-radius":["case",["==",["get","id"],this.selectedSensor],12,8],"circle-color":["match",["get","level"],"low","#4CAF50","moderate","#FFC107","high","#F44336","#9E9E9E"],"circle-stroke-width":2,"circle-stroke-color":"#ffffff"}}),this.map.addLayer({id:"sensors-labels",type:"symbol",source:"sensors",layout:{"text-field":["get","laeq"],"text-size":12,"text-offset":[0,1.5]},paint:{"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":1}}),this.map.on("click","sensors-circle",t=>{let e=t.features[0].properties;this.selectedSensor=e.id,this.selectedSensorDetails={id:e.id,laeq:e.laeq,levelName:e.levelName,lastUpdate:e.lastUpdate},this.scrollToDetails()}),this.map.on("mouseenter","sensors-circle",()=>{this.map&&(this.map.getCanvas().style.cursor="pointer")}),this.map.on("mouseleave","sensors-circle",()=>{this.map&&(this.map.getCanvas().style.cursor="")}))}getNoiseLevel(t){return t<55?"low":t<=70?"moderate":"high"}translateLevel(t){return{low:"Bajo",moderate:"Moderado",high:"Alto"}[t]||t}getShortId(t){return t.split(":").pop()||t}scrollToDetails(){let t=document.getElementById("sensor-details");t&&t.scrollIntoView({behavior:"smooth"})}closeDetails(){this.selectedSensorDetails=null}static \u0275fac=function(e){return new(e||r)(wi($a))};static \u0275cmp=Vt({type:r,selectors:[["app-noise-sensor-map"]],viewQuery:function(e,o){if(e&1&&Hr(N9,5),e&2){let a;nr(a=or())&&(o.mapContainer=a.first)}},decls:53,vars:13,consts:[["map",""],[1,"container"],[1,"page-title"],[1,"iframe-container"],[1,"date-controls"],[1,"sensor-container"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[4,"ngIf"],["for","desde"],["type","date","id","desde",3,"ngModelChange","ngModel"],["for","hasta"],["type","date","id","hasta",3,"ngModelChange","ngModel"],[3,"click","disabled"],["class","historic-results",4,"ngIf"],[1,"map-container"],["class","loading-overlay",4,"ngIf"],["class","error-overlay",4,"ngIf"],[1,"map-layout"],[1,"half-layout"],["id","noise-sensor-map"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/f36b2714-61d2-45cd-91ac-58b622840b4e/sensores-ruido-2025?orgId=1&kiosk=tv`,"allowfullscreen","",2,"width","90%","height","100%","border","none","border-radius","12px"],["class","details-panel",4,"ngIf"],[1,"map-legend"],[1,"legend-item"],[1,"legend-color","low"],[1,"legend-color","moderate"],[1,"legend-color","high"],[1,"loading"],[1,"error"],[3,"click"],[1,"sensor-select",3,"ngModelChange","change","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","selected-info",4,"ngIf"],[3,"value"],[1,"selected-info"],[1,"historic-results"],[1,"chart-container"],[1,"loading-overlay"],[1,"error-overlay"],["mat-raised-button","","color","primary",3,"click"],[1,"details-panel"],[1,"panel-header"],["mat-icon-button","",3,"click"],["id","sensor-details",1,"sensor-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],["class","detail-row",4,"ngIf"]],template:function(e,o){if(e&1){let a=Tr();K(0,"div",1)(1,"h2",2),Se(2,"Ciudad Inteligente - Sensores de ruido"),ie(),K(3,"div",3)(4,"h3"),Se(5),ie(),K(6,"div",4)(7,"div",5)(8,"h2"),Se(9,"Selecciona un sensor de ruido"),ie(),Ot(10,F9,2,0,"div",6)(11,z9,4,1,"div",7)(12,U9,6,3,"div",8),ie(),K(13,"div")(14,"label",9),Se(15,"Desde:"),ie(),K(16,"input",10),Ps("ngModelChange",function(_){return Ri(a),ks(o.desdeFecha,_)||(o.desdeFecha=_),Oi(_)}),ie()(),K(17,"div")(18,"label",11),Se(19,"Hasta:"),ie(),K(20,"input",12),Ps("ngModelChange",function(_){return Ri(a),ks(o.hastaFecha,_)||(o.hastaFecha=_),Oi(_)}),ie()(),K(21,"div")(22,"button",13),Qt("click",function(){return Ri(a),Oi(o.getHistoricData())}),Se(23),ie()()(),Ot(24,j9,2,1,"div",7)(25,q9,5,4,"div",14),K(26,"h2"),Se(27,"Sensores de Ruido"),ie(),K(28,"div",15),Ot(29,H9,4,0,"div",16)(30,$9,7,0,"div",17),K(31,"div",18)(32,"div",19),Je(33,"div",20,0),ie(),K(35,"div",19),Je(36,"iframe",21),ie(),Ot(37,W9,25,8,"div",22),ie(),K(38,"div",23)(39,"h4"),Se(40,"Leyenda"),ie(),K(41,"div",24),Je(42,"span",25),K(43,"span"),Se(44,"Bajo (<55 dB)"),ie()(),K(45,"div",24),Je(46,"span",26),K(47,"span"),Se(48,"Moderado (55-70 dB)"),ie()(),K(49,"div",24),Je(50,"span",27),K(51,"span"),Se(52,"Alto (>70 dB)"),ie()()()()()()}e&2&&(Be(5),$r("Consultar hist\xF3rico para: ",o.getShortId(o.selectedSensor),""),Be(5),yt("ngIf",o.isLoading),Be(),yt("ngIf",o.errorMessage),Be(),yt("ngIf",!o.isLoading&&!o.errorMessage),Be(4),As("ngModel",o.desdeFecha),Be(4),As("ngModel",o.hastaFecha),Be(2),yt("disabled",!o.selectedSensor||o.loadingHistoric),Be(),$r(" ",o.loadingHistoric?"Cargando...":"Consultar"," "),Be(),yt("ngIf",o.errorHistoric),Be(),yt("ngIf",o.historicData.length>0),Be(4),yt("ngIf",o.loading),Be(),yt("ngIf",o.error),Be(7),yt("ngIf",o.selectedSensorDetails))},dependencies:[Wo,Xc,vl,Vg,Bg,Wh,d_,h_,lu,Gh,cu,dd,hu,du,Qc,J_,Q_],styles:[`@charset "UTF-8";body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:#f4f7fa;overflow-x:hidden}.page-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#333;text-align:left;padding:25px 30px;background-color:#fff;box-shadow:0 6px 15px #0000001a;margin:0 0 25px 300px;border-radius:0 0 12px 12px;text-shadow:1px 1px 2px rgba(0,0,0,.1);position:relative;z-index:10;border-bottom:4px solid #4CAF50;transform:perspective(500px) rotateX(1deg);transition:all .3s ease}.page-title[_ngcontent-%COMP%]:hover{transform:perspective(500px) rotateX(2deg);box-shadow:0 8px 20px #00000026}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:20px;gap:25px;background:linear-gradient(145deg,#fff,#f8f9fa);border-radius:12px;box-shadow:0 8px 25px #00000014;margin-bottom:30px;transition:all .3s ease}.iframe-container[_ngcontent-%COMP%]:hover{box-shadow:0 12px 30px #0000001f}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:25px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:280px;border:none;border-radius:10px;box-shadow:0 4px 15px #0000001a;transition:all .3s ease;transform:translateZ(0)}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:hover{transform:translateY(-5px) translateZ(10px);box-shadow:0 8px 25px #00000026}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:550px;border:none;border-radius:12px;box-shadow:0 6px 20px #0000001f;transition:all .3s ease}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe):hover{transform:translateY(-5px);box-shadow:0 10px 30px #0000002e}.map-container[_ngcontent-%COMP%]{position:relative;border-radius:15px;overflow:hidden;box-shadow:0 15px 35px #00000026;background:#fff;transform-style:preserve-3d;perspective:1000px;transition:all .4s ease}.map-container[_ngcontent-%COMP%]:hover{box-shadow:0 20px 40px #0003}.loading-overlay[_ngcontent-%COMP%], .error-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000;border-radius:15px;animation:_ngcontent-%COMP%_fadeIn .5s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.loading-overlay[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{transform:scale(1.5);margin-bottom:20px}.error-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3.5rem;width:3.5rem;height:3.5rem;color:#f44336;margin-bottom:20px;animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.map-layout[_ngcontent-%COMP%]{display:flex;width:100%;height:650px;gap:25px;padding:25px;perspective:1500px}.half-layout[_ngcontent-%COMP%]{width:50%;height:100%;border-radius:15px;overflow:hidden;box-shadow:0 10px 30px #00000026;background:#fff;transition:all .4s ease;transform-style:preserve-3d;position:relative}.half-layout[_ngcontent-%COMP%]:hover{transform:translateY(-10px) rotateX(1deg);box-shadow:0 15px 40px #0003}.half-layout[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#ffffff1a,#fff0);pointer-events:none;border-radius:15px}#noise-sensor-map[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:15px;transform:translateZ(0)}.details-panel[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) perspective(1000px) rotateY(0);width:350px;background:#fff;border-radius:12px;box-shadow:0 15px 35px #0003;z-index:1000;padding:20px;animation:_ngcontent-%COMP%_slideUp .4s cubic-bezier(.18,.89,.32,1.28);border:1px solid rgba(255,255,255,.3);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff2;transform-style:preserve-3d}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translate(-50%,-30%) perspective(1000px) rotateY(10deg);opacity:0}to{transform:translate(-50%,-50%) perspective(1000px) rotateY(0);opacity:1}}.panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid #eee}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.3rem;color:#333;text-shadow:1px 1px 2px rgba(0,0,0,.05)}.panel-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:#666;transition:all .2s ease}.panel-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#f44336;transform:rotate(90deg)}.sensor-details[_ngcontent-%COMP%]{font-size:.95rem}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:12px;padding:8px 10px;background:#f5f5f580;border-radius:8px;transition:all .2s ease}.detail-row[_ngcontent-%COMP%]:hover{background:#f5f5f5e6;transform:translate(5px)}.detail-label[_ngcontent-%COMP%]{font-weight:600;margin-right:10px;color:#555}.detail-value[_ngcontent-%COMP%]{font-weight:500;color:#333}.map-legend[_ngcontent-%COMP%]{position:absolute;bottom:30px;left:30px;background:#ffffffd9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);padding:15px;border-radius:10px;box-shadow:0 8px 25px #00000026;z-index:100;transform:translateZ(20px);border:1px solid rgba(255,255,255,.3);animation:_ngcontent-%COMP%_float 6s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%{transform:translateY(0) translateZ(20px)}50%{transform:translateY(-10px) translateZ(20px)}to{transform:translateY(0) translateZ(20px)}}.map-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1.1rem;color:#333;text-align:center}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px;padding:5px 10px;border-radius:6px;transition:all .2s ease}.legend-item[_ngcontent-%COMP%]:hover{background:#0000000d;transform:translate(3px)}.legend-color[_ngcontent-%COMP%]{display:inline-block;width:18px;height:18px;border-radius:50%;margin-right:12px;border:2px solid white;box-shadow:0 2px 5px #0000001a;transition:all .3s ease}.legend-item[_ngcontent-%COMP%]:hover   .legend-color[_ngcontent-%COMP%]{transform:scale(1.2)}.legend-color.low[_ngcontent-%COMP%]{background-color:#4caf50}.legend-color.moderate[_ngcontent-%COMP%]{background-color:#ffc107}.legend-color.high[_ngcontent-%COMP%]{background-color:#f44336}.sensor-container[_ngcontent-%COMP%]{max-width:600px;margin:2rem 0 2rem 2rem;padding:1.5rem;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:15px;box-shadow:0 10px 30px #0000001a;display:flex;flex-direction:column;gap:1.2rem;border:1px solid rgba(255,255,255,.3);transform:perspective(500px) rotateY(-1deg);transition:all .3s ease}.sensor-container[_ngcontent-%COMP%]:hover{transform:perspective(500px) rotateY(0);box-shadow:0 15px 40px #00000026}.sensor-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;color:#333;text-shadow:1px 1px 2px rgba(0,0,0,.05)}.sensor-select[_ngcontent-%COMP%]{width:100%;padding:.8rem;font-size:1rem;border:1px solid #ddd;border-radius:8px;background:#fffc;box-shadow:inset 0 2px 5px #0000000d;transition:all .3s ease;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right .7rem center;background-size:1rem}.sensor-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50;box-shadow:0 0 0 3px #4caf5033}.selected-info[_ngcontent-%COMP%]{margin-top:1rem;padding:.8rem;background-color:#f8f9fa;border-radius:8px;border-left:4px solid #4CAF50;animation:_ngcontent-%COMP%_fadeIn .5s ease}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{padding:1.2rem;text-align:center;margin:1rem 0;border-radius:8px;animation:_ngcontent-%COMP%_fadeIn .5s ease}.loading[_ngcontent-%COMP%]{color:#666;background:#f5f5f5cc}.error[_ngcontent-%COMP%]{color:#d32f2f;background-color:#fde0e0e6;border-radius:8px;border-left:4px solid #d32f2f}.error[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.8rem;padding:.6rem 1.2rem;background-color:#d32f2f;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 5px #0000001a}.error[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#b71c1c;transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.date-controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:15px;align-items:center;padding:1rem;background:#fffffff2;border-radius:12px;box-shadow:0 5px 15px #00000014;margin-bottom:1.5rem}.date-controls[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:10px}.date-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-right:8px;color:#555;font-size:.95rem}.date-controls[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #ddd;border-radius:8px;background:#fffc;box-shadow:inset 0 2px 5px #0000000d;transition:all .3s ease}.date-controls[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50;box-shadow:0 0 0 3px #4caf5033}.date-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.8rem 1.5rem;background:linear-gradient(135deg,#4caf50,#66bb6a);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;font-weight:600;box-shadow:0 4px 8px #4caf504d;text-transform:uppercase;letter-spacing:.5px}.date-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#43a047,#4caf50);transform:translateY(-3px);box-shadow:0 6px 12px #4caf5066}.date-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed;transform:none;box-shadow:none}.historic-results[_ngcontent-%COMP%]{margin-top:1.5rem;max-height:400px;overflow-y:auto;background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 5px 15px #00000014;animation:_ngcontent-%COMP%_slideUp .5s ease}.historic-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;font-size:1.3rem;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid #eee}.historic-results[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.historic-results[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .historic-results[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;border-bottom:1px solid #eee}.historic-results[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#f8f9fa,#e9ecef);color:#333;font-weight:600;position:sticky;top:0}.historic-results[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#4caf500d}.container[_ngcontent-%COMP%]{margin-left:0;padding:2rem;width:100%;box-sizing:border-box;animation:_ngcontent-%COMP%_fadeIn .8s ease}@media (max-width: 1200px){.map-layout[_ngcontent-%COMP%]{flex-direction:column;height:auto}.half-layout[_ngcontent-%COMP%]{width:100%;height:500px;margin-bottom:20px}.map-container[_ngcontent-%COMP%], .iframe-container[_ngcontent-%COMP%], .page-title[_ngcontent-%COMP%]{margin-left:0}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000000d;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#0003;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0000004d}@media (max-width: 1200px){.page-title[_ngcontent-%COMP%], .iframe-container[_ngcontent-%COMP%]{margin-left:0}.map-layout[_ngcontent-%COMP%]{flex-direction:column;height:auto}.half-layout[_ngcontent-%COMP%]{width:100%;height:400px}.iframe-row[_ngcontent-%COMP%]{flex-direction:column}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:250px}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:400px}}@media (max-width: 768px){.page-title[_ngcontent-%COMP%]{font-size:2rem;padding:20px;margin-bottom:20px}.sensor-container[_ngcontent-%COMP%]{margin:1rem;padding:1rem}.sensor-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.sensor-select[_ngcontent-%COMP%]{font-size:.95rem;padding:.7rem}.details-panel[_ngcontent-%COMP%]{width:90%;padding:15px}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.map-legend[_ngcontent-%COMP%]{bottom:20px;left:20px;padding:10px}.map-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem}.legend-color[_ngcontent-%COMP%]{width:14px;height:14px}.detail-row[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 480px){.page-title[_ngcontent-%COMP%]{font-size:1.6rem;padding:15px}.iframe-container[_ngcontent-%COMP%]{padding:15px;gap:15px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], .iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:200px}.map-layout[_ngcontent-%COMP%]{padding:15px;gap:15px}.sensor-container[_ngcontent-%COMP%]{margin:1rem .5rem;padding:1rem}.details-panel[_ngcontent-%COMP%]{padding:10px}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}.sensor-select[_ngcontent-%COMP%]{font-size:.9rem;padding:.6rem}.detail-row[_ngcontent-%COMP%]{padding:6px 8px}.map-legend[_ngcontent-%COMP%]{left:10px;bottom:15px;padding:8px}.legend-item[_ngcontent-%COMP%]{font-size:.85rem}.legend-color[_ngcontent-%COMP%]{width:12px;height:12px}}`]})};var nb=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-turismomaps"]],decls:9,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/tu_ma/turismo-map?orgId=1&var-menu=--Seleccionar--&from=1739789874607&to=1740394674607&viewPanel=7&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/tu_ma/turismo-map?orgId=1&var-menu=--Seleccionar--&from=1739790035176&to=1740394835176&viewPanel=5&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/tu_ma/turismo-map?orgId=1&var-menu=--Seleccionar--&from=1739790124478&to=1740394924478&viewPanel=6&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/tu_ma/turismo-map?orgId=1&var-menu=--Seleccionar--&from=1739790178621&to=1740394978621&viewPanel=4&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Ciudad Inteligente - Turismo"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),ie()(),K(7,"div",1),Je(8,"iframe",6),ie())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:500px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var ob=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-siatamaps"]],decls:10,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-row"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ma/siata-map?orgId=1&var-city=--Seleccionar--&from=1739790813208&to=1740395613208&viewPanel=3&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ma/siata-map?orgId=1&var-city=--Seleccionar--&from=1739790813208&to=1740395613208&viewPanel=4&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ma/siata-map?orgId=1&var-city=--Seleccionar--&var-city=--Seleccionar--&from=1739790813208&from=1739790813208&to=1740395613208&to=1740395613208&viewPanel=1http:%2F%2Fgrafana-fiware.apps.preprodalcaldia.medellin.gov.co%2Fterritoriointeligente%2Fd%2Fsi_ma%2Fsiata-map%3ForgId%3D1&viewPanel=1&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/si_ma/siata-map?orgId=1&var-city=--Seleccionar--&from=1739790813208&to=1740395613208&viewPanel=6&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Ciudad Inteligente - SIATA"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4),ie()(),K(6,"div",1),Je(7,"iframe",5),ie(),K(8,"div",1),Je(9,"iframe",6),ie())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-row[_ngcontent-%COMP%]{display:flex;gap:20px}.iframe-row[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{flex:1;height:250px;border:none}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]:not(.iframe-row iframe){height:500px;border:none}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}"]})};var sb=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Vt({type:r,selectors:[["app-medicos"]],decls:7,vars:0,consts:[[1,"page-title"],[1,"iframe-container"],[1,"iframe-column"],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/movilidad-volumen-carri/movilidad-inteligente-volumen-de-trafico-por-carriles?orgId=1&var-carril=All&var-dia_semana=All&from=1734757199500&to=1738558797500&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/movilidad-vel-graph4/grafica-velocidad-promedio4?orgId=1&kiosk`,"allowfullscreen",""],["src",wt`http://grafana-fiware.apps.preprodalcaldia.medellin.gov.co/territoriointeligente/d/c18a5148-09d5-4585-8b7d-ea4aaba9e130/mapa-de-trafico-medellin?orgId=1&kiosk`,"allowfullscreen",""]],template:function(e,o){e&1&&(K(0,"h2",0),Se(1,"Movilidad Inteligente"),ie(),K(2,"div",1)(3,"div",2),Je(4,"iframe",3)(5,"iframe",4)(6,"iframe",5),ie()())},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column;height:100vh;overflow-y:auto}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#333;text-align:left;padding:20px;background-color:#fff;box-shadow:0 4px 6px #0000001a;margin:0 0 20px 300px}.iframe-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:300px;padding:10px;gap:20px}.iframe-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.iframe-column[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:500px;width:100%;border:none;overflow:visible;pointer-events:auto!important;z-index:10}"]})};function i3(r,t,e){if(typeof r=="function"?r===t:r.has(t))return arguments.length<3?t:e;throw new TypeError("Private element is not present on this object")}function Z9(r,t){if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $k(r,t){return r.get(i3(r,t))}function X9(r,t,e){Z9(r,t),t.set(r,e)}function Y9(r,t,e){return r.set(i3(r,t),e),e}var K9=100,di={},Q9=()=>{di.previousActiveElement instanceof HTMLElement?(di.previousActiveElement.focus(),di.previousActiveElement=null):document.body&&document.body.focus()},J9=r=>new Promise(t=>{if(!r)return t();let e=window.scrollX,o=window.scrollY;di.restoreFocusTimeout=setTimeout(()=>{Q9(),t()},K9),window.scrollTo(e,o)}),r3="swal2-",e7=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],pt=e7.reduce((r,t)=>(r[t]=r3+t,r),{}),t7=["success","warning","info","question","error"],lb=t7.reduce((r,t)=>(r[t]=r3+t,r),{}),n3="SweetAlert2:",Ow=r=>r.charAt(0).toUpperCase()+r.slice(1),Zo=r=>{console.warn(`${n3} ${typeof r=="object"?r.join(" "):r}`)},xd=r=>{console.error(`${n3} ${r}`)},Gk=[],i7=r=>{Gk.includes(r)||(Gk.push(r),Zo(r))},o3=(r,t=null)=>{i7(`"${r}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},_b=r=>typeof r=="function"?r():r,Lw=r=>r&&typeof r.toPromise=="function",Am=r=>Lw(r)?r.toPromise():Promise.resolve(r),Nw=r=>r&&Promise.resolve(r)===r,Xo=()=>document.body.querySelector(`.${pt.container}`),km=r=>{let t=Xo();return t?t.querySelector(r):null},zs=r=>km(`.${r}`),ur=()=>zs(pt.popup),rp=()=>zs(pt.icon),r7=()=>zs(pt["icon-content"]),s3=()=>zs(pt.title),Fw=()=>zs(pt["html-container"]),a3=()=>zs(pt.image),zw=()=>zs(pt["progress-steps"]),bb=()=>zs(pt["validation-message"]),Sl=()=>km(`.${pt.actions} .${pt.confirm}`),np=()=>km(`.${pt.actions} .${pt.cancel}`),wd=()=>km(`.${pt.actions} .${pt.deny}`),n7=()=>zs(pt["input-label"]),op=()=>km(`.${pt.loader}`),Pm=()=>zs(pt.actions),l3=()=>zs(pt.footer),yb=()=>zs(pt["timer-progress-bar"]),Bw=()=>zs(pt.close),o7=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Vw=()=>{let r=ur();if(!r)return[];let t=r.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),e=Array.from(t).sort((s,_)=>{let w=parseInt(s.getAttribute("tabindex")||"0"),E=parseInt(_.getAttribute("tabindex")||"0");return w>E?1:w<E?-1:0}),o=r.querySelectorAll(o7),a=Array.from(o).filter(s=>s.getAttribute("tabindex")!=="-1");return[...new Set(e.concat(a))].filter(s=>hs(s))},Uw=()=>ac(document.body,pt.shown)&&!ac(document.body,pt["toast-shown"])&&!ac(document.body,pt["no-backdrop"]),vb=()=>{let r=ur();return r?ac(r,pt.toast):!1},s7=()=>{let r=ur();return r?r.hasAttribute("data-loading"):!1},Bs=(r,t)=>{if(r.textContent="",t){let o=new DOMParser().parseFromString(t,"text/html"),a=o.querySelector("head");a&&Array.from(a.childNodes).forEach(_=>{r.appendChild(_)});let s=o.querySelector("body");s&&Array.from(s.childNodes).forEach(_=>{_ instanceof HTMLVideoElement||_ instanceof HTMLAudioElement?r.appendChild(_.cloneNode(!0)):r.appendChild(_)})}},ac=(r,t)=>{if(!t)return!1;let e=t.split(/\s+/);for(let o=0;o<e.length;o++)if(!r.classList.contains(e[o]))return!1;return!0},a7=(r,t)=>{Array.from(r.classList).forEach(e=>{!Object.values(pt).includes(e)&&!Object.values(lb).includes(e)&&!Object.values(t.showClass||{}).includes(e)&&r.classList.remove(e)})},Fs=(r,t,e)=>{if(a7(r,t),!t.customClass)return;let o=t.customClass[e];if(o){if(typeof o!="string"&&!o.forEach){Zo(`Invalid type of customClass.${e}! Expected string or iterable object, got "${typeof o}"`);return}hr(r,o)}},xb=(r,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return r.querySelector(`.${pt.popup} > .${pt[t]}`);case"checkbox":return r.querySelector(`.${pt.popup} > .${pt.checkbox} input`);case"radio":return r.querySelector(`.${pt.popup} > .${pt.radio} input:checked`)||r.querySelector(`.${pt.popup} > .${pt.radio} input:first-child`);case"range":return r.querySelector(`.${pt.popup} > .${pt.range} input`);default:return r.querySelector(`.${pt.popup} > .${pt.input}`)}},c3=r=>{if(r.focus(),r.type!=="file"){let t=r.value;r.value="",r.value=t}},u3=(r,t,e)=>{!r||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(o=>{Array.isArray(r)?r.forEach(a=>{e?a.classList.add(o):a.classList.remove(o)}):e?r.classList.add(o):r.classList.remove(o)}))},hr=(r,t)=>{u3(r,t,!0)},_a=(r,t)=>{u3(r,t,!1)},pu=(r,t)=>{let e=Array.from(r.children);for(let o=0;o<e.length;o++){let a=e[o];if(a instanceof HTMLElement&&ac(a,t))return a}},yd=(r,t,e)=>{e===`${parseInt(e)}`&&(e=parseInt(e)),e||parseInt(e)===0?r.style.setProperty(t,typeof e=="number"?`${e}px`:e):r.style.removeProperty(t)},Qn=(r,t="flex")=>{r&&(r.style.display=t)},Do=r=>{r&&(r.style.display="none")},jw=(r,t="block")=>{r&&new MutationObserver(()=>{Dm(r,r.innerHTML,t)}).observe(r,{childList:!0,subtree:!0})},Wk=(r,t,e,o)=>{let a=r.querySelector(t);a&&a.style.setProperty(e,o)},Dm=(r,t,e="flex")=>{t?Qn(r,e):Do(r)},hs=r=>!!(r&&(r.offsetWidth||r.offsetHeight||r.getClientRects().length)),l7=()=>!hs(Sl())&&!hs(wd())&&!hs(np()),Aw=r=>r.scrollHeight>r.clientHeight,c7=(r,t)=>{let e=r;for(;e&&e!==t;){if(Aw(e))return!0;e=e.parentElement}return!1},d3=r=>{let t=window.getComputedStyle(r),e=parseFloat(t.getPropertyValue("animation-duration")||"0"),o=parseFloat(t.getPropertyValue("transition-duration")||"0");return e>0||o>0},qw=(r,t=!1)=>{let e=yb();e&&hs(e)&&(t&&(e.style.transition="none",e.style.width="100%"),setTimeout(()=>{e.style.transition=`width ${r/1e3}s linear`,e.style.width="0%"},10))},u7=()=>{let r=yb();if(!r)return;let t=parseInt(window.getComputedStyle(r).width);r.style.removeProperty("transition"),r.style.width="100%";let e=parseInt(window.getComputedStyle(r).width),o=t/e*100;r.style.width=`${o}%`},d7=()=>typeof window>"u"||typeof document>"u",h7=`
 <div aria-labelledby="${pt.title}" aria-describedby="${pt["html-container"]}" class="${pt.popup}" tabindex="-1">
   <button type="button" class="${pt.close}"></button>
   <ul class="${pt["progress-steps"]}"></ul>
   <div class="${pt.icon}"></div>
   <img class="${pt.image}" />
   <h2 class="${pt.title}" id="${pt.title}"></h2>
   <div class="${pt["html-container"]}" id="${pt["html-container"]}"></div>
   <input class="${pt.input}" id="${pt.input}" />
   <input type="file" class="${pt.file}" />
   <div class="${pt.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${pt.select}" id="${pt.select}"></select>
   <div class="${pt.radio}"></div>
   <label class="${pt.checkbox}">
     <input type="checkbox" id="${pt.checkbox}" />
     <span class="${pt.label}"></span>
   </label>
   <textarea class="${pt.textarea}" id="${pt.textarea}"></textarea>
   <div class="${pt["validation-message"]}" id="${pt["validation-message"]}"></div>
   <div class="${pt.actions}">
     <div class="${pt.loader}"></div>
     <button type="button" class="${pt.confirm}"></button>
     <button type="button" class="${pt.deny}"></button>
     <button type="button" class="${pt.cancel}"></button>
   </div>
   <div class="${pt.footer}"></div>
   <div class="${pt["timer-progress-bar-container"]}">
     <div class="${pt["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),p7=()=>{let r=Xo();return r?(r.remove(),_a([document.documentElement,document.body],[pt["no-backdrop"],pt["toast-shown"],pt["has-column"]]),!0):!1},bd=()=>{di.currentInstance.resetValidationMessage()},f7=()=>{let r=ur(),t=pu(r,pt.input),e=pu(r,pt.file),o=r.querySelector(`.${pt.range} input`),a=r.querySelector(`.${pt.range} output`),s=pu(r,pt.select),_=r.querySelector(`.${pt.checkbox} input`),w=pu(r,pt.textarea);t.oninput=bd,e.onchange=bd,s.onchange=bd,_.onchange=bd,w.oninput=bd,o.oninput=()=>{bd(),a.value=o.value},o.onchange=()=>{bd(),a.value=o.value}},m7=r=>typeof r=="string"?document.querySelector(r):r,g7=r=>{let t=ur();t.setAttribute("role",r.toast?"alert":"dialog"),t.setAttribute("aria-live",r.toast?"polite":"assertive"),r.toast||t.setAttribute("aria-modal","true")},_7=r=>{window.getComputedStyle(r).direction==="rtl"&&hr(Xo(),pt.rtl)},b7=r=>{let t=p7();if(d7()){xd("SweetAlert2 requires document to initialize");return}let e=document.createElement("div");e.className=pt.container,t&&hr(e,pt["no-transition"]),Bs(e,h7),e.dataset.swal2Theme=r.theme;let o=m7(r.target);o.appendChild(e),r.topLayer&&(e.setAttribute("popover",""),e.showPopover()),g7(r),_7(o),f7()},Hw=(r,t)=>{r instanceof HTMLElement?t.appendChild(r):typeof r=="object"?y7(r,t):r&&Bs(t,r)},y7=(r,t)=>{r.jquery?v7(t,r):Bs(t,r.toString())},v7=(r,t)=>{if(r.textContent="",0 in t)for(let e=0;e in t;e++)r.appendChild(t[e].cloneNode(!0));else r.appendChild(t.cloneNode(!0))},x7=(r,t)=>{let e=Pm(),o=op();!e||!o||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?Do(e):Qn(e),Fs(e,t,"actions"),w7(e,o,t),Bs(o,t.loaderHtml||""),Fs(o,t,"loader"))};function w7(r,t,e){let o=Sl(),a=wd(),s=np();!o||!a||!s||(Mw(o,"confirm",e),Mw(a,"deny",e),Mw(s,"cancel",e),C7(o,a,s,e),e.reverseButtons&&(e.toast?(r.insertBefore(s,o),r.insertBefore(a,o)):(r.insertBefore(s,t),r.insertBefore(a,t),r.insertBefore(o,t))))}function C7(r,t,e,o){if(!o.buttonsStyling){_a([r,t,e],pt.styled);return}hr([r,t,e],pt.styled),o.confirmButtonColor&&r.style.setProperty("--swal2-confirm-button-background-color",o.confirmButtonColor),o.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",o.denyButtonColor),o.cancelButtonColor&&e.style.setProperty("--swal2-cancel-button-background-color",o.cancelButtonColor),Tw(r),Tw(t),Tw(e)}function Tw(r){let t=window.getComputedStyle(r);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;let e=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");r.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${e}`))}function Mw(r,t,e){let o=Ow(t);Dm(r,e[`show${o}Button`],"inline-block"),Bs(r,e[`${t}ButtonText`]||""),r.setAttribute("aria-label",e[`${t}ButtonAriaLabel`]||""),r.className=pt[t],Fs(r,e,`${t}Button`)}var E7=(r,t)=>{let e=Bw();e&&(Bs(e,t.closeButtonHtml||""),Fs(e,t,"closeButton"),Dm(e,t.showCloseButton),e.setAttribute("aria-label",t.closeButtonAriaLabel||""))},S7=(r,t)=>{let e=Xo();e&&(T7(e,t.backdrop),M7(e,t.position),I7(e,t.grow),Fs(e,t,"container"))};function T7(r,t){typeof t=="string"?r.style.background=t:t||hr([document.documentElement,document.body],pt["no-backdrop"])}function M7(r,t){t&&(t in pt?hr(r,pt[t]):(Zo('The "position" parameter is not valid, defaulting to "center"'),hr(r,pt.center)))}function I7(r,t){t&&hr(r,pt[`grow-${t}`])}var Lr={innerParams:new WeakMap,domCache:new WeakMap},A7=["input","file","range","select","radio","checkbox","textarea"],k7=(r,t)=>{let e=ur();if(!e)return;let o=Lr.innerParams.get(r),a=!o||t.input!==o.input;A7.forEach(s=>{let _=pu(e,pt[s]);_&&(R7(s,t.inputAttributes),_.className=pt[s],a&&Do(_))}),t.input&&(a&&P7(t),O7(t))},P7=r=>{if(!r.input)return;if(!gn[r.input]){xd(`Unexpected type of input! Expected ${Object.keys(gn).join(" | ")}, got "${r.input}"`);return}let t=h3(r.input);if(!t)return;let e=gn[r.input](t,r);Qn(t),r.inputAutoFocus&&setTimeout(()=>{c3(e)})},D7=r=>{for(let t=0;t<r.attributes.length;t++){let e=r.attributes[t].name;["id","type","value","style"].includes(e)||r.removeAttribute(e)}},R7=(r,t)=>{let e=ur();if(!e)return;let o=xb(e,r);if(o){D7(o);for(let a in t)o.setAttribute(a,t[a])}},O7=r=>{if(!r.input)return;let t=h3(r.input);t&&Fs(t,r,"input")},$w=(r,t)=>{!r.placeholder&&t.inputPlaceholder&&(r.placeholder=t.inputPlaceholder)},Rm=(r,t,e)=>{if(e.inputLabel){let o=document.createElement("label"),a=pt["input-label"];o.setAttribute("for",r.id),o.className=a,typeof e.customClass=="object"&&hr(o,e.customClass.inputLabel),o.innerText=e.inputLabel,t.insertAdjacentElement("beforebegin",o)}},h3=r=>{let t=ur();if(t)return pu(t,pt[r]||pt.input)},cb=(r,t)=>{["string","number"].includes(typeof t)?r.value=`${t}`:Nw(t)||Zo(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},gn={};gn.text=gn.email=gn.password=gn.number=gn.tel=gn.url=gn.search=gn.date=gn["datetime-local"]=gn.time=gn.week=gn.month=(r,t)=>(cb(r,t.inputValue),Rm(r,r,t),$w(r,t),r.type=t.input,r);gn.file=(r,t)=>(Rm(r,r,t),$w(r,t),r);gn.range=(r,t)=>{let e=r.querySelector("input"),o=r.querySelector("output");return cb(e,t.inputValue),e.type=t.input,cb(o,t.inputValue),Rm(e,r,t),r};gn.select=(r,t)=>{if(r.textContent="",t.inputPlaceholder){let e=document.createElement("option");Bs(e,t.inputPlaceholder),e.value="",e.disabled=!0,e.selected=!0,r.appendChild(e)}return Rm(r,r,t),r};gn.radio=r=>(r.textContent="",r);gn.checkbox=(r,t)=>{let e=xb(ur(),"checkbox");e.value="1",e.checked=!!t.inputValue;let o=r.querySelector("span");return Bs(o,t.inputPlaceholder||t.inputLabel),e};gn.textarea=(r,t)=>{cb(r,t.inputValue),$w(r,t),Rm(r,r,t);let e=o=>parseInt(window.getComputedStyle(o).marginLeft)+parseInt(window.getComputedStyle(o).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let o=parseInt(window.getComputedStyle(ur()).width),a=()=>{if(!document.body.contains(r))return;let s=r.offsetWidth+e(r);s>o?ur().style.width=`${s}px`:yd(ur(),"width",t.width)};new MutationObserver(a).observe(r,{attributes:!0,attributeFilter:["style"]})}}),r};var L7=(r,t)=>{let e=Fw();e&&(jw(e),Fs(e,t,"htmlContainer"),t.html?(Hw(t.html,e),Qn(e,"block")):t.text?(e.textContent=t.text,Qn(e,"block")):Do(e),k7(r,t))},N7=(r,t)=>{let e=l3();e&&(jw(e),Dm(e,t.footer,"block"),t.footer&&Hw(t.footer,e),Fs(e,t,"footer"))},F7=(r,t)=>{let e=Lr.innerParams.get(r),o=rp();if(!o)return;if(e&&t.icon===e.icon){Xk(o,t),Zk(o,t);return}if(!t.icon&&!t.iconHtml){Do(o);return}if(t.icon&&Object.keys(lb).indexOf(t.icon)===-1){xd(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),Do(o);return}Qn(o),Xk(o,t),Zk(o,t),hr(o,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",p3)},Zk=(r,t)=>{for(let[e,o]of Object.entries(lb))t.icon!==e&&_a(r,o);hr(r,t.icon&&lb[t.icon]),V7(r,t),p3(),Fs(r,t,"icon")},p3=()=>{let r=ur();if(!r)return;let t=window.getComputedStyle(r).getPropertyValue("background-color"),e=r.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let o=0;o<e.length;o++)e[o].style.backgroundColor=t},z7=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,B7=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Xk=(r,t)=>{if(!t.icon&&!t.iconHtml)return;let e=r.innerHTML,o="";t.iconHtml?o=Yk(t.iconHtml):t.icon==="success"?(o=z7,e=e.replace(/ style=".*?"/g,"")):t.icon==="error"?o=B7:t.icon&&(o=Yk({question:"?",warning:"!",info:"i"}[t.icon])),e.trim()!==o.trim()&&Bs(r,o)},V7=(r,t)=>{if(t.iconColor){r.style.color=t.iconColor,r.style.borderColor=t.iconColor;for(let e of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Wk(r,e,"background-color",t.iconColor);Wk(r,".swal2-success-ring","border-color",t.iconColor)}},Yk=r=>`<div class="${pt["icon-content"]}">${r}</div>`,U7=(r,t)=>{let e=a3();if(e){if(!t.imageUrl){Do(e);return}Qn(e,""),e.setAttribute("src",t.imageUrl),e.setAttribute("alt",t.imageAlt||""),yd(e,"width",t.imageWidth),yd(e,"height",t.imageHeight),e.className=pt.image,Fs(e,t,"image")}},Gw=!1,f3=0,m3=0,g3=0,_3=0,j7=r=>{r.addEventListener("mousedown",ub),document.body.addEventListener("mousemove",db),r.addEventListener("mouseup",hb),r.addEventListener("touchstart",ub),document.body.addEventListener("touchmove",db),r.addEventListener("touchend",hb)},q7=r=>{r.removeEventListener("mousedown",ub),document.body.removeEventListener("mousemove",db),r.removeEventListener("mouseup",hb),r.removeEventListener("touchstart",ub),document.body.removeEventListener("touchmove",db),r.removeEventListener("touchend",hb)},ub=r=>{let t=ur();if(r.target===t||rp().contains(r.target)){Gw=!0;let e=b3(r);f3=e.clientX,m3=e.clientY,g3=parseInt(t.style.insetInlineStart)||0,_3=parseInt(t.style.insetBlockStart)||0,hr(t,"swal2-dragging")}},db=r=>{let t=ur();if(Gw){let{clientX:e,clientY:o}=b3(r);t.style.insetInlineStart=`${g3+(e-f3)}px`,t.style.insetBlockStart=`${_3+(o-m3)}px`}},hb=()=>{let r=ur();Gw=!1,_a(r,"swal2-dragging")},b3=r=>{let t=0,e=0;return r.type.startsWith("mouse")?(t=r.clientX,e=r.clientY):r.type.startsWith("touch")&&(t=r.touches[0].clientX,e=r.touches[0].clientY),{clientX:t,clientY:e}},H7=(r,t)=>{let e=Xo(),o=ur();if(!(!e||!o)){if(t.toast){yd(e,"width",t.width),o.style.width="100%";let a=op();a&&o.insertBefore(a,rp())}else yd(o,"width",t.width);yd(o,"padding",t.padding),t.color&&(o.style.color=t.color),t.background&&(o.style.background=t.background),Do(bb()),$7(o,t),t.draggable&&!t.toast?(hr(o,pt.draggable),j7(o)):(_a(o,pt.draggable),q7(o))}},$7=(r,t)=>{let e=t.showClass||{};r.className=`${pt.popup} ${hs(r)?e.popup:""}`,t.toast?(hr([document.documentElement,document.body],pt["toast-shown"]),hr(r,pt.toast)):hr(r,pt.modal),Fs(r,t,"popup"),typeof t.customClass=="string"&&hr(r,t.customClass),t.icon&&hr(r,pt[`icon-${t.icon}`])},G7=(r,t)=>{let e=zw();if(!e)return;let{progressSteps:o,currentProgressStep:a}=t;if(!o||o.length===0||a===void 0){Do(e);return}Qn(e),e.textContent="",a>=o.length&&Zo("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),o.forEach((s,_)=>{let w=W7(s);if(e.appendChild(w),_===a&&hr(w,pt["active-progress-step"]),_!==o.length-1){let E=Z7(t);e.appendChild(E)}})},W7=r=>{let t=document.createElement("li");return hr(t,pt["progress-step"]),Bs(t,r),t},Z7=r=>{let t=document.createElement("li");return hr(t,pt["progress-step-line"]),r.progressStepsDistance&&yd(t,"width",r.progressStepsDistance),t},X7=(r,t)=>{let e=s3();e&&(jw(e),Dm(e,t.title||t.titleText,"block"),t.title&&Hw(t.title,e),t.titleText&&(e.innerText=t.titleText),Fs(e,t,"title"))},y3=(r,t)=>{H7(r,t),S7(r,t),G7(r,t),F7(r,t),U7(r,t),X7(r,t),E7(r,t),L7(r,t),x7(r,t),N7(r,t);let e=ur();typeof t.didRender=="function"&&e&&t.didRender(e),di.eventEmitter.emit("didRender",e)},Y7=()=>hs(ur()),v3=()=>{var r;return(r=Sl())===null||r===void 0?void 0:r.click()},K7=()=>{var r;return(r=wd())===null||r===void 0?void 0:r.click()},Q7=()=>{var r;return(r=np())===null||r===void 0?void 0:r.click()},sp=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),x3=r=>{r.keydownTarget&&r.keydownHandlerAdded&&(r.keydownTarget.removeEventListener("keydown",r.keydownHandler,{capture:r.keydownListenerCapture}),r.keydownHandlerAdded=!1)},J7=(r,t,e)=>{x3(r),t.toast||(r.keydownHandler=o=>tz(t,o,e),r.keydownTarget=t.keydownListenerCapture?window:ur(),r.keydownListenerCapture=t.keydownListenerCapture,r.keydownTarget.addEventListener("keydown",r.keydownHandler,{capture:r.keydownListenerCapture}),r.keydownHandlerAdded=!0)},kw=(r,t)=>{var e;let o=Vw();if(o.length){r=r+t,r===-2&&(r=o.length-1),r===o.length?r=0:r===-1&&(r=o.length-1),o[r].focus();return}(e=ur())===null||e===void 0||e.focus()},w3=["ArrowRight","ArrowDown"],ez=["ArrowLeft","ArrowUp"],tz=(r,t,e)=>{r&&(t.isComposing||t.keyCode===229||(r.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?iz(t,r):t.key==="Tab"?rz(t):[...w3,...ez].includes(t.key)?nz(t.key):t.key==="Escape"&&oz(t,r,e)))},iz=(r,t)=>{if(!_b(t.allowEnterKey))return;let e=xb(ur(),t.input);if(r.target&&e&&r.target instanceof HTMLElement&&r.target.outerHTML===e.outerHTML){if(["textarea","file"].includes(t.input))return;v3(),r.preventDefault()}},rz=r=>{let t=r.target,e=Vw(),o=-1;for(let a=0;a<e.length;a++)if(t===e[a]){o=a;break}r.shiftKey?kw(o,-1):kw(o,1),r.stopPropagation(),r.preventDefault()},nz=r=>{let t=Pm(),e=Sl(),o=wd(),a=np();if(!t||!e||!o||!a)return;let s=[e,o,a];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;let _=w3.includes(r)?"nextElementSibling":"previousElementSibling",w=document.activeElement;if(w){for(let E=0;E<t.children.length;E++){if(w=w[_],!w)return;if(w instanceof HTMLButtonElement&&hs(w))break}w instanceof HTMLButtonElement&&w.focus()}},oz=(r,t,e)=>{_b(t.allowEscapeKey)&&(r.preventDefault(),e(sp.esc))},tp={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},sz=()=>{let r=Xo();Array.from(document.body.children).forEach(e=>{e.contains(r)||(e.hasAttribute("aria-hidden")&&e.setAttribute("data-previous-aria-hidden",e.getAttribute("aria-hidden")||""),e.setAttribute("aria-hidden","true"))})},C3=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},E3=typeof window<"u"&&!!window.GestureEvent,az=()=>{if(E3&&!ac(document.body,pt.iosfix)){let r=document.body.scrollTop;document.body.style.top=`${r*-1}px`,hr(document.body,pt.iosfix),lz()}},lz=()=>{let r=Xo();if(!r)return;let t;r.ontouchstart=e=>{t=cz(e)},r.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},cz=r=>{let t=r.target,e=Xo(),o=Fw();return!e||!o||uz(r)||dz(r)?!1:t===e||!Aw(e)&&t instanceof HTMLElement&&!c7(t,o)&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(Aw(o)&&o.contains(t))},uz=r=>r.touches&&r.touches.length&&r.touches[0].touchType==="stylus",dz=r=>r.touches&&r.touches.length>1,hz=()=>{if(ac(document.body,pt.iosfix)){let r=parseInt(document.body.style.top,10);_a(document.body,pt.iosfix),document.body.style.top="",document.body.scrollTop=r*-1}},pz=()=>{let r=document.createElement("div");r.className=pt["scrollbar-measure"],document.body.appendChild(r);let t=r.getBoundingClientRect().width-r.clientWidth;return document.body.removeChild(r),t},Jh=null,fz=r=>{Jh===null&&(document.body.scrollHeight>window.innerHeight||r==="scroll")&&(Jh=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Jh+pz()}px`)},mz=()=>{Jh!==null&&(document.body.style.paddingRight=`${Jh}px`,Jh=null)};function S3(r,t,e,o){vb()?Kk(r,o):(J9(e).then(()=>Kk(r,o)),x3(di)),E3?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),Uw()&&(mz(),hz(),C3()),gz()}function gz(){_a([document.documentElement,document.body],[pt.shown,pt["height-auto"],pt["no-backdrop"],pt["toast-shown"]])}function fu(r){r=bz(r);let t=tp.swalPromiseResolve.get(this),e=_z(this);this.isAwaitingPromise?r.isDismissed||(Om(this),t(r)):e&&t(r)}var _z=r=>{let t=ur();if(!t)return!1;let e=Lr.innerParams.get(r);if(!e||ac(t,e.hideClass.popup))return!1;_a(t,e.showClass.popup),hr(t,e.hideClass.popup);let o=Xo();return _a(o,e.showClass.backdrop),hr(o,e.hideClass.backdrop),yz(r,t,e),!0};function T3(r){let t=tp.swalPromiseReject.get(this);Om(this),t&&t(r)}var Om=r=>{r.isAwaitingPromise&&(delete r.isAwaitingPromise,Lr.innerParams.get(r)||r._destroy())},bz=r=>typeof r>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},r),yz=(r,t,e)=>{var o;let a=Xo(),s=d3(t);typeof e.willClose=="function"&&e.willClose(t),(o=di.eventEmitter)===null||o===void 0||o.emit("willClose",t),s?vz(r,t,a,e.returnFocus,e.didClose):S3(r,a,e.returnFocus,e.didClose)},vz=(r,t,e,o,a)=>{di.swalCloseEventFinishedCallback=S3.bind(null,r,e,o,a);let s=function(_){if(_.target===t){var w;(w=di.swalCloseEventFinishedCallback)===null||w===void 0||w.call(di),delete di.swalCloseEventFinishedCallback,t.removeEventListener("animationend",s),t.removeEventListener("transitionend",s)}};t.addEventListener("animationend",s),t.addEventListener("transitionend",s)},Kk=(r,t)=>{setTimeout(()=>{var e;typeof t=="function"&&t.bind(r.params)(),(e=di.eventEmitter)===null||e===void 0||e.emit("didClose"),r._destroy&&r._destroy()})},ip=r=>{let t=ur();if(t||new Xa,t=ur(),!t)return;let e=op();vb()?Do(rp()):xz(t,r),Qn(e),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},xz=(r,t)=>{let e=Pm(),o=op();!e||!o||(!t&&hs(Sl())&&(t=Sl()),Qn(e),t&&(Do(t),o.setAttribute("data-button-to-replace",t.className),e.insertBefore(o,t)),hr([r,e],pt.loading))},wz=(r,t)=>{t.input==="select"||t.input==="radio"?Mz(r,t):["text","email","number","tel","textarea"].some(e=>e===t.input)&&(Lw(t.inputValue)||Nw(t.inputValue))&&(ip(Sl()),Iz(r,t))},Cz=(r,t)=>{let e=r.getInput();if(!e)return null;switch(t.input){case"checkbox":return Ez(e);case"radio":return Sz(e);case"file":return Tz(e);default:return t.inputAutoTrim?e.value.trim():e.value}},Ez=r=>r.checked?1:0,Sz=r=>r.checked?r.value:null,Tz=r=>r.files&&r.files.length?r.getAttribute("multiple")!==null?r.files:r.files[0]:null,Mz=(r,t)=>{let e=ur();if(!e)return;let o=a=>{t.input==="select"?Az(e,pb(a),t):t.input==="radio"&&kz(e,pb(a),t)};Lw(t.inputOptions)||Nw(t.inputOptions)?(ip(Sl()),Am(t.inputOptions).then(a=>{r.hideLoading(),o(a)})):typeof t.inputOptions=="object"?o(t.inputOptions):xd(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},Iz=(r,t)=>{let e=r.getInput();e&&(Do(e),Am(t.inputValue).then(o=>{e.value=t.input==="number"?`${parseFloat(o)||0}`:`${o}`,Qn(e),e.focus(),r.hideLoading()}).catch(o=>{xd(`Error in inputValue promise: ${o}`),e.value="",Qn(e),e.focus(),r.hideLoading()}))};function Az(r,t,e){let o=pu(r,pt.select);if(!o)return;let a=(s,_,w)=>{let E=document.createElement("option");E.value=w,Bs(E,_),E.selected=M3(w,e.inputValue),s.appendChild(E)};t.forEach(s=>{let _=s[0],w=s[1];if(Array.isArray(w)){let E=document.createElement("optgroup");E.label=_,E.disabled=!1,o.appendChild(E),w.forEach(M=>a(E,M[1],M[0]))}else a(o,w,_)}),o.focus()}function kz(r,t,e){let o=pu(r,pt.radio);if(!o)return;t.forEach(s=>{let _=s[0],w=s[1],E=document.createElement("input"),M=document.createElement("label");E.type="radio",E.name=pt.radio,E.value=_,M3(_,e.inputValue)&&(E.checked=!0);let I=document.createElement("span");Bs(I,w),I.className=pt.label,M.appendChild(E),M.appendChild(I),o.appendChild(M)});let a=o.querySelectorAll("input");a.length&&a[0].focus()}var pb=r=>{let t=[];return r instanceof Map?r.forEach((e,o)=>{let a=e;typeof a=="object"&&(a=pb(a)),t.push([o,a])}):Object.keys(r).forEach(e=>{let o=r[e];typeof o=="object"&&(o=pb(o)),t.push([e,o])}),t},M3=(r,t)=>!!t&&t.toString()===r.toString(),Pz=r=>{let t=Lr.innerParams.get(r);r.disableButtons(),t.input?I3(r,"confirm"):Zw(r,!0)},Dz=r=>{let t=Lr.innerParams.get(r);r.disableButtons(),t.returnInputValueOnDeny?I3(r,"deny"):Ww(r,!1)},Rz=(r,t)=>{r.disableButtons(),t(sp.cancel)},I3=(r,t)=>{let e=Lr.innerParams.get(r);if(!e.input){xd(`The "input" parameter is needed to be set when using returnInputValueOn${Ow(t)}`);return}let o=r.getInput(),a=Cz(r,e);e.inputValidator?Oz(r,a,t):o&&!o.checkValidity()?(r.enableButtons(),r.showValidationMessage(e.validationMessage||o.validationMessage)):t==="deny"?Ww(r,a):Zw(r,a)},Oz=(r,t,e)=>{let o=Lr.innerParams.get(r);r.disableInput(),Promise.resolve().then(()=>Am(o.inputValidator(t,o.validationMessage))).then(s=>{r.enableButtons(),r.enableInput(),s?r.showValidationMessage(s):e==="deny"?Ww(r,t):Zw(r,t)})},Ww=(r,t)=>{let e=Lr.innerParams.get(r||void 0);e.showLoaderOnDeny&&ip(wd()),e.preDeny?(r.isAwaitingPromise=!0,Promise.resolve().then(()=>Am(e.preDeny(t,e.validationMessage))).then(a=>{a===!1?(r.hideLoading(),Om(r)):r.close({isDenied:!0,value:typeof a>"u"?t:a})}).catch(a=>A3(r||void 0,a))):r.close({isDenied:!0,value:t})},Qk=(r,t)=>{r.close({isConfirmed:!0,value:t})},A3=(r,t)=>{r.rejectPromise(t)},Zw=(r,t)=>{let e=Lr.innerParams.get(r||void 0);e.showLoaderOnConfirm&&ip(),e.preConfirm?(r.resetValidationMessage(),r.isAwaitingPromise=!0,Promise.resolve().then(()=>Am(e.preConfirm(t,e.validationMessage))).then(a=>{hs(bb())||a===!1?(r.hideLoading(),Om(r)):Qk(r,typeof a>"u"?t:a)}).catch(a=>A3(r||void 0,a))):Qk(r,t)};function fb(){let r=Lr.innerParams.get(this);if(!r)return;let t=Lr.domCache.get(this);Do(t.loader),vb()?r.icon&&Qn(rp()):Lz(t),_a([t.popup,t.actions],pt.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}var Lz=r=>{let t=r.popup.getElementsByClassName(r.loader.getAttribute("data-button-to-replace"));t.length?Qn(t[0],"inline-block"):l7()&&Do(r.actions)};function k3(){let r=Lr.innerParams.get(this),t=Lr.domCache.get(this);return t?xb(t.popup,r.input):null}function P3(r,t,e){let o=Lr.domCache.get(r);t.forEach(a=>{o[a].disabled=e})}function D3(r,t){let e=ur();if(!(!e||!r))if(r.type==="radio"){let o=e.querySelectorAll(`[name="${pt.radio}"]`);for(let a=0;a<o.length;a++)o[a].disabled=t}else r.disabled=t}function R3(){P3(this,["confirmButton","denyButton","cancelButton"],!1)}function O3(){P3(this,["confirmButton","denyButton","cancelButton"],!0)}function L3(){D3(this.getInput(),!1)}function N3(){D3(this.getInput(),!0)}function F3(r){let t=Lr.domCache.get(this),e=Lr.innerParams.get(this);Bs(t.validationMessage,r),t.validationMessage.className=pt["validation-message"],e.customClass&&e.customClass.validationMessage&&hr(t.validationMessage,e.customClass.validationMessage),Qn(t.validationMessage);let o=this.getInput();o&&(o.setAttribute("aria-invalid","true"),o.setAttribute("aria-describedby",pt["validation-message"]),c3(o),hr(o,pt.inputerror))}function z3(){let r=Lr.domCache.get(this);r.validationMessage&&Do(r.validationMessage);let t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),_a(t,pt.inputerror))}var ep={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},Nz=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Fz={allowEnterKey:void 0},zz=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],B3=r=>Object.prototype.hasOwnProperty.call(ep,r),V3=r=>Nz.indexOf(r)!==-1,U3=r=>Fz[r],Bz=r=>{B3(r)||Zo(`Unknown parameter "${r}"`)},Vz=r=>{zz.includes(r)&&Zo(`The parameter "${r}" is incompatible with toasts`)},Uz=r=>{let t=U3(r);t&&o3(r,t)},j3=r=>{r.backdrop===!1&&r.allowOutsideClick&&Zo('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),r.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(r.theme)&&Zo(`Invalid theme "${r.theme}"`);for(let t in r)Bz(t),r.toast&&Vz(t),Uz(t)};function q3(r){let t=Xo(),e=ur(),o=Lr.innerParams.get(this);if(!e||ac(e,o.hideClass.popup)){Zo("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let a=jz(r),s=Object.assign({},o,a);j3(s),t.dataset.swal2Theme=s.theme,y3(this,s),Lr.innerParams.set(this,s),Object.defineProperties(this,{params:{value:Object.assign({},this.params,r),writable:!1,enumerable:!0}})}var jz=r=>{let t={};return Object.keys(r).forEach(e=>{V3(e)?t[e]=r[e]:Zo(`Invalid parameter to update: ${e}`)}),t};function H3(){let r=Lr.domCache.get(this),t=Lr.innerParams.get(this);if(!t){$3(this);return}r.popup&&di.swalCloseEventFinishedCallback&&(di.swalCloseEventFinishedCallback(),delete di.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),di.eventEmitter.emit("didDestroy"),qz(this)}var qz=r=>{$3(r),delete r.params,delete di.keydownHandler,delete di.keydownTarget,delete di.currentInstance},$3=r=>{r.isAwaitingPromise?(Iw(Lr,r),r.isAwaitingPromise=!0):(Iw(tp,r),Iw(Lr,r),delete r.isAwaitingPromise,delete r.disableButtons,delete r.enableButtons,delete r.getInput,delete r.disableInput,delete r.enableInput,delete r.hideLoading,delete r.disableLoading,delete r.showValidationMessage,delete r.resetValidationMessage,delete r.close,delete r.closePopup,delete r.closeModal,delete r.closeToast,delete r.rejectPromise,delete r.update,delete r._destroy)},Iw=(r,t)=>{for(let e in r)r[e].delete(t)},Hz=Object.freeze({__proto__:null,_destroy:H3,close:fu,closeModal:fu,closePopup:fu,closeToast:fu,disableButtons:O3,disableInput:N3,disableLoading:fb,enableButtons:R3,enableInput:L3,getInput:k3,handleAwaitingPromise:Om,hideLoading:fb,rejectPromise:T3,resetValidationMessage:z3,showValidationMessage:F3,update:q3}),$z=(r,t,e)=>{r.toast?Gz(r,t,e):(Zz(t),Xz(t),Yz(r,t,e))},Gz=(r,t,e)=>{t.popup.onclick=()=>{r&&(Wz(r)||r.timer||r.input)||e(sp.close)}},Wz=r=>!!(r.showConfirmButton||r.showDenyButton||r.showCancelButton||r.showCloseButton),mb=!1,Zz=r=>{r.popup.onmousedown=()=>{r.container.onmouseup=function(t){r.container.onmouseup=()=>{},t.target===r.container&&(mb=!0)}}},Xz=r=>{r.container.onmousedown=t=>{t.target===r.container&&t.preventDefault(),r.popup.onmouseup=function(e){r.popup.onmouseup=()=>{},(e.target===r.popup||e.target instanceof HTMLElement&&r.popup.contains(e.target))&&(mb=!0)}}},Yz=(r,t,e)=>{t.container.onclick=o=>{if(mb){mb=!1;return}o.target===t.container&&_b(r.allowOutsideClick)&&e(sp.backdrop)}},Kz=r=>typeof r=="object"&&r.jquery,Jk=r=>r instanceof Element||Kz(r),Qz=r=>{let t={};return typeof r[0]=="object"&&!Jk(r[0])?Object.assign(t,r[0]):["title","html","icon"].forEach((e,o)=>{let a=r[o];typeof a=="string"||Jk(a)?t[e]=a:a!==void 0&&xd(`Unexpected type of ${e}! Expected "string" or "Element", got ${typeof a}`)}),t};function Jz(...r){return new this(...r)}function eB(r){class t extends this{_main(o,a){return super._main(o,Object.assign({},r,a))}}return t}var tB=()=>di.timeout&&di.timeout.getTimerLeft(),G3=()=>{if(di.timeout)return u7(),di.timeout.stop()},W3=()=>{if(di.timeout){let r=di.timeout.start();return qw(r),r}},iB=()=>{let r=di.timeout;return r&&(r.running?G3():W3())},rB=r=>{if(di.timeout){let t=di.timeout.increase(r);return qw(t,!0),t}},nB=()=>!!(di.timeout&&di.timeout.isRunning()),e3=!1,Pw={};function oB(r="data-swal-template"){Pw[r]=this,e3||(document.body.addEventListener("click",sB),e3=!0)}var sB=r=>{for(let t=r.target;t&&t!==document;t=t.parentNode)for(let e in Pw){let o=t.getAttribute(e);if(o){Pw[e].fire({template:o});return}}},Dw=class{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,e){let o=this._getHandlersByEventName(t);o.includes(e)||o.push(e)}once(t,e){let o=(...a)=>{this.removeListener(t,o),e.apply(this,a)};this.on(t,o)}emit(t,...e){this._getHandlersByEventName(t).forEach(o=>{try{o.apply(this,e)}catch(a){console.error(a)}})}removeListener(t,e){let o=this._getHandlersByEventName(t),a=o.indexOf(e);a>-1&&o.splice(a,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}};di.eventEmitter=new Dw;var aB=(r,t)=>{di.eventEmitter.on(r,t)},lB=(r,t)=>{di.eventEmitter.once(r,t)},cB=(r,t)=>{if(!r){di.eventEmitter.reset();return}t?di.eventEmitter.removeListener(r,t):di.eventEmitter.removeAllListeners(r)},uB=Object.freeze({__proto__:null,argsToParams:Qz,bindClickHandler:oB,clickCancel:Q7,clickConfirm:v3,clickDeny:K7,enableLoading:ip,fire:Jz,getActions:Pm,getCancelButton:np,getCloseButton:Bw,getConfirmButton:Sl,getContainer:Xo,getDenyButton:wd,getFocusableElements:Vw,getFooter:l3,getHtmlContainer:Fw,getIcon:rp,getIconContent:r7,getImage:a3,getInputLabel:n7,getLoader:op,getPopup:ur,getProgressSteps:zw,getTimerLeft:tB,getTimerProgressBar:yb,getTitle:s3,getValidationMessage:bb,increaseTimer:rB,isDeprecatedParameter:U3,isLoading:s7,isTimerRunning:nB,isUpdatableParameter:V3,isValidParameter:B3,isVisible:Y7,mixin:eB,off:cB,on:aB,once:lB,resumeTimer:W3,showLoading:ip,stopTimer:G3,toggleTimer:iB}),Rw=class{constructor(t,e){this.callback=t,this.remaining=e,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){let e=this.running;return e&&this.stop(),this.remaining+=t,e&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}},Z3=["swal-title","swal-html","swal-footer"],dB=r=>{let t=typeof r.template=="string"?document.querySelector(r.template):r.template;if(!t)return{};let e=t.content;return yB(e),Object.assign(hB(e),pB(e),fB(e),mB(e),gB(e),_B(e),bB(e,Z3))},hB=r=>{let t={};return Array.from(r.querySelectorAll("swal-param")).forEach(o=>{vd(o,["name","value"]);let a=o.getAttribute("name"),s=o.getAttribute("value");!a||!s||(typeof ep[a]=="boolean"?t[a]=s!=="false":typeof ep[a]=="object"?t[a]=JSON.parse(s):t[a]=s)}),t},pB=r=>{let t={};return Array.from(r.querySelectorAll("swal-function-param")).forEach(o=>{let a=o.getAttribute("name"),s=o.getAttribute("value");!a||!s||(t[a]=new Function(`return ${s}`)())}),t},fB=r=>{let t={};return Array.from(r.querySelectorAll("swal-button")).forEach(o=>{vd(o,["type","color","aria-label"]);let a=o.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(t[`${a}ButtonText`]=o.innerHTML,t[`show${Ow(a)}Button`]=!0,o.hasAttribute("color")&&(t[`${a}ButtonColor`]=o.getAttribute("color")),o.hasAttribute("aria-label")&&(t[`${a}ButtonAriaLabel`]=o.getAttribute("aria-label")))}),t},mB=r=>{let t={},e=r.querySelector("swal-image");return e&&(vd(e,["src","width","height","alt"]),e.hasAttribute("src")&&(t.imageUrl=e.getAttribute("src")||void 0),e.hasAttribute("width")&&(t.imageWidth=e.getAttribute("width")||void 0),e.hasAttribute("height")&&(t.imageHeight=e.getAttribute("height")||void 0),e.hasAttribute("alt")&&(t.imageAlt=e.getAttribute("alt")||void 0)),t},gB=r=>{let t={},e=r.querySelector("swal-icon");return e&&(vd(e,["type","color"]),e.hasAttribute("type")&&(t.icon=e.getAttribute("type")),e.hasAttribute("color")&&(t.iconColor=e.getAttribute("color")),t.iconHtml=e.innerHTML),t},_B=r=>{let t={},e=r.querySelector("swal-input");e&&(vd(e,["type","label","placeholder","value"]),t.input=e.getAttribute("type")||"text",e.hasAttribute("label")&&(t.inputLabel=e.getAttribute("label")),e.hasAttribute("placeholder")&&(t.inputPlaceholder=e.getAttribute("placeholder")),e.hasAttribute("value")&&(t.inputValue=e.getAttribute("value")));let o=Array.from(r.querySelectorAll("swal-input-option"));return o.length&&(t.inputOptions={},o.forEach(a=>{vd(a,["value"]);let s=a.getAttribute("value");if(!s)return;let _=a.innerHTML;t.inputOptions[s]=_})),t},bB=(r,t)=>{let e={};for(let o in t){let a=t[o],s=r.querySelector(a);s&&(vd(s,[]),e[a.replace(/^swal-/,"")]=s.innerHTML.trim())}return e},yB=r=>{let t=Z3.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(r.children).forEach(e=>{let o=e.tagName.toLowerCase();t.includes(o)||Zo(`Unrecognized element <${o}>`)})},vd=(r,t)=>{Array.from(r.attributes).forEach(e=>{t.indexOf(e.name)===-1&&Zo([`Unrecognized attribute "${e.name}" on <${r.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},X3=10,vB=r=>{let t=Xo(),e=ur();typeof r.willOpen=="function"&&r.willOpen(e),di.eventEmitter.emit("willOpen",e);let a=window.getComputedStyle(document.body).overflowY;CB(t,e,r),setTimeout(()=>{xB(t,e)},X3),Uw()&&(wB(t,r.scrollbarPadding,a),sz()),!vb()&&!di.previousActiveElement&&(di.previousActiveElement=document.activeElement),typeof r.didOpen=="function"&&setTimeout(()=>r.didOpen(e)),di.eventEmitter.emit("didOpen",e),_a(t,pt["no-transition"])},gb=r=>{let t=ur();if(r.target!==t)return;let e=Xo();t.removeEventListener("animationend",gb),t.removeEventListener("transitionend",gb),e.style.overflowY="auto"},xB=(r,t)=>{d3(t)?(r.style.overflowY="hidden",t.addEventListener("animationend",gb),t.addEventListener("transitionend",gb)):r.style.overflowY="auto"},wB=(r,t,e)=>{az(),t&&e!=="hidden"&&fz(e),setTimeout(()=>{r.scrollTop=0})},CB=(r,t,e)=>{hr(r,e.showClass.backdrop),e.animation?(t.style.setProperty("opacity","0","important"),Qn(t,"grid"),setTimeout(()=>{hr(t,e.showClass.popup),t.style.removeProperty("opacity")},X3)):Qn(t,"grid"),hr([document.documentElement,document.body],pt.shown),e.heightAuto&&e.backdrop&&!e.toast&&hr([document.documentElement,document.body],pt["height-auto"])},t3={email:(r,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(r)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(r,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(r)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function EB(r){r.inputValidator||(r.input==="email"&&(r.inputValidator=t3.email),r.input==="url"&&(r.inputValidator=t3.url))}function SB(r){(!r.target||typeof r.target=="string"&&!document.querySelector(r.target)||typeof r.target!="string"&&!r.target.appendChild)&&(Zo('Target parameter is not valid, defaulting to "body"'),r.target="body")}function TB(r){EB(r),r.showLoaderOnConfirm&&!r.preConfirm&&Zo(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),SB(r),typeof r.title=="string"&&(r.title=r.title.split(`
`).join("<br />")),b7(r)}var El,ab=new WeakMap,Qr=class{constructor(...t){if(X9(this,ab,void 0),typeof window>"u")return;El=this;let e=Object.freeze(this.constructor.argsToParams(t));this.params=e,this.isAwaitingPromise=!1,Y9(ab,this,this._main(El.params))}_main(t,e={}){if(j3(Object.assign({},e,t)),di.currentInstance){let s=tp.swalPromiseResolve.get(di.currentInstance),{isAwaitingPromise:_}=di.currentInstance;di.currentInstance._destroy(),_||s({isDismissed:!0}),Uw()&&C3()}di.currentInstance=El;let o=IB(t,e);TB(o),Object.freeze(o),di.timeout&&(di.timeout.stop(),delete di.timeout),clearTimeout(di.restoreFocusTimeout);let a=AB(El);return y3(El,o),Lr.innerParams.set(El,o),MB(El,a,o)}then(t){return $k(ab,this).then(t)}finally(t){return $k(ab,this).finally(t)}},MB=(r,t,e)=>new Promise((o,a)=>{let s=_=>{r.close({isDismissed:!0,dismiss:_})};tp.swalPromiseResolve.set(r,o),tp.swalPromiseReject.set(r,a),t.confirmButton.onclick=()=>{Pz(r)},t.denyButton.onclick=()=>{Dz(r)},t.cancelButton.onclick=()=>{Rz(r,s)},t.closeButton.onclick=()=>{s(sp.close)},$z(e,t,s),J7(di,e,s),wz(r,e),vB(e),kB(di,e,s),PB(t,e),setTimeout(()=>{t.container.scrollTop=0})}),IB=(r,t)=>{let e=dB(r),o=Object.assign({},ep,t,e,r);return o.showClass=Object.assign({},ep.showClass,o.showClass),o.hideClass=Object.assign({},ep.hideClass,o.hideClass),o.animation===!1&&(o.showClass={backdrop:"swal2-noanimation"},o.hideClass={}),o},AB=r=>{let t={popup:ur(),container:Xo(),actions:Pm(),confirmButton:Sl(),denyButton:wd(),cancelButton:np(),loader:op(),closeButton:Bw(),validationMessage:bb(),progressSteps:zw()};return Lr.domCache.set(r,t),t},kB=(r,t,e)=>{let o=yb();Do(o),t.timer&&(r.timeout=new Rw(()=>{e("timer"),delete r.timeout},t.timer),t.timerProgressBar&&(Qn(o),Fs(o,t,"timerProgressBar"),setTimeout(()=>{r.timeout&&r.timeout.running&&qw(t.timer)})))},PB=(r,t)=>{if(!t.toast){if(!_b(t.allowEnterKey)){o3("allowEnterKey"),OB();return}DB(r)||RB(r,t)||kw(-1,1)}},DB=r=>{let t=Array.from(r.popup.querySelectorAll("[autofocus]"));for(let e of t)if(e instanceof HTMLElement&&hs(e))return e.focus(),!0;return!1},RB=(r,t)=>t.focusDeny&&hs(r.denyButton)?(r.denyButton.focus(),!0):t.focusCancel&&hs(r.cancelButton)?(r.cancelButton.focus(),!0):t.focusConfirm&&hs(r.confirmButton)?(r.confirmButton.focus(),!0):!1,OB=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let r=new Date,t=localStorage.getItem("swal-initiation");t?(r.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let e=document.createElement("audio");e.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",e.loop=!0,document.body.appendChild(e),setTimeout(()=>{e.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${r}`)}Qr.prototype.disableButtons=O3;Qr.prototype.enableButtons=R3;Qr.prototype.getInput=k3;Qr.prototype.disableInput=N3;Qr.prototype.enableInput=L3;Qr.prototype.hideLoading=fb;Qr.prototype.disableLoading=fb;Qr.prototype.showValidationMessage=F3;Qr.prototype.resetValidationMessage=z3;Qr.prototype.close=fu;Qr.prototype.closePopup=fu;Qr.prototype.closeModal=fu;Qr.prototype.closeToast=fu;Qr.prototype.rejectPromise=T3;Qr.prototype.update=q3;Qr.prototype._destroy=H3;Object.assign(Qr,uB);Object.keys(Hz).forEach(r=>{Qr[r]=function(...t){return El&&El[r]?El[r](...t):null}});Qr.DismissReason=sp;Qr.version="11.22.0";var Xa=Qr;Xa.default=Xa;typeof document<"u"&&function(r,t){var e=r.createElement("style");if(r.getElementsByTagName("head")[0].appendChild(e),e.styleSheet)e.styleSheet.disabled||(e.styleSheet.cssText=t);else try{e.innerHTML=t}catch{e.innerText=t}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');function LB(r,t){r&1&&(K(0,"div",5),Je(1,"div",6),K(2,"p"),Se(3,"Cargando..."),ie()())}function NB(r,t){r&1&&(K(0,"span"),Se(1,"Este campo es requerido"),ie())}function FB(r,t){if(r&1&&(K(0,"div",27),Ot(1,NB,2,0,"span",28),ie()),r&2){let e,o=At(2);Be(),yt("ngIf",(e=o.userForm.get("username"))==null||e.errors==null?null:e.errors.required)}}function zB(r,t){r&1&&(K(0,"div",27),Se(1," Ingrese un correo electr\xF3nico v\xE1lido "),ie())}function BB(r,t){r&1&&(K(0,"div",27),Se(1," Este campo es requerido "),ie())}function VB(r,t){r&1&&(K(0,"div",27),Se(1," Este campo es requerido "),ie())}function UB(r,t){if(r&1&&(K(0,"small",35),Se(1),ie()),r&2){let e=At().$implicit;Be(),Ci(e.description)}}function jB(r,t){if(r&1){let e=Tr();K(0,"div",31)(1,"input",32),Qt("change",function(a){let s=Ri(e).$implicit,_=At(3);return Oi(_.onRoleChange(a,s.id))}),ie(),K(2,"label",33),Se(3),ie(),Ot(4,UB,2,1,"small",34),ie()}if(r&2){let e=t.$implicit,o=At(3);Be(),yt("id","role-"+e.id)("value",e.id)("checked",o.isRoleSelected(e.id))("disabled",o.roleAssignmentInProgress),Be(),yt("for","role-"+e.id),Be(),Ci(e.name),Be(),yt("ngIf",e.description)}}function qB(r,t){if(r&1&&(K(0,"div",10)(1,"label"),Se(2,"Roles del Sistema (opcional)"),ie(),K(3,"small"),Se(4,"Puede asignar roles ahora o m\xE1s tarde"),ie(),K(5,"div",29),Ot(6,jB,5,7,"div",30),ie()()),r&2){let e=At(2);Be(6),yt("ngForOf",e.roles)}}function HB(r,t){if(r&1&&(K(0,"small",35),Se(1),ie()),r&2){let e=At().$implicit;Be(),Ci(e.description)}}function $B(r,t){if(r&1){let e=Tr();K(0,"div",31)(1,"input",32),Qt("change",function(a){let s=Ri(e).$implicit,_=At(3);return Oi(_.onRoleChange(a,s.id,!0))}),ie(),K(2,"label",33),Se(3),ie(),Ot(4,HB,2,1,"small",34),ie()}if(r&2){let e=t.$implicit,o=At(3);Be(),yt("id","grafana-role-"+e.id)("value",e.id)("checked",o.isRoleSelected(e.id,!0))("disabled",o.roleAssignmentInProgress),Be(),yt("for","grafana-role-"+e.id),Be(),Ci(e.name),Be(),yt("ngIf",e.description)}}function GB(r,t){if(r&1&&(K(0,"div",27),Se(1),ie()),r&2){let e=At(3);Be(),Ci(e.roleError)}}function WB(r,t){if(r&1&&(K(0,"div",10)(1,"label"),Se(2,"Roles de Grafana (opcional)"),ie(),K(3,"small"),Se(4,"Puede asignar roles ahora o m\xE1s tarde"),ie(),K(5,"div",29),Ot(6,$B,5,7,"div",30),ie(),Ot(7,GB,2,1,"div",12),ie()),r&2){let e=At(2);Be(6),yt("ngForOf",e.grafanaRoles),Be(),yt("ngIf",e.roleError)}}function ZB(r,t){if(r&1){let e=Tr();K(0,"button",36),Qt("click",function(){Ri(e);let a=At(2);return Oi(a.cancelEdit())}),Se(1,"Cancelar"),ie()}}function XB(r,t){if(r&1&&(K(0,"span",44),Se(1),ie()),r&2){let e=t.$implicit;Be(),Ci(e.name)}}function YB(r,t){r&1&&(K(0,"span",45),Se(1,"Sin roles"),ie())}function KB(r,t){if(r&1&&(K(0,"span",46),Se(1),ie()),r&2){let e=t.$implicit;Be(),Ci(e.name)}}function QB(r,t){r&1&&(K(0,"span",45),Se(1,"Sin roles"),ie())}function JB(r,t){if(r&1){let e=Tr();K(0,"tr")(1,"td"),Se(2),ie(),K(3,"td"),Se(4),ie(),K(5,"td"),Se(6),ie(),K(7,"td")(8,"span"),Se(9),ie()(),K(10,"td"),Ot(11,XB,2,1,"span",37)(12,YB,2,0,"span",38),ie(),K(13,"td"),Ot(14,KB,2,1,"span",39)(15,QB,2,0,"span",38),ie(),K(16,"td",40)(17,"button",41),Qt("click",function(){let a=Ri(e).$implicit,s=At(2);return Oi(s.editUser(a))}),Se(18,"Editar"),ie(),K(19,"button",42),Qt("click",function(){let a=Ri(e).$implicit,s=At(2);return Oi(s.assignRoles(a))}),Se(20,"Asignar Roles"),ie(),K(21,"button",43),Qt("click",function(){let a=Ri(e).$implicit,s=At(2);return Oi(s.confirmDelete(a.id))}),Se(22,"Eliminar"),ie()()()}if(r&2){let e=t.$implicit;Be(2),Ku("",e.firstName," ",e.lastName,""),Be(2),Ci(e.email),Be(2),Ci(e.username),Be(2),lr("active",e.enabled)("inactive",!e.enabled),Be(),$r(" ",e.enabled?"Activo":"Inactivo"," "),Be(2),yt("ngForOf",e.roles),Be(),yt("ngIf",!e.roles||e.roles.length===0),Be(2),yt("ngForOf",e.grafanaRoles),Be(),yt("ngIf",!e.grafanaRoles||e.grafanaRoles.length===0)}}function eV(r,t){r&1&&(K(0,"div",47),Se(1," No se encontraron usuarios "),ie())}function tV(r,t){if(r&1){let e=Tr();K(0,"div",7)(1,"div",8)(2,"h2"),Se(3),ie(),K(4,"form",9),Qt("ngSubmit",function(){Ri(e);let a=At();return Oi(a.selectedUser?a.updateUser():a.createUser())}),K(5,"div",10)(6,"label"),Se(7,"Nombre de usuario *"),ie(),Je(8,"input",11),Ot(9,FB,2,1,"div",12),ie(),K(10,"div",10)(11,"label"),Se(12,"Correo electr\xF3nico *"),ie(),Je(13,"input",13),Ot(14,zB,2,0,"div",12),ie(),K(15,"div",10)(16,"label"),Se(17,"Nombre *"),ie(),Je(18,"input",14),Ot(19,BB,2,0,"div",12),ie(),K(20,"div",10)(21,"label"),Se(22,"Apellido *"),ie(),Je(23,"input",15),Ot(24,VB,2,0,"div",12),ie(),K(25,"div",10)(26,"label"),Se(27,"Contrase\xF1a (opcional)"),ie(),Je(28,"input",16),K(29,"small"),Se(30,"Puede asignar una contrase\xF1a ahora o m\xE1s tarde"),ie()(),K(31,"div",10)(32,"label"),Se(33,"Habilitado"),ie(),Je(34,"input",17),ie(),Ot(35,qB,7,1,"div",18)(36,WB,8,2,"div",18),K(37,"div",19)(38,"button",20),Se(39),ie(),Ot(40,ZB,2,0,"button",21),ie()()(),K(41,"div",22)(42,"h2"),Se(43,"Lista de Usuarios"),ie(),K(44,"div",23)(45,"input",24),Ps("ngModelChange",function(a){Ri(e);let s=At();return ks(s.searchTerm,a)||(s.searchTerm=a),Oi(a)}),Qt("input",function(){Ri(e);let a=At();return Oi(a.filterUsers())}),ie()(),K(46,"table")(47,"thead")(48,"tr")(49,"th"),Se(50,"Nombre"),ie(),K(51,"th"),Se(52,"Correo"),ie(),K(53,"th"),Se(54,"Usuario"),ie(),K(55,"th"),Se(56,"Estado"),ie(),K(57,"th"),Se(58,"Roles Sistema"),ie(),K(59,"th"),Se(60,"Roles Grafana"),ie(),K(61,"th"),Se(62,"Acciones"),ie()()(),K(63,"tbody"),Ot(64,JB,23,13,"tr",25),ie()(),Ot(65,eV,2,0,"div",26),ie()()}if(r&2){let e,o,a,s,_=At();Be(3),Ci(_.selectedUser?"Editar Usuario":"Crear Usuario"),Be(),yt("formGroup",_.userForm),Be(4),yt("disabled",!!_.selectedUser),Be(),yt("ngIf",((e=_.userForm.get("username"))==null?null:e.invalid)&&((e=_.userForm.get("username"))==null?null:e.touched)),Be(5),yt("ngIf",((o=_.userForm.get("email"))==null?null:o.invalid)&&((o=_.userForm.get("email"))==null?null:o.touched)),Be(5),yt("ngIf",((a=_.userForm.get("firstName"))==null?null:a.invalid)&&((a=_.userForm.get("firstName"))==null?null:a.touched)),Be(5),yt("ngIf",((s=_.userForm.get("lastName"))==null?null:s.invalid)&&((s=_.userForm.get("lastName"))==null?null:s.touched)),Be(4),yt("placeholder",_.selectedUser?"Nueva contrase\xF1a (dejar en blanco para no cambiar)":"Ingrese contrase\xF1a (opcional)"),Be(7),yt("ngIf",_.roles.length>0),Be(),yt("ngIf",_.grafanaRoles.length>0),Be(2),yt("disabled",!_.userForm.valid||_.roleAssignmentInProgress),Be(),$r(" ",_.selectedUser?"Actualizar":"Crear"," "),Be(),yt("ngIf",_.selectedUser),Be(5),As("ngModel",_.searchTerm),Be(19),yt("ngForOf",_.filteredUsers),Be(),yt("ngIf",_.filteredUsers.length===0)}}function iV(r,t){if(r&1&&(K(0,"span",49),Se(1),ie()),r&2){let e=t.$implicit;Be(),$r(" ",e.username," ")}}function rV(r,t){r&1&&(K(0,"span"),Se(1,"Ning\xFAn usuario"),ie())}function nV(r,t){if(r&1){let e=Tr();K(0,"tr")(1,"td"),Se(2),ie(),K(3,"td"),Se(4),ie(),K(5,"td"),Ot(6,iV,2,1,"span",48)(7,rV,2,0,"span",28),ie(),K(8,"td")(9,"button",3),Qt("click",function(){let a=Ri(e).$implicit,s=At(2);return Oi(s.viewRoleDetails(a))}),Se(10,"Detalles"),ie()()()}if(r&2){let e=t.$implicit,o=At(2);Be(2),Ci(e.name),Be(2),Ci(e.description||"Sin descripci\xF3n"),Be(2),yt("ngForOf",o.getUsersWithRole(e.id)),Be(),yt("ngIf",o.getUsersWithRole(e.id).length===0)}}function oV(r,t){r&1&&(K(0,"div",47),Se(1," No se encontraron roles del sistema "),ie())}function sV(r,t){if(r&1&&(K(0,"div",7)(1,"div",22)(2,"h2"),Se(3,"Roles del Sistema"),ie(),K(4,"table")(5,"thead")(6,"tr")(7,"th"),Se(8,"Nombre"),ie(),K(9,"th"),Se(10,"Descripci\xF3n"),ie(),K(11,"th"),Se(12,"Usuarios Asignados"),ie(),K(13,"th"),Se(14,"Acciones"),ie()()(),K(15,"tbody"),Ot(16,nV,11,4,"tr",25),ie()(),Ot(17,oV,2,0,"div",26),ie()()),r&2){let e=At();Be(16),yt("ngForOf",e.roles),Be(),yt("ngIf",e.roles.length===0)}}function aV(r,t){if(r&1&&(K(0,"span",49),Se(1),ie()),r&2){let e=t.$implicit;Be(),$r(" ",e.username," ")}}function lV(r,t){r&1&&(K(0,"span"),Se(1,"Ning\xFAn usuario"),ie())}function cV(r,t){if(r&1){let e=Tr();K(0,"tr")(1,"td"),Se(2),ie(),K(3,"td"),Se(4),ie(),K(5,"td"),Ot(6,aV,2,1,"span",48)(7,lV,2,0,"span",28),ie(),K(8,"td")(9,"button",3),Qt("click",function(){let a=Ri(e).$implicit,s=At(2);return Oi(s.viewRoleDetails(a,!0))}),Se(10,"Detalles"),ie()()()}if(r&2){let e=t.$implicit,o=At(2);Be(2),Ci(e.name),Be(2),Ci(e.description||"Sin descripci\xF3n"),Be(2),yt("ngForOf",o.getUsersWithGrafanaRole(e.id)),Be(),yt("ngIf",o.getUsersWithGrafanaRole(e.id).length===0)}}function uV(r,t){r&1&&(K(0,"div",47),Se(1," No se encontraron roles de Grafana "),ie())}function dV(r,t){if(r&1&&(K(0,"div",7)(1,"div",22)(2,"h2"),Se(3,"Roles de Grafana"),ie(),K(4,"table")(5,"thead")(6,"tr")(7,"th"),Se(8,"Nombre"),ie(),K(9,"th"),Se(10,"Descripci\xF3n"),ie(),K(11,"th"),Se(12,"Usuarios Asignados"),ie(),K(13,"th"),Se(14,"Acciones"),ie()()(),K(15,"tbody"),Ot(16,cV,11,4,"tr",25),ie()(),Ot(17,uV,2,0,"div",26),ie()()),r&2){let e=At();Be(16),yt("ngForOf",e.grafanaRoles),Be(),yt("ngIf",e.grafanaRoles.length===0)}}function hV(r,t){if(r&1&&(K(0,"tr")(1,"td"),Se(2),ie(),K(3,"td"),Se(4),ie(),K(5,"td"),Se(6),ie(),K(7,"td"),Se(8),ie(),K(9,"td"),Se(10),fo(11,"date"),ie()()),r&2){let e=t.$implicit,o=At(2);Be(2),Ci(e.userId||"Sistema"),Be(2),Ci(o.getActionName(e.operationType)),Be(2),Ci(o.getResourceType(e.resourceType)),Be(2),Ci(e.details||"N/A"),Be(2),Ci($o(11,5,e.time,"dd/MM/yyyy HH:mm"))}}function pV(r,t){r&1&&(K(0,"div",47),Se(1," No se encontraron registros de auditor\xEDa "),ie())}function fV(r,t){if(r&1){let e=Tr();K(0,"div",7)(1,"h2"),Se(2,"Registros de Auditor\xEDa"),ie(),K(3,"div",50)(4,"div",51)(5,"label"),Se(6,"Filtrar por tipo:"),ie(),K(7,"select",52),Ps("ngModelChange",function(a){Ri(e);let s=At();return ks(s.auditFilter.type,a)||(s.auditFilter.type=a),Oi(a)}),Qt("change",function(){Ri(e);let a=At();return Oi(a.filterAuditLogs())}),K(8,"option",53),Se(9,"Todos"),ie(),K(10,"option",54),Se(11,"Usuarios"),ie(),K(12,"option",55),Se(13,"Roles"),ie(),K(14,"option",56),Se(15,"Roles Grafana"),ie()()(),K(16,"div",51)(17,"label"),Se(18,"Filtrar por acci\xF3n:"),ie(),K(19,"select",52),Ps("ngModelChange",function(a){Ri(e);let s=At();return ks(s.auditFilter.action,a)||(s.auditFilter.action=a),Oi(a)}),Qt("change",function(){Ri(e);let a=At();return Oi(a.filterAuditLogs())}),K(20,"option",53),Se(21,"Todas"),ie(),K(22,"option",57),Se(23,"Creaci\xF3n"),ie(),K(24,"option",58),Se(25,"Actualizaci\xF3n"),ie(),K(26,"option",59),Se(27,"Eliminaci\xF3n"),ie()()(),K(28,"button",3),Qt("click",function(){Ri(e);let a=At();return Oi(a.clearAuditFilters())}),Se(29,"Limpiar Filtros"),ie()(),K(30,"div",60)(31,"table")(32,"thead")(33,"tr")(34,"th"),Se(35,"Usuario"),ie(),K(36,"th"),Se(37,"Acci\xF3n"),ie(),K(38,"th"),Se(39,"Recurso"),ie(),K(40,"th"),Se(41,"Detalles"),ie(),K(42,"th"),Se(43,"Fecha"),ie()()(),K(44,"tbody"),Ot(45,hV,12,8,"tr",25),ie()(),Ot(46,pV,2,0,"div",26),ie()()}if(r&2){let e=At();Be(7),As("ngModel",e.auditFilter.type),Be(12),As("ngModel",e.auditFilter.action),Be(26),yt("ngForOf",e.filteredAuditLogs),Be(),yt("ngIf",e.filteredAuditLogs.length===0)}}var wb=class r{constructor(t,e){this.http=t;this.fb=e;this.initUserForm()}activeTab="usuarios";users=[];filteredUsers=[];roles=[];grafanaRoles=[];auditLogs=[];filteredAuditLogs=[];userForm;selectedUser=null;token="";searchTerm="";selectedRoles=[];selectedGrafanaRoles=[];roleAssignmentInProgress=!1;roleError="";loading=!1;auditFilter={type:"",action:""};apiUrl="http://flask-fiware.apps.preprodalcaldia.medellin.gov.co/api/keycloak";ngOnInit(){this.getToken()}initUserForm(){this.userForm=this.fb.group({username:["",[Ls.required],[this.asyncUsernameValidator.bind(this)]],email:["",[Ls.required,Ls.email]],firstName:["",Ls.required],lastName:["",Ls.required],enabled:[!0],password:[""]})}asyncUsernameValidator(t){return this.validateUsername(t.value).then(e=>e?null:{})}validateUsername(t){return vr(this,null,function*(){if(!t||this.selectedUser)return!0;try{return(yield this.http.get(`${this.apiUrl}/users?username=${t}`,{headers:this.getHeaders()}).toPromise()).length===0}catch{return!1}})}getToken(){this.loading=!0;let t={username:"admin-user@hopu.eu",password:"5uLFJdgF65DqcMbGUzArLd29L4TAAdFHAMq8"};this.http.post(`${this.apiUrl}/login`,t).subscribe({next:e=>{this.token=e.access_token,this.loadInitialData(),this.loading=!1},error:e=>{console.error("Error al obtener token:",e),this.showError("Error al iniciar sesi\xF3n","No se pudo obtener el token de autenticaci\xF3n"),this.loading=!1}})}loadInitialData(){this.loadUsers(),this.loadRoles(),this.loadGrafanaRoles(),this.loadAuditLogs()}getHeaders(){return new Ha({Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"})}loadUsers(){this.loading=!0,this.http.get(`${this.apiUrl}/users`,{headers:this.getHeaders()}).subscribe({next:t=>{this.users=t,this.filteredUsers=[...this.users],this.users.forEach(e=>{this.loadUserRoles(e.id),this.loadUserGrafanaRoles(e.id)}),this.loading=!1},error:t=>{console.error("Error al cargar usuarios:",t),this.showError("Error","No se pudieron cargar los usuarios"),this.loading=!1}})}loadUserRoles(t){this.http.get(`${this.apiUrl}/user_roles/user_id/${t}`,{headers:this.getHeaders()}).subscribe({next:e=>{let o=this.users.find(a=>a.id===t);o&&(o.roles=e,this.filterUsers())},error:e=>{console.error(`Error al cargar roles para usuario ${t}:`,e)}})}loadUserGrafanaRoles(t){this.http.get(`${this.apiUrl}/roles/user_id/${t}`,{headers:this.getHeaders()}).subscribe({next:e=>{let o=this.users.find(a=>a.id===t);o&&(o.grafanaRoles=e,this.filterUsers())},error:e=>{console.error(`Error al cargar roles de Grafana para usuario ${t}:`,e)}})}loadRoles(){this.loading=!0,this.http.get(`${this.apiUrl}/user_roles`,{headers:this.getHeaders()}).subscribe({next:t=>{this.roles=t,this.loading=!1},error:t=>{console.error("Error al cargar roles:",t),this.showError("Error","No se pudieron cargar los roles"),this.loading=!1}})}loadGrafanaRoles(){this.loading=!0,this.http.get(`${this.apiUrl}/roles`,{headers:this.getHeaders()}).subscribe({next:t=>{this.grafanaRoles=t,this.loading=!1},error:t=>{console.error("Error al cargar roles de Grafana:",t),this.showError("Error","No se pudieron cargar los roles de Grafana"),this.loading=!1}})}loadAuditLogs(){this.loading=!0,this.http.get(`${this.apiUrl}/user_logs`,{headers:this.getHeaders()}).subscribe({next:t=>{this.auditLogs=t,this.http.get(`${this.apiUrl}/role_logs`,{headers:this.getHeaders()}).subscribe({next:e=>{this.auditLogs=[...this.auditLogs,...e],this.filteredAuditLogs=[...this.auditLogs],this.filterAuditLogs(),this.loading=!1},error:e=>{console.error("Error al cargar logs de roles:",e),this.loading=!1}})},error:t=>{console.error("Error al cargar logs de usuarios:",t),this.loading=!1}})}assignSingleRole(t,e){return this.http.put(`${this.apiUrl}/roles/user_id/${t}/role_id/${e}`,{},{headers:this.getHeaders()}).toPromise()}removeSingleRole(t,e){return this.http.delete(`${this.apiUrl}/user_roles/user_id/${t}/role_id/${e}`,{headers:this.getHeaders()}).toPromise()}assignSingleGrafanaRole(t,e){return this.http.put(`${this.apiUrl}/roles/user_id/${t}/role_id/${e}`,{},{headers:this.getHeaders()}).toPromise()}removeSingleGrafanaRole(t,e){return this.http.delete(`${this.apiUrl}/roles/user_id/${t}/role_id/${e}`,{headers:this.getHeaders()}).toPromise()}onRoleChange(t,e,o=!1){return vr(this,null,function*(){if(!this.selectedUser){let a=o?this.selectedGrafanaRoles:this.selectedRoles;if(t.target.checked)a.includes(e)||a.push(e);else{let s=a.indexOf(e);s>-1&&a.splice(s,1)}return}this.roleAssignmentInProgress=!0,this.roleError="";try{t.target.checked?o?yield this.assignSingleGrafanaRole(this.selectedUser.id,e):yield this.assignSingleRole(this.selectedUser.id,e):o?yield this.removeSingleGrafanaRole(this.selectedUser.id,e):yield this.removeSingleRole(this.selectedUser.id,e),o?this.loadUserGrafanaRoles(this.selectedUser.id):this.loadUserRoles(this.selectedUser.id)}catch(a){console.error("Error al actualizar rol:",a),this.roleError="Error al actualizar el rol. Intente nuevamente.",t.target.checked=!t.target.checked}finally{this.roleAssignmentInProgress=!1}})}filterUsers(){if(!this.searchTerm){this.filteredUsers=[...this.users];return}let t=this.searchTerm.toLowerCase();this.filteredUsers=this.users.filter(e=>e.firstName&&e.firstName.toLowerCase().includes(t)||e.lastName&&e.lastName.toLowerCase().includes(t)||e.email&&e.email.toLowerCase().includes(t)||e.username&&e.username.toLowerCase().includes(t))}filterAuditLogs(){this.filteredAuditLogs=this.auditLogs.filter(t=>{let e=!0;return this.auditFilter.type&&(e=e&&t.resourceType===this.auditFilter.type),this.auditFilter.action&&(e=e&&t.operationType===this.auditFilter.action),e}).sort((t,e)=>new Date(e.time).getTime()-new Date(t.time).getTime())}clearAuditFilters(){this.auditFilter={type:"",action:""},this.filterAuditLogs()}getActionName(t){switch(t){case"CREATE":return"Creaci\xF3n";case"UPDATE":return"Actualizaci\xF3n";case"DELETE":return"Eliminaci\xF3n";default:return t}}getResourceType(t){switch(t){case"USER":return"Usuario";case"ROLE":return"Rol";default:return t}}getUsersWithRole(t){return this.users.filter(e=>e.roles&&e.roles.some(o=>o.id===t))}getUsersWithGrafanaRole(t){return this.users.filter(e=>e.grafanaRoles&&e.grafanaRoles.some(o=>o.id===t))}isRoleSelected(t,e=!1){return this.selectedUser?e?this.selectedUser.grafanaRoles&&this.selectedUser.grafanaRoles.some(o=>o.id===t):this.selectedUser.roles&&this.selectedUser.roles.some(o=>o.id===t):e?this.selectedGrafanaRoles.includes(t):this.selectedRoles.includes(t)}createUser(){if(this.userForm.valid){let t={username:this.userForm.value.username,email:this.userForm.value.email,firstName:this.userForm.value.firstName,lastName:this.userForm.value.lastName,enabled:this.userForm.value.enabled};Xa.fire({title:"Crear usuario",text:"\xBFEst\xE1 seguro de que desea crear este usuario?",icon:"question",showCancelButton:!0,confirmButtonColor:"#334155",cancelButtonColor:"#d33",confirmButtonText:"S\xED, crear",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.createUserWithRoles(t)})}}createUserWithRoles(t){this.loading=!0,this.http.post(`${this.apiUrl}/users`,t,{headers:this.getHeaders()}).subscribe({next:e=>{let o=e.id,a=this.userForm.value.password,s=[];a&&s.push(this.setUserPassword(o,a)),Promise.all(s).then(()=>{this.showSuccess("Usuario creado","El usuario ha sido creado correctamente"),this.resetFormAndReload(),this.loading=!1,Xa.fire({title:"Usuario creado",text:"\xBFDesea asignar roles ahora?",icon:"success",showCancelButton:!0,confirmButtonText:"S\xED, asignar roles",cancelButtonText:"M\xE1s tarde",confirmButtonColor:"#334155"}).then(_=>{_.isConfirmed&&this.editUser(e)})}).catch(_=>{this.showError("Error","Ocurri\xF3 un error al completar la creaci\xF3n del usuario"),console.error("Error en el proceso de creaci\xF3n:",_),this.loading=!1})},error:e=>{let o="Ocurri\xF3 un error al crear el usuario";try{let a=JSON.parse(e.error);a.errorMessage&&a.errorMessage.includes("User exists with same email")?o="Ya existe un usuario con el mismo correo electr\xF3nico":a.errorMessage&&a.errorMessage.includes("User exists with same username")&&(o="Ya existe un usuario con el mismo nombre de usuario")}catch{}this.showError("Error",o),this.loading=!1}})}setUserPassword(t,e){return new Promise((o,a)=>{let s={type:"password",value:e,temporary:!1};this.http.put(`${this.apiUrl}/password/${t}`,s,{headers:this.getHeaders()}).subscribe({next:()=>o(),error:_=>a(_)})})}assignRolesToUser(t,e){return new Promise((o,a)=>{let s={roles:e};this.http.post(`${this.apiUrl}/user_roles/user_id/${t}`,s,{headers:this.getHeaders()}).subscribe({next:()=>o(),error:_=>a(_)})})}assignGrafanaRolesToUser(t,e){return new Promise((o,a)=>{let s={roles:e};this.http.post(`${this.apiUrl}/roles/user_id/${t}`,s,{headers:this.getHeaders()}).subscribe({next:()=>o(),error:_=>a(_)})})}editUser(t){this.selectedUser=t,this.selectedRoles=t.roles?t.roles.map(e=>e.id):[],this.selectedGrafanaRoles=t.grafanaRoles?t.grafanaRoles.map(e=>e.id):[],this.userForm.patchValue({username:t.username,email:t.email,firstName:t.firstName,lastName:t.lastName,enabled:t.enabled,password:""})}assignRoles(t){this.selectedUser=t,this.selectedRoles=t.roles?t.roles.map(e=>e.id):[],this.selectedGrafanaRoles=t.grafanaRoles?t.grafanaRoles.map(e=>e.id):[],setTimeout(()=>{let e=document.querySelector(".user-form");e&&e.scrollIntoView({behavior:"smooth"})},100)}cancelEdit(){this.selectedUser=null,this.selectedRoles=[],this.selectedGrafanaRoles=[],this.userForm.reset(),this.userForm.patchValue({enabled:!0})}updateUser(){if(this.userForm.valid&&this.selectedUser){let t={email:this.userForm.value.email,firstName:this.userForm.value.firstName,lastName:this.userForm.value.lastName,enabled:this.userForm.value.enabled},e=this.selectedUser.id,o=this.userForm.value.password;Xa.fire({title:"Actualizar usuario",text:"\xBFEst\xE1 seguro de que desea actualizar este usuario?",icon:"question",showCancelButton:!0,confirmButtonColor:"#334155",cancelButtonColor:"#d33",confirmButtonText:"S\xED, actualizar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&this.updateUserWithRoles(e,t,o)})}}updateUserWithRoles(t,e,o){this.loading=!0,this.http.put(`${this.apiUrl}/users/${t}`,e,{headers:this.getHeaders()}).subscribe({next:()=>{let a=[];o&&a.push(this.setUserPassword(t,o)),this.selectedUser&&(a.push(this.updateUserRoles(t,this.selectedRoles)),a.push(this.updateUserGrafanaRoles(t,this.selectedGrafanaRoles))),Promise.all(a).then(()=>{this.showSuccess("Usuario actualizado","El usuario ha sido actualizado correctamente"),this.resetFormAndReload(),this.loading=!1}).catch(s=>{this.showError("Error","Ocurri\xF3 un error al actualizar el usuario"),console.error("Error en el proceso de actualizaci\xF3n:",s),this.loading=!1})},error:a=>{this.showError("Error","Ocurri\xF3 un error al actualizar el usuario"),console.error("Error al actualizar usuario:",a),this.loading=!1}})}updateUserRoles(t,e){return new Promise((o,a)=>{this.http.get(`${this.apiUrl}/user_roles/user_id/${t}`,{headers:this.getHeaders()}).subscribe({next:s=>{let _=s.map(A=>A.id),w=e.filter(A=>!_.includes(A)),E=_.filter(A=>!e.includes(A)),M=w.length>0?this.assignRolesToUser(t,w):Promise.resolve(),I=E.length>0?this.removeRolesFromUser(t,E):Promise.resolve();Promise.all([M,I]).then(()=>o()).catch(A=>a(A))},error:s=>a(s)})})}updateUserGrafanaRoles(t,e){return new Promise((o,a)=>{this.http.get(`${this.apiUrl}/roles/user_id/${t}`,{headers:this.getHeaders()}).subscribe({next:s=>{let _=s.map(A=>A.id),w=e.filter(A=>!_.includes(A)),E=_.filter(A=>!e.includes(A)),M=w.length>0?this.assignGrafanaRolesToUser(t,w):Promise.resolve(),I=E.length>0?this.removeGrafanaRolesFromUser(t,E):Promise.resolve();Promise.all([M,I]).then(()=>o()).catch(A=>a(A))},error:s=>a(s)})})}removeRolesFromUser(t,e){return new Promise((o,a)=>{let s={roles:e};this.http.request("DELETE",`${this.apiUrl}/user_roles/user_id/${t}`,{headers:this.getHeaders(),body:s}).subscribe({next:()=>o(),error:_=>a(_)})})}removeGrafanaRolesFromUser(t,e){return new Promise((o,a)=>{let s={roles:e};this.http.request("DELETE",`${this.apiUrl}/roles/user_id/${t}`,{headers:this.getHeaders(),body:s}).subscribe({next:()=>o(),error:_=>a(_)})})}confirmDelete(t){Xa.fire({title:"Eliminar usuario",text:"\xBFEst\xE1 seguro de que desea eliminar este usuario? Esta acci\xF3n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#334155",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.deleteUser(t)})}deleteUser(t){this.loading=!0,this.http.delete(`${this.apiUrl}/users/${t}`,{headers:this.getHeaders()}).subscribe({next:()=>{this.showSuccess("Usuario eliminado","El usuario ha sido eliminado correctamente"),this.loadUsers(),this.loading=!1},error:e=>{this.showError("Error","Ocurri\xF3 un error al eliminar el usuario"),console.error("Error al eliminar usuario:",e),this.loading=!1}})}resetFormAndReload(){this.selectedUser=null,this.selectedRoles=[],this.selectedGrafanaRoles=[],this.userForm.reset(),this.userForm.patchValue({enabled:!0}),this.loadUsers()}showSuccess(t,e){Xa.fire({icon:"success",title:t,text:e,confirmButtonColor:"#334155"})}showError(t,e){Xa.fire({icon:"error",title:t,text:e,confirmButtonColor:"#334155"})}changeTab(t){this.activeTab=t,t==="usuarios"?this.loadUsers():t==="roles"?(this.loadRoles(),this.loadGrafanaRoles()):t==="auditoria"&&this.loadAuditLogs()}viewRoleDetails(t,e=!1){let o=e?this.getUsersWithGrafanaRole(t.id):this.getUsersWithRole(t.id);Xa.fire({title:`Detalles del Rol: ${t.name}`,html:`
        <p><strong>Tipo:</strong> ${e?"Grafana":"Sistema"}</p>
        <p><strong>Descripci\xF3n:</strong> ${t.description||"No disponible"}</p>
        <p><strong>Usuarios con este rol (${o.length}):</strong></p>
        <ul>
          ${o.map(a=>`<li>${a.username} (${a.firstName} ${a.lastName})</li>`).join("")}
        </ul>
      `,confirmButtonColor:"#334155"})}static \u0275fac=function(e){return new(e||r)(wi($a),wi(p_))};static \u0275cmp=Vt({type:r,selectors:[["app-user-management"]],decls:17,vars:13,consts:[[1,"container"],["class","loading-overlay",4,"ngIf"],[1,"tabs"],[3,"click"],["class","tab-content",4,"ngIf"],[1,"loading-overlay"],[1,"spinner"],[1,"tab-content"],[1,"user-form"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","username","placeholder","Ingrese nombre de usuario",3,"disabled"],["class","error-message",4,"ngIf"],["type","email","formControlName","email","placeholder","Ingrese correo electr\xF3nico"],["type","text","formControlName","firstName","placeholder","Ingrese nombre"],["type","text","formControlName","lastName","placeholder","Ingrese apellido"],["type","password","formControlName","password",3,"placeholder"],["type","checkbox","formControlName","enabled"],["class","form-group",4,"ngIf"],[1,"form-actions"],["type","submit",3,"disabled"],["type","button",3,"click",4,"ngIf"],[1,"user-list"],[1,"search-bar"],["type","text","placeholder","Buscar usuarios...",3,"ngModelChange","input","ngModel"],[4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"error-message"],[4,"ngIf"],[1,"roles-container"],["class","role-checkbox",4,"ngFor","ngForOf"],[1,"role-checkbox"],["type","checkbox",3,"change","id","value","checked","disabled"],[3,"for"],["class","role-description",4,"ngIf"],[1,"role-description"],["type","button",3,"click"],["class","role-badge",4,"ngFor","ngForOf"],["class","no-roles",4,"ngIf"],["class","role-badge grafana-role",4,"ngFor","ngForOf"],[1,"actions"],[1,"edit-btn",3,"click"],[1,"role-btn",3,"click"],[1,"delete-btn",3,"click"],[1,"role-badge"],[1,"no-roles"],[1,"role-badge","grafana-role"],[1,"no-results"],["class","user-badge",4,"ngFor","ngForOf"],[1,"user-badge"],[1,"filters"],[1,"filter-group"],[3,"ngModelChange","change","ngModel"],["value",""],["value","USER"],["value","ROLE"],["value","GRAFANA_ROLE"],["value","CREATE"],["value","UPDATE"],["value","DELETE"],[1,"audit-logs"]],template:function(e,o){e&1&&(K(0,"div",0)(1,"h1"),Se(2,"Gesti\xF3n de Usuarios"),ie(),Ot(3,LB,4,0,"div",1),K(4,"div",2)(5,"button",3),Qt("click",function(){return o.changeTab("usuarios")}),Se(6,"Usuarios"),ie(),K(7,"button",3),Qt("click",function(){return o.changeTab("roles")}),Se(8,"Roles"),ie(),K(9,"button",3),Qt("click",function(){return o.changeTab("grafana-roles")}),Se(10,"Roles Grafana"),ie(),K(11,"button",3),Qt("click",function(){return o.changeTab("auditoria")}),Se(12,"Auditor\xEDa"),ie()(),Ot(13,tV,66,16,"div",4)(14,sV,18,2,"div",4)(15,dV,18,2,"div",4)(16,fV,47,4,"div",4),ie()),e&2&&(Be(3),yt("ngIf",o.loading),Be(2),lr("active",o.activeTab==="usuarios"),Be(2),lr("active",o.activeTab==="roles"),Be(2),lr("active",o.activeTab==="grafana-roles"),Be(2),lr("active",o.activeTab==="auditoria"),Be(2),yt("ngIf",o.activeTab==="usuarios"),Be(),yt("ngIf",o.activeTab==="roles"),Be(),yt("ngIf",o.activeTab==="grafana-roles"),Be(),yt("ngIf",o.activeTab==="auditoria"))},dependencies:[Wo,Xc,vl,Bg,f_,u_,d_,h_,lu,Px,Gh,cu,a_,hd,gm,Qc,Wh,dd],styles:['.container[_ngcontent-%COMP%]{max-width:1200px;margin-left:20%;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}h1[_ngcontent-%COMP%]{color:#334155;margin-bottom:30px;text-align:center}.tabs[_ngcontent-%COMP%]{display:flex;margin-bottom:20px;border-bottom:1px solid #e2e8f0}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background:none;border:none;cursor:pointer;font-size:16px;color:#64748b;position:relative;transition:all .3s ease}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#334155}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#334155;font-weight:700}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-1px;left:0;width:100%;height:2px;background-color:#334155}.tab-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 10px #0000001a}.user-form[_ngcontent-%COMP%]{margin-bottom:30px;padding:20px;background:#f8fafc;border-radius:8px}.user-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#334155;font-size:20px}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#334155}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:4px;font-size:14px}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus, .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#94a3b8}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-left:10px}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;font-size:12px;color:#64748b;margin-top:5px}.user-form[_ngcontent-%COMP%]   .roles-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}.user-form[_ngcontent-%COMP%]   .role-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;background:#e2e8f0;padding:5px 10px;border-radius:20px}.user-form[_ngcontent-%COMP%]   .role-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:5px}.user-form[_ngcontent-%COMP%]   .role-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;font-weight:400}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:20px}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .3s ease}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#334155;color:#fff}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#1e293b}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#cbd5e1;cursor:not-allowed}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background-color:#e2e8f0;color:#334155}.user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover{background-color:#cbd5e1}.user-list[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{margin-bottom:20px}.user-list[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:4px;font-size:14px}.user-list[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#94a3b8}.user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;border-bottom:1px solid #e2e8f0}.user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f1f5f9;color:#334155;font-weight:600}.user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.user-list[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{display:inline-block;background-color:#e2e8f0;color:#334155;padding:3px 8px;border-radius:12px;font-size:12px;margin-right:5px;margin-bottom:5px}.user-list[_ngcontent-%COMP%]   .no-roles[_ngcontent-%COMP%]{color:#94a3b8;font-style:italic;font-size:12px}.user-list[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#16a34a;font-weight:500}.user-list[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{color:#dc2626;font-weight:500}.user-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:5px}.user-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;font-size:13px;transition:background-color .3s ease}.user-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.edit-btn[_ngcontent-%COMP%]{background-color:#e0f2fe;color:#0369a1}.user-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.edit-btn[_ngcontent-%COMP%]:hover{background-color:#bae6fd}.user-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.delete-btn[_ngcontent-%COMP%]{background-color:#fee2e2;color:#b91c1c}.user-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.delete-btn[_ngcontent-%COMP%]:hover{background-color:#fecaca}.roles-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.roles-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .roles-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;border-bottom:1px solid #e2e8f0}.roles-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f1f5f9;color:#334155;font-weight:600}.roles-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.roles-list[_ngcontent-%COMP%]   .user-badge[_ngcontent-%COMP%]{display:inline-block;background-color:#e2e8f0;color:#334155;padding:3px 8px;border-radius:12px;font-size:12px;margin-right:5px;margin-bottom:5px}.audit-logs[_ngcontent-%COMP%]{margin-top:20px}.audit-logs[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.audit-logs[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.audit-logs[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#334155}.audit-logs[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #e2e8f0;border-radius:4px;font-size:14px}.audit-logs[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#94a3b8}.audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;border-bottom:1px solid #e2e8f0}.audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f1f5f9;color:#334155;font-weight:600}.audit-logs[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.no-results[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#64748b;font-style:italic}']})};var Y3=[{path:"",component:_m},{path:"login",component:_m},{path:"",component:P_,children:[{path:"inicio",component:D_},{path:"menu",component:Kh},{path:"ambiente/residuos/camiones/dashboard",component:R_},{path:"ambiente/calidad/ruido/dashboard",component:O_},{path:"reportes",component:L_},{path:"economico/digital/wifi/dashboard",component:N_},{path:"habitat/movilidad/vamosmed/dashboard",component:F_},{path:"habitat/movilidad/dashboard",component:sb},{path:"perfil/usuarios",component:wb},{path:"gobernanza/participacion/pqrs/dashboard",component:z_},{path:"whatsapp",component:B_},{path:"calidad/turismo/dashboard",component:V_},{path:"ambiente/calidad/siata/dashboard",component:U_},{path:"ambiente/residuos/camiones/mapa",component:j_},{path:"mapas/reportes",component:q_},{path:"economico/digital/wifi/mapa",component:eb,data:{ssr:!1}},{path:"habitat/movilidad/vamosmed/mapa",component:ib},{path:"ambiente/calidad/ruido/mapa",component:rb},{path:"calidad/turismo/map",component:nb},{path:"ambiente/calidad/siata/mapa",component:ob}]},{path:"**",redirectTo:"login"}];var mV="@",gV=(()=>{class r{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=Oe(YC,{optional:!0});loadingSchedulerFn=Oe(_V,{optional:!0});_engine;constructor(e,o,a,s,_){this.doc=e,this.delegate=o,this.zone=a,this.animationType=s,this.moduleImpl=_}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-GVP3UVBA.mjs").then(a=>a),o;return this.loadingSchedulerFn?o=this.loadingSchedulerFn(e):o=e(),o.catch(a=>{throw new xr(5300,!1)}).then(({\u0275createEngine:a,\u0275AnimationRendererFactory:s})=>{this._engine=a(this.animationType,this.doc);let _=new s(this.delegate,this._engine,this.zone);return this.delegate=_,_})}createRenderer(e,o){let a=this.delegate.createRenderer(e,o);if(a.\u0275type===0)return a;typeof a.throwOnSyntheticProps=="boolean"&&(a.throwOnSyntheticProps=!1);let s=new Xw(a);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(_=>{let w=_.createRenderer(e,o);s.use(w),this.scheduler?.notify(11)}).catch(_=>{s.use(a)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(o){Ig()};static \u0275prov=Rt({token:r,factory:r.\u0275fac})}return r})(),Xw=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,o,a){this.delegate.insertBefore(t,e,o,a)}removeChild(t,e,o){this.delegate.removeChild(t,e,o)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,o,a){this.delegate.setAttribute(t,e,o,a)}removeAttribute(t,e,o){this.delegate.removeAttribute(t,e,o)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,o,a){this.delegate.setStyle(t,e,o,a)}removeStyle(t,e,o){this.delegate.removeStyle(t,e,o)}setProperty(t,e,o){this.shouldReplay(e)&&this.replay.push(a=>a.setProperty(t,e,o)),this.delegate.setProperty(t,e,o)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,o){return this.shouldReplay(e)&&this.replay.push(a=>a.listen(t,e,o)),this.delegate.listen(t,e,o)}shouldReplay(t){return this.replay!==null&&t.startsWith(mV)}},_V=new Ft("");function K3(r="animations"){return Tg("NgAsyncAnimations"),Va([{provide:mh,useFactory:(t,e,o)=>new gV(t,e,o,r),deps:[Ii,wh,Xi]},{provide:Io,useValue:r==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Q3={providers:[LT(Y3),K3(),Ky()]};var J3=[{path:"**",renderMode:kn.Prerender}];var bV={providers:[zS(),$I(J3)]},eP=bE(Q3,bV);var yV=()=>oS(X0,eP),vV=yV;export{vV as default,aL as \u0275destroyAngularServerApp,GI as \u0275extractRoutesAndCreateRouteTree,sL as \u0275getOrCreateAngularServerApp};
